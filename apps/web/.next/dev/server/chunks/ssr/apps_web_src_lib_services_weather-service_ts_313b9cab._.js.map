{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/services/weather-service.ts"],"sourcesContent":["/**\n * Weather Service - NWS API Integration\n *\n * Provides weather forecasts and severe weather alerts for job scheduling\n * Uses free National Weather Service API (api.weather.gov)\n *\n * Features:\n * - 7-day forecast\n * - Hourly forecast\n * - Active weather alerts\n * - Severe weather notifications\n */\n\nimport { z } from \"zod\";\n\nconst USER_AGENT = \"Thorbis-FMS/1.0 (support@thorbis.app)\";\n\n// ============================================================================\n// Types and Schemas\n// ============================================================================\n\nconst WeatherAlertSchema = z.object({\n\tevent: z.string(),\n\theadline: z.string(),\n\tdescription: z.string(),\n\tseverity: z.enum([\"Extreme\", \"Severe\", \"Moderate\", \"Minor\", \"Unknown\"]),\n\turgency: z.enum([\"Immediate\", \"Expected\", \"Future\", \"Past\", \"Unknown\"]),\n\tonset: z.string().optional(),\n\texpires: z.string().optional(),\n\tinstruction: z.string().nullable().optional(),\n});\n\nconst WeatherPeriodSchema = z.object({\n\tnumber: z.number(),\n\tname: z.string(),\n\ttemperature: z.number(),\n\ttemperatureUnit: z.string(),\n\twindSpeed: z.string(),\n\twindDirection: z.string(),\n\tshortForecast: z.string(),\n\tdetailedForecast: z.string(),\n\tstartTime: z.string(),\n\tendTime: z.string(),\n});\n\nconst WeatherDataSchema = z.object({\n\tlocation: z.object({\n\t\tlat: z.number(),\n\t\tlon: z.number(),\n\t\tgridId: z.string().optional(),\n\t\tgridX: z.number().optional(),\n\t\tgridY: z.number().optional(),\n\t}),\n\tforecast: z\n\t\t.object({\n\t\t\tperiods: z.array(WeatherPeriodSchema),\n\t\t\tupdated: z.string().optional(), // Made optional as API doesn't always return it\n\t\t})\n\t\t.optional(),\n\thourly: z\n\t\t.object({\n\t\t\tperiods: z.array(WeatherPeriodSchema),\n\t\t\tupdated: z.string().optional(), // Made optional as API doesn't always return it\n\t\t})\n\t\t.optional(),\n\talerts: z.array(WeatherAlertSchema),\n\thasActiveAlerts: z.boolean(),\n\thighestSeverity: z.enum([\"Extreme\", \"Severe\", \"Moderate\", \"Minor\", \"None\"]),\n\tenrichedAt: z.string(),\n});\n\nexport type WeatherData = z.infer<typeof WeatherDataSchema>;\nexport type WeatherAlert = z.infer<typeof WeatherAlertSchema>;\nexport type WeatherPeriod = z.infer<typeof WeatherPeriodSchema>;\n\n// ============================================================================\n// Weather Service\n// ============================================================================\n\nexport class WeatherService {\n\tprivate readonly cache: Map<\n\t\tstring,\n\t\t{ data: WeatherData; timestamp: number }\n\t> = new Map();\n\tprivate readonly cacheTTL = 1000 * 60 * 30; // 30 minutes\n\n\t/**\n\t * Get complete weather data for a location\n\t */\n\tasync getWeatherData(lat: number, lon: number): Promise<WeatherData | null> {\n\t\tconst cacheKey = `${lat.toFixed(4)},${lon.toFixed(4)}`;\n\n\t\t// Check cache\n\t\tconst cached = this.cache.get(cacheKey);\n\t\tif (cached && Date.now() - cached.timestamp < this.cacheTTL) {\n\t\t\treturn cached.data;\n\t\t}\n\n\t\ttry {\n\t\t\t// Step 1: Get NWS grid point metadata\n\t\t\tconst pointsRes = await fetch(\n\t\t\t\t`https://api.weather.gov/points/${lat.toFixed(4)},${lon.toFixed(4)}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"User-Agent\": USER_AGENT,\n\t\t\t\t\t\tAccept: \"application/geo+json\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (!pointsRes.ok) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst pointsData = await pointsRes.json();\n\t\t\tconst properties = pointsData.properties;\n\n\t\t\t// Step 2: Fetch forecast, hourly, and alerts in parallel\n\t\t\tconst [forecastData, hourlyData, alertsData] = await Promise.all([\n\t\t\t\tproperties.forecast\n\t\t\t\t\t? this.fetchJson(properties.forecast)\n\t\t\t\t\t: Promise.resolve(null),\n\t\t\t\tproperties.forecastHourly\n\t\t\t\t\t? this.fetchJson(properties.forecastHourly)\n\t\t\t\t\t: Promise.resolve(null),\n\t\t\t\tthis.fetchJson(\n\t\t\t\t\t`https://api.weather.gov/alerts/active?point=${lat},${lon}`,\n\t\t\t\t),\n\t\t\t]);\n\n\t\t\t// Parse alerts\n\t\t\tconst alerts: WeatherAlert[] = [];\n\t\t\tlet highestSeverity: WeatherData[\"highestSeverity\"] = \"None\";\n\n\t\t\tif (alertsData?.features) {\n\t\t\t\tfor (const feature of alertsData.features) {\n\t\t\t\t\tconst props = feature.properties;\n\t\t\t\t\tconst alert: WeatherAlert = {\n\t\t\t\t\t\tevent: props.event || \"Unknown Event\",\n\t\t\t\t\t\theadline: props.headline || \"\",\n\t\t\t\t\t\tdescription: props.description || \"\",\n\t\t\t\t\t\tseverity: this.normalizeSeverity(props.severity),\n\t\t\t\t\t\turgency: this.normalizeUrgency(props.urgency),\n\t\t\t\t\t\tonset: props.onset,\n\t\t\t\t\t\texpires: props.expires,\n\t\t\t\t\t\tinstruction: props.instruction,\n\t\t\t\t\t};\n\t\t\t\t\talerts.push(alert);\n\n\t\t\t\t\t// Track highest severity\n\t\t\t\t\tif (\n\t\t\t\t\t\talert.severity !== \"Unknown\" &&\n\t\t\t\t\t\tthis.severityRank(alert.severity) >\n\t\t\t\t\t\t\tthis.severityRank(highestSeverity)\n\t\t\t\t\t) {\n\t\t\t\t\t\thighestSeverity = alert.severity as WeatherData[\"highestSeverity\"];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst weatherData: WeatherData = {\n\t\t\t\tlocation: {\n\t\t\t\t\tlat,\n\t\t\t\t\tlon,\n\t\t\t\t\tgridId: properties.gridId,\n\t\t\t\t\tgridX: properties.gridX,\n\t\t\t\t\tgridY: properties.gridY,\n\t\t\t\t},\n\t\t\t\tforecast: forecastData\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tperiods: forecastData.properties.periods.map((p: any) => ({\n\t\t\t\t\t\t\t\tnumber: p.number,\n\t\t\t\t\t\t\t\tname: p.name,\n\t\t\t\t\t\t\t\ttemperature: p.temperature,\n\t\t\t\t\t\t\t\ttemperatureUnit: p.temperatureUnit,\n\t\t\t\t\t\t\t\twindSpeed: p.windSpeed,\n\t\t\t\t\t\t\t\twindDirection: p.windDirection,\n\t\t\t\t\t\t\t\tshortForecast: p.shortForecast,\n\t\t\t\t\t\t\t\tdetailedForecast: p.detailedForecast,\n\t\t\t\t\t\t\t\tstartTime: p.startTime,\n\t\t\t\t\t\t\t\tendTime: p.endTime,\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\tupdated:\n\t\t\t\t\t\t\t\tforecastData.properties.updated ||\n\t\t\t\t\t\t\t\tforecastData.properties.generatedAt,\n\t\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\t\thourly: hourlyData\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tperiods: hourlyData.properties.periods\n\t\t\t\t\t\t\t\t.slice(0, 24)\n\t\t\t\t\t\t\t\t.map((p: any) => ({\n\t\t\t\t\t\t\t\t\tnumber: p.number,\n\t\t\t\t\t\t\t\t\tname: p.name,\n\t\t\t\t\t\t\t\t\ttemperature: p.temperature,\n\t\t\t\t\t\t\t\t\ttemperatureUnit: p.temperatureUnit,\n\t\t\t\t\t\t\t\t\twindSpeed: p.windSpeed,\n\t\t\t\t\t\t\t\t\twindDirection: p.windDirection,\n\t\t\t\t\t\t\t\t\tshortForecast: p.shortForecast,\n\t\t\t\t\t\t\t\t\tdetailedForecast: p.detailedForecast,\n\t\t\t\t\t\t\t\t\tstartTime: p.startTime,\n\t\t\t\t\t\t\t\t\tendTime: p.endTime,\n\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\tupdated:\n\t\t\t\t\t\t\t\thourlyData.properties.updated ||\n\t\t\t\t\t\t\t\thourlyData.properties.generatedAt,\n\t\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\t\talerts,\n\t\t\t\thasActiveAlerts: alerts.length > 0,\n\t\t\t\thighestSeverity,\n\t\t\t\tenrichedAt: new Date().toISOString(),\n\t\t\t};\n\n\t\t\t// Cache the result\n\t\t\tthis.cache.set(cacheKey, { data: weatherData, timestamp: Date.now() });\n\n\t\t\treturn WeatherDataSchema.parse(weatherData);\n\t\t} catch (_error) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get only active alerts for a location (faster)\n\t */\n\tasync getActiveAlerts(lat: number, lon: number): Promise<WeatherAlert[]> {\n\t\ttry {\n\t\t\tconst alertsData = await this.fetchJson(\n\t\t\t\t`https://api.weather.gov/alerts/active?point=${lat},${lon}`,\n\t\t\t);\n\n\t\t\tif (!alertsData?.features) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn alertsData.features.map((feature: any) => ({\n\t\t\t\tevent: feature.properties.event || \"Unknown Event\",\n\t\t\t\theadline: feature.properties.headline || \"\",\n\t\t\t\tdescription: feature.properties.description || \"\",\n\t\t\t\tseverity: this.normalizeSeverity(feature.properties.severity),\n\t\t\t\turgency: this.normalizeUrgency(feature.properties.urgency),\n\t\t\t\tonset: feature.properties.onset,\n\t\t\t\texpires: feature.properties.expires,\n\t\t\t\tinstruction: feature.properties.instruction,\n\t\t\t}));\n\t\t} catch (_error) {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Check if weather is suitable for outdoor work\n\t */\n\tisSuitableForOutdoorWork(weather: WeatherData): {\n\t\tsuitable: boolean;\n\t\treason?: string;\n\t} {\n\t\t// Check for severe weather alerts\n\t\tif (\n\t\t\tweather.highestSeverity === \"Extreme\" ||\n\t\t\tweather.highestSeverity === \"Severe\"\n\t\t) {\n\t\t\treturn {\n\t\t\t\tsuitable: false,\n\t\t\t\treason: \"Severe weather alert in effect\",\n\t\t\t};\n\t\t}\n\n\t\t// Check current/upcoming conditions\n\t\tif (weather.hourly?.periods?.[0]) {\n\t\t\tconst current = weather.hourly.periods[0];\n\n\t\t\t// Check for precipitation\n\t\t\tif (\n\t\t\t\tcurrent.shortForecast.toLowerCase().includes(\"rain\") ||\n\t\t\t\tcurrent.shortForecast.toLowerCase().includes(\"storm\") ||\n\t\t\t\tcurrent.shortForecast.toLowerCase().includes(\"snow\")\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tsuitable: false,\n\t\t\t\t\treason: `${current.shortForecast} expected`,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Check for extreme temperatures\n\t\t\tif (current.temperature < 32) {\n\t\t\t\treturn {\n\t\t\t\t\tsuitable: false,\n\t\t\t\t\treason: \"Freezing temperatures\",\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (current.temperature > 100) {\n\t\t\t\treturn {\n\t\t\t\t\tsuitable: false,\n\t\t\t\t\treason: \"Extreme heat\",\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn { suitable: true };\n\t}\n\n\t/**\n\t * Helper to fetch JSON with proper headers\n\t */\n\tprivate async fetchJson(url: string): Promise<any> {\n\t\tconst res = await fetch(url, {\n\t\t\theaders: {\n\t\t\t\t\"User-Agent\": USER_AGENT,\n\t\t\t\tAccept: \"application/geo+json\",\n\t\t\t},\n\t\t});\n\n\t\tif (!res.ok) {\n\t\t\tthrow new Error(`Fetch failed: ${res.status} ${url}`);\n\t\t}\n\n\t\treturn res.json();\n\t}\n\n\t/**\n\t * Normalize severity values\n\t */\n\tprivate normalizeSeverity(\n\t\tseverity: string | undefined,\n\t): WeatherAlert[\"severity\"] {\n\t\tif (!severity) {\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\tconst s = severity.toLowerCase();\n\t\tif (s.includes(\"extreme\")) {\n\t\t\treturn \"Extreme\";\n\t\t}\n\t\tif (s.includes(\"severe\")) {\n\t\t\treturn \"Severe\";\n\t\t}\n\t\tif (s.includes(\"moderate\")) {\n\t\t\treturn \"Moderate\";\n\t\t}\n\t\tif (s.includes(\"minor\")) {\n\t\t\treturn \"Minor\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\t/**\n\t * Normalize urgency values\n\t */\n\tprivate normalizeUrgency(\n\t\turgency: string | undefined,\n\t): WeatherAlert[\"urgency\"] {\n\t\tif (!urgency) {\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\tconst u = urgency.toLowerCase();\n\t\tif (u.includes(\"immediate\")) {\n\t\t\treturn \"Immediate\";\n\t\t}\n\t\tif (u.includes(\"expected\")) {\n\t\t\treturn \"Expected\";\n\t\t}\n\t\tif (u.includes(\"future\")) {\n\t\t\treturn \"Future\";\n\t\t}\n\t\tif (u.includes(\"past\")) {\n\t\t\treturn \"Past\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\t/**\n\t * Get numeric rank for severity comparison\n\t */\n\tprivate severityRank(severity: string): number {\n\t\tswitch (severity) {\n\t\t\tcase \"Extreme\":\n\t\t\t\treturn 4;\n\t\t\tcase \"Severe\":\n\t\t\t\treturn 3;\n\t\t\tcase \"Moderate\":\n\t\t\t\treturn 2;\n\t\t\tcase \"Minor\":\n\t\t\t\treturn 1;\n\t\t\tdefault:\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Clear cache\n\t */\n\tclearCache(): void {\n\t\tthis.cache.clear();\n\t}\n}\n\n// Singleton instance\nexport const weatherService = new WeatherService();\n"],"names":[],"mappings":"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"}}]
}