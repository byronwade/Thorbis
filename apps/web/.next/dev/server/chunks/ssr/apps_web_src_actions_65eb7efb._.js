module.exports = [
"[project]/apps/web/src/actions/data:a9241e [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40f3cc88585848239c5b2dd062369b4217c03e2854":"createEmailFolderAction"},"apps/web/src/actions/email-folders.ts",""] */ __turbopack_context__.s([
    "createEmailFolderAction",
    ()=>createEmailFolderAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var createEmailFolderAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("40f3cc88585848239c5b2dd062369b4217c03e2854", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createEmailFolderAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZW1haWwtZm9sZGVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gZnJvbSBcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5jb25zdCBjcmVhdGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuXHRkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuXHRjb2xvcjogei5zdHJpbmcoKS5yZWdleCgvXiNbMC05QS1GYS1mXXs2fSQvKS5vcHRpb25hbCgpLFxuXHRpY29uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcblxuY29uc3QgdXBkYXRlRm9sZGVyU2NoZW1hID0gY3JlYXRlRm9sZGVyU2NoZW1hLnBhcnRpYWwoKS5leHRlbmQoe1xuXHRpZDogei5zdHJpbmcoKS51dWlkKCksXG5cdHNvcnRfb3JkZXI6IHoubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBkZWxldGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLnV1aWQoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZvbGRlciA9IHtcblx0aWQ6IHN0cmluZztcblx0Y29tcGFueV9pZDogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdHNsdWc6IHN0cmluZztcblx0ZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG5cdGNvbG9yOiBzdHJpbmcgfCBudWxsO1xuXHRpY29uOiBzdHJpbmcgfCBudWxsO1xuXHRzb3J0X29yZGVyOiBudW1iZXI7XG5cdGlzX3N5c3RlbTogYm9vbGVhbjtcblx0aXNfYWN0aXZlOiBib29sZWFuO1xuXHRjcmVhdGVkX2J5OiBzdHJpbmcgfCBudWxsO1xuXHRjcmVhdGVkX2F0OiBzdHJpbmc7XG5cdHVwZGF0ZWRfYXQ6IHN0cmluZztcblx0ZGVsZXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IGFsbCBlbWFpbCBmb2xkZXJzIGZvciB0aGUgYWN0aXZlIGNvbXBhbnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYWlsRm9sZGVyc0FjdGlvbigpOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVycz86IEVtYWlsRm9sZGVyW107XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXHRcdGlmICghY29tcGFueUlkKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwiKlwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuZXEoXCJpc19hY3RpdmVcIiwgdHJ1ZSlcblx0XHRcdC5vcmRlcihcInNvcnRfb3JkZXJcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSlcblx0XHRcdC5vcmRlcihcIm5hbWVcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcnM6IGRhdGEgfHwgW10gfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VjY2VzczogZmFsc2UsXG5cdFx0XHRlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcblx0XHR9O1xuXHR9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVtYWlsIGZvbGRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1haWxGb2xkZXJBY3Rpb24oXG5cdGlucHV0OiB6LmluZmVyPHR5cGVvZiBjcmVhdGVGb2xkZXJTY2hlbWE+XG4pOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVyPzogRW1haWxGb2xkZXI7XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGNyZWF0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSBzbHVnIGZyb20gbmFtZVxuXHRcdGNvbnN0IHNsdWcgPSB2YWxpZGF0ZWQubmFtZVxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tK3wtKyQvZywgXCJcIik7XG5cblx0XHQvLyBDaGVjayBpZiBzbHVnIGFscmVhZHkgZXhpc3RzXG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZyB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkXCIpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5lcShcInNsdWdcIiwgc2x1Zylcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkEgZm9sZGVyIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgbWF4IHNvcnRfb3JkZXJcblx0XHRjb25zdCB7IGRhdGE6IG1heE9yZGVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwic29ydF9vcmRlclwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQub3JkZXIoXCJzb3J0X29yZGVyXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdFx0LmxpbWl0KDEpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuaW5zZXJ0KHtcblx0XHRcdFx0Y29tcGFueV9pZDogY29tcGFueUlkLFxuXHRcdFx0XHRuYW1lOiB2YWxpZGF0ZWQubmFtZSxcblx0XHRcdFx0c2x1Zyxcblx0XHRcdFx0ZGVzY3JpcHRpb246IHZhbGlkYXRlZC5kZXNjcmlwdGlvbiB8fCBudWxsLFxuXHRcdFx0XHRjb2xvcjogdmFsaWRhdGVkLmNvbG9yIHx8IG51bGwsXG5cdFx0XHRcdGljb246IHZhbGlkYXRlZC5pY29uIHx8IG51bGwsXG5cdFx0XHRcdHNvcnRfb3JkZXI6IChtYXhPcmRlcj8uc29ydF9vcmRlciB8fCAwKSArIDEsXG5cdFx0XHRcdGNyZWF0ZWRfYnk6IHVzZXIuaWQsXG5cdFx0XHR9KVxuXHRcdFx0LnNlbGVjdCgpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcjogZGF0YSB9O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJvcjogZXJyb3IuZXJyb3JzLm1hcCgoZSkgPT4gYCR7ZS5wYXRoLmpvaW4oXCIuXCIpfTogJHtlLm1lc3NhZ2V9YCkuam9pbihcIiwgXCIpLFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0ZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG5cdFx0fTtcblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZSBhbiBlbWFpbCBmb2xkZXJcbiAqIEBkZXByZWNhdGVkIFVudXNlZFxuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbEZvbGRlckFjdGlvbihcblx0aW5wdXQ6IHouaW5mZXI8dHlwZW9mIHVwZGF0ZUZvbGRlclNjaGVtYT5cbik6IFByb21pc2U8e1xuXHRzdWNjZXNzOiBib29sZWFuO1xuXHRmb2xkZXI/OiBFbWFpbEZvbGRlcjtcblx0ZXJyb3I/OiBzdHJpbmc7XG59PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgdmFsaWRhdGVkID0gdXBkYXRlRm9sZGVyU2NoZW1hLnBhcnNlKGlucHV0KTtcblx0XHRjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcblx0XHRpZiAoIWNvbXBhbnlJZCkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9sZGVyIGV4aXN0cyBhbmQgYmVsb25ncyB0byBjb21wYW55XG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImVtYWlsX2ZvbGRlcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgaXNfc3lzdGVtXCIpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChmZXRjaEVycm9yIHx8ICFleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZvbGRlciBub3QgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGlmIChleGlzdGluZy5pc19zeXN0ZW0pIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDYW5ub3QgdXBkYXRlIHN5c3RlbSBmb2xkZXJzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBJZiBuYW1lIGlzIGJlaW5nIHVwZGF0ZWQsIHJlZ2VuZXJhdGUgc2x1Z1xuXHRcdGNvbnN0IHVwZGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG5cdFx0aWYgKHZhbGlkYXRlZC5uYW1lKSB7XG5cdFx0XHR1cGRhdGVEYXRhLm5hbWUgPSB2YWxpZGF0ZWQubmFtZTtcblx0XHRcdHVwZGF0ZURhdGEuc2x1ZyA9IHZhbGlkYXRlZC5uYW1lXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1teYS16MC05XSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLSt8LSskL2csIFwiXCIpO1xuXHRcdH1cblx0XHRpZiAodmFsaWRhdGVkLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSB2YWxpZGF0ZWQuZGVzY3JpcHRpb247XG5cdFx0aWYgKHZhbGlkYXRlZC5jb2xvciAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmNvbG9yID0gdmFsaWRhdGVkLmNvbG9yO1xuXHRcdGlmICh2YWxpZGF0ZWQuaWNvbiAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmljb24gPSB2YWxpZGF0ZWQuaWNvbjtcblx0XHRpZiAodmFsaWRhdGVkLnNvcnRfb3JkZXIgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zb3J0X29yZGVyID0gdmFsaWRhdGVkLnNvcnRfb3JkZXI7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQudXBkYXRlKHVwZGF0ZURhdGEpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5zZWxlY3QoKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBmb2xkZXI6IGRhdGEgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYW4gZW1haWwgZm9sZGVyIChzb2Z0IGRlbGV0ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUVtYWlsRm9sZGVyQWN0aW9uKFxuXHRpbnB1dDogei5pbmZlcjx0eXBlb2YgZGVsZXRlRm9sZGVyU2NoZW1hPlxuKTogUHJvbWlzZTx7XG5cdHN1Y2Nlc3M6IGJvb2xlYW47XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGRlbGV0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb2xkZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGV4aXN0aW5nLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBpc19zeXN0ZW1cIilcblx0XHRcdC5lcShcImlkXCIsIHZhbGlkYXRlZC5pZClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGZldGNoRXJyb3IgfHwgIWV4aXN0aW5nKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRm9sZGVyIG5vdCBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0aWYgKGV4aXN0aW5nLmlzX3N5c3RlbSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkNhbm5vdCBkZWxldGUgc3lzdGVtIGZvbGRlcnNcIiB9O1xuXHRcdH1cblxuXHRcdC8vIFNvZnQgZGVsZXRlXG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnVwZGF0ZSh7XG5cdFx0XHRcdGRlbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdFx0ZGVsZXRlZF9ieTogdXNlci5pZCxcblx0XHRcdFx0aXNfYWN0aXZlOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzVEFtRnNCIn0=
}),
"[project]/apps/web/src/actions/data:9a66c0 [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00892ae3dc26e893f6e8f855ffbcbb3236013a3063":"getEmailFolderCountsAction"},"apps/web/src/actions/email-actions.ts",""] */ __turbopack_context__.s([
    "getEmailFolderCountsAction",
    ()=>getEmailFolderCountsAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var getEmailFolderCountsAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("00892ae3dc26e893f6e8f855ffbcbb3236013a3063", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getEmailFolderCountsAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZW1haWwtYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHtcbiAgICBhcmNoaXZlQWxsRW1haWxzLFxuICAgIGdldENvbXBhbnlFbWFpbHMsXG4gICAgZ2V0RW1haWxCeUlkLFxuICAgIGdldEVtYWlsU3RhdHMsXG4gICAgZ2V0RW1haWxUaHJlYWRzLFxuICAgIG1hcmtFbWFpbEFzUmVhZCxcbiAgICB0eXBlIENvbXBhbnlFbWFpbCxcbn0gZnJvbSBcIkAvbGliL2VtYWlsL2VtYWlsLXNlcnZpY2VcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmNvbnN0IGdldEVtYWlsc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgbGltaXQ6IHouY29lcmNlLm51bWJlcigpLm1pbigxKS5tYXgoNTAwKS5vcHRpb25hbCgpLmRlZmF1bHQoNTApLFxuICBvZmZzZXQ6IHouY29lcmNlLm51bWJlcigpLm1pbigwKS5vcHRpb25hbCgpLmRlZmF1bHQoMCksXG4gIHR5cGU6IHouZW51bShbXCJzZW50XCIsIFwicmVjZWl2ZWRcIiwgXCJhbGxcIl0pLm9wdGlvbmFsKCkuZGVmYXVsdChcImFsbFwiKSxcbiAgaW5ib3hUeXBlOiB6LmVudW0oW1wicGVyc29uYWxcIiwgXCJjb21wYW55XCJdKS5vcHRpb25hbCgpLFxuICBmb2xkZXI6IHouZW51bShbXCJpbmJveFwiLCBcImRyYWZ0c1wiLCBcInNlbnRcIiwgXCJhcmNoaXZlXCIsIFwic25vb3plZFwiLCBcInNwYW1cIiwgXCJ0cmFzaFwiLCBcImJpblwiLCBcInN0YXJyZWRcIiwgXCJhbGxcIl0pLm9wdGlvbmFsKCksXG4gIGNhdGVnb3J5OiB6LmVudW0oW1wic3VwcG9ydFwiLCBcInNhbGVzXCIsIFwiYmlsbGluZ1wiLCBcImdlbmVyYWxcIl0pLm9wdGlvbmFsKCksXG4gIGxhYmVsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHNlYXJjaDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIHNvcnRCeTogei5lbnVtKFtcImNyZWF0ZWRfYXRcIiwgXCJzZW50X2F0XCIsIFwic3ViamVjdFwiXSkub3B0aW9uYWwoKS5kZWZhdWx0KFwiY3JlYXRlZF9hdFwiKSxcbiAgc29ydE9yZGVyOiB6LmVudW0oW1wiYXNjXCIsIFwiZGVzY1wiXSkub3B0aW9uYWwoKS5kZWZhdWx0KFwiZGVzY1wiKSxcbn0pLnBhc3N0aHJvdWdoKCk7XG5cbmNvbnN0IGdldEVtYWlsVGhyZWFkc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgbGltaXQ6IHoubnVtYmVyKCkubWluKDEpLm1heCg1MCkub3B0aW9uYWwoKS5kZWZhdWx0KDIwKSxcbiAgb2Zmc2V0OiB6Lm51bWJlcigpLm1pbigwKS5vcHRpb25hbCgpLmRlZmF1bHQoMCksXG4gIHNlYXJjaDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IG1hcmtFbWFpbFJlYWRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVtYWlsSWQ6IHouc3RyaW5nKCkubWluKDEpLFxufSk7XG5cbmV4cG9ydCB0eXBlIEdldEVtYWlsc0lucHV0ID0gei5pbmZlcjx0eXBlb2YgZ2V0RW1haWxzU2NoZW1hPjtcbmV4cG9ydCB0eXBlIEdldEVtYWlsVGhyZWFkc0lucHV0ID0gei5pbmZlcjx0eXBlb2YgZ2V0RW1haWxUaHJlYWRzU2NoZW1hPjtcbmV4cG9ydCB0eXBlIE1hcmtFbWFpbFJlYWRJbnB1dCA9IHouaW5mZXI8dHlwZW9mIG1hcmtFbWFpbFJlYWRTY2hlbWE+O1xuXG4vLyBSZS1leHBvcnQgZW1haWwgdHlwZXMgZnJvbSBlbWFpbC1zZXJ2aWNlXG5leHBvcnQgdHlwZSB7IENvbXBhbnlFbWFpbCB9O1xuXG5leHBvcnQgdHlwZSBHZXRFbWFpbHNSZXN1bHQgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGdldENvbXBhbnlFbWFpbHM+PjtcbmV4cG9ydCB0eXBlIEdldEVtYWlsVGhyZWFkc1Jlc3VsdCA9IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0RW1haWxUaHJlYWRzPj47XG5leHBvcnQgdHlwZSBHZXRFbWFpbFN0YXRzUmVzdWx0ID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRFbWFpbFN0YXRzPj47XG5cbi8qKlxuICogR2V0IGVtYWlscyBmb3IgdGhlIGFjdGl2ZSBjb21wYW55XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbWFpbHNBY3Rpb24oXG4gIGlucHV0OiBHZXRFbWFpbHNJbnB1dFxuKTogUHJvbWlzZTxHZXRFbWFpbHNSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZVJlc3VsdCA9IGdldEVtYWlsc1NjaGVtYS5zYWZlUGFyc2UoaW5wdXQpO1xuICAgIFxuICAgIGlmICghcGFyc2VSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBab2QgdmFsaWRhdGlvbiBlcnJvcjpcIiwgcGFyc2VSZXN1bHQuZXJyb3IuaXNzdWVzKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpbnB1dCBwYXJhbWV0ZXJzOiAke3BhcnNlUmVzdWx0LmVycm9yLmlzc3Vlcy5tYXAoKGUpID0+IGAke2UucGF0aC5tYXAoU3RyaW5nKS5qb2luKCcuJyl9OiAke2UubWVzc2FnZX1gKS5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB2YWxpZGF0ZWRJbnB1dCA9IHBhcnNlUmVzdWx0LmRhdGE7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgbnVsbCB0byB1bmRlZmluZWQgZm9yIHNlYXJjaCBmaWVsZFxuICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0ge1xuICAgICAgLi4udmFsaWRhdGVkSW5wdXQsXG4gICAgICBzZWFyY2g6IHZhbGlkYXRlZElucHV0LnNlYXJjaCA/PyB1bmRlZmluZWQsXG4gICAgfTtcbiAgICByZXR1cm4gYXdhaXQgZ2V0Q29tcGFueUVtYWlscyhjb21wYW55SWQsIHNhbml0aXplZElucHV0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIGdldEVtYWlsc0FjdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGVtYWlsIHRocmVhZHMgZm9yIHRoZSBhY3RpdmUgY29tcGFueVxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRFbWFpbFRocmVhZHNBY3Rpb24oXG4gIGlucHV0OiBHZXRFbWFpbFRocmVhZHNJbnB1dFxuKTogUHJvbWlzZTxHZXRFbWFpbFRocmVhZHNSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2YWxpZGF0ZWRJbnB1dCA9IGdldEVtYWlsVGhyZWFkc1NjaGVtYS5wYXJzZShpbnB1dCk7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBnZXRFbWFpbFRocmVhZHMoY29tcGFueUlkLCB2YWxpZGF0ZWRJbnB1dCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCBwYXJhbWV0ZXJzXCIpO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHNwZWNpZmljIGVtYWlsIGJ5IElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbWFpbEJ5SWRBY3Rpb24oZW1haWxJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGVtYWlsPzogQ29tcGFueUVtYWlsO1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCBlbWFpbCA9IGF3YWl0IGdldEVtYWlsQnlJZChjb21wYW55SWQsIGVtYWlsSWQpO1xuICAgIFxuICAgIGlmICghZW1haWwpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJFbWFpbCBub3QgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGVtYWlsIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZW1haWwgYnkgSUQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogTWFyayBhbiBlbWFpbCBhcyByZWFkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrRW1haWxBc1JlYWRBY3Rpb24oXG4gIGlucHV0OiBNYXJrRW1haWxSZWFkSW5wdXRcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGVkSW5wdXQgPSBtYXJrRW1haWxSZWFkU2NoZW1hLnBhcnNlKGlucHV0KTtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXJrRW1haWxBc1JlYWQoY29tcGFueUlkLCB2YWxpZGF0ZWRJbnB1dC5lbWFpbElkKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZhaWxlZCB0byBtYXJrIGVtYWlsIGFzIHJlYWQgLSBjaGVjayBzZXJ2ZXIgbG9ncyBmb3IgZGV0YWlsc1wiIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBJbnZhbGlkIGlucHV0OiAke2Vycm9yLmlzc3Vlcy5tYXAoKGU6IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IGUubWVzc2FnZSkuam9pbihcIiwgXCIpfWAgfTtcbiAgICB9XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWFya2luZyBlbWFpbCBhcyByZWFkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBlbWFpbCBzdGF0aXN0aWNzIGZvciB0aGUgYWN0aXZlIGNvbXBhbnlcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW1haWxTdGF0c0FjdGlvbigpOiBQcm9taXNlPEdldEVtYWlsU3RhdHNSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IGdldEVtYWlsU3RhdHMoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBlbWFpbCBzdGF0czpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEVtYWlsczogMCxcbiAgICAgIHNlbnRFbWFpbHM6IDAsXG4gICAgICByZWNlaXZlZEVtYWlsczogMCxcbiAgICAgIHVucmVhZEVtYWlsczogMCxcbiAgICAgIHRocmVhZHNDb3VudDogMCxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRvdGFsIHVucmVhZCBlbWFpbCBjb3VudCBmb3IgdGhlIGFjdGl2ZSBjb21wYW55XG4gKiBVc2VkIGZvciBkaXNwbGF5aW5nIG5vdGlmaWNhdGlvbiBiYWRnZXMgaW4gdGhlIGhlYWRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxVbnJlYWRDb3VudEFjdGlvbigpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgY291bnQ/OiBudW1iZXI7XG4gIGVycm9yPzogc3RyaW5nXG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBnZXRFbWFpbFN0YXRzKCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgY291bnQ6IHN0YXRzLnVucmVhZEVtYWlscyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHVucmVhZCBjb3VudDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIGVtYWlsIGNvbnRlbnQgZnJvbSBSZXNlbmQgQVBJIG9yIHVwZGF0ZSB3aXRoIHByb3ZpZGVkIGNvbnRlbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoRW1haWxDb250ZW50QWN0aW9uKFxuICBlbWFpbElkOiBzdHJpbmcsXG4gIF9yZXNlbmRFbWFpbElkPzogc3RyaW5nLFxuICBwcm92aWRlZENvbnRlbnQ/OiB7IGh0bWw/OiBzdHJpbmcgfCBudWxsOyB0ZXh0Pzogc3RyaW5nIHwgbnVsbCB9XG4pOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgaHRtbD86IHN0cmluZyB8IG51bGw7XG4gIHRleHQ/OiBzdHJpbmcgfCBudWxsO1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICBsZXQgaHRtbDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IHRleHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8gSWYgY29udGVudCBpcyBwcm92aWRlZCBkaXJlY3RseSwgdXNlIGl0XG4gICAgaWYgKHByb3ZpZGVkQ29udGVudCkge1xuICAgICAgaHRtbCA9IHByb3ZpZGVkQ29udGVudC5odG1sIHx8IG51bGw7XG4gICAgICB0ZXh0ID0gcHJvdmlkZWRDb250ZW50LnRleHQgfHwgbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmlyc3QsIHRyeSB0byBnZXQgZW1haWwgZnJvbSBkYXRhYmFzZSB0byBjaGVjayBmb3IgY29udGVudCBpbiBtZXRhZGF0YVxuICAgICAgY29uc3QgeyBkYXRhOiBlbWFpbCwgZXJyb3I6IGVtYWlsRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLnNlbGVjdChcInByb3ZpZGVyX21lc3NhZ2VfaWQsIHByb3ZpZGVyX21ldGFkYXRhLCBib2R5LCBib2R5X2h0bWxcIilcbiAgICAgICAgLmVxKFwiaWRcIiwgZW1haWxJZClcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKGVtYWlsRXJyb3IpIHtcbiAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIGVycm9yIGZvciBQR1JTVCBlcnJvcnMgdGhhdCBtaWdodCBiZSBleHBlY3RlZFxuICAgICAgICBpZiAoZW1haWxFcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkVtYWlsIG5vdCBmb3VuZCBpbiBkYXRhYmFzZVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgRGF0YWJhc2UgZXJyb3I6ICR7ZW1haWxFcnJvci5tZXNzYWdlfWAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbWFpbCkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlXCIgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgZW1haWwgYWxyZWFkeSBoYXMgY29udGVudCBzdG9yZWRcbiAgICAgIGlmIChlbWFpbC5ib2R5X2h0bWwgfHwgZW1haWwuYm9keSkge1xuICAgICAgICBodG1sID0gZW1haWwuYm9keV9odG1sIHx8IG51bGw7XG4gICAgICAgIHRleHQgPSBlbWFpbC5ib2R5IHx8IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKGVtYWlsLnByb3ZpZGVyX21ldGFkYXRhKSB7XG4gICAgICAgIC8vIFRyeSB0byBleHRyYWN0IGNvbnRlbnQgZnJvbSBwcm92aWRlcl9tZXRhZGF0YVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGVtYWlsLnByb3ZpZGVyX21ldGFkYXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICBcbiAgICAgICAgLy8gUFJJT1JJVFkgMTogQ2hlY2sgd2ViaG9va19jb250ZW50IGZpcnN0ICh3ZWJob29rIHBheWxvYWQgLSBtb3N0IHJlbGlhYmxlIHNvdXJjZSlcbiAgICAgICAgY29uc3Qgd2ViaG9va0NvbnRlbnQgPSBtZXRhZGF0YS53ZWJob29rX2NvbnRlbnQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh3ZWJob29rQ29udGVudCkge1xuICAgICAgICAgIGNvbnN0IGh0bWxWYWx1ZSA9IHdlYmhvb2tDb250ZW50Lmh0bWwgfHwgd2ViaG9va0NvbnRlbnQuYm9keV9odG1sO1xuICAgICAgICAgIGNvbnN0IHRleHRWYWx1ZSA9IHdlYmhvb2tDb250ZW50LnRleHQgfHwgd2ViaG9va0NvbnRlbnQuYm9keTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaHRtbFZhbHVlICYmIHR5cGVvZiBodG1sVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBodG1sVmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBodG1sID0gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFodG1sICYmIHRleHRWYWx1ZSAmJiB0eXBlb2YgdGV4dFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gdGV4dFZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgdGV4dCA9IGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUFJJT1JJVFkgMjogQ2hlY2sgZnVsbF9jb250ZW50IChBUEkgcmVzcG9uc2UpIGlmIHdlYmhvb2sgZGlkbid0IGhhdmUgY29udGVudFxuICAgICAgICBpZiAoIWh0bWwgJiYgIXRleHQpIHtcbiAgICAgICAgICBjb25zdCBmdWxsQ29udGVudCA9IG1ldGFkYXRhLmZ1bGxfY29udGVudCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoZnVsbENvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWxGaWVsZHMgPSBbXCJodG1sXCIsIFwiYm9keV9odG1sXCIsIFwiYm9keUh0bWxcIl07XG4gICAgICAgICAgICBjb25zdCB0ZXh0RmllbGRzID0gW1widGV4dFwiLCBcImJvZHlcIiwgXCJwbGFpbl90ZXh0XCIsIFwicGxhaW5UZXh0XCJdO1xuXG4gICAgICAgICAgICAvLyBUcnkgSFRNTCBmaWVsZHMgZmlyc3RcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgaHRtbEZpZWxkcykge1xuICAgICAgICAgICAgICBpZiAoZnVsbENvbnRlbnRbZmllbGRdICYmIHR5cGVvZiBmdWxsQ29udGVudFtmaWVsZF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gKGZ1bGxDb250ZW50W2ZpZWxkXSBhcyBzdHJpbmcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBodG1sID0gY29udGVudDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBubyBIVE1MLCB0cnkgdGV4dCBmaWVsZHNcbiAgICAgICAgICAgIGlmICghaHRtbCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHRleHRGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnVsbENvbnRlbnRbZmllbGRdICYmIHR5cGVvZiBmdWxsQ29udGVudFtmaWVsZF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAoZnVsbENvbnRlbnRbZmllbGRdIGFzIHN0cmluZykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUFJJT1JJVFkgMzogQ2hlY2sgdG9wLWxldmVsIG1ldGFkYXRhLmRhdGEgZm9yIGNvbnRlbnQgKHdlYmhvb2sgcGF5bG9hZCBzdHJ1Y3R1cmUpXG4gICAgICAgIGlmICghaHRtbCAmJiAhdGV4dCkge1xuICAgICAgICAgIGNvbnN0IHdlYmhvb2tEYXRhID0gbWV0YWRhdGEuZGF0YSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAod2ViaG9va0RhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWxWYWx1ZSA9IHdlYmhvb2tEYXRhLmh0bWwgfHwgd2ViaG9va0RhdGEuYm9keV9odG1sO1xuICAgICAgICAgICAgY29uc3QgdGV4dFZhbHVlID0gd2ViaG9va0RhdGEudGV4dCB8fCB3ZWJob29rRGF0YS5ib2R5O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaHRtbFZhbHVlICYmIHR5cGVvZiBodG1sVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGh0bWxWYWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBodG1sID0gY29udGVudDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFodG1sICYmIHRleHRWYWx1ZSAmJiB0eXBlb2YgdGV4dFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0ZXh0VmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IGNvbnRlbnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQUklPUklUWSA0OiBDaGVjayB0b3AtbGV2ZWwgbWV0YWRhdGEgZmllbGRzIGRpcmVjdGx5XG4gICAgICAgIGlmICghaHRtbCAmJiAhdGV4dCkge1xuICAgICAgICAgIGNvbnN0IGh0bWxGaWVsZHMgPSBbXCJodG1sXCIsIFwiYm9keV9odG1sXCJdO1xuICAgICAgICAgIGNvbnN0IHRleHRGaWVsZHMgPSBbXCJ0ZXh0XCIsIFwiYm9keVwiXTtcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGh0bWxGaWVsZHMpIHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YVtmaWVsZF0gJiYgdHlwZW9mIG1ldGFkYXRhW2ZpZWxkXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gKG1ldGFkYXRhW2ZpZWxkXSBhcyBzdHJpbmcpLnRyaW0oKTtcbiAgICAgICAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGh0bWwgPSBjb250ZW50O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmICghaHRtbCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiB0ZXh0RmllbGRzKSB7XG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YVtmaWVsZF0gJiYgdHlwZW9mIG1ldGFkYXRhW2ZpZWxkXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAobWV0YWRhdGFbZmllbGRdIGFzIHN0cmluZykudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIHRleHQgPSBjb250ZW50O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2UgZm91bmQgY29udGVudCBpbiBtZXRhZGF0YSwgdXNlIGl0IGFuZCByZXR1cm4gZWFybHlcbiAgICAgICAgaWYgKGh0bWwgfHwgdGV4dCkge1xuICAgICAgICAgIC8vIFVwZGF0ZSBkYXRhYmFzZSB3aXRoIGV4dHJhY3RlZCBjb250ZW50XG4gICAgICAgICAgaWYgKChodG1sIHx8IHRleHQpICYmIHN1cGFiYXNlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBib2R5OiB0ZXh0IHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgYm9keV9odG1sOiBodG1sLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXEoXCJpZFwiLCBlbWFpbElkKVxuICAgICAgICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZCk7XG5cbiAgICAgICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gIEZhaWxlZCB0byB1cGRhdGUgZW1haWwgY29udGVudCBpbiBkYXRhYmFzZTpcIiwgdXBkYXRlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGh0bWwsIHRleHQgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyBjb250ZW50IGZvdW5kIGluIG1ldGFkYXRhXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IFwiTm8gZW1haWwgY29udGVudCBhdmFpbGFibGUgaW4gbWV0YWRhdGFcIlxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIG1ldGFkYXRhIGF0IGFsbCwgY2FuJ3QgZmV0Y2ggY29udGVudFxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gZW1haWwgbWV0YWRhdGEgYXZhaWxhYmxlXCIgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIGRhdGFiYXNlIHdpdGggdGhlIGNvbnRlbnRcbiAgICAvLyBUcnkgdG8gdXBkYXRlLCBidXQgZG9uJ3QgZmFpbCBpZiB0aGUgZW1haWwgZG9lc24ndCBleGlzdCAtIHdlIHN0aWxsIHJldHVybiB0aGUgY29udGVudFxuICAgIGlmIChzdXBhYmFzZSkge1xuICAgICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgYm9keTogdGV4dCB8fCBcIlwiLFxuICAgICAgICAgIGJvZHlfaHRtbDogaHRtbCxcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKFwiaWRcIiwgZW1haWxJZClcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpO1xuXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPICBGYWlsZWQgdG8gdXBkYXRlIGVtYWlsIGNvbnRlbnQgaW4gZGF0YWJhc2UgKHRoaXMgaXMgT0ssIGNvbnRlbnQgc3RpbGwgcmV0dXJuZWQpOlwiLCB1cGRhdGVFcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBodG1sLCB0ZXh0IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVtYWlsIGNvbnRlbnQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogU3luYyBpbmJvdW5kIGVtYWlsIHJvdXRlcyBmcm9tIGRhdGFiYXNlIHRvIFJlc2VuZFxuICogQ3JlYXRlcyByb3V0ZXMgaW4gUmVzZW5kIHRoYXQgZG9uJ3QgaGF2ZSBhIHJlc2VuZF9yb3V0ZV9pZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3luY0luYm91bmRSb3V0ZXNUb1Jlc2VuZEFjdGlvbigpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgc3luY2VkOiBudW1iZXI7XG4gIGVycm9yczogc3RyaW5nW107XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiKTtcbiAgICBjb25zdCB7IGNyZWF0ZUluYm91bmRSb3V0ZSB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvZW1haWwvcmVzZW5kLWRvbWFpbnNcIik7XG4gICAgY29uc3QgeyBjcmVhdGVTZXJ2aWNlU3VwYWJhc2VDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZpY2UtY2xpZW50XCIpO1xuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgc3luY2VkOiAwLCBlcnJvcnM6IFtcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCJdIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc2VydmljZVN1cGFiYXNlID0gYXdhaXQgY3JlYXRlU2VydmljZVN1cGFiYXNlQ2xpZW50KCk7XG4gICAgaWYgKCFzZXJ2aWNlU3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBzeW5jZWQ6IDAsIGVycm9yczogW1wiU2VydmljZSBkYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiXSB9O1xuICAgIH1cblxuICAgIC8vIEdldCBhbGwgcm91dGVzIHRoYXQgZG9uJ3QgaGF2ZSBhIHJlc2VuZF9yb3V0ZV9pZFxuICAgIC8vIE5vdGU6IFRoaXMgdGFibGUgbWF5IG5vdCBiZSBpbiB0aGUgdHlwZSBkZWZpbml0aW9ucywgc28gd2UgdXNlIHR5cGUgYXNzZXJ0aW9uXG4gICAgY29uc3QgeyBkYXRhOiByb3V0ZXMsIGVycm9yIH0gPSBhd2FpdCAoc2VydmljZVN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25fZW1haWxfaW5ib3VuZF9yb3V0ZXNcIiBhcyBhbnkpXG4gICAgICAuc2VsZWN0KFwiaWQsIGNvbXBhbnlfaWQsIHJvdXRlX2FkZHJlc3MsIG5hbWUsIGVuYWJsZWRcIilcbiAgICAgIC5pcyhcInJlc2VuZF9yb3V0ZV9pZFwiLCBudWxsKVxuICAgICAgLmVxKFwiZW5hYmxlZFwiLCB0cnVlKSBhcyBhbnkpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHJvdXRlczpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHN5bmNlZDogMCwgZXJyb3JzOiBbZXJyb3IubWVzc2FnZV0gfTtcbiAgICB9XG5cbiAgICBpZiAoIXJvdXRlcyB8fCByb3V0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBzeW5jZWQ6IDAsIGVycm9yczogW10gfTtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3Qgd2ViaG9vayBVUkxcbiAgICBsZXQgd2ViaG9va1VybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVVJMO1xuICAgIGlmICghd2ViaG9va1VybCAmJiBwcm9jZXNzLmVudi5WRVJDRUxfVVJMKSB7XG4gICAgICB3ZWJob29rVXJsID0gYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5WRVJDRUxfVVJMfWA7XG4gICAgfVxuICAgIGlmICghd2ViaG9va1VybCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHN5bmNlZDogMCwgZXJyb3JzOiBbXCJXZWJob29rIFVSTCBub3QgY29uZmlndXJlZC4gU2V0IE5FWFRfUFVCTElDX1NJVEVfVVJMIG9yIFZFUkNFTF9VUkxcIl0gfTtcbiAgICB9XG4gICAgd2ViaG9va1VybCA9IGAke3dlYmhvb2tVcmx9L2FwaS93ZWJob29rcy9yZXNlbmRgO1xuXG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBzeW5jZWQgPSAwO1xuXG4gICAgZm9yIChjb25zdCByb3V0ZSBvZiAocm91dGVzIHx8IFtdKSBhcyBBcnJheTx7IGlkOiBzdHJpbmc7IGNvbXBhbnlfaWQ6IHN0cmluZzsgcm91dGVfYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyBlbmFibGVkOiBib29sZWFuIH0+KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBIYW5kbGUgY2F0Y2gtYWxsIHJvdXRlcyAoZS5nLiwgQGJpZXpydS5yZXNlbmQuYXBwKVxuICAgICAgICAvLyBSZXNlbmQgZG9lc24ndCBzdXBwb3J0IHRydWUgY2F0Y2gtYWxsLCBzbyB3ZSdsbCBjcmVhdGUgYSByb3V0ZSBmb3IgdGhlIGRvbWFpblxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBza2lwIGNhdGNoLWFsbCByb3V0ZXMgYW5kIGhhbmRsZSB0aGVtIGRpZmZlcmVudGx5XG4gICAgICAgIGlmIChyb3V0ZS5yb3V0ZV9hZGRyZXNzLnN0YXJ0c1dpdGgoXCJAXCIpKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYENhdGNoLWFsbCByb3V0ZXMgKCR7cm91dGUucm91dGVfYWRkcmVzc30pIG5lZWQgdG8gYmUgY29uZmlndXJlZCBtYW51YWxseSBpbiBSZXNlbmQgZGFzaGJvYXJkYCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgcm91dGUgaW4gUmVzZW5kXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZUluYm91bmRSb3V0ZSh7XG4gICAgICAgICAgbmFtZTogcm91dGUubmFtZSB8fCBgUm91dGUgZm9yICR7cm91dGUucm91dGVfYWRkcmVzc31gLFxuICAgICAgICAgIHJlY2lwaWVudHM6IFtyb3V0ZS5yb3V0ZV9hZGRyZXNzXSxcbiAgICAgICAgICB1cmw6IHdlYmhvb2tVcmwsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGNyZWF0ZSBSZXNlbmQgcm91dGUgZm9yICR7cm91dGUucm91dGVfYWRkcmVzc306YCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICBlcnJvcnMucHVzaChgJHtyb3V0ZS5yb3V0ZV9hZGRyZXNzfTogJHtyZXN1bHQuZXJyb3J9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgZGF0YWJhc2Ugd2l0aCByZXNlbmRfcm91dGVfaWRcbiAgICAgICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IChzZXJ2aWNlU3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25fZW1haWxfaW5ib3VuZF9yb3V0ZXNcIiBhcyBhbnkpXG4gICAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgICByZXNlbmRfcm91dGVfaWQ6IHJlc3VsdC5kYXRhLmlkLFxuICAgICAgICAgICAgc2lnbmluZ19zZWNyZXQ6IHJlc3VsdC5kYXRhLnNlY3JldCB8fCBudWxsLFxuICAgICAgICAgICAgbGFzdF9zeW5jZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcShcImlkXCIsIHJvdXRlLmlkKSBhcyBhbnkpO1xuXG4gICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gdXBkYXRlIHJvdXRlICR7cm91dGUucm91dGVfYWRkcmVzc306YCwgdXBkYXRlRXJyb3IpO1xuICAgICAgICAgIGVycm9ycy5wdXNoKGAke3JvdXRlLnJvdXRlX2FkZHJlc3N9OiBEYXRhYmFzZSB1cGRhdGUgZmFpbGVkYCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBzeW5jZWQrKztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBzeW5jaW5nIHJvdXRlICR7cm91dGUucm91dGVfYWRkcmVzc306YCwgZXJyb3IpO1xuICAgICAgICBlcnJvcnMucHVzaChgJHtyb3V0ZS5yb3V0ZV9hZGRyZXNzfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwifWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgc3luY2VkLFxuICAgICAgZXJyb3JzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHN5bmNpbmcgaW5ib3VuZCByb3V0ZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBzeW5jZWQ6IDAsXG4gICAgICBlcnJvcnM6IFtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQXJjaGl2ZSBhbiBlbWFpbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXJjaGl2ZUVtYWlsQWN0aW9uKGVtYWlsSWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcbiAgICBcbiAgICBjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnVwZGF0ZSh7IGlzX2FyY2hpdmVkOiB0cnVlIH0pXG4gICAgICAuZXEoXCJpZFwiLCBlbWFpbElkKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIik7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIiB9O1xuICB9XG59XG5cbi8qKlxuICogQnVsayBhcmNoaXZlIG11bHRpcGxlIGVtYWlscyBieSB0aGVpciBJRHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1bGtBcmNoaXZlRW1haWxzQWN0aW9uKGVtYWlsSWRzOiBzdHJpbmdbXSk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBhcmNoaXZlZDogbnVtYmVyO1xuICBlcnJvcj86IHN0cmluZ1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICBpZiAoIWVtYWlsSWRzIHx8IGVtYWlsSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBhcmNoaXZlZDogMCwgZXJyb3I6IFwiTm8gZW1haWwgSURzIHByb3ZpZGVkXCIgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiKTtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG5cbiAgICBjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGFyY2hpdmVkOiAwLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgYXJjaGl2ZWQ6IDAsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnVwZGF0ZSh7IGlzX2FyY2hpdmVkOiB0cnVlIH0pXG4gICAgICAuaW4oXCJpZFwiLCBlbWFpbElkcylcbiAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgLmVxKFwidHlwZVwiLCBcImVtYWlsXCIpXG4gICAgICAuc2VsZWN0KFwiaWRcIik7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBhcmNoaXZlZDogMCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcmNoaXZlZENvdW50ID0gZGF0YT8ubGVuZ3RoID8/IDA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYXJjaGl2ZWQ6IGFyY2hpdmVkQ291bnQgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgYXJjaGl2ZWQ6IDAsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiIH07XG4gIH1cbn1cblxuLyoqXG4gKiBBcmNoaXZlIGFsbCBlbWFpbHMgaW4gYSBmb2xkZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFyY2hpdmVBbGxFbWFpbHNBY3Rpb24oZm9sZGVyPzogc3RyaW5nKTogUHJvbWlzZTx7IFxuICBzdWNjZXNzOiBib29sZWFuOyBcbiAgYXJjaGl2ZWQ6IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmcgXG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG4gICAgXG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBhcmNoaXZlZDogMCwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcmNoaXZlQWxsRW1haWxzKGNvbXBhbnlJZCwgZm9sZGVyKTtcbiAgICBcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgYXJjaGl2ZWQ6IDAsIGVycm9yOiByZXN1bHQuZXJyb3IgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYXJjaGl2ZWQ6IHJlc3VsdC5jb3VudCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGFyY2hpdmVkOiAwLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IGVtYWlsIGZvbGRlciBjb3VudHMgZm9yIHRoZSBhY3RpdmUgY29tcGFueVxuICogUmV0dXJucyBjb3VudCBvZiBlbWFpbHMgaW4gZWFjaCBmb2xkZXIgKGluYm94LCBzZW50LCBkcmFmdHMsIGV0Yy4pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbWFpbEZvbGRlckNvdW50c0FjdGlvbigpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgY291bnRzPzoge1xuICAgIGFsbDogbnVtYmVyO1xuICAgIGluYm94OiBudW1iZXI7XG4gICAgZHJhZnRzOiBudW1iZXI7XG4gICAgc2VudDogbnVtYmVyO1xuICAgIGFyY2hpdmU6IG51bWJlcjtcbiAgICBzbm9vemVkOiBudW1iZXI7XG4gICAgc3BhbTogbnVtYmVyO1xuICAgIHRyYXNoOiBudW1iZXI7XG4gICAgc3RhcnJlZDogbnVtYmVyO1xuICAgIFtrZXk6IHN0cmluZ106IG51bWJlcjtcbiAgfTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiKTtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG5cbiAgICBjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG4gICAgfVxuXG4gICAgLy8gR2V0IGNvdW50cyBmb3IgZWFjaCBmb2xkZXIgdHlwZSB1c2luZyBwYXJhbGxlbCBxdWVyaWVzXG4gICAgLy8gQWxsIGNvdW50cyBzaG93IFVOUkVBRCBlbWFpbHMgb25seSAocmVhZF9hdCBJUyBOVUxMKVxuICAgIGNvbnN0IFtcbiAgICAgIGFsbFJlc3VsdCxcbiAgICAgIGluYm94UmVzdWx0LFxuICAgICAgZHJhZnRzUmVzdWx0LFxuICAgICAgc2VudFJlc3VsdCxcbiAgICAgIGFyY2hpdmVSZXN1bHQsXG4gICAgICBzbm9vemVkUmVzdWx0LFxuICAgICAgc3BhbVJlc3VsdCxcbiAgICAgIHRyYXNoUmVzdWx0LFxuICAgICAgc3RhcnJlZFJlc3VsdFxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAvLyBBbGwgTWFpbDogYWxsIG5vbi1kZWxldGVkLCB1bnJlYWQgZW1haWxzXG4gICAgICBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiwgaGVhZDogdHJ1ZSB9KVxuICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgICAgLmVxKFwidHlwZVwiLCBcImVtYWlsXCIpXG4gICAgICAgIC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcbiAgICAgICAgLmlzKFwicmVhZF9hdFwiLCBudWxsKSxcblxuICAgICAgLy8gSW5ib3g6IGluYm91bmQsIG5vdCBhcmNoaXZlZCwgbm90IGRlbGV0ZWQsIG5vdCBkcmFmdCwgbm90IHNwYW0sIHVucmVhZFxuICAgICAgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSlcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgICAuZXEoXCJkaXJlY3Rpb25cIiwgXCJpbmJvdW5kXCIpXG4gICAgICAgIC5lcShcImlzX2FyY2hpdmVkXCIsIGZhbHNlKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG4gICAgICAgIC5pcyhcInJlYWRfYXRcIiwgbnVsbClcbiAgICAgICAgLm5lcShcInN0YXR1c1wiLCBcImRyYWZ0XCIpXG4gICAgICAgIC5vcihcImNhdGVnb3J5LmlzLm51bGwsY2F0ZWdvcnkubmVxLnNwYW1cIilcbiAgICAgICAgLm9yKFwic25vb3plZF91bnRpbC5pcy5udWxsLHNub296ZWRfdW50aWwubHQubm93KClcIiksXG5cbiAgICAgIC8vIERyYWZ0cyAtIGFsd2F5cyBjb3VudCBhbGwgZHJhZnRzIChyZWFkX2F0IG5vdCByZWxldmFudCBmb3IgZHJhZnRzKVxuICAgICAgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSlcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgICAuZXEoXCJzdGF0dXNcIiwgXCJkcmFmdFwiKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpLFxuXG4gICAgICAvLyBTZW50OiBvdXRib3VuZCwgbm90IGFyY2hpdmVkLCBub3QgZGVsZXRlZCwgdW5yZWFkXG4gICAgICBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiwgaGVhZDogdHJ1ZSB9KVxuICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgICAgLmVxKFwidHlwZVwiLCBcImVtYWlsXCIpXG4gICAgICAgIC5lcShcImRpcmVjdGlvblwiLCBcIm91dGJvdW5kXCIpXG4gICAgICAgIC5lcShcImlzX2FyY2hpdmVkXCIsIGZhbHNlKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG4gICAgICAgIC5pcyhcInJlYWRfYXRcIiwgbnVsbClcbiAgICAgICAgLm5lcShcInN0YXR1c1wiLCBcImRyYWZ0XCIpLFxuXG4gICAgICAvLyBBcmNoaXZlIC0gdW5yZWFkIGFyY2hpdmVkIGVtYWlsc1xuICAgICAgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSlcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgICAuZXEoXCJpc19hcmNoaXZlZFwiLCB0cnVlKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG4gICAgICAgIC5pcyhcInJlYWRfYXRcIiwgbnVsbCksXG5cbiAgICAgIC8vIFNub296ZWQgLSB1bnJlYWQgc25vb3plZCBlbWFpbHNcbiAgICAgIHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLnNlbGVjdChcIipcIiwgeyBjb3VudDogXCJleGFjdFwiLCBoZWFkOiB0cnVlIH0pXG4gICAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIilcbiAgICAgICAgLm5vdChcInNub296ZWRfdW50aWxcIiwgXCJpc1wiLCBudWxsKVxuICAgICAgICAuZ3QoXCJzbm9vemVkX3VudGlsXCIsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSlcbiAgICAgICAgLmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuICAgICAgICAuaXMoXCJyZWFkX2F0XCIsIG51bGwpLFxuXG4gICAgICAvLyBTcGFtIC0gZmV0Y2ggY2F0ZWdvcnksIHRhZ3MsIGFuZCByZWFkX2F0IHRvIGNvdW50IHVucmVhZCBzcGFtXG4gICAgICBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgIC5zZWxlY3QoXCJjYXRlZ29yeSwgdGFncywgcmVhZF9hdFwiKVxuICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgICAgLmVxKFwidHlwZVwiLCBcImVtYWlsXCIpXG4gICAgICAgIC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcbiAgICAgICAgLmlzKFwicmVhZF9hdFwiLCBudWxsKSxcblxuICAgICAgLy8gVHJhc2ggLSB1bnJlYWQgZGVsZXRlZCBlbWFpbHNcbiAgICAgIHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLnNlbGVjdChcIipcIiwgeyBjb3VudDogXCJleGFjdFwiLCBoZWFkOiB0cnVlIH0pXG4gICAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIilcbiAgICAgICAgLm5vdChcImRlbGV0ZWRfYXRcIiwgXCJpc1wiLCBudWxsKVxuICAgICAgICAuaXMoXCJyZWFkX2F0XCIsIG51bGwpLFxuXG4gICAgICAvLyBTdGFycmVkIC0gZmV0Y2ggdGFncyBhbmQgcmVhZF9hdCwgY291bnQgdW5yZWFkIHN0YXJyZWQgaW4gbWVtb3J5XG4gICAgICBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgIC5zZWxlY3QoXCJ0YWdzLCByZWFkX2F0XCIpXG4gICAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIilcbiAgICAgICAgLmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuICAgICAgICAuaXMoXCJyZWFkX2F0XCIsIG51bGwpLFxuICAgIF0pO1xuXG4gICAgLy8gQ291bnQgc3BhbSBlbWFpbHMgaW4gbWVtb3J5IChjYXRlZ29yeT1zcGFtIE9SIHNwYW0gdGFnKVxuICAgIGNvbnN0IHNwYW1Db3VudCA9IChzcGFtUmVzdWx0LmRhdGEgPz8gW10pLmZpbHRlcihlbWFpbCA9PiB7XG4gICAgICBjb25zdCB0YWdzID0gZW1haWwudGFncyBhcyBzdHJpbmdbXSB8IG51bGw7XG4gICAgICBjb25zdCBoYXNTcGFtVGFnID0gQXJyYXkuaXNBcnJheSh0YWdzKSAmJiB0YWdzLmluY2x1ZGVzKFwic3BhbVwiKTtcbiAgICAgIHJldHVybiBlbWFpbC5jYXRlZ29yeSA9PT0gXCJzcGFtXCIgfHwgaGFzU3BhbVRhZztcbiAgICB9KS5sZW5ndGg7XG5cbiAgICAvLyBDb3VudCBzdGFycmVkIGVtYWlscyBpbiBtZW1vcnlcbiAgICBjb25zdCBzdGFycmVkQ291bnQgPSAoc3RhcnJlZFJlc3VsdC5kYXRhID8/IFtdKS5maWx0ZXIoZW1haWwgPT4ge1xuICAgICAgY29uc3QgdGFncyA9IGVtYWlsLnRhZ3MgYXMgc3RyaW5nW10gfCBudWxsO1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGFncykgJiYgdGFncy5pbmNsdWRlcyhcInN0YXJyZWRcIik7XG4gICAgfSkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb3VudHM6IHtcbiAgICAgICAgYWxsOiBhbGxSZXN1bHQuY291bnQgPz8gMCxcbiAgICAgICAgaW5ib3g6IGluYm94UmVzdWx0LmNvdW50ID8/IDAsXG4gICAgICAgIGRyYWZ0czogZHJhZnRzUmVzdWx0LmNvdW50ID8/IDAsXG4gICAgICAgIHNlbnQ6IHNlbnRSZXN1bHQuY291bnQgPz8gMCxcbiAgICAgICAgYXJjaGl2ZTogYXJjaGl2ZVJlc3VsdC5jb3VudCA/PyAwLFxuICAgICAgICBzbm9vemVkOiBzbm9vemVkUmVzdWx0LmNvdW50ID8/IDAsXG4gICAgICAgIHNwYW06IHNwYW1Db3VudCxcbiAgICAgICAgdHJhc2g6IHRyYXNoUmVzdWx0LmNvdW50ID8/IDAsXG4gICAgICAgIHN0YXJyZWQ6IHN0YXJyZWRDb3VudCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBlbWFpbCBmb2xkZXIgY291bnRzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFRvZ2dsZSBzdGFyIHN0YXR1cyBvbiBhbiBlbWFpbFxuICogQWRkcyBvciByZW1vdmVzIFwic3RhcnJlZFwiIHRhZyBmcm9tIHRoZSBlbWFpbCdzIHRhZ3MgYXJyYXlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVN0YXJFbWFpbEFjdGlvbihlbWFpbElkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgaXNTdGFycmVkPzogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmdcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCwgZ2V0IGN1cnJlbnQgdGFnc1xuICAgIGNvbnN0IHsgZGF0YTogZW1haWwsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnNlbGVjdChcInRhZ3NcIilcbiAgICAgIC5lcShcImlkXCIsIGVtYWlsSWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGZldGNoRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZmV0Y2hFcnJvci5tZXNzYWdlIH07XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFRhZ3MgPSAoZW1haWw/LnRhZ3MgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgIGNvbnN0IGlzQ3VycmVudGx5U3RhcnJlZCA9IGN1cnJlbnRUYWdzLmluY2x1ZGVzKFwic3RhcnJlZFwiKTtcblxuICAgIC8vIFRvZ2dsZSB0aGUgc3RhcnJlZCB0YWdcbiAgICBjb25zdCBuZXdUYWdzID0gaXNDdXJyZW50bHlTdGFycmVkXG4gICAgICA/IGN1cnJlbnRUYWdzLmZpbHRlcih0YWcgPT4gdGFnICE9PSBcInN0YXJyZWRcIilcbiAgICAgIDogWy4uLmN1cnJlbnRUYWdzLCBcInN0YXJyZWRcIl07XG5cbiAgICAvLyBVcGRhdGUgdGhlIGVtYWlsXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAudXBkYXRlKHsgdGFnczogbmV3VGFncy5sZW5ndGggPiAwID8gbmV3VGFncyA6IG51bGwgfSlcbiAgICAgIC5lcShcImlkXCIsIGVtYWlsSWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKTtcblxuICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaXNTdGFycmVkOiAhaXNDdXJyZW50bHlTdGFycmVkIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHRvZ2dsaW5nIHN0YXIgb24gZW1haWw6XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIgfTtcbiAgfVxufVxuXG4vKipcbiAqIFRvZ2dsZSBzcGFtIHN0YXR1cyBvbiBhbiBlbWFpbFxuICogQWRkcyBvciByZW1vdmVzIFwic3BhbVwiIHRhZyBhbmQgdXBkYXRlcyBjYXRlZ29yeSBmaWVsZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9nZ2xlU3BhbUVtYWlsQWN0aW9uKGVtYWlsSWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBpc1NwYW0/OiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZ1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIC8vIEZpcnN0LCBnZXQgY3VycmVudCB0YWdzIGFuZCBjYXRlZ29yeVxuICAgIGNvbnN0IHsgZGF0YTogZW1haWwsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnNlbGVjdChcInRhZ3MsIGNhdGVnb3J5XCIpXG4gICAgICAuZXEoXCJpZFwiLCBlbWFpbElkKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIilcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChmZXRjaEVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGZldGNoRXJyb3IubWVzc2FnZSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRUYWdzID0gKGVtYWlsPy50YWdzIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICBjb25zdCBpc0N1cnJlbnRseVNwYW0gPSBjdXJyZW50VGFncy5pbmNsdWRlcyhcInNwYW1cIikgfHwgZW1haWw/LmNhdGVnb3J5ID09PSBcInNwYW1cIjtcblxuICAgIC8vIFRvZ2dsZSB0aGUgc3BhbSB0YWcgYW5kIGNhdGVnb3J5XG4gICAgY29uc3QgbmV3VGFncyA9IGlzQ3VycmVudGx5U3BhbVxuICAgICAgPyBjdXJyZW50VGFncy5maWx0ZXIodGFnID0+IHRhZyAhPT0gXCJzcGFtXCIpXG4gICAgICA6IFsuLi5jdXJyZW50VGFncywgXCJzcGFtXCJdO1xuXG4gICAgY29uc3QgbmV3Q2F0ZWdvcnkgPSBpc0N1cnJlbnRseVNwYW0gPyBudWxsIDogXCJzcGFtXCI7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGVtYWlsXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgdGFnczogbmV3VGFncy5sZW5ndGggPiAwID8gbmV3VGFncyA6IG51bGwsXG4gICAgICAgIGNhdGVnb3J5OiBuZXdDYXRlZ29yeVxuICAgICAgfSlcbiAgICAgIC5lcShcImlkXCIsIGVtYWlsSWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKTtcblxuICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaXNTcGFtOiAhaXNDdXJyZW50bHlTcGFtIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHRvZ2dsaW5nIHNwYW0gb24gZW1haWw6XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIgfTtcbiAgfVxufVxuXG4vKipcbiAqIFNub296ZSBhbiBlbWFpbCB1bnRpbCBhIHNwZWNpZmljIHRpbWVcbiAqIFRoZSBlbWFpbCB3aWxsIHJlYXBwZWFyIGluIGluYm94IGFmdGVyIHRoZSBzbm9vemUgdGltZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc25vb3plRW1haWxBY3Rpb24oXG4gIGVtYWlsSWQ6IHN0cmluZyxcbiAgc25vb3plVW50aWw6IHN0cmluZyB8IG51bGxcbik6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBzbm9vemVkVW50aWw/OiBzdHJpbmcgfCBudWxsO1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHNub296ZWRfdW50aWwgZmllbGRcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgIC51cGRhdGUoeyBzbm9vemVkX3VudGlsOiBzbm9vemVVbnRpbCB9KVxuICAgICAgLmVxKFwiaWRcIiwgZW1haWxJZClcbiAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgLmVxKFwidHlwZVwiLCBcImVtYWlsXCIpO1xuXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBzbm9vemVkVW50aWw6IHNub296ZVVudGlsIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNub296aW5nIGVtYWlsOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiIH07XG4gIH1cbn1cblxuLyoqXG4gKiBVbnNub296ZSBhbiBlbWFpbCAocmVtb3ZlIHNub296ZSB0aW1lKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdW5zbm9vemVFbWFpbEFjdGlvbihlbWFpbElkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIHJldHVybiBzbm9vemVFbWFpbEFjdGlvbihlbWFpbElkLCBudWxsKTtcbn1cblxuLyoqXG4gKiBCdWxrIG1hcmsgZW1haWxzIGFzIHJlYWQgb3IgdW5yZWFkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWxrTWFya1JlYWRVbnJlYWRBY3Rpb24oXG4gIGVtYWlsSWRzOiBzdHJpbmdbXSxcbiAgbWFya0FzUmVhZDogYm9vbGVhblxuKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHVwZGF0ZWQ6IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIGlmICghZW1haWxJZHMgfHwgZW1haWxJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHVwZGF0ZWQ6IDAsIGVycm9yOiBcIk5vIElEcyBwcm92aWRlZFwiIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB1cGRhdGVkOiAwLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgdXBkYXRlZDogMCwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAudXBkYXRlKHsgcmVhZF9hdDogbWFya0FzUmVhZCA/IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSA6IG51bGwgfSlcbiAgICAgIC5pbihcImlkXCIsIGVtYWlsSWRzKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAuZXEoXCJ0eXBlXCIsIFwiZW1haWxcIilcbiAgICAgIC5zZWxlY3QoXCJpZFwiKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHVwZGF0ZWQ6IDAsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgfVxuXG4gICAgLy8gRGlzcGF0Y2ggZXZlbnQgdG8gcmVmcmVzaCBjb3VudHNcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1cGRhdGVkOiBkYXRhPy5sZW5ndGggPz8gMCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBidWxrIG1hcmtpbmcgZW1haWxzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHVwZGF0ZWQ6IDAsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiIH07XG4gIH1cbn1cblxuLyoqXG4gKiBCdWxrIHRvZ2dsZSBzdGFyIG9uIGVtYWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVsa1N0YXJFbWFpbHNBY3Rpb24oXG4gIGVtYWlsSWRzOiBzdHJpbmdbXSxcbiAgYWRkU3RhcjogYm9vbGVhblxuKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHVwZGF0ZWQ6IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIGlmICghZW1haWxJZHMgfHwgZW1haWxJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHVwZGF0ZWQ6IDAsIGVycm9yOiBcIk5vIElEcyBwcm92aWRlZFwiIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB1cGRhdGVkOiAwLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgdXBkYXRlZDogMCwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIC8vIE9QVElNSVpFRDogQmF0Y2ggZmV0Y2ggYWxsIGVtYWlscyBpbiBPTkUgcXVlcnkgKHdhcyBOIHF1ZXJpZXMpXG4gICAgY29uc3QgeyBkYXRhOiBlbWFpbHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHRhZ3NcIilcbiAgICAgIC5pbihcImlkXCIsIGVtYWlsSWRzKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpO1xuXG4gICAgaWYgKCFlbWFpbHMgfHwgZW1haWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXBkYXRlZDogMCB9O1xuICAgIH1cblxuICAgIC8vIEdyb3VwIGVtYWlscyBieSB3aGF0IGNoYW5nZXMgbmVlZCB0byBiZSBtYWRlXG4gICAgY29uc3QgdG9VcGRhdGU6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmV3VGFnczogc3RyaW5nW10gfCBudWxsIH0+ID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgY29uc3QgY3VycmVudFRhZ3MgPSAoZW1haWwudGFncyBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBoYXNTdGFycmVkID0gY3VycmVudFRhZ3MuaW5jbHVkZXMoXCJzdGFycmVkXCIpO1xuXG4gICAgICBsZXQgbmV3VGFnczogc3RyaW5nW107XG4gICAgICBpZiAoYWRkU3RhciAmJiAhaGFzU3RhcnJlZCkge1xuICAgICAgICBuZXdUYWdzID0gWy4uLmN1cnJlbnRUYWdzLCBcInN0YXJyZWRcIl07XG4gICAgICB9IGVsc2UgaWYgKCFhZGRTdGFyICYmIGhhc1N0YXJyZWQpIHtcbiAgICAgICAgbmV3VGFncyA9IGN1cnJlbnRUYWdzLmZpbHRlcigodCkgPT4gdCAhPT0gXCJzdGFycmVkXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGludWU7IC8vIE5vIGNoYW5nZSBuZWVkZWRcbiAgICAgIH1cblxuICAgICAgdG9VcGRhdGUucHVzaCh7IGlkOiBlbWFpbC5pZCwgbmV3VGFnczogbmV3VGFncy5sZW5ndGggPiAwID8gbmV3VGFncyA6IG51bGwgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRvVXBkYXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXBkYXRlZDogMCB9O1xuICAgIH1cblxuICAgIC8vIEJhdGNoIHVwZGF0ZSB1c2luZyBQcm9taXNlLmFsbCAocGFyYWxsZWwgdXBkYXRlcylcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICB0b1VwZGF0ZS5tYXAoKHsgaWQsIG5ld1RhZ3MgfSkgPT5cbiAgICAgICAgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgICAgLnVwZGF0ZSh7IHRhZ3M6IG5ld1RhZ3MgfSlcbiAgICAgICAgICAuZXEoXCJpZFwiLCBpZClcbiAgICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgdXBkYXRlZENvdW50ID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+ICFyLmVycm9yKS5sZW5ndGg7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXBkYXRlZDogdXBkYXRlZENvdW50IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGJ1bGsgc3RhcnJpbmcgZW1haWxzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHVwZGF0ZWQ6IDAsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiIH07XG4gIH1cbn1cblxuLyoqXG4gKiBCdWxrIGRlbGV0ZSBlbWFpbHMgKG1vdmUgdG8gdHJhc2gpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWxrRGVsZXRlRW1haWxzQWN0aW9uKGVtYWlsSWRzOiBzdHJpbmdbXSk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkZWxldGVkOiBudW1iZXI7XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICBpZiAoIWVtYWlsSWRzIHx8IGVtYWlsSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBkZWxldGVkOiAwLCBlcnJvcjogXCJObyBJRHMgcHJvdmlkZWRcIiB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZGVsZXRlZDogMCwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGRlbGV0ZWQ6IDAsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICAvLyBTb2Z0IGRlbGV0ZSBieSBzZXR0aW5nIGRlbGV0ZWRfYXRcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnVwZGF0ZSh7IGRlbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxuICAgICAgLmluKFwiaWRcIiwgZW1haWxJZHMpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgLnNlbGVjdChcImlkXCIpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZGVsZXRlZDogMCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkZWxldGVkOiBkYXRhPy5sZW5ndGggPz8gMCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBidWxrIGRlbGV0aW5nIGVtYWlsczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBkZWxldGVkOiAwLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIiB9O1xuICB9XG59XG5cbi8qKlxuICogQnVsayBtb3ZlIGVtYWlscyB0byBzcGFtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWxrTW92ZVRvU3BhbUFjdGlvbihlbWFpbElkczogc3RyaW5nW10pOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbW92ZWQ6IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIGlmICghZW1haWxJZHMgfHwgZW1haWxJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1vdmVkOiAwLCBlcnJvcjogXCJObyBJRHMgcHJvdmlkZWRcIiB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbW92ZWQ6IDAsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtb3ZlZDogMCwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIC8vIE9QVElNSVpFRDogQmF0Y2ggZmV0Y2ggYWxsIGVtYWlscyBpbiBPTkUgcXVlcnkgKHdhcyBOIHF1ZXJpZXMpXG4gICAgY29uc3QgeyBkYXRhOiBlbWFpbHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHRhZ3NcIilcbiAgICAgIC5pbihcImlkXCIsIGVtYWlsSWRzKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpO1xuXG4gICAgaWYgKCFlbWFpbHMgfHwgZW1haWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbW92ZWQ6IDAgfTtcbiAgICB9XG5cbiAgICAvLyBQcmVwYXJlIHVwZGF0ZXMgd2l0aCBuZXcgdGFnc1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBlbWFpbHMubWFwKChlbWFpbCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFRhZ3MgPSAoZW1haWwudGFncyBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBuZXdUYWdzID0gY3VycmVudFRhZ3MuaW5jbHVkZXMoXCJzcGFtXCIpXG4gICAgICAgID8gY3VycmVudFRhZ3NcbiAgICAgICAgOiBbLi4uY3VycmVudFRhZ3MsIFwic3BhbVwiXTtcbiAgICAgIHJldHVybiB7IGlkOiBlbWFpbC5pZCwgbmV3VGFncyB9O1xuICAgIH0pO1xuXG4gICAgLy8gQmF0Y2ggdXBkYXRlIHVzaW5nIFByb21pc2UuYWxsIChwYXJhbGxlbCB1cGRhdGVzKVxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIHVwZGF0ZXMubWFwKCh7IGlkLCBuZXdUYWdzIH0pID0+XG4gICAgICAgIHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgICAgIC51cGRhdGUoeyBjYXRlZ29yeTogXCJzcGFtXCIsIHRhZ3M6IG5ld1RhZ3MgfSlcbiAgICAgICAgICAuZXEoXCJpZFwiLCBpZClcbiAgICAgICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgbW92ZWRDb3VudCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiAhci5lcnJvcikubGVuZ3RoO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1vdmVkOiBtb3ZlZENvdW50IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1vdmluZyBlbWFpbHMgdG8gc3BhbTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtb3ZlZDogMCwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEUkFGVCBBQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IHNhdmVEcmFmdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksIC8vIElmIHByb3ZpZGVkLCB1cGRhdGUgZXhpc3RpbmcgZHJhZnRcbiAgdG86IHouYXJyYXkoei5zdHJpbmcoKS5lbWFpbCgpKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pLFxuICBjYzogei5hcnJheSh6LnN0cmluZygpLmVtYWlsKCkpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksXG4gIGJjYzogei5hcnJheSh6LnN0cmluZygpLmVtYWlsKCkpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksXG4gIHN1YmplY3Q6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5kZWZhdWx0KFwiXCIpLFxuICBib2R5OiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdChcIlwiKSxcbiAgYm9keUh0bWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY3VzdG9tZXJJZDogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgYXR0YWNobWVudHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudFR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgfSkpLm9wdGlvbmFsKCksXG59KTtcblxuZXhwb3J0IHR5cGUgU2F2ZURyYWZ0SW5wdXQgPSB6LmluZmVyPHR5cGVvZiBzYXZlRHJhZnRTY2hlbWE+O1xuXG4vKipcbiAqIFNhdmUgb3IgdXBkYXRlIGFuIGVtYWlsIGRyYWZ0XG4gKiBJZiBpZCBpcyBwcm92aWRlZCwgdXBkYXRlcyBleGlzdGluZyBkcmFmdDsgb3RoZXJ3aXNlIGNyZWF0ZXMgYSBuZXcgb25lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlRHJhZnRBY3Rpb24oaW5wdXQ6IFNhdmVEcmFmdElucHV0KTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGRyYWZ0SWQ/OiBzdHJpbmc7XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gc2F2ZURyYWZ0U2NoZW1hLnNhZmVQYXJzZShpbnB1dCk7XG4gICAgaWYgKCFwYXJzZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBJbnZhbGlkIGlucHV0OiAke3BhcnNlUmVzdWx0LmVycm9yLm1lc3NhZ2V9YCB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWQsIHRvLCBjYywgYmNjLCBzdWJqZWN0LCBib2R5LCBib2R5SHRtbCwgY3VzdG9tZXJJZCwgYXR0YWNobWVudHMgfSA9IHBhcnNlUmVzdWx0LmRhdGE7XG5cbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCIpO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGNvbXBhbnkncyBkZWZhdWx0IGVtYWlsIGFkZHJlc3MgZm9yIGZyb21fYWRkcmVzc1xuICAgIGNvbnN0IHsgZGF0YTogY29tcGFueVNldHRpbmdzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21wYW55X2NvbW11bmljYXRpb25fc2V0dGluZ3NcIilcbiAgICAgIC5zZWxlY3QoXCJlbWFpbF9mcm9tX2FkZHJlc3MsIGVtYWlsX2Zyb21fbmFtZVwiKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBjb25zdCBmcm9tQWRkcmVzcyA9IGNvbXBhbnlTZXR0aW5ncz8uZW1haWxfZnJvbV9hZGRyZXNzIHx8IFwibm9yZXBseUBleGFtcGxlLmNvbVwiO1xuICAgIGNvbnN0IGZyb21OYW1lID0gY29tcGFueVNldHRpbmdzPy5lbWFpbF9mcm9tX25hbWUgfHwgXCJEcmFmdFwiO1xuXG4gICAgY29uc3QgZHJhZnREYXRhID0ge1xuICAgICAgY29tcGFueV9pZDogY29tcGFueUlkLFxuICAgICAgY3VzdG9tZXJfaWQ6IGN1c3RvbWVySWQgfHwgbnVsbCxcbiAgICAgIHR5cGU6IFwiZW1haWxcIiBhcyBjb25zdCxcbiAgICAgIGRpcmVjdGlvbjogXCJvdXRib3VuZFwiIGFzIGNvbnN0LFxuICAgICAgZnJvbV9hZGRyZXNzOiBmcm9tQWRkcmVzcyxcbiAgICAgIGZyb21fbmFtZTogZnJvbU5hbWUsXG4gICAgICB0b19hZGRyZXNzOiB0by5sZW5ndGggPiAwID8gdG8uam9pbihcIiwgXCIpIDogXCJkcmFmdEBwbGFjZWhvbGRlci5sb2NhbFwiLFxuICAgICAgY2NfYWRkcmVzczogY2MubGVuZ3RoID4gMCA/IGNjLmpvaW4oXCIsIFwiKSA6IG51bGwsXG4gICAgICBiY2NfYWRkcmVzczogYmNjLmxlbmd0aCA+IDAgPyBiY2Muam9pbihcIiwgXCIpIDogbnVsbCxcbiAgICAgIHN1YmplY3Q6IHN1YmplY3QgfHwgXCIoTm8gc3ViamVjdClcIixcbiAgICAgIGJvZHk6IGJvZHkgfHwgXCJcIixcbiAgICAgIGJvZHlfaHRtbDogYm9keUh0bWwgfHwgbnVsbCxcbiAgICAgIGF0dGFjaG1lbnRzOiBhdHRhY2htZW50cyAmJiBhdHRhY2htZW50cy5sZW5ndGggPiAwID8gYXR0YWNobWVudHMgOiBudWxsLFxuICAgICAgYXR0YWNobWVudF9jb3VudDogYXR0YWNobWVudHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc3RhdHVzOiBcImRyYWZ0XCIgYXMgY29uc3QsXG4gICAgICBpc19hdXRvbWF0ZWQ6IGZhbHNlLFxuICAgICAgaXNfaW50ZXJuYWw6IGZhbHNlLFxuICAgICAgaXNfYXJjaGl2ZWQ6IGZhbHNlLFxuICAgICAgaXNfdGhyZWFkX3N0YXJ0ZXI6IHRydWUsXG4gICAgICBwcmlvcml0eTogXCJub3JtYWxcIiBhcyBjb25zdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9O1xuXG4gICAgaWYgKGlkKSB7XG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZHJhZnRcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAgIC51cGRhdGUoZHJhZnREYXRhKVxuICAgICAgICAuZXEoXCJpZFwiLCBpZClcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG4gICAgICAgIC5lcShcInN0YXR1c1wiLCBcImRyYWZ0XCIpO1xuXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGRyYWZ0OlwiLCB1cGRhdGVFcnJvcik7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkcmFmdElkOiBpZCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IGRyYWZ0XG4gICAgICBjb25zdCB7IGRhdGE6IG5ld0RyYWZ0LCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgLi4uZHJhZnREYXRhLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKGluc2VydEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBkcmFmdDpcIiwgaW5zZXJ0RXJyb3IpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGluc2VydEVycm9yLm1lc3NhZ2UgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZHJhZnRJZDogbmV3RHJhZnQuaWQgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBkcmFmdDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIiB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0IGEgZHJhZnQgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERyYWZ0QWN0aW9uKGRyYWZ0SWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkcmFmdD86IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHRvOiBzdHJpbmdbXTtcbiAgICBjYzogc3RyaW5nW107XG4gICAgYmNjOiBzdHJpbmdbXTtcbiAgICBzdWJqZWN0OiBzdHJpbmc7XG4gICAgYm9keTogc3RyaW5nO1xuICAgIGJvZHlIdG1sPzogc3RyaW5nIHwgbnVsbDtcbiAgICBjdXN0b21lcklkPzogc3RyaW5nIHwgbnVsbDtcbiAgICBhdHRhY2htZW50cz86IEFycmF5PHsgZmlsZW5hbWU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyBjb250ZW50VHlwZT86IHN0cmluZyB9PiB8IG51bGw7XG4gICAgdXBkYXRlZEF0OiBzdHJpbmc7XG4gIH07XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogZHJhZnQsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCB0b19hZGRyZXNzLCBjY19hZGRyZXNzLCBiY2NfYWRkcmVzcywgc3ViamVjdCwgYm9keSwgYm9keV9odG1sLCBjdXN0b21lcl9pZCwgYXR0YWNobWVudHMsIHVwZGF0ZWRfYXRcIilcbiAgICAgIC5lcShcImlkXCIsIGRyYWZ0SWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInN0YXR1c1wiLCBcImRyYWZ0XCIpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZmV0Y2hFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBmZXRjaEVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICBpZiAoIWRyYWZ0KSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRHJhZnQgbm90IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBhZGRyZXNzZXMgZnJvbSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5ncyB0byBhcnJheXNcbiAgICBjb25zdCBwYXJzZUFkZHJlc3NlcyA9IChhZGRyOiBzdHJpbmcgfCBudWxsKTogc3RyaW5nW10gPT4ge1xuICAgICAgaWYgKCFhZGRyIHx8IGFkZHIgPT09IFwiZHJhZnRAcGxhY2Vob2xkZXIubG9jYWxcIikgcmV0dXJuIFtdO1xuICAgICAgcmV0dXJuIGFkZHIuc3BsaXQoXCIsXCIpLm1hcChhID0+IGEudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZHJhZnQ6IHtcbiAgICAgICAgaWQ6IGRyYWZ0LmlkLFxuICAgICAgICB0bzogcGFyc2VBZGRyZXNzZXMoZHJhZnQudG9fYWRkcmVzcyksXG4gICAgICAgIGNjOiBwYXJzZUFkZHJlc3NlcyhkcmFmdC5jY19hZGRyZXNzKSxcbiAgICAgICAgYmNjOiBwYXJzZUFkZHJlc3NlcyhkcmFmdC5iY2NfYWRkcmVzcyksXG4gICAgICAgIHN1YmplY3Q6IGRyYWZ0LnN1YmplY3QgPT09IFwiKE5vIHN1YmplY3QpXCIgPyBcIlwiIDogKGRyYWZ0LnN1YmplY3QgfHwgXCJcIiksXG4gICAgICAgIGJvZHk6IGRyYWZ0LmJvZHkgfHwgXCJcIixcbiAgICAgICAgYm9keUh0bWw6IGRyYWZ0LmJvZHlfaHRtbCxcbiAgICAgICAgY3VzdG9tZXJJZDogZHJhZnQuY3VzdG9tZXJfaWQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBkcmFmdC5hdHRhY2htZW50cyBhcyBBcnJheTx7IGZpbGVuYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgY29udGVudFR5cGU/OiBzdHJpbmcgfT4gfCBudWxsLFxuICAgICAgICB1cGRhdGVkQXQ6IGRyYWZ0LnVwZGF0ZWRfYXQsXG4gICAgICB9LFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZHJhZnQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIgfTtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIGRyYWZ0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVEcmFmdEFjdGlvbihkcmFmdElkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiKTtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG5cbiAgICBjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcbiAgICBpZiAoIWNvbXBhbnlJZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG4gICAgfVxuXG4gICAgLy8gSGFyZCBkZWxldGUgZHJhZnRzICh0aGV5IGRvbid0IG5lZWQgdG8gZ28gdG8gdHJhc2gpXG4gICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcShcImlkXCIsIGRyYWZ0SWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInN0YXR1c1wiLCBcImRyYWZ0XCIpO1xuXG4gICAgaWYgKGRlbGV0ZUVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRlbGV0ZUVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGRyYWZ0OlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiIH07XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkVUUlkgQUNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFJldHJ5IHNlbmRpbmcgYSBmYWlsZWQgZW1haWxcbiAqIEZldGNoZXMgdGhlIGZhaWxlZCBlbWFpbCwgcmVzZXRzIGl0cyBzdGF0dXMsIGFuZCBhdHRlbXB0cyB0byByZXNlbmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5RmFpbGVkRW1haWxBY3Rpb24oZW1haWxJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcblxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IHsgc2VuZEVtYWlsIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9lbWFpbC9lbWFpbC1zZW5kZXJcIik7XG4gICAgY29uc3QgeyBQbGFpblRleHRFbWFpbCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9lbWFpbHMvcGxhaW4tdGV4dC1lbWFpbFwiKTtcblxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGZhaWxlZCBlbWFpbFxuICAgIGNvbnN0IHsgZGF0YTogZW1haWwsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcImlkXCIsIGVtYWlsSWQpXG4gICAgICAuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcbiAgICAgIC5lcShcInR5cGVcIiwgXCJlbWFpbFwiKVxuICAgICAgLmVxKFwic3RhdHVzXCIsIFwiZmFpbGVkXCIpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZmV0Y2hFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBmZXRjaEVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICBpZiAoIWVtYWlsKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRmFpbGVkIGVtYWlsIG5vdCBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgc3RhdHVzIHRvIHF1ZXVlZFxuICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIHN0YXR1czogXCJxdWV1ZWRcIixcbiAgICAgICAgZmFpbHVyZV9yZWFzb246IG51bGwsXG4gICAgICB9KVxuICAgICAgLmVxKFwiaWRcIiwgZW1haWxJZClcbiAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKTtcblxuICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgRmFpbGVkIHRvIHJlc2V0IGVtYWlsIHN0YXR1czogJHt1cGRhdGVFcnJvci5tZXNzYWdlfWAgfTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSByZWNpcGllbnRzXG4gICAgY29uc3QgcGFyc2VBZGRyZXNzZXMgPSAoYWRkcjogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB8IHN0cmluZ1tdID0+IHtcbiAgICAgIGlmICghYWRkcikgcmV0dXJuIFtdO1xuICAgICAgY29uc3QgYWRkcmVzc2VzID0gYWRkci5zcGxpdChcIixcIikubWFwKGEgPT4gYS50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIHJldHVybiBhZGRyZXNzZXMubGVuZ3RoID09PSAxID8gYWRkcmVzc2VzWzBdIDogYWRkcmVzc2VzO1xuICAgIH07XG5cbiAgICBjb25zdCB0byA9IHBhcnNlQWRkcmVzc2VzKGVtYWlsLnRvX2FkZHJlc3MpO1xuICAgIGNvbnN0IGNjID0gcGFyc2VBZGRyZXNzZXMoZW1haWwuY2NfYWRkcmVzcyk7XG4gICAgY29uc3QgYmNjID0gcGFyc2VBZGRyZXNzZXMoZW1haWwuYmNjX2FkZHJlc3MpO1xuXG4gICAgLy8gR2V0IGF0dGFjaG1lbnRzIGZyb20gbWV0YWRhdGEgaWYgc3RvcmVkIChmb3Igc2NoZWR1bGVkIGVtYWlscylcbiAgICBjb25zdCBtZXRhZGF0YSA9IGVtYWlsLnByb3ZpZGVyX21ldGFkYXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbDtcbiAgICBjb25zdCBhdHRhY2htZW50cyA9IG1ldGFkYXRhPy5zY2hlZHVsZWRfYXR0YWNobWVudHMgYXMgQXJyYXk8e1xuICAgICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICAgIGNvbnRlbnRUeXBlPzogc3RyaW5nO1xuICAgIH0+IHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gQXR0ZW1wdCB0byByZXNlbmRcbiAgICBjb25zdCBzZW5kUmVzdWx0ID0gYXdhaXQgc2VuZEVtYWlsKHtcbiAgICAgIHRvLFxuICAgICAgc3ViamVjdDogZW1haWwuc3ViamVjdCB8fCBcIihObyBzdWJqZWN0KVwiLFxuICAgICAgdGVtcGxhdGU6IFBsYWluVGV4dEVtYWlsKHsgbWVzc2FnZTogZW1haWwuYm9keSB8fCBcIlwiIH0pLFxuICAgICAgdGVtcGxhdGVUeXBlOiBcImdlbmVyaWNcIiBhcyBhbnksXG4gICAgICBjb21wYW55SWQsXG4gICAgICBjb21tdW5pY2F0aW9uSWQ6IGVtYWlsSWQsXG4gICAgICBjYzogY2MubGVuZ3RoID4gMCA/IGNjIDogdW5kZWZpbmVkLFxuICAgICAgYmNjOiBiY2MubGVuZ3RoID4gMCA/IGJjYyA6IHVuZGVmaW5lZCxcbiAgICAgIGF0dGFjaG1lbnRzLFxuICAgIH0pO1xuXG4gICAgaWYgKCFzZW5kUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIC8vIFVwZGF0ZSBzdGF0dXMgYmFjayB0byBmYWlsZWRcbiAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29tbXVuaWNhdGlvbnNcIilcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgc3RhdHVzOiBcImZhaWxlZFwiLFxuICAgICAgICAgIGZhaWx1cmVfcmVhc29uOiBzZW5kUmVzdWx0LmVycm9yIHx8IFwiRW1haWwgc2VuZCBmYWlsZWQgb24gcmV0cnlcIixcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKFwiaWRcIiwgZW1haWxJZClcbiAgICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHNlbmRSZXN1bHQuZXJyb3IgfHwgXCJGYWlsZWQgdG8gc2VuZCBlbWFpbCBvbiByZXRyeVwiLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRvIHNlbnRcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjb21tdW5pY2F0aW9uc1wiKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIHN0YXR1czogXCJzZW50XCIsXG4gICAgICAgIHNlbnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcHJvdmlkZXJfbWVzc2FnZV9pZDogc2VuZFJlc3VsdC5kYXRhPy5pZCB8fCBudWxsLFxuICAgICAgICBmYWlsdXJlX3JlYXNvbjogbnVsbCxcbiAgICAgIH0pXG4gICAgICAuZXEoXCJpZFwiLCBlbWFpbElkKVxuICAgICAgLmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpO1xuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyeWluZyBmYWlsZWQgZW1haWw6XCIsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIgfTtcbiAgfVxufSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoieVRBNnFCc0IifQ==
}),
"[project]/apps/web/src/actions/data:bd4309 [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"007e3ac5636eb12e5c32067b03bc3f57069cf25e65":"getEmailFoldersAction"},"apps/web/src/actions/email-folders.ts",""] */ __turbopack_context__.s([
    "getEmailFoldersAction",
    ()=>getEmailFoldersAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var getEmailFoldersAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("007e3ac5636eb12e5c32067b03bc3f57069cf25e65", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getEmailFoldersAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZW1haWwtZm9sZGVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gZnJvbSBcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5jb25zdCBjcmVhdGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuXHRkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuXHRjb2xvcjogei5zdHJpbmcoKS5yZWdleCgvXiNbMC05QS1GYS1mXXs2fSQvKS5vcHRpb25hbCgpLFxuXHRpY29uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcblxuY29uc3QgdXBkYXRlRm9sZGVyU2NoZW1hID0gY3JlYXRlRm9sZGVyU2NoZW1hLnBhcnRpYWwoKS5leHRlbmQoe1xuXHRpZDogei5zdHJpbmcoKS51dWlkKCksXG5cdHNvcnRfb3JkZXI6IHoubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBkZWxldGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLnV1aWQoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZvbGRlciA9IHtcblx0aWQ6IHN0cmluZztcblx0Y29tcGFueV9pZDogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdHNsdWc6IHN0cmluZztcblx0ZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG5cdGNvbG9yOiBzdHJpbmcgfCBudWxsO1xuXHRpY29uOiBzdHJpbmcgfCBudWxsO1xuXHRzb3J0X29yZGVyOiBudW1iZXI7XG5cdGlzX3N5c3RlbTogYm9vbGVhbjtcblx0aXNfYWN0aXZlOiBib29sZWFuO1xuXHRjcmVhdGVkX2J5OiBzdHJpbmcgfCBudWxsO1xuXHRjcmVhdGVkX2F0OiBzdHJpbmc7XG5cdHVwZGF0ZWRfYXQ6IHN0cmluZztcblx0ZGVsZXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IGFsbCBlbWFpbCBmb2xkZXJzIGZvciB0aGUgYWN0aXZlIGNvbXBhbnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYWlsRm9sZGVyc0FjdGlvbigpOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVycz86IEVtYWlsRm9sZGVyW107XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXHRcdGlmICghY29tcGFueUlkKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwiKlwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuZXEoXCJpc19hY3RpdmVcIiwgdHJ1ZSlcblx0XHRcdC5vcmRlcihcInNvcnRfb3JkZXJcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSlcblx0XHRcdC5vcmRlcihcIm5hbWVcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcnM6IGRhdGEgfHwgW10gfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VjY2VzczogZmFsc2UsXG5cdFx0XHRlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcblx0XHR9O1xuXHR9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVtYWlsIGZvbGRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1haWxGb2xkZXJBY3Rpb24oXG5cdGlucHV0OiB6LmluZmVyPHR5cGVvZiBjcmVhdGVGb2xkZXJTY2hlbWE+XG4pOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVyPzogRW1haWxGb2xkZXI7XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGNyZWF0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSBzbHVnIGZyb20gbmFtZVxuXHRcdGNvbnN0IHNsdWcgPSB2YWxpZGF0ZWQubmFtZVxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tK3wtKyQvZywgXCJcIik7XG5cblx0XHQvLyBDaGVjayBpZiBzbHVnIGFscmVhZHkgZXhpc3RzXG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZyB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkXCIpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5lcShcInNsdWdcIiwgc2x1Zylcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkEgZm9sZGVyIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgbWF4IHNvcnRfb3JkZXJcblx0XHRjb25zdCB7IGRhdGE6IG1heE9yZGVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwic29ydF9vcmRlclwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQub3JkZXIoXCJzb3J0X29yZGVyXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdFx0LmxpbWl0KDEpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuaW5zZXJ0KHtcblx0XHRcdFx0Y29tcGFueV9pZDogY29tcGFueUlkLFxuXHRcdFx0XHRuYW1lOiB2YWxpZGF0ZWQubmFtZSxcblx0XHRcdFx0c2x1Zyxcblx0XHRcdFx0ZGVzY3JpcHRpb246IHZhbGlkYXRlZC5kZXNjcmlwdGlvbiB8fCBudWxsLFxuXHRcdFx0XHRjb2xvcjogdmFsaWRhdGVkLmNvbG9yIHx8IG51bGwsXG5cdFx0XHRcdGljb246IHZhbGlkYXRlZC5pY29uIHx8IG51bGwsXG5cdFx0XHRcdHNvcnRfb3JkZXI6IChtYXhPcmRlcj8uc29ydF9vcmRlciB8fCAwKSArIDEsXG5cdFx0XHRcdGNyZWF0ZWRfYnk6IHVzZXIuaWQsXG5cdFx0XHR9KVxuXHRcdFx0LnNlbGVjdCgpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcjogZGF0YSB9O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJvcjogZXJyb3IuZXJyb3JzLm1hcCgoZSkgPT4gYCR7ZS5wYXRoLmpvaW4oXCIuXCIpfTogJHtlLm1lc3NhZ2V9YCkuam9pbihcIiwgXCIpLFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0ZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG5cdFx0fTtcblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZSBhbiBlbWFpbCBmb2xkZXJcbiAqIEBkZXByZWNhdGVkIFVudXNlZFxuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbEZvbGRlckFjdGlvbihcblx0aW5wdXQ6IHouaW5mZXI8dHlwZW9mIHVwZGF0ZUZvbGRlclNjaGVtYT5cbik6IFByb21pc2U8e1xuXHRzdWNjZXNzOiBib29sZWFuO1xuXHRmb2xkZXI/OiBFbWFpbEZvbGRlcjtcblx0ZXJyb3I/OiBzdHJpbmc7XG59PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgdmFsaWRhdGVkID0gdXBkYXRlRm9sZGVyU2NoZW1hLnBhcnNlKGlucHV0KTtcblx0XHRjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcblx0XHRpZiAoIWNvbXBhbnlJZCkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9sZGVyIGV4aXN0cyBhbmQgYmVsb25ncyB0byBjb21wYW55XG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImVtYWlsX2ZvbGRlcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgaXNfc3lzdGVtXCIpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChmZXRjaEVycm9yIHx8ICFleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZvbGRlciBub3QgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGlmIChleGlzdGluZy5pc19zeXN0ZW0pIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDYW5ub3QgdXBkYXRlIHN5c3RlbSBmb2xkZXJzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBJZiBuYW1lIGlzIGJlaW5nIHVwZGF0ZWQsIHJlZ2VuZXJhdGUgc2x1Z1xuXHRcdGNvbnN0IHVwZGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG5cdFx0aWYgKHZhbGlkYXRlZC5uYW1lKSB7XG5cdFx0XHR1cGRhdGVEYXRhLm5hbWUgPSB2YWxpZGF0ZWQubmFtZTtcblx0XHRcdHVwZGF0ZURhdGEuc2x1ZyA9IHZhbGlkYXRlZC5uYW1lXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1teYS16MC05XSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLSt8LSskL2csIFwiXCIpO1xuXHRcdH1cblx0XHRpZiAodmFsaWRhdGVkLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSB2YWxpZGF0ZWQuZGVzY3JpcHRpb247XG5cdFx0aWYgKHZhbGlkYXRlZC5jb2xvciAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmNvbG9yID0gdmFsaWRhdGVkLmNvbG9yO1xuXHRcdGlmICh2YWxpZGF0ZWQuaWNvbiAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmljb24gPSB2YWxpZGF0ZWQuaWNvbjtcblx0XHRpZiAodmFsaWRhdGVkLnNvcnRfb3JkZXIgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zb3J0X29yZGVyID0gdmFsaWRhdGVkLnNvcnRfb3JkZXI7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQudXBkYXRlKHVwZGF0ZURhdGEpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5zZWxlY3QoKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBmb2xkZXI6IGRhdGEgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYW4gZW1haWwgZm9sZGVyIChzb2Z0IGRlbGV0ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUVtYWlsRm9sZGVyQWN0aW9uKFxuXHRpbnB1dDogei5pbmZlcjx0eXBlb2YgZGVsZXRlRm9sZGVyU2NoZW1hPlxuKTogUHJvbWlzZTx7XG5cdHN1Y2Nlc3M6IGJvb2xlYW47XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGRlbGV0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb2xkZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGV4aXN0aW5nLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBpc19zeXN0ZW1cIilcblx0XHRcdC5lcShcImlkXCIsIHZhbGlkYXRlZC5pZClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGZldGNoRXJyb3IgfHwgIWV4aXN0aW5nKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRm9sZGVyIG5vdCBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0aWYgKGV4aXN0aW5nLmlzX3N5c3RlbSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkNhbm5vdCBkZWxldGUgc3lzdGVtIGZvbGRlcnNcIiB9O1xuXHRcdH1cblxuXHRcdC8vIFNvZnQgZGVsZXRlXG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnVwZGF0ZSh7XG5cdFx0XHRcdGRlbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdFx0ZGVsZXRlZF9ieTogdXNlci5pZCxcblx0XHRcdFx0aXNfYWN0aXZlOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJvVEEwQ3NCIn0=
}),
"[project]/apps/web/src/actions/data:f55bb6 [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40c47f4aacde57fa2d2f7b15353f5b7277f571d970":"deleteEmailFolderAction"},"apps/web/src/actions/email-folders.ts",""] */ __turbopack_context__.s([
    "deleteEmailFolderAction",
    ()=>deleteEmailFolderAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var deleteEmailFolderAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("40c47f4aacde57fa2d2f7b15353f5b7277f571d970", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteEmailFolderAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZW1haWwtZm9sZGVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gZnJvbSBcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5jb25zdCBjcmVhdGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuXHRkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuXHRjb2xvcjogei5zdHJpbmcoKS5yZWdleCgvXiNbMC05QS1GYS1mXXs2fSQvKS5vcHRpb25hbCgpLFxuXHRpY29uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcblxuY29uc3QgdXBkYXRlRm9sZGVyU2NoZW1hID0gY3JlYXRlRm9sZGVyU2NoZW1hLnBhcnRpYWwoKS5leHRlbmQoe1xuXHRpZDogei5zdHJpbmcoKS51dWlkKCksXG5cdHNvcnRfb3JkZXI6IHoubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBkZWxldGVGb2xkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLnV1aWQoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZvbGRlciA9IHtcblx0aWQ6IHN0cmluZztcblx0Y29tcGFueV9pZDogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdHNsdWc6IHN0cmluZztcblx0ZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG5cdGNvbG9yOiBzdHJpbmcgfCBudWxsO1xuXHRpY29uOiBzdHJpbmcgfCBudWxsO1xuXHRzb3J0X29yZGVyOiBudW1iZXI7XG5cdGlzX3N5c3RlbTogYm9vbGVhbjtcblx0aXNfYWN0aXZlOiBib29sZWFuO1xuXHRjcmVhdGVkX2J5OiBzdHJpbmcgfCBudWxsO1xuXHRjcmVhdGVkX2F0OiBzdHJpbmc7XG5cdHVwZGF0ZWRfYXQ6IHN0cmluZztcblx0ZGVsZXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IGFsbCBlbWFpbCBmb2xkZXJzIGZvciB0aGUgYWN0aXZlIGNvbXBhbnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYWlsRm9sZGVyc0FjdGlvbigpOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVycz86IEVtYWlsRm9sZGVyW107XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXHRcdGlmICghY29tcGFueUlkKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwiKlwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuZXEoXCJpc19hY3RpdmVcIiwgdHJ1ZSlcblx0XHRcdC5vcmRlcihcInNvcnRfb3JkZXJcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSlcblx0XHRcdC5vcmRlcihcIm5hbWVcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcnM6IGRhdGEgfHwgW10gfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VjY2VzczogZmFsc2UsXG5cdFx0XHRlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcblx0XHR9O1xuXHR9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVtYWlsIGZvbGRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1haWxGb2xkZXJBY3Rpb24oXG5cdGlucHV0OiB6LmluZmVyPHR5cGVvZiBjcmVhdGVGb2xkZXJTY2hlbWE+XG4pOiBQcm9taXNlPHtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Zm9sZGVyPzogRW1haWxGb2xkZXI7XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGNyZWF0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSBzbHVnIGZyb20gbmFtZVxuXHRcdGNvbnN0IHNsdWcgPSB2YWxpZGF0ZWQubmFtZVxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tK3wtKyQvZywgXCJcIik7XG5cblx0XHQvLyBDaGVjayBpZiBzbHVnIGFscmVhZHkgZXhpc3RzXG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZyB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkXCIpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5lcShcInNsdWdcIiwgc2x1Zylcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkEgZm9sZGVyIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBHZXQgbWF4IHNvcnRfb3JkZXJcblx0XHRjb25zdCB7IGRhdGE6IG1heE9yZGVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwic29ydF9vcmRlclwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQub3JkZXIoXCJzb3J0X29yZGVyXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdFx0LmxpbWl0KDEpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQuaW5zZXJ0KHtcblx0XHRcdFx0Y29tcGFueV9pZDogY29tcGFueUlkLFxuXHRcdFx0XHRuYW1lOiB2YWxpZGF0ZWQubmFtZSxcblx0XHRcdFx0c2x1Zyxcblx0XHRcdFx0ZGVzY3JpcHRpb246IHZhbGlkYXRlZC5kZXNjcmlwdGlvbiB8fCBudWxsLFxuXHRcdFx0XHRjb2xvcjogdmFsaWRhdGVkLmNvbG9yIHx8IG51bGwsXG5cdFx0XHRcdGljb246IHZhbGlkYXRlZC5pY29uIHx8IG51bGwsXG5cdFx0XHRcdHNvcnRfb3JkZXI6IChtYXhPcmRlcj8uc29ydF9vcmRlciB8fCAwKSArIDEsXG5cdFx0XHRcdGNyZWF0ZWRfYnk6IHVzZXIuaWQsXG5cdFx0XHR9KVxuXHRcdFx0LnNlbGVjdCgpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGZvbGRlcjogZGF0YSB9O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJvcjogZXJyb3IuZXJyb3JzLm1hcCgoZSkgPT4gYCR7ZS5wYXRoLmpvaW4oXCIuXCIpfTogJHtlLm1lc3NhZ2V9YCkuam9pbihcIiwgXCIpLFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0ZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG5cdFx0fTtcblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZSBhbiBlbWFpbCBmb2xkZXJcbiAqIEBkZXByZWNhdGVkIFVudXNlZFxuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbEZvbGRlckFjdGlvbihcblx0aW5wdXQ6IHouaW5mZXI8dHlwZW9mIHVwZGF0ZUZvbGRlclNjaGVtYT5cbik6IFByb21pc2U8e1xuXHRzdWNjZXNzOiBib29sZWFuO1xuXHRmb2xkZXI/OiBFbWFpbEZvbGRlcjtcblx0ZXJyb3I/OiBzdHJpbmc7XG59PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgdmFsaWRhdGVkID0gdXBkYXRlRm9sZGVyU2NoZW1hLnBhcnNlKGlucHV0KTtcblx0XHRjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcblx0XHRpZiAoIWNvbXBhbnlJZCkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGFjdGl2ZSBjb21wYW55IGZvdW5kXCIgfTtcblx0XHR9XG5cblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9sZGVyIGV4aXN0cyBhbmQgYmVsb25ncyB0byBjb21wYW55XG5cdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImVtYWlsX2ZvbGRlcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgaXNfc3lzdGVtXCIpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChmZXRjaEVycm9yIHx8ICFleGlzdGluZykge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZvbGRlciBub3QgZm91bmRcIiB9O1xuXHRcdH1cblxuXHRcdGlmIChleGlzdGluZy5pc19zeXN0ZW0pIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDYW5ub3QgdXBkYXRlIHN5c3RlbSBmb2xkZXJzXCIgfTtcblx0XHR9XG5cblx0XHQvLyBJZiBuYW1lIGlzIGJlaW5nIHVwZGF0ZWQsIHJlZ2VuZXJhdGUgc2x1Z1xuXHRcdGNvbnN0IHVwZGF0ZURhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG5cdFx0aWYgKHZhbGlkYXRlZC5uYW1lKSB7XG5cdFx0XHR1cGRhdGVEYXRhLm5hbWUgPSB2YWxpZGF0ZWQubmFtZTtcblx0XHRcdHVwZGF0ZURhdGEuc2x1ZyA9IHZhbGlkYXRlZC5uYW1lXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1teYS16MC05XSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLSt8LSskL2csIFwiXCIpO1xuXHRcdH1cblx0XHRpZiAodmFsaWRhdGVkLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSB2YWxpZGF0ZWQuZGVzY3JpcHRpb247XG5cdFx0aWYgKHZhbGlkYXRlZC5jb2xvciAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmNvbG9yID0gdmFsaWRhdGVkLmNvbG9yO1xuXHRcdGlmICh2YWxpZGF0ZWQuaWNvbiAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmljb24gPSB2YWxpZGF0ZWQuaWNvbjtcblx0XHRpZiAodmFsaWRhdGVkLnNvcnRfb3JkZXIgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zb3J0X29yZGVyID0gdmFsaWRhdGVkLnNvcnRfb3JkZXI7XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJlbWFpbF9mb2xkZXJzXCIpXG5cdFx0XHQudXBkYXRlKHVwZGF0ZURhdGEpXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZClcblx0XHRcdC5zZWxlY3QoKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBmb2xkZXI6IGRhdGEgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYW4gZW1haWwgZm9sZGVyIChzb2Z0IGRlbGV0ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUVtYWlsRm9sZGVyQWN0aW9uKFxuXHRpbnB1dDogei5pbmZlcjx0eXBlb2YgZGVsZXRlRm9sZGVyU2NoZW1hPlxuKTogUHJvbWlzZTx7XG5cdHN1Y2Nlc3M6IGJvb2xlYW47XG5cdGVycm9yPzogc3RyaW5nO1xufT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IGRlbGV0ZUZvbGRlclNjaGVtYS5wYXJzZShpbnB1dCk7XG5cdFx0Y29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cdFx0aWYgKCFjb21wYW55SWQpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb2xkZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGV4aXN0aW5nLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBpc19zeXN0ZW1cIilcblx0XHRcdC5lcShcImlkXCIsIHZhbGlkYXRlZC5pZClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKGZldGNoRXJyb3IgfHwgIWV4aXN0aW5nKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRm9sZGVyIG5vdCBmb3VuZFwiIH07XG5cdFx0fVxuXG5cdFx0aWYgKGV4aXN0aW5nLmlzX3N5c3RlbSkge1xuXHRcdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkNhbm5vdCBkZWxldGUgc3lzdGVtIGZvbGRlcnNcIiB9O1xuXHRcdH1cblxuXHRcdC8vIFNvZnQgZGVsZXRlXG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiZW1haWxfZm9sZGVyc1wiKVxuXHRcdFx0LnVwZGF0ZSh7XG5cdFx0XHRcdGRlbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdFx0ZGVsZXRlZF9ieTogdXNlci5pZCxcblx0XHRcdFx0aXNfYWN0aXZlOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0XHQuZXEoXCJpZFwiLCB2YWxpZGF0ZWQuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGNvbXBhbnlJZCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoKGUpID0+IGAke2UucGF0aC5qb2luKFwiLlwiKX06ICR7ZS5tZXNzYWdlfWApLmpvaW4oXCIsIFwiKSxcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdH07XG5cdH1cbn1cblxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzVEFnUXNCIn0=
}),
"[project]/apps/web/src/actions/data:1db406 [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"6048659199289e27e8a29c146dcc920a7afc8ad29e":"searchCustomers"},"apps/web/src/actions/customers.ts",""] */ __turbopack_context__.s([
    "searchCustomers",
    ()=>searchCustomers
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var searchCustomers = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("6048659199289e27e8a29c146dcc920a7afc8ad29e", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "searchCustomers"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vY3VzdG9tZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3VzdG9tZXIgTWFuYWdlbWVudCBTZXJ2ZXIgQWN0aW9uc1xuICpcbiAqIENvbXByZWhlbnNpdmUgY3VzdG9tZXIgcmVsYXRpb25zaGlwIG1hbmFnZW1lbnQgd2l0aDpcbiAqIC0gQ3VzdG9tZXIgQ1JVRCBvcGVyYXRpb25zXG4gKiAtIEN1c3RvbWVyIHBvcnRhbCBpbnZpdGF0aW9uIGFuZCBhY2Nlc3NcbiAqIC0gQ3VzdG9tZXIgbWV0cmljcyB0cmFja2luZyAocmV2ZW51ZSwgam9icywgaW52b2ljZXMpXG4gKiAtIENvbW11bmljYXRpb24gcHJlZmVyZW5jZXNcbiAqIC0gU29mdCBkZWxldGUvYXJjaGl2ZSBzdXBwb3J0XG4gKiAtIEN1c3RvbWVyIHNlYXJjaCBhbmQgZmlsdGVyaW5nXG4gKi9cblxuXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9IGZyb20gXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiO1xuaW1wb3J0IHsgc2VuZEVtYWlsIH0gZnJvbSBcIkAvbGliL2VtYWlsL2VtYWlsLXNlbmRlclwiO1xuaW1wb3J0IHsgRW1haWxUZW1wbGF0ZSB9IGZyb20gXCJAL2xpYi9lbWFpbC9lbWFpbC10eXBlc1wiO1xuaW1wb3J0IHtcbiAgICBBY3Rpb25FcnJvcixcbiAgICBFUlJPUl9DT0RFUyxcbiAgICBFUlJPUl9NRVNTQUdFUyxcbn0gZnJvbSBcIkAvbGliL2Vycm9ycy9hY3Rpb24tZXJyb3JcIjtcbmltcG9ydCB7XG4gICAgdHlwZSBBY3Rpb25SZXN1bHQsXG4gICAgYXNzZXJ0QXV0aGVudGljYXRlZCxcbiAgICBhc3NlcnRFeGlzdHMsXG4gICAgd2l0aEVycm9ySGFuZGxpbmcsXG59IGZyb20gXCJAL2xpYi9lcnJvcnMvd2l0aC1lcnJvci1oYW5kbGluZ1wiO1xuaW1wb3J0IHsgZ2VvY29kZUFkZHJlc3NTaWxlbnQgfSBmcm9tIFwiQC9saWIvc2VydmljZXMvZ2VvY29kaW5nXCI7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCI7XG5pbXBvcnQgeyByZXZhbGlkYXRlUGF0aCB9IGZyb20gXCJuZXh0L2NhY2hlXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IFBvcnRhbEludml0YXRpb25FbWFpbCBmcm9tIFwiLi4vLi4vZW1haWxzL3RlbXBsYXRlcy9jdXN0b21lci9wb3J0YWwtaW52aXRhdGlvblwiO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWQUxJREFUSU9OIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgQ1VTVE9NRVJfTkFNRV9NQVhfTEVOR1RIID0gMTAwO1xuY29uc3QgQ1VTVE9NRVJfQ09NUEFOWV9NQVhfTEVOR1RIID0gMjAwO1xuY29uc3QgQ1VTVE9NRVJfUEhPTkVfTUFYX0xFTkdUSCA9IDIwO1xuY29uc3QgQ1VTVE9NRVJfQUREUkVTU19NQVhfTEVOR1RIID0gMjAwO1xuY29uc3QgQ1VTVE9NRVJfQUREUkVTUzJfTUFYX0xFTkdUSCA9IDEwMDtcbmNvbnN0IENVU1RPTUVSX0NJVFlfTUFYX0xFTkdUSCA9IDEwMDtcbmNvbnN0IENVU1RPTUVSX1NUQVRFX01BWF9MRU5HVEggPSA1MDtcblxuLy8gSFRUUCBTdGF0dXMgY29kZXNcbmNvbnN0IEhUVFBfU1RBVFVTX0ZPUkJJRERFTiA9IDQwMztcblxuLy8gU2VhcmNoIGRlZmF1bHRzXG5jb25zdCBERUZBVUxUX1NFQVJDSF9MSU1JVCA9IDUwO1xuY29uc3QgQ1VTVE9NRVJfWklQX01BWF9MRU5HVEggPSAyMDtcbmNvbnN0IENVU1RPTUVSX0NPVU5UUllfTUFYX0xFTkdUSCA9IDUwO1xuY29uc3QgQ1VTVE9NRVJfVEFYX0VYRU1QVF9OVU1CRVJfTUFYX0xFTkdUSCA9IDUwO1xuY29uc3QgQ0VOVFNfUEVSX0RPTExBUiA9IDEwMDtcblxuZnVuY3Rpb24gcmVxdWlyZVNpdGVVcmwoKTogc3RyaW5nIHtcblx0Y29uc3Qgc2l0ZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVVJMO1xuXHRpZiAoIXNpdGVVcmwpIHtcblx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcIk5FWFRfUFVCTElDX1NJVEVfVVJMIGlzIG5vdCBjb25maWd1cmVkXCIsXG5cdFx0XHRFUlJPUl9DT0RFUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG5cdFx0KTtcblx0fVxuXHRyZXR1cm4gc2l0ZVVybC5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG59XG5cbmNvbnN0IGN1c3RvbWVyU2NoZW1hID0gei5vYmplY3Qoe1xuXHR0eXBlOiB6XG5cdFx0LmVudW0oW1wicmVzaWRlbnRpYWxcIiwgXCJjb21tZXJjaWFsXCIsIFwiaW5kdXN0cmlhbFwiXSlcblx0XHQuZGVmYXVsdChcInJlc2lkZW50aWFsXCIpLFxuXHRmaXJzdE5hbWU6IHpcblx0XHQuc3RyaW5nKClcblx0XHQubWluKDEsIFwiRmlyc3QgbmFtZSBpcyByZXF1aXJlZFwiKVxuXHRcdC5tYXgoQ1VTVE9NRVJfTkFNRV9NQVhfTEVOR1RIKSxcblx0bGFzdE5hbWU6IHpcblx0XHQuc3RyaW5nKClcblx0XHQubWluKDEsIFwiTGFzdCBuYW1lIGlzIHJlcXVpcmVkXCIpXG5cdFx0Lm1heChDVVNUT01FUl9OQU1FX01BWF9MRU5HVEgpLFxuXHRjb21wYW55TmFtZTogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfQ09NUEFOWV9NQVhfTEVOR1RIKS5vcHRpb25hbCgpLFxuXHRlbWFpbDogei5zdHJpbmcoKS5lbWFpbChcIkludmFsaWQgZW1haWwgYWRkcmVzc1wiKSxcblx0cGhvbmU6IHouc3RyaW5nKCkubWluKDEsIFwiUGhvbmUgaXMgcmVxdWlyZWRcIikubWF4KENVU1RPTUVSX1BIT05FX01BWF9MRU5HVEgpLFxuXHRzZWNvbmRhcnlQaG9uZTogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfUEhPTkVfTUFYX0xFTkdUSCkub3B0aW9uYWwoKSxcblx0YWRkcmVzczogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfQUREUkVTU19NQVhfTEVOR1RIKS5vcHRpb25hbCgpLFxuXHRhZGRyZXNzMjogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfQUREUkVTUzJfTUFYX0xFTkdUSCkub3B0aW9uYWwoKSxcblx0Y2l0eTogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfQ0lUWV9NQVhfTEVOR1RIKS5vcHRpb25hbCgpLFxuXHRzdGF0ZTogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfU1RBVEVfTUFYX0xFTkdUSCkub3B0aW9uYWwoKSxcblx0emlwQ29kZTogei5zdHJpbmcoKS5tYXgoQ1VTVE9NRVJfWklQX01BWF9MRU5HVEgpLm9wdGlvbmFsKCksXG5cdGNvdW50cnk6IHouc3RyaW5nKCkubWF4KENVU1RPTUVSX0NPVU5UUllfTUFYX0xFTkdUSCkuZGVmYXVsdChcIlVTQVwiKSxcblx0c291cmNlOiB6XG5cdFx0LmVudW0oW1wicmVmZXJyYWxcIiwgXCJnb29nbGVcIiwgXCJmYWNlYm9va1wiLCBcImRpcmVjdFwiLCBcInllbHBcIiwgXCJvdGhlclwiXSlcblx0XHQub3B0aW9uYWwoKSxcblx0cmVmZXJyZWRCeTogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuXHRwcmVmZXJyZWRDb250YWN0TWV0aG9kOiB6LmVudW0oW1wiZW1haWxcIiwgXCJwaG9uZVwiLCBcInNtc1wiXSkuZGVmYXVsdChcImVtYWlsXCIpLFxuXHRwcmVmZXJyZWRUZWNobmljaWFuOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG5cdGJpbGxpbmdFbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcblx0cGF5bWVudFRlcm1zOiB6XG5cdFx0LmVudW0oW1wiZHVlX29uX3JlY2VpcHRcIiwgXCJuZXRfMTVcIiwgXCJuZXRfMzBcIiwgXCJuZXRfNjBcIl0pXG5cdFx0LmRlZmF1bHQoXCJkdWVfb25fcmVjZWlwdFwiKSxcblx0Y3JlZGl0TGltaXQ6IHoubnVtYmVyKCkuaW50KCkubWluKDApLmRlZmF1bHQoMCksIC8vIEluIGNlbnRzXG5cdHRheEV4ZW1wdDogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG5cdHRheEV4ZW1wdE51bWJlcjogelxuXHRcdC5zdHJpbmcoKVxuXHRcdC5tYXgoQ1VTVE9NRVJfVEFYX0VYRU1QVF9OVU1CRVJfTUFYX0xFTkdUSClcblx0XHQub3B0aW9uYWwoKSxcblx0dGFnczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuXHRub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRpbnRlcm5hbE5vdGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcblxuY29uc3QgY29tbXVuaWNhdGlvblByZWZlcmVuY2VzU2NoZW1hID0gei5vYmplY3Qoe1xuXHRlbWFpbDogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcblx0c21zOiB6LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuXHRwaG9uZTogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcblx0bWFya2V0aW5nOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDVVNUT01FUiBDUlVEIE9QRVJBVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tZXIgd2l0aCBtdWx0aXBsZSBjb250YWN0cyBhbmQgcHJvcGVydGllc1xuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDdXN0b21lcihcblx0Zm9ybURhdGE6IEZvcm1EYXRhLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8c3RyaW5nPj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IHRlYW1NZW1iZXIgPSBhd2FpdCByZXF1aXJlQ3VzdG9tZXJDb21wYW55TWVtYmVyc2hpcChcblx0XHRcdHN1cGFiYXNlLFxuXHRcdFx0dXNlci5pZCxcblx0XHQpO1xuXHRcdGNvbnN0IHsgY29udGFjdHMsIHByb3BlcnRpZXMsIHRhZ3MgfSA9XG5cdFx0XHRwYXJzZUN1c3RvbWVyQ29udGFjdHNQcm9wZXJ0aWVzQW5kVGFncyhmb3JtRGF0YSk7XG5cdFx0Y29uc3QgcHJpbWFyeUNvbnRhY3QgPSBnZXRQcmltYXJ5Q29udGFjdE9yVGhyb3coY29udGFjdHMpO1xuXHRcdGNvbnN0IHByaW1hcnlQcm9wZXJ0eSA9IGdldFByaW1hcnlQcm9wZXJ0eShwcm9wZXJ0aWVzKTtcblxuXHRcdGF3YWl0IGFzc2VydEN1c3RvbWVyRW1haWxOb3REdXBsaWNhdGUoXG5cdFx0XHRzdXBhYmFzZSxcblx0XHRcdHRlYW1NZW1iZXIuY29tcGFueV9pZCxcblx0XHRcdHByaW1hcnlDb250YWN0LmVtYWlsLFxuXHRcdCk7XG5cblx0XHRjb25zdCBjdXN0b21lclR5cGUgPSBmb3JtRGF0YS5nZXQoXCJ0eXBlXCIpIHx8IFwicmVzaWRlbnRpYWxcIjtcblx0XHRjb25zdCBjb21wYW55TmFtZSA9IGZvcm1EYXRhLmdldChcImNvbXBhbnlOYW1lXCIpO1xuXHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gYnVpbGRDdXN0b21lckRpc3BsYXlOYW1lKFxuXHRcdFx0Y3VzdG9tZXJUeXBlLFxuXHRcdFx0Y29tcGFueU5hbWUsXG5cdFx0XHRwcmltYXJ5Q29udGFjdCxcblx0XHQpO1xuXG5cdFx0Y29uc3QgY29tbXVuaWNhdGlvblByZWZlcmVuY2VzID0gYnVpbGREZWZhdWx0Q29tbXVuaWNhdGlvblByZWZlcmVuY2VzKCk7XG5cdFx0Y29uc3QgY3VzdG9tZXJNZXRhZGF0YSA9IGJ1aWxkQ3VzdG9tZXJNZXRhZGF0YShjb250YWN0cyk7XG5cblx0XHRjb25zdCB7IGxhdDogY3VzdG9tZXJMYXQsIGxvbjogY3VzdG9tZXJMb24gfSA9XG5cdFx0XHRhd2FpdCBnZW9jb2RlUHJpbWFyeVByb3BlcnR5SWZBdmFpbGFibGUocHJpbWFyeVByb3BlcnR5KTtcblxuXHRcdGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgaW5zZXJ0Q3VzdG9tZXJSZWNvcmQoc3VwYWJhc2UsIHtcblx0XHRcdGNvbXBhbnlJZDogdGVhbU1lbWJlci5jb21wYW55X2lkLFxuXHRcdFx0Y3VzdG9tZXJUeXBlLFxuXHRcdFx0cHJpbWFyeUNvbnRhY3QsXG5cdFx0XHRjb21wYW55TmFtZVZhbHVlOiBjb21wYW55TmFtZSxcblx0XHRcdGRpc3BsYXlOYW1lLFxuXHRcdFx0cHJpbWFyeVByb3BlcnR5LFxuXHRcdFx0Y3VzdG9tZXJMYXQsXG5cdFx0XHRjdXN0b21lckxvbixcblx0XHRcdGZvcm1EYXRhLFxuXHRcdFx0dGFncyxcblx0XHRcdGNvbW11bmljYXRpb25QcmVmZXJlbmNlcyxcblx0XHRcdGN1c3RvbWVyTWV0YWRhdGEsXG5cdFx0fSk7XG5cblx0XHRhd2FpdCBpbnNlcnRBZGRpdGlvbmFsUHJvcGVydGllc0lmQW55KFxuXHRcdFx0c3VwYWJhc2UsXG5cdFx0XHR0ZWFtTWVtYmVyLmNvbXBhbnlfaWQsXG5cdFx0XHRjdXN0b21lci5pZCxcblx0XHRcdHByb3BlcnRpZXMsXG5cdFx0KTtcblxuXHRcdHJldmFsaWRhdGVQYXRoKFwiL2Rhc2hib2FyZC9jdXN0b21lcnNcIik7XG5cdFx0cmV0dXJuIGN1c3RvbWVyLmlkO1xuXHR9KTtcbn1cblxudHlwZSBQYXJzZWRDdXN0b21lckNvbnRhY3QgPSB7XG5cdGZpcnN0TmFtZTogc3RyaW5nO1xuXHRsYXN0TmFtZTogc3RyaW5nO1xuXHRlbWFpbDogc3RyaW5nO1xuXHRwaG9uZTogc3RyaW5nO1xuXHRyb2xlOiBzdHJpbmc7XG5cdGlzUHJpbWFyeTogYm9vbGVhbjtcbn07XG5cbnR5cGUgUGFyc2VkQ3VzdG9tZXJQcm9wZXJ0eSA9IHtcblx0bmFtZTogc3RyaW5nO1xuXHRhZGRyZXNzOiBzdHJpbmc7XG5cdGFkZHJlc3MyOiBzdHJpbmc7XG5cdGNpdHk6IHN0cmluZztcblx0c3RhdGU6IHN0cmluZztcblx0emlwQ29kZTogc3RyaW5nO1xuXHRjb3VudHJ5OiBzdHJpbmc7XG5cdHByb3BlcnR5VHlwZTogc3RyaW5nO1xuXHRpc1ByaW1hcnk6IGJvb2xlYW47XG5cdG5vdGVzOiBzdHJpbmc7XG59O1xuXG50eXBlIFBhcnNlZEN1c3RvbWVyRm9ybUNvbGxlY3Rpb25zID0ge1xuXHRjb250YWN0czogUGFyc2VkQ3VzdG9tZXJDb250YWN0W107XG5cdHByb3BlcnRpZXM6IFBhcnNlZEN1c3RvbWVyUHJvcGVydHlbXTtcblx0dGFncz86IHN0cmluZ1tdO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gcmVxdWlyZUN1c3RvbWVyQ29tcGFueU1lbWJlcnNoaXAoXG5cdHN1cGFiYXNlOiBOb25OdWxsYWJsZTxBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNsaWVudD4+Pixcblx0dXNlcklkOiBzdHJpbmcsXG4pIHtcblx0Y29uc3QgeyBkYXRhOiB0ZWFtTWVtYmVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdC5mcm9tKFwiY29tcGFueV9tZW1iZXJzaGlwc1wiKVxuXHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0LmVxKFwidXNlcl9pZFwiLCB1c2VySWQpXG5cdFx0LnNpbmdsZSgpO1xuXG5cdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFwiWW91IG11c3QgYmUgcGFydCBvZiBhIGNvbXBhbnlcIixcblx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0SFRUUF9TVEFUVVNfRk9SQklEREVOLFxuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gdGVhbU1lbWJlcjtcbn1cblxuZnVuY3Rpb24gcGFyc2VDdXN0b21lckNvbnRhY3RzUHJvcGVydGllc0FuZFRhZ3MoXG5cdGZvcm1EYXRhOiBGb3JtRGF0YSxcbik6IFBhcnNlZEN1c3RvbWVyRm9ybUNvbGxlY3Rpb25zIHtcblx0Y29uc3QgY29udGFjdHMgPSBwYXJzZUNvbnRhY3RzKGZvcm1EYXRhLmdldChcImNvbnRhY3RzXCIpKTtcblx0Y29uc3QgcHJvcGVydGllcyA9IHBhcnNlUHJvcGVydGllcyhmb3JtRGF0YS5nZXQoXCJwcm9wZXJ0aWVzXCIpKTtcblx0Y29uc3QgdGFncyA9IHBhcnNlVGFnc0ZpZWxkKGZvcm1EYXRhLmdldChcInRhZ3NcIikpO1xuXG5cdHJldHVybiB7IGNvbnRhY3RzLCBwcm9wZXJ0aWVzLCB0YWdzIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29udGFjdHMoXG5cdHZhbHVlOiBGb3JtRGF0YUVudHJ5VmFsdWUgfCBudWxsLFxuKTogUGFyc2VkQ3VzdG9tZXJDb250YWN0W10ge1xuXHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybiBbXTtcblx0fVxuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UodmFsdWUpIGFzIFBhcnNlZEN1c3RvbWVyQ29udGFjdFtdO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcIkludmFsaWQgY29udGFjdHMgZGF0YVwiLFxuXHRcdFx0RVJST1JfQ09ERVMuVkFMSURBVElPTl9GQUlMRUQsXG5cdFx0KTtcblx0fVxufVxuXG5mdW5jdGlvbiBwYXJzZVByb3BlcnRpZXMoXG5cdHZhbHVlOiBGb3JtRGF0YUVudHJ5VmFsdWUgfCBudWxsLFxuKTogUGFyc2VkQ3VzdG9tZXJQcm9wZXJ0eVtdIHtcblx0aWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHZhbHVlKSBhcyBQYXJzZWRDdXN0b21lclByb3BlcnR5W107XG5cdH0gY2F0Y2gge1xuXHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFwiSW52YWxpZCBwcm9wZXJ0aWVzIGRhdGFcIixcblx0XHRcdEVSUk9SX0NPREVTLlZBTElEQVRJT05fRkFJTEVELFxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcGFyc2VUYWdzRmllbGQoXG5cdHZhbHVlOiBGb3JtRGF0YUVudHJ5VmFsdWUgfCBudWxsLFxuKTogc3RyaW5nW10gfCB1bmRlZmluZWQge1xuXHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UodmFsdWUpIGFzIHN0cmluZ1tdO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gdmFsdWUuc3BsaXQoXCIsXCIpLm1hcCgodCkgPT4gdC50cmltKCkpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldFByaW1hcnlDb250YWN0T3JUaHJvdyhcblx0Y29udGFjdHM6IFBhcnNlZEN1c3RvbWVyQ29udGFjdFtdLFxuKTogUGFyc2VkQ3VzdG9tZXJDb250YWN0IHtcblx0Y29uc3QgcHJpbWFyeUNvbnRhY3QgPSBjb250YWN0cy5maW5kKChjKSA9PiBjLmlzUHJpbWFyeSkgfHwgY29udGFjdHNbMF07XG5cdGlmICghcHJpbWFyeUNvbnRhY3QpIHtcblx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcIkF0IGxlYXN0IG9uZSBjb250YWN0IGlzIHJlcXVpcmVkXCIsXG5cdFx0XHRFUlJPUl9DT0RFUy5WQUxJREFUSU9OX0ZBSUxFRCxcblx0XHQpO1xuXHR9XG5cdHJldHVybiBwcmltYXJ5Q29udGFjdDtcbn1cblxuZnVuY3Rpb24gZ2V0UHJpbWFyeVByb3BlcnR5KFxuXHRwcm9wZXJ0aWVzOiBQYXJzZWRDdXN0b21lclByb3BlcnR5W10sXG4pOiBQYXJzZWRDdXN0b21lclByb3BlcnR5IHwgdW5kZWZpbmVkIHtcblx0cmV0dXJuIHByb3BlcnRpZXMuZmluZCgocCkgPT4gcC5pc1ByaW1hcnkpIHx8IHByb3BlcnRpZXNbMF07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFzc2VydEN1c3RvbWVyRW1haWxOb3REdXBsaWNhdGUoXG5cdHN1cGFiYXNlOiBOb25OdWxsYWJsZTxBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNsaWVudD4+Pixcblx0Y29tcGFueUlkOiBzdHJpbmcsXG5cdGVtYWlsOiBzdHJpbmcsXG4pIHtcblx0Y29uc3QgeyBkYXRhOiBleGlzdGluZ0VtYWlsIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0LnNlbGVjdChcImlkXCIpXG5cdFx0LmVxKFwiY29tcGFueV9pZFwiLCBjb21wYW55SWQpXG5cdFx0LmVxKFwiZW1haWxcIiwgZW1haWwpXG5cdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdC5zaW5nbGUoKTtcblxuXHRpZiAoZXhpc3RpbmdFbWFpbCkge1xuXHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFwiQSBjdXN0b21lciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHNcIixcblx0XHRcdEVSUk9SX0NPREVTLkRCX0RVUExJQ0FURV9FTlRSWSxcblx0XHQpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQ3VzdG9tZXJEaXNwbGF5TmFtZShcblx0Y3VzdG9tZXJUeXBlOiBGb3JtRGF0YUVudHJ5VmFsdWUgfCBudWxsLFxuXHRjb21wYW55TmFtZVZhbHVlOiBGb3JtRGF0YUVudHJ5VmFsdWUgfCBudWxsLFxuXHRwcmltYXJ5Q29udGFjdDogUGFyc2VkQ3VzdG9tZXJDb250YWN0LFxuKTogc3RyaW5nIHtcblx0Y29uc3QgY29tcGFueU5hbWUgPSBjb21wYW55TmFtZVZhbHVlID8gU3RyaW5nKGNvbXBhbnlOYW1lVmFsdWUpIDogbnVsbDtcblxuXHRpZiAoY3VzdG9tZXJUeXBlID09PSBcImNvbW1lcmNpYWxcIiAmJiBjb21wYW55TmFtZSkge1xuXHRcdHJldHVybiBjb21wYW55TmFtZTtcblx0fVxuXG5cdHJldHVybiBgJHtwcmltYXJ5Q29udGFjdC5maXJzdE5hbWV9ICR7cHJpbWFyeUNvbnRhY3QubGFzdE5hbWV9YDtcbn1cblxuZnVuY3Rpb24gYnVpbGREZWZhdWx0Q29tbXVuaWNhdGlvblByZWZlcmVuY2VzKCkge1xuXHRyZXR1cm4ge1xuXHRcdGVtYWlsOiB0cnVlLFxuXHRcdHNtczogdHJ1ZSxcblx0XHRwaG9uZTogdHJ1ZSxcblx0XHRtYXJrZXRpbmc6IGZhbHNlLFxuXHR9O1xufVxuXG5mdW5jdGlvbiBidWlsZEN1c3RvbWVyTWV0YWRhdGEoY29udGFjdHM6IFBhcnNlZEN1c3RvbWVyQ29udGFjdFtdKSB7XG5cdHJldHVybiB7XG5cdFx0Y29udGFjdHM6IGNvbnRhY3RzLm1hcCgoYykgPT4gKHtcblx0XHRcdGZpcnN0TmFtZTogYy5maXJzdE5hbWUsXG5cdFx0XHRsYXN0TmFtZTogYy5sYXN0TmFtZSxcblx0XHRcdGVtYWlsOiBjLmVtYWlsLFxuXHRcdFx0cGhvbmU6IGMucGhvbmUsXG5cdFx0XHRyb2xlOiBjLnJvbGUsXG5cdFx0XHRpc1ByaW1hcnk6IGMuaXNQcmltYXJ5LFxuXHRcdH0pKSxcblx0fTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VvY29kZVByaW1hcnlQcm9wZXJ0eUlmQXZhaWxhYmxlKFxuXHRwcmltYXJ5UHJvcGVydHk6IFBhcnNlZEN1c3RvbWVyUHJvcGVydHkgfCB1bmRlZmluZWQsXG4pOiBQcm9taXNlPHsgbGF0OiBudW1iZXIgfCBudWxsOyBsb246IG51bWJlciB8IG51bGwgfT4ge1xuXHRpZiAoXG5cdFx0IShcblx0XHRcdHByaW1hcnlQcm9wZXJ0eT8uYWRkcmVzcyAmJlxuXHRcdFx0cHJpbWFyeVByb3BlcnR5LmNpdHkgJiZcblx0XHRcdHByaW1hcnlQcm9wZXJ0eS5zdGF0ZSAmJlxuXHRcdFx0cHJpbWFyeVByb3BlcnR5LnppcENvZGVcblx0XHQpXG5cdCkge1xuXHRcdHJldHVybiB7IGxhdDogbnVsbCwgbG9uOiBudWxsIH07XG5cdH1cblxuXHRjb25zdCBnZW9jb2RlUmVzdWx0ID0gYXdhaXQgZ2VvY29kZUFkZHJlc3NTaWxlbnQoXG5cdFx0cHJpbWFyeVByb3BlcnR5LmFkZHJlc3MsXG5cdFx0cHJpbWFyeVByb3BlcnR5LmNpdHksXG5cdFx0cHJpbWFyeVByb3BlcnR5LnN0YXRlLFxuXHRcdHByaW1hcnlQcm9wZXJ0eS56aXBDb2RlLFxuXHRcdHByaW1hcnlQcm9wZXJ0eS5jb3VudHJ5IHx8IFwiVVNBXCIsXG5cdCk7XG5cblx0aWYgKCFnZW9jb2RlUmVzdWx0KSB7XG5cdFx0cmV0dXJuIHsgbGF0OiBudWxsLCBsb246IG51bGwgfTtcblx0fVxuXG5cdHJldHVybiB7IGxhdDogZ2VvY29kZVJlc3VsdC5sYXQsIGxvbjogZ2VvY29kZVJlc3VsdC5sb24gfTtcbn1cblxudHlwZSBJbnNlcnRDdXN0b21lclBhcmFtcyA9IHtcblx0Y29tcGFueUlkOiBzdHJpbmc7XG5cdGN1c3RvbWVyVHlwZTogRm9ybURhdGFFbnRyeVZhbHVlIHwgbnVsbDtcblx0cHJpbWFyeUNvbnRhY3Q6IFBhcnNlZEN1c3RvbWVyQ29udGFjdDtcblx0Y29tcGFueU5hbWVWYWx1ZTogRm9ybURhdGFFbnRyeVZhbHVlIHwgbnVsbDtcblx0ZGlzcGxheU5hbWU6IHN0cmluZztcblx0cHJpbWFyeVByb3BlcnR5PzogUGFyc2VkQ3VzdG9tZXJQcm9wZXJ0eTtcblx0Y3VzdG9tZXJMYXQ6IG51bWJlciB8IG51bGw7XG5cdGN1c3RvbWVyTG9uOiBudW1iZXIgfCBudWxsO1xuXHRmb3JtRGF0YTogRm9ybURhdGE7XG5cdHRhZ3M/OiBzdHJpbmdbXTtcblx0Y29tbXVuaWNhdGlvblByZWZlcmVuY2VzOiB7XG5cdFx0ZW1haWw6IGJvb2xlYW47XG5cdFx0c21zOiBib29sZWFuO1xuXHRcdHBob25lOiBib29sZWFuO1xuXHRcdG1hcmtldGluZzogYm9vbGVhbjtcblx0fTtcblx0Y3VzdG9tZXJNZXRhZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59O1xuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRDdXN0b21lclJlY29yZChcblx0c3VwYWJhc2U6IE5vbk51bGxhYmxlPEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ2xpZW50Pj4+LFxuXHRwYXJhbXM6IEluc2VydEN1c3RvbWVyUGFyYW1zLFxuKSB7XG5cdGNvbnN0IHBheWxvYWQgPSBidWlsZEN1c3RvbWVySW5zZXJ0UGF5bG9hZChwYXJhbXMpO1xuXG5cdGNvbnN0IHsgZGF0YTogY3VzdG9tZXIsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdC5pbnNlcnQocGF5bG9hZClcblx0XHQuc2VsZWN0KFwiaWRcIilcblx0XHQuc2luZ2xlKCk7XG5cblx0aWYgKGNyZWF0ZUVycm9yIHx8ICFjdXN0b21lcikge1xuXHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdEVSUk9SX01FU1NBR0VTLm9wZXJhdGlvbkZhaWxlZChcImNyZWF0ZSBjdXN0b21lclwiKSxcblx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gY3VzdG9tZXI7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQ3VzdG9tZXJJbnNlcnRQYXlsb2FkKFxuXHRwYXJhbXM6IEluc2VydEN1c3RvbWVyUGFyYW1zLFxuKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuXHRjb25zdCB7XG5cdFx0Y29tcGFueUlkLFxuXHRcdGN1c3RvbWVyVHlwZSxcblx0XHRwcmltYXJ5Q29udGFjdCxcblx0XHRjb21wYW55TmFtZVZhbHVlLFxuXHRcdGRpc3BsYXlOYW1lLFxuXHRcdHByaW1hcnlQcm9wZXJ0eSxcblx0XHRjdXN0b21lckxhdCxcblx0XHRjdXN0b21lckxvbixcblx0XHRmb3JtRGF0YSxcblx0XHR0YWdzLFxuXHRcdGNvbW11bmljYXRpb25QcmVmZXJlbmNlcyxcblx0XHRjdXN0b21lck1ldGFkYXRhLFxuXHR9ID0gcGFyYW1zO1xuXG5cdGNvbnN0IGNvbXBhbnlOYW1lID0gY29tcGFueU5hbWVWYWx1ZSA/IFN0cmluZyhjb21wYW55TmFtZVZhbHVlKSA6IG51bGw7XG5cblx0cmV0dXJuIHtcblx0XHRjb21wYW55X2lkOiBjb21wYW55SWQsXG5cdFx0dHlwZTogU3RyaW5nKGN1c3RvbWVyVHlwZSB8fCBcInJlc2lkZW50aWFsXCIpLFxuXHRcdGZpcnN0X25hbWU6IHByaW1hcnlDb250YWN0LmZpcnN0TmFtZSxcblx0XHRsYXN0X25hbWU6IHByaW1hcnlDb250YWN0Lmxhc3ROYW1lLFxuXHRcdGNvbXBhbnlfbmFtZTogY29tcGFueU5hbWUsXG5cdFx0ZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZSxcblx0XHRlbWFpbDogcHJpbWFyeUNvbnRhY3QuZW1haWwsXG5cdFx0cGhvbmU6IHByaW1hcnlDb250YWN0LnBob25lLFxuXHRcdHNlY29uZGFyeV9waG9uZTogbnVsbCxcblx0XHRhZGRyZXNzOiBwcmltYXJ5UHJvcGVydHk/LmFkZHJlc3MgfHwgbnVsbCxcblx0XHRhZGRyZXNzMjogcHJpbWFyeVByb3BlcnR5Py5hZGRyZXNzMiB8fCBudWxsLFxuXHRcdGNpdHk6IHByaW1hcnlQcm9wZXJ0eT8uY2l0eSB8fCBudWxsLFxuXHRcdHN0YXRlOiBwcmltYXJ5UHJvcGVydHk/LnN0YXRlIHx8IG51bGwsXG5cdFx0emlwX2NvZGU6IHByaW1hcnlQcm9wZXJ0eT8uemlwQ29kZSB8fCBudWxsLFxuXHRcdGNvdW50cnk6IHByaW1hcnlQcm9wZXJ0eT8uY291bnRyeSB8fCBcIlVTQVwiLFxuXHRcdGxhdDogY3VzdG9tZXJMYXQsXG5cdFx0bG9uOiBjdXN0b21lckxvbixcblx0XHRzb3VyY2U6IGZvcm1EYXRhLmdldChcInNvdXJjZVwiKSA/IFN0cmluZyhmb3JtRGF0YS5nZXQoXCJzb3VyY2VcIikpIDogbnVsbCxcblx0XHRyZWZlcnJlZF9ieTogZm9ybURhdGEuZ2V0KFwicmVmZXJyZWRCeVwiKVxuXHRcdFx0PyBTdHJpbmcoZm9ybURhdGEuZ2V0KFwicmVmZXJyZWRCeVwiKSlcblx0XHRcdDogbnVsbCxcblx0XHRwcmVmZXJyZWRfY29udGFjdF9tZXRob2Q6XG5cdFx0XHRTdHJpbmcoZm9ybURhdGEuZ2V0KFwicHJlZmVycmVkQ29udGFjdE1ldGhvZFwiKSkgfHwgXCJlbWFpbFwiLFxuXHRcdHByZWZlcnJlZF90ZWNobmljaWFuOiBmb3JtRGF0YS5nZXQoXCJwcmVmZXJyZWRUZWNobmljaWFuXCIpXG5cdFx0XHQ/IFN0cmluZyhmb3JtRGF0YS5nZXQoXCJwcmVmZXJyZWRUZWNobmljaWFuXCIpKVxuXHRcdFx0OiBudWxsLFxuXHRcdGJpbGxpbmdfZW1haWw6IGZvcm1EYXRhLmdldChcImJpbGxpbmdFbWFpbFwiKVxuXHRcdFx0PyBTdHJpbmcoZm9ybURhdGEuZ2V0KFwiYmlsbGluZ0VtYWlsXCIpKVxuXHRcdFx0OiBudWxsLFxuXHRcdHBheW1lbnRfdGVybXM6IFN0cmluZyhmb3JtRGF0YS5nZXQoXCJwYXltZW50VGVybXNcIikpIHx8IFwiZHVlX29uX3JlY2VpcHRcIixcblx0XHRjcmVkaXRfbGltaXQ6IGZvcm1EYXRhLmdldChcImNyZWRpdExpbWl0XCIpXG5cdFx0XHQ/IE51bWJlcihmb3JtRGF0YS5nZXQoXCJjcmVkaXRMaW1pdFwiKSkgKiBDRU5UU19QRVJfRE9MTEFSXG5cdFx0XHQ6IDAsXG5cdFx0dGF4X2V4ZW1wdDogZm9ybURhdGEuZ2V0KFwidGF4RXhlbXB0XCIpID09PSBcIm9uXCIsXG5cdFx0dGF4X2V4ZW1wdF9udW1iZXI6IGZvcm1EYXRhLmdldChcInRheEV4ZW1wdE51bWJlclwiKVxuXHRcdFx0PyBTdHJpbmcoZm9ybURhdGEuZ2V0KFwidGF4RXhlbXB0TnVtYmVyXCIpKVxuXHRcdFx0OiBudWxsLFxuXHRcdHRhZ3M6IHRhZ3MgfHwgbnVsbCxcblx0XHRjb21tdW5pY2F0aW9uX3ByZWZlcmVuY2VzOiBjb21tdW5pY2F0aW9uUHJlZmVyZW5jZXMsXG5cdFx0bm90ZXM6IGZvcm1EYXRhLmdldChcIm5vdGVzXCIpID8gU3RyaW5nKGZvcm1EYXRhLmdldChcIm5vdGVzXCIpKSA6IG51bGwsXG5cdFx0aW50ZXJuYWxfbm90ZXM6IGZvcm1EYXRhLmdldChcImludGVybmFsTm90ZXNcIilcblx0XHRcdD8gU3RyaW5nKGZvcm1EYXRhLmdldChcImludGVybmFsTm90ZXNcIikpXG5cdFx0XHQ6IG51bGwsXG5cdFx0bWV0YWRhdGE6IGN1c3RvbWVyTWV0YWRhdGEsXG5cdFx0c3RhdHVzOiBcImFjdGl2ZVwiLFxuXHRcdHBvcnRhbF9lbmFibGVkOiBmYWxzZSxcblx0XHR0b3RhbF9yZXZlbnVlOiAwLFxuXHRcdHRvdGFsX2pvYnM6IDAsXG5cdFx0dG90YWxfaW52b2ljZXM6IDAsXG5cdFx0YXZlcmFnZV9qb2JfdmFsdWU6IDAsXG5cdFx0b3V0c3RhbmRpbmdfYmFsYW5jZTogMCxcblx0fTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0QWRkaXRpb25hbFByb3BlcnRpZXNJZkFueShcblx0c3VwYWJhc2U6IE5vbk51bGxhYmxlPEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ2xpZW50Pj4+LFxuXHRjb21wYW55SWQ6IHN0cmluZyxcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuXHRwcm9wZXJ0aWVzOiBQYXJzZWRDdXN0b21lclByb3BlcnR5W10sXG4pIHtcblx0Y29uc3QgYWRkaXRpb25hbFByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzLmZpbHRlcigocCkgPT4gIXAuaXNQcmltYXJ5KTtcblx0aWYgKGFkZGl0aW9uYWxQcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHByb3BlcnRpZXNUb0luc2VydCA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzLm1hcChhc3luYyAocHJvcCkgPT4ge1xuXHRcdFx0bGV0IHByb3BMYXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdFx0bGV0IHByb3BMb246IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRpZiAocHJvcC5hZGRyZXNzICYmIHByb3AuY2l0eSAmJiBwcm9wLnN0YXRlICYmIHByb3AuemlwQ29kZSkge1xuXHRcdFx0XHRjb25zdCBnZW9jb2RlUmVzdWx0ID0gYXdhaXQgZ2VvY29kZUFkZHJlc3NTaWxlbnQoXG5cdFx0XHRcdFx0cHJvcC5hZGRyZXNzLFxuXHRcdFx0XHRcdHByb3AuY2l0eSxcblx0XHRcdFx0XHRwcm9wLnN0YXRlLFxuXHRcdFx0XHRcdHByb3AuemlwQ29kZSxcblx0XHRcdFx0XHRwcm9wLmNvdW50cnkgfHwgXCJVU0FcIixcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoZ2VvY29kZVJlc3VsdCkge1xuXHRcdFx0XHRcdHByb3BMYXQgPSBnZW9jb2RlUmVzdWx0LmxhdDtcblx0XHRcdFx0XHRwcm9wTG9uID0gZ2VvY29kZVJlc3VsdC5sb247XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y29tcGFueV9pZDogY29tcGFueUlkLFxuXHRcdFx0XHRjdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcblx0XHRcdFx0bmFtZTogcHJvcC5uYW1lIHx8IFwiQWRkaXRpb25hbCBQcm9wZXJ0eVwiLFxuXHRcdFx0XHRhZGRyZXNzOiBwcm9wLmFkZHJlc3MsXG5cdFx0XHRcdGFkZHJlc3MyOiBwcm9wLmFkZHJlc3MyIHx8IG51bGwsXG5cdFx0XHRcdGNpdHk6IHByb3AuY2l0eSxcblx0XHRcdFx0c3RhdGU6IHByb3Auc3RhdGUsXG5cdFx0XHRcdHppcF9jb2RlOiBwcm9wLnppcENvZGUsXG5cdFx0XHRcdGNvdW50cnk6IHByb3AuY291bnRyeSB8fCBcIlVTQVwiLFxuXHRcdFx0XHRwcm9wZXJ0eV90eXBlOiBwcm9wLnByb3BlcnR5VHlwZSB8fCBcInJlc2lkZW50aWFsXCIsXG5cdFx0XHRcdG5vdGVzOiBwcm9wLm5vdGVzIHx8IG51bGwsXG5cdFx0XHRcdGxhdDogcHJvcExhdCxcblx0XHRcdFx0bG9uOiBwcm9wTG9uLFxuXHRcdFx0fTtcblx0XHR9KSxcblx0KTtcblxuXHRhd2FpdCBzdXBhYmFzZS5mcm9tKFwicHJvcGVydGllc1wiKS5pbnNlcnQocHJvcGVydGllc1RvSW5zZXJ0KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgZXhpc3RpbmcgY3VzdG9tZXJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ3VzdG9tZXIoXG5cdGN1c3RvbWVySWQ6IHN0cmluZyxcblx0Zm9ybURhdGE6IEZvcm1EYXRhLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dm9pZD4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB0ZWFtTWVtYmVyID0gYXdhaXQgcmVxdWlyZUN1c3RvbWVyQ29tcGFueU1lbWJlcnNoaXAoXG5cdFx0XHRzdXBhYmFzZSxcblx0XHRcdHVzZXIuaWQsXG5cdFx0KTtcblxuXHRcdC8vIFZlcmlmeSBjdXN0b21lciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogY3VzdG9tZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBjb21wYW55X2lkLCBlbWFpbFwiKVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGFzc2VydEV4aXN0cyhjdXN0b21lciwgXCJDdXN0b21lclwiKTtcblxuXHRcdGlmIChjdXN0b21lci5jb21wYW55X2lkICE9PSB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJDdXN0b21lciBub3QgZm91bmRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEhUVFBfU1RBVFVTX0ZPUkJJRERFTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gUGFyc2UgdGFncyBpZiBwcm92aWRlZFxuXHRcdGxldCB0YWdzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcblx0XHRjb25zdCB0YWdzU3RyaW5nID0gZm9ybURhdGEuZ2V0KFwidGFnc1wiKTtcblx0XHRpZiAodGFnc1N0cmluZyAmJiB0eXBlb2YgdGFnc1N0cmluZyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGFncyA9IEpTT04ucGFyc2UodGFnc1N0cmluZyk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0dGFncyA9IHRhZ3NTdHJpbmcuc3BsaXQoXCIsXCIpLm1hcCgodCkgPT4gdC50cmltKCkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFZhbGlkYXRlIGlucHV0XG5cdFx0Y29uc3QgZGF0YSA9IGN1c3RvbWVyU2NoZW1hLnBhcnNlKHtcblx0XHRcdHR5cGU6IGZvcm1EYXRhLmdldChcInR5cGVcIikgfHwgXCJyZXNpZGVudGlhbFwiLFxuXHRcdFx0Zmlyc3ROYW1lOiBmb3JtRGF0YS5nZXQoXCJmaXJzdE5hbWVcIiksXG5cdFx0XHRsYXN0TmFtZTogZm9ybURhdGEuZ2V0KFwibGFzdE5hbWVcIiksXG5cdFx0XHRjb21wYW55TmFtZTogZm9ybURhdGEuZ2V0KFwiY29tcGFueU5hbWVcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0ZW1haWw6IGZvcm1EYXRhLmdldChcImVtYWlsXCIpLFxuXHRcdFx0cGhvbmU6IGZvcm1EYXRhLmdldChcInBob25lXCIpLFxuXHRcdFx0c2Vjb25kYXJ5UGhvbmU6IGZvcm1EYXRhLmdldChcInNlY29uZGFyeVBob25lXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdGFkZHJlc3M6IGZvcm1EYXRhLmdldChcImFkZHJlc3NcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0YWRkcmVzczI6IGZvcm1EYXRhLmdldChcImFkZHJlc3MyXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdGNpdHk6IGZvcm1EYXRhLmdldChcImNpdHlcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0c3RhdGU6IGZvcm1EYXRhLmdldChcInN0YXRlXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdHppcENvZGU6IGZvcm1EYXRhLmdldChcInppcENvZGVcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0Y291bnRyeTogZm9ybURhdGEuZ2V0KFwiY291bnRyeVwiKSB8fCBcIlVTQVwiLFxuXHRcdFx0c291cmNlOiBmb3JtRGF0YS5nZXQoXCJzb3VyY2VcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0cmVmZXJyZWRCeTogZm9ybURhdGEuZ2V0KFwicmVmZXJyZWRCeVwiKSB8fCBudWxsLFxuXHRcdFx0cHJlZmVycmVkQ29udGFjdE1ldGhvZDogZm9ybURhdGEuZ2V0KFwicHJlZmVycmVkQ29udGFjdE1ldGhvZFwiKSB8fCBcImVtYWlsXCIsXG5cdFx0XHRwcmVmZXJyZWRUZWNobmljaWFuOiBmb3JtRGF0YS5nZXQoXCJwcmVmZXJyZWRUZWNobmljaWFuXCIpIHx8IG51bGwsXG5cdFx0XHRiaWxsaW5nRW1haWw6IGZvcm1EYXRhLmdldChcImJpbGxpbmdFbWFpbFwiKSB8fCBudWxsLFxuXHRcdFx0cGF5bWVudFRlcm1zOiBmb3JtRGF0YS5nZXQoXCJwYXltZW50VGVybXNcIikgfHwgXCJkdWVfb25fcmVjZWlwdFwiLFxuXHRcdFx0Y3JlZGl0TGltaXQ6IGZvcm1EYXRhLmdldChcImNyZWRpdExpbWl0XCIpXG5cdFx0XHRcdD8gTnVtYmVyKGZvcm1EYXRhLmdldChcImNyZWRpdExpbWl0XCIpKVxuXHRcdFx0XHQ6IDAsXG5cdFx0XHR0YXhFeGVtcHQ6IGZvcm1EYXRhLmdldChcInRheEV4ZW1wdFwiKSA9PT0gXCJ0cnVlXCIsXG5cdFx0XHR0YXhFeGVtcHROdW1iZXI6IGZvcm1EYXRhLmdldChcInRheEV4ZW1wdE51bWJlclwiKSB8fCB1bmRlZmluZWQsXG5cdFx0XHR0YWdzLFxuXHRcdFx0bm90ZXM6IGZvcm1EYXRhLmdldChcIm5vdGVzXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdGludGVybmFsTm90ZXM6IGZvcm1EYXRhLmdldChcImludGVybmFsTm90ZXNcIikgfHwgdW5kZWZpbmVkLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgZW1haWwgYWxyZWFkeSBleGlzdHMgKGV4Y2x1ZGluZyBjdXJyZW50IGN1c3RvbWVyKVxuXHRcdGlmIChkYXRhLmVtYWlsICE9PSBjdXN0b21lci5lbWFpbCkge1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBleGlzdGluZ0VtYWlsIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0XHQuc2VsZWN0KFwiaWRcIilcblx0XHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpXG5cdFx0XHRcdC5lcShcImVtYWlsXCIsIGRhdGEuZW1haWwpXG5cdFx0XHRcdC5uZXEoXCJpZFwiLCBjdXN0b21lcklkKVxuXHRcdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdFx0aWYgKGV4aXN0aW5nRW1haWwpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcdFwiQSBjdXN0b21lciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHNcIixcblx0XHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9EVVBMSUNBVEVfRU5UUlksXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgZGlzcGxheSBuYW1lXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPVxuXHRcdFx0ZGF0YS50eXBlID09PSBcImNvbW1lcmNpYWxcIiAmJiBkYXRhLmNvbXBhbnlOYW1lXG5cdFx0XHRcdD8gZGF0YS5jb21wYW55TmFtZVxuXHRcdFx0XHQ6IGAke2RhdGEuZmlyc3ROYW1lfSAke2RhdGEubGFzdE5hbWV9YDtcblxuXHRcdGNvbnN0IGNvbXBhbnlOYW1lID0gZGF0YS5jb21wYW55TmFtZSA/IFN0cmluZyhkYXRhLmNvbXBhbnlOYW1lKSA6IG51bGw7XG5cblx0XHQvLyBVcGRhdGUgY3VzdG9tZXJcblx0XHRjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0XHQudXBkYXRlKHtcblx0XHRcdFx0dHlwZTogZGF0YS50eXBlLFxuXHRcdFx0XHRmaXJzdF9uYW1lOiBkYXRhLmZpcnN0TmFtZSxcblx0XHRcdFx0bGFzdF9uYW1lOiBkYXRhLmxhc3ROYW1lLFxuXHRcdFx0XHRjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLFxuXHRcdFx0XHRkaXNwbGF5X25hbWU6IGRpc3BsYXlOYW1lLFxuXHRcdFx0XHRlbWFpbDogZGF0YS5lbWFpbCxcblx0XHRcdFx0cGhvbmU6IGRhdGEucGhvbmUsXG5cdFx0XHRcdHNlY29uZGFyeV9waG9uZTogZGF0YS5zZWNvbmRhcnlQaG9uZSxcblx0XHRcdFx0YWRkcmVzczogZGF0YS5hZGRyZXNzLFxuXHRcdFx0XHRhZGRyZXNzMjogZGF0YS5hZGRyZXNzMixcblx0XHRcdFx0Y2l0eTogZGF0YS5jaXR5LFxuXHRcdFx0XHRzdGF0ZTogZGF0YS5zdGF0ZSxcblx0XHRcdFx0emlwX2NvZGU6IGRhdGEuemlwQ29kZSxcblx0XHRcdFx0Y291bnRyeTogZGF0YS5jb3VudHJ5LFxuXHRcdFx0XHRzb3VyY2U6IGRhdGEuc291cmNlLFxuXHRcdFx0XHRyZWZlcnJlZF9ieTogZGF0YS5yZWZlcnJlZEJ5LFxuXHRcdFx0XHRwcmVmZXJyZWRfY29udGFjdF9tZXRob2Q6IGRhdGEucHJlZmVycmVkQ29udGFjdE1ldGhvZCxcblx0XHRcdFx0cHJlZmVycmVkX3RlY2huaWNpYW46IGRhdGEucHJlZmVycmVkVGVjaG5pY2lhbixcblx0XHRcdFx0YmlsbGluZ19lbWFpbDogZGF0YS5iaWxsaW5nRW1haWwsXG5cdFx0XHRcdHBheW1lbnRfdGVybXM6IGRhdGEucGF5bWVudFRlcm1zLFxuXHRcdFx0XHRjcmVkaXRfbGltaXQ6IGRhdGEuY3JlZGl0TGltaXQsXG5cdFx0XHRcdHRheF9leGVtcHQ6IGRhdGEudGF4RXhlbXB0LFxuXHRcdFx0XHR0YXhfZXhlbXB0X251bWJlcjogZGF0YS50YXhFeGVtcHROdW1iZXIsXG5cdFx0XHRcdHRhZ3M6IGRhdGEudGFncyxcblx0XHRcdFx0bm90ZXM6IGRhdGEubm90ZXMsXG5cdFx0XHRcdGludGVybmFsX25vdGVzOiBkYXRhLmludGVybmFsTm90ZXMsXG5cdFx0XHR9KVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZCk7XG5cblx0XHRpZiAodXBkYXRlRXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0RVJST1JfTUVTU0FHRVMub3BlcmF0aW9uRmFpbGVkKFwidXBkYXRlIGN1c3RvbWVyXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV2YWxpZGF0ZVBhdGgoXCIvZGFzaGJvYXJkL2N1c3RvbWVyc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9jdXN0b21lcnMvJHtjdXN0b21lcklkfWApO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBEZWxldGUgY3VzdG9tZXIgKHNvZnQgZGVsZXRlL2FyY2hpdmUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDdXN0b21lcihcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dm9pZD4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB0ZWFtTWVtYmVyID0gYXdhaXQgcmVxdWlyZUN1c3RvbWVyQ29tcGFueU1lbWJlcnNoaXAoXG5cdFx0XHRzdXBhYmFzZSxcblx0XHRcdHVzZXIuaWQsXG5cdFx0KTtcblxuXHRcdC8vIFZlcmlmeSBjdXN0b21lciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogY3VzdG9tZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBjb21wYW55X2lkLCBvdXRzdGFuZGluZ19iYWxhbmNlXCIpXG5cdFx0XHQuZXEoXCJpZFwiLCBjdXN0b21lcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKGN1c3RvbWVyLCBcIkN1c3RvbWVyXCIpO1xuXG5cdFx0aWYgKGN1c3RvbWVyLmNvbXBhbnlfaWQgIT09IHRlYW1NZW1iZXIuY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkN1c3RvbWVyIG5vdCBmb3VuZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0SFRUUF9TVEFUVVNfRk9SQklEREVOLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBQcmV2ZW50IGRlbGV0aW9uIGlmIGN1c3RvbWVyIGhhcyBvdXRzdGFuZGluZyBiYWxhbmNlXG5cdFx0aWYgKGN1c3RvbWVyLm91dHN0YW5kaW5nX2JhbGFuY2UgPiAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiQ2Fubm90IGRlbGV0ZSBjdXN0b21lciB3aXRoIG91dHN0YW5kaW5nIGJhbGFuY2UuIENvbGxlY3QgcGF5bWVudCBmaXJzdC5cIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQlVTSU5FU1NfUlVMRV9WSU9MQVRJT04sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFNvZnQgZGVsZXRlXG5cdFx0Y29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnVwZGF0ZSh7XG5cdFx0XHRcdGRlbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdFx0ZGVsZXRlZF9ieTogdXNlci5pZCxcblx0XHRcdFx0c3RhdHVzOiBcImFyY2hpdmVkXCIsXG5cdFx0XHR9KVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZCk7XG5cblx0XHRpZiAoZGVsZXRlRXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0RVJST1JfTUVTU0FHRVMub3BlcmF0aW9uRmFpbGVkKFwiZGVsZXRlIGN1c3RvbWVyXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV2YWxpZGF0ZVBhdGgoXCIvZGFzaGJvYXJkL2N1c3RvbWVyc1wiKTtcblx0fSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENVU1RPTUVSIFNUQVRVUyAmIFBSRUZFUkVOQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVXBkYXRlIGN1c3RvbWVyIHN0YXR1c1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVDdXN0b21lclN0YXR1cyhcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuXHRzdGF0dXM6IFwiYWN0aXZlXCIgfCBcImluYWN0aXZlXCIgfCBcImFyY2hpdmVkXCIgfCBcImJsb2NrZWRcIixcbik6IFByb21pc2U8QWN0aW9uUmVzdWx0PHZvaWQ+PiB7XG5cdHJldHVybiB3aXRoRXJyb3JIYW5kbGluZyhhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfQ09OTkVDVElPTl9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qge1xuXHRcdFx0ZGF0YTogeyB1c2VyIH0sXG5cdFx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGFzc2VydEF1dGhlbnRpY2F0ZWQodXNlcj8uaWQpO1xuXG5cdFx0Y29uc3QgdGVhbU1lbWJlciA9IGF3YWl0IHJlcXVpcmVDdXN0b21lckNvbXBhbnlNZW1iZXJzaGlwKFxuXHRcdFx0c3VwYWJhc2UsXG5cdFx0XHR1c2VyLmlkLFxuXHRcdCk7XG5cblx0XHQvLyBWZXJpZnkgY3VzdG9tZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGN1c3RvbWVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGFzc2VydEV4aXN0cyhjdXN0b21lciwgXCJDdXN0b21lclwiKTtcblxuXHRcdGlmIChjdXN0b21lci5jb21wYW55X2lkICE9PSB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJDdXN0b21lciBub3QgZm91bmRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEhUVFBfU1RBVFVTX0ZPUkJJRERFTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHN0YXR1c1xuXHRcdGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC51cGRhdGUoeyBzdGF0dXMgfSlcblx0XHRcdC5lcShcImlkXCIsIGN1c3RvbWVySWQpO1xuXG5cdFx0aWYgKHVwZGF0ZUVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdEVSUk9SX01FU1NBR0VTLm9wZXJhdGlvbkZhaWxlZChcInVwZGF0ZSBjdXN0b21lciBzdGF0dXNcIiksXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXZhbGlkYXRlUGF0aChcIi9kYXNoYm9hcmQvY3VzdG9tZXJzXCIpO1xuXHRcdHJldmFsaWRhdGVQYXRoKGAvZGFzaGJvYXJkL2N1c3RvbWVycy8ke2N1c3RvbWVySWR9YCk7XG5cdH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBjb21tdW5pY2F0aW9uIHByZWZlcmVuY2VzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNvbW11bmljYXRpb25QcmVmZXJlbmNlcyhcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuXHRmb3JtRGF0YTogRm9ybURhdGEsXG4pOiBQcm9taXNlPEFjdGlvblJlc3VsdDx2b2lkPj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IHRlYW1NZW1iZXIgPSBhd2FpdCByZXF1aXJlQ3VzdG9tZXJDb21wYW55TWVtYmVyc2hpcChcblx0XHRcdHN1cGFiYXNlLFxuXHRcdFx0dXNlci5pZCxcblx0XHQpO1xuXG5cdFx0Ly8gVmVyaWZ5IGN1c3RvbWVyIGV4aXN0cyBhbmQgYmVsb25ncyB0byBjb21wYW55XG5cdFx0Y29uc3QgeyBkYXRhOiBjdXN0b21lciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwiaWQsIGNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcImlkXCIsIGN1c3RvbWVySWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRhc3NlcnRFeGlzdHMoY3VzdG9tZXIsIFwiQ3VzdG9tZXJcIik7XG5cblx0XHRpZiAoY3VzdG9tZXIuY29tcGFueV9pZCAhPT0gdGVhbU1lbWJlci5jb21wYW55X2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiQ3VzdG9tZXIgbm90IGZvdW5kXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHRIVFRQX1NUQVRVU19GT1JCSURERU4sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFZhbGlkYXRlIGlucHV0XG5cdFx0Y29uc3QgcHJlZmVyZW5jZXMgPSBjb21tdW5pY2F0aW9uUHJlZmVyZW5jZXNTY2hlbWEucGFyc2Uoe1xuXHRcdFx0ZW1haWw6IGZvcm1EYXRhLmdldChcImVtYWlsXCIpID09PSBcInRydWVcIixcblx0XHRcdHNtczogZm9ybURhdGEuZ2V0KFwic21zXCIpID09PSBcInRydWVcIixcblx0XHRcdHBob25lOiBmb3JtRGF0YS5nZXQoXCJwaG9uZVwiKSA9PT0gXCJ0cnVlXCIsXG5cdFx0XHRtYXJrZXRpbmc6IGZvcm1EYXRhLmdldChcIm1hcmtldGluZ1wiKSA9PT0gXCJ0cnVlXCIsXG5cdFx0fSk7XG5cblx0XHQvLyBVcGRhdGUgcHJlZmVyZW5jZXNcblx0XHRjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0XHQudXBkYXRlKHsgY29tbXVuaWNhdGlvbl9wcmVmZXJlbmNlczogcHJlZmVyZW5jZXMgfSlcblx0XHRcdC5lcShcImlkXCIsIGN1c3RvbWVySWQpO1xuXG5cdFx0aWYgKHVwZGF0ZUVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdEVSUk9SX01FU1NBR0VTLm9wZXJhdGlvbkZhaWxlZChcInVwZGF0ZSBjb21tdW5pY2F0aW9uIHByZWZlcmVuY2VzXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV2YWxpZGF0ZVBhdGgoYC9kYXNoYm9hcmQvY3VzdG9tZXJzLyR7Y3VzdG9tZXJJZH1gKTtcblx0fSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENVU1RPTUVSIFBPUlRBTFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEludml0ZSBjdXN0b21lciB0byBwb3J0YWxcbiAqIFNlbmRzIGFuIGVtYWlsIHdpdGggYSBzZWN1cmUgdG9rZW4tYmFzZWQgaW52aXRhdGlvbiBsaW5rLlxuICovXG5hc3luYyBmdW5jdGlvbiBpbnZpdGVUb1BvcnRhbChcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dm9pZD4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB0ZWFtTWVtYmVyID0gYXdhaXQgcmVxdWlyZUN1c3RvbWVyQ29tcGFueU1lbWJlcnNoaXAoXG5cdFx0XHRzdXBhYmFzZSxcblx0XHRcdHVzZXIuaWQsXG5cdFx0KTtcblxuXHRcdC8vIFZlcmlmeSBjdXN0b21lciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogY3VzdG9tZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBjb21wYW55X2lkLCBlbWFpbCwgZGlzcGxheV9uYW1lLCBwb3J0YWxfZW5hYmxlZFwiKVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGFzc2VydEV4aXN0cyhjdXN0b21lciwgXCJDdXN0b21lclwiKTtcblxuXHRcdGlmIChjdXN0b21lci5jb21wYW55X2lkICE9PSB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJDdXN0b21lciBub3QgZm91bmRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEhUVFBfU1RBVFVTX0ZPUkJJRERFTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKGN1c3RvbWVyLnBvcnRhbF9lbmFibGVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiQ3VzdG9tZXIgaXMgYWxyZWFkeSBpbnZpdGVkIHRvIHBvcnRhbFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5CVVNJTkVTU19SVUxFX1ZJT0xBVElPTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgc2VjdXJlIHBvcnRhbCBpbnZpdGF0aW9uIHRva2VuXG5cdFx0Y29uc3QgaW52aXRlVG9rZW4gPSBCdWZmZXIuZnJvbShcblx0XHRcdGAke2N1c3RvbWVySWR9OiR7RGF0ZS5ub3coKX06JHtNYXRoLnJhbmRvbSgpfWAsXG5cdFx0KS50b1N0cmluZyhcImJhc2U2NHVybFwiKTtcblxuXHRcdC8vIFVwZGF0ZSBjdXN0b21lclxuXHRcdGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC51cGRhdGUoe1xuXHRcdFx0XHRwb3J0YWxfZW5hYmxlZDogdHJ1ZSxcblx0XHRcdFx0cG9ydGFsX2ludml0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdH0pXG5cdFx0XHQuZXEoXCJpZFwiLCBjdXN0b21lcklkKTtcblxuXHRcdGlmICh1cGRhdGVFcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5vcGVyYXRpb25GYWlsZWQoXCJpbnZpdGUgY3VzdG9tZXIgdG8gcG9ydGFsXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gU2VuZCBpbnZpdGF0aW9uIGVtYWlsXG5cdFx0Y29uc3Qgc2l0ZVVybCA9IHJlcXVpcmVTaXRlVXJsKCk7XG5cdFx0Y29uc3QgcG9ydGFsVXJsID0gYCR7c2l0ZVVybH0vcG9ydGFsL3NldHVwP3Rva2VuPSR7aW52aXRlVG9rZW59YDtcblxuXHRcdGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgc2VuZEVtYWlsKHtcblx0XHRcdHRvOiBjdXN0b21lci5lbWFpbCxcblx0XHRcdHN1YmplY3Q6IFwiWW91J3ZlIGJlZW4gaW52aXRlZCB0byB5b3VyIEN1c3RvbWVyIFBvcnRhbFwiLFxuXHRcdFx0dGVtcGxhdGU6IFBvcnRhbEludml0YXRpb25FbWFpbCh7XG5cdFx0XHRcdGN1c3RvbWVyTmFtZTogY3VzdG9tZXIuZGlzcGxheV9uYW1lLFxuXHRcdFx0XHRwb3J0YWxVcmwsXG5cdFx0XHRcdGV4cGlyZXNJbkhvdXJzOiAxNjgsIC8vIDcgZGF5c1xuXHRcdFx0XHRzdXBwb3J0RW1haWw6IHByb2Nlc3MuZW52LlJFU0VORF9GUk9NX0VNQUlMIHx8IFwic3VwcG9ydEB0aG9yYmlzLmNvbVwiLFxuXHRcdFx0XHRzdXBwb3J0UGhvbmU6IFwiKDU1NSkgMTIzLTQ1NjdcIixcblx0XHRcdH0pLFxuXHRcdFx0dGVtcGxhdGVUeXBlOiBFbWFpbFRlbXBsYXRlLlBPUlRBTF9JTlZJVEFUSU9OLFxuXHRcdH0pO1xuXG5cdFx0aWYgKCFlbWFpbFJlc3VsdC5zdWNjZXNzKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0cmV2YWxpZGF0ZVBhdGgoXCIvZGFzaGJvYXJkL2N1c3RvbWVyc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9jdXN0b21lcnMvJHtjdXN0b21lcklkfWApO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBSZXZva2UgcG9ydGFsIGFjY2Vzc1xuICovXG5hc3luYyBmdW5jdGlvbiByZXZva2VQb3J0YWxBY2Nlc3MoXG5cdGN1c3RvbWVySWQ6IHN0cmluZyxcbik6IFByb21pc2U8QWN0aW9uUmVzdWx0PHZvaWQ+PiB7XG5cdHJldHVybiB3aXRoRXJyb3JIYW5kbGluZyhhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfQ09OTkVDVElPTl9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qge1xuXHRcdFx0ZGF0YTogeyB1c2VyIH0sXG5cdFx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGFzc2VydEF1dGhlbnRpY2F0ZWQodXNlcj8uaWQpO1xuXG5cdFx0Y29uc3QgdGVhbU1lbWJlciA9IGF3YWl0IHJlcXVpcmVDdXN0b21lckNvbXBhbnlNZW1iZXJzaGlwKFxuXHRcdFx0c3VwYWJhc2UsXG5cdFx0XHR1c2VyLmlkLFxuXHRcdCk7XG5cblx0XHQvLyBWZXJpZnkgY3VzdG9tZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGN1c3RvbWVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGFzc2VydEV4aXN0cyhjdXN0b21lciwgXCJDdXN0b21lclwiKTtcblxuXHRcdGlmIChjdXN0b21lci5jb21wYW55X2lkICE9PSB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJDdXN0b21lciBub3QgZm91bmRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEhUVFBfU1RBVFVTX0ZPUkJJRERFTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV2b2tlIGFjY2Vzc1xuXHRcdGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC51cGRhdGUoeyBwb3J0YWxfZW5hYmxlZDogZmFsc2UgfSlcblx0XHRcdC5lcShcImlkXCIsIGN1c3RvbWVySWQpO1xuXG5cdFx0aWYgKHVwZGF0ZUVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdEVSUk9SX01FU1NBR0VTLm9wZXJhdGlvbkZhaWxlZChcInJldm9rZSBwb3J0YWwgYWNjZXNzXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV2YWxpZGF0ZVBhdGgoXCIvZGFzaGJvYXJkL2N1c3RvbWVyc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9jdXN0b21lcnMvJHtjdXN0b21lcklkfWApO1xuXHR9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0VBUkNIICYgUkVQT1JUSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGN1c3RvbWVyIGJ5IHBob25lIG51bWJlclxuICogVXNlZCBmb3IgaW5jb21pbmcgY2FsbCBsb29rdXBzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXN0b21lckJ5UGhvbmUoXG5cdHBob25lTnVtYmVyOiBzdHJpbmcsXG5cdGNvbXBhbnlJZDogc3RyaW5nLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dW5rbm93bj4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBOb3JtYWxpemUgcGhvbmUgbnVtYmVyIChyZW1vdmUgZm9ybWF0dGluZylcblx0XHRjb25zdCBub3JtYWxpemVkUGhvbmUgPSBwaG9uZU51bWJlci5yZXBsYWNlKC9cXEQvZywgXCJcIik7XG5cblx0XHQvLyBTZWFyY2ggYnkgcHJpbWFyeSBwaG9uZSBvciBzZWNvbmRhcnkgcGhvbmVcblx0XHRjb25zdCB7IGRhdGE6IGN1c3RvbWVyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFxuXHRcdFx0XHRgXG4gICAgICAgICosXG4gICAgICAgIHByb3BlcnRpZXM6cHJvcGVydGllcygqKVxuICAgICAgYCxcblx0XHRcdClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuXHRcdFx0Lm9yKFxuXHRcdFx0XHRgcGhvbmUuZXEuJHtwaG9uZU51bWJlcn0scGhvbmUuZXEuJHtub3JtYWxpemVkUGhvbmV9LHNlY29uZGFyeV9waG9uZS5lcS4ke3Bob25lTnVtYmVyfSxzZWNvbmRhcnlfcGhvbmUuZXEuJHtub3JtYWxpemVkUGhvbmV9YCxcblx0XHRcdClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSBcIlBHUlNUMTE2XCIpIHtcblx0XHRcdC8vIFBHUlNUMTE2ID0gbm8gcm93cyBmb3VuZFxuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRgRmFpbGVkIHRvIGZpbmQgY3VzdG9tZXI6ICR7ZXJyb3IubWVzc2FnZX1gLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGN1c3RvbWVyIHx8IG51bGw7XG5cdH0pO1xufVxuXG4vKipcbiAqIFNlYXJjaCBjdXN0b21lcnMgYnkgbmFtZSwgZW1haWwsIHBob25lLCBvciBjb21wYW55XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hDdXN0b21lcnMoXG5cdHNlYXJjaFRlcm06IHN0cmluZyxcblx0b3B0aW9ucz86IHsgbGltaXQ/OiBudW1iZXI7IG9mZnNldD86IG51bWJlciB9LFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dW5rbm93bltdPj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdC8vIFVzZSB0aGUgYWN0aXZlIGNvbXBhbnkgSUQgaGVscGVyIChzYW1lIGFzIGdldEFsbEN1c3RvbWVycylcblx0XHRjb25zdCBhY3RpdmVDb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcblx0XHRpZiAoIWFjdGl2ZUNvbXBhbnlJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIk5vIGFjdGl2ZSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHRIVFRQX1NUQVRVU19GT1JCSURERU4sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFZlcmlmeSB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIGFjdGl2ZSBjb21wYW55XG5cdFx0Y29uc3QgeyBkYXRhOiB0ZWFtTWVtYmVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjb21wYW55X21lbWJlcnNoaXBzXCIpXG5cdFx0XHQuc2VsZWN0KFwiY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwidXNlcl9pZFwiLCB1c2VyLmlkKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBhY3RpdmVDb21wYW55SWQpXG5cdFx0XHQuZXEoXCJzdGF0dXNcIiwgXCJhY3RpdmVcIilcblx0XHRcdC5tYXliZVNpbmdsZSgpO1xuXG5cdFx0aWYgKCF0ZWFtTWVtYmVyPy5jb21wYW55X2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiWW91IGRvbid0IGhhdmUgYWNjZXNzIHRvIHRoaXMgY29tcGFueVwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0SFRUUF9TVEFUVVNfRk9SQklEREVOLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZnVsbC10ZXh0IHNlYXJjaCB3aXRoIHJhbmtpbmcgZm9yIGJlc3QgbWF0Y2hlc1xuXHRcdC8vIFNlYXJjaGVzIGFjcm9zczogZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBkaXNwbGF5X25hbWUsIGVtYWlsLCBwaG9uZSxcblx0XHQvLyBzZWNvbmRhcnlfcGhvbmUsIGNvbXBhbnlfbmFtZSwgYWRkcmVzcywgY2l0eSwgc3RhdGVcblx0XHQvLyBSZXR1cm5zIHJlc3VsdHMgb3JkZXJlZCBieSByZWxldmFuY2UgKHdlaWdodGVkOiBuYW1lID4gY29udGFjdCA+IGFkZHJlc3MpXG5cdFx0Y29uc3QgeyBzZWFyY2hDdXN0b21lcnNGdWxsVGV4dCB9ID0gYXdhaXQgaW1wb3J0KFxuXHRcdFx0XCJAL2xpYi9zZWFyY2gvZnVsbC10ZXh0LXNlYXJjaFwiXG5cdFx0KTtcblxuXHRcdGNvbnN0IGN1c3RvbWVycyA9IGF3YWl0IHNlYXJjaEN1c3RvbWVyc0Z1bGxUZXh0KFxuXHRcdFx0c3VwYWJhc2UsXG5cdFx0XHRhY3RpdmVDb21wYW55SWQsXG5cdFx0XHRzZWFyY2hUZXJtLFxuXHRcdFx0e1xuXHRcdFx0XHRsaW1pdDogb3B0aW9ucz8ubGltaXQgfHwgREVGQVVMVF9TRUFSQ0hfTElNSVQsXG5cdFx0XHRcdG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0IHx8IDAsXG5cdFx0XHR9LFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gY3VzdG9tZXJzO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBHZXQgdG9wIGN1c3RvbWVycyBieSByZXZlbnVlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcEN1c3RvbWVycyhcblx0bGltaXQgPSAxMCxcbik6IFByb21pc2U8QWN0aW9uUmVzdWx0PHVua25vd25bXT4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB7IGRhdGE6IHRlYW1NZW1iZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImNvbXBhbnlfbWVtYmVyc2hpcHNcIilcblx0XHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoIXRlYW1NZW1iZXI/LmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJZb3UgbXVzdCBiZSBwYXJ0IG9mIGEgY29tcGFueVwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0SFRUUF9TVEFUVVNfRk9SQklEREVOLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGE6IGN1c3RvbWVycywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcIipcIilcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgdGVhbU1lbWJlci5jb21wYW55X2lkKVxuXHRcdFx0LmVxKFwic3RhdHVzXCIsIFwiYWN0aXZlXCIpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQub3JkZXIoXCJ0b3RhbF9yZXZlbnVlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdFx0LmxpbWl0KGxpbWl0KTtcblxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5vcGVyYXRpb25GYWlsZWQoXCJmZXRjaCB0b3AgY3VzdG9tZXJzXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9RVUVSWV9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGN1c3RvbWVycyB8fCBbXTtcblx0fSk7XG59XG5cbi8qKlxuICogR2V0IGN1c3RvbWVycyB3aXRoIG91dHN0YW5kaW5nIGJhbGFuY2VcbiAqL1xudHlwZSBDdXN0b21lcldpdGhCYWxhbmNlID0ge1xuXHRpZDogc3RyaW5nO1xuXHRkaXNwbGF5X25hbWU6IHN0cmluZztcblx0YmFsYW5jZTogbnVtYmVyO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzV2l0aEJhbGFuY2UoKTogUHJvbWlzZTxcblx0QWN0aW9uUmVzdWx0PEN1c3RvbWVyV2l0aEJhbGFuY2VbXT5cbj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IHsgZGF0YTogdGVhbU1lbWJlciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY29tcGFueV9tZW1iZXJzaGlwc1wiKVxuXHRcdFx0LnNlbGVjdChcImNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBtdXN0IGJlIHBhcnQgb2YgYSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHRIVFRQX1NUQVRVU19GT1JCSURERU4sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogY3VzdG9tZXJzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY3VzdG9tZXJzXCIpXG5cdFx0XHQuc2VsZWN0KFwiKlwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuZ3QoXCJvdXRzdGFuZGluZ19iYWxhbmNlXCIsIDApXG5cdFx0XHQub3JkZXIoXCJvdXRzdGFuZGluZ19iYWxhbmNlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdFx0LmxpbWl0KDEwMCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0RVJST1JfTUVTU0FHRVMub3BlcmF0aW9uRmFpbGVkKFwiZmV0Y2ggY3VzdG9tZXJzIHdpdGggYmFsYW5jZVwiKSxcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfUVVFUllfRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjdXN0b21lcnMgfHwgW107XG5cdH0pO1xufVxuXG50eXBlIEN1c3RvbWVyUmVjb3JkID0ge1xuXHRpZDogc3RyaW5nO1xuXHRjb21wYW55X2lkOiBzdHJpbmc7XG5cdHR5cGU6IHN0cmluZztcblx0Zmlyc3RfbmFtZTogc3RyaW5nO1xuXHRsYXN0X25hbWU6IHN0cmluZztcblx0ZGlzcGxheV9uYW1lOiBzdHJpbmc7XG5cdGNvbXBhbnlfbmFtZT86IHN0cmluZyB8IG51bGw7XG5cdGVtYWlsOiBzdHJpbmc7XG5cdHBob25lOiBzdHJpbmc7XG5cdHNlY29uZGFyeV9waG9uZT86IHN0cmluZztcblx0YWRkcmVzcz86IHN0cmluZztcblx0YWRkcmVzczI/OiBzdHJpbmc7XG5cdGNpdHk/OiBzdHJpbmc7XG5cdHN0YXRlPzogc3RyaW5nO1xuXHR6aXBfY29kZT86IHN0cmluZztcblx0c3RhdHVzOiBzdHJpbmc7XG5cdHRvdGFsX3JldmVudWU/OiBudW1iZXI7XG5cdHRvdGFsX2pvYnM/OiBudW1iZXI7XG5cdHRvdGFsX2ludm9pY2VzPzogbnVtYmVyO1xuXHRvdXRzdGFuZGluZ19iYWxhbmNlPzogbnVtYmVyO1xuXHRsYXN0X2pvYl9kYXRlPzogc3RyaW5nO1xuXHRuZXh0X3NjaGVkdWxlZF9qb2I/OiBzdHJpbmc7XG5cdGNyZWF0ZWRfYXQ6IHN0cmluZztcblx0dXBkYXRlZF9hdDogc3RyaW5nO1xuXHRhcmNoaXZlZF9hdD86IHN0cmluZyB8IG51bGw7XG5cdGRlbGV0ZWRfYXQ/OiBzdHJpbmcgfCBudWxsO1xufTtcblxuLyoqXG4gKiBHZXQgY3VzdG9tZXJzIGZvciBwaG9uZSBkaWFsZXIgKGxpZ2h0d2VpZ2h0LCBubyBlbnJpY2htZW50KVxuICpcbiAqIFBFUkZPUk1BTkNFOiBSZXR1cm5zIG9ubHkgYmFzaWMgY29udGFjdCBpbmZvIG5lZWRlZCBmb3IgZGlhbGVyLlxuICogVXNlIHRoaXMgaW5zdGVhZCBvZiBnZXRBbGxDdXN0b21lcnMoKSBpbiBBcHBIZWFkZXIgdG8gYXZvaWQgTisxIHF1ZXJpZXMuXG4gKlxuICogRXhwZWN0ZWQ6IDUwLTEwMG1zIChzaW5nbGUgcXVlcnkpXG4gKiB2cyBnZXRBbGxDdXN0b21lcnMoKTogMTIwMC0yMDAwbXMgKDE1MSBxdWVyaWVzIHdpdGggZW5yaWNobWVudClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVyc0ZvckRpYWxlcigpOiBQcm9taXNlPFxuXHRBY3Rpb25SZXN1bHQ8XG5cdFx0QXJyYXk8e1xuXHRcdFx0aWQ6IHN0cmluZztcblx0XHRcdGZpcnN0X25hbWU6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRsYXN0X25hbWU6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRkaXNwbGF5X25hbWU6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRlbWFpbDogc3RyaW5nIHwgbnVsbDtcblx0XHRcdHBob25lOiBzdHJpbmcgfCBudWxsO1xuXHRcdFx0c2Vjb25kYXJ5X3Bob25lPzogc3RyaW5nIHwgbnVsbDtcblx0XHRcdGNvbXBhbnlfbmFtZTogc3RyaW5nIHwgbnVsbDtcblx0XHRcdGFkZHJlc3M6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRhZGRyZXNzMjogc3RyaW5nIHwgbnVsbDtcblx0XHRcdGNpdHk6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRzdGF0ZTogc3RyaW5nIHwgbnVsbDtcblx0XHRcdHppcF9jb2RlOiBzdHJpbmcgfCBudWxsO1xuXHRcdH0+XG5cdD5cbj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IGFjdGl2ZUNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXHRcdGlmICghYWN0aXZlQ29tcGFueUlkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiTm8gYWN0aXZlIGNvbXBhbnlcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdDQwMyxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gU2luZ2xlIGxpZ2h0d2VpZ2h0IHF1ZXJ5IC0gbm8gam9pbnMsIG5vIGVucmljaG1lbnRcblx0XHRjb25zdCB7IGRhdGE6IGN1c3RvbWVycywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcblx0XHRcdFx0XCJpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBkaXNwbGF5X25hbWUsIGVtYWlsLCBwaG9uZSwgc2Vjb25kYXJ5X3Bob25lLCBjb21wYW55X25hbWUsIGFkZHJlc3MsIGFkZHJlc3MyLCBjaXR5LCBzdGF0ZSwgemlwX2NvZGVcIixcblx0XHRcdClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgYWN0aXZlQ29tcGFueUlkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0Lm9yZGVyKFwiZGlzcGxheV9uYW1lXCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdEVSUk9SX01FU1NBR0VTLm9wZXJhdGlvbkZhaWxlZChcImZldGNoIGN1c3RvbWVyc1wiKSxcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfUVVFUllfRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjdXN0b21lcnMgfHwgW107XG5cdH0pO1xufVxuXG4vKipcbiAqIEdldCBhbGwgY3VzdG9tZXJzIGZvciB0aGUgY3VycmVudCBjb21wYW55IChXSVRIIEVOUklDSE1FTlQpXG4gKlxuICogV0FSTklORzogVGhpcyBmdW5jdGlvbiBkb2VzIDE1MSBkYXRhYmFzZSBxdWVyaWVzIGZvciA1MCBjdXN0b21lcnMgKE4rMSBwYXR0ZXJuKS5cbiAqIEV4cGVjdGVkIHRpbWU6IDEyMDAtMjAwMG1zXG4gKlxuICogRE8gTk9UIHVzZSBpbiBBcHBIZWFkZXIgb3Igb3RoZXIgZnJlcXVlbnRseSByZW5kZXJlZCBjb21wb25lbnRzLlxuICogVXNlIGdldEN1c3RvbWVyc0ZvckRpYWxlcigpIGluc3RlYWQgZm9yIGxpZ2h0d2VpZ2h0IGNvbnRhY3QgaW5mby5cbiAqXG4gKiBPbmx5IHVzZSB0aGlzIG9uIGRlZGljYXRlZCBjdXN0b21lciBsaXN0IHBhZ2VzIHdoZXJlIHRoZSBlbnJpY2hlZCBkYXRhIGlzIG5lZWRlZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsQ3VzdG9tZXJzKCk6IFByb21pc2U8XG5cdEFjdGlvblJlc3VsdDxDdXN0b21lclJlY29yZFtdPlxuPiB7XG5cdHJldHVybiB3aXRoRXJyb3JIYW5kbGluZyhhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfQ09OTkVDVElPTl9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qge1xuXHRcdFx0ZGF0YTogeyB1c2VyIH0sXG5cdFx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGFzc2VydEF1dGhlbnRpY2F0ZWQodXNlcj8uaWQpO1xuXG5cdFx0Ly8gR2V0IGFjdGl2ZSBjb21wYW55IElEIChmcm9tIGNvb2tpZSBvciBmaXJzdCBhdmFpbGFibGUpXG5cdFx0Y29uc3QgYWN0aXZlQ29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG5cblx0XHRjb25zdCBGT1JCSURERU5fU1RBVFVTX0NPREUgPSA0MDM7XG5cdFx0aWYgKCFhY3RpdmVDb21wYW55SWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJZb3UgbXVzdCBiZSBwYXJ0IG9mIGEgY29tcGFueVwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0Rk9SQklEREVOX1NUQVRVU19DT0RFLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBWZXJpZnkgdXNlciBoYXMgYWNjZXNzIHRvIHRoZSBhY3RpdmUgY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogdGVhbU1lbWJlciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY29tcGFueV9tZW1iZXJzaGlwc1wiKVxuXHRcdFx0LnNlbGVjdChcImNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcblx0XHRcdC5lcShcImNvbXBhbnlfaWRcIiwgYWN0aXZlQ29tcGFueUlkKVxuXHRcdFx0LmVxKFwic3RhdHVzXCIsIFwiYWN0aXZlXCIpXG5cdFx0XHQubWF5YmVTaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGlzIGNvbXBhbnlcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEZPUkJJRERFTl9TVEFUVVNfQ09ERSxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgeyBkYXRhOiBjdXN0b21lcnMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC5zZWxlY3QoXCIqXCIpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGFjdGl2ZUNvbXBhbnlJZClcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5vcmRlcihcImRpc3BsYXlfbmFtZVwiLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcblxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5vcGVyYXRpb25GYWlsZWQoXCJmZXRjaCBjdXN0b21lcnNcIiksXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBQRVJGT1JNQU5DRSBPUFRJTUlaRUQ6IFVzZSBSUEMgZnVuY3Rpb24gaW5zdGVhZCBvZiBOKzEgcXVlcmllc1xuXHRcdC8vIEJFRk9SRTogMTUxIHF1ZXJpZXMgZm9yIDUwIGN1c3RvbWVycyAoMSBiYXNlICsgNTAgw5cgMyBxdWVyaWVzIGVhY2gpXG5cdFx0Ly8gQUZURVI6IDEgUlBDIGNhbGwgd2l0aCBlZmZpY2llbnQgTEFURVJBTCBqb2luc1xuXHRcdC8vIFBlcmZvcm1hbmNlIGdhaW46IDUtMTAgc2Vjb25kcyBmYXN0ZXJcblxuXHRcdC8vIE5vdGU6IGN1c3RvbWVycyB2YXJpYWJsZSBjb250YWlucyB0aGUgYmFzZSBjdXN0b21lciBkYXRhIGZyb20gYWJvdmUgcXVlcnlcblx0XHQvLyBXZSByZXBsYWNlIHRoZSBlbnJpY2htZW50IGxvZ2ljIHdpdGggYSBzaW5nbGUgUlBDIGNhbGxcblx0XHRjb25zdCB7IGRhdGE6IGVucmljaGVkRGF0YSwgZXJyb3I6IGVucmljaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoXG5cdFx0XHRcImdldF9lbnJpY2hlZF9jdXN0b21lcnNfcnBjXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHBfY29tcGFueV9pZDogYWN0aXZlQ29tcGFueUlkLFxuXHRcdFx0fSxcblx0XHQpO1xuXG5cdFx0aWYgKGVucmljaEVycm9yKSB7XG5cdFx0XHQvLyBGYWxsYmFjayB0byBiYXNlIGN1c3RvbWVycyBpZiBlbnJpY2htZW50IGZhaWxzXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGVucmljaCBjdXN0b21lcnM6XCIsIGVucmljaEVycm9yKTtcblx0XHRcdHJldHVybiBjdXN0b21lcnMgYXMgQ3VzdG9tZXJSZWNvcmRbXTtcblx0XHR9XG5cblx0XHQvLyBNZXJnZSBlbnJpY2hlZCBkYXRhIHdpdGggYmFzZSBjdXN0b21lciBkYXRhXG5cdFx0Y29uc3QgZW5yaWNoZWRDdXN0b21lcnMgPSAoZW5yaWNoZWREYXRhIHx8IFtdKS5tYXAoKGN1c3RvbWVyOiBhbnkpID0+ICh7XG5cdFx0XHQuLi5jdXN0b21lcixcblx0XHRcdC8vIE92ZXJyaWRlIHRvdGFsX2pvYnMgYW5kIHRvdGFsX3JldmVudWUgd2l0aCBmcmVzaCBhZ2dyZWdhdGVkIHZhbHVlc1xuXHRcdFx0dG90YWxfam9iczogY3VzdG9tZXIuZW5yaWNoZWRfdG90YWxfam9icyB8fCBjdXN0b21lci50b3RhbF9qb2JzIHx8IDAsXG5cdFx0XHR0b3RhbF9yZXZlbnVlOlxuXHRcdFx0XHRjdXN0b21lci5lbnJpY2hlZF90b3RhbF9yZXZlbnVlIHx8IGN1c3RvbWVyLnRvdGFsX3JldmVudWUgfHwgMCxcblx0XHR9KSk7XG5cblx0XHRyZXR1cm4gZW5yaWNoZWRDdXN0b21lcnMgYXMgQ3VzdG9tZXJSZWNvcmRbXTtcblx0fSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGN1c3RvbWVyIHBhZ2UgY29udGVudCAoTm92ZWwvVGlwdGFwIEpTT04pXG4gKlxuICogU2F2ZXMgdGhlIGN1c3RvbWVyJ3MgZWRpdGFibGUgcGFnZSBsYXlvdXQgYW5kIGNvbnRlbnRcbiAqIFVzZWQgYnkgdGhlIE5vdmVsIGVkaXRvciBmb3IgYXV0by1zYXZlIGZ1bmN0aW9uYWxpdHlcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ3VzdG9tZXJQYWdlQ29udGVudChcblx0Y3VzdG9tZXJJZDogc3RyaW5nLFxuXHRwYWdlQ29udGVudDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4pOiBQcm9taXNlPEFjdGlvblJlc3VsdDx2b2lkPj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IHsgZGF0YTogdGVhbU1lbWJlciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY29tcGFueV9tZW1iZXJzaGlwc1wiKVxuXHRcdFx0LnNlbGVjdChcImNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBtdXN0IGJlIHBhcnQgb2YgYSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHRIVFRQX1NUQVRVU19GT1JCSURERU4sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFZlcmlmeSBjdXN0b21lciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogY3VzdG9tZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImN1c3RvbWVyc1wiKVxuXHRcdFx0LnNlbGVjdChcImlkLCBjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJpZFwiLCBjdXN0b21lcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKGN1c3RvbWVyLCBcIkN1c3RvbWVyXCIpO1xuXG5cdFx0aWYgKGN1c3RvbWVyLmNvbXBhbnlfaWQgIT09IHRlYW1NZW1iZXIuY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5mb3JiaWRkZW4oXCJjdXN0b21lclwiKSxcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdEhUVFBfU1RBVFVTX0ZPUkJJRERFTixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHBhZ2UgY29udGVudFxuXHRcdGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjdXN0b21lcnNcIilcblx0XHRcdC51cGRhdGUoe1xuXHRcdFx0XHRwYWdlX2NvbnRlbnQ6IHBhZ2VDb250ZW50LFxuXHRcdFx0XHRjb250ZW50X3VwZGF0ZWRfYnk6IHVzZXIuaWQsXG5cdFx0XHR9KVxuXHRcdFx0LmVxKFwiaWRcIiwgY3VzdG9tZXJJZCk7XG5cblx0XHRpZiAodXBkYXRlRXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0RVJST1JfTUVTU0FHRVMub3BlcmF0aW9uRmFpbGVkKFwidXBkYXRlIGN1c3RvbWVyIHBhZ2VcIiksXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9jdXN0b21lcnMvJHtjdXN0b21lcklkfWApO1xuXHR9KTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMFNBd29Dc0IifQ==
}),
"[project]/apps/web/src/actions/data:031230 [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"400caff3b7aa2d01f050d0c957d62d3a92e63f1504":"searchVendors"},"apps/web/src/actions/vendors.ts",""] */ __turbopack_context__.s([
    "searchVendors",
    ()=>searchVendors
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var searchVendors = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("400caff3b7aa2d01f050d0c957d62d3a92e63f1504", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "searchVendors"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vdmVuZG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFZlbmRvcnMgU2VydmVyIEFjdGlvbnNcbiAqXG4gKiBIYW5kbGVzIHZlbmRvciBtYW5hZ2VtZW50IHdpdGggQ1JVRCBvcGVyYXRpb25zLCBzZWFyY2gsIGFuZCB2ZW5kb3Igc2VsZWN0aW9uLlxuICovXG5cblwidXNlIHNlcnZlclwiO1xuXG5pbXBvcnQge1xuICAgIEFjdGlvbkVycm9yLFxuICAgIEVSUk9SX0NPREVTLFxuICAgIEVSUk9SX01FU1NBR0VTLFxufSBmcm9tIFwiQC9saWIvZXJyb3JzL2FjdGlvbi1lcnJvclwiO1xuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tIFwibmV4dC9jYWNoZVwiO1xuXG4vLyBSZWdleCBjb25zdGFudHNcbmNvbnN0IFZFTkRPUl9OVU1CRVJfUkVHRVggPSAvVk5ELVxcZHs0fS0oXFxkKykvO1xuXG5pbXBvcnQge1xuICAgIHR5cGUgQWN0aW9uUmVzdWx0LFxuICAgIGFzc2VydEF1dGhlbnRpY2F0ZWQsXG4gICAgYXNzZXJ0RXhpc3RzLFxuICAgIHdpdGhFcnJvckhhbmRsaW5nLFxufSBmcm9tIFwiQC9saWIvZXJyb3JzL3dpdGgtZXJyb3ItaGFuZGxpbmdcIjtcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIjtcbmltcG9ydCB7XG4gICAgdHlwZSBWZW5kb3JVcGRhdGUsXG4gICAgdmVuZG9ySW5zZXJ0U2NoZW1hLFxuICAgIHZlbmRvclVwZGF0ZVNjaGVtYSxcbn0gZnJvbSBcIkAvbGliL3ZhbGlkYXRpb25zL2RhdGFiYXNlLXNjaGVtYXNcIjtcblxuLyoqXG4gKiBHZW5lcmF0ZSB1bmlxdWUgdmVuZG9yIG51bWJlclxuICovXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVZlbmRvck51bWJlcihcblx0c3VwYWJhc2U6IGFueSxcblx0Y29tcGFueUlkOiBzdHJpbmcsXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuXHRjb25zdCB7IGRhdGE6IGxhdGVzdFZlbmRvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHQuc2VsZWN0KFwidmVuZG9yX251bWJlclwiKVxuXHRcdC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuXHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHQub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXHRcdC5saW1pdCgxKVxuXHRcdC5zaW5nbGUoKTtcblxuXHRpZiAoIWxhdGVzdFZlbmRvcikge1xuXHRcdHJldHVybiBgVk5ELSR7bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfS0wMDFgO1xuXHR9XG5cblx0Y29uc3QgbWF0Y2ggPSBsYXRlc3RWZW5kb3IudmVuZG9yX251bWJlci5tYXRjaChWRU5ET1JfTlVNQkVSX1JFR0VYKTtcblx0aWYgKG1hdGNoKSB7XG5cdFx0Y29uc3QgbmV4dE51bWJlciA9IE51bWJlci5wYXJzZUludChtYXRjaFsxXSwgMTApICsgMTtcblx0XHRyZXR1cm4gYFZORC0ke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0tJHtuZXh0TnVtYmVyLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpfWA7XG5cdH1cblxuXHRyZXR1cm4gYFZORC0ke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0tJHtEYXRlLm5vdygpLnRvU3RyaW5nKCkuc2xpY2UoLTMpfWA7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHZlbmRvclxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVWZW5kb3IoXG5cdGZvcm1EYXRhOiBGb3JtRGF0YSxcbik6IFByb21pc2U8QWN0aW9uUmVzdWx0PHN0cmluZz4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB7IGRhdGE6IHRlYW1NZW1iZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImNvbXBhbnlfbWVtYmVyc2hpcHNcIilcblx0XHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXG5cdFx0XHQuZXEoXCJzdGF0dXNcIiwgXCJhY3RpdmVcIilcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBtdXN0IGJlIHBhcnQgb2YgYSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIHZlbmRvciBudW1iZXIgaWYgbm90IHByb3ZpZGVkXG5cdFx0Y29uc3QgdmVuZG9yTnVtYmVyID1cblx0XHRcdGZvcm1EYXRhLmdldChcInZlbmRvcl9udW1iZXJcIik/LnRvU3RyaW5nKCkgfHxcblx0XHRcdChhd2FpdCBnZW5lcmF0ZVZlbmRvck51bWJlcihzdXBhYmFzZSwgdGVhbU1lbWJlci5jb21wYW55X2lkKSk7XG5cblx0XHQvLyBWYWxpZGF0ZSBpbnB1dFxuXHRcdGNvbnN0IGRhdGEgPSB2ZW5kb3JJbnNlcnRTY2hlbWEucGFyc2Uoe1xuXHRcdFx0Y29tcGFueV9pZDogdGVhbU1lbWJlci5jb21wYW55X2lkLFxuXHRcdFx0bmFtZTogZm9ybURhdGEuZ2V0KFwibmFtZVwiKSxcblx0XHRcdGRpc3BsYXlfbmFtZTogZm9ybURhdGEuZ2V0KFwiZGlzcGxheV9uYW1lXCIpIHx8IGZvcm1EYXRhLmdldChcIm5hbWVcIiksXG5cdFx0XHR2ZW5kb3JfbnVtYmVyOiB2ZW5kb3JOdW1iZXIsXG5cdFx0XHRlbWFpbDogZm9ybURhdGEuZ2V0KFwiZW1haWxcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0cGhvbmU6IGZvcm1EYXRhLmdldChcInBob25lXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdHNlY29uZGFyeV9waG9uZTogZm9ybURhdGEuZ2V0KFwic2Vjb25kYXJ5X3Bob25lXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdHdlYnNpdGU6IGZvcm1EYXRhLmdldChcIndlYnNpdGVcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0YWRkcmVzczogZm9ybURhdGEuZ2V0KFwiYWRkcmVzc1wiKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRhZGRyZXNzMjogZm9ybURhdGEuZ2V0KFwiYWRkcmVzczJcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0Y2l0eTogZm9ybURhdGEuZ2V0KFwiY2l0eVwiKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRzdGF0ZTogZm9ybURhdGEuZ2V0KFwic3RhdGVcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0emlwX2NvZGU6IGZvcm1EYXRhLmdldChcInppcF9jb2RlXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdGNvdW50cnk6IGZvcm1EYXRhLmdldChcImNvdW50cnlcIikgfHwgXCJVU0FcIixcblx0XHRcdHRheF9pZDogZm9ybURhdGEuZ2V0KFwidGF4X2lkXCIpIHx8IHVuZGVmaW5lZCxcblx0XHRcdHBheW1lbnRfdGVybXM6IGZvcm1EYXRhLmdldChcInBheW1lbnRfdGVybXNcIikgfHwgXCJuZXRfMzBcIixcblx0XHRcdGNyZWRpdF9saW1pdDogZm9ybURhdGEuZ2V0KFwiY3JlZGl0X2xpbWl0XCIpXG5cdFx0XHRcdD8gTnVtYmVyLnBhcnNlSW50KGZvcm1EYXRhLmdldChcImNyZWRpdF9saW1pdFwiKSBhcyBzdHJpbmcsIDEwKSAqIDEwMFxuXHRcdFx0XHQ6IDAsXG5cdFx0XHRwcmVmZXJyZWRfcGF5bWVudF9tZXRob2Q6XG5cdFx0XHRcdGZvcm1EYXRhLmdldChcInByZWZlcnJlZF9wYXltZW50X21ldGhvZFwiKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRjYXRlZ29yeTogZm9ybURhdGEuZ2V0KFwiY2F0ZWdvcnlcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0dGFnczogZm9ybURhdGEuZ2V0KFwidGFnc1wiKVxuXHRcdFx0XHQ/IEpTT04ucGFyc2UoZm9ybURhdGEuZ2V0KFwidGFnc1wiKSBhcyBzdHJpbmcpXG5cdFx0XHRcdDogdW5kZWZpbmVkLFxuXHRcdFx0c3RhdHVzOiBmb3JtRGF0YS5nZXQoXCJzdGF0dXNcIikgfHwgXCJhY3RpdmVcIixcblx0XHRcdG5vdGVzOiBmb3JtRGF0YS5nZXQoXCJub3Rlc1wiKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRpbnRlcm5hbF9ub3RlczogZm9ybURhdGEuZ2V0KFwiaW50ZXJuYWxfbm90ZXNcIikgfHwgdW5kZWZpbmVkLFxuXHRcdFx0Y3VzdG9tX2ZpZWxkczogZm9ybURhdGEuZ2V0KFwiY3VzdG9tX2ZpZWxkc1wiKVxuXHRcdFx0XHQ/IEpTT04ucGFyc2UoZm9ybURhdGEuZ2V0KFwiY3VzdG9tX2ZpZWxkc1wiKSBhcyBzdHJpbmcpXG5cdFx0XHRcdDogdW5kZWZpbmVkLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgdmVuZG9yIG51bWJlciBhbHJlYWR5IGV4aXN0c1xuXHRcdGNvbnN0IHsgZGF0YTogZXhpc3RpbmdWZW5kb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZFwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpXG5cdFx0XHQuZXEoXCJ2ZW5kb3JfbnVtYmVyXCIsIGRhdGEudmVuZG9yX251bWJlcilcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChleGlzdGluZ1ZlbmRvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIlZlbmRvciBudW1iZXIgYWxyZWFkeSBleGlzdHNcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuVkFMSURBVElPTl9GQUlMRUQsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIEluc2VydCB2ZW5kb3Jcblx0XHRjb25zdCB7IGRhdGE6IHZlbmRvciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC5pbnNlcnQoe1xuXHRcdFx0XHRjb21wYW55X2lkOiBkYXRhLmNvbXBhbnlfaWQsXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0ZGlzcGxheV9uYW1lOiBkYXRhLmRpc3BsYXlfbmFtZSxcblx0XHRcdFx0dmVuZG9yX251bWJlcjogZGF0YS52ZW5kb3JfbnVtYmVyLFxuXHRcdFx0XHRlbWFpbDogZGF0YS5lbWFpbCxcblx0XHRcdFx0cGhvbmU6IGRhdGEucGhvbmUsXG5cdFx0XHRcdHNlY29uZGFyeV9waG9uZTogZGF0YS5zZWNvbmRhcnlfcGhvbmUsXG5cdFx0XHRcdHdlYnNpdGU6IGRhdGEud2Vic2l0ZSxcblx0XHRcdFx0YWRkcmVzczogZGF0YS5hZGRyZXNzLFxuXHRcdFx0XHRhZGRyZXNzMjogZGF0YS5hZGRyZXNzMixcblx0XHRcdFx0Y2l0eTogZGF0YS5jaXR5LFxuXHRcdFx0XHRzdGF0ZTogZGF0YS5zdGF0ZSxcblx0XHRcdFx0emlwX2NvZGU6IGRhdGEuemlwX2NvZGUsXG5cdFx0XHRcdGNvdW50cnk6IGRhdGEuY291bnRyeSxcblx0XHRcdFx0dGF4X2lkOiBkYXRhLnRheF9pZCxcblx0XHRcdFx0cGF5bWVudF90ZXJtczogZGF0YS5wYXltZW50X3Rlcm1zLFxuXHRcdFx0XHRjcmVkaXRfbGltaXQ6IGRhdGEuY3JlZGl0X2xpbWl0LFxuXHRcdFx0XHRwcmVmZXJyZWRfcGF5bWVudF9tZXRob2Q6IGRhdGEucHJlZmVycmVkX3BheW1lbnRfbWV0aG9kLFxuXHRcdFx0XHRjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcblx0XHRcdFx0dGFnczogZGF0YS50YWdzIHx8IFtdLFxuXHRcdFx0XHRzdGF0dXM6IGRhdGEuc3RhdHVzLFxuXHRcdFx0XHRub3RlczogZGF0YS5ub3Rlcyxcblx0XHRcdFx0aW50ZXJuYWxfbm90ZXM6IGRhdGEuaW50ZXJuYWxfbm90ZXMsXG5cdFx0XHRcdGN1c3RvbV9maWVsZHM6IGRhdGEuY3VzdG9tX2ZpZWxkcyB8fCB7fSxcblx0XHRcdH0pXG5cdFx0XHQuc2VsZWN0KFwiaWRcIilcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkZhaWxlZCB0byBjcmVhdGUgdmVuZG9yXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRhc3NlcnRFeGlzdHModmVuZG9yLCBcIlZlbmRvclwiKTtcblxuXHRcdHJldmFsaWRhdGVQYXRoKFwiL2Rhc2hib2FyZC9pbnZlbnRvcnkvdmVuZG9yc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9pbnZlbnRvcnkvdmVuZG9ycy8ke3ZlbmRvci5pZH1gKTtcblxuXHRcdHJldHVybiB2ZW5kb3IuaWQ7XG5cdH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBhbiBleGlzdGluZyB2ZW5kb3JcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVZlbmRvcihcblx0dmVuZG9ySWQ6IHN0cmluZyxcblx0Zm9ybURhdGE6IEZvcm1EYXRhLFxuKTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8dm9pZD4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB7IGRhdGE6IHRlYW1NZW1iZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImNvbXBhbnlfbWVtYmVyc2hpcHNcIilcblx0XHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXG5cdFx0XHQuZXEoXCJzdGF0dXNcIiwgXCJhY3RpdmVcIilcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBtdXN0IGJlIHBhcnQgb2YgYSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFZlcmlmeSB2ZW5kb3IgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IGV4aXN0aW5nVmVuZG9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJ2ZW5kb3JzXCIpXG5cdFx0XHQuc2VsZWN0KFwiaWQsIGNvbXBhbnlfaWQsIHZlbmRvcl9udW1iZXJcIilcblx0XHRcdC5lcShcImlkXCIsIHZlbmRvcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKGV4aXN0aW5nVmVuZG9yLCBcIlZlbmRvclwiKTtcblxuXHRcdGlmIChleGlzdGluZ1ZlbmRvci5jb21wYW55X2lkICE9PSB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0RVJST1JfTUVTU0FHRVMuZm9yYmlkZGVuKFwidmVuZG9yXCIpLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0NDAzLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBCdWlsZCB1cGRhdGUgb2JqZWN0IGZyb20gZm9ybSBkYXRhXG5cdFx0Y29uc3QgdXBkYXRlRGF0YTogUGFydGlhbDxWZW5kb3JVcGRhdGU+ID0ge307XG5cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwibmFtZVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5uYW1lID0gZm9ybURhdGEuZ2V0KFwibmFtZVwiKSBhcyBzdHJpbmc7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJkaXNwbGF5X25hbWVcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEuZGlzcGxheV9uYW1lID0gZm9ybURhdGEuZ2V0KFwiZGlzcGxheV9uYW1lXCIpIGFzIHN0cmluZztcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcInZlbmRvcl9udW1iZXJcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEudmVuZG9yX251bWJlciA9IGZvcm1EYXRhLmdldChcInZlbmRvcl9udW1iZXJcIikgYXMgc3RyaW5nO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwiZW1haWxcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEuZW1haWwgPSAoZm9ybURhdGEuZ2V0KFwiZW1haWxcIikgYXMgc3RyaW5nKSB8fCB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJwaG9uZVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5waG9uZSA9IChmb3JtRGF0YS5nZXQoXCJwaG9uZVwiKSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcInNlY29uZGFyeV9waG9uZVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5zZWNvbmRhcnlfcGhvbmUgPVxuXHRcdFx0XHQoZm9ybURhdGEuZ2V0KFwic2Vjb25kYXJ5X3Bob25lXCIpIGFzIHN0cmluZykgfHwgdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwid2Vic2l0ZVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS53ZWJzaXRlID0gKGZvcm1EYXRhLmdldChcIndlYnNpdGVcIikgYXMgc3RyaW5nKSB8fCB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJhZGRyZXNzXCIpKSB7XG5cdFx0XHR1cGRhdGVEYXRhLmFkZHJlc3MgPSAoZm9ybURhdGEuZ2V0KFwiYWRkcmVzc1wiKSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcImFkZHJlc3MyXCIpKSB7XG5cdFx0XHR1cGRhdGVEYXRhLmFkZHJlc3MyID0gKGZvcm1EYXRhLmdldChcImFkZHJlc3MyXCIpIGFzIHN0cmluZykgfHwgdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwiY2l0eVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5jaXR5ID0gKGZvcm1EYXRhLmdldChcImNpdHlcIikgYXMgc3RyaW5nKSB8fCB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJzdGF0ZVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5zdGF0ZSA9IChmb3JtRGF0YS5nZXQoXCJzdGF0ZVwiKSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcInppcF9jb2RlXCIpKSB7XG5cdFx0XHR1cGRhdGVEYXRhLnppcF9jb2RlID0gKGZvcm1EYXRhLmdldChcInppcF9jb2RlXCIpIGFzIHN0cmluZykgfHwgdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwiY291bnRyeVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5jb3VudHJ5ID0gZm9ybURhdGEuZ2V0KFwiY291bnRyeVwiKSBhcyBzdHJpbmc7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJ0YXhfaWRcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEudGF4X2lkID0gKGZvcm1EYXRhLmdldChcInRheF9pZFwiKSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcInBheW1lbnRfdGVybXNcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEucGF5bWVudF90ZXJtcyA9IGZvcm1EYXRhLmdldChcInBheW1lbnRfdGVybXNcIikgYXMgYW55O1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwiY3JlZGl0X2xpbWl0XCIpKSB7XG5cdFx0XHR1cGRhdGVEYXRhLmNyZWRpdF9saW1pdCA9XG5cdFx0XHRcdE51bWJlci5wYXJzZUludChmb3JtRGF0YS5nZXQoXCJjcmVkaXRfbGltaXRcIikgYXMgc3RyaW5nLCAxMCkgKiAxMDA7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJwcmVmZXJyZWRfcGF5bWVudF9tZXRob2RcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEucHJlZmVycmVkX3BheW1lbnRfbWV0aG9kID0gZm9ybURhdGEuZ2V0KFxuXHRcdFx0XHRcInByZWZlcnJlZF9wYXltZW50X21ldGhvZFwiLFxuXHRcdFx0KSBhcyBhbnk7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJjYXRlZ29yeVwiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5jYXRlZ29yeSA9IGZvcm1EYXRhLmdldChcImNhdGVnb3J5XCIpIGFzIGFueTtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcInRhZ3NcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEudGFncyA9IEpTT04ucGFyc2UoZm9ybURhdGEuZ2V0KFwidGFnc1wiKSBhcyBzdHJpbmcpO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwic3RhdHVzXCIpKSB7XG5cdFx0XHR1cGRhdGVEYXRhLnN0YXR1cyA9IGZvcm1EYXRhLmdldChcInN0YXR1c1wiKSBhcyBcImFjdGl2ZVwiIHwgXCJpbmFjdGl2ZVwiO1xuXHRcdH1cblx0XHRpZiAoZm9ybURhdGEuaGFzKFwibm90ZXNcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEubm90ZXMgPSAoZm9ybURhdGEuZ2V0KFwibm90ZXNcIikgYXMgc3RyaW5nKSB8fCB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmIChmb3JtRGF0YS5oYXMoXCJpbnRlcm5hbF9ub3Rlc1wiKSkge1xuXHRcdFx0dXBkYXRlRGF0YS5pbnRlcm5hbF9ub3RlcyA9XG5cdFx0XHRcdChmb3JtRGF0YS5nZXQoXCJpbnRlcm5hbF9ub3Rlc1wiKSBhcyBzdHJpbmcpIHx8IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKGZvcm1EYXRhLmhhcyhcImN1c3RvbV9maWVsZHNcIikpIHtcblx0XHRcdHVwZGF0ZURhdGEuY3VzdG9tX2ZpZWxkcyA9IEpTT04ucGFyc2UoXG5cdFx0XHRcdGZvcm1EYXRhLmdldChcImN1c3RvbV9maWVsZHNcIikgYXMgc3RyaW5nLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBWYWxpZGF0ZSB1cGRhdGUgZGF0YVxuXHRcdGNvbnN0IHZhbGlkYXRlZCA9IHZlbmRvclVwZGF0ZVNjaGVtYS5wYXJzZSh1cGRhdGVEYXRhKTtcblxuXHRcdC8vIENoZWNrIHZlbmRvciBudW1iZXIgdW5pcXVlbmVzcyBpZiBjaGFuZ2VkXG5cdFx0aWYgKFxuXHRcdFx0dmFsaWRhdGVkLnZlbmRvcl9udW1iZXIgJiZcblx0XHRcdHZhbGlkYXRlZC52ZW5kb3JfbnVtYmVyICE9PSBleGlzdGluZ1ZlbmRvci52ZW5kb3JfbnVtYmVyXG5cdFx0KSB7XG5cdFx0XHRjb25zdCB7IGRhdGE6IGR1cGxpY2F0ZSB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdFx0LmZyb20oXCJ2ZW5kb3JzXCIpXG5cdFx0XHRcdC5zZWxlY3QoXCJpZFwiKVxuXHRcdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIHRlYW1NZW1iZXIuY29tcGFueV9pZClcblx0XHRcdFx0LmVxKFwidmVuZG9yX251bWJlclwiLCB2YWxpZGF0ZWQudmVuZG9yX251bWJlcilcblx0XHRcdFx0Lm5lcShcImlkXCIsIHZlbmRvcklkKVxuXHRcdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdFx0aWYgKGR1cGxpY2F0ZSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFx0XCJWZW5kb3IgbnVtYmVyIGFscmVhZHkgZXhpc3RzXCIsXG5cdFx0XHRcdFx0RVJST1JfQ09ERVMuVkFMSURBVElPTl9GQUlMRUQsXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHZlbmRvclxuXHRcdGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC51cGRhdGUodmFsaWRhdGVkKVxuXHRcdFx0LmVxKFwiaWRcIiwgdmVuZG9ySWQpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIHVwZGF0ZSB2ZW5kb3JcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfUVVFUllfRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldmFsaWRhdGVQYXRoKFwiL2Rhc2hib2FyZC9pbnZlbnRvcnkvdmVuZG9yc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC9pbnZlbnRvcnkvdmVuZG9ycy8ke3ZlbmRvcklkfWApO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBEZWxldGUgKHNvZnQgZGVsZXRlKSBhIHZlbmRvclxuICovXG5hc3luYyBmdW5jdGlvbiBkZWxldGVWZW5kb3IoXG5cdHZlbmRvcklkOiBzdHJpbmcsXG4pOiBQcm9taXNlPEFjdGlvblJlc3VsdDx2b2lkPj4ge1xuXHRyZXR1cm4gd2l0aEVycm9ySGFuZGxpbmcoYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XG5cdFx0aWYgKCFzdXBhYmFzZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX0NPTk5FQ1RJT05fRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRhc3NlcnRBdXRoZW50aWNhdGVkKHVzZXI/LmlkKTtcblxuXHRcdGNvbnN0IHsgZGF0YTogdGVhbU1lbWJlciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwiY29tcGFueV9tZW1iZXJzaGlwc1wiKVxuXHRcdFx0LnNlbGVjdChcImNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcblx0XHRcdC5lcShcInN0YXR1c1wiLCBcImFjdGl2ZVwiKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0aWYgKCF0ZWFtTWVtYmVyPy5jb21wYW55X2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiWW91IG11c3QgYmUgcGFydCBvZiBhIGNvbXBhbnlcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdDQwMyxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gVmVyaWZ5IHZlbmRvciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogdmVuZG9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJ2ZW5kb3JzXCIpXG5cdFx0XHQuc2VsZWN0KFwiaWQsIGNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcImlkXCIsIHZlbmRvcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKHZlbmRvciwgXCJWZW5kb3JcIik7XG5cblx0XHRpZiAodmVuZG9yLmNvbXBhbnlfaWQgIT09IHRlYW1NZW1iZXIuY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5mb3JiaWRkZW4oXCJ2ZW5kb3JcIiksXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFNvZnQgZGVsZXRlIHZlbmRvclxuXHRcdGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC51cGRhdGUoe1xuXHRcdFx0XHRkZWxldGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRcdGRlbGV0ZWRfYnk6IHVzZXIuaWQsXG5cdFx0XHR9KVxuXHRcdFx0LmVxKFwiaWRcIiwgdmVuZG9ySWQpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIGRlbGV0ZSB2ZW5kb3JcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfUVVFUllfRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldmFsaWRhdGVQYXRoKFwiL2Rhc2hib2FyZC9pbnZlbnRvcnkvdmVuZG9yc1wiKTtcblx0fSk7XG59XG5cbi8qKlxuICogR2V0IGEgc2luZ2xlIHZlbmRvciBieSBJRFxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRWZW5kb3IodmVuZG9ySWQ6IHN0cmluZyk6IFByb21pc2U8QWN0aW9uUmVzdWx0PGFueT4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHRjb25zdCB7IGRhdGE6IHRlYW1NZW1iZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImNvbXBhbnlfbWVtYmVyc2hpcHNcIilcblx0XHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXG5cdFx0XHQuZXEoXCJzdGF0dXNcIiwgXCJhY3RpdmVcIilcblx0XHRcdC5zaW5nbGUoKTtcblxuXHRcdGlmICghdGVhbU1lbWJlcj8uY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIllvdSBtdXN0IGJlIHBhcnQgb2YgYSBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogdmVuZG9yLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwidmVuZG9yc1wiKVxuXHRcdFx0LnNlbGVjdChcIipcIilcblx0XHRcdC5lcShcImlkXCIsIHZlbmRvcklkKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJGYWlsZWQgdG8gZmV0Y2ggdmVuZG9yXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRhc3NlcnRFeGlzdHModmVuZG9yLCBcIlZlbmRvclwiKTtcblxuXHRcdHJldHVybiB2ZW5kb3I7XG5cdH0pO1xufVxuXG4vKipcbiAqIExpc3QgYWxsIHZlbmRvcnMgZm9yIHRoZSBjb21wYW55XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxpc3RWZW5kb3JzKG9wdGlvbnM/OiB7XG5cdHN0YXR1cz86IFwiYWN0aXZlXCIgfCBcImluYWN0aXZlXCI7XG5cdGNhdGVnb3J5Pzogc3RyaW5nO1xuXHRzZWFyY2g/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxBY3Rpb25SZXN1bHQ8YW55W10+PiB7XG5cdHJldHVybiB3aXRoRXJyb3JIYW5kbGluZyhhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfQ09OTkVDVElPTl9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qge1xuXHRcdFx0ZGF0YTogeyB1c2VyIH0sXG5cdFx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGFzc2VydEF1dGhlbnRpY2F0ZWQodXNlcj8uaWQpO1xuXG5cdFx0Y29uc3QgeyBkYXRhOiB0ZWFtTWVtYmVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjb21wYW55X21lbWJlcnNoaXBzXCIpXG5cdFx0XHQuc2VsZWN0KFwiY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwidXNlcl9pZFwiLCB1c2VyLmlkKVxuXHRcdFx0LmVxKFwic3RhdHVzXCIsIFwiYWN0aXZlXCIpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoIXRlYW1NZW1iZXI/LmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJZb3UgbXVzdCBiZSBwYXJ0IG9mIGEgY29tcGFueVwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0NDAzLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRsZXQgcXVlcnkgPSBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJ2ZW5kb3JzXCIpXG5cdFx0XHQuc2VsZWN0KFwiKlwiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCB0ZWFtTWVtYmVyLmNvbXBhbnlfaWQpXG5cdFx0XHQuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG5cdFx0XHQub3JkZXIoXCJuYW1lXCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG5cdFx0aWYgKG9wdGlvbnM/LnN0YXR1cykge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5lcShcInN0YXR1c1wiLCBvcHRpb25zLnN0YXR1cyk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnM/LmNhdGVnb3J5KSB7XG5cdFx0XHRxdWVyeSA9IHF1ZXJ5LmVxKFwiY2F0ZWdvcnlcIiwgb3B0aW9ucy5jYXRlZ29yeSk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnM/LnNlYXJjaCkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5vcihcblx0XHRcdFx0YG5hbWUuaWxpa2UuJSR7b3B0aW9ucy5zZWFyY2h9JSxkaXNwbGF5X25hbWUuaWxpa2UuJSR7b3B0aW9ucy5zZWFyY2h9JSx2ZW5kb3JfbnVtYmVyLmlsaWtlLiUke29wdGlvbnMuc2VhcmNofSUsZW1haWwuaWxpa2UuJSR7b3B0aW9ucy5zZWFyY2h9JWAsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogdmVuZG9ycywgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIGZldGNoIHZlbmRvcnNcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfUVVFUllfRVJST1IsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiB2ZW5kb3JzIHx8IFtdO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBTZWFyY2ggdmVuZG9ycyBieSBxdWVyeSBzdHJpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFZlbmRvcnMoXG5cdHF1ZXJ5OiBzdHJpbmcsXG4pOiBQcm9taXNlPEFjdGlvblJlc3VsdDxhbnlbXT4+IHtcblx0cmV0dXJuIHdpdGhFcnJvckhhbmRsaW5nKGFzeW5jICgpID0+IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5EQl9DT05ORUNUSU9OX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRjb25zdCB7XG5cdFx0XHRkYXRhOiB7IHVzZXIgfSxcblx0XHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cdFx0YXNzZXJ0QXV0aGVudGljYXRlZCh1c2VyPy5pZCk7XG5cblx0XHQvLyBVc2UgdGhlIHNhbWUgYXBwcm9hY2ggYXMgc2VhcmNoQ3VzdG9tZXJzXG5cdFx0Y29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXHRcdGNvbnN0IGFjdGl2ZUNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXHRcdFxuXHRcdGlmICghYWN0aXZlQ29tcGFueUlkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiTm8gYWN0aXZlIGNvbXBhbnlcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdDQwMyxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gVmVyaWZ5IHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgYWN0aXZlIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IHRlYW1NZW1iZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcImNvbXBhbnlfbWVtYmVyc2hpcHNcIilcblx0XHRcdC5zZWxlY3QoXCJjb21wYW55X2lkXCIpXG5cdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXG5cdFx0XHQuZXEoXCJjb21wYW55X2lkXCIsIGFjdGl2ZUNvbXBhbnlJZClcblx0XHRcdC5lcShcInN0YXR1c1wiLCBcImFjdGl2ZVwiKVxuXHRcdFx0Lm1heWJlU2luZ2xlKCk7XG5cblx0XHRpZiAoIXRlYW1NZW1iZXI/LmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJZb3UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdGhpcyBjb21wYW55XCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogdmVuZG9ycywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgbmFtZSwgZGlzcGxheV9uYW1lLCB2ZW5kb3JfbnVtYmVyLCBlbWFpbCwgcGhvbmUsIHN0YXR1c1wiKVxuXHRcdFx0LmVxKFwiY29tcGFueV9pZFwiLCBhY3RpdmVDb21wYW55SWQpXG5cdFx0XHQuZXEoXCJzdGF0dXNcIiwgXCJhY3RpdmVcIilcblx0XHRcdC5pcyhcImRlbGV0ZWRfYXRcIiwgbnVsbClcblx0XHRcdC5vcihcblx0XHRcdFx0YG5hbWUuaWxpa2UuJSR7cXVlcnl9JSxkaXNwbGF5X25hbWUuaWxpa2UuJSR7cXVlcnl9JSx2ZW5kb3JfbnVtYmVyLmlsaWtlLiUke3F1ZXJ5fSUsZW1haWwuaWxpa2UuJSR7cXVlcnl9JWAsXG5cdFx0XHQpXG5cdFx0XHQubGltaXQoMjApO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRmFpbGVkIHRvIHNlYXJjaCB2ZW5kb3JzXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmVuZG9ycyB8fCBbXTtcblx0fSk7XG59XG5cbi8qKlxuICogTGluayBhIHB1cmNoYXNlIG9yZGVyIHRvIGEgdmVuZG9yXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaW5rUHVyY2hhc2VPcmRlclRvVmVuZG9yKFxuXHRwdXJjaGFzZU9yZGVySWQ6IHN0cmluZyxcblx0dmVuZG9ySWQ6IHN0cmluZyxcbik6IFByb21pc2U8QWN0aW9uUmVzdWx0PHZvaWQ+PiB7XG5cdHJldHVybiB3aXRoRXJyb3JIYW5kbGluZyhhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblx0XHRpZiAoIXN1cGFiYXNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQWN0aW9uRXJyb3IoXG5cdFx0XHRcdFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0RVJST1JfQ09ERVMuREJfQ09OTkVDVElPTl9FUlJPUixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qge1xuXHRcdFx0ZGF0YTogeyB1c2VyIH0sXG5cdFx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXHRcdGFzc2VydEF1dGhlbnRpY2F0ZWQodXNlcj8uaWQpO1xuXG5cdFx0Y29uc3QgeyBkYXRhOiB0ZWFtTWVtYmVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJjb21wYW55X21lbWJlcnNoaXBzXCIpXG5cdFx0XHQuc2VsZWN0KFwiY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwidXNlcl9pZFwiLCB1c2VyLmlkKVxuXHRcdFx0LmVxKFwic3RhdHVzXCIsIFwiYWN0aXZlXCIpXG5cdFx0XHQuc2luZ2xlKCk7XG5cblx0XHRpZiAoIXRlYW1NZW1iZXI/LmNvbXBhbnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBBY3Rpb25FcnJvcihcblx0XHRcdFx0XCJZb3UgbXVzdCBiZSBwYXJ0IG9mIGEgY29tcGFueVwiLFxuXHRcdFx0XHRFUlJPUl9DT0RFUy5BVVRIX0ZPUkJJRERFTixcblx0XHRcdFx0NDAzLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBWZXJpZnkgcHVyY2hhc2Ugb3JkZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGNvbXBhbnlcblx0XHRjb25zdCB7IGRhdGE6IHBvIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJwdXJjaGFzZV9vcmRlcnNcIilcblx0XHRcdC5zZWxlY3QoXCJpZCwgY29tcGFueV9pZFwiKVxuXHRcdFx0LmVxKFwiaWRcIiwgcHVyY2hhc2VPcmRlcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKHBvLCBcIlB1cmNoYXNlIE9yZGVyXCIpO1xuXG5cdFx0aWYgKHBvLmNvbXBhbnlfaWQgIT09IHRlYW1NZW1iZXIuY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5mb3JiaWRkZW4oXCJwdXJjaGFzZSBvcmRlclwiKSxcblx0XHRcdFx0RVJST1JfQ09ERVMuQVVUSF9GT1JCSURERU4sXG5cdFx0XHRcdDQwMyxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gVmVyaWZ5IHZlbmRvciBleGlzdHMgYW5kIGJlbG9uZ3MgdG8gY29tcGFueVxuXHRcdGNvbnN0IHsgZGF0YTogdmVuZG9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuXHRcdFx0LmZyb20oXCJ2ZW5kb3JzXCIpXG5cdFx0XHQuc2VsZWN0KFwiaWQsIGNvbXBhbnlfaWRcIilcblx0XHRcdC5lcShcImlkXCIsIHZlbmRvcklkKVxuXHRcdFx0LmlzKFwiZGVsZXRlZF9hdFwiLCBudWxsKVxuXHRcdFx0LnNpbmdsZSgpO1xuXG5cdFx0YXNzZXJ0RXhpc3RzKHZlbmRvciwgXCJWZW5kb3JcIik7XG5cblx0XHRpZiAodmVuZG9yLmNvbXBhbnlfaWQgIT09IHRlYW1NZW1iZXIuY29tcGFueV9pZCkge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRFUlJPUl9NRVNTQUdFUy5mb3JiaWRkZW4oXCJ2ZW5kb3JcIiksXG5cdFx0XHRcdEVSUk9SX0NPREVTLkFVVEhfRk9SQklEREVOLFxuXHRcdFx0XHQ0MDMsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIExpbmsgcHVyY2hhc2Ugb3JkZXIgdG8gdmVuZG9yXG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Vcblx0XHRcdC5mcm9tKFwicHVyY2hhc2Vfb3JkZXJzXCIpXG5cdFx0XHQudXBkYXRlKHsgdmVuZG9yX2lkOiB2ZW5kb3JJZCB9KVxuXHRcdFx0LmVxKFwiaWRcIiwgcHVyY2hhc2VPcmRlcklkKTtcblxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFjdGlvbkVycm9yKFxuXHRcdFx0XHRcIkZhaWxlZCB0byBsaW5rIHB1cmNoYXNlIG9yZGVyXCIsXG5cdFx0XHRcdEVSUk9SX0NPREVTLkRCX1FVRVJZX0VSUk9SLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXZhbGlkYXRlUGF0aChcIi9kYXNoYm9hcmQvd29yay92ZW5kb3JzXCIpO1xuXHRcdHJldmFsaWRhdGVQYXRoKGAvZGFzaGJvYXJkL3dvcmsvdmVuZG9ycy8ke3ZlbmRvcklkfWApO1xuXHRcdHJldmFsaWRhdGVQYXRoKFwiL2Rhc2hib2FyZC93b3JrL3B1cmNoYXNlLW9yZGVyc1wiKTtcblx0XHRyZXZhbGlkYXRlUGF0aChgL2Rhc2hib2FyZC93b3JrL3B1cmNoYXNlLW9yZGVycy8ke3B1cmNoYXNlT3JkZXJJZH1gKTtcblx0fSk7XG59XG5cbi8qKlxuICogQXJjaGl2ZSBhIHZlbmRvciAoc29mdCBkZWxldGUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcmNoaXZlVmVuZG9yKFxuXHR2ZW5kb3JJZDogc3RyaW5nLFxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXHRcdGlmICghc3VwYWJhc2UpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGVcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHtcblx0XHRcdGRhdGE6IHsgdXNlciB9LFxuXHRcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcblx0XHRpZiAoIXVzZXIpIHtcblx0XHRcdHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG5cdFx0XHQuZnJvbShcInZlbmRvcnNcIilcblx0XHRcdC51cGRhdGUoe1xuXHRcdFx0XHRkZWxldGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHR9KVxuXHRcdFx0LmVxKFwiaWRcIiwgdmVuZG9ySWQpO1xuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcblx0XHR9XG5cblx0XHRyZXZhbGlkYXRlUGF0aChcIi9kYXNoYm9hcmQvd29yay92ZW5kb3JzXCIpO1xuXHRcdHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblx0fSBjYXRjaCAoX2Vycm9yKSB7XG5cdFx0cmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZhaWxlZCB0byBhcmNoaXZlIHZlbmRvclwiIH07XG5cdH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoic1NBaWtCc0IifQ==
}),
"[project]/apps/web/src/actions/data:16d03b [app-ssr] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00205bdcfa50bc0588da90d86d40b50a2b710c766d":"getSmsFolderCountsAction"},"apps/web/src/actions/sms-actions.ts",""] */ __turbopack_context__.s([
    "getSmsFolderCountsAction",
    ()=>getSmsFolderCountsAction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var getSmsFolderCountsAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("00205bdcfa50bc0588da90d86d40b50a2b710c766d", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$0$2e$4_$40$opentelemetry$2b$api$40$1$2e$9$2e$0_react$2d$dom$40$19$2e$2$2e$0_react$40$19$2e$2$2e$0_$5f$react$40$19$2e$2$2e$0$2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getSmsFolderCountsAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vc21zLWFjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCB7XG4gICAgZ2V0Q29tcGFueVNtcyxcbiAgICBnZXRTbXNCeUlkLFxuICAgIG1hcmtTbXNBc1JlYWQsXG4gICAgbWFya1Ntc0NvbnZlcnNhdGlvbkFzUmVhZCxcbiAgICB0eXBlIENvbXBhbnlTbXMsXG59IGZyb20gXCJAL2xpYi9jb21tdW5pY2F0aW9uL3Ntcy1zZXJ2aWNlXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5jb25zdCBnZXRTbXNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGxpbWl0OiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMSkubWF4KDUwMCkub3B0aW9uYWwoKS5kZWZhdWx0KDUwKSxcbiAgb2Zmc2V0OiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMCkub3B0aW9uYWwoKS5kZWZhdWx0KDApLFxuICB0eXBlOiB6LmVudW0oW1wic2VudFwiLCBcInJlY2VpdmVkXCIsIFwiYWxsXCJdKS5vcHRpb25hbCgpLmRlZmF1bHQoXCJhbGxcIiksXG4gIGZvbGRlcjogei5lbnVtKFtcImluYm94XCIsIFwic2VudFwiLCBcImFyY2hpdmVcIiwgXCJ0cmFzaFwiLCBcImJpblwiXSkub3B0aW9uYWwoKSxcbiAgbGFiZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc2VhcmNoOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgc29ydEJ5OiB6LmVudW0oW1wiY3JlYXRlZF9hdFwiLCBcInNlbnRfYXRcIl0pLm9wdGlvbmFsKCkuZGVmYXVsdChcImNyZWF0ZWRfYXRcIiksXG4gIHNvcnRPcmRlcjogei5lbnVtKFtcImFzY1wiLCBcImRlc2NcIl0pLm9wdGlvbmFsKCkuZGVmYXVsdChcImRlc2NcIiksXG59KS5wYXNzdGhyb3VnaCgpO1xuXG5jb25zdCBtYXJrU21zUmVhZFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgc21zSWQ6IHouc3RyaW5nKCkubWluKDEpLFxufSk7XG5cbmV4cG9ydCB0eXBlIEdldFNtc0lucHV0ID0gei5pbmZlcjx0eXBlb2YgZ2V0U21zU2NoZW1hPjtcbmV4cG9ydCB0eXBlIE1hcmtTbXNSZWFkSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBtYXJrU21zUmVhZFNjaGVtYT47XG5cbi8vIFJlLWV4cG9ydCBTTVMgdHlwZXMgZnJvbSBzbXMtc2VydmljZVxuZXhwb3J0IHR5cGUgeyBDb21wYW55U21zIH07XG5cbmV4cG9ydCB0eXBlIEdldFNtc1Jlc3VsdCA9IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0Q29tcGFueVNtcz4+O1xuXG4vKipcbiAqIEdldCBTTVMgbWVzc2FnZXMgZm9yIHRoZSBhY3RpdmUgY29tcGFueVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U21zQWN0aW9uKFxuICBpbnB1dDogR2V0U21zSW5wdXRcbik6IFByb21pc2U8R2V0U21zUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBnZXRTbXNTY2hlbWEuc2FmZVBhcnNlKGlucHV0KTtcbiAgICBcbiAgICBpZiAoIXBhcnNlUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpbnB1dCBwYXJhbWV0ZXJzOiAke3BhcnNlUmVzdWx0LmVycm9yLmVycm9ycy5tYXAoZSA9PiBgJHtlLnBhdGguam9pbignLicpfTogJHtlLm1lc3NhZ2V9YCkuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdmFsaWRhdGVkSW5wdXQgPSBwYXJzZVJlc3VsdC5kYXRhO1xuICAgIGNvbnN0IHsgZ2V0QWN0aXZlQ29tcGFueUlkIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9hdXRoL2NvbXBhbnktY29udGV4dFwiKTtcbiAgICBjb25zdCBjb21wYW55SWQgPSBhd2FpdCBnZXRBY3RpdmVDb21wYW55SWQoKTtcblxuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgZ2V0Q29tcGFueVNtcyhjb21wYW55SWQsIHZhbGlkYXRlZElucHV0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIGdldFNtc0FjdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGEgc3BlY2lmaWMgU01TIGJ5IElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTbXNCeUlkQWN0aW9uKHNtc0lkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgc21zPzogQ29tcGFueVNtcztcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc21zID0gYXdhaXQgZ2V0U21zQnlJZChjb21wYW55SWQsIHNtc0lkKTtcbiAgICBcbiAgICBpZiAoIXNtcykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNNUyBub3QgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHNtcyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIFNNUyBieSBJRDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBNYXJrIGFuIFNNUyBhcyByZWFkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrU21zQXNSZWFkQWN0aW9uKFxuICBpbnB1dDogTWFya1Ntc1JlYWRJbnB1dFxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGVkSW5wdXQgPSBtYXJrU21zUmVhZFNjaGVtYS5wYXJzZShpbnB1dCk7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgcGFyYW1ldGVyc1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgbWFya1Ntc0FzUmVhZChjb21wYW55SWQsIHZhbGlkYXRlZElucHV0LnNtc0lkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHBhcmFtZXRlcnNcIik7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogTWFyayBhbGwgdW5yZWFkIG1lc3NhZ2VzIGluIGFuIFNNUyBjb252ZXJzYXRpb24gYXMgcmVhZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya1Ntc0NvbnZlcnNhdGlvbkFzUmVhZEFjdGlvbihwaG9uZU51bWJlcjogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBcInVzZSBzZXJ2ZXJcIjtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIFxuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgbWFya1Ntc0NvbnZlcnNhdGlvbkFzUmVhZChjb21wYW55SWQsIHBob25lTnVtYmVyKTtcbiAgICByZXR1cm4geyBzdWNjZXNzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1hcmtpbmcgU01TIGNvbnZlcnNhdGlvbiBhcyByZWFkOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBTTVMgY29udmVyc2F0aW9uIHRocmVhZCBieSBwaG9uZSBudW1iZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNtc0NvbnZlcnNhdGlvbkFjdGlvbihwaG9uZU51bWJlcjogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2VzPzogQ29tcGFueVNtc1tdO1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgZ2V0U21zQ29udmVyc2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zbXMvc21zLXNlcnZpY2VcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIFxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgZ2V0U21zQ29udmVyc2F0aW9uKGNvbXBhbnlJZCwgcGhvbmVOdW1iZXIpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2VzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIFNNUyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgICAvLyBIYW5kbGUgY29va2llcygpIGVycm9yIGdyYWNlZnVsbHlcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiY29va2llc1wiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIlJlcXVlc3QgY29udGV4dCBub3QgYXZhaWxhYmxlLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZS5cIixcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgU01TIGZvbGRlciBjb3VudHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNtc0ZvbGRlckNvdW50c0FjdGlvbigpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgY291bnRzPzoge1xuICAgIGluYm94OiBudW1iZXI7XG4gICAgc2VudDogbnVtYmVyO1xuICAgIGFyY2hpdmU6IG51bWJlcjtcbiAgICB0cmFzaDogbnVtYmVyO1xuICAgIFtsYWJlbDogc3RyaW5nXTogbnVtYmVyO1xuICB9O1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBnZXRBY3RpdmVDb21wYW55SWQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuICAgIFxuICAgIGNvbnN0IGNvbXBhbnlJZCA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnlJZCgpO1xuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gYWN0aXZlIGNvbXBhbnkgZm91bmRcIiB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJhc2VRdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNvbW11bmljYXRpb25zXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSlcbiAgICAgIC5lcShcImNvbXBhbnlfaWRcIiwgY29tcGFueUlkKVxuICAgICAgLmVxKFwidHlwZVwiLCBcInNtc1wiKTtcbiAgICBcbiAgICAvLyBHZXQgY291bnRzIGZvciBlYWNoIGZvbGRlclxuICAgIGNvbnN0IFtpbmJveFJlc3VsdCwgc2VudFJlc3VsdCwgYXJjaGl2ZVJlc3VsdCwgdHJhc2hSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgLy8gSW5ib3hcbiAgICAgIGJhc2VRdWVyeVxuICAgICAgICAuZXEoXCJkaXJlY3Rpb25cIiwgXCJpbmJvdW5kXCIpXG4gICAgICAgIC5lcShcImlzX2FyY2hpdmVkXCIsIGZhbHNlKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpXG4gICAgICAgIC5vcihcInNub296ZWRfdW50aWwuaXMubnVsbCxzbm9vemVkX3VudGlsLmx0Lm5vdygpXCIpLFxuICAgICAgLy8gU2VudFxuICAgICAgYmFzZVF1ZXJ5XG4gICAgICAgIC5lcShcImRpcmVjdGlvblwiLCBcIm91dGJvdW5kXCIpXG4gICAgICAgIC5lcShcImlzX2FyY2hpdmVkXCIsIGZhbHNlKVxuICAgICAgICAuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpLFxuICAgICAgLy8gQXJjaGl2ZVxuICAgICAgYmFzZVF1ZXJ5LmVxKFwiaXNfYXJjaGl2ZWRcIiwgdHJ1ZSkuaXMoXCJkZWxldGVkX2F0XCIsIG51bGwpLFxuICAgICAgLy8gVHJhc2hcbiAgICAgIGJhc2VRdWVyeS5ub3QoXCJkZWxldGVkX2F0XCIsIFwiaXNcIiwgbnVsbCksXG4gICAgXSk7XG4gICAgXG4gICAgY29uc3QgY291bnRzID0ge1xuICAgICAgaW5ib3g6IGluYm94UmVzdWx0LmNvdW50IHx8IDAsXG4gICAgICBzZW50OiBzZW50UmVzdWx0LmNvdW50IHx8IDAsXG4gICAgICBhcmNoaXZlOiBhcmNoaXZlUmVzdWx0LmNvdW50IHx8IDAsXG4gICAgICB0cmFzaDogdHJhc2hSZXN1bHQuY291bnQgfHwgMCxcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGNvdW50cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIiB9O1xuICB9XG59XG5cbi8qKlxuICogVXBsb2FkIFNNUyBhdHRhY2htZW50cyB0byBzdG9yYWdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRTbXNBdHRhY2htZW50cyhcbiAgZmlsZXM6IEZpbGVbXVxuKTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHVybHM/OiBzdHJpbmdbXTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIFwidXNlIHNlcnZlclwiO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnlJZCB9ID0gYXdhaXQgaW1wb3J0KFwiQC9saWIvYXV0aC9jb21wYW55LWNvbnRleHRcIik7XG4gICAgY29uc3QgY29tcGFueUlkID0gYXdhaXQgZ2V0QWN0aXZlQ29tcGFueUlkKCk7XG4gICAgXG4gICAgaWYgKCFjb21wYW55SWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IHVybHM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgICAvLyBVcGxvYWQgZWFjaCBmaWxlIHRvIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICAgIC8vIFVzZSBjb21wYW55LWZpbGVzIGJ1Y2tldCB3aGljaCBoYXMgcHJvcGVyIFJMUyBwb2xpY2llcyBmb3IgY29tcGFueSBtZW1iZXJzXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZUV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpfS4ke2ZpbGVFeHR9YDtcbiAgICAgICAgLy8gUGF0aCBzdHJ1Y3R1cmU6IGNvbXBhbnlJZCBtdXN0IGJlIGF0IGluZGV4IFswXSBmb3IgUkxTIHBvbGljeSAobWF0Y2hlcyBkb2N1bWVudC1tYW5hZ2VyIHBhdHRlcm4pXG4gICAgICAgIC8vIEZvcm1hdDogY29tcGFueUlkL2ZvbGRlci9maWxlbmFtZSAoc3RvcmFnZS5mb2xkZXJuYW1lKG5hbWUpKVswXSA9IGNvbXBhbnlJZFxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2NvbXBhbnlJZH0vc21zLWF0dGFjaG1lbnRzLyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnQgZmlsZSB0byBhcnJheSBidWZmZXJcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXG4gICAgICAgICAgLmZyb20oJ2NvbXBhbnktZmlsZXMnKSAvLyBVc2UgY29tcGFueS1maWxlcyBidWNrZXQgd2l0aCBwcm9wZXIgUkxTXG4gICAgICAgICAgLnVwbG9hZChmaWxlUGF0aCwgYXJyYXlCdWZmZXIsIHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICB1cHNlcnQ6IGZhbHNlLFxuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVwbG9hZEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlVwbG9hZCBlcnJvcjpcIiwgdXBsb2FkRXJyb3IpO1xuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEZhaWxlZCB0byB1cGxvYWQgJHtmaWxlLm5hbWV9OiAke3VwbG9hZEVycm9yLm1lc3NhZ2V9YCB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgcHVibGljIFVSTCAob3Igc2lnbmVkIFVSTCBmb3IgcHJpdmF0ZSBidWNrZXQpXG4gICAgICAgIGNvbnN0IHsgZGF0YTogeyBwdWJsaWNVcmwgfSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAgIC5mcm9tKCdjb21wYW55LWZpbGVzJylcbiAgICAgICAgICAuZ2V0UHVibGljVXJsKGZpbGVQYXRoKTtcbiAgICAgICAgXG4gICAgICAgIHVybHMucHVzaChwdWJsaWNVcmwpO1xuICAgICAgfVxuICAgIFxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHVybHMgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBsb2FkaW5nIFNNUyBhdHRhY2htZW50czpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBTTVMgVGVtcGxhdGUgQ29udGV4dCBUeXBlXG4gKiBEYXRhIGF2YWlsYWJsZSBmb3IgYXV0by1maWxsaW5nIFNNUyB0ZW1wbGF0ZXNcbiAqL1xuZXhwb3J0IHR5cGUgU21zVGVtcGxhdGVDb250ZXh0ID0ge1xuICBjb21wYW55TmFtZT86IHN0cmluZztcbiAgY29tcGFueVBob25lPzogc3RyaW5nO1xuICBjb21wYW55RW1haWw/OiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIEdldCBjb21wYW55IGNvbnRleHQgZm9yIFNNUyB0ZW1wbGF0ZXNcbiAqIFJldHVybnMgY29tcGFueSBpbmZvIGZvciBhdXRvLWZpbGxpbmcgdGVtcGxhdGUgbWVzc2FnZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbXBhbnlDb250ZXh0QWN0aW9uKCk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBjb250ZXh0PzogU21zVGVtcGxhdGVDb250ZXh0O1xuICBlcnJvcj86IHN0cmluZztcbn0+IHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldEFjdGl2ZUNvbXBhbnkgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2F1dGgvY29tcGFueS1jb250ZXh0XCIpO1xuXG4gICAgY29uc3QgY29tcGFueSA9IGF3YWl0IGdldEFjdGl2ZUNvbXBhbnkoKTtcbiAgICBpZiAoIWNvbXBhbnkpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBhY3RpdmUgY29tcGFueSBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIGNvbXBhbnlOYW1lOiBjb21wYW55Lm5hbWUsXG4gICAgICAgIGNvbXBhbnlQaG9uZTogY29tcGFueS5waG9uZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvbXBhbnlFbWFpbDogY29tcGFueS5lbWFpbCB8fCB1bmRlZmluZWQsXG4gICAgICB9LFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgY29tcGFueSBjb250ZXh0OlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG4gICAgfTtcbiAgfVxufVxuXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InFUQTBMc0IifQ==
}),
];

//# sourceMappingURL=apps_web_src_actions_65eb7efb._.js.map