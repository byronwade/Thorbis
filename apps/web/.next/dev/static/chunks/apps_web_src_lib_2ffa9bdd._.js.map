{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/communication/communication-reports-sidebar-config.tsx"],"sourcesContent":["import {\n\tArchive,\n\tCreditCard,\n\tFile,\n\tHelpCircle,\n\tInbox,\n\tInfo,\n\tSend,\n\tStar,\n\tTrendingUp,\n} from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\n/**\n * Get communication sidebar configuration for the main communication hub\n * Matches the email sidebar structure with MY INBOX and COMPANY INBOX sections\n */\nexport function getCommunicationReportsSidebarConfig(): CommunicationSidebarConfig {\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"MY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=inbox\",\n\t\t\t\t\t\ticon: Inbox,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Drafts\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=drafts\",\n\t\t\t\t\t\ticon: File,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Starred\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=starred\",\n\t\t\t\t\t\ticon: Star,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"COMPANY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=support\",\n\t\t\t\t\t\ticon: HelpCircle,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=sales\",\n\t\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=billing\",\n\t\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=general\",\n\t\t\t\t\t\ticon: Info,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: undefined,\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: [],\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true,\n\t\t\t},\n\t\t],\n\t};\n}\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBO,SAAS;IACf,OAAO;QACN,WAAW;YACV;gBACC,OAAO;gBACP,OAAO;oBACN;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,oSAAK;oBACZ;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,iSAAI;oBACX;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,iSAAI;oBACX;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,iSAAI;oBACX;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,0SAAO;oBACd;iBACA;YACF;YACA;gBACC,OAAO;gBACP,OAAO;oBACN;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,mUAAU;oBACjB;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,uTAAU;oBACjB;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,uTAAU;oBACjB;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,iSAAI;oBACX;iBACA;YACF;SACA;QACD,eAAe;QACf,oBAAoB;YACnB;gBACC,OAAO;gBACP,OAAO,EAAE;gBACT,YAAY;gBACZ,cAAc;gBACd,aAAa;YACd;SACA;IACF;AACD"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/communication/email-sidebar-config.tsx"],"sourcesContent":["import {\n\tArchive,\n\tBuilding2,\n\tClock,\n\tFile,\n\tInbox,\n\tInfo,\n\tMail,\n\tPlus,\n\tSend,\n\tShieldAlert,\n\tStar,\n\tTag,\n\tUser,\n\tCreditCard,\n\tTrendingUp,\n\tHelpCircle,\n} from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\nimport { CreateFolderDialog } from \"@/components/communication/create-folder-dialog\";\n\ntype FolderCounts = {\n\t// Personal inbox counts\n\tpersonal_inbox?: number;\n\tpersonal_drafts?: number;\n\tpersonal_sent?: number;\n\tpersonal_archive?: number;\n\tpersonal_starred?: number;\n\n\t// Company inbox counts (by category)\n\tcompany_support?: number;\n\tcompany_sales?: number;\n\tcompany_billing?: number;\n\tcompany_general?: number;\n\n\t// Legacy counts (deprecated, for backwards compatibility)\n\tall?: number;\n\tinbox?: number;\n\tdrafts?: number;\n\tsent?: number;\n\tarchive?: number;\n\tsnoozed?: number;\n\tspam?: number;\n\ttrash?: number;\n\tstarred?: number;\n\t[label: string]: number | undefined;\n};\n\ntype CustomFolder = {\n\tid: string;\n\tname: string;\n\tslug: string;\n\tcolor?: string | null;\n\ticon?: string | null;\n\tsort_order: number;\n};\n\ntype FolderItem = {\n\ttitle: string;\n\ticon: typeof Tag;\n\tbadge?: number;\n\turl: string;\n\tfolderId?: string; // For delete functionality\n};\n\n/**\n * Get email sidebar configuration with dynamic counts\n * @param counts - Optional folder counts to display as badges\n * @param customFolders - Optional custom folders from database\n */\nexport function getEmailSidebarConfig(\n\tcounts?: FolderCounts,\n\tcustomFolders?: CustomFolder[]\n): CommunicationSidebarConfig {\n\t// Build label items from custom folders\n\tconst labelItems: FolderItem[] = [];\n\n\t// Add custom folders from database\n\tif (customFolders && customFolders.length > 0) {\n\t\tcustomFolders\n\t\t\t.sort((a, b) => a.sort_order - b.sort_order)\n\t\t\t.forEach((folder) => {\n\t\t\t\tconst count = counts?.[folder.slug];\n\t\t\t\tlabelItems.push({\n\t\t\t\t\ttitle: folder.name,\n\t\t\t\t\ticon: Tag,\n\t\t\t\t\tbadge: count && count > 0 ? count : undefined,\n\t\t\t\t\turl: `/dashboard/communication/folder/${encodeURIComponent(folder.slug)}`,\n\t\t\t\t\tfolderId: folder.id, // Include ID for delete functionality\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t// Add any additional labels from counts (legacy support)\n\tif (counts) {\n\t\tObject.keys(counts).forEach((key) => {\n\t\t\tif (\n\t\t\t\t![\"all\", \"inbox\", \"drafts\", \"sent\", \"archive\", \"snoozed\", \"spam\", \"trash\", \"starred\"].includes(key) &&\n\t\t\t\t!labelItems.some((item) => item.url.includes(key))\n\t\t\t) {\n\t\t\t\tconst count = counts[key];\n\t\t\t\tlabelItems.push({\n\t\t\t\t\ttitle: key,\n\t\t\t\t\ticon: Tag,\n\t\t\t\t\tbadge: count && count > 0 ? count : undefined,\n\t\t\t\t\turl: `/dashboard/communication/label/${encodeURIComponent(key.toLowerCase())}`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"MY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=inbox\",\n\t\t\t\t\t\ticon: Inbox,\n\t\t\t\t\t\tbadge: counts?.personal_inbox && counts.personal_inbox > 0 ? counts.personal_inbox : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\tbadge: counts?.personal_sent && counts.personal_sent > 0 ? counts.personal_sent : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Drafts\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=drafts\",\n\t\t\t\t\t\ticon: File,\n\t\t\t\t\t\tbadge: counts?.personal_drafts && counts.personal_drafts > 0 ? counts.personal_drafts : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Starred\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=starred\",\n\t\t\t\t\t\ticon: Star,\n\t\t\t\t\t\tbadge: counts?.personal_starred && counts.personal_starred > 0 ? counts.personal_starred : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\tbadge: counts?.personal_archive && counts.personal_archive > 0 ? counts.personal_archive : undefined,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"COMPANY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=support\",\n\t\t\t\t\t\ticon: HelpCircle,\n\t\t\t\t\t\tbadge: counts?.company_support && counts.company_support > 0 ? counts.company_support : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=sales\",\n\t\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\t\tbadge: counts?.company_sales && counts.company_sales > 0 ? counts.company_sales : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=billing\",\n\t\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\t\tbadge: counts?.company_billing && counts.company_billing > 0 ? counts.company_billing : undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=general\",\n\t\t\t\t\t\ticon: Info,\n\t\t\t\t\t\tbadge: counts?.company_general && counts.company_general > 0 ? counts.company_general : undefined,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: {\n\t\t\tlabel: \"New email\",\n\t\t\ticon: Plus,\n\t\t\thref: \"/dashboard/communication/email?compose=true\",\n\t\t},\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: labelItems.map((item) => ({\n\t\t\t\t\t...item,\n\t\t\t\t\turl: item.url,\n\t\t\t\t\tfolderId: item.folderId,\n\t\t\t\t\t// onDelete will be added by EmailSidebar component\n\t\t\t\t})),\n\t\t\t\taddButton: (\n\t\t\t\t\t<CreateFolderDialog\n\t\t\t\t\t\tonFolderCreated={() => {\n\t\t\t\t\t\t\t// Trigger sidebar refresh\n\t\t\t\t\t\t\twindow.dispatchEvent(new Event(\"folder-created\"));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true, // Keep Folders section open by default\n\t\t\t},\n\t\t],\n\t};\n}\n\n/**\n * Default email sidebar configuration (for backwards compatibility)\n * @deprecated Use getEmailSidebarConfig() directly instead\n */\nconst emailSidebarConfig = getEmailSidebarConfig();\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/communication-store.ts"],"sourcesContent":["/**\n * Communication Store - Zustand state management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Automatic re-renders only for components using this state\n * - Shares active tab state between page and toolbar\n * - Tracks selected message for detail view navigation\n */\n\nimport { create } from \"zustand\";\n\ntype MessageType = \"email\" | \"sms\" | \"phone\" | \"ticket\";\ntype ActiveFilter = MessageType | \"all\";\ntype ComposerType = \"email\" | \"sms\" | \"call\";\ntype MessageDirection = \"sent\" | \"received\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type ComposerContext = {\n\tcustomerId?: string;\n\tcustomerName?: string;\n\temail?: string;\n\tphone?: string;\n\tthreadId?: string;\n\tjobId?: string;\n\tpropertyId?: string;\n\tinvoiceId?: string;\n\testimateId?: string;\n};\n\nexport type PendingMessage = {\n\tid: string;\n\tconversationId: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus: MessageStatus;\n\tcontactName?: string;\n\tcontactNumber?: string;\n\tcontactNumberRaw?: string;\n\tcustomerId?: string;\n};\n\ntype PendingMessageMap = Record<string, PendingMessage[]>;\n\ntype CommunicationStore = {\n\tactiveFilter: ActiveFilter;\n\tsetActiveFilter: (filter: ActiveFilter) => void;\n\tselectedMessageId: string | null;\n\tsetSelectedMessageId: (id: string | null) => void;\n\tisDetailView: boolean;\n\tsetIsDetailView: (isDetailView: boolean) => void;\n\tactiveThreadId: string | null;\n\tsetActiveThreadId: (threadId: string | null) => void;\n\tcomposer: {\n\t\ttype: ComposerType | null;\n\t\tcontext?: ComposerContext;\n\t};\n\topenComposer: (type: ComposerType, context?: ComposerContext) => void;\n\tcloseComposer: () => void;\n\tpendingMessages: PendingMessageMap;\n\taddPendingMessage: (message: PendingMessage) => void;\n\tresolvePendingMessage: (\n\t\tconversationId: string,\n\t\tmessageId: string,\n\t\treplacement?: PendingMessage,\n\t) => void;\n\tresetPendingMessages: (conversationId: string) => void;\n};\n\nexport const useCommunicationStore = create<CommunicationStore>((set) => ({\n\tactiveFilter: \"all\",\n\tsetActiveFilter: (filter) => set({ activeFilter: filter }),\n\tselectedMessageId: null,\n\tsetSelectedMessageId: (id) => set({ selectedMessageId: id }),\n\tisDetailView: false,\n\tsetIsDetailView: (isDetailView) => set({ isDetailView }),\n\tactiveThreadId: null,\n\tsetActiveThreadId: (threadId) => set({ activeThreadId: threadId }),\n\tcomposer: {\n\t\ttype: null,\n\t},\n\topenComposer: (type, context) => {\n\t\tconsole.log(\"ðŸŽ­ openComposer called:\", { type, context });\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\ttype,\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t},\n\tcloseComposer: () =>\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\ttype: null,\n\t\t\t},\n\t\t}),\n\tpendingMessages: {},\n\taddPendingMessage: (message) =>\n\t\tset((state) => {\n\t\t\tconst existing = state.pendingMessages[message.conversationId] ?? [];\n\t\t\treturn {\n\t\t\t\tpendingMessages: {\n\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t[message.conversationId]: [...existing, message],\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n\tresolvePendingMessage: (conversationId, messageId, replacement) =>\n\t\tset((state) => {\n\t\t\tconst current = state.pendingMessages[conversationId] ?? [];\n\t\t\tconst filtered = current.filter((msg) => msg.id !== messageId);\n\t\t\tif (replacement) {\n\t\t\t\tfiltered.push(replacement);\n\t\t\t}\n\t\t\tconst nextPending =\n\t\t\t\tfiltered.length > 0\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t\t\t[conversationId]: filtered,\n\t\t\t\t\t\t}\n\t\t\t\t\t: Object.fromEntries(\n\t\t\t\t\t\t\tObject.entries(state.pendingMessages).filter(\n\t\t\t\t\t\t\t\t([key]) => key !== conversationId,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\treturn {\n\t\t\t\tpendingMessages: nextPending,\n\t\t\t};\n\t\t}),\n\tresetPendingMessages: (conversationId) =>\n\t\tset((state) => {\n\t\t\tif (!state.pendingMessages[conversationId]) {\n\t\t\t\treturn { pendingMessages: state.pendingMessages };\n\t\t\t}\n\t\t\tconst nextEntries = Object.entries(state.pendingMessages).filter(\n\t\t\t\t([key]) => key !== conversationId,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tpendingMessages: Object.fromEntries(nextEntries),\n\t\t\t};\n\t\t}),\n}));\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;AAED;;AA4DO,MAAM,wBAAwB,IAAA,+VAAM,EAAqB,CAAC,MAAQ,CAAC;QACzE,cAAc;QACd,iBAAiB,CAAC,SAAW,IAAI;gBAAE,cAAc;YAAO;QACxD,mBAAmB;QACnB,sBAAsB,CAAC,KAAO,IAAI;gBAAE,mBAAmB;YAAG;QAC1D,cAAc;QACd,iBAAiB,CAAC,eAAiB,IAAI;gBAAE;YAAa;QACtD,gBAAgB;QAChB,mBAAmB,CAAC,WAAa,IAAI;gBAAE,gBAAgB;YAAS;QAChE,UAAU;YACT,MAAM;QACP;QACA,cAAc,CAAC,MAAM;YACpB,QAAQ,GAAG,CAAC,2BAA2B;gBAAE;gBAAM;YAAQ;YACvD,IAAI;gBACH,UAAU;oBACT;oBACA;gBACD;YACD;QACD;QACA,eAAe,IACd,IAAI;gBACH,UAAU;oBACT,MAAM;gBACP;YACD;QACD,iBAAiB,CAAC;QAClB,mBAAmB,CAAC,UACnB,IAAI,CAAC;gBACJ,MAAM,WAAW,MAAM,eAAe,CAAC,QAAQ,cAAc,CAAC,IAAI,EAAE;gBACpE,OAAO;oBACN,iBAAiB;wBAChB,GAAG,MAAM,eAAe;wBACxB,CAAC,QAAQ,cAAc,CAAC,EAAE;+BAAI;4BAAU;yBAAQ;oBACjD;gBACD;YACD;QACD,uBAAuB,CAAC,gBAAgB,WAAW,cAClD,IAAI,CAAC;gBACJ,MAAM,UAAU,MAAM,eAAe,CAAC,eAAe,IAAI,EAAE;gBAC3D,MAAM,WAAW,QAAQ,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;gBACpD,IAAI,aAAa;oBAChB,SAAS,IAAI,CAAC;gBACf;gBACA,MAAM,cACL,SAAS,MAAM,GAAG,IACf;oBACA,GAAG,MAAM,eAAe;oBACxB,CAAC,eAAe,EAAE;gBACnB,IACC,OAAO,WAAW,CAClB,OAAO,OAAO,CAAC,MAAM,eAAe,EAAE,MAAM,CAC3C,CAAC,CAAC,IAAI,GAAK,QAAQ;gBAGxB,OAAO;oBACN,iBAAiB;gBAClB;YACD;QACD,sBAAsB,CAAC,iBACtB,IAAI,CAAC;gBACJ,IAAI,CAAC,MAAM,eAAe,CAAC,eAAe,EAAE;oBAC3C,OAAO;wBAAE,iBAAiB,MAAM,eAAe;oBAAC;gBACjD;gBACA,MAAM,cAAc,OAAO,OAAO,CAAC,MAAM,eAAe,EAAE,MAAM,CAC/D,CAAC,CAAC,IAAI,GAAK,QAAQ;gBAEpB,OAAO;oBACN,iBAAiB,OAAO,WAAW,CAAC;gBACrC;YACD;IACF,CAAC"}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/communication/text-sidebar-config.tsx"],"sourcesContent":["import { Archive, MessageSquare, Plus, Send, Users } from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\ntype SmsFolderCounts = {\n\tinbox?: number;\n\tsent?: number;\n\tarchive?: number;\n\ttrash?: number;\n\t[label: string]: number | undefined;\n};\n\n/**\n * Get SMS sidebar configuration with dynamic folder counts\n * Similar to getEmailSidebarConfig but for SMS\n */\nexport function getSmsSidebarConfig(counts?: SmsFolderCounts): CommunicationSidebarConfig {\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"Core\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=inbox\",\n\t\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\t\tbadge: counts?.inbox ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\tbadge: counts?.sent ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\tbadge: counts?.archive ?? 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Groups\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"All Groups\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=groups\",\n\t\t\t\t\t\ticon: Users,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: {\n\t\t\tlabel: \"New text\",\n\t\t\ticon: Plus,\n\t\t\tonClick: () => {\n\t\t\t\t// This will be handled by the TextSidebar component\n\t\t\t\t// which will open the RecipientSelector\n\t\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\t\twindow.dispatchEvent(new CustomEvent(\"open-recipient-selector\", { \n\t\t\t\t\t\tdetail: { type: \"sms\" } \n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: [],\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true, // Keep Folders section open by default (matching email page)\n\t\t\t},\n\t\t],\n\t};\n}\n\n\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeO,SAAS,oBAAoB,MAAwB;IAC3D,OAAO;QACN,WAAW;YACV;gBACC,OAAO;gBACP,OAAO;oBACN;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,gUAAa;wBACnB,OAAO,QAAQ,SAAS;oBACzB;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,iSAAI;wBACV,OAAO,QAAQ,QAAQ;oBACxB;oBACA;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,0SAAO;wBACb,OAAO,QAAQ,WAAW;oBAC3B;iBACA;YACF;YACA;gBACC,OAAO;gBACP,OAAO;oBACN;wBACC,OAAO;wBACP,KAAK;wBACL,MAAM,oSAAK;oBACZ;iBACA;YACF;SACA;QACD,eAAe;YACd,OAAO;YACP,MAAM,iSAAI;YACV,SAAS;gBACR,oDAAoD;gBACpD,wCAAwC;gBACxC,wCAAmC;oBAClC,OAAO,aAAa,CAAC,IAAI,YAAY,2BAA2B;wBAC/D,QAAQ;4BAAE,MAAM;wBAAM;oBACvB;gBACD;YACD;QACD;QACA,oBAAoB;YACnB;gBACC,OAAO;gBACP,OAAO,EAAE;gBACT,YAAY;gBACZ,cAAc;gBACd,aAAa;YACd;SACA;IACF;AACD"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/communication/teams-sidebar-config.tsx"],"sourcesContent":["import { Hash, MessageCircle, Plus, Users } from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\n/**\n * Teams sidebar configuration\n * Defines the navigation structure and actions for the teams communication page\n */\nexport const teamsSidebarConfig: CommunicationSidebarConfig = {\n\tnavGroups: [\n\t\t{\n\t\t\tlabel: \"Channels\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=general\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=sales\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=support\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Technicians\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=technicians\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Management\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=management\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tprimaryAction: {\n\t\tlabel: \"New channel\",\n\t\ticon: Plus,\n\t\tonClick: () => {\n\t\t\t// TODO: Implement new channel action\n\t\t\tconsole.log(\"New channel clicked\");\n\t\t},\n\t},\n};\n\n\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAOO,MAAM,qBAAiD;IAC7D,WAAW;QACV;YACC,OAAO;YACP,OAAO;gBACN;oBACC,OAAO;oBACP,KAAK;oBACL,MAAM,iSAAI;gBACX;gBACA;oBACC,OAAO;oBACP,KAAK;oBACL,MAAM,iSAAI;gBACX;gBACA;oBACC,OAAO;oBACP,KAAK;oBACL,MAAM,iSAAI;gBACX;gBACA;oBACC,OAAO;oBACP,KAAK;oBACL,MAAM,iSAAI;gBACX;gBACA;oBACC,OAAO;oBACP,KAAK;oBACL,MAAM,iSAAI;gBACX;aACA;QACF;KACA;IACD,eAAe;QACd,OAAO;QACP,MAAM,iSAAI;QACV,SAAS;YACR,qCAAqC;YACrC,QAAQ,GAAG,CAAC;QACb;IACD;AACD"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/chat-store.ts"],"sourcesContent":["// import type { UIMessage } from \"ai\";\nimport { create } from \"zustand\";\nimport { immer } from \"zustand/middleware/immer\";\n\n// Constants\nconst RANDOM_STRING_BASE = 36;\nconst RANDOM_STRING_LENGTH = 9;\n\n// Types\nexport type Message = {\n\tid: string;\n\trole: \"user\" | \"assistant\";\n\tcontent: string;\n\ttimestamp: Date;\n};\n\n// Stable empty array reference for selectors (prevents infinite loop with getSnapshot)\nconst EMPTY_MESSAGES: Message[] = [];\n\nexport type Chat = {\n\tid: string;\n\ttitle: string;\n\tcreatedAt: Date;\n\tmessages: Message[];\n};\n\nexport type ChatState = {\n\tchats: Chat[];\n\tactiveChatId: string | null;\n\tisLoading: boolean;\n\terror: string | null;\n};\n\nexport type ChatActions = {\n\t// Chat management\n\tcreateChat: (title?: string) => string;\n\tdeleteChat: (chatId: string) => void;\n\tsetActiveChat: (chatId: string | null) => void;\n\tupdateChatTitle: (chatId: string, title: string) => void;\n\tcleanupDuplicateChats: () => void;\n\n\t// Message management\n\taddMessage: (chatId: string, message: Message) => void;\n\tupdateMessage: (chatId: string, messageId: string, content: string) => void;\n\tdeleteMessage: (chatId: string, messageId: string) => void;\n\tclearMessages: (chatId: string) => void;\n\n\t// UI state\n\tsetLoading: (loading: boolean) => void;\n\tsetError: (error: string | null) => void;\n\n\t// Utility\n\tgetActiveChat: () => Chat | null;\n\tgetChatMessages: (chatId: string) => Message[];\n\treset: () => void;\n};\n\nexport type ChatStore = ChatState & ChatActions;\n\nconst initialState: ChatState = {\n\tchats: [],\n\tactiveChatId: null,\n\tisLoading: false,\n\terror: null,\n};\n\nexport const useChatStore = create<ChatStore>()(\n\timmer((set, get) => ({\n\t\t...initialState,\n\n\t\t// Chat management\n\t\tcreateChat: (title = \"New Chat\") => {\n\t\t\tlet chatId: string;\n\t\t\tconst state = get();\n\n\t\t\t// Ensure unique ID by checking against existing chats\n\t\t\tdo {\n\t\t\t\tchatId = `chat-${Date.now()}-${Math.random().toString(RANDOM_STRING_BASE).substr(2, RANDOM_STRING_LENGTH)}`;\n\t\t\t} while (state.chats.some((chat) => chat.id === chatId));\n\n\t\t\tset((storeState) => {\n\t\t\t\tstoreState.chats.push({\n\t\t\t\t\tid: chatId,\n\t\t\t\t\ttitle,\n\t\t\t\t\tcreatedAt: new Date(),\n\t\t\t\t\tmessages: [],\n\t\t\t\t});\n\t\t\t\tstoreState.activeChatId = chatId;\n\t\t\t});\n\t\t\treturn chatId;\n\t\t},\n\n\t\tdeleteChat: (chatId: string) => {\n\t\t\tset((state) => {\n\t\t\t\tconst index = state.chats.findIndex((c) => c.id === chatId);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tstate.chats.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (state.activeChatId === chatId) {\n\t\t\t\t\tstate.activeChatId = state.chats[0]?.id ?? null;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tsetActiveChat: (chatId: string | null) => {\n\t\t\tset((state) => {\n\t\t\t\tstate.activeChatId = chatId;\n\t\t\t});\n\t\t},\n\n\t\tupdateChatTitle: (chatId: string, title: string) => {\n\t\t\tset((state) => {\n\t\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\t\tif (chat) {\n\t\t\t\t\tchat.title = title;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tcleanupDuplicateChats: () => {\n\t\t\tset((state) => {\n\t\t\t\tconst seen = new Set<string>();\n\t\t\t\tconst uniqueChats: Chat[] = [];\n\n\t\t\t\t// Keep only the first occurrence of each chat ID\n\t\t\t\tfor (const chat of state.chats) {\n\t\t\t\t\tif (!seen.has(chat.id)) {\n\t\t\t\t\t\tseen.add(chat.id);\n\t\t\t\t\t\tuniqueChats.push(chat);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate.chats = uniqueChats;\n\n\t\t\t\t// If active chat was removed due to duplication, set to first chat or null\n\t\t\t\tif (\n\t\t\t\t\tstate.activeChatId &&\n\t\t\t\t\t!uniqueChats.some((chat) => chat.id === state.activeChatId)\n\t\t\t\t) {\n\t\t\t\t\tstate.activeChatId = uniqueChats[0]?.id ?? null;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// Message management\n\t\taddMessage: (chatId: string, message: Message) => {\n\t\t\tset((state) => {\n\t\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\t\tif (chat) {\n\t\t\t\t\tchat.messages.push(message);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateMessage: (chatId: string, messageId: string, content: string) => {\n\t\t\tset((state) => {\n\t\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\t\tif (chat) {\n\t\t\t\t\tconst message = chat.messages.find((m) => m.id === messageId);\n\t\t\t\t\tif (message) {\n\t\t\t\t\t\tmessage.content = content;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tdeleteMessage: (chatId: string, messageId: string) => {\n\t\t\tset((state) => {\n\t\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\t\tif (chat) {\n\t\t\t\t\tconst index = chat.messages.findIndex((m) => m.id === messageId);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tchat.messages.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tclearMessages: (chatId: string) => {\n\t\t\tset((state) => {\n\t\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\t\tif (chat) {\n\t\t\t\t\tchat.messages = [];\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// UI state\n\t\tsetLoading: (loading: boolean) => {\n\t\t\tset((state) => {\n\t\t\t\tstate.isLoading = loading;\n\t\t\t});\n\t\t},\n\n\t\tsetError: (error: string | null) => {\n\t\t\tset((state) => {\n\t\t\t\tstate.error = error;\n\t\t\t});\n\t\t},\n\n\t\t// Utility\n\t\tgetActiveChat: () => {\n\t\t\tconst state = get();\n\t\t\treturn state.chats.find((c) => c.id === state.activeChatId) ?? null;\n\t\t},\n\n\t\tgetChatMessages: (chatId: string) => {\n\t\t\tconst state = get();\n\t\t\tconst chat = state.chats.find((c) => c.id === chatId);\n\t\t\treturn chat?.messages ?? [];\n\t\t},\n\n\t\treset: () => {\n\t\t\tset(initialState);\n\t\t},\n\t})),\n);\n\n// Selectors\nexport const chatSelectors = {\n\tchats: (state: ChatStore) => state.chats,\n\tactiveChat: (state: ChatStore) =>\n\t\tstate.chats.find((c) => c.id === state.activeChatId) ?? null,\n\tactiveChatId: (state: ChatStore) => state.activeChatId,\n\tmessages: (state: ChatStore) => {\n\t\tconst activeChat = state.chats.find((c) => c.id === state.activeChatId);\n\t\treturn activeChat?.messages ?? EMPTY_MESSAGES;\n\t},\n\tisLoading: (state: ChatStore) => state.isLoading,\n\terror: (state: ChatStore) => state.error,\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 665, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/pricebook/category-tree-shared.ts"],"sourcesContent":["/**\n * Shared Category Tree Utilities\n *\n * Pure utility functions for building and navigating category trees.\n * Can be imported by both server and client code.\n */\n\nimport type { CategoryNode } from \"@/components/pricebook/drill-down-view\";\n\nexport type DatabaseCategory = {\n\tid: string;\n\tname: string;\n\tslug: string;\n\tparent_id: string | null;\n\tpath: string;\n\tlevel: number;\n\tsort_order: number;\n\titem_count: number;\n\tdescendant_item_count: number;\n};\n\n/**\n * Build hierarchical category tree from flat list\n */\nexport function buildCategoryTree(\n\tcategories: DatabaseCategory[],\n): CategoryNode[] {\n\t// Create a map for quick lookup\n\tconst categoryMap = new Map<\n\t\tstring,\n\t\tCategoryNode & { parent_id: string | null }\n\t>();\n\n\t// First pass: Create all nodes\n\tcategories.forEach((cat) => {\n\t\tcategoryMap.set(cat.id, {\n\t\t\tname: cat.name,\n\t\t\tcount: cat.descendant_item_count, // Use descendant count for tree display\n\t\t\timageUrl: undefined, // Could be added to schema later\n\t\t\tchildren: [],\n\t\t\tparent_id: cat.parent_id,\n\t\t});\n\t});\n\n\t// Second pass: Build tree structure\n\tconst rootNodes: CategoryNode[] = [];\n\n\tcategoryMap.forEach((node, _id) => {\n\t\tif (node.parent_id === null) {\n\t\t\t// Root level category\n\t\t\tconst { parent_id, ...cleanNode } = node;\n\t\t\trootNodes.push(cleanNode);\n\t\t} else {\n\t\t\t// Child category - add to parent's children\n\t\t\tconst parent = categoryMap.get(node.parent_id);\n\t\t\tif (parent?.children) {\n\t\t\t\tconst { parent_id, ...cleanNode } = node;\n\t\t\t\tparent.children.push(cleanNode);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn rootNodes;\n}\n\n/**\n * Get categories at a specific path level\n * Example: [\"HVAC\", \"Heating\"] returns children of HVAC > Heating\n */\nexport function getCategoriesAtPath(\n\ttree: CategoryNode[],\n\tpath: string[],\n): CategoryNode[] {\n\tlet current = tree;\n\n\tfor (const segment of path) {\n\t\tconst found = current.find((cat) => cat.name === segment);\n\t\tif (!found?.children) {\n\t\t\treturn [];\n\t\t}\n\t\tcurrent = found.children;\n\t}\n\n\treturn current;\n}\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;AAmBM,SAAS,kBACf,UAA8B;IAE9B,gCAAgC;IAChC,MAAM,cAAc,IAAI;IAKxB,+BAA+B;IAC/B,WAAW,OAAO,CAAC,CAAC;QACnB,YAAY,GAAG,CAAC,IAAI,EAAE,EAAE;YACvB,MAAM,IAAI,IAAI;YACd,OAAO,IAAI,qBAAqB;YAChC,UAAU;YACV,UAAU,EAAE;YACZ,WAAW,IAAI,SAAS;QACzB;IACD;IAEA,oCAAoC;IACpC,MAAM,YAA4B,EAAE;IAEpC,YAAY,OAAO,CAAC,CAAC,MAAM;QAC1B,IAAI,KAAK,SAAS,KAAK,MAAM;YAC5B,sBAAsB;YACtB,MAAM,EAAE,SAAS,EAAE,GAAG,WAAW,GAAG;YACpC,UAAU,IAAI,CAAC;QAChB,OAAO;YACN,4CAA4C;YAC5C,MAAM,SAAS,YAAY,GAAG,CAAC,KAAK,SAAS;YAC7C,IAAI,QAAQ,UAAU;gBACrB,MAAM,EAAE,SAAS,EAAE,GAAG,WAAW,GAAG;gBACpC,OAAO,QAAQ,CAAC,IAAI,CAAC;YACtB;QACD;IACD;IAEA,OAAO;AACR;AAMO,SAAS,oBACf,IAAoB,EACpB,IAAc;IAEd,IAAI,UAAU;IAEd,KAAK,MAAM,WAAW,KAAM;QAC3B,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,KAAK;QACjD,IAAI,CAAC,OAAO,UAAU;YACrB,OAAO,EAAE;QACV;QACA,UAAU,MAAM,QAAQ;IACzB;IAEA,OAAO;AACR"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/pricebook/category-tree-client.ts"],"sourcesContent":["/**\n * Client-Side Category Tree Functions\n *\n * Functions for fetching and building category trees on the client.\n * Uses browser-side Supabase client.\n */\n\nimport { createClient as createBrowserClient } from \"@/lib/supabase/client\";\nimport {\n\tbuildCategoryTree,\n\ttype DatabaseCategory,\n} from \"./category-tree-shared\";\n\n/**\n * Fetch all categories for the current user's company (client-side)\n */\nasync function fetchCategoriesClient(): Promise<DatabaseCategory[]> {\n\tconst supabase = createBrowserClient();\n\n\tif (!supabase) {\n\t\treturn [];\n\t}\n\n\tconst { data: categories, error } = await supabase\n\t\t.from(\"price_book_categories\")\n\t\t.select(\n\t\t\t\"id, name, slug, parent_id, path, level, sort_order, item_count, descendant_item_count\",\n\t\t)\n\t\t.eq(\"is_active\", true)\n\t\t.order(\"level\", { ascending: true })\n\t\t.order(\"sort_order\", { ascending: true });\n\n\tif (error) {\n\t\treturn [];\n\t}\n\n\treturn categories || [];\n}\n\n/**\n * Fetch and build complete category tree (client-side)\n */\nexport async function getCategoryTreeClient() {\n\tconst categories = await fetchCategoriesClient();\n\treturn buildCategoryTree(categories);\n}\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAED;AACA;;;AAKA;;CAEC,GACD,eAAe;IACd,MAAM,WAAW,IAAA,wJAAmB;IAEpC,IAAI,CAAC,UAAU;QACd,OAAO,EAAE;IACV;IAEA,MAAM,EAAE,MAAM,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM,SACxC,IAAI,CAAC,yBACL,MAAM,CACN,yFAEA,EAAE,CAAC,aAAa,MAChB,KAAK,CAAC,SAAS;QAAE,WAAW;IAAK,GACjC,KAAK,CAAC,cAAc;QAAE,WAAW;IAAK;IAExC,IAAI,OAAO;QACV,OAAO,EAAE;IACV;IAEA,OAAO,cAAc,EAAE;AACxB;AAKO,eAAe;IACrB,MAAM,aAAa,MAAM;IACzB,OAAO,IAAA,4LAAiB,EAAC;AAC1B"}},
    {"offset": {"line": 766, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/pricebook/utils.ts"],"sourcesContent":["/**\n * Price Book Utilities\n *\n * Shared helper functions for price book navigation and URL handling\n * Prevents duplication across components\n */\n\n/**\n * Convert category name to URL-safe slug\n * Example: \"Heat Pumps\" -> \"heat-pumps\"\n */\nfunction categoryToSlug(name: string): string {\n\treturn name.toLowerCase().replace(/\\s+/g, \"-\");\n}\n\n/**\n * Convert URL slug back to category name\n * Example: \"heat-pumps\" -> \"Heat Pumps\"\n */\nfunction slugToCategory(slug: string): string {\n\treturn slug\n\t\t.split(\"-\")\n\t\t.map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n\t\t.join(\" \");\n}\n\n/**\n * Build category URL from navigation path\n * Example: [\"HVAC\", \"Heating\"] -> \"/dashboard/work/pricebook/c/hvac/heating\"\n */\nexport function buildCategoryUrl(path: string[]): string {\n\tif (path.length === 0) {\n\t\treturn \"/dashboard/work/pricebook\";\n\t}\n\treturn `/dashboard/work/pricebook/c/${path.map(categoryToSlug).join(\"/\")}`;\n}\n\n/**\n * Parse category path from URL slug array\n * Example: [\"hvac\", \"heating\"] -> [\"HVAC\", \"Heating\"]\n */\nfunction parseCategoryPath(slugs: string[]): string[] {\n\treturn slugs.map(slugToCategory);\n}\n"],"names":[],"mappings":"AAAA;;;;;CAKC,GAED;;;CAGC;;;;AACD,SAAS,eAAe,IAAY;IACnC,OAAO,KAAK,WAAW,GAAG,OAAO,CAAC,QAAQ;AAC3C;AAEA;;;CAGC,GACD,SAAS,eAAe,IAAY;IACnC,OAAO,KACL,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,OAAS,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,IACxD,IAAI,CAAC;AACR;AAMO,SAAS,iBAAiB,IAAc;IAC9C,IAAI,KAAK,MAAM,KAAK,GAAG;QACtB,OAAO;IACR;IACA,OAAO,CAAC,4BAA4B,EAAE,KAAK,GAAG,CAAC,gBAAgB,IAAI,CAAC,MAAM;AAC3E;AAEA;;;CAGC,GACD,SAAS,kBAAkB,KAAe;IACzC,OAAO,MAAM,GAAG,CAAC;AAClB"}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/pricebook-store.ts"],"sourcesContent":["/**\n * Price Book Store - Zustand State Management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Selective subscriptions prevent unnecessary re-renders\n * - Organized in /src/lib/stores/ directory\n */\n\nimport { create } from \"zustand\";\nimport { devtools, persist } from \"zustand/middleware\";\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type SupplierName =\n\t| \"ferguson\"\n\t| \"fastenal\"\n\t| \"grainger\"\n\t| \"hdsupply\"\n\t| \"pace\"\n\t| \"winsupply\";\n\nexport type SyncStatus =\n\t| \"connected\"\n\t| \"syncing\"\n\t| \"error\"\n\t| \"disconnected\"\n\t| \"warning\";\n\nexport type SupplierStatus = {\n\tname: SupplierName;\n\tdisplayName: string;\n\tstatus: SyncStatus;\n\tlastSyncAt: Date | null;\n\titemsImported: number;\n\terrorMessage: string | null;\n\tapiEnabled: boolean;\n};\n\nexport type ItemTypeFilter = \"all\" | \"service\" | \"material\" | \"equipment\";\n\nexport type CategoryFilter = {\n\tcategory: string | null;\n\tsubcategory: string | null;\n};\n\n// Navigation path for drill-down (new)\nexport type NavigationPath = string[]; // e.g., [\"HVAC\", \"Heating\", \"Furnaces\"]\n\nexport type PriceBookFilter = {\n\tsearch: string;\n\tcategories: string[];\n\titemTypes: (\"service\" | \"material\" | \"package\")[];\n\tstatusFilter: \"all\" | \"active\" | \"inactive\";\n\tsupplierFilter: SupplierName[];\n\tpriceRange: { min: number | null; max: number | null };\n\tmarginRange: { min: number | null; max: number | null };\n};\n\nexport type ViewMode = \"grid\" | \"table\" | \"list\";\n\n// ============================================================================\n// Store State Type\n// ============================================================================\n\ntype PriceBookStore = {\n\t// View State\n\tviewMode: ViewMode;\n\tselectedItemIds: string[];\n\n\t// Navigation State (new drill-down system)\n\tnavigationPath: NavigationPath;\n\n\t// Filters (legacy - keeping for compatibility)\n\tfilters: PriceBookFilter;\n\n\t// Drill-down Filters (legacy - keeping for compatibility)\n\titemTypeFilter: ItemTypeFilter;\n\tcategoryFilter: CategoryFilter;\n\n\t// Supplier Status\n\tsuppliers: SupplierStatus[];\n\n\t// Sidebar State\n\tsidebarCollapsed: boolean;\n\tactiveSection: string | null;\n\n\t// Actions - View Mode\n\tsetViewMode: (mode: ViewMode) => void;\n\ttoggleSelection: (id: string) => void;\n\tselectAll: (ids: string[]) => void;\n\tclearSelection: () => void;\n\n\t// Actions - Navigation (new drill-down system)\n\tnavigateTo: (segment: string) => void;\n\tnavigateToPath: (path: NavigationPath) => void;\n\tnavigateBack: () => void;\n\tnavigateToRoot: () => void;\n\tgetCurrentLevel: () => string | null;\n\tisAtRoot: () => boolean;\n\n\t// Actions - Filters\n\tsetSearch: (search: string) => void;\n\tsetCategories: (categories: string[]) => void;\n\tsetItemTypes: (types: (\"service\" | \"material\" | \"package\")[]) => void;\n\tsetStatusFilter: (status: \"all\" | \"active\" | \"inactive\") => void;\n\tsetSupplierFilter: (suppliers: SupplierName[]) => void;\n\tsetPriceRange: (min: number | null, max: number | null) => void;\n\tsetMarginRange: (min: number | null, max: number | null) => void;\n\tresetFilters: () => void;\n\n\t// Actions - Drill-down Filters (legacy - keeping for compatibility)\n\tsetItemTypeFilter: (type: ItemTypeFilter) => void;\n\tsetCategoryFilter: (\n\t\tcategory: string | null,\n\t\tsubcategory?: string | null,\n\t) => void;\n\tclearAllFilters: () => void;\n\thasActiveFilters: () => boolean;\n\tgetFilterSummary: () => string;\n\n\t// Actions - Suppliers\n\tupdateSupplierStatus: (\n\t\tname: SupplierName,\n\t\tupdates: Partial<SupplierStatus>,\n\t) => void;\n\tsyncSupplier: (name: SupplierName) => Promise<void>;\n\n\t// Actions - Sidebar\n\ttoggleSidebar: () => void;\n\tsetActiveSection: (section: string | null) => void;\n\n\t// Utility\n\treset: () => void;\n};\n\n// ============================================================================\n// Initial State\n// ============================================================================\n\nconst initialFilters: PriceBookFilter = {\n\tsearch: \"\",\n\tcategories: [],\n\titemTypes: [],\n\tstatusFilter: \"all\",\n\tsupplierFilter: [],\n\tpriceRange: { min: null, max: null },\n\tmarginRange: { min: null, max: null },\n};\n\nconst initialSuppliers: SupplierStatus[] = [\n\t{\n\t\tname: \"ferguson\",\n\t\tdisplayName: \"Ferguson Enterprises\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n\t{\n\t\tname: \"fastenal\",\n\t\tdisplayName: \"Fastenal\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n\t{\n\t\tname: \"grainger\",\n\t\tdisplayName: \"Grainger\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n\t{\n\t\tname: \"hdsupply\",\n\t\tdisplayName: \"HD Supply\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n\t{\n\t\tname: \"pace\",\n\t\tdisplayName: \"Pace Supply\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n\t{\n\t\tname: \"winsupply\",\n\t\tdisplayName: \"Winsupply\",\n\t\tstatus: \"disconnected\",\n\t\tlastSyncAt: null,\n\t\titemsImported: 0,\n\t\terrorMessage: null,\n\t\tapiEnabled: false,\n\t},\n];\n\nconst initialState = {\n\tviewMode: \"table\" as ViewMode,\n\tselectedItemIds: [],\n\tnavigationPath: [] as NavigationPath,\n\tfilters: initialFilters,\n\titemTypeFilter: \"all\" as ItemTypeFilter,\n\tcategoryFilter: { category: null, subcategory: null },\n\tsuppliers: initialSuppliers,\n\tsidebarCollapsed: false,\n\tactiveSection: null,\n};\n\n// ============================================================================\n// Create Store\n// ============================================================================\n\nexport const usePriceBookStore = create<PriceBookStore>()(\n\tdevtools(\n\t\tpersist(\n\t\t\t(set, get) => ({\n\t\t\t\t...initialState,\n\n\t\t\t\t// View Mode Actions\n\t\t\t\tsetViewMode: (mode) => set({ viewMode: mode }),\n\n\t\t\t\ttoggleSelection: (id) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tselectedItemIds: state.selectedItemIds.includes(id)\n\t\t\t\t\t\t\t? state.selectedItemIds.filter((itemId) => itemId !== id)\n\t\t\t\t\t\t\t: [...state.selectedItemIds, id],\n\t\t\t\t\t})),\n\n\t\t\t\tselectAll: (ids) => set({ selectedItemIds: ids }),\n\n\t\t\t\tclearSelection: () => set({ selectedItemIds: [] }),\n\n\t\t\t\t// Navigation Actions (new drill-down system)\n\t\t\t\tnavigateTo: (segment) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tnavigationPath: [...state.navigationPath, segment],\n\t\t\t\t\t})),\n\n\t\t\t\tnavigateToPath: (path) => set({ navigationPath: path }),\n\n\t\t\t\tnavigateBack: () =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tnavigationPath: state.navigationPath.slice(0, -1),\n\t\t\t\t\t})),\n\n\t\t\t\tnavigateToRoot: () => set({ navigationPath: [] }),\n\n\t\t\t\tgetCurrentLevel: () => {\n\t\t\t\t\tconst state = get();\n\t\t\t\t\treturn state.navigationPath.length > 0\n\t\t\t\t\t\t? state.navigationPath.at(-1)\n\t\t\t\t\t\t: null;\n\t\t\t\t},\n\n\t\t\t\tisAtRoot: () => get().navigationPath.length === 0,\n\n\t\t\t\t// Filter Actions\n\t\t\t\tsetSearch: (search) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, search },\n\t\t\t\t\t})),\n\n\t\t\t\tsetCategories: (categories) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, categories },\n\t\t\t\t\t})),\n\n\t\t\t\tsetItemTypes: (itemTypes) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, itemTypes },\n\t\t\t\t\t})),\n\n\t\t\t\tsetStatusFilter: (statusFilter) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, statusFilter },\n\t\t\t\t\t})),\n\n\t\t\t\tsetSupplierFilter: (supplierFilter) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, supplierFilter },\n\t\t\t\t\t})),\n\n\t\t\t\tsetPriceRange: (min, max) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, priceRange: { min, max } },\n\t\t\t\t\t})),\n\n\t\t\t\tsetMarginRange: (min, max) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tfilters: { ...state.filters, marginRange: { min, max } },\n\t\t\t\t\t})),\n\n\t\t\t\tresetFilters: () => set({ filters: initialFilters }),\n\n\t\t\t\t// Drill-down Filter Actions\n\t\t\t\tsetItemTypeFilter: (itemTypeFilter) => set({ itemTypeFilter }),\n\n\t\t\t\tsetCategoryFilter: (category, subcategory = null) =>\n\t\t\t\t\tset({ categoryFilter: { category, subcategory } }),\n\n\t\t\t\tclearAllFilters: () =>\n\t\t\t\t\tset({\n\t\t\t\t\t\titemTypeFilter: \"all\",\n\t\t\t\t\t\tcategoryFilter: { category: null, subcategory: null },\n\t\t\t\t\t\tfilters: initialFilters,\n\t\t\t\t\t}),\n\n\t\t\t\thasActiveFilters: () => {\n\t\t\t\t\tconst state = get();\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstate.itemTypeFilter !== \"all\" ||\n\t\t\t\t\t\tstate.categoryFilter.category !== null ||\n\t\t\t\t\t\tstate.filters.search !== \"\"\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\tgetFilterSummary: () => {\n\t\t\t\t\tconst state = get();\n\t\t\t\t\tconst filters: string[] = [];\n\n\t\t\t\t\tif (state.itemTypeFilter !== \"all\") {\n\t\t\t\t\t\tfilters.push(state.itemTypeFilter);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.categoryFilter.subcategory) {\n\t\t\t\t\t\tfilters.push(\n\t\t\t\t\t\t\t`${state.categoryFilter.category} â€º ${state.categoryFilter.subcategory}`,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (state.categoryFilter.category) {\n\t\t\t\t\t\tfilters.push(state.categoryFilter.category);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.filters.search) {\n\t\t\t\t\t\tfilters.push(`\"${state.filters.search}\"`);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn filters.length > 0 ? filters.join(\" â€¢ \") : \"All Items\";\n\t\t\t\t},\n\n\t\t\t\t// Supplier Actions\n\t\t\t\tupdateSupplierStatus: (name, updates) =>\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tsuppliers: state.suppliers.map((supplier) =>\n\t\t\t\t\t\t\tsupplier.name === name ? { ...supplier, ...updates } : supplier,\n\t\t\t\t\t\t),\n\t\t\t\t\t})),\n\n\t\t\t\tsyncSupplier: async (name) => {\n\t\t\t\t\t// Set status to syncing\n\t\t\t\t\tget().updateSupplierStatus(name, { status: \"syncing\" });\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// TODO: Call actual API sync function\n\t\t\t\t\t\t// const result = await syncSupplierAPI(name);\n\n\t\t\t\t\t\t// Simulate API call for now\n\t\t\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 2000));\n\n\t\t\t\t\t\t// Update success status\n\t\t\t\t\t\tget().updateSupplierStatus(name, {\n\t\t\t\t\t\t\tstatus: \"connected\",\n\t\t\t\t\t\t\tlastSyncAt: new Date(),\n\t\t\t\t\t\t\terrorMessage: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t// Update error status\n\t\t\t\t\t\tget().updateSupplierStatus(name, {\n\t\t\t\t\t\t\tstatus: \"error\",\n\t\t\t\t\t\t\terrorMessage:\n\t\t\t\t\t\t\t\terror instanceof Error ? error.message : \"Sync failed\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// Sidebar Actions\n\t\t\t\ttoggleSidebar: () =>\n\t\t\t\t\tset((state) => ({ sidebarCollapsed: !state.sidebarCollapsed })),\n\n\t\t\t\tsetActiveSection: (section) => set({ activeSection: section }),\n\n\t\t\t\t// Reset\n\t\t\t\treset: () => set(initialState),\n\t\t\t}),\n\t\t\t{\n\t\t\t\tname: \"pricebook-storage\",\n\t\t\t\tpartialize: (state) => ({\n\t\t\t\t\tviewMode: state.viewMode,\n\t\t\t\t\tnavigationPath: state.navigationPath,\n\t\t\t\t\tfilters: state.filters,\n\t\t\t\t\tsidebarCollapsed: state.sidebarCollapsed,\n\t\t\t\t}),\n\t\t\t\t// PERFORMANCE: Skip hydration to prevent SSR mismatches\n\t\t\t\t// Allows Next.js to generate static pages without Zustand errors\n\t\t\t\tskipHydration: true,\n\t\t\t},\n\t\t),\n\t\t{ name: \"PriceBookStore\" },\n\t),\n);\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;AAED;AACA;;;AAgIA,+EAA+E;AAC/E,gBAAgB;AAChB,+EAA+E;AAE/E,MAAM,iBAAkC;IACvC,QAAQ;IACR,YAAY,EAAE;IACd,WAAW,EAAE;IACb,cAAc;IACd,gBAAgB,EAAE;IAClB,YAAY;QAAE,KAAK;QAAM,KAAK;IAAK;IACnC,aAAa;QAAE,KAAK;QAAM,KAAK;IAAK;AACrC;AAEA,MAAM,mBAAqC;IAC1C;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;IACA;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;IACA;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;IACA;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;IACA;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;IACA;QACC,MAAM;QACN,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,eAAe;QACf,cAAc;QACd,YAAY;IACb;CACA;AAED,MAAM,eAAe;IACpB,UAAU;IACV,iBAAiB,EAAE;IACnB,gBAAgB,EAAE;IAClB,SAAS;IACT,gBAAgB;IAChB,gBAAgB;QAAE,UAAU;QAAM,aAAa;IAAK;IACpD,WAAW;IACX,kBAAkB;IAClB,eAAe;AAChB;AAMO,MAAM,oBAAoB,IAAA,+VAAM,IACtC,IAAA,sWAAQ,EACP,IAAA,qWAAO,EACN,CAAC,KAAK,MAAQ,CAAC;QACd,GAAG,YAAY;QAEf,oBAAoB;QACpB,aAAa,CAAC,OAAS,IAAI;gBAAE,UAAU;YAAK;QAE5C,iBAAiB,CAAC,KACjB,IAAI,CAAC,QAAU,CAAC;oBACf,iBAAiB,MAAM,eAAe,CAAC,QAAQ,CAAC,MAC7C,MAAM,eAAe,CAAC,MAAM,CAAC,CAAC,SAAW,WAAW,MACpD;2BAAI,MAAM,eAAe;wBAAE;qBAAG;gBAClC,CAAC;QAEF,WAAW,CAAC,MAAQ,IAAI;gBAAE,iBAAiB;YAAI;QAE/C,gBAAgB,IAAM,IAAI;gBAAE,iBAAiB,EAAE;YAAC;QAEhD,6CAA6C;QAC7C,YAAY,CAAC,UACZ,IAAI,CAAC,QAAU,CAAC;oBACf,gBAAgB;2BAAI,MAAM,cAAc;wBAAE;qBAAQ;gBACnD,CAAC;QAEF,gBAAgB,CAAC,OAAS,IAAI;gBAAE,gBAAgB;YAAK;QAErD,cAAc,IACb,IAAI,CAAC,QAAU,CAAC;oBACf,gBAAgB,MAAM,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC;gBAChD,CAAC;QAEF,gBAAgB,IAAM,IAAI;gBAAE,gBAAgB,EAAE;YAAC;QAE/C,iBAAiB;YAChB,MAAM,QAAQ;YACd,OAAO,MAAM,cAAc,CAAC,MAAM,GAAG,IAClC,MAAM,cAAc,CAAC,EAAE,CAAC,CAAC,KACzB;QACJ;QAEA,UAAU,IAAM,MAAM,cAAc,CAAC,MAAM,KAAK;QAEhD,iBAAiB;QACjB,WAAW,CAAC,SACX,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE;oBAAO;gBACrC,CAAC;QAEF,eAAe,CAAC,aACf,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE;oBAAW;gBACzC,CAAC;QAEF,cAAc,CAAC,YACd,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE;oBAAU;gBACxC,CAAC;QAEF,iBAAiB,CAAC,eACjB,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE;oBAAa;gBAC3C,CAAC;QAEF,mBAAmB,CAAC,iBACnB,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE;oBAAe;gBAC7C,CAAC;QAEF,eAAe,CAAC,KAAK,MACpB,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE,YAAY;4BAAE;4BAAK;wBAAI;oBAAE;gBACvD,CAAC;QAEF,gBAAgB,CAAC,KAAK,MACrB,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBAAE,GAAG,MAAM,OAAO;wBAAE,aAAa;4BAAE;4BAAK;wBAAI;oBAAE;gBACxD,CAAC;QAEF,cAAc,IAAM,IAAI;gBAAE,SAAS;YAAe;QAElD,4BAA4B;QAC5B,mBAAmB,CAAC,iBAAmB,IAAI;gBAAE;YAAe;QAE5D,mBAAmB,CAAC,UAAU,cAAc,IAAI,GAC/C,IAAI;gBAAE,gBAAgB;oBAAE;oBAAU;gBAAY;YAAE;QAEjD,iBAAiB,IAChB,IAAI;gBACH,gBAAgB;gBAChB,gBAAgB;oBAAE,UAAU;oBAAM,aAAa;gBAAK;gBACpD,SAAS;YACV;QAED,kBAAkB;YACjB,MAAM,QAAQ;YACd,OACC,MAAM,cAAc,KAAK,SACzB,MAAM,cAAc,CAAC,QAAQ,KAAK,QAClC,MAAM,OAAO,CAAC,MAAM,KAAK;QAE3B;QAEA,kBAAkB;YACjB,MAAM,QAAQ;YACd,MAAM,UAAoB,EAAE;YAE5B,IAAI,MAAM,cAAc,KAAK,OAAO;gBACnC,QAAQ,IAAI,CAAC,MAAM,cAAc;YAClC;YAEA,IAAI,MAAM,cAAc,CAAC,WAAW,EAAE;gBACrC,QAAQ,IAAI,CACX,GAAG,MAAM,cAAc,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,cAAc,CAAC,WAAW,EAAE;YAE1E,OAAO,IAAI,MAAM,cAAc,CAAC,QAAQ,EAAE;gBACzC,QAAQ,IAAI,CAAC,MAAM,cAAc,CAAC,QAAQ;YAC3C;YAEA,IAAI,MAAM,OAAO,CAAC,MAAM,EAAE;gBACzB,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACzC;YAEA,OAAO,QAAQ,MAAM,GAAG,IAAI,QAAQ,IAAI,CAAC,SAAS;QACnD;QAEA,mBAAmB;QACnB,sBAAsB,CAAC,MAAM,UAC5B,IAAI,CAAC,QAAU,CAAC;oBACf,WAAW,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC,WAC/B,SAAS,IAAI,KAAK,OAAO;4BAAE,GAAG,QAAQ;4BAAE,GAAG,OAAO;wBAAC,IAAI;gBAEzD,CAAC;QAEF,cAAc,OAAO;YACpB,wBAAwB;YACxB,MAAM,oBAAoB,CAAC,MAAM;gBAAE,QAAQ;YAAU;YAErD,IAAI;gBACH,sCAAsC;gBACtC,8CAA8C;gBAE9C,4BAA4B;gBAC5B,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;gBAEnD,wBAAwB;gBACxB,MAAM,oBAAoB,CAAC,MAAM;oBAChC,QAAQ;oBACR,YAAY,IAAI;oBAChB,cAAc;gBACf;YACD,EAAE,OAAO,OAAO;gBACf,sBAAsB;gBACtB,MAAM,oBAAoB,CAAC,MAAM;oBAChC,QAAQ;oBACR,cACC,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBAC3C;YACD;QACD;QAEA,kBAAkB;QAClB,eAAe,IACd,IAAI,CAAC,QAAU,CAAC;oBAAE,kBAAkB,CAAC,MAAM,gBAAgB;gBAAC,CAAC;QAE9D,kBAAkB,CAAC,UAAY,IAAI;gBAAE,eAAe;YAAQ;QAE5D,QAAQ;QACR,OAAO,IAAM,IAAI;IAClB,CAAC,GACD;IACC,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACvB,UAAU,MAAM,QAAQ;YACxB,gBAAgB,MAAM,cAAc;YACpC,SAAS,MAAM,OAAO;YACtB,kBAAkB,MAAM,gBAAgB;QACzC,CAAC;IACD,wDAAwD;IACxD,iEAAiE;IACjE,eAAe;AAChB,IAED;IAAE,MAAM;AAAiB"}},
    {"offset": {"line": 1100, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/reporting-store.ts"],"sourcesContent":["/**\n * Reporting Store - Zustand State Management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Selective subscriptions prevent unnecessary re-renders\n * - Persisted to localStorage for custom reports\n */\n\nimport { create } from \"zustand\";\nimport { devtools, persist } from \"zustand/middleware\";\n\nexport type CustomReport = {\n\tid: string;\n\ttitle: string;\n\thref: string;\n\tdescription?: string;\n\tfilters?: Record<string, any>;\n\tcreatedAt: Date;\n\tupdatedAt: Date;\n};\n\ntype ReportingStore = {\n\t// State\n\tcustomReports: CustomReport[];\n\tactiveReportId: string | null;\n\tisCreatingReport: boolean;\n\n\t// Actions\n\tsetCustomReports: (reports: CustomReport[]) => void;\n\taddCustomReport: (\n\t\treport: Omit<CustomReport, \"id\" | \"createdAt\" | \"updatedAt\">,\n\t) => void;\n\tupdateCustomReport: (id: string, updates: Partial<CustomReport>) => void;\n\tdeleteCustomReport: (id: string) => void;\n\tsetActiveReport: (id: string | null) => void;\n\tsetIsCreatingReport: (isCreating: boolean) => void;\n\treset: () => void;\n};\n\n// Initial state\nconst initialState = {\n\tcustomReports: [\n\t\t{\n\t\t\tid: \"1\",\n\t\t\ttitle: \"Q1 2025 Revenue Deep Dive\",\n\t\t\thref: \"/dashboard/reporting/custom/q1-2025-revenue\",\n\t\t\tdescription: \"Comprehensive revenue analysis for Q1 2025\",\n\t\t\tcreatedAt: new Date(\"2025-01-15\"),\n\t\t\tupdatedAt: new Date(\"2025-01-15\"),\n\t\t},\n\t\t{\n\t\t\tid: \"2\",\n\t\t\ttitle: \"Top 10 Customers Analysis\",\n\t\t\thref: \"/dashboard/reporting/custom/top-10-customers\",\n\t\t\tdescription: \"Performance analysis of top 10 customers\",\n\t\t\tcreatedAt: new Date(\"2025-01-20\"),\n\t\t\tupdatedAt: new Date(\"2025-01-20\"),\n\t\t},\n\t\t{\n\t\t\tid: \"3\",\n\t\t\ttitle: \"Service Call Response Times\",\n\t\t\thref: \"/dashboard/reporting/custom/response-times\",\n\t\t\tdescription: \"Response time metrics across all service calls\",\n\t\t\tcreatedAt: new Date(\"2025-01-22\"),\n\t\t\tupdatedAt: new Date(\"2025-01-22\"),\n\t\t},\n\t],\n\tactiveReportId: null,\n\tisCreatingReport: false,\n};\n\n// Create store\nexport const useReportingStore = create<ReportingStore>()(\n\tdevtools(\n\t\tpersist(\n\t\t\t(set, _get) => ({\n\t\t\t\t...initialState,\n\n\t\t\t\tsetCustomReports: (reports) => set({ customReports: reports }),\n\n\t\t\t\taddCustomReport: (report) => {\n\t\t\t\t\tconst newReport: CustomReport = {\n\t\t\t\t\t\t...report,\n\t\t\t\t\t\tid: `custom-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n\t\t\t\t\t\tcreatedAt: new Date(),\n\t\t\t\t\t\tupdatedAt: new Date(),\n\t\t\t\t\t};\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tcustomReports: [...state.customReports, newReport],\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tupdateCustomReport: (id, updates) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tcustomReports: state.customReports.map((report) =>\n\t\t\t\t\t\t\treport.id === id\n\t\t\t\t\t\t\t\t? { ...report, ...updates, updatedAt: new Date() }\n\t\t\t\t\t\t\t\t: report,\n\t\t\t\t\t\t),\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tdeleteCustomReport: (id) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\tcustomReports: state.customReports.filter(\n\t\t\t\t\t\t\t(report) => report.id !== id,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tactiveReportId:\n\t\t\t\t\t\t\tstate.activeReportId === id ? null : state.activeReportId,\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tsetActiveReport: (id) => set({ activeReportId: id }),\n\n\t\t\t\tsetIsCreatingReport: (isCreating) =>\n\t\t\t\t\tset({ isCreatingReport: isCreating }),\n\n\t\t\t\treset: () => set(initialState),\n\t\t\t}),\n\t\t\t{\n\t\t\t\tname: \"reporting-storage\",\n\t\t\t\tpartialize: (state) => ({\n\t\t\t\t\tcustomReports: state.customReports,\n\t\t\t\t}),\n\t\t\t\t// PERFORMANCE: Skip hydration to prevent SSR mismatches\n\t\t\t\t// Allows Next.js to generate static pages without Zustand errors\n\t\t\t\tskipHydration: true,\n\t\t\t},\n\t\t),\n\t\t{ name: \"ReportingStore\" },\n\t),\n);\n\n// Selectors for optimized subscriptions\nexport const reportingSelectors = {\n\tcustomReports: (state: ReportingStore) => state.customReports,\n\tactiveReportId: (state: ReportingStore) => state.activeReportId,\n\tisCreatingReport: (state: ReportingStore) => state.isCreatingReport,\n\tgetReportById: (id: string) => (state: ReportingStore) =>\n\t\tstate.customReports.find((report) => report.id === id),\n};\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;AAED;AACA;;;AA8BA,gBAAgB;AAChB,MAAM,eAAe;IACpB,eAAe;QACd;YACC,IAAI;YACJ,OAAO;YACP,MAAM;YACN,aAAa;YACb,WAAW,IAAI,KAAK;YACpB,WAAW,IAAI,KAAK;QACrB;QACA;YACC,IAAI;YACJ,OAAO;YACP,MAAM;YACN,aAAa;YACb,WAAW,IAAI,KAAK;YACpB,WAAW,IAAI,KAAK;QACrB;QACA;YACC,IAAI;YACJ,OAAO;YACP,MAAM;YACN,aAAa;YACb,WAAW,IAAI,KAAK;YACpB,WAAW,IAAI,KAAK;QACrB;KACA;IACD,gBAAgB;IAChB,kBAAkB;AACnB;AAGO,MAAM,oBAAoB,IAAA,+VAAM,IACtC,IAAA,sWAAQ,EACP,IAAA,qWAAO,EACN,CAAC,KAAK,OAAS,CAAC;QACf,GAAG,YAAY;QAEf,kBAAkB,CAAC,UAAY,IAAI;gBAAE,eAAe;YAAQ;QAE5D,iBAAiB,CAAC;YACjB,MAAM,YAA0B;gBAC/B,GAAG,MAAM;gBACT,IAAI,CAAC,OAAO,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;gBACrE,WAAW,IAAI;gBACf,WAAW,IAAI;YAChB;YACA,IAAI,CAAC,QAAU,CAAC;oBACf,eAAe;2BAAI,MAAM,aAAa;wBAAE;qBAAU;gBACnD,CAAC;QACF;QAEA,oBAAoB,CAAC,IAAI;YACxB,IAAI,CAAC,QAAU,CAAC;oBACf,eAAe,MAAM,aAAa,CAAC,GAAG,CAAC,CAAC,SACvC,OAAO,EAAE,KAAK,KACX;4BAAE,GAAG,MAAM;4BAAE,GAAG,OAAO;4BAAE,WAAW,IAAI;wBAAO,IAC/C;gBAEL,CAAC;QACF;QAEA,oBAAoB,CAAC;YACpB,IAAI,CAAC,QAAU,CAAC;oBACf,eAAe,MAAM,aAAa,CAAC,MAAM,CACxC,CAAC,SAAW,OAAO,EAAE,KAAK;oBAE3B,gBACC,MAAM,cAAc,KAAK,KAAK,OAAO,MAAM,cAAc;gBAC3D,CAAC;QACF;QAEA,iBAAiB,CAAC,KAAO,IAAI;gBAAE,gBAAgB;YAAG;QAElD,qBAAqB,CAAC,aACrB,IAAI;gBAAE,kBAAkB;YAAW;QAEpC,OAAO,IAAM,IAAI;IAClB,CAAC,GACD;IACC,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACvB,eAAe,MAAM,aAAa;QACnC,CAAC;IACD,wDAAwD;IACxD,iEAAiE;IACjE,eAAe;AAChB,IAED;IAAE,MAAM;AAAiB;AAKpB,MAAM,qBAAqB;IACjC,eAAe,CAAC,QAA0B,MAAM,aAAa;IAC7D,gBAAgB,CAAC,QAA0B,MAAM,cAAc;IAC/D,kBAAkB,CAAC,QAA0B,MAAM,gBAAgB;IACnE,eAAe,CAAC,KAAe,CAAC,QAC/B,MAAM,aAAa,CAAC,IAAI,CAAC,CAAC,SAAW,OAAO,EAAE,KAAK;AACrD"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/job-details-layout-store.ts"],"sourcesContent":["/**\n * Job Details Layout Store - Zustand State Management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Selective subscriptions prevent unnecessary re-renders\n * - Organized in /src/lib/stores/ directory\n *\n * This store manages the customizable widget-based layout for job details pages.\n * Users can drag-and-drop widgets, resize them, and save their preferred layout.\n */\n\nimport { create } from \"zustand\";\nimport { devtools, persist } from \"zustand/middleware\";\n\n// ============================================================================\n// Widget Types and Definitions\n// ============================================================================\n\n/**\n * Available widget types for job details page\n */\nexport type JobWidgetType =\n\t// Core job information\n\t| \"job-header\"\n\t| \"job-financials\"\n\t| \"job-details\"\n\n\t// Property and customer\n\t| \"property-details\"\n\t| \"property-enrichment\"\n\t| \"customer-info\"\n\t| \"location-map\"\n\n\t// Financial\n\t| \"invoices\"\n\t| \"estimates\"\n\t| \"job-costing\"\n\t| \"profitability\"\n\t| \"payment-tracker\"\n\n\t// Project management\n\t| \"schedule\"\n\t| \"team-assignments\"\n\t| \"materials-list\"\n\t| \"equipment-list\"\n\t| \"purchase-orders\"\n\n\t// Documentation\n\t| \"photos\"\n\t| \"documents\"\n\t| \"permits\"\n\t| \"communications\"\n\t| \"activity-log\"\n\n\t// Industry-specific\n\t| \"hvac-equipment\"\n\t| \"plumbing-fixtures\"\n\t| \"electrical-panels\"\n\t| \"roofing-materials\"\n\t| \"landscape-zones\"\n\n\t// Analytics\n\t| \"time-tracking\"\n\t| \"labor-hours\"\n\t| \"material-costs\"\n\t| \"change-orders\";\n\n/**\n * Widget configuration\n */\nexport type JobWidget = {\n\tid: string;\n\ttype: JobWidgetType;\n\ttitle: string;\n\tdescription?: string;\n\n\t// Layout properties\n\tposition: {\n\t\tx: number; // Grid column position (0-based)\n\t\ty: number; // Grid row position (0-based)\n\t};\n\tsize: {\n\t\twidth: number; // 1 = half-width, 2+ = full-width\n\t\theight: number; // Height in rows (auto-flows with content)\n\t};\n\n\t// Widget behavior\n\tisVisible: boolean;\n\tisCollapsible: boolean; // Deprecated - no longer used\n\tisCollapsed: boolean; // Deprecated - no longer used\n\tisResizable: boolean; // Not implemented\n\tisDraggable: boolean;\n\n\t// Widget-specific settings\n\tsettings?: Record<string, unknown>;\n\t// PERFORMANCE: Skip hydration to prevent SSR mismatches\n\t// Allows Next.js to generate static pages without Zustand errors\n\tskipHydration?: true;\n};\n\n/**\n * Industry-specific preset layouts\n */\nexport type IndustryType =\n\t| \"hvac\"\n\t| \"plumbing\"\n\t| \"electrical\"\n\t| \"roofing\"\n\t| \"landscaping\"\n\t| \"general_contractor\"\n\t| \"remodeling\"\n\t| \"commercial\"\n\t| \"custom\";\n\n/**\n * Layout preset configuration\n */\nexport type LayoutPreset = {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tindustry: IndustryType;\n\twidgets: JobWidget[];\n\tthumbnail?: string;\n};\n\n// ============================================================================\n// Default Widget Configurations\n// ============================================================================\n\n/**\n * Default widget metadata\n */\nexport const WIDGET_METADATA: Record<\n\tJobWidgetType,\n\t{\n\t\ttitle: string;\n\t\tdescription: string;\n\t\tminSize: { width: number; height: number };\n\t\tdefaultSize: { width: number; height: number };\n\t\tmaxSize: { width: number; height: number };\n\t\tcategory:\n\t\t\t| \"core\"\n\t\t\t| \"financial\"\n\t\t\t| \"project\"\n\t\t\t| \"documentation\"\n\t\t\t| \"analytics\"\n\t\t\t| \"industry\";\n\t\tindustries: IndustryType[]; // Which industries typically use this\n\t}\n> = {\n\t// Core job information\n\t\"job-header\": {\n\t\ttitle: \"Job Header\",\n\t\tdescription: \"Job number, title, status, and priority\",\n\t\tminSize: { width: 4, height: 1 },\n\t\tdefaultSize: { width: 4, height: 1 },\n\t\tmaxSize: { width: 4, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-financials\": {\n\t\ttitle: \"Financial Summary\",\n\t\tdescription: \"Quick overview of job finances\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-details\": {\n\t\ttitle: \"Job Information\",\n\t\tdescription: \"Detailed job information and notes\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 2, height: 1 }, // Full-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Property and customer\n\t\"property-details\": {\n\t\ttitle: \"Property Details\",\n\t\tdescription: \"Basic property information\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"property-enrichment\": {\n\t\ttitle: \"Property Intelligence\",\n\t\tdescription: \"Enriched property data (ownership, permits, tax info)\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"customer-info\": {\n\t\ttitle: \"Customer Information\",\n\t\tdescription: \"Customer contact and billing details\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"location-map\": {\n\t\ttitle: \"Location Map\",\n\t\tdescription: \"Interactive map with property location\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Financial\n\tinvoices: {\n\t\ttitle: \"Invoices\",\n\t\tdescription: \"Job invoices and payment history\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\testimates: {\n\t\ttitle: \"Estimates\",\n\t\tdescription: \"Job estimates and quotes\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-costing\": {\n\t\ttitle: \"Job Costing\",\n\t\tdescription: \"Detailed cost breakdown by category\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tprofitability: {\n\t\ttitle: \"Profitability Analysis\",\n\t\tdescription: \"Profit margin and revenue analysis\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"payment-tracker\": {\n\t\ttitle: \"Payment Tracker\",\n\t\tdescription: \"Visual payment progress and reminders\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 2 },\n\t\tmaxSize: { width: 2, height: 3 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Project management\n\tschedule: {\n\t\ttitle: \"Schedule\",\n\t\tdescription: \"Job schedule and milestones\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"team-assignments\": {\n\t\ttitle: \"Team Assignments\",\n\t\tdescription: \"Assigned technicians and crew\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"materials-list\": {\n\t\ttitle: \"Materials List\",\n\t\tdescription: \"Required and used materials\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"equipment-list\": {\n\t\ttitle: \"Equipment List\",\n\t\tdescription: \"Equipment and tools needed\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"purchase-orders\": {\n\t\ttitle: \"Purchase Orders\",\n\t\tdescription: \"Material and equipment purchase orders\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Documentation\n\tphotos: {\n\t\ttitle: \"Photo Gallery\",\n\t\tdescription: \"Before, during, and after photos\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tdocuments: {\n\t\ttitle: \"Documents\",\n\t\tdescription: \"Contracts, specs, and files\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tpermits: {\n\t\ttitle: \"Permits\",\n\t\tdescription: \"Required permits and inspections\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tcommunications: {\n\t\ttitle: \"Communications\",\n\t\tdescription: \"Messages, emails, and notes\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"activity-log\": {\n\t\ttitle: \"Activity Log\",\n\t\tdescription: \"Timeline of all job activities\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Industry-specific\n\t\"hvac-equipment\": {\n\t\ttitle: \"HVAC Equipment\",\n\t\tdescription: \"Units, tonnage, and specifications\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"hvac\"],\n\t},\n\t\"plumbing-fixtures\": {\n\t\ttitle: \"Plumbing Fixtures\",\n\t\tdescription: \"Fixtures, piping, and connections\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"plumbing\"],\n\t},\n\t\"electrical-panels\": {\n\t\ttitle: \"Electrical Panels\",\n\t\tdescription: \"Panels, circuits, and load calculations\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"electrical\"],\n\t},\n\t\"roofing-materials\": {\n\t\ttitle: \"Roofing Materials\",\n\t\tdescription: \"Shingles, underlayment, and squares\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"roofing\"],\n\t},\n\t\"landscape-zones\": {\n\t\ttitle: \"Landscape Zones\",\n\t\tdescription: \"Planting zones and irrigation\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"landscaping\"],\n\t},\n\n\t// Analytics\n\t\"time-tracking\": {\n\t\ttitle: \"Time Tracking\",\n\t\tdescription: \"Labor hours and time on site\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"labor-hours\": {\n\t\ttitle: \"Labor Hours\",\n\t\tdescription: \"Detailed labor breakdown by crew\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"material-costs\": {\n\t\ttitle: \"Material Costs\",\n\t\tdescription: \"Actual vs estimated material costs\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"change-orders\": {\n\t\ttitle: \"Change Orders\",\n\t\tdescription: \"Scope changes and additional work\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n};\n\n// ============================================================================\n// Store State and Actions\n// ============================================================================\n\ntype JobDetailsLayoutStore = {\n\t// Current layout\n\twidgets: JobWidget[];\n\tindustry: IndustryType;\n\tversion: number; // Layout version for migrations\n\n\t// Layout management\n\taddWidget: (widgetType: JobWidgetType) => void;\n\tremoveWidget: (widgetId: string) => void;\n\tupdateWidget: (widgetId: string, updates: Partial<JobWidget>) => void;\n\tmoveWidget: (widgetId: string, position: { x: number; y: number }) => void;\n\tresizeWidget: (\n\t\twidgetId: string,\n\t\tsize: { width: number; height: number },\n\t) => void;\n\ttoggleWidgetVisibility: (widgetId: string) => void;\n\ttoggleWidgetCollapse: (widgetId: string) => void;\n\n\t// Preset management\n\tloadPreset: (preset: LayoutPreset) => void;\n\tsetIndustry: (industry: IndustryType) => void;\n\tresetToDefault: () => void;\n\n\t// Utility\n\tgetWidgetById: (widgetId: string) => JobWidget | undefined;\n\tgetVisibleWidgets: () => JobWidget[];\n};\n\n// ============================================================================\n// Create Store\n// ============================================================================\n\n// Version number for layout migrations\n// Increment this when making breaking changes to initialWidgets\n// v2: Added new Priority 1 widgets (12 total)\n// v3: Removed job-timeline widget (redundant - built into page)\n// v4: Completely removed job-timeline from metadata and renderer\nconst LAYOUT_VERSION = 4;\n\nconst initialWidgets: JobWidget[] = [\n\t// Default layout - comprehensive view with newly implemented widgets\n\t// Note: job-timeline removed - JobProcessIndicatorEditable is built into page\n\n\t// Row 1: Financials\n\t{\n\t\tid: \"financials\",\n\t\ttype: \"job-financials\",\n\t\ttitle: \"Financial Summary\",\n\t\tposition: { x: 0, y: 0 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"profitability\",\n\t\ttype: \"profitability\",\n\t\ttitle: \"Profitability Analysis\",\n\t\tposition: { x: 1, y: 0 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 2: Customer & Property\n\t{\n\t\tid: \"customer\",\n\t\ttype: \"customer-info\",\n\t\ttitle: \"Customer Information\",\n\t\tposition: { x: 0, y: 1 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"property-details\",\n\t\ttype: \"property-details\",\n\t\ttitle: \"Property Details\",\n\t\tposition: { x: 1, y: 1 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 3: Job Details\n\t{\n\t\tid: \"job-details\",\n\t\ttype: \"job-details\",\n\t\ttitle: \"Job Information\",\n\t\tposition: { x: 0, y: 2 },\n\t\tsize: { width: 2, height: 1 }, // Full-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 4: Schedule & Team\n\t{\n\t\tid: \"schedule\",\n\t\ttype: \"schedule\",\n\t\ttitle: \"Schedule\",\n\t\tposition: { x: 0, y: 3 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"team-assignments\",\n\t\ttype: \"team-assignments\",\n\t\ttitle: \"Team Assignments\",\n\t\tposition: { x: 1, y: 3 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 5: Materials & Permits\n\t{\n\t\tid: \"materials-list\",\n\t\ttype: \"materials-list\",\n\t\ttitle: \"Materials List\",\n\t\tposition: { x: 0, y: 4 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"permits\",\n\t\ttype: \"permits\",\n\t\ttitle: \"Permits\",\n\t\tposition: { x: 1, y: 4 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 6: Photos & Payments\n\t{\n\t\tid: \"photos\",\n\t\ttype: \"photos\",\n\t\ttitle: \"Photo Gallery\",\n\t\tposition: { x: 0, y: 5 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"payment-tracker\",\n\t\ttype: \"payment-tracker\",\n\t\ttitle: \"Payment Tracker\",\n\t\tposition: { x: 1, y: 5 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 7: Activity Log\n\t{\n\t\tid: \"activity-log\",\n\t\ttype: \"activity-log\",\n\t\ttitle: \"Activity Log\",\n\t\tposition: { x: 0, y: 6 },\n\t\tsize: { width: 2, height: 1 }, // Full-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n];\n\nexport const useJobDetailsLayoutStore = create<JobDetailsLayoutStore>()(\n\tdevtools(\n\t\tpersist(\n\t\t\t(set, get) => ({\n\t\t\t\twidgets: initialWidgets,\n\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\tversion: LAYOUT_VERSION,\n\n\t\t\t\taddWidget: (widgetType) => {\n\t\t\t\t\tconst metadata = WIDGET_METADATA[widgetType];\n\t\t\t\t\tconst newWidget: JobWidget = {\n\t\t\t\t\t\tid: `${widgetType}-${Date.now()}`,\n\t\t\t\t\t\ttype: widgetType,\n\t\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t\t\tposition: { x: 0, y: 0 }, // Will be auto-positioned\n\t\t\t\t\t\tsize: metadata.defaultSize,\n\t\t\t\t\t\tisVisible: true,\n\t\t\t\t\t\tisCollapsible: true,\n\t\t\t\t\t\tisCollapsed: false,\n\t\t\t\t\t\tisResizable: true,\n\t\t\t\t\t\tisDraggable: true,\n\t\t\t\t\t};\n\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: [...state.widgets, newWidget],\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tremoveWidget: (widgetId) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: state.widgets.filter((w) => w.id !== widgetId),\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tupdateWidget: (widgetId, updates) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: state.widgets.map((w) =>\n\t\t\t\t\t\t\tw.id === widgetId ? { ...w, ...updates } : w,\n\t\t\t\t\t\t),\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tmoveWidget: (widgetId, position) => {\n\t\t\t\t\tget().updateWidget(widgetId, { position });\n\t\t\t\t},\n\n\t\t\t\tresizeWidget: (widgetId, size) => {\n\t\t\t\t\tget().updateWidget(widgetId, { size });\n\t\t\t\t},\n\n\t\t\t\ttoggleWidgetVisibility: (widgetId) => {\n\t\t\t\t\tconst widget = get().getWidgetById(widgetId);\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\tget().updateWidget(widgetId, { isVisible: !widget.isVisible });\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\ttoggleWidgetCollapse: (widgetId) => {\n\t\t\t\t\tconst widget = get().getWidgetById(widgetId);\n\t\t\t\t\tif (widget?.isCollapsible) {\n\t\t\t\t\t\tget().updateWidget(widgetId, { isCollapsed: !widget.isCollapsed });\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tloadPreset: (preset) => {\n\t\t\t\t\tset({\n\t\t\t\t\t\twidgets: preset.widgets,\n\t\t\t\t\t\tindustry: preset.industry,\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsetIndustry: (industry) => {\n\t\t\t\t\tset({ industry });\n\t\t\t\t},\n\n\t\t\t\tresetToDefault: () => {\n\t\t\t\t\tset({\n\t\t\t\t\t\twidgets: initialWidgets,\n\t\t\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tgetWidgetById: (widgetId) =>\n\t\t\t\t\tget().widgets.find((w) => w.id === widgetId),\n\n\t\t\t\tgetVisibleWidgets: () => get().widgets.filter((w) => w.isVisible),\n\t\t\t}),\n\t\t\t{\n\t\t\t\tname: \"job-details-layout-storage-v2\", // v2: masonry grid with half/full width\n\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\tpartialize: (state) => ({\n\t\t\t\t\twidgets: state.widgets,\n\t\t\t\t\tindustry: state.industry,\n\t\t\t\t\tversion: state.version,\n\t\t\t\t}),\n\t\t\t\tmigrate: (persistedState: any, version: number) => {\n\t\t\t\t\t// If version mismatch, reset to default layout with new widgets\n\t\t\t\t\tif (version < LAYOUT_VERSION) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\twidgets: initialWidgets,\n\t\t\t\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn persistedState;\n\t\t\t\t},\n\t\t\t},\n\t\t),\n\t\t{ name: \"JobDetailsLayoutStore\" },\n\t),\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2424, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/layout/job-layout-presets.ts"],"sourcesContent":["/**\n * Job Details Layout Presets\n *\n * Pre-configured layouts for different construction industries.\n * Each preset is optimized for the specific needs of that trade.\n */\n\nimport type {\n\tIndustryType,\n\tJobWidget,\n\tLayoutPreset,\n} from \"@/lib/stores/job-details-layout-store\";\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Create a widget with default settings\n */\nfunction createWidget(\n\tid: string,\n\ttype: JobWidget[\"type\"],\n\ttitle: string,\n\tx: number,\n\ty: number,\n\twidth: number,\n\theight: number,\n\toptions: Partial<JobWidget> = {},\n): JobWidget {\n\treturn {\n\t\tid,\n\t\ttype,\n\t\ttitle,\n\t\tposition: { x, y },\n\t\tsize: { width, height },\n\t\tisVisible: true,\n\t\tisCollapsible: true,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t\t...options,\n\t} as JobWidget;\n}\n\n// ============================================================================\n// Industry Presets\n// ============================================================================\n\n/**\n * HVAC Contractor Layout\n * Focus: Equipment specs, system sizing, property details\n */\nconst hvacPreset: LayoutPreset = {\n\tid: \"hvac-preset\",\n\tname: \"HVAC Contractor\",\n\tdescription:\n\t\t\"Optimized for HVAC installation and repair jobs with equipment tracking\",\n\tindustry: \"hvac\",\n\twidgets: [\n\t\t// Row 1: Header (always first)\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\n\t\t// Row 2: Main content (Timeline is permanent at top of page)\n\t\tcreateWidget(\n\t\t\t\"hvac-equipment\",\n\t\t\t\"hvac-equipment\",\n\t\t\t\"HVAC Equipment\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\n\t\t// Row 5-7: Financial and details\n\t\tcreateWidget(\n\t\t\t\"job-financials\",\n\t\t\t\"job-financials\",\n\t\t\t\"Financial Summary\",\n\t\t\t0,\n\t\t\t4,\n\t\t\t1,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 1, 4, 1, 2),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 4, 2, 3),\n\n\t\t// Row 8-9: Photos and documents\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 1, 2),\n\t\tcreateWidget(\"customer-info\", \"customer-info\", \"Customer\", 3, 7, 1, 2),\n\t],\n};\n\n/**\n * Plumbing Contractor Layout\n * Focus: Fixtures, permits, property details\n */\nconst plumbingPreset: LayoutPreset = {\n\tid: \"plumbing-preset\",\n\tname: \"Plumbing Contractor\",\n\tdescription: \"Optimized for plumbing jobs with fixture and permit tracking\",\n\tindustry: \"plumbing\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"plumbing-fixtures\",\n\t\t\t\"plumbing-fixtures\",\n\t\t\t\"Plumbing Fixtures\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-details\",\n\t\t\t\"property-details\",\n\t\t\t\"Property Details\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 0, 4, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * Electrical Contractor Layout\n * Focus: Panels, circuits, permits, code compliance\n */\nconst electricalPreset: LayoutPreset = {\n\tid: \"electrical-preset\",\n\tname: \"Electrical Contractor\",\n\tdescription: \"Optimized for electrical work with panel and circuit tracking\",\n\tindustry: \"electrical\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"electrical-panels\",\n\t\t\t\"electrical-panels\",\n\t\t\t\"Electrical Panels\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 2, 2, 2, 2),\n\t\tcreateWidget(\n\t\t\t\"property-details\",\n\t\t\t\"property-details\",\n\t\t\t\"Property Details\",\n\t\t\t0,\n\t\t\t4,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * Roofing Contractor Layout\n * Focus: Materials, weather, photos\n */\nconst roofingPreset: LayoutPreset = {\n\tid: \"roofing-preset\",\n\tname: \"Roofing Contractor\",\n\tdescription: \"Optimized for roofing jobs with material and weather tracking\",\n\tindustry: \"roofing\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"roofing-materials\",\n\t\t\t\"roofing-materials\",\n\t\t\t\"Roofing Materials\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 4, 2, 3),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 4, 2, 3),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 2, 2),\n\t],\n};\n\n/**\n * Landscaping Contractor Layout\n * Focus: Zones, materials, property details\n */\nconst landscapingPreset: LayoutPreset = {\n\tid: \"landscaping-preset\",\n\tname: \"Landscaping Contractor\",\n\tdescription:\n\t\t\"Optimized for landscaping projects with zone and material tracking\",\n\tindustry: \"landscaping\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"landscape-zones\",\n\t\t\t\"landscape-zones\",\n\t\t\t\"Landscape Zones\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"location-map\", \"location-map\", \"Location Map\", 2, 2, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 0, 4, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * General Contractor Layout\n * Focus: Comprehensive overview with all key information\n */\nconst generalContractorPreset: LayoutPreset = {\n\tid: \"general-contractor-preset\",\n\tname: \"General Contractor\",\n\tdescription: \"Comprehensive layout for general construction projects\",\n\tindustry: \"general_contractor\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 0, 2, 2, 3),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t3,\n\t\t),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 0, 5, 2, 2),\n\t\tcreateWidget(\"profitability\", \"profitability\", \"Profitability\", 2, 5, 2, 2),\n\t\tcreateWidget(\"schedule\", \"schedule\", \"Schedule\", 0, 7, 2, 2),\n\t\tcreateWidget(\"team-assignments\", \"team-assignments\", \"Team\", 2, 7, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 0, 9, 2, 2),\n\t\tcreateWidget(\"documents\", \"documents\", \"Documents\", 2, 9, 2, 2),\n\t],\n};\n\n/**\n * Remodeling Contractor Layout\n * Focus: Before/after photos, change orders, detailed costing\n */\nconst remodelingPreset: LayoutPreset = {\n\tid: \"remodeling-preset\",\n\tname: \"Remodeling Contractor\",\n\tdescription: \"Optimized for remodeling projects with detailed photo tracking\",\n\tindustry: \"remodeling\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 2, 2, 3),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 2, 2, 3),\n\t\tcreateWidget(\"change-orders\", \"change-orders\", \"Change Orders\", 0, 5, 2, 2),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 2, 5, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 2, 2),\n\t],\n};\n\n/**\n * Commercial Construction Layout\n * Focus: Complex project management, multiple teams, detailed tracking\n */\nconst commercialPreset: LayoutPreset = {\n\tid: \"commercial-preset\",\n\tname: \"Commercial Construction\",\n\tdescription: \"Comprehensive layout for large commercial projects\",\n\tindustry: \"commercial\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 0, 2, 2, 3),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t3,\n\t\t),\n\t\tcreateWidget(\"schedule\", \"schedule\", \"Project Schedule\", 0, 5, 2, 2),\n\t\tcreateWidget(\"team-assignments\", \"team-assignments\", \"Teams\", 2, 5, 2, 2),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 0, 7, 2, 2),\n\t\tcreateWidget(\"profitability\", \"profitability\", \"Profitability\", 2, 7, 2, 2),\n\t\tcreateWidget(\n\t\t\t\"purchase-orders\",\n\t\t\t\"purchase-orders\",\n\t\t\t\"Purchase Orders\",\n\t\t\t0,\n\t\t\t9,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 2, 9, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 0, 11, 2, 2),\n\t\tcreateWidget(\"documents\", \"documents\", \"Documents\", 2, 11, 2, 2),\n\t],\n};\n\n// ============================================================================\n// Export All Presets\n// ============================================================================\n\nexport const ALL_PRESETS: LayoutPreset[] = [\n\thvacPreset,\n\tplumbingPreset,\n\telectricalPreset,\n\troofingPreset,\n\tlandscapingPreset,\n\tgeneralContractorPreset,\n\tremodelingPreset,\n\tcommercialPreset,\n];\n\n/**\n * Get preset by industry type\n */\nfunction getPresetByIndustry(\n\tindustry: IndustryType,\n): LayoutPreset | undefined {\n\treturn ALL_PRESETS.find((preset) => preset.industry === industry);\n}\n\n/**\n * Get all presets for a specific category\n */\nfunction getPresetsByCategory(\n\tcategory: \"residential\" | \"commercial\" | \"specialty\",\n): LayoutPreset[] {\n\tconst residentialIndustries: IndustryType[] = [\n\t\t\"hvac\",\n\t\t\"plumbing\",\n\t\t\"electrical\",\n\t\t\"roofing\",\n\t\t\"landscaping\",\n\t\t\"remodeling\",\n\t];\n\tconst commercialIndustries: IndustryType[] = [\n\t\t\"commercial\",\n\t\t\"general_contractor\",\n\t];\n\n\tif (category === \"residential\") {\n\t\treturn ALL_PRESETS.filter((preset) =>\n\t\t\tresidentialIndustries.includes(preset.industry),\n\t\t);\n\t}\n\n\tif (category === \"commercial\") {\n\t\treturn ALL_PRESETS.filter((preset) =>\n\t\t\tcommercialIndustries.includes(preset.industry),\n\t\t);\n\t}\n\n\treturn ALL_PRESETS;\n}\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAQD,+EAA+E;AAC/E,mBAAmB;AACnB,+EAA+E;AAE/E;;CAEC,GACD,SAAS,aACR,EAAU,EACV,IAAuB,EACvB,KAAa,EACb,CAAS,EACT,CAAS,EACT,KAAa,EACb,MAAc,EACd,UAA8B,CAAC,CAAC;IAEhC,OAAO;QACN;QACA;QACA;QACA,UAAU;YAAE;YAAG;QAAE;QACjB,MAAM;YAAE;YAAO;QAAO;QACtB,WAAW;QACX,eAAe;QACf,aAAa;QACb,aAAa;QACb,aAAa;QACb,GAAG,OAAO;IACX;AACD;AAEA,+EAA+E;AAC/E,mBAAmB;AACnB,+EAA+E;AAE/E;;;CAGC,GACD,MAAM,aAA2B;IAChC,IAAI;IACJ,MAAM;IACN,aACC;IACD,UAAU;IACV,SAAS;QACR,+BAA+B;QAC/B,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QAEA,6DAA6D;QAC7D,aACC,kBACA,kBACA,kBACA,GACA,GACA,GACA;QAED,aACC,uBACA,uBACA,yBACA,GACA,GACA,GACA;QAGD,iCAAiC;QACjC,aACC,kBACA,kBACA,qBACA,GACA,GACA,GACA;QAED,aAAa,eAAe,eAAe,eAAe,GAAG,GAAG,GAAG;QACnE,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;QAEvE,gCAAgC;QAChC,aAAa,UAAU,UAAU,iBAAiB,GAAG,GAAG,GAAG;QAC3D,aAAa,WAAW,WAAW,WAAW,GAAG,GAAG,GAAG;QACvD,aAAa,iBAAiB,iBAAiB,YAAY,GAAG,GAAG,GAAG;KACpE;AACF;AAEA;;;CAGC,GACD,MAAM,iBAA+B;IACpC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aACC,qBACA,qBACA,qBACA,GACA,GACA,GACA;QAED,aACC,oBACA,oBACA,oBACA,GACA,GACA,GACA;QAED,aAAa,WAAW,WAAW,yBAAyB,GAAG,GAAG,GAAG;QACrE,aAAa,kBAAkB,kBAAkB,aAAa,GAAG,GAAG,GAAG;QACvE,aAAa,kBAAkB,kBAAkB,cAAc,GAAG,GAAG,GAAG;QACxE,aAAa,UAAU,UAAU,UAAU,GAAG,GAAG,GAAG;KACpD;AACF;AAEA;;;CAGC,GACD,MAAM,mBAAiC;IACtC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aACC,qBACA,qBACA,qBACA,GACA,GACA,GACA;QAED,aAAa,WAAW,WAAW,yBAAyB,GAAG,GAAG,GAAG;QACrE,aACC,oBACA,oBACA,oBACA,GACA,GACA,GACA;QAED,aAAa,kBAAkB,kBAAkB,aAAa,GAAG,GAAG,GAAG;QACvE,aAAa,kBAAkB,kBAAkB,cAAc,GAAG,GAAG,GAAG;QACxE,aAAa,UAAU,UAAU,UAAU,GAAG,GAAG,GAAG;KACpD;AACF;AAEA;;;CAGC,GACD,MAAM,gBAA8B;IACnC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aACC,qBACA,qBACA,qBACA,GACA,GACA,GACA;QAED,aACC,uBACA,uBACA,yBACA,GACA,GACA,GACA;QAED,aAAa,UAAU,UAAU,iBAAiB,GAAG,GAAG,GAAG;QAC3D,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;QACvE,aAAa,kBAAkB,kBAAkB,cAAc,GAAG,GAAG,GAAG;QACxE,aAAa,WAAW,WAAW,WAAW,GAAG,GAAG,GAAG;KACvD;AACF;AAEA;;;CAGC,GACD,MAAM,oBAAkC;IACvC,IAAI;IACJ,MAAM;IACN,aACC;IACD,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aACC,mBACA,mBACA,mBACA,GACA,GACA,GACA;QAED,aAAa,gBAAgB,gBAAgB,gBAAgB,GAAG,GAAG,GAAG;QACtE,aAAa,kBAAkB,kBAAkB,aAAa,GAAG,GAAG,GAAG;QACvE,aAAa,UAAU,UAAU,UAAU,GAAG,GAAG,GAAG;QACpD,aAAa,kBAAkB,kBAAkB,cAAc,GAAG,GAAG,GAAG;QACxE,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;KACvE;AACF;AAEA;;;CAGC,GACD,MAAM,0BAAwC;IAC7C,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;QACvE,aACC,uBACA,uBACA,yBACA,GACA,GACA,GACA;QAED,aAAa,eAAe,eAAe,eAAe,GAAG,GAAG,GAAG;QACnE,aAAa,iBAAiB,iBAAiB,iBAAiB,GAAG,GAAG,GAAG;QACzE,aAAa,YAAY,YAAY,YAAY,GAAG,GAAG,GAAG;QAC1D,aAAa,oBAAoB,oBAAoB,QAAQ,GAAG,GAAG,GAAG;QACtE,aAAa,UAAU,UAAU,UAAU,GAAG,GAAG,GAAG;QACpD,aAAa,aAAa,aAAa,aAAa,GAAG,GAAG,GAAG;KAC7D;AACF;AAEA;;;CAGC,GACD,MAAM,mBAAiC;IACtC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aAAa,UAAU,UAAU,iBAAiB,GAAG,GAAG,GAAG;QAC3D,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;QACvE,aAAa,iBAAiB,iBAAiB,iBAAiB,GAAG,GAAG,GAAG;QACzE,aAAa,eAAe,eAAe,eAAe,GAAG,GAAG,GAAG;QACnE,aAAa,kBAAkB,kBAAkB,aAAa,GAAG,GAAG,GAAG;QACvE,aAAa,WAAW,WAAW,WAAW,GAAG,GAAG,GAAG;KACvD;AACF;AAEA;;;CAGC,GACD,MAAM,mBAAiC;IACtC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,UAAU;IACV,SAAS;QACR,aAAa,UAAU,cAAc,cAAc,GAAG,GAAG,GAAG,GAAG;YAC9D,eAAe;YACf,aAAa;YACb,aAAa;QACd;QACA,aAAa,eAAe,eAAe,mBAAmB,GAAG,GAAG,GAAG;QACvE,aACC,uBACA,uBACA,yBACA,GACA,GACA,GACA;QAED,aAAa,YAAY,YAAY,oBAAoB,GAAG,GAAG,GAAG;QAClE,aAAa,oBAAoB,oBAAoB,SAAS,GAAG,GAAG,GAAG;QACvE,aAAa,eAAe,eAAe,eAAe,GAAG,GAAG,GAAG;QACnE,aAAa,iBAAiB,iBAAiB,iBAAiB,GAAG,GAAG,GAAG;QACzE,aACC,mBACA,mBACA,mBACA,GACA,GACA,GACA;QAED,aAAa,WAAW,WAAW,yBAAyB,GAAG,GAAG,GAAG;QACrE,aAAa,UAAU,UAAU,UAAU,GAAG,IAAI,GAAG;QACrD,aAAa,aAAa,aAAa,aAAa,GAAG,IAAI,GAAG;KAC9D;AACF;AAMO,MAAM,cAA8B;IAC1C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACA;AAED;;CAEC,GACD,SAAS,oBACR,QAAsB;IAEtB,OAAO,YAAY,IAAI,CAAC,CAAC,SAAW,OAAO,QAAQ,KAAK;AACzD;AAEA;;CAEC,GACD,SAAS,qBACR,QAAoD;IAEpD,MAAM,wBAAwC;QAC7C;QACA;QACA;QACA;QACA;QACA;KACA;IACD,MAAM,uBAAuC;QAC5C;QACA;KACA;IAED,IAAI,aAAa,eAAe;QAC/B,OAAO,YAAY,MAAM,CAAC,CAAC,SAC1B,sBAAsB,QAAQ,CAAC,OAAO,QAAQ;IAEhD;IAEA,IAAI,aAAa,cAAc;QAC9B,OAAO,YAAY,MAAM,CAAC,CAAC,SAC1B,qBAAqB,QAAQ,CAAC,OAAO,QAAQ;IAE/C;IAEA,OAAO;AACR"}},
    {"offset": {"line": 2695, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/utils/icon-registry.ts"],"sourcesContent":["/**\n * Icon Registry - Dynamic Icon Exports\n *\n * Performance-optimized icon registry using Next.js dynamic imports.\n * Each icon is code-split into a separate chunk and loaded on demand.\n *\n * Benefits:\n * - Reduces initial bundle by ~300-900KB (from 63 upfront imports)\n * - Icons load only when needed for current page\n * - Automatic code splitting via Next.js\n * - Drop-in replacement for lucide-react imports\n *\n * Usage:\n * // Instead of:\n * import { Home, Settings } from \"lucide-react\";\n *\n * // Use:\n * import { Home, Settings } from \"@/lib/utils/icon-registry\";\n */\n\nimport dynamic from \"next/dynamic\";\n\n// Each icon is dynamically imported and code-split\nexport const Home = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Home),\n);\nexport const Settings = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Settings),\n);\nexport const Users = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Users),\n);\nexport const User = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.User),\n);\nexport const UserPlus = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.UserPlus),\n);\nexport const Mail = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Mail),\n);\nexport const MailOpen = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MailOpen),\n);\nexport const Phone = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Phone),\n);\nexport const MessageSquare = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MessageSquare),\n);\nexport const Calendar = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Calendar),\n);\nexport const ClipboardList = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ClipboardList),\n);\nexport const FileText = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileText),\n);\nexport const FileSignature = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileSignature),\n);\nexport const FileSpreadsheet = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileSpreadsheet),\n);\nexport const FileEdit = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileEdit),\n);\nexport const Receipt = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Receipt),\n);\nexport const Inbox = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Inbox),\n);\nexport const Archive = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Archive),\n);\nexport const Trash = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Trash),\n);\nexport const Star = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Star),\n);\nexport const Hash = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Hash),\n);\nexport const Ticket = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Ticket),\n);\nexport const Wrench = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Wrench),\n);\nexport const ShieldCheck = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShieldCheck),\n);\nexport const ShieldAlert = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShieldAlert),\n);\nexport const Shield = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Shield),\n);\nexport const BookOpen = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BookOpen),\n);\nexport const Book = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Book),\n);\nexport const Box = dynamic(() => import(\"lucide-react\").then((mod) => mod.Box));\nexport const Package = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Package),\n);\nexport const DollarSign = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.DollarSign),\n);\nexport const CreditCard = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.CreditCard),\n);\nexport const TrendingUp = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.TrendingUp),\n);\nexport const BarChart = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BarChart),\n);\nexport const Target = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Target),\n);\nexport const Trophy = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Trophy),\n);\nexport const BadgeCheck = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BadgeCheck),\n);\nexport const Sparkles = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Sparkles),\n);\nexport const Zap = dynamic(() => import(\"lucide-react\").then((mod) => mod.Zap));\nexport const Globe = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Globe),\n);\nexport const MapPin = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MapPin),\n);\nexport const Building2 = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Building2),\n);\nexport const Briefcase = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Briefcase),\n);\nexport const Calculator = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Calculator),\n);\nexport const Clock = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Clock),\n);\nexport const Camera = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Camera),\n);\nexport const QrCode = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.QrCode),\n);\nexport const Search = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Search),\n);\nexport const Tag = dynamic(() => import(\"lucide-react\").then((mod) => mod.Tag));\nexport const List = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.List),\n);\nexport const CheckCircle2 = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.CheckCircle2),\n);\nexport const ArrowLeft = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowLeft),\n);\nexport const ArrowUpFromLine = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowUpFromLine),\n);\nexport const ArrowDownToLine = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowDownToLine),\n);\nexport const Megaphone = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Megaphone),\n);\nexport const Palette = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Palette),\n);\nexport const Paperclip = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Paperclip),\n);\nexport const ShoppingCart = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShoppingCart),\n);\nexport const GraduationCap = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.GraduationCap),\n);\nexport const Bug = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bug));\nexport const X = dynamic(() => import(\"lucide-react\").then((mod) => mod.X));\nexport const Bell = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Bell),\n);\nexport const Sliders = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Sliders),\n);\nexport const UserCog = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.UserCog),\n);\nexport const Repeat = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Repeat),\n);\nexport const Wallet = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Wallet),\n);\nexport const Workflow = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Workflow),\n);\nexport const Database = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Database),\n);\nconst Lock = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Lock),\n);\nconst KeyRound = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.KeyRound),\n);\nconst Heart = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Heart),\n);\nconst Gift = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Gift),\n);\nconst Folder = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Folder),\n);\nconst Store = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Store),\n);\nconst PiggyBank = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.PiggyBank),\n);\nconst Landmark = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Landmark),\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3697, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/toolbar-actions-store.ts"],"sourcesContent":["/**\n * Toolbar Actions Store\n *\n * Manages dynamic toolbar actions for detail pages\n * Allows server components to pass actions through client components to the toolbar\n */\n\nimport type { ReactNode } from \"react\";\nimport { create } from \"zustand\";\n\ntype ToolbarActionsState = {\n\t/** Map of pathname to actions */\n\tactions: Record<string, ReactNode>;\n\n\t/** Set actions for a specific route */\n\tsetActions: (pathname: string, actions: ReactNode) => void;\n\n\t/** Clear actions for a specific route */\n\tclearActions: (pathname: string) => void;\n\n\t/** Clear all actions */\n\tclearAll: () => void;\n};\n\nexport const useToolbarActionsStore = create<ToolbarActionsState>((set) => ({\n\tactions: {},\n\n\tsetActions: (pathname, actions) =>\n\t\tset((state) => ({\n\t\t\tactions: {\n\t\t\t\t...state.actions,\n\t\t\t\t[pathname]: actions,\n\t\t\t},\n\t\t})),\n\n\tclearActions: (pathname) =>\n\t\tset((state) => {\n\t\t\tconst newActions = { ...state.actions };\n\t\t\tdelete newActions[pathname];\n\t\t\treturn { actions: newActions };\n\t\t}),\n\n\tclearAll: () => set({ actions: {} }),\n}));\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAGD;;AAgBO,MAAM,yBAAyB,IAAA,+VAAM,EAAsB,CAAC,MAAQ,CAAC;QAC3E,SAAS,CAAC;QAEV,YAAY,CAAC,UAAU,UACtB,IAAI,CAAC,QAAU,CAAC;oBACf,SAAS;wBACR,GAAG,MAAM,OAAO;wBAChB,CAAC,SAAS,EAAE;oBACb;gBACD,CAAC;QAEF,cAAc,CAAC,WACd,IAAI,CAAC;gBACJ,MAAM,aAAa;oBAAE,GAAG,MAAM,OAAO;gBAAC;gBACtC,OAAO,UAAU,CAAC,SAAS;gBAC3B,OAAO;oBAAE,SAAS;gBAAW;YAC9B;QAED,UAAU,IAAM,IAAI;gBAAE,SAAS,CAAC;YAAE;IACnC,CAAC"}},
    {"offset": {"line": 3736, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/stores/toolbar-stats-store.ts"],"sourcesContent":["/**\n * Toolbar Stats Store\n *\n * Zustand store for managing toolbar statistics across pages\n * Allows pages to dynamically set stats that will be displayed in the toolbar\n */\n\nimport { create } from \"zustand\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\n\ntype ToolbarStatsState = {\n\tstats: Record<string, StatCard[] | undefined>;\n\tsetStats: (pathname: string, stats: StatCard[] | undefined) => void;\n\tgetStats: (pathname: string) => StatCard[] | undefined;\n\tclearStats: (pathname: string) => void;\n};\n\nexport const useToolbarStatsStore = create<ToolbarStatsState>((set, get) => ({\n\tstats: {},\n\tsetStats: (pathname, stats) =>\n\t\tset((state) => ({\n\t\t\tstats: { ...state.stats, [pathname]: stats },\n\t\t})),\n\tgetStats: (pathname) => get().stats[pathname],\n\tclearStats: (pathname) =>\n\t\tset((state) => {\n\t\t\tconst { [pathname]: _, ...rest } = state.stats;\n\t\t\treturn { stats: rest };\n\t\t}),\n}));\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAED;;AAUO,MAAM,uBAAuB,IAAA,+VAAM,EAAoB,CAAC,KAAK,MAAQ,CAAC;QAC5E,OAAO,CAAC;QACR,UAAU,CAAC,UAAU,QACpB,IAAI,CAAC,QAAU,CAAC;oBACf,OAAO;wBAAE,GAAG,MAAM,KAAK;wBAAE,CAAC,SAAS,EAAE;oBAAM;gBAC5C,CAAC;QACF,UAAU,CAAC,WAAa,MAAM,KAAK,CAAC,SAAS;QAC7C,YAAY,CAAC,WACZ,IAAI,CAAC;gBACJ,MAAM,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,GAAG,MAAM,GAAG,MAAM,KAAK;gBAC9C,OAAO;oBAAE,OAAO;gBAAK;YACtB;IACF,CAAC"}},
    {"offset": {"line": 3770, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/offline/indexed-db.ts"],"sourcesContent":["/**\n * IndexedDB Wrapper for Offline Storage\n *\n * Provides a type-safe interface for storing and retrieving data offline.\n * Critical for field workers with spotty internet connections.\n *\n * Database: thorbis-offline\n * Version: 2 (Updated with comprehensive offline support)\n *\n * Stores:\n * - jobs: Offline job records\n * - invoices: Offline invoice records\n * - customers: Full customer records (not just cache)\n * - communications: Email/SMS/phone history\n * - payments: Payment transactions\n * - equipment: Equipment/asset tracking\n * - schedules: Appointments and scheduling\n * - tags: Tag management system\n * - attachments: File attachments metadata\n * - sync-queue: Pending sync operations\n */\n\nconst DB_NAME = \"thorbis-offline\";\nconst DB_VERSION = 2;\n\n// Type definitions\nexport type OfflineJob = {\n\tid: string;\n\tcustomer_id: string;\n\tstatus: string;\n\tscheduled_date: string;\n\tnotes: string;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n};\n\nexport type OfflineInvoice = {\n\tid: string;\n\tcustomer_id: string;\n\tamount: number;\n\tstatus: string;\n\tline_items: any[];\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n};\n\nexport type OfflineCustomer = {\n\tid: string;\n\tcompany_id: string;\n\tuser_id?: string | null;\n\ttype: string;\n\tfirst_name: string;\n\tlast_name: string;\n\tcompany_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n\taddress?: string | null;\n\tcity?: string | null;\n\tstate?: string | null;\n\tzip?: string | null;\n\tstatus: string;\n\ttotal_revenue?: number;\n\ttotal_jobs?: number;\n\toutstanding_balance?: number;\n\tportal_enabled: boolean;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type OfflineCommunication = {\n\tid: string;\n\tcompany_id: string;\n\tcustomer_id?: string | null;\n\tjob_id?: string | null;\n\tuser_id?: string | null;\n\ttype: string; // 'email' | 'sms' | 'phone' | 'chat' | 'note'\n\tdirection: string; // 'inbound' | 'outbound'\n\tstatus: string;\n\tsubject?: string | null;\n\tbody?: string | null;\n\tfrom_email?: string | null;\n\tto_email?: string | null;\n\tfrom_phone?: string | null;\n\tto_phone?: string | null;\n\tthread_id?: string | null;\n\tparent_id?: string | null;\n\tread_at?: number | null;\n\tcall_duration?: number | null;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type OfflinePayment = {\n\tid: string;\n\tcompany_id: string;\n\tcustomer_id: string;\n\tinvoice_id?: string | null;\n\tjob_id?: string | null;\n\tpayment_number: string;\n\tamount: number; // In cents\n\tpayment_method: string;\n\tpayment_type: string;\n\tstatus: string;\n\tcard_brand?: string | null;\n\tcard_last4?: string | null;\n\trefunded_amount: number;\n\tis_reconciled: boolean;\n\tprocessed_at?: number | null;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type OfflineEquipment = {\n\tid: string;\n\tcompany_id: string;\n\tcustomer_id: string;\n\tproperty_id?: string | null;\n\tequipment_number: string;\n\ttype: string;\n\tmanufacturer?: string | null;\n\tmodel?: string | null;\n\tserial_number?: string | null;\n\tinstall_date?: number | null;\n\twarranty_expiration?: number | null;\n\tis_under_warranty: boolean;\n\tstatus: string;\n\tnext_service_due?: number | null;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type OfflineSchedule = {\n\tid: string;\n\tcompany_id: string;\n\tcustomer_id?: string | null;\n\tjob_id?: string | null;\n\tassigned_to?: string | null;\n\ttype: string;\n\ttitle: string;\n\tstart_time: number;\n\tend_time: number;\n\tduration: number;\n\tstatus: string;\n\tis_recurring: boolean;\n\treminder_sent: boolean;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type OfflineTag = {\n\tid: string;\n\tcompany_id: string;\n\tname: string;\n\tslug: string;\n\tcategory?: string | null;\n\tcolor?: string | null;\n\tusage_count: number;\n\tis_system: boolean;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n};\n\nexport type OfflineAttachment = {\n\tid: string;\n\tcompany_id: string;\n\tentity_type: string; // 'job' | 'customer' | 'invoice' | 'equipment' | etc.\n\tentity_id: string;\n\tfile_name: string;\n\tfile_size: number;\n\tmime_type: string;\n\tstorage_url: string;\n\tis_image: boolean;\n\tis_document: boolean;\n\tthumbnail_url?: string | null;\n\tcreated_at: number;\n\tupdated_at: number;\n\tsynced: boolean;\n\tdeleted_at?: number | null;\n};\n\nexport type SyncOperation = {\n\tid: string;\n\toperation: \"INSERT\" | \"UPDATE\" | \"DELETE\";\n\ttable: string;\n\tdata: any;\n\ttimestamp: number;\n\tretry_count: number;\n\terror?: string;\n};\n\nexport type StoreName =\n\t| \"jobs\"\n\t| \"invoices\"\n\t| \"customers\"\n\t| \"communications\"\n\t| \"payments\"\n\t| \"equipment\"\n\t| \"schedules\"\n\t| \"tags\"\n\t| \"attachments\"\n\t| \"sync-queue\";\n\n/**\n * Initialize IndexedDB database and create object stores\n */\nfunction openDatabase(): Promise<IDBDatabase> {\n\t// SSR guard - IndexedDB only exists in browser\n\tif (typeof window === \"undefined\" || typeof indexedDB === \"undefined\") {\n\t\treturn Promise.reject(\n\t\t\tnew Error(\"IndexedDB not available (server-side rendering)\"),\n\t\t);\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = indexedDB.open(DB_NAME, DB_VERSION);\n\n\t\trequest.onerror = () => {\n\t\t\treject(new Error(\"Failed to open IndexedDB\"));\n\t\t};\n\n\t\trequest.onsuccess = () => {\n\t\t\tresolve(request.result);\n\t\t};\n\n\t\trequest.onupgradeneeded = (event) => {\n\t\t\tconst db = (event.target as IDBOpenDBRequest).result;\n\t\t\tconst oldVersion = event.oldVersion;\n\n\t\t\t// Create object stores if they don't exist\n\t\t\tif (!db.objectStoreNames.contains(\"jobs\")) {\n\t\t\t\tconst jobsStore = db.createObjectStore(\"jobs\", { keyPath: \"id\" });\n\t\t\t\tjobsStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\tjobsStore.createIndex(\"updated_at\", \"updated_at\", { unique: false });\n\t\t\t\tjobsStore.createIndex(\"company_id\", \"company_id\", { unique: false });\n\t\t\t}\n\n\t\t\tif (!db.objectStoreNames.contains(\"invoices\")) {\n\t\t\t\tconst invoicesStore = db.createObjectStore(\"invoices\", {\n\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t});\n\t\t\t\tinvoicesStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\tinvoicesStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\tunique: false,\n\t\t\t\t});\n\t\t\t\tinvoicesStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\tunique: false,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!db.objectStoreNames.contains(\"customers\")) {\n\t\t\t\tconst customersStore = db.createObjectStore(\"customers\", {\n\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t});\n\t\t\t\tcustomersStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\tcustomersStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\tunique: false,\n\t\t\t\t});\n\t\t\t\tcustomersStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\tunique: false,\n\t\t\t\t});\n\t\t\t\tcustomersStore.createIndex(\"email\", \"email\", { unique: false });\n\t\t\t\tcustomersStore.createIndex(\"phone\", \"phone\", { unique: false });\n\t\t\t\tcustomersStore.createIndex(\"status\", \"status\", { unique: false });\n\t\t\t} else if (oldVersion < 2) {\n\t\t\t\t// Migrate existing customers store from v1 to v2\n\t\t\t\tconst transaction = (event.target as IDBOpenDBRequest).transaction!;\n\t\t\t\tconst customersStore = transaction.objectStore(\"customers\");\n\n\t\t\t\t// Add new indexes if they don't exist\n\t\t\t\tif (!customersStore.indexNames.contains(\"synced\")) {\n\t\t\t\t\tcustomersStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t}\n\t\t\t\tif (!customersStore.indexNames.contains(\"company_id\")) {\n\t\t\t\t\tcustomersStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!customersStore.indexNames.contains(\"status\")) {\n\t\t\t\t\tcustomersStore.createIndex(\"status\", \"status\", { unique: false });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Version 2: Add new object stores\n\t\t\tif (oldVersion < 2) {\n\t\t\t\t// Communications store\n\t\t\t\tif (!db.objectStoreNames.contains(\"communications\")) {\n\t\t\t\t\tconst communicationsStore = db.createObjectStore(\"communications\", {\n\t\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"synced\", \"synced\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"customer_id\", \"customer_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"type\", \"type\", { unique: false });\n\t\t\t\t\tcommunicationsStore.createIndex(\"thread_id\", \"thread_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tcommunicationsStore.createIndex(\"created_at\", \"created_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Payments store\n\t\t\t\tif (!db.objectStoreNames.contains(\"payments\")) {\n\t\t\t\t\tconst paymentsStore = db.createObjectStore(\"payments\", {\n\t\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t\tpaymentsStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"customer_id\", \"customer_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"invoice_id\", \"invoice_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"payment_number\", \"payment_number\", {\n\t\t\t\t\t\tunique: true,\n\t\t\t\t\t});\n\t\t\t\t\tpaymentsStore.createIndex(\"status\", \"status\", { unique: false });\n\t\t\t\t}\n\n\t\t\t\t// Equipment store\n\t\t\t\tif (!db.objectStoreNames.contains(\"equipment\")) {\n\t\t\t\t\tconst equipmentStore = db.createObjectStore(\"equipment\", {\n\t\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t\t});\n\t\t\t\t\tequipmentStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t\tequipmentStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tequipmentStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tequipmentStore.createIndex(\"customer_id\", \"customer_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tequipmentStore.createIndex(\"equipment_number\", \"equipment_number\", {\n\t\t\t\t\t\tunique: true,\n\t\t\t\t\t});\n\t\t\t\t\tequipmentStore.createIndex(\"type\", \"type\", { unique: false });\n\t\t\t\t\tequipmentStore.createIndex(\"status\", \"status\", { unique: false });\n\t\t\t\t}\n\n\t\t\t\t// Appointments store (IndexedDB store name kept as \"schedules\" for backwards compatibility)\n\t\t\t\tif (!db.objectStoreNames.contains(\"schedules\")) {\n\t\t\t\t\tconst schedulesStore = db.createObjectStore(\"schedules\", {\n\t\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t\tschedulesStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"customer_id\", \"customer_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"job_id\", \"job_id\", { unique: false });\n\t\t\t\t\tschedulesStore.createIndex(\"assigned_to\", \"assigned_to\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"start_time\", \"start_time\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tschedulesStore.createIndex(\"status\", \"status\", { unique: false });\n\t\t\t\t}\n\n\t\t\t\t// Tags store\n\t\t\t\tif (!db.objectStoreNames.contains(\"tags\")) {\n\t\t\t\t\tconst tagsStore = db.createObjectStore(\"tags\", { keyPath: \"id\" });\n\t\t\t\t\ttagsStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t\ttagsStore.createIndex(\"updated_at\", \"updated_at\", { unique: false });\n\t\t\t\t\ttagsStore.createIndex(\"company_id\", \"company_id\", { unique: false });\n\t\t\t\t\ttagsStore.createIndex(\"slug\", \"slug\", { unique: false });\n\t\t\t\t\ttagsStore.createIndex(\"category\", \"category\", { unique: false });\n\t\t\t\t}\n\n\t\t\t\t// Attachments store\n\t\t\t\tif (!db.objectStoreNames.contains(\"attachments\")) {\n\t\t\t\t\tconst attachmentsStore = db.createObjectStore(\"attachments\", {\n\t\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t\t});\n\t\t\t\t\tattachmentsStore.createIndex(\"synced\", \"synced\", { unique: false });\n\t\t\t\t\tattachmentsStore.createIndex(\"updated_at\", \"updated_at\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tattachmentsStore.createIndex(\"company_id\", \"company_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tattachmentsStore.createIndex(\"entity_type\", \"entity_type\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\tattachmentsStore.createIndex(\"entity_id\", \"entity_id\", {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t\t// Composite index for entity_type + entity_id\n\t\t\t\t\tattachmentsStore.createIndex(\"entity\", [\"entity_type\", \"entity_id\"], {\n\t\t\t\t\t\tunique: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!db.objectStoreNames.contains(\"sync-queue\")) {\n\t\t\t\tconst syncQueueStore = db.createObjectStore(\"sync-queue\", {\n\t\t\t\t\tkeyPath: \"id\",\n\t\t\t\t});\n\t\t\t\tsyncQueueStore.createIndex(\"timestamp\", \"timestamp\", { unique: false });\n\t\t\t\tsyncQueueStore.createIndex(\"retry_count\", \"retry_count\", {\n\t\t\t\t\tunique: false,\n\t\t\t\t});\n\t\t\t\tsyncQueueStore.createIndex(\"table\", \"table\", { unique: false });\n\t\t\t}\n\t\t};\n\t});\n}\n\n/**\n * Add a record to a store\n */\nexport async function addRecord<T>(\n\tstoreName: StoreName,\n\trecord: T,\n): Promise<void> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readwrite\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.add(record);\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to add record to ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Update a record in a store\n */\nexport async function updateRecord<T>(\n\tstoreName: StoreName,\n\trecord: T,\n): Promise<void> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readwrite\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.put(record);\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to update record in ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Get a record by ID\n */\nexport async function getRecord<T>(\n\tstoreName: StoreName,\n\tid: string,\n): Promise<T | null> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readonly\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.get(id);\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve(request.result || null);\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to get record from ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Get all records from a store\n */\nexport async function getAllRecords<T>(storeName: StoreName): Promise<T[]> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readonly\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.getAll();\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve(request.result || []);\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to get all records from ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Get records by index\n */\nasync function getRecordsByIndex<T>(\n\tstoreName: StoreName,\n\tindexName: string,\n\tvalue: any,\n): Promise<T[]> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readonly\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst index = store.index(indexName);\n\t\tconst request = index.getAll(value);\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve(request.result || []);\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to get records by index from ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Delete a record by ID\n */\nexport async function deleteRecord(\n\tstoreName: StoreName,\n\tid: string,\n): Promise<void> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readwrite\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.delete(id);\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to delete record from ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Clear all records from a store\n */\nasync function clearStore(storeName: StoreName): Promise<void> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readwrite\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.clear();\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to clear store ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Count records in a store\n */\nexport async function countRecords(storeName: StoreName): Promise<number> {\n\tconst db = await openDatabase();\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction([storeName], \"readonly\");\n\t\tconst store = transaction.objectStore(storeName);\n\t\tconst request = store.count();\n\n\t\trequest.onsuccess = () => {\n\t\t\tdb.close();\n\t\t\tresolve(request.result || 0);\n\t\t};\n\n\t\trequest.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(new Error(`Failed to count records in ${storeName}`));\n\t\t};\n\t});\n}\n\n/**\n * Generate a temporary ID for offline records\n */\nexport function generateTempId(): string {\n\treturn `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Check if an ID is a temporary offline ID\n */\nexport function isTempId(id: string): boolean {\n\treturn id.startsWith(\"temp_\");\n}\n\n/**\n * Get unsynced records from a store\n */\nasync function getUnsyncedRecords<T extends { synced: boolean }>(\n\tstoreName: StoreName,\n): Promise<T[]> {\n\treturn getRecordsByIndex<T>(storeName, \"synced\", false);\n}\n\n/**\n * Clear old cached data (older than 7 days) from all stores\n * Removes synced records that are stale to free up storage space\n */\nasync function clearOldCache(): Promise<void> {\n\tconst sevenDaysAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;\n\tconst db = await openDatabase();\n\n\tconst storesToClear = [\n\t\t\"customers\",\n\t\t\"communications\",\n\t\t\"payments\",\n\t\t\"equipment\",\n\t\t\"schedules\",\n\t\t\"tags\",\n\t\t\"attachments\",\n\t];\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst transaction = db.transaction(storesToClear, \"readwrite\");\n\t\tlet completedStores = 0;\n\n\t\tconst checkComplete = () => {\n\t\t\tcompletedStores++;\n\t\t\tif (completedStores === storesToClear.length) {\n\t\t\t\tdb.close();\n\t\t\t\tresolve();\n\t\t\t}\n\t\t};\n\n\t\tstoresToClear.forEach((storeName) => {\n\t\t\tconst store = transaction.objectStore(storeName);\n\t\t\tconst index = store.index(\"updated_at\");\n\t\t\tconst range = IDBKeyRange.upperBound(sevenDaysAgo);\n\t\t\tconst request = index.openCursor(range);\n\n\t\t\trequest.onsuccess = (event) => {\n\t\t\t\tconst cursor = (event.target as IDBRequest).result;\n\t\t\t\tif (cursor) {\n\t\t\t\t\t// Only delete if synced (don't delete unsynced offline records)\n\t\t\t\t\tconst record = cursor.value;\n\t\t\t\t\tif (record.synced === true) {\n\t\t\t\t\t\tcursor.delete();\n\t\t\t\t\t}\n\t\t\t\t\tcursor.continue();\n\t\t\t\t} else {\n\t\t\t\t\tcheckComplete();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.onerror = () => {\n\t\t\t\tdb.close();\n\t\t\t\treject(new Error(`Failed to clear old cache from ${storeName}`));\n\t\t\t};\n\t\t});\n\t});\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4297, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/offline/sync-queue.ts"],"sourcesContent":["/**\n * Sync Queue System\n *\n * Queues offline operations and syncs them to Supabase when online.\n * Handles retries, conflicts, and temporary ID mapping.\n *\n * Flow:\n * 1. User performs action offline (create job, update invoice)\n * 2. Operation added to IndexedDB sync-queue\n * 3. When online, process queue operations sequentially\n * 4. Update local records with server IDs\n * 5. Handle conflicts (last-write-wins)\n */\n\n\"use client\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport {\n\taddRecord,\n\tdeleteRecord,\n\tgenerateTempId,\n\tgetAllRecords,\n\tgetRecord,\n\tisTempId,\n\ttype StoreName,\n\ttype SyncOperation,\n\tupdateRecord,\n} from \"./indexed-db\";\n\nconst MAX_RETRIES = 3;\n\n/**\n * Add an operation to the sync queue\n */\nasync function addToSyncQueue(\n\toperation: \"INSERT\" | \"UPDATE\" | \"DELETE\",\n\ttable: string,\n\tdata: any,\n): Promise<string> {\n\tconst id = generateTempId();\n\tconst syncOp: SyncOperation = {\n\t\tid,\n\t\toperation,\n\t\ttable,\n\t\tdata,\n\t\ttimestamp: Date.now(),\n\t\tretry_count: 0,\n\t};\n\n\tawait addRecord(\"sync-queue\", syncOp);\n\treturn id;\n}\n\n/**\n * Process all pending sync operations\n */\nexport async function processSyncQueue(): Promise<{\n\tsuccess: number;\n\tfailed: number;\n\terrors: Array<{ operation: SyncOperation; error: string }>;\n}> {\n\tconst operations = await getAllRecords<SyncOperation>(\"sync-queue\");\n\n\tif (operations.length === 0) {\n\t\treturn { success: 0, failed: 0, errors: [] };\n\t}\n\n\tconst supabase = createClient();\n\tlet successCount = 0;\n\tlet failedCount = 0;\n\tconst errors: Array<{ operation: SyncOperation; error: string }> = [];\n\n\t// Process operations sequentially to maintain order\n\tfor (const operation of operations) {\n\t\ttry {\n\t\t\tawait processSingleOperation(supabase, operation);\n\t\t\tawait deleteRecord(\"sync-queue\", operation.id);\n\t\t\tsuccessCount++;\n\t\t} catch (error) {\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"Unknown error\";\n\n\t\t\t// Increment retry count\n\t\t\tconst updatedOp = {\n\t\t\t\t...operation,\n\t\t\t\tretry_count: operation.retry_count + 1,\n\t\t\t\terror: errorMessage,\n\t\t\t};\n\n\t\t\tif (updatedOp.retry_count >= MAX_RETRIES) {\n\t\t\t\tawait updateRecord(\"sync-queue\", updatedOp);\n\t\t\t\tfailedCount++;\n\t\t\t\terrors.push({ operation, error: errorMessage });\n\t\t\t} else {\n\t\t\t\t// Update retry count and try again later\n\t\t\t\tawait updateRecord(\"sync-queue\", updatedOp);\n\t\t\t\tfailedCount++;\n\t\t\t}\n\t\t}\n\t}\n\treturn { success: successCount, failed: failedCount, errors };\n}\n\n/**\n * Process a single sync operation\n */\nasync function processSingleOperation(\n\tsupabase: any,\n\toperation: SyncOperation,\n): Promise<void> {\n\tconst { operation: op, table, data } = operation;\n\n\tswitch (op) {\n\t\tcase \"INSERT\": {\n\t\t\tconst { id: tempId, ...insertData } = data;\n\t\t\tconst { data: result, error } = await supabase\n\t\t\t\t.from(table)\n\t\t\t\t.insert(insertData)\n\t\t\t\t.select()\n\t\t\t\t.single();\n\n\t\t\tif (error) {\n\t\t\t\tthrow new Error(error.message);\n\t\t\t}\n\n\t\t\t// Update local record with server ID\n\t\t\tif (isTempId(tempId)) {\n\t\t\t\tconst storeName = getStoreNameFromTable(table);\n\t\t\t\tif (storeName) {\n\t\t\t\t\tawait deleteRecord(storeName, tempId);\n\t\t\t\t\tawait addRecord(storeName, { ...result, synced: true });\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tcase \"UPDATE\": {\n\t\t\tconst { id, ...updateData } = data;\n\t\t\tconst { error } = await supabase\n\t\t\t\t.from(table)\n\t\t\t\t.update(updateData)\n\t\t\t\t.eq(\"id\", id);\n\n\t\t\tif (error) {\n\t\t\t\tthrow new Error(error.message);\n\t\t\t}\n\n\t\t\t// Update local record sync status\n\t\t\tconst storeName = getStoreNameFromTable(table);\n\t\t\tif (storeName) {\n\t\t\t\tconst localRecord = await getRecord(storeName, id);\n\t\t\t\tif (localRecord) {\n\t\t\t\t\tawait updateRecord(storeName, {\n\t\t\t\t\t\t...localRecord,\n\t\t\t\t\t\t...updateData,\n\t\t\t\t\t\tsynced: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tcase \"DELETE\": {\n\t\t\tconst { id } = data;\n\t\t\tconst { error } = await supabase.from(table).delete().eq(\"id\", id);\n\n\t\t\tif (error) {\n\t\t\t\tthrow new Error(error.message);\n\t\t\t}\n\n\t\t\t// Remove from local storage\n\t\t\tconst storeName = getStoreNameFromTable(table);\n\t\t\tif (storeName) {\n\t\t\t\tawait deleteRecord(storeName, id);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown operation: ${op}`);\n\t}\n}\n\n/**\n * Map Supabase table name to IndexedDB store name\n */\nfunction getStoreNameFromTable(table: string): StoreName | null {\n\tconst tableToStore: Record<string, StoreName> = {\n\t\tjobs: \"jobs\",\n\t\tinvoices: \"invoices\",\n\t\tcustomers: \"customers\",\n\t\tcommunications: \"communications\",\n\t\tpayments: \"payments\",\n\t\tequipment: \"equipment\",\n\t\tschedules: \"appointments\",\n\t\ttags: \"tags\",\n\t\tattachments: \"attachments\",\n\t};\n\treturn tableToStore[table] || null;\n}\n\n/**\n * Clear failed operations from queue (manual intervention)\n */\nasync function clearFailedOperations(): Promise<void> {\n\tconst operations = await getAllRecords<SyncOperation>(\"sync-queue\");\n\tconst failedOps = operations.filter((op) => op.retry_count >= MAX_RETRIES);\n\n\tfor (const op of failedOps) {\n\t\tawait deleteRecord(\"sync-queue\", op.id);\n\t}\n}\n\n/**\n * Get failed operations for manual review\n */\nasync function getFailedOperations(): Promise<SyncOperation[]> {\n\tconst operations = await getAllRecords<SyncOperation>(\"sync-queue\");\n\treturn operations.filter((op) => op.retry_count >= MAX_RETRIES);\n}\n\n/**\n * Retry a specific failed operation\n */\nasync function retryOperation(operationId: string): Promise<boolean> {\n\tconst operation = await getRecord<SyncOperation>(\"sync-queue\", operationId);\n\tif (!operation) {\n\t\treturn false;\n\t}\n\n\tconst supabase = await createClient();\n\n\ttry {\n\t\tawait processSingleOperation(supabase, operation);\n\t\tawait deleteRecord(\"sync-queue\", operationId);\n\t\treturn true;\n\t} catch (error) {\n\t\tconst _errorMessage =\n\t\t\terror instanceof Error ? error.message : \"Unknown error\";\n\t\treturn false;\n\t}\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4500, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/lib/offline/network-status.ts"],"sourcesContent":["/**\n * Network Status Detection Hook\n *\n * Monitors online/offline state and triggers sync when connection is restored.\n * Critical for field workers with spotty internet connections.\n *\n * Usage:\n * ```typescript\n * const { isOnline, pendingOperations } = useNetworkStatus();\n * ```\n */\n\n\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { countRecords } from \"./indexed-db\";\nimport { processSyncQueue } from \"./sync-queue\";\n\nexport type NetworkStatus = {\n\tisOnline: boolean;\n\tpendingOperations: number;\n\tlastSync: Date | null;\n\tisSyncing: boolean;\n};\n\n/**\n * Hook to monitor network status and pending sync operations\n */\nexport function useNetworkStatus(): NetworkStatus {\n\tconst [isOnline, setIsOnline] = useState(\n\t\ttypeof navigator !== \"undefined\" ? navigator.onLine : true,\n\t);\n\tconst [pendingOperations, setPendingOperations] = useState(0);\n\tconst [lastSync, setLastSync] = useState<Date | null>(null);\n\tconst [isSyncing, setIsSyncing] = useState(false);\n\n\t// Update pending operations count\n\tconst updatePendingCount = async () => {\n\t\t// SSR guard - only run in browser\n\t\tif (typeof window === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst count = await countRecords(\"sync-queue\");\n\t\t\tsetPendingOperations(count);\n\t\t} catch (_error) {}\n\t};\n\n\t// Use ref to prevent concurrent sync operations (CRITICAL FIX)\n\tconst isSyncingRef = useRef(false);\n\n\tuseEffect(() => {\n\t\t// SSR guard - only run in browser\n\t\tif (typeof window === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initial pending count\n\t\tupdatePendingCount();\n\n\t\t// Poll for pending operations every 10 seconds\n\t\tconst interval = setInterval(() => {\n\t\t\t// Don't update count if sync is in progress to avoid race conditions\n\t\t\tif (!isSyncingRef.current) {\n\t\t\t\tupdatePendingCount();\n\t\t\t}\n\t\t}, 10_000);\n\n\t\tconst handleOnline = async () => {\n\t\t\t// Guard: prevent concurrent sync operations\n\t\t\tif (isSyncingRef.current) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsOnline(true);\n\t\t\tisSyncingRef.current = true;\n\n\t\t\t// Trigger sync queue processing\n\t\t\ttry {\n\t\t\t\tsetIsSyncing(true);\n\t\t\t\tawait processSyncQueue();\n\t\t\t\tsetLastSync(new Date());\n\t\t\t\tawait updatePendingCount();\n\t\t\t} catch (_error) {\n\t\t\t} finally {\n\t\t\t\tsetIsSyncing(false);\n\t\t\t\tisSyncingRef.current = false;\n\t\t\t}\n\t\t};\n\n\t\tconst handleOffline = () => {\n\t\t\tsetIsOnline(false);\n\t\t};\n\n\t\t// Listen for visibility change (page becomes visible after being hidden)\n\t\tconst handleVisibilityChange = async () => {\n\t\t\t// Guard: prevent concurrent sync operations\n\t\t\tif (\n\t\t\t\tdocument.visibilityState === \"visible\" &&\n\t\t\t\tnavigator.onLine &&\n\t\t\t\t!isSyncingRef.current\n\t\t\t) {\n\t\t\t\tisSyncingRef.current = true;\n\n\t\t\t\t// Trigger sync when user returns to the tab\n\t\t\t\ttry {\n\t\t\t\t\tsetIsSyncing(true);\n\t\t\t\t\tawait processSyncQueue();\n\t\t\t\t\tsetLastSync(new Date());\n\t\t\t\t\tawait updatePendingCount();\n\t\t\t\t} catch (_error) {\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsSyncing(false);\n\t\t\t\t\tisSyncingRef.current = false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Listen for online/offline events\n\t\twindow.addEventListener(\"online\", handleOnline);\n\t\twindow.addEventListener(\"offline\", handleOffline);\n\t\tdocument.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"online\", handleOnline);\n\t\t\twindow.removeEventListener(\"offline\", handleOffline);\n\t\t\tdocument.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [\n\t\t// Initial pending count\n\t\tupdatePendingCount,\n\t]);\n\n\treturn {\n\t\tisOnline,\n\t\tpendingOperations,\n\t\tlastSync,\n\t\tisSyncing,\n\t};\n}\n\n/**\n * Get current online status (synchronous)\n */\nfunction isOnline(): boolean {\n\treturn typeof navigator !== \"undefined\" ? navigator.onLine : true;\n}\n\n/**\n * Wait for network connection\n */\nfunction waitForOnline(): Promise<void> {\n\treturn new Promise((resolve) => {\n\t\tif (navigator.onLine) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tconst handler = () => {\n\t\t\t\twindow.removeEventListener(\"online\", handler);\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\twindow.addEventListener(\"online\", handler);\n\t\t}\n\t});\n}\n\n/**\n * Execute a function when online\n */\nasync function executeWhenOnline<T>(fn: () => Promise<T>): Promise<T> {\n\tif (!navigator.onLine) {\n\t\tawait waitForOnline();\n\t}\n\treturn fn();\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC;;;;AAID;AACA;AACA;;AAJA;;;;AAgBO,SAAS;;IACf,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EACvC,OAAO,cAAc,cAAc,UAAU,MAAM,GAAG;IAEvD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,gVAAQ,EAAC;IAC3D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAc;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAC;IAE3C,kCAAkC;IAClC,MAAM,qBAAqB;QAC1B,kCAAkC;QAClC;;QAIA,IAAI;YACH,MAAM,QAAQ,MAAM,IAAA,wKAAY,EAAC;YACjC,qBAAqB;QACtB,EAAE,OAAO,QAAQ,CAAC;IACnB;IAEA,+DAA+D;IAC/D,MAAM,eAAe,IAAA,8UAAM,EAAC;IAE5B,IAAA,iVAAS;sCAAC;YACT,kCAAkC;YAClC;;YAIA,wBAAwB;YACxB;YAEA,+CAA+C;YAC/C,MAAM,WAAW;uDAAY;oBAC5B,qEAAqE;oBACrE,IAAI,CAAC,aAAa,OAAO,EAAE;wBAC1B;oBACD;gBACD;sDAAG;YAEH,MAAM;2DAAe;oBACpB,4CAA4C;oBAC5C,IAAI,aAAa,OAAO,EAAE;wBACzB;oBACD;oBACA,YAAY;oBACZ,aAAa,OAAO,GAAG;oBAEvB,gCAAgC;oBAChC,IAAI;wBACH,aAAa;wBACb,MAAM,IAAA,4KAAgB;wBACtB,YAAY,IAAI;wBAChB,MAAM;oBACP,EAAE,OAAO,QAAQ,CACjB,SAAU;wBACT,aAAa;wBACb,aAAa,OAAO,GAAG;oBACxB;gBACD;;YAEA,MAAM;4DAAgB;oBACrB,YAAY;gBACb;;YAEA,yEAAyE;YACzE,MAAM;qEAAyB;oBAC9B,4CAA4C;oBAC5C,IACC,SAAS,eAAe,KAAK,aAC7B,UAAU,MAAM,IAChB,CAAC,aAAa,OAAO,EACpB;wBACD,aAAa,OAAO,GAAG;wBAEvB,4CAA4C;wBAC5C,IAAI;4BACH,aAAa;4BACb,MAAM,IAAA,4KAAgB;4BACtB,YAAY,IAAI;4BAChB,MAAM;wBACP,EAAE,OAAO,QAAQ,CACjB,SAAU;4BACT,aAAa;4BACb,aAAa,OAAO,GAAG;wBACxB;oBACD;gBACD;;YAEA,mCAAmC;YACnC,OAAO,gBAAgB,CAAC,UAAU;YAClC,OAAO,gBAAgB,CAAC,WAAW;YACnC,SAAS,gBAAgB,CAAC,oBAAoB;YAE9C;8CAAO;oBACN,OAAO,mBAAmB,CAAC,UAAU;oBACrC,OAAO,mBAAmB,CAAC,WAAW;oBACtC,SAAS,mBAAmB,CAAC,oBAAoB;oBACjD,cAAc;gBACf;;QACD;qCAAG;QACF,wBAAwB;QACxB;KACA;IAED,OAAO;QACN;QACA;QACA;QACA;IACD;AACD;GAhHgB;AAkHhB;;CAEC,GACD,SAAS;IACR,OAAO,OAAO,cAAc,cAAc,UAAU,MAAM,GAAG;AAC9D;AAEA;;CAEC,GACD,SAAS;IACR,OAAO,IAAI,QAAQ,CAAC;QACnB,IAAI,UAAU,MAAM,EAAE;YACrB;QACD,OAAO;YACN,MAAM,UAAU;gBACf,OAAO,mBAAmB,CAAC,UAAU;gBACrC;YACD;YACA,OAAO,gBAAgB,CAAC,UAAU;QACnC;IACD;AACD;AAEA;;CAEC,GACD,eAAe,kBAAqB,EAAoB;IACvD,IAAI,CAAC,UAAU,MAAM,EAAE;QACtB,MAAM;IACP;IACA,OAAO;AACR"}}]
}