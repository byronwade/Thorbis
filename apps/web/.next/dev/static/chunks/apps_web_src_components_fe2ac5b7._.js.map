{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/help-dropdown.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n\tBookOpen,\n\tExternalLink,\n\tHelpCircle,\n\tLifeBuoy,\n\tMessageCircle,\n\tVideo,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useEffect, useRef, useState } from \"react\";\n\ntype HelpItem = {\n\tlabel: string;\n\tdescription: string;\n\thref: string;\n\ticon: typeof BookOpen;\n\texternal?: boolean;\n};\n\nconst helpItems: HelpItem[] = [\n\t{\n\t\tlabel: \"Documentation\",\n\t\tdescription: \"Guides and tutorials for all features\",\n\t\thref: \"/docs\",\n\t\ticon: BookOpen,\n\t},\n\t{\n\t\tlabel: \"Video Tutorials\",\n\t\tdescription: \"Step-by-step video guides\",\n\t\thref: \"/docs/videos\",\n\t\ticon: Video,\n\t},\n\t{\n\t\tlabel: \"Support Center\",\n\t\tdescription: \"Get help from our support team\",\n\t\thref: \"/support\",\n\t\ticon: LifeBuoy,\n\t},\n\t{\n\t\tlabel: \"Contact Support\",\n\t\tdescription: \"Chat with our support team\",\n\t\thref: \"/support/contact\",\n\t\ticon: MessageCircle,\n\t},\n\t{\n\t\tlabel: \"What's New\",\n\t\tdescription: \"Latest features and updates\",\n\t\thref: \"/changelog\",\n\t\ticon: HelpCircle,\n\t},\n];\n\nexport function HelpDropdown() {\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst dropdownRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst handleClickOutside = (event: MouseEvent) => {\n\t\t\tif (\n\t\t\t\tdropdownRef.current &&\n\t\t\t\t!dropdownRef.current.contains(event.target as Node)\n\t\t\t) {\n\t\t\t\tsetIsOpen(false);\n\t\t\t}\n\t\t};\n\n\t\tif (isOpen) {\n\t\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\n\t\t};\n\t}, [isOpen]);\n\n\treturn (\n\t\t<div className=\"relative\" ref={dropdownRef}>\n\t\t\t<button\n\t\t\t\tclassName=\"hover-gradient hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:ring-ring/50 flex h-8 w-8 items-center justify-center rounded-md border border-transparent transition-all outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50\"\n\t\t\t\tonClick={() => setIsOpen(!isOpen)}\n\t\t\t\ttitle=\"Help\"\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<HelpCircle className=\"size-4\" />\n\t\t\t\t<span className=\"sr-only\">Help</span>\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<div className=\"bg-popover text-popover-foreground absolute top-full right-0 z-50 mt-2 w-80 rounded-lg border p-2 shadow-lg\">\n\t\t\t\t\t<div className=\"mb-2 border-b px-3 py-2\">\n\t\t\t\t\t\t<h3 className=\"text-sm font-semibold\">Help &amp; Support</h3>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\tFind answers and get assistance\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t{helpItems.map((item) => {\n\t\t\t\t\t\t\tconst Icon = item.icon;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex items-start gap-3 rounded-md px-3 py-2.5 transition-colors\"\n\t\t\t\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\t\t\t\tkey={item.label}\n\t\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t\t\t\trel={item.external ? \"noopener noreferrer\" : undefined}\n\t\t\t\t\t\t\t\t\ttarget={item.external ? \"_blank\" : undefined}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"text-muted-foreground mt-0.5 size-4 shrink-0\" />\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{item.label}</p>\n\t\t\t\t\t\t\t\t\t\t\t{item.external && (\n\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink className=\"text-muted-foreground size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{item.description}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mt-2 border-t pt-2\">\n\t\t\t\t\t\t<div className=\"bg-accent/50 rounded-md px-3 py-2\">\n\t\t\t\t\t\t\t<p className=\"text-xs font-medium\">Need more help?</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\tEmail us at{\" \"}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\thref=\"mailto:support@thorbis.com\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tsupport@thorbis.com\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;;;AAXA;;;;AAqBA,MAAM,YAAwB;IAC7B;QACC,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM,iTAAQ;IACf;IACA;QACC,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM,oSAAK;IACZ;IACA;QACC,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM,iTAAQ;IACf;IACA;QACC,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM,gUAAa;IACpB;IACA;QACC,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM,mUAAU;IACjB;CACA;AAEM,SAAS;;IACf,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAAC;IACrC,MAAM,cAAc,IAAA,8UAAM,EAAiB;IAE3C,IAAA,iVAAS;kCAAC;YACT,MAAM;6DAAqB,CAAC;oBAC3B,IACC,YAAY,OAAO,IACnB,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GACzC;wBACD,UAAU;oBACX;gBACD;;YAEA,IAAI,QAAQ;gBACX,SAAS,gBAAgB,CAAC,aAAa;YACxC;YAEA;0CAAO;oBACN,SAAS,mBAAmB,CAAC,aAAa;gBAC3C;;QACD;iCAAG;QAAC;KAAO;IAEX,qBACC,oWAAC;QAAI,WAAU;QAAW,KAAK;;0BAC9B,oWAAC;gBACA,WAAU;gBACV,SAAS,IAAM,UAAU,CAAC;gBAC1B,OAAM;gBACN,MAAK;;kCAEL,oWAAC,mUAAU;wBAAC,WAAU;;;;;;kCACtB,oWAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;YAG1B,wBACA,oWAAC;gBAAI,WAAU;;kCACd,oWAAC;wBAAI,WAAU;;0CACd,oWAAC;gCAAG,WAAU;0CAAwB;;;;;;0CACtC,oWAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;kCAI9C,oWAAC;wBAAI,WAAU;kCACb,UAAU,GAAG,CAAC,CAAC;4BACf,MAAM,OAAO,KAAK,IAAI;4BACtB,qBACC,oWAAC,iVAAI;gCACJ,WAAU;gCACV,MAAM,KAAK,IAAI;gCAEf,SAAS,IAAM,UAAU;gCACzB,KAAK,KAAK,QAAQ,GAAG,wBAAwB;gCAC7C,QAAQ,KAAK,QAAQ,GAAG,WAAW;;kDAEnC,oWAAC;wCAAK,WAAU;;;;;;kDAChB,oWAAC;wCAAI,WAAU;;0DACd,oWAAC;gDAAI,WAAU;;kEACd,oWAAC;wDAAE,WAAU;kEAAuB,KAAK,KAAK;;;;;;oDAC7C,KAAK,QAAQ,kBACb,oWAAC,6TAAY;wDAAC,WAAU;;;;;;;;;;;;0DAG1B,oWAAC;gDAAE,WAAU;0DACX,KAAK,WAAW;;;;;;;;;;;;;+BAdd,KAAK,KAAK;;;;;wBAmBlB;;;;;;kCAED,oWAAC;wBAAI,WAAU;kCACd,cAAA,oWAAC;4BAAI,WAAU;;8CACd,oWAAC;oCAAE,WAAU;8CAAsB;;;;;;8CACnC,oWAAC;oCAAE,WAAU;;wCAAgC;wCAChC;sDACZ,oWAAC;4CACA,WAAU;4CACV,MAAK;sDACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUT;GAzFgB;KAAA"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/notifications-dropdown.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * NotificationsDropdown - Client Component\n *\n * Client-side features:\n * - Interactive dropdown with notifications\n * - Real-time updates via Zustand store and Supabase Realtime\n * - Optimistic updates for better UX\n * - Mark as read/delete functionality\n */\n\nimport {\n\tAlertCircle,\n\tBell,\n\tCheck,\n\tCheckCheck,\n\tCheckCircle2,\n\tClock,\n\tCreditCard,\n\tDollarSign,\n\tLoader2,\n\tMessageSquare,\n\tPhone,\n\tSettings,\n\tTrash2,\n\tUserPlus,\n\tWrench,\n\tX,\n\tXCircle,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useEffect, useRef, useState } from \"react\";\nimport {\n\tdeleteNotification as deleteNotificationAction,\n\tmarkAllAsRead as markAllAsReadAction,\n\tmarkAsRead as markAsReadAction,\n} from \"@/actions/notifications\";\nimport type { NotificationType } from \"@/lib/stores/notifications-store\";\nimport { useNotificationsStore } from \"@/lib/stores/notifications-store\";\nimport { useSyncStore } from \"@/lib/stores/sync-store\";\nimport { createClient } from \"@/lib/supabase/client\";\n\n// Time constants in milliseconds\nconst MS_PER_SECOND = 1000;\nconst MS_PER_MINUTE = 60 * MS_PER_SECOND;\nconst MS_PER_HOUR = 60 * MS_PER_MINUTE;\n\nconst notificationIcons: Record<NotificationType, typeof Bell> = {\n\tmessage: MessageSquare,\n\talert: AlertCircle,\n\tpayment: DollarSign,\n\tjob: Wrench,\n\tteam: UserPlus,\n\tsystem: Settings,\n};\n\nconst notificationColors: Record<NotificationType, string> = {\n\tmessage: \"text-primary\",\n\talert: \"text-warning\",\n\tpayment: \"text-success\",\n\tjob: \"text-accent-foreground\",\n\tteam: \"text-cyan-500\",\n\tsystem: \"text-muted-foreground\",\n};\n\n// Display constants\nconst ONE_MINUTE = 60;\nconst ONE_HOUR = 24;\nconst ONE_WEEK = 7;\n\nfunction formatBadgeCount(count: number): string {\n\tif (count <= 9) {\n\t\treturn count.toString();\n\t}\n\tif (count <= 99) {\n\t\treturn \"99+\";\n\t}\n\tif (count <= 999) {\n\t\treturn \"999+\";\n\t}\n\treturn \"1K+\";\n}\n\nfunction formatTimestamp(date: Date): string {\n\tconst now = new Date();\n\tconst diffMs = now.getTime() - date.getTime();\n\tconst diffMins = Math.floor(diffMs / MS_PER_MINUTE);\n\tconst diffHours = Math.floor(diffMs / MS_PER_HOUR);\n\tconst diffDays = Math.floor(diffMs / (MS_PER_HOUR * 24));\n\n\tif (diffMins < 1) {\n\t\treturn \"Just now\";\n\t}\n\tif (diffMins < ONE_MINUTE) {\n\t\treturn `${diffMins}m ago`;\n\t}\n\tif (diffHours < ONE_HOUR) {\n\t\treturn `${diffHours}h ago`;\n\t}\n\tif (diffDays < ONE_WEEK) {\n\t\treturn `${diffDays}d ago`;\n\t}\n\n\treturn date.toLocaleDateString();\n}\n\nfunction NotificationBadge({ count }: { count: number }) {\n\tif (count === 0) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<span className=\"bg-destructive absolute -top-1 -right-1 flex h-[18px] min-w-[18px] items-center justify-center rounded-full px-1.5 text-[0.625rem] leading-none font-bold text-white\">\n\t\t\t{formatBadgeCount(count)}\n\t\t</span>\n\t);\n}\n\nfunction EmptyState() {\n\treturn (\n\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\n\t\t\t<Bell className=\"text-muted-foreground/30 mb-3 size-12\" />\n\t\t\t<p className=\"text-muted-foreground text-sm font-medium\">\n\t\t\t\tAll caught up!\n\t\t\t</p>\n\t\t\t<p className=\"text-muted-foreground text-xs\">No new notifications</p>\n\t\t</div>\n\t);\n}\n\ntype NotificationsDropdownProps = {\n\thasPhoneNumbers?: boolean;\n\thasPayrixAccount?: boolean;\n\tpayrixStatus?: string | null;\n};\n\nexport function NotificationsDropdown({\n\thasPhoneNumbers = false,\n\thasPayrixAccount = false,\n\tpayrixStatus = null,\n}: NotificationsDropdownProps = {}) {\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst dropdownRef = useRef<HTMLDivElement>(null);\n\n\t// Get notifications from Zustand store\n\tconst notifications = useNotificationsStore((state) => state.notifications);\n\tconst unreadCount = useNotificationsStore((state) => state.unreadCount);\n\tconst setNotifications = useNotificationsStore(\n\t\t(state) => state.setNotifications,\n\t);\n\tconst optimisticMarkAsRead = useNotificationsStore(\n\t\t(state) => state.optimisticMarkAsRead,\n\t);\n\tconst optimisticMarkAllAsRead = useNotificationsStore(\n\t\t(state) => state.optimisticMarkAllAsRead,\n\t);\n\tconst optimisticDelete = useNotificationsStore(\n\t\t(state) => state.optimisticDelete,\n\t);\n\tconst subscribe = useNotificationsStore((state) => state.subscribe);\n\tconst unsubscribe = useNotificationsStore((state) => state.unsubscribe);\n\n\t// Get sync operations from sync store\n\tconst operations = useSyncStore((state) => state.operations ?? []);\n\tconst offlineQueue = useSyncStore((state) => state.offlineQueue ?? []);\n\tconst clearCompleted = useSyncStore((state) => state.clearCompleted);\n\n\t// Filter for active operations\n\tconst activeOperations = operations.filter(\n\t\t(op) => op.status === \"in_progress\",\n\t);\n\tconst recentOperations = operations.filter(\n\t\t(op) => op.status === \"completed\" || op.status === \"failed\",\n\t);\n\n\tconst hasSyncActivity =\n\t\tactiveOperations.length > 0 || offlineQueue.length > 0;\n\tconst syncBadgeCount = activeOperations.length + offlineQueue.length;\n\tconst totalBadgeCount = unreadCount + syncBadgeCount;\n\n\t// Load notifications and set up realtime subscription on mount\n\tconst hasInitializedRef = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (!isOpen || hasInitializedRef.current) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cancelled = false;\n\n\t\tasync function initialize() {\n\t\t\ttry {\n\t\t\t\tconst supabase = createClient();\n\n\t\t\t\tif (!supabase) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst {\n\t\t\t\t\tdata: { user },\n\t\t\t\t} = await supabase.auth.getUser();\n\n\t\t\t\tif (!user) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { data, error } = await supabase\n\t\t\t\t\t.from(\"notifications\")\n\t\t\t\t\t.select(\"*\")\n\t\t\t\t\t.eq(\"user_id\", user.id)\n\t\t\t\t\t.order(\"created_at\", { ascending: false })\n\t\t\t\t\t.range(0, 49);\n\n\t\t\t\tif (!cancelled && !error && data) {\n\t\t\t\t\tsetNotifications(data);\n\t\t\t\t}\n\n\t\t\t\tif (!cancelled) {\n\t\t\t\t\tawait subscribe(user.id);\n\t\t\t\t\thasInitializedRef.current = true;\n\t\t\t\t}\n\t\t\t} catch (_error) {\n\t\t\t\t// Ignore initialization errors - component can retry later\n\t\t\t}\n\t\t}\n\n\t\tinitialize();\n\n\t\treturn () => {\n\t\t\tcancelled = true;\n\t\t};\n\t}, [isOpen, setNotifications, subscribe]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t}, [unsubscribe]);\n\n\t// Handle click outside to close dropdown\n\tuseEffect(() => {\n\t\tconst handleClickOutside = (event: MouseEvent) => {\n\t\t\tif (\n\t\t\t\tdropdownRef.current &&\n\t\t\t\t!dropdownRef.current.contains(event.target as Node)\n\t\t\t) {\n\t\t\t\tsetIsOpen(false);\n\t\t\t}\n\t\t};\n\n\t\tif (isOpen) {\n\t\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\n\t\t};\n\t}, [isOpen]);\n\n\t// Mark notification as read with optimistic update\n\tconst markAsRead = async (id: string) => {\n\t\t// Optimistic update\n\t\toptimisticMarkAsRead(id);\n\n\t\t// Server action\n\t\tconst result = await markAsReadAction(id);\n\t\tif (!result.success) {\n\t\t\t// Optimistic update already applied - log error but don't block UI\n\t\t\tconsole.error(\"Failed to mark notification as read:\", result.error);\n\t\t}\n\t};\n\n\t// Mark all notifications as read with optimistic update\n\tconst markAllAsRead = async () => {\n\t\t// Optimistic update\n\t\toptimisticMarkAllAsRead();\n\n\t\t// Server action\n\t\tconst result = await markAllAsReadAction();\n\t\tif (!result.success) {\n\t\t\t// Optimistic update already applied - log error but don't block UI\n\t\t\tconsole.error(\"Failed to mark all notifications as read:\", result.error);\n\t\t}\n\t};\n\n\t// Delete notification with optimistic update\n\tconst deleteNotification = async (id: string) => {\n\t\t// Optimistic update\n\t\toptimisticDelete(id);\n\n\t\t// Server action\n\t\tconst result = await deleteNotificationAction(id);\n\t\tif (!result.success) {\n\t\t\t// Optimistic update already applied - log error but don't block UI\n\t\t\tconsole.error(\"Failed to delete notification:\", result.error);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"relative overflow-visible\" ref={dropdownRef}>\n\t\t\t<button\n\t\t\t\tclassName=\"hover-gradient hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:ring-ring/50 relative flex h-8 w-8 items-center justify-center rounded-md border border-transparent transition-all outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50\"\n\t\t\t\tonClick={() => setIsOpen(!isOpen)}\n\t\t\t\ttitle={\n\t\t\t\t\thasSyncActivity ? \"Notifications & Sync Status\" : \"Notifications\"\n\t\t\t\t}\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t<Bell className=\"size-4\" />\n\t\t\t\t\t{hasSyncActivity && (\n\t\t\t\t\t\t<Loader2 className=\"text-primary absolute -top-1 -right-1 size-2.5 animate-spin\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<NotificationBadge count={totalBadgeCount} />\n\t\t\t\t<span className=\"sr-only\">\n\t\t\t\t\tNotifications {unreadCount > 0 && `(${unreadCount} unread)`}\n\t\t\t\t\t{hasSyncActivity && ` • ${syncBadgeCount} syncing`}\n\t\t\t\t</span>\n\t\t\t</button>\n\n\t\t\t{isOpen && (\n\t\t\t\t<div className=\"bg-popover text-popover-foreground absolute top-full right-0 z-50 mt-2 flex w-[380px] max-w-[calc(100vw-2rem)] flex-col rounded-lg border shadow-lg\">\n\t\t\t\t\t{/* Header */}\n\t\t\t\t\t<div className=\"flex items-center justify-between border-b px-4 py-2.5\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className=\"text-sm font-semibold\">\n\t\t\t\t\t\t\t\t{hasSyncActivity ? \"Sync & Notifications\" : \"Notifications\"}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t{(unreadCount > 0 || hasSyncActivity) && (\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t{hasSyncActivity && `${syncBadgeCount} syncing`}\n\t\t\t\t\t\t\t\t\t{hasSyncActivity && unreadCount > 0 && \" • \"}\n\t\t\t\t\t\t\t\t\t{unreadCount > 0 && `${unreadCount} unread`}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t{unreadCount > 0 && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex h-7 w-7 items-center justify-center rounded-md transition-colors\"\n\t\t\t\t\t\t\t\t\tonClick={markAllAsRead}\n\t\t\t\t\t\t\t\t\ttitle=\"Mark all as read\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CheckCheck className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex h-7 w-7 items-center justify-center rounded-md transition-colors\"\n\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<X className=\"size-3.5\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Sync Operations */}\n\t\t\t\t\t{(activeOperations.length > 0 ||\n\t\t\t\t\t\tofflineQueue.length > 0 ||\n\t\t\t\t\t\trecentOperations.length > 0) && (\n\t\t\t\t\t\t<div className=\"border-b\">\n\t\t\t\t\t\t\t{/* Active Operations */}\n\t\t\t\t\t\t\t{activeOperations.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"space-y-1 px-4 py-3\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mb-2 text-xs font-medium tracking-wider uppercase\">\n\t\t\t\t\t\t\t\t\t\tActive\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{activeOperations.map((op) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-primary/5 flex items-start gap-2 rounded-md p-2\"\n\t\t\t\t\t\t\t\t\t\t\tkey={op.id}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"text-primary mt-0.5 size-3.5 shrink-0 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-tight font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{op.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t{op.description && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{op.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{op.total && op.total > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-1 space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-1 overflow-hidden rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-primary h-full transition-all\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: `${((op.current ?? 0) / op.total) * 100}%`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-[0.625rem]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{op.current ?? 0} / {op.total}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Offline Queue */}\n\t\t\t\t\t\t\t{offlineQueue.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"space-y-1 px-4 py-3\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mb-2 flex items-center gap-1.5 text-xs font-medium tracking-wider uppercase\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"size-1.5 animate-pulse rounded-full bg-orange-500\" />\n\t\t\t\t\t\t\t\t\t\tQueued (Offline)\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{offlineQueue.map((op) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-start gap-2 rounded-md bg-orange-50 p-2 dark:bg-orange-950/20\"\n\t\t\t\t\t\t\t\t\t\t\tkey={op.id}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"mt-0.5 size-3.5 shrink-0 text-orange-500\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-tight font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{op.action}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-0.5 text-[0.625rem] text-orange-600 dark:text-orange-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tWill sync when online\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Recent Operations */}\n\t\t\t\t\t\t\t{recentOperations.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"space-y-1 px-4 py-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"mb-2 flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs font-medium tracking-wider uppercase\">\n\t\t\t\t\t\t\t\t\t\t\tRecent\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-muted-foreground hover:text-foreground text-xs\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={clearCompleted}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{recentOperations.map((op) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`flex items-start gap-2 rounded-md p-2 ${\n\t\t\t\t\t\t\t\t\t\t\t\top.status === \"completed\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-50 dark:bg-green-950/20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-red-50 dark:bg-red-950/20\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={op.id}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{op.status === \"completed\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"mt-0.5 size-3.5 shrink-0 text-green-600 dark:text-green-400\" />\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<XCircle className=\"mt-0.5 size-3.5 shrink-0 text-red-600 dark:text-red-400\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-tight font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{op.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t{op.error && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-red-600 dark:text-red-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{op.error}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Notifications List */}\n\t\t\t\t\t<div className=\"max-h-[450px] overflow-y-auto\">\n\t\t\t\t\t\t{/* System Notification - Phone Numbers Setup Missing */}\n\t\t\t\t\t\t{!hasPhoneNumbers && (\n\t\t\t\t\t\t\t<div className=\"border-b\">\n\t\t\t\t\t\t\t\t<div className=\"group bg-warning/10 hover:bg-warning/15 relative px-4 py-3 transition-colors\">\n\t\t\t\t\t\t\t\t\t{/* Warning indicator */}\n\t\t\t\t\t\t\t\t\t<div className=\"bg-warning absolute top-0 left-0 h-full w-0.5\" />\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-warning mt-0.5 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{/* Content */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-snug font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tPhone System Not Configured\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs leading-relaxed\">\n\t\t\t\t\t\t\t\t\t\t\t\tYou cannot use calling, texting, or communication\n\t\t\t\t\t\t\t\t\t\t\t\tfeatures without setting up phone numbers. Complete the\n\t\t\t\t\t\t\t\t\t\t\t\tsetup to enable phone system capabilities.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Footer */}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-2 pt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex items-center gap-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSystem Alert\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-warning/20 text-warning hover:bg-warning/30 rounded px-2 py-1 text-xs font-medium transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"/welcome?step=3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tComplete Setup\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* System Notification - Payrix Setup Missing */}\n\t\t\t\t\t\t{!hasPayrixAccount && (\n\t\t\t\t\t\t\t<div className=\"border-b\">\n\t\t\t\t\t\t\t\t<div className=\"group bg-warning/10 hover:bg-warning/15 relative px-4 py-3 transition-colors\">\n\t\t\t\t\t\t\t\t\t{/* Warning indicator */}\n\t\t\t\t\t\t\t\t\t<div className=\"bg-warning absolute top-0 left-0 h-full w-0.5\" />\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-warning mt-0.5 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<CreditCard className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{/* Content */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-snug font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tPayment Processing Not Configured\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs leading-relaxed\">\n\t\t\t\t\t\t\t\t\t\t\t\tYou cannot collect payments from customers without\n\t\t\t\t\t\t\t\t\t\t\t\tsetting up your merchant account. Complete the setup to\n\t\t\t\t\t\t\t\t\t\t\t\tstart accepting payments on invoices and estimates.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Footer */}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-2 pt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex items-center gap-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSystem Alert\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-warning/20 text-warning hover:bg-warning/30 rounded px-2 py-1 text-xs font-medium transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"/welcome?step=5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tComplete Setup\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{notifications.length === 0 &&\n\t\t\t\t\t\thasPhoneNumbers &&\n\t\t\t\t\t\thasPayrixAccount ? (\n\t\t\t\t\t\t\t<EmptyState />\n\t\t\t\t\t\t) : notifications.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"divide-y\">\n\t\t\t\t\t\t\t\t{notifications.map((notification) => {\n\t\t\t\t\t\t\t\t\tconst Icon = notificationIcons[notification.type];\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`group hover:bg-accent/50 relative px-4 py-3 transition-colors ${\n\t\t\t\t\t\t\t\t\t\t\t\tnotification.read ? \"\" : \"bg-primary/5\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={notification.id}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{/* Unread indicator */}\n\t\t\t\t\t\t\t\t\t\t\t{!notification.read && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-primary absolute top-0 left-0 h-full w-0.5\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`mt-0.5 shrink-0 ${notificationColors[notification.type]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Content */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-snug font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{notification.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs leading-relaxed\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{notification.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Footer */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-2 pt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex items-center gap-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimestamp(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnew Date(notification.created_at),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{notification.action_url && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:bg-primary/10 rounded px-2 py-1 text-xs font-medium transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={notification.action_url}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarkAsRead(notification.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{notification.action_label || \"View\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!notification.read && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex h-6 w-6 items-center justify-center rounded transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => markAsRead(notification.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Mark as read\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Check className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-destructive/10 hover:text-destructive flex h-6 w-6 items-center justify-center rounded transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteNotification(notification.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Footer */}\n\t\t\t\t\t{notifications.length > 0 && (\n\t\t\t\t\t\t<div className=\"border-t px-4 py-2\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"text-primary hover:bg-accent flex items-center justify-center rounded-md py-1.5 text-xs font-medium transition-colors\"\n\t\t\t\t\t\t\t\thref=\"/dashboard/notifications\"\n\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView all notifications\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;;CAQC,GAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;AAAA;AAAA;AAMA;AACA;AACA;;;AAzCA;;;;;;;;AA2CA,iCAAiC;AACjC,MAAM,gBAAgB;AACtB,MAAM,gBAAgB,KAAK;AAC3B,MAAM,cAAc,KAAK;AAEzB,MAAM,oBAA2D;IAChE,SAAS,gUAAa;IACtB,OAAO,0TAAW;IAClB,SAAS,uTAAU;IACnB,KAAK,uSAAM;IACX,MAAM,iTAAQ;IACd,QAAQ,6SAAQ;AACjB;AAEA,MAAM,qBAAuD;IAC5D,SAAS;IACT,OAAO;IACP,SAAS;IACT,KAAK;IACL,MAAM;IACN,QAAQ;AACT;AAEA,oBAAoB;AACpB,MAAM,aAAa;AACnB,MAAM,WAAW;AACjB,MAAM,WAAW;AAEjB,SAAS,iBAAiB,KAAa;IACtC,IAAI,SAAS,GAAG;QACf,OAAO,MAAM,QAAQ;IACtB;IACA,IAAI,SAAS,IAAI;QAChB,OAAO;IACR;IACA,IAAI,SAAS,KAAK;QACjB,OAAO;IACR;IACA,OAAO;AACR;AAEA,SAAS,gBAAgB,IAAU;IAClC,MAAM,MAAM,IAAI;IAChB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;IAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;IACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS,CAAC,cAAc,EAAE;IAEtD,IAAI,WAAW,GAAG;QACjB,OAAO;IACR;IACA,IAAI,WAAW,YAAY;QAC1B,OAAO,GAAG,SAAS,KAAK,CAAC;IAC1B;IACA,IAAI,YAAY,UAAU;QACzB,OAAO,GAAG,UAAU,KAAK,CAAC;IAC3B;IACA,IAAI,WAAW,UAAU;QACxB,OAAO,GAAG,SAAS,KAAK,CAAC;IAC1B;IAEA,OAAO,KAAK,kBAAkB;AAC/B;AAEA,SAAS,kBAAkB,EAAE,KAAK,EAAqB;IACtD,IAAI,UAAU,GAAG;QAChB,OAAO;IACR;IACA,qBACC,oWAAC;QAAK,WAAU;kBACd,iBAAiB;;;;;;AAGrB;KATS;AAWT,SAAS;IACR,qBACC,oWAAC;QAAI,WAAU;;0BACd,oWAAC,iSAAI;gBAAC,WAAU;;;;;;0BAChB,oWAAC;gBAAE,WAAU;0BAA4C;;;;;;0BAGzD,oWAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;;AAGhD;MAVS;AAkBF,SAAS,sBAAsB,EACrC,kBAAkB,KAAK,EACvB,mBAAmB,KAAK,EACxB,eAAe,IAAI,EACS,GAAG,CAAC,CAAC;;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAAC;IACrC,MAAM,cAAc,IAAA,8UAAM,EAAiB;IAE3C,uCAAuC;IACvC,MAAM,gBAAgB,IAAA,yLAAqB;sEAAC,CAAC,QAAU,MAAM,aAAa;;IAC1E,MAAM,cAAc,IAAA,yLAAqB;oEAAC,CAAC,QAAU,MAAM,WAAW;;IACtE,MAAM,mBAAmB,IAAA,yLAAqB;yEAC7C,CAAC,QAAU,MAAM,gBAAgB;;IAElC,MAAM,uBAAuB,IAAA,yLAAqB;6EACjD,CAAC,QAAU,MAAM,oBAAoB;;IAEtC,MAAM,0BAA0B,IAAA,yLAAqB;gFACpD,CAAC,QAAU,MAAM,uBAAuB;;IAEzC,MAAM,mBAAmB,IAAA,yLAAqB;yEAC7C,CAAC,QAAU,MAAM,gBAAgB;;IAElC,MAAM,YAAY,IAAA,yLAAqB;kEAAC,CAAC,QAAU,MAAM,SAAS;;IAClE,MAAM,cAAc,IAAA,yLAAqB;oEAAC,CAAC,QAAU,MAAM,WAAW;;IAEtE,sCAAsC;IACtC,MAAM,aAAa,IAAA,uKAAY;0DAAC,CAAC,QAAU,MAAM,UAAU,IAAI,EAAE;;IACjE,MAAM,eAAe,IAAA,uKAAY;4DAAC,CAAC,QAAU,MAAM,YAAY,IAAI,EAAE;;IACrE,MAAM,iBAAiB,IAAA,uKAAY;8DAAC,CAAC,QAAU,MAAM,cAAc;;IAEnE,+BAA+B;IAC/B,MAAM,mBAAmB,WAAW,MAAM,CACzC,CAAC,KAAO,GAAG,MAAM,KAAK;IAEvB,MAAM,mBAAmB,WAAW,MAAM,CACzC,CAAC,KAAO,GAAG,MAAM,KAAK,eAAe,GAAG,MAAM,KAAK;IAGpD,MAAM,kBACL,iBAAiB,MAAM,GAAG,KAAK,aAAa,MAAM,GAAG;IACtD,MAAM,iBAAiB,iBAAiB,MAAM,GAAG,aAAa,MAAM;IACpE,MAAM,kBAAkB,cAAc;IAEtC,+DAA+D;IAC/D,MAAM,oBAAoB,IAAA,8UAAM,EAAC;IAEjC,IAAA,iVAAS;2CAAC;YACT,IAAI,CAAC,UAAU,kBAAkB,OAAO,EAAE;gBACzC;YACD;YAEA,IAAI,YAAY;YAEhB,eAAe;gBACd,IAAI;oBACH,MAAM,WAAW,IAAA,wJAAY;oBAE7B,IAAI,CAAC,UAAU;wBACd;oBACD;oBAEA,MAAM,EACL,MAAM,EAAE,IAAI,EAAE,EACd,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;oBAE/B,IAAI,CAAC,MAAM;wBACV;oBACD;oBAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,cAAc;wBAAE,WAAW;oBAAM,GACvC,KAAK,CAAC,GAAG;oBAEX,IAAI,CAAC,aAAa,CAAC,SAAS,MAAM;wBACjC,iBAAiB;oBAClB;oBAEA,IAAI,CAAC,WAAW;wBACf,MAAM,UAAU,KAAK,EAAE;wBACvB,kBAAkB,OAAO,GAAG;oBAC7B;gBACD,EAAE,OAAO,QAAQ;gBAChB,2DAA2D;gBAC5D;YACD;YAEA;YAEA;mDAAO;oBACN,YAAY;gBACb;;QACD;0CAAG;QAAC;QAAQ;QAAkB;KAAU;IAExC,IAAA,iVAAS;2CAAC;YACT;mDAAO;oBACN;gBACD;;QACD;0CAAG;QAAC;KAAY;IAEhB,yCAAyC;IACzC,IAAA,iVAAS;2CAAC;YACT,MAAM;sEAAqB,CAAC;oBAC3B,IACC,YAAY,OAAO,IACnB,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GACzC;wBACD,UAAU;oBACX;gBACD;;YAEA,IAAI,QAAQ;gBACX,SAAS,gBAAgB,CAAC,aAAa;YACxC;YAEA;mDAAO;oBACN,SAAS,mBAAmB,CAAC,aAAa;gBAC3C;;QACD;0CAAG;QAAC;KAAO;IAEX,mDAAmD;IACnD,MAAM,aAAa,OAAO;QACzB,oBAAoB;QACpB,qBAAqB;QAErB,gBAAgB;QAChB,MAAM,SAAS,MAAM,IAAA,sLAAgB,EAAC;QACtC,IAAI,CAAC,OAAO,OAAO,EAAE;YACpB,mEAAmE;YACnE,QAAQ,KAAK,CAAC,wCAAwC,OAAO,KAAK;QACnE;IACD;IAEA,wDAAwD;IACxD,MAAM,gBAAgB;QACrB,oBAAoB;QACpB;QAEA,gBAAgB;QAChB,MAAM,SAAS,MAAM,IAAA,yLAAmB;QACxC,IAAI,CAAC,OAAO,OAAO,EAAE;YACpB,mEAAmE;YACnE,QAAQ,KAAK,CAAC,6CAA6C,OAAO,KAAK;QACxE;IACD;IAEA,6CAA6C;IAC7C,MAAM,qBAAqB,OAAO;QACjC,oBAAoB;QACpB,iBAAiB;QAEjB,gBAAgB;QAChB,MAAM,SAAS,MAAM,IAAA,8LAAwB,EAAC;QAC9C,IAAI,CAAC,OAAO,OAAO,EAAE;YACpB,mEAAmE;YACnE,QAAQ,KAAK,CAAC,kCAAkC,OAAO,KAAK;QAC7D;IACD;IAEA,qBACC,oWAAC;QAAI,WAAU;QAA4B,KAAK;;0BAC/C,oWAAC;gBACA,WAAU;gBACV,SAAS,IAAM,UAAU,CAAC;gBAC1B,OACC,kBAAkB,gCAAgC;gBAEnD,MAAK;;kCAEL,oWAAC;wBAAI,WAAU;;0CACd,oWAAC,iSAAI;gCAAC,WAAU;;;;;;4BACf,iCACA,oWAAC,mTAAO;gCAAC,WAAU;;;;;;;;;;;;kCAGrB,oWAAC;wBAAkB,OAAO;;;;;;kCAC1B,oWAAC;wBAAK,WAAU;;4BAAU;4BACV,cAAc,KAAK,CAAC,CAAC,EAAE,YAAY,QAAQ,CAAC;4BAC1D,mBAAmB,CAAC,GAAG,EAAE,eAAe,QAAQ,CAAC;;;;;;;;;;;;;YAInD,wBACA,oWAAC;gBAAI,WAAU;;kCAEd,oWAAC;wBAAI,WAAU;;0CACd,oWAAC;;kDACA,oWAAC;wCAAG,WAAU;kDACZ,kBAAkB,yBAAyB;;;;;;oCAE5C,CAAC,cAAc,KAAK,eAAe,mBACnC,oWAAC;wCAAE,WAAU;;4CACX,mBAAmB,GAAG,eAAe,QAAQ,CAAC;4CAC9C,mBAAmB,cAAc,KAAK;4CACtC,cAAc,KAAK,GAAG,YAAY,OAAO,CAAC;;;;;;;;;;;;;0CAI9C,oWAAC;gCAAI,WAAU;;oCACb,cAAc,mBACd,oWAAC;wCACA,WAAU;wCACV,SAAS;wCACT,OAAM;wCACN,MAAK;kDAEL,cAAA,oWAAC,uTAAU;4CAAC,WAAU;;;;;;;;;;;kDAGxB,oWAAC;wCACA,WAAU;wCACV,SAAS,IAAM,UAAU;wCACzB,MAAK;kDAEL,cAAA,oWAAC,wRAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;oBAMf,CAAC,iBAAiB,MAAM,GAAG,KAC3B,aAAa,MAAM,GAAG,KACtB,iBAAiB,MAAM,GAAG,CAAC,mBAC3B,oWAAC;wBAAI,WAAU;;4BAEb,iBAAiB,MAAM,GAAG,mBAC1B,oWAAC;gCAAI,WAAU;;kDACd,oWAAC;wCAAE,WAAU;kDAA0E;;;;;;oCAGtF,iBAAiB,GAAG,CAAC,CAAC,mBACtB,oWAAC;4CACA,WAAU;;8DAGV,oWAAC,mTAAO;oDAAC,WAAU;;;;;;8DACnB,oWAAC;oDAAI,WAAU;;sEACd,oWAAC;4DAAE,WAAU;sEACX,GAAG,KAAK;;;;;;wDAET,GAAG,WAAW,kBACd,oWAAC;4DAAE,WAAU;sEACX,GAAG,WAAW;;;;;;wDAGhB,GAAG,KAAK,IAAI,GAAG,KAAK,GAAG,mBACvB,oWAAC;4DAAI,WAAU;;8EACd,oWAAC;oEAAI,WAAU;8EACd,cAAA,oWAAC;wEACA,WAAU;wEACV,OAAO;4EACN,OAAO,GAAG,AAAC,CAAC,GAAG,OAAO,IAAI,CAAC,IAAI,GAAG,KAAK,GAAI,IAAI,CAAC,CAAC;wEAClD;;;;;;;;;;;8EAGF,oWAAC;oEAAE,WAAU;;wEACX,GAAG,OAAO,IAAI;wEAAE;wEAAI,GAAG,KAAK;;;;;;;;;;;;;;;;;;;;2CAvB5B,GAAG,EAAE;;;;;;;;;;;4BAkCb,aAAa,MAAM,GAAG,mBACtB,oWAAC;gCAAI,WAAU;;kDACd,oWAAC;wCAAE,WAAU;;0DACZ,oWAAC;gDAAK,WAAU;;;;;;4CAAsD;;;;;;;oCAGtE,aAAa,GAAG,CAAC,CAAC,mBAClB,oWAAC;4CACA,WAAU;;8DAGV,oWAAC,oSAAK;oDAAC,WAAU;;;;;;8DACjB,oWAAC;oDAAI,WAAU;;sEACd,oWAAC;4DAAE,WAAU;sEACX,GAAG,MAAM;;;;;;sEAEX,oWAAC;4DAAE,WAAU;sEAA8D;;;;;;;;;;;;;2CAPvE,GAAG,EAAE;;;;;;;;;;;4BAiBb,iBAAiB,MAAM,GAAG,mBAC1B,oWAAC;gCAAI,WAAU;;kDACd,oWAAC;wCAAI,WAAU;;0DACd,oWAAC;gDAAE,WAAU;0DAAqE;;;;;;0DAGlF,oWAAC;gDACA,WAAU;gDACV,SAAS;gDACT,MAAK;0DACL;;;;;;;;;;;;oCAID,iBAAiB,GAAG,CAAC,CAAC,mBACtB,oWAAC;4CACA,WAAW,CAAC,sCAAsC,EACjD,GAAG,MAAM,KAAK,cACX,qCACA,gCACF;;gDAGD,GAAG,MAAM,KAAK,4BACd,oWAAC,4TAAY;oDAAC,WAAU;;;;;yEAExB,oWAAC,8SAAO;oDAAC,WAAU;;;;;;8DAEpB,oWAAC;oDAAI,WAAU;;sEACd,oWAAC;4DAAE,WAAU;sEACX,GAAG,KAAK;;;;;;wDAET,GAAG,KAAK,kBACR,oWAAC;4DAAE,WAAU;sEACX,GAAG,KAAK;;;;;;;;;;;;;2CAbP,GAAG,EAAE;;;;;;;;;;;;;;;;;kCAyBhB,oWAAC;wBAAI,WAAU;;4BAEb,CAAC,iCACD,oWAAC;gCAAI,WAAU;0CACd,cAAA,oWAAC;oCAAI,WAAU;;sDAEd,oWAAC;4CAAI,WAAU;;;;;;sDAEf,oWAAC;4CAAI,WAAU;;8DAEd,oWAAC;oDAAI,WAAU;8DACd,cAAA,oWAAC,oSAAK;wDAAC,WAAU;;;;;;;;;;;8DAIlB,oWAAC;oDAAI,WAAU;;sEACd,oWAAC;4DAAE,WAAU;sEAAmC;;;;;;sEAGhD,oWAAC;4DAAE,WAAU;sEAAgD;;;;;;sEAO7D,oWAAC;4DAAI,WAAU;;8EACd,oWAAC;oEAAI,WAAU;;sFACd,oWAAC,0TAAW;4EAAC,WAAU;;;;;;wEAAW;;;;;;;8EAKnC,oWAAC;oEAAI,WAAU;8EACd,cAAA,oWAAC,iVAAI;wEACJ,WAAU;wEACV,MAAK;wEACL,SAAS,IAAM,UAAU;kFACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAYP,CAAC,kCACD,oWAAC;gCAAI,WAAU;0CACd,cAAA,oWAAC;oCAAI,WAAU;;sDAEd,oWAAC;4CAAI,WAAU;;;;;;sDAEf,oWAAC;4CAAI,WAAU;;8DAEd,oWAAC;oDAAI,WAAU;8DACd,cAAA,oWAAC,uTAAU;wDAAC,WAAU;;;;;;;;;;;8DAIvB,oWAAC;oDAAI,WAAU;;sEACd,oWAAC;4DAAE,WAAU;sEAAmC;;;;;;sEAGhD,oWAAC;4DAAE,WAAU;sEAAgD;;;;;;sEAO7D,oWAAC;4DAAI,WAAU;;8EACd,oWAAC;oEAAI,WAAU;;sFACd,oWAAC,0TAAW;4EAAC,WAAU;;;;;;wEAAW;;;;;;;8EAKnC,oWAAC;oEAAI,WAAU;8EACd,cAAA,oWAAC,iVAAI;wEACJ,WAAU;wEACV,MAAK;wEACL,SAAS,IAAM,UAAU;kFACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAWP,cAAc,MAAM,KAAK,KAC1B,mBACA,iCACC,oWAAC;;;;uCACE,cAAc,MAAM,GAAG,kBAC1B,oWAAC;gCAAI,WAAU;0CACb,cAAc,GAAG,CAAC,CAAC;oCACnB,MAAM,OAAO,iBAAiB,CAAC,aAAa,IAAI,CAAC;oCACjD,qBACC,oWAAC;wCACA,WAAW,CAAC,8DAA8D,EACzE,aAAa,IAAI,GAAG,KAAK,gBACxB;;4CAID,CAAC,aAAa,IAAI,kBAClB,oWAAC;gDAAI,WAAU;;;;;;0DAGhB,oWAAC;gDAAI,WAAU;;kEAEd,oWAAC;wDACA,WAAW,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,aAAa,IAAI,CAAC,EAAE;kEAErE,cAAA,oWAAC;4DAAK,WAAU;;;;;;;;;;;kEAIjB,oWAAC;wDAAI,WAAU;;0EACd,oWAAC;gEAAE,WAAU;0EACX,aAAa,KAAK;;;;;;0EAEpB,oWAAC;gEAAE,WAAU;0EACX,aAAa,OAAO;;;;;;0EAItB,oWAAC;gEAAI,WAAU;;kFACd,oWAAC;wEAAI,WAAU;;0FACd,oWAAC,oSAAK;gFAAC,WAAU;;;;;;4EAChB,gBACA,IAAI,KAAK,aAAa,UAAU;;;;;;;kFAKlC,oWAAC;wEAAI,WAAU;;4EACb,aAAa,UAAU,kBACvB,oWAAC,iVAAI;gFACJ,WAAU;gFACV,MAAM,aAAa,UAAU;gFAC7B,SAAS;oFACR,WAAW,aAAa,EAAE;oFAC1B,UAAU;gFACX;0FAEC,aAAa,YAAY,IAAI;;;;;;4EAG/B,CAAC,aAAa,IAAI,kBAClB,oWAAC;gFACA,WAAU;gFACV,SAAS,IAAM,WAAW,aAAa,EAAE;gFACzC,OAAM;gFACN,MAAK;0FAEL,cAAA,oWAAC,oSAAK;oFAAC,WAAU;;;;;;;;;;;0FAGnB,oWAAC;gFACA,WAAU;gFACV,SAAS,IACR,mBAAmB,aAAa,EAAE;gFAEnC,OAAM;gFACN,MAAK;0FAEL,cAAA,oWAAC,2SAAM;oFAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uCAjElB,aAAa,EAAE;;;;;gCAyEvB;;;;;uCAEE;;;;;;;oBAIJ,cAAc,MAAM,GAAG,mBACvB,oWAAC;wBAAI,WAAU;kCACd,cAAA,oWAAC,iVAAI;4BACJ,WAAU;4BACV,MAAK;4BACL,SAAS,IAAM,UAAU;sCACzB;;;;;;;;;;;;;;;;;;;;;;;AASR;GAliBgB;;QASO,yLAAqB;QACvB,yLAAqB;QAChB,yLAAqB;QAGjB,yLAAqB;QAGlB,yLAAqB;QAG5B,yLAAqB;QAG5B,yLAAqB;QACnB,yLAAqB;QAGtB,uKAAY;QACV,uKAAY;QACV,uKAAY;;;MA7BpB"}},
    {"offset": {"line": 1435, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/badge.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1446, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/button.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1457, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/command.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1468, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1479, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/input.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1490, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/popover.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/select.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1512, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/switch.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1523, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/tooltip.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 1534, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/phone-dropdown.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * PhoneDropdown - Enterprise Phone Dialer\n *\n * Full-featured dialer with:\n * - WebRTC primary mode (browser audio)\n * - Call Control API fallback (opens call window)\n * - Connection status monitoring\n * - Automatic reconnection\n * - Customer search\n *\n * References:\n * - https://developers.telnyx.com/docs/voice/webrtc/js-sdk/quickstart\n * - https://developers.telnyx.com/docs/voice/webrtc/js-sdk/error-handling\n */\n\nimport type { Call as TelnyxCall } from \"@telnyx/webrtc\";\nimport {\n\tAlertCircle,\n\tCheck,\n\tChevronDown,\n\tClock,\n\tExternalLink,\n\tHeadphones,\n\tLoader2,\n\tMessageSquare,\n\tMic,\n\tMicOff,\n\tPause,\n\tPhone,\n\tPhoneCall,\n\tPhoneIncoming,\n\tPhoneMissed,\n\tPhoneOff,\n\tPhoneOutgoing,\n\tPlay,\n\tRefreshCw,\n\tServer,\n\tUser,\n\tWifi,\n\tWifiOff,\n\tX,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useCallback, useEffect, useMemo, useRef, useState, useTransition } from \"react\";\nimport { makeCall } from \"@/actions/telnyx\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCommand,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem,\n\tCommandList,\n} from \"@/components/ui/command\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useDialerCustomers } from \"@/hooks/use-dialer-customers\";\nimport { useTelnyxWebRTC, type WebRTCCall, type CallState } from \"@/hooks/use-telnyx-webrtc\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useDialerStore } from \"@/lib/stores/dialer-store\";\nimport { useUIStore } from \"@/lib/stores/ui-store\";\nimport { fetchWebRTCCredentialsOnce, resetWebRTCCredentialsCache } from \"@/lib/telnyx/web-credentials-client\";\nimport { cn } from \"@/lib/utils\";\n\ntype Customer = {\n\tid: string;\n\tfirst_name: string | null;\n\tlast_name: string | null;\n\tdisplay_name: string | null;\n\temail: string | null;\n\tphone: string | null;\n\tsecondary_phone?: string | null;\n\tcompany_name?: string | null;\n};\n\ntype CompanyPhone = {\n\tid: string;\n\tnumber: string;\n\tlabel?: string;\n};\n\ntype PhoneDropdownProps = {\n\tcompanyId: string;\n\tcompanyPhones?: CompanyPhone[];\n\tincomingCallsCount?: number;\n};\n\ntype ConnectionStatus = \"disconnected\" | \"connecting\" | \"connected\" | \"error\";\ntype CallMode = \"webrtc\" | \"api\";\n\n// Constants\nconst WEBRTC_CONNECTION_TIMEOUT = 15000; // 15 seconds\nconst WEBRTC_RETRY_DELAY = 3000; // 3 seconds\n\n// Helper functions\nconst cleanValue = (v?: string | null) => (v ?? \"\").trim();\n\nconst getCustomerName = (c: Customer) => {\n\tif (c.display_name?.trim()) return c.display_name.trim();\n\tconst name = [c.first_name, c.last_name].map(cleanValue).filter(Boolean).join(\" \");\n\treturn name || c.email?.trim() || \"Unknown\";\n};\n\nconst formatPhone = (phone: string) => {\n\tconst d = phone.replace(/\\D/g, \"\");\n\tif (d.length === 11 && d[0] === \"1\") {\n\t\treturn `+1 (${d.slice(1, 4)}) ${d.slice(4, 7)}-${d.slice(7)}`;\n\t}\n\tif (d.length === 10) {\n\t\treturn `(${d.slice(0, 3)}) ${d.slice(3, 6)}-${d.slice(6)}`;\n\t}\n\treturn phone;\n};\n\n/**\n * Connection Status Badge\n */\nfunction ConnectionStatusBadge({\n\tstatus,\n\tmode,\n\tonRetry,\n\tclassName,\n}: {\n\tstatus: ConnectionStatus;\n\tmode: CallMode;\n\tonRetry?: () => void;\n\tclassName?: string;\n}) {\n\tif (mode === \"api\") {\n\t\treturn (\n\t\t\t<Badge variant=\"outline\" className={cn(\"gap-1 text-[10px]\", className)}>\n\t\t\t\t<Server className=\"h-3 w-3\" />\n\t\t\t\tAPI Mode\n\t\t\t</Badge>\n\t\t);\n\t}\n\n\tconst statusConfig: Record<ConnectionStatus, {\n\t\ticon: typeof WifiOff;\n\t\tlabel: string;\n\t\tvariant: \"outline\" | \"destructive\";\n\t\tclassName: string;\n\t\tanimate?: boolean;\n\t}> = {\n\t\tdisconnected: {\n\t\t\ticon: WifiOff,\n\t\t\tlabel: \"Disconnected\",\n\t\t\tvariant: \"outline\",\n\t\t\tclassName: \"text-muted-foreground\",\n\t\t},\n\t\tconnecting: {\n\t\t\ticon: Loader2,\n\t\t\tlabel: \"Connecting...\",\n\t\t\tvariant: \"outline\",\n\t\t\tclassName: \"text-warning\",\n\t\t\tanimate: true,\n\t\t},\n\t\tconnected: {\n\t\t\ticon: Wifi,\n\t\t\tlabel: \"WebRTC Ready\",\n\t\t\tvariant: \"outline\",\n\t\t\tclassName: \"text-success border-success/30\",\n\t\t},\n\t\terror: {\n\t\t\ticon: AlertCircle,\n\t\t\tlabel: \"Connection Error\",\n\t\t\tvariant: \"destructive\",\n\t\t\tclassName: \"\",\n\t\t},\n\t};\n\n\tconst config = statusConfig[status];\n\tconst Icon = config.icon;\n\n\treturn (\n\t\t<div className={cn(\"flex items-center gap-1\", className)}>\n\t\t\t<Badge variant={config.variant} className={cn(\"gap-1 text-[10px]\", config.className)}>\n\t\t\t\t<Icon className={cn(\"h-3 w-3\", config.animate === true && \"animate-spin\")} />\n\t\t\t\t{config.label}\n\t\t\t</Badge>\n\t\t\t{(status === \"error\" || status === \"disconnected\") && onRetry && (\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\tclassName=\"h-5 w-5\"\n\t\t\t\t\tonClick={onRetry}\n\t\t\t\t>\n\t\t\t\t\t<RefreshCw className=\"h-3 w-3\" />\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n/**\n * Active Call Card - Shows when a call is in progress\n */\nfunction ActiveCallCard({\n\tcall,\n\tonMute,\n\tonHold,\n\tonEnd,\n\tclassName,\n}: {\n\tcall: WebRTCCall;\n\tonMute: () => void;\n\tonHold: () => void;\n\tonEnd: () => void;\n\tclassName?: string;\n}) {\n\tconst [duration, setDuration] = useState(0);\n\n\t// Update duration timer\n\tuseEffect(() => {\n\t\tif (call.state !== \"active\") {\n\t\t\tsetDuration(0);\n\t\t\treturn;\n\t\t}\n\n\t\tconst startTime = call.startTime?.getTime() || Date.now();\n\t\tconst interval = setInterval(() => {\n\t\t\tsetDuration(Math.floor((Date.now() - startTime) / 1000));\n\t\t}, 1000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [call.state, call.startTime]);\n\n\tconst formatDuration = (seconds: number) => {\n\t\tconst mins = Math.floor(seconds / 60);\n\t\tconst secs = seconds % 60;\n\t\treturn `${mins}:${secs.toString().padStart(2, \"0\")}`;\n\t};\n\n\tconst stateConfig: Record<CallState, { label: string; color: string; icon: typeof Phone }> = {\n\t\tidle: { label: \"Idle\", color: \"text-muted-foreground\", icon: Phone },\n\t\tconnecting: { label: \"Connecting...\", color: \"text-warning\", icon: PhoneOutgoing },\n\t\tringing: { label: \"Ringing...\", color: \"text-primary\", icon: PhoneOutgoing },\n\t\tactive: { label: \"Active\", color: \"text-success\", icon: PhoneCall },\n\t\theld: { label: \"On Hold\", color: \"text-warning\", icon: Pause },\n\t\tended: { label: \"Call Ended\", color: \"text-muted-foreground\", icon: PhoneOff },\n\t};\n\n\tconst config = stateConfig[call.state];\n\tconst StateIcon = config.icon;\n\n\treturn (\n\t\t<div className={cn(\"rounded-lg border bg-card p-3\", className)}>\n\t\t\t{/* Call info header */}\n\t\t\t<div className=\"mb-3 flex items-center justify-between\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<div className={cn(\"rounded-full bg-primary/10 p-2\", config.color)}>\n\t\t\t\t\t\t<StateIcon className=\"h-4 w-4\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t{call.remoteName || formatPhone(call.remoteNumber)}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className={cn(\"text-xs\", config.color)}>{config.label}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{call.state === \"active\" && (\n\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs tabular-nums\">\n\t\t\t\t\t\t{formatDuration(duration)}\n\t\t\t\t\t</Badge>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Call controls */}\n\t\t\t{(call.state === \"active\" || call.state === \"held\") && (\n\t\t\t\t<div className=\"flex items-center justify-center gap-2\">\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={call.isMuted ? \"destructive\" : \"outline\"}\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tclassName=\"h-9 w-9 rounded-full\"\n\t\t\t\t\t\t\t\tonClick={onMute}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{call.isMuted ? (\n\t\t\t\t\t\t\t\t\t<MicOff className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Mic className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>{call.isMuted ? \"Unmute\" : \"Mute\"}</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={call.isHeld ? \"secondary\" : \"outline\"}\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tclassName=\"h-9 w-9 rounded-full\"\n\t\t\t\t\t\t\t\tonClick={onHold}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{call.isHeld ? (\n\t\t\t\t\t\t\t\t\t<Play className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Pause className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>{call.isHeld ? \"Resume\" : \"Hold\"}</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tclassName=\"h-9 w-9 rounded-full\"\n\t\t\t\t\t\t\t\tonClick={onEnd}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<PhoneOff className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>End Call</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Connecting/Ringing state */}\n\t\t\t{(call.state === \"connecting\" || call.state === \"ringing\") && (\n\t\t\t\t<div className=\"flex items-center justify-center gap-2\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tclassName=\"gap-2\"\n\t\t\t\t\t\tonClick={onEnd}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PhoneOff className=\"h-4 w-4\" />\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport function PhoneDropdown({\n\tcompanyId,\n\tcompanyPhones = [],\n\tincomingCallsCount,\n}: PhoneDropdownProps) {\n\tconst { toast } = useToast();\n\tconst [mounted, setMounted] = useState(false);\n\tconst [isPending, startTransition] = useTransition();\n\n\t// Dropdown & customer state\n\tconst [open, setOpen] = useState(false);\n\tconst { customers, isLoading: customersLoading } = useDialerCustomers(open);\n\tconst dialerStore = useDialerStore();\n\n\t// Form state\n\tconst [toNumber, setToNumber] = useState(\"\");\n\tconst [fromNumber, setFromNumber] = useState(companyPhones[0]?.number || \"\");\n\tconst [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n\tconst [customerSearchOpen, setCustomerSearchOpen] = useState(false);\n\tconst [customerSearchQuery, setCustomerSearchQuery] = useState(\"\");\n\n\t// WebRTC state\n\tconst [callMode, setCallMode] = useState<CallMode>(\"webrtc\");\n\tconst [webrtcCredentials, setWebrtcCredentials] = useState<{\n\t\tusername: string;\n\t\tpassword: string;\n\t} | null>(null);\n\tconst [connectionStatus, setConnectionStatus] = useState<ConnectionStatus>(\"disconnected\");\n\tconst [connectionError, setConnectionError] = useState<string | null>(null);\n\tconst connectionTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\tconst retryCountRef = useRef(0);\n\tconst maxRetries = 3;\n\n\t// Audio element for WebRTC\n\tconst audioRef = useRef<HTMLAudioElement | null>(null);\n\n\t// Call state from UI store\n\tconst callStatus = useUIStore((s) => s.call.status);\n\tconst caller = useUIStore((s) => s.call.caller);\n\tconst hasIncomingCall = callStatus === \"incoming\";\n\tconst displayCount = incomingCallsCount ?? (hasIncomingCall ? 1 : 0);\n\n\t// WebRTC hook\n\tconst webrtc = useTelnyxWebRTC({\n\t\tusername: webrtcCredentials?.username || \"\",\n\t\tpassword: webrtcCredentials?.password || \"\",\n\t\tautoConnect: false,\n\t\tdebug: process.env.NODE_ENV === \"development\",\n\t\tonIncomingCall: (call) => {\n\t\t\ttoast.info(`Incoming call from ${call.remoteName || call.remoteNumber}`);\n\t\t},\n\t\tonCallEnded: () => {\n\t\t\ttoast.info(\"Call ended\");\n\t\t},\n\t});\n\n\t// Mount\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t\t// Create audio element for WebRTC\n\t\tif (typeof window !== \"undefined\" && !audioRef.current) {\n\t\t\tconst audio = document.createElement(\"audio\");\n\t\t\taudio.id = \"telnyx-remote-audio\";\n\t\t\taudio.autoplay = true;\n\t\t\taudio.style.display = \"none\";\n\t\t\tdocument.body.appendChild(audio);\n\t\t\taudioRef.current = audio;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (audioRef.current) {\n\t\t\t\taudioRef.current.remove();\n\t\t\t\taudioRef.current = null;\n\t\t\t}\n\t\t};\n\t}, []);\n\n\t// Sync from number\n\tuseEffect(() => {\n\t\tif (!fromNumber && companyPhones.length > 0) {\n\t\t\tsetFromNumber(companyPhones[0].number);\n\t\t}\n\t}, [companyPhones, fromNumber]);\n\n\t// Sync dialer store\n\tuseEffect(() => setOpen(dialerStore.isOpen), [dialerStore.isOpen]);\n\tuseEffect(() => setToNumber(dialerStore.phoneNumber), [dialerStore.phoneNumber]);\n\tuseEffect(() => {\n\t\tif (dialerStore.customerId && customers.length > 0) {\n\t\t\tconst c = customers.find((x) => x.id === dialerStore.customerId);\n\t\t\tif (c && c.id !== selectedCustomer?.id) setSelectedCustomer(c);\n\t\t}\n\t}, [dialerStore.customerId, customers, selectedCustomer?.id]);\n\n\t// Fetch WebRTC credentials on mount\n\tuseEffect(() => {\n\t\tif (!mounted) return;\n\n\t\tconst fetchCredentials = async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await fetchWebRTCCredentialsOnce();\n\t\t\t\tif (result.success && result.credential) {\n\t\t\t\t\tsetWebrtcCredentials({\n\t\t\t\t\t\tusername: result.credential.username,\n\t\t\t\t\t\tpassword: result.credential.password,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Failed to get WebRTC credentials, using API mode\");\n\t\t\t\t\tsetCallMode(\"api\");\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to fetch WebRTC credentials:\", error);\n\t\t\t\tsetCallMode(\"api\");\n\t\t\t}\n\t\t};\n\n\t\tfetchCredentials();\n\t}, [mounted]);\n\n\t// Connect WebRTC when credentials are available\n\tuseEffect(() => {\n\t\tif (!webrtcCredentials || callMode !== \"webrtc\") return;\n\n\t\tconst connectWebRTC = async () => {\n\t\t\t// Clear any existing timeout\n\t\t\tif (connectionTimeoutRef.current) {\n\t\t\t\tclearTimeout(connectionTimeoutRef.current);\n\t\t\t}\n\n\t\t\tsetConnectionStatus(\"connecting\");\n\t\t\tsetConnectionError(null);\n\n\t\t\t// Set connection timeout\n\t\t\tconnectionTimeoutRef.current = setTimeout(() => {\n\t\t\t\tif (connectionStatus === \"connecting\") {\n\t\t\t\t\tsetConnectionStatus(\"error\");\n\t\t\t\t\tsetConnectionError(\"Connection timeout - WebRTC may require Level 2 verification\");\n\n\t\t\t\t\t// Auto-fallback to API mode after timeout\n\t\t\t\t\tif (retryCountRef.current >= maxRetries) {\n\t\t\t\t\t\ttoast.warning(\"WebRTC unavailable, switching to API mode\");\n\t\t\t\t\t\tsetCallMode(\"api\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, WEBRTC_CONNECTION_TIMEOUT);\n\n\t\t\ttry {\n\t\t\t\tawait webrtc.connect();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"WebRTC connection error:\", error);\n\t\t\t\tsetConnectionStatus(\"error\");\n\t\t\t\tsetConnectionError(error instanceof Error ? error.message : \"Connection failed\");\n\t\t\t}\n\t\t};\n\n\t\tconnectWebRTC();\n\n\t\treturn () => {\n\t\t\tif (connectionTimeoutRef.current) {\n\t\t\t\tclearTimeout(connectionTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t}, [webrtcCredentials, callMode]);\n\n\t// Sync WebRTC connection state\n\tuseEffect(() => {\n\t\tif (webrtc.isConnected) {\n\t\t\tif (connectionTimeoutRef.current) {\n\t\t\t\tclearTimeout(connectionTimeoutRef.current);\n\t\t\t}\n\t\t\tsetConnectionStatus(\"connected\");\n\t\t\tsetConnectionError(null);\n\t\t\tretryCountRef.current = 0;\n\t\t} else if (webrtc.connectionError) {\n\t\t\tsetConnectionStatus(\"error\");\n\t\t\tsetConnectionError(webrtc.connectionError);\n\t\t} else if (webrtc.isConnecting) {\n\t\t\tsetConnectionStatus(\"connecting\");\n\t\t}\n\t}, [webrtc.isConnected, webrtc.isConnecting, webrtc.connectionError]);\n\n\t// Handlers\n\tconst handleOpenChange = useCallback((newOpen: boolean) => {\n\t\tsetOpen(newOpen);\n\t\tif (newOpen) {\n\t\t\tdialerStore.openDialer();\n\t\t} else {\n\t\t\tdialerStore.closeDialer();\n\t\t\tsetToNumber(\"\");\n\t\t\tsetSelectedCustomer(null);\n\t\t\tsetCustomerSearchQuery(\"\");\n\t\t}\n\t}, [dialerStore]);\n\n\tconst handleCustomerSelect = useCallback((c: Customer | null) => {\n\t\tsetSelectedCustomer(c);\n\t\tif (c?.phone) setToNumber(c.phone);\n\t\tsetCustomerSearchQuery(\"\");\n\t\tsetCustomerSearchOpen(false);\n\t}, []);\n\n\tconst handleRetryConnection = useCallback(() => {\n\t\tretryCountRef.current += 1;\n\n\t\tif (retryCountRef.current > maxRetries) {\n\t\t\ttoast.warning(\"Max retries reached, switching to API mode\");\n\t\t\tsetCallMode(\"api\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Reset credentials cache and refetch\n\t\tresetWebRTCCredentialsCache();\n\t\tsetWebrtcCredentials(null);\n\t\tsetConnectionStatus(\"disconnected\");\n\t\tsetConnectionError(null);\n\n\t\t// Refetch credentials\n\t\tfetchWebRTCCredentialsOnce().then((result) => {\n\t\t\tif (result.success && result.credential) {\n\t\t\t\tsetWebrtcCredentials({\n\t\t\t\t\tusername: result.credential.username,\n\t\t\t\t\tpassword: result.credential.password,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}, [toast]);\n\n\tconst handleModeToggle = useCallback((checked: boolean) => {\n\t\tsetCallMode(checked ? \"webrtc\" : \"api\");\n\t}, []);\n\n\t// Filter customers\n\tconst filteredCustomers = useMemo(() => {\n\t\tconst q = customerSearchQuery.trim().toLowerCase();\n\t\tif (!q) return customers.slice(0, 50);\n\n\t\tconst qDigits = q.replace(/\\D/g, \"\");\n\t\treturn customers.filter((c) => {\n\t\t\tconst searchable = [\n\t\t\t\tc.first_name, c.last_name, c.display_name,\n\t\t\t\tc.email, c.phone, c.secondary_phone, c.company_name,\n\t\t\t].map((v) => cleanValue(v).toLowerCase());\n\n\t\t\tif (searchable.some((s) => s.includes(q))) return true;\n\t\t\tif (qDigits) {\n\t\t\t\tconst phones = [c.phone, c.secondary_phone]\n\t\t\t\t\t.map((p) => cleanValue(p).replace(/\\D/g, \"\"))\n\t\t\t\t\t.filter(Boolean);\n\t\t\t\tif (phones.some((p) => p.includes(qDigits))) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}, [customers, customerSearchQuery]);\n\n\t// Make call via API (used for fallback and API mode)\n\tconst handleAPICall = useCallback(async () => {\n\t\tif (isPending) return;\n\n\t\tif (!companyId) {\n\t\t\ttoast.error(\"No company selected. Please select a company first.\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst to = toNumber.replace(/\\D/g, \"\");\n\t\tif (!to) {\n\t\t\ttoast.error(\"Please enter a valid phone number\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!fromNumber) {\n\t\t\ttoast.error(\"Please select a company phone number\");\n\t\t\treturn;\n\t\t}\n\n\t\tstartTransition(async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await makeCall({\n\t\t\t\t\tto,\n\t\t\t\t\tfrom: fromNumber,\n\t\t\t\t\tcompanyId,\n\t\t\t\t\tcustomerId: selectedCustomer?.id,\n\t\t\t\t});\n\n\t\t\t\tif (!result.success) {\n\t\t\t\t\ttoast.error(result.error || \"Failed to start call\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttoast.success(\n\t\t\t\t\tselectedCustomer\n\t\t\t\t\t\t? `Calling ${getCustomerName(selectedCustomer)}`\n\t\t\t\t\t\t: `Calling ${formatPhone(toNumber)}`\n\t\t\t\t);\n\n\t\t\t\t// Open call window\n\t\t\t\tconst params = new URLSearchParams({\n\t\t\t\t\tcallControlId: result.callControlId || \"\",\n\t\t\t\t\tcompanyId,\n\t\t\t\t\tto,\n\t\t\t\t\tfrom: fromNumber,\n\t\t\t\t\tdirection: \"outbound\",\n\t\t\t\t\t...(selectedCustomer?.id && { customerId: selectedCustomer.id }),\n\t\t\t\t});\n\n\t\t\t\twindow.open(`/call?${params}`, \"_blank\", \"noopener,noreferrer\");\n\n\t\t\t\t// Reset\n\t\t\t\thandleOpenChange(false);\n\t\t\t} catch {\n\t\t\t\ttoast.error(\"Failed to start call. Please try again.\");\n\t\t\t}\n\t\t});\n\t}, [companyId, toNumber, fromNumber, selectedCustomer, isPending, toast, handleOpenChange]);\n\n\t// Make call via WebRTC (primary mode)\n\tconst handleWebRTCCall = useCallback(async () => {\n\t\tconst to = toNumber.replace(/\\D/g, \"\");\n\t\tif (!to) {\n\t\t\ttoast.error(\"Please enter a valid phone number\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!webrtc.isConnected) {\n\t\t\ttoast.error(\"WebRTC not connected. Trying API mode...\");\n\t\t\thandleAPICall();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!fromNumber) {\n\t\t\ttoast.error(\"Please select a company phone number\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait webrtc.makeCall(to, fromNumber);\n\t\t\ttoast.success(\n\t\t\t\tselectedCustomer\n\t\t\t\t\t? `Calling ${getCustomerName(selectedCustomer)}`\n\t\t\t\t\t: `Calling ${formatPhone(toNumber)}`\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"WebRTC call error:\", error);\n\t\t\ttoast.error(\"Failed to start call via WebRTC\");\n\n\t\t\t// Fallback to API\n\t\t\ttoast.info(\"Falling back to API mode...\");\n\t\t\thandleAPICall();\n\t\t}\n\t}, [toNumber, fromNumber, selectedCustomer, webrtc, toast, handleAPICall]);\n\n\t// Start call based on mode\n\tconst handleStartCall = useCallback(() => {\n\t\tif (callMode === \"webrtc\" && webrtc.isConnected) {\n\t\t\thandleWebRTCCall();\n\t\t} else {\n\t\t\thandleAPICall();\n\t\t}\n\t}, [callMode, webrtc.isConnected, handleWebRTCCall, handleAPICall]);\n\n\t// Handle WebRTC call controls\n\tconst handleMuteToggle = useCallback(async () => {\n\t\ttry {\n\t\t\tif (webrtc.currentCall?.isMuted) {\n\t\t\t\tawait webrtc.unmuteCall();\n\t\t\t} else {\n\t\t\t\tawait webrtc.muteCall();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Mute toggle error:\", error);\n\t\t}\n\t}, [webrtc]);\n\n\tconst handleHoldToggle = useCallback(async () => {\n\t\ttry {\n\t\t\tif (webrtc.currentCall?.isHeld) {\n\t\t\t\tawait webrtc.unholdCall();\n\t\t\t} else {\n\t\t\t\tawait webrtc.holdCall();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Hold toggle error:\", error);\n\t\t}\n\t}, [webrtc]);\n\n\tconst handleEndCall = useCallback(async () => {\n\t\ttry {\n\t\t\tawait webrtc.endCall();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"End call error:\", error);\n\t\t}\n\t}, [webrtc]);\n\n\tconst canCall = Boolean(toNumber.trim() && fromNumber && companyPhones.length > 0);\n\tconst isWebRTCReady = callMode === \"webrtc\" && connectionStatus === \"connected\";\n\tconst hasActiveCall = webrtc.currentCall && webrtc.currentCall.state !== \"idle\" && webrtc.currentCall.state !== \"ended\";\n\n\t// SSR placeholder\n\tif (!mounted) {\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName=\"flex h-8 w-8 items-center justify-center rounded-md border border-transparent opacity-50\"\n\t\t\t\tdisabled\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<Phone className=\"h-4 w-4\" />\n\t\t\t</button>\n\t\t);\n\t}\n\n\treturn (\n\t\t<TooltipProvider delayDuration={200}>\n\t\t\t<DropdownMenu open={open} onOpenChange={handleOpenChange}>\n\t\t\t\t<Tooltip>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex h-8 w-8 items-center justify-center rounded-md\",\n\t\t\t\t\t\t\t\t\t\"border border-transparent transition-all\",\n\t\t\t\t\t\t\t\t\t\"hover:border-primary/20 hover:bg-primary/10 hover:text-primary\",\n\t\t\t\t\t\t\t\t\t\"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/50\",\n\t\t\t\t\t\t\t\t\thasIncomingCall && \"animate-pulse text-primary\",\n\t\t\t\t\t\t\t\t\thasActiveCall && \"text-success\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasActiveCall ? (\n\t\t\t\t\t\t\t\t\t<PhoneCall className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t) : hasIncomingCall ? (\n\t\t\t\t\t\t\t\t\t<PhoneIncoming className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Phone className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{displayCount > 0 && (\n\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full p-0 text-[10px]\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{displayCount > 9 ? \"9+\" : displayCount}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent side=\"bottom\">\n\t\t\t\t\t\t{hasActiveCall ? \"Call in Progress\" : hasIncomingCall ? \"Incoming Call\" : \"Make a Call\"}\n\t\t\t\t\t</TooltipContent>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-80 p-0\">\n\t\t\t\t\t<div className=\"space-y-3 p-4\">\n\t\t\t\t\t\t{/* Header */}\n\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t<div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10\">\n\t\t\t\t\t\t\t\t\t<PhoneCall className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t<h3 className=\"text-sm font-semibold\">Make a Call</h3>\n\t\t\t\t\t\t\t\t\t<ConnectionStatusBadge\n\t\t\t\t\t\t\t\t\t\tstatus={connectionStatus}\n\t\t\t\t\t\t\t\t\t\tmode={callMode}\n\t\t\t\t\t\t\t\t\t\tonRetry={handleRetryConnection}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Mode toggle */}\n\t\t\t\t\t\t<div className=\"flex items-center justify-between rounded-lg border bg-muted/30 p-2\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<Server className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">API Mode</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\tchecked={callMode === \"webrtc\"}\n\t\t\t\t\t\t\t\tonCheckedChange={handleModeToggle}\n\t\t\t\t\t\t\t\tdisabled={!webrtcCredentials}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">Browser Audio</span>\n\t\t\t\t\t\t\t\t<Headphones className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Active call card */}\n\t\t\t\t\t\t{hasActiveCall && webrtc.currentCall && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ActiveCallCard\n\t\t\t\t\t\t\t\t\tcall={webrtc.currentCall}\n\t\t\t\t\t\t\t\t\tonMute={handleMuteToggle}\n\t\t\t\t\t\t\t\t\tonHold={handleHoldToggle}\n\t\t\t\t\t\t\t\t\tonEnd={handleEndCall}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Incoming call alert */}\n\t\t\t\t\t\t{hasIncomingCall && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 rounded-lg border border-destructive/30 bg-destructive/10 p-3\">\n\t\t\t\t\t\t\t\t\t<PhoneIncoming className=\"h-5 w-5 shrink-0 animate-pulse text-destructive\" />\n\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-destructive\">Incoming Call</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"truncate text-xs text-destructive/80\">\n\t\t\t\t\t\t\t\t\t\t\t{caller?.name || caller?.number || \"Unknown\"}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Connection error message */}\n\t\t\t\t\t\t{connectionError && callMode === \"webrtc\" && (\n\t\t\t\t\t\t\t<div className=\"rounded-lg border border-warning/30 bg-warning/10 p-2\">\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-warning\">{connectionError}</p>\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tCalls will use API mode (opens in new window)\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Customer search */}\n\t\t\t\t\t\t{!hasActiveCall && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"space-y-1.5\">\n\t\t\t\t\t\t\t\t\t<label className=\"text-xs font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tCustomer (optional)\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<Popover open={customerSearchOpen} onOpenChange={setCustomerSearchOpen}>\n\t\t\t\t\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-9 w-full justify-start gap-2 px-3 font-normal\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={customersLoading}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<User className=\"h-4 w-4 shrink-0 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"min-w-0 flex-1 truncate text-left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCustomer ? getCustomerName(selectedCustomer) : \"Search...\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedCustomer && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 shrink-0 text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleCustomerSelect(null);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t\t\t\t\t<PopoverContent align=\"start\" className=\"w-80 p-0\" sideOffset={4}>\n\t\t\t\t\t\t\t\t\t\t\t<Command shouldFilter={false}>\n\t\t\t\t\t\t\t\t\t\t\t\t<CommandInput\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Name, phone, or email...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={customerSearchQuery}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonValueChange={setCustomerSearchQuery}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<CommandList className=\"max-h-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CommandEmpty className=\"py-4 text-center text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo customers found\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CommandEmpty>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CommandGroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{filteredCustomers.map((c) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={c.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={c.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={() => handleCustomerSelect(c)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex cursor-pointer items-center gap-2 px-3 py-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"truncate text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getCustomerName(c)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{c.phone && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"truncate text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatPhone(c.phone)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCustomer?.id === c.id && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 shrink-0 text-primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t\t\t\t\t\t\t</CommandList>\n\t\t\t\t\t\t\t\t\t\t\t</Command>\n\t\t\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Phone number */}\n\t\t\t\t\t\t\t\t<div className=\"space-y-1.5\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"phone-to\" className=\"text-xs font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tPhone Number\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tid=\"phone-to\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\t\t\t\tvalue={toNumber}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setToNumber(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-9\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* From number */}\n\t\t\t\t\t\t\t\t<div className=\"space-y-1.5\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"phone-from\" className=\"text-xs font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tYour Company Line\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<Select value={fromNumber} onValueChange={setFromNumber}>\n\t\t\t\t\t\t\t\t\t\t<SelectTrigger id=\"phone-from\" className=\"h-9\">\n\t\t\t\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select line...\" />\n\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t{companyPhones.map((p) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={p.id} value={p.number}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{p.label || formatPhone(p.number)}\n\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t{companyPhones.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tNo phone numbers configured\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Call button */}\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"w-full gap-2\"\n\t\t\t\t\t\t\t\t\tdisabled={!canCall || isPending}\n\t\t\t\t\t\t\t\t\tonClick={handleStartCall}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{isPending ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\tStarting...\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : isWebRTCReady ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Headphones className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\tCall (Browser Audio)\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<PhoneOutgoing className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\tCall (Opens Window)\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Quick links */}\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\thref=\"/dashboard/communication?filter=calls\"\n\t\t\t\t\t\t\t\tonClick={() => handleOpenChange(false)}\n\t\t\t\t\t\t\t\tclassName=\"flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-muted-foreground transition-colors hover:bg-muted hover:text-foreground\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\tHistory\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\thref=\"/dashboard/communication\"\n\t\t\t\t\t\t\t\tonClick={() => handleOpenChange(false)}\n\t\t\t\t\t\t\t\tclassName=\"flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-muted-foreground transition-colors hover:bg-muted hover:text-foreground\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MessageSquare className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\tMessages\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</DropdownMenuContent>\n\t\t\t</DropdownMenu>\n\t\t</TooltipProvider>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3220, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/quick-add-dropdown.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * QuickAddDropdown - Client Component\n *\n * Quick access dropdown menu for creating new records across the application.\n * Provides one-click access to common creation actions from the main header.\n *\n * Client-side features:\n * - Dropdown menu with grouped actions by category\n * - Keyboard shortcuts display for power users\n * - Icon-based visual hierarchy\n * - Accessible with screen reader support\n *\n * Performance:\n * - Uses shadcn/ui DropdownMenu (Radix UI primitives)\n * - No data fetching - purely navigation-based\n * - Minimal bundle impact (~2KB)\n * - Client-only rendering to prevent hydration mismatch\n */\n\nimport {\n\tBriefcase,\n\tCalendar,\n\tDollarSign,\n\tFileSignature,\n\tFileSpreadsheet,\n\tFileText,\n\tPlus,\n\tTag,\n\tUserPlus,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuGroup,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuShortcut,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ntype QuickAddAction = {\n\tlabel: string;\n\thref: string;\n\ticon: typeof Plus;\n\tshortcut?: string;\n\tdescription?: string;\n};\n\nconst quickAddActions: Record<string, QuickAddAction[]> = {\n\tWork: [\n\t\t{\n\t\t\tlabel: \"New Job\",\n\t\t\thref: \"/dashboard/work/new\",\n\t\t\ticon: Briefcase,\n\t\t\tshortcut: \"⌘J\",\n\t\t\tdescription: \"Create a new work order\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"New Invoice\",\n\t\t\thref: \"/dashboard/work/invoices/new\",\n\t\t\ticon: FileText,\n\t\t\tshortcut: \"⌘I\",\n\t\t\tdescription: \"Generate an invoice\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"New Estimate\",\n\t\t\thref: \"/dashboard/work/estimates/new\",\n\t\t\ticon: FileSpreadsheet,\n\t\t\tshortcut: \"⌘E\",\n\t\t\tdescription: \"Create a quote\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"New Contract\",\n\t\t\thref: \"/dashboard/work/contracts/new\",\n\t\t\ticon: FileSignature,\n\t\t\tdescription: \"Draft a service contract\",\n\t\t},\n\t],\n\tCustomers: [\n\t\t{\n\t\t\tlabel: \"New Customer\",\n\t\t\thref: \"/dashboard/customers/new\",\n\t\t\ticon: UserPlus,\n\t\t\tshortcut: \"⌘K\",\n\t\t\tdescription: \"Add a customer\",\n\t\t},\n\t],\n\tFinance: [\n\t\t{\n\t\t\tlabel: \"Record Payment\",\n\t\t\thref: \"/dashboard/finance/payments/new\",\n\t\t\ticon: DollarSign,\n\t\t\tdescription: \"Log a payment\",\n\t\t},\n\t],\n\tOther: [\n\t\t{\n\t\t\tlabel: \"Schedule Job\",\n\t\t\thref: \"/dashboard/schedule/new\",\n\t\t\ticon: Calendar,\n\t\t\tdescription: \"Add to schedule\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"Price Book Item\",\n\t\t\thref: \"/dashboard/work/pricebook/new\",\n\t\t\ticon: Tag,\n\t\t\tdescription: \"Add inventory item\",\n\t\t},\n\t],\n};\n\nexport function QuickAddDropdown() {\n\tconst [mounted, setMounted] = useState(false);\n\n\t// Only render on client to prevent hydration mismatch with Radix UI IDs\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\tif (!mounted) {\n\t\t// Render placeholder button during SSR that matches client button dimensions\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName=\"hover-gradient hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:ring-ring/50 flex h-8 w-8 items-center justify-center rounded-md border border-transparent transition-all outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50\"\n\t\t\t\tdisabled\n\t\t\t\ttitle=\"Quick Add\"\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t<span className=\"sr-only\">Quick Add Menu</span>\n\t\t\t</button>\n\t\t);\n\t}\n\n\treturn (\n\t\t<DropdownMenu>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"hover-gradient hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:ring-ring/50 flex h-8 w-8 items-center justify-center rounded-md border border-transparent transition-all outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50\"\n\t\t\t\t\ttitle=\"Quick Add\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t\t<span className=\"sr-only\">Quick Add Menu</span>\n\t\t\t\t</button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"end\" className=\"w-64 rounded-lg\">\n\t\t\t\t<DropdownMenuLabel className=\"font-semibold\">\n\t\t\t\t\tQuick Add\n\t\t\t\t</DropdownMenuLabel>\n\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t{Object.entries(quickAddActions).map(([category, actions], index) => (\n\t\t\t\t\t<div key={category}>\n\t\t\t\t\t\t{index > 0 && <DropdownMenuSeparator />}\n\t\t\t\t\t\t<DropdownMenuLabel className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t{category}\n\t\t\t\t\t\t</DropdownMenuLabel>\n\t\t\t\t\t\t<DropdownMenuGroup>\n\t\t\t\t\t\t\t{actions.map((action) => {\n\t\t\t\t\t\t\t\tconst Icon = action.icon;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<DropdownMenuItem asChild key={action.href}>\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2\"\n\t\t\t\t\t\t\t\t\t\t\thref={action.href}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-1 flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm\">{action.label}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{action.description && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{action.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{action.shortcut && (\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuShortcut>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{action.shortcut}\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuShortcut>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</DropdownMenuGroup>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;;;;;;;;;;;CAiBC,GAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AAAA;;;AAlCA;;;;;AAqDA,MAAM,kBAAoD;IACzD,MAAM;QACL;YACC,OAAO;YACP,MAAM;YACN,MAAM,gTAAS;YACf,UAAU;YACV,aAAa;QACd;QACA;YACC,OAAO;YACP,MAAM;YACN,MAAM,iTAAQ;YACd,UAAU;YACV,aAAa;QACd;QACA;YACC,OAAO;YACP,MAAM;YACN,MAAM,sUAAe;YACrB,UAAU;YACV,aAAa;QACd;QACA;YACC,OAAO;YACP,MAAM;YACN,MAAM,kUAAa;YACnB,aAAa;QACd;KACA;IACD,WAAW;QACV;YACC,OAAO;YACP,MAAM;YACN,MAAM,iTAAQ;YACd,UAAU;YACV,aAAa;QACd;KACA;IACD,SAAS;QACR;YACC,OAAO;YACP,MAAM;YACN,MAAM,uTAAU;YAChB,aAAa;QACd;KACA;IACD,OAAO;QACN;YACC,OAAO;YACP,MAAM;YACN,MAAM,6SAAQ;YACd,aAAa;QACd;QACA;YACC,OAAO;YACP,MAAM;YACN,MAAM,8RAAG;YACT,aAAa;QACd;KACA;AACF;AAEO,SAAS;;IACf,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IAEvC,wEAAwE;IACxE,IAAA,iVAAS;sCAAC;YACT,WAAW;QACZ;qCAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACb,6EAA6E;QAC7E,qBACC,oWAAC;YACA,WAAU;YACV,QAAQ;YACR,OAAM;YACN,MAAK;;8BAEL,oWAAC,iSAAI;oBAAC,WAAU;;;;;;8BAChB,oWAAC;oBAAK,WAAU;8BAAU;;;;;;;;;;;;IAG7B;IAEA,qBACC,oWAAC,6JAAY;;0BACZ,oWAAC,oKAAmB;gBAAC,OAAO;0BAC3B,cAAA,oWAAC;oBACA,WAAU;oBACV,OAAM;oBACN,MAAK;;sCAEL,oWAAC,iSAAI;4BAAC,WAAU;;;;;;sCAChB,oWAAC;4BAAK,WAAU;sCAAU;;;;;;;;;;;;;;;;;0BAG5B,oWAAC,oKAAmB;gBAAC,OAAM;gBAAM,WAAU;;kCAC1C,oWAAC,kKAAiB;wBAAC,WAAU;kCAAgB;;;;;;kCAG7C,oWAAC,sKAAqB;;;;;oBAErB,OAAO,OAAO,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC,UAAU,QAAQ,EAAE,sBAC1D,oWAAC;;gCACC,QAAQ,mBAAK,oWAAC,sKAAqB;;;;;8CACpC,oWAAC,kKAAiB;oCAAC,WAAU;8CAC3B;;;;;;8CAEF,oWAAC,kKAAiB;8CAChB,QAAQ,GAAG,CAAC,CAAC;wCACb,MAAM,OAAO,OAAO,IAAI;wCACxB,qBACC,oWAAC,iKAAgB;4CAAC,OAAO;sDACxB,cAAA,oWAAC,iVAAI;gDACJ,WAAU;gDACV,MAAM,OAAO,IAAI;;kEAEjB,oWAAC;wDAAK,WAAU;;;;;;kEAChB,oWAAC;wDAAI,WAAU;;0EACd,oWAAC;gEAAK,WAAU;0EAAW,OAAO,KAAK;;;;;;4DACtC,OAAO,WAAW,kBAClB,oWAAC;gEAAK,WAAU;0EACd,OAAO,WAAW;;;;;;;;;;;;oDAIrB,OAAO,QAAQ,kBACf,oWAAC,qKAAoB;kEACnB,OAAO,QAAQ;;;;;;;;;;;;2CAhBW,OAAO,IAAI;;;;;oCAsB5C;;;;;;;2BA/BQ;;;;;;;;;;;;;;;;;AAsCf;GAhFgB;KAAA"}},
    {"offset": {"line": 3525, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/avatar.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 3536, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/user-menu.tsx"],"sourcesContent":["\"use client\";\n\nimport { signOut } from \"@/actions/auth\";\nimport { switchCompany } from \"@/actions/company-context\";\nimport { type UserStatus, updateUserStatus } from \"@/actions/user-status\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tBuilding2,\n\tCheck,\n\tChevronRight,\n\tCreditCard,\n\tHelpCircle,\n\tKeyboard,\n\tLogOut,\n\tMonitor,\n\tMoon,\n\tPlus,\n\tSettings,\n\tSun,\n\tUser,\n} from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\ntype UserMenuProps = {\n\tuser: {\n\t\tname: string;\n\t\temail: string;\n\t\tavatar: string;\n\t\tstatus?: UserStatus;\n\t};\n\tteams: {\n\t\tid: string;\n\t\tname: string;\n\t\tlogo?: string | null;\n\t\tplan: string;\n\t\tonboardingComplete?: boolean;\n\t\thasPayment?: boolean;\n\t}[];\n\tactiveCompanyId?: string | null;\n};\n\nconst STATUS_CONFIG: Record<\n\tUserStatus,\n\t{ label: string; color: string; description: string }\n> = {\n\tonline: {\n\t\tlabel: \"Online\",\n\t\tcolor: \"bg-green-500\",\n\t\tdescription: \"Available for work\",\n\t},\n\tavailable: {\n\t\tlabel: \"Away\",\n\t\tcolor: \"bg-yellow-500\",\n\t\tdescription: \"Temporarily unavailable\",\n\t},\n\tbusy: {\n\t\tlabel: \"Do not disturb\",\n\t\tcolor: \"bg-red-500\",\n\t\tdescription: \"Only urgent matters\",\n\t},\n\toffline: {\n\t\tlabel: \"Offline\",\n\t\tcolor: \"bg-gray-400\",\n\t\tdescription: \"Appear offline\",\n\t},\n};\n\nexport function UserMenu({ user, teams, activeCompanyId }: UserMenuProps) {\n\tconst { theme, setTheme } = useTheme();\n\tconst [mounted, setMounted] = useState(false);\n\tconst [userStatus, setUserStatus] = useState<UserStatus>(\n\t\tuser.status || \"online\"\n\t);\n\tconst [isUpdatingStatus, setIsUpdatingStatus] = useState(false);\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst initialActiveTeam =\n\t\tteams.find((t) => t.id === activeCompanyId) || teams[0];\n\tconst [activeTeam, setActiveTeam] = useState(initialActiveTeam);\n\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\tconst handleCompanySwitch = async (team: (typeof teams)[0]) => {\n\t\tif (activeTeam?.id === team.id) return;\n\t\tconst result = await switchCompany(team.id);\n\t\tif (result.success) {\n\t\t\tsetActiveTeam(team);\n\t\t}\n\t};\n\n\tconst handleLogout = async () => {\n\t\tawait signOut();\n\t};\n\n\tconst handleStatusChange = async (status: UserStatus) => {\n\t\tsetIsUpdatingStatus(true);\n\t\ttry {\n\t\t\tconst result = await updateUserStatus(status);\n\t\t\tif (result.success) {\n\t\t\t\tsetUserStatus(status);\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsUpdatingStatus(false);\n\t\t}\n\t};\n\n\tconst getCurrentTheme = () => {\n\t\tif (!mounted) return \"system\";\n\t\treturn theme === \"light\" ? \"light\" : theme === \"dark\" ? \"dark\" : \"system\";\n\t};\n\n\tconst getInitials = (name?: string, email?: string) => {\n\t\tif (name) {\n\t\t\treturn name\n\t\t\t\t.split(\" \")\n\t\t\t\t.map((n) => n[0])\n\t\t\t\t.join(\"\")\n\t\t\t\t.toUpperCase()\n\t\t\t\t.slice(0, 2);\n\t\t}\n\t\treturn email?.substring(0, 2).toUpperCase() || \"U\";\n\t};\n\n\tconst statusConfig = STATUS_CONFIG[userStatus];\n\n\treturn (\n\t\t<DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"flex h-8 items-center gap-2 rounded-lg px-2 transition-all duration-150\",\n\t\t\t\t\t\t\"hover:bg-accent/80 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n\t\t\t\t\t\t\"outline-none disabled:pointer-events-none disabled:opacity-50\",\n\t\t\t\t\t\tisOpen && \"bg-accent\"\n\t\t\t\t\t)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<Avatar className=\"size-6 rounded-md ring-1 ring-border/50\">\n\t\t\t\t\t\t\t<AvatarImage alt={user.name || user.email} src={user.avatar} />\n\t\t\t\t\t\t\t<AvatarFallback className=\"rounded-md text-[10px] font-medium bg-muted\">\n\t\t\t\t\t\t\t\t{getInitials(user.name, user.email)}\n\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"absolute -bottom-0.5 -right-0.5 size-2.5 rounded-full ring-2 ring-background\",\n\t\t\t\t\t\t\t\tstatusConfig.color\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"hidden text-sm font-medium md:inline-block truncate max-w-28\">\n\t\t\t\t\t\t{user.name?.split(\" \")[0] || user.email?.split(\"@\")[0] || \"User\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"sr-only\">Open user menu</span>\n\t\t\t\t</button>\n\t\t\t</DropdownMenuTrigger>\n\n\t\t\t<DropdownMenuContent\n\t\t\t\talign=\"end\"\n\t\t\t\tsideOffset={8}\n\t\t\t\tclassName=\"w-80 p-0 overflow-hidden\"\n\t\t\t>\n\t\t\t\t{/* Profile Header */}\n\t\t\t\t<div className=\"bg-muted/30 border-b border-border/50 p-4\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"relative shrink-0\">\n\t\t\t\t\t\t\t<Avatar className=\"size-11 rounded-xl ring-2 ring-background shadow-sm\">\n\t\t\t\t\t\t\t\t<AvatarImage alt={user.name || user.email} src={user.avatar} />\n\t\t\t\t\t\t\t\t<AvatarFallback className=\"rounded-xl text-sm font-semibold bg-primary/10 text-primary\">\n\t\t\t\t\t\t\t\t\t{getInitials(user.name, user.email)}\n\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"absolute -bottom-0.5 -right-0.5 size-3 rounded-full ring-2 ring-background\",\n\t\t\t\t\t\t\t\t\tstatusConfig.color\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1 min-w-0 space-y-0.5\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-semibold truncate\">\n\t\t\t\t\t\t\t\t{user.name || user.email?.split(\"@\")[0] || \"User\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground truncate\">\n\t\t\t\t\t\t\t\t{user.email}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{activeTeam && (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground truncate flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t<Building2 className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t{activeTeam.name}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Status Section */}\n\t\t\t\t<div className=\"p-2 border-b border-border/50\">\n\t\t\t\t\t<p className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wider px-2 py-1.5\">\n\t\t\t\t\t\tSet Status\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"space-y-0.5\">\n\t\t\t\t\t\t{(\n\t\t\t\t\t\t\tObject.entries(STATUS_CONFIG) as [\n\t\t\t\t\t\t\t\tUserStatus,\n\t\t\t\t\t\t\t\t(typeof STATUS_CONFIG)[UserStatus],\n\t\t\t\t\t\t\t][]\n\t\t\t\t\t\t).map(([status, config]) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={status}\n\t\t\t\t\t\t\t\tdisabled={isUpdatingStatus}\n\t\t\t\t\t\t\t\tonClick={() => handleStatusChange(status)}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex w-full items-center gap-3 rounded-md px-2 py-2 text-sm transition-colors\",\n\t\t\t\t\t\t\t\t\t\"hover:bg-accent disabled:opacity-50\",\n\t\t\t\t\t\t\t\t\tuserStatus === status && \"bg-accent\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={cn(\"size-2.5 rounded-full shrink-0\", config.color)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"flex-1 text-left\">\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{config.label}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{userStatus === status && (\n\t\t\t\t\t\t\t\t\t<Check className=\"size-4 text-primary shrink-0\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Workspace Section */}\n\t\t\t\t<div className=\"p-2 border-b border-border/50\">\n\t\t\t\t\t<div className=\"flex items-center justify-between px-2 py-1.5\">\n\t\t\t\t\t\t<p className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wider\">\n\t\t\t\t\t\t\tWorkspaces\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\thref=\"/welcome?new=true\"\n\t\t\t\t\t\t\tclassName=\"text-[11px] font-medium text-primary hover:underline flex items-center gap-0.5\"\n\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Plus className=\"size-3\" />\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"max-h-36 overflow-y-auto space-y-0.5\">\n\t\t\t\t\t\t{teams.map((team) => {\n\t\t\t\t\t\t\tconst isActive = activeTeam?.id === team.id;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={team.id}\n\t\t\t\t\t\t\t\t\tonClick={() => handleCompanySwitch(team)}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex w-full items-center gap-3 rounded-md px-2 py-2 transition-colors\",\n\t\t\t\t\t\t\t\t\t\t\"hover:bg-accent\",\n\t\t\t\t\t\t\t\t\t\tisActive && \"bg-accent\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex size-8 items-center justify-center rounded-lg bg-muted shrink-0\">\n\t\t\t\t\t\t\t\t\t\t{team.logo ? (\n\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={team.logo}\n\t\t\t\t\t\t\t\t\t\t\t\talt={team.name}\n\t\t\t\t\t\t\t\t\t\t\t\twidth={20}\n\t\t\t\t\t\t\t\t\t\t\t\theight={20}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"size-5 object-contain\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0 text-left\">\n\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"text-sm truncate\",\n\t\t\t\t\t\t\t\t\t\t\t\tisActive && \"font-medium\"\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{team.name}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t{team.onboardingComplete === false ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-[10px] text-amber-600 dark:text-amber-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tSetup required\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground capitalize\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{team.plan}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{isActive && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"size-1.5 rounded-full bg-primary shrink-0\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Navigation Links */}\n\t\t\t\t<div className=\"p-2 border-b border-border/50\">\n\t\t\t\t\t<NavItem\n\t\t\t\t\t\thref=\"/dashboard/settings/profile/personal\"\n\t\t\t\t\t\ticon={User}\n\t\t\t\t\t\tlabel=\"Profile & Account\"\n\t\t\t\t\t\tshortcut=\"⇧⌘P\"\n\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavItem\n\t\t\t\t\t\thref=\"/dashboard/settings/billing\"\n\t\t\t\t\t\ticon={CreditCard}\n\t\t\t\t\t\tlabel=\"Plans & Billing\"\n\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavItem\n\t\t\t\t\t\thref=\"/dashboard/settings\"\n\t\t\t\t\t\ticon={Settings}\n\t\t\t\t\t\tlabel=\"Settings\"\n\t\t\t\t\t\tshortcut=\"⌘,\"\n\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Theme & Preferences */}\n\t\t\t\t<div className=\"p-2 border-b border-border/50\">\n\t\t\t\t\t<p className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wider px-2 py-1.5\">\n\t\t\t\t\t\tAppearance\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"px-2 py-1\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1 p-0.5 rounded-lg bg-muted/50\">\n\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t{ value: \"light\", icon: Sun, label: \"Light\" },\n\t\t\t\t\t\t\t\t{ value: \"dark\", icon: Moon, label: \"Dark\" },\n\t\t\t\t\t\t\t\t{ value: \"system\", icon: Monitor, label: \"System\" },\n\t\t\t\t\t\t\t].map((option) => {\n\t\t\t\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\t\t\t\tconst isSelected = getCurrentTheme() === option.value;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={option.value}\n\t\t\t\t\t\t\t\t\t\tdisabled={!mounted}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setTheme(option.value)}\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"flex flex-1 items-center justify-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-all\",\n\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-background text-foreground shadow-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Help & Support */}\n\t\t\t\t<div className=\"p-2 border-b border-border/50\">\n\t\t\t\t\t<NavItem\n\t\t\t\t\t\thref=\"/help\"\n\t\t\t\t\t\ticon={HelpCircle}\n\t\t\t\t\t\tlabel=\"Help & Support\"\n\t\t\t\t\t\texternal\n\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavItem\n\t\t\t\t\t\thref=\"/dashboard/settings/shortcuts\"\n\t\t\t\t\t\ticon={Keyboard}\n\t\t\t\t\t\tlabel=\"Keyboard Shortcuts\"\n\t\t\t\t\t\tshortcut=\"⌘/\"\n\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Sign Out */}\n\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={handleLogout}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex w-full items-center gap-3 rounded-md px-2 py-2 text-sm transition-colors\",\n\t\t\t\t\t\t\t\"text-muted-foreground hover:bg-destructive/10 hover:text-destructive\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LogOut className=\"size-4\" />\n\t\t\t\t\t\t<span>Sign out</span>\n\t\t\t\t\t\t<kbd className=\"ml-auto hidden sm:inline-flex h-5 items-center rounded border border-border/50 bg-muted/50 px-1.5 font-mono text-[10px] text-muted-foreground\">\n\t\t\t\t\t\t\t⇧⌘Q\n\t\t\t\t\t\t</kbd>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction NavItem({\n\thref,\n\ticon: Icon,\n\tlabel,\n\tshortcut,\n\texternal,\n\tonClick,\n}: {\n\thref: string;\n\ticon: React.ElementType;\n\tlabel: string;\n\tshortcut?: string;\n\texternal?: boolean;\n\tonClick?: () => void;\n}) {\n\treturn (\n\t\t<Link\n\t\t\thref={href}\n\t\t\tonClick={onClick}\n\t\t\tclassName={cn(\n\t\t\t\t\"flex items-center gap-3 rounded-md px-2 py-2 text-sm transition-colors\",\n\t\t\t\t\"text-foreground/80 hover:bg-accent hover:text-foreground\"\n\t\t\t)}\n\t\t\t{...(external && { target: \"_blank\", rel: \"noopener noreferrer\" })}\n\t\t>\n\t\t\t<Icon className=\"size-4 text-muted-foreground\" />\n\t\t\t<span className=\"flex-1\">{label}</span>\n\t\t\t{shortcut && (\n\t\t\t\t<kbd className=\"hidden sm:inline-flex h-5 items-center rounded border border-border/50 bg-muted/50 px-1.5 font-mono text-[10px] text-muted-foreground\">\n\t\t\t\t\t{shortcut}\n\t\t\t\t</kbd>\n\t\t\t)}\n\t\t\t{external && <ChevronRight className=\"size-3.5 text-muted-foreground\" />}\n\t\t</Link>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4291, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/scroll-area.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 4302, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/separator.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 4313, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ai/pending-actions-indicator.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tShield,\n\tAlertTriangle,\n\tBell,\n\tClock,\n\tMail,\n\tDollarSign,\n\tCalendar,\n\tUser,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tgetCompanyPendingActions,\n\tcheckIsCompanyOwner,\n\ttype PendingAction,\n} from \"@/actions/ai-approval\";\n\ninterface PendingActionsIndicatorProps {\n\tclassName?: string;\n\tshowPopover?: boolean;\n\tonActionClick?: (action: PendingAction) => void;\n}\n\nconst riskLevelColors = {\n\tlow: \"bg-blue-500\",\n\tmedium: \"bg-yellow-500\",\n\thigh: \"bg-orange-500\",\n\tcritical: \"bg-red-500\",\n};\n\nconst actionTypeIcons: Record<string, typeof Mail> = {\n\tsend_communication: Mail,\n\tfinancial: DollarSign,\n\tscheduling: Calendar,\n\tcustomer: User,\n};\n\nfunction getActionIcon(actionType: string) {\n\treturn actionTypeIcons[actionType] || AlertTriangle;\n}\n\nfunction formatTimeRemaining(expiresAt: string): string {\n\tconst now = new Date();\n\tconst expires = new Date(expiresAt);\n\tconst diff = expires.getTime() - now.getTime();\n\n\tif (diff <= 0) return \"Expired\";\n\n\tconst hours = Math.floor(diff / (1000 * 60 * 60));\n\tconst minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n\tif (hours > 0) return `${hours}h ${minutes}m`;\n\treturn `${minutes}m`;\n}\n\nexport function PendingActionsIndicator({\n\tclassName,\n\tshowPopover = true,\n\tonActionClick,\n}: PendingActionsIndicatorProps) {\n\tconst [pendingActions, setPendingActions] = useState<PendingAction[]>([]);\n\tconst [isOwner, setIsOwner] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\t// Fetch pending actions\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tsetIsLoading(true);\n\t\t\ttry {\n\t\t\t\tconst [ownerResult, actionsResult] = await Promise.all([\n\t\t\t\t\tcheckIsCompanyOwner(),\n\t\t\t\t\tgetCompanyPendingActions({ status: \"pending\", limit: 10 }),\n\t\t\t\t]);\n\n\t\t\t\tif (ownerResult.success && ownerResult.data) {\n\t\t\t\t\tsetIsOwner(ownerResult.data);\n\t\t\t\t}\n\n\t\t\t\tif (actionsResult.success && actionsResult.data) {\n\t\t\t\t\tsetPendingActions(actionsResult.data);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to fetch pending actions:\", error);\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\t// Poll every 30 seconds\n\t\tconst interval = setInterval(fetchData, 30000);\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\t// Don't show if not owner or no pending actions\n\tif (!isOwner || pendingActions.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst criticalCount = pendingActions.filter((a) => a.riskLevel === \"critical\").length;\n\tconst highCount = pendingActions.filter((a) => a.riskLevel === \"high\").length;\n\n\tconst indicatorContent = (\n\t\t<div className={cn(\"relative inline-flex\", className)}>\n\t\t\t<Button\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclassName=\"relative h-9 w-9\"\n\t\t\t>\n\t\t\t\t<Shield className=\"h-5 w-5\" />\n\t\t\t\t<span\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full text-[10px] font-bold text-white\",\n\t\t\t\t\t\tcriticalCount > 0\n\t\t\t\t\t\t\t? \"bg-red-500\"\n\t\t\t\t\t\t\t: highCount > 0\n\t\t\t\t\t\t\t\t? \"bg-orange-500\"\n\t\t\t\t\t\t\t\t: \"bg-yellow-500\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{pendingActions.length}\n\t\t\t\t</span>\n\t\t\t</Button>\n\t\t</div>\n\t);\n\n\tif (!showPopover) {\n\t\treturn indicatorContent;\n\t}\n\n\treturn (\n\t\t<Popover>\n\t\t\t<PopoverTrigger asChild>{indicatorContent}</PopoverTrigger>\n\t\t\t<PopoverContent className=\"w-80 p-0\" align=\"end\">\n\t\t\t\t<div className=\"flex items-center justify-between p-3 border-b\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Shield className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t<span className=\"font-semibold text-sm\">Pending Approvals</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Badge variant=\"secondary\">{pendingActions.length}</Badge>\n\t\t\t\t</div>\n\n\t\t\t\t<ScrollArea className=\"max-h-[300px]\">\n\t\t\t\t\t<div className=\"divide-y\">\n\t\t\t\t\t\t{pendingActions.map((action) => {\n\t\t\t\t\t\t\tconst ActionIcon = getActionIcon(action.actionType);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full p-3 text-left hover:bg-muted/50 transition-colors\"\n\t\t\t\t\t\t\t\t\tonClick={() => onActionClick?.(action)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"rounded-full p-1.5\",\n\t\t\t\t\t\t\t\t\t\t\t\triskLevelColors[action.riskLevel] + \"/10\"\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ActionIcon\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"h-4 w-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\triskLevelColors[action.riskLevel].replace(\"bg-\", \"text-\")\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium truncate\">\n\t\t\t\t\t\t\t\t\t\t\t\t{action.toolName\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/([A-Z])/g, \" $1\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/^./, (s) => s.toUpperCase())}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground truncate\">\n\t\t\t\t\t\t\t\t\t\t\t\t{action.affectedEntityType.replace(/_/g, \" \")}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-[10px] px-1.5 py-0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\triskLevelColors[action.riskLevel].replace(\"bg-\", \"border-\"),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\triskLevelColors[action.riskLevel].replace(\"bg-\", \"text-\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{action.riskLevel}\n\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-1 text-[10px] text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimeRemaining(action.expiresAt)}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</ScrollArea>\n\n\t\t\t\t{pendingActions.length > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tclassName=\"w-full text-xs\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t// Navigate to AI settings or pending actions page\n\t\t\t\t\t\t\t\t\twindow.location.href = \"/dashboard/settings/ai\";\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView All Pending Actions\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t);\n}\n\n/**\n * Simple badge indicator for use in navigation items\n */\nexport function PendingActionsBadge({ className }: { className?: string }) {\n\tconst [count, setCount] = useState(0);\n\tconst [isOwner, setIsOwner] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\ttry {\n\t\t\t\tconst [ownerResult, actionsResult] = await Promise.all([\n\t\t\t\t\tcheckIsCompanyOwner(),\n\t\t\t\t\tgetCompanyPendingActions({ status: \"pending\", limit: 100 }),\n\t\t\t\t]);\n\n\t\t\t\tif (ownerResult.success && ownerResult.data) {\n\t\t\t\t\tsetIsOwner(ownerResult.data);\n\t\t\t\t}\n\n\t\t\t\tif (actionsResult.success && actionsResult.data) {\n\t\t\t\t\tsetCount(actionsResult.data.length);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to fetch pending action count:\", error);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\t\tconst interval = setInterval(fetchData, 30000);\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\tif (!isOwner || count === 0) return null;\n\n\treturn (\n\t\t<Badge\n\t\t\tvariant=\"destructive\"\n\t\t\tclassName={cn(\"ml-auto h-5 min-w-5 px-1.5 text-[10px]\", className)}\n\t\t>\n\t\t\t{count}\n\t\t</Badge>\n\t);\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;;;AAvBA;;;;;;;;;;AAmCA,MAAM,kBAAkB;IACvB,KAAK;IACL,QAAQ;IACR,MAAM;IACN,UAAU;AACX;AAEA,MAAM,kBAA+C;IACpD,oBAAoB,iSAAI;IACxB,WAAW,uTAAU;IACrB,YAAY,6SAAQ;IACpB,UAAU,iSAAI;AACf;AAEA,SAAS,cAAc,UAAkB;IACxC,OAAO,eAAe,CAAC,WAAW,IAAI,gUAAa;AACpD;AAEA,SAAS,oBAAoB,SAAiB;IAC7C,MAAM,MAAM,IAAI;IAChB,MAAM,UAAU,IAAI,KAAK;IACzB,MAAM,OAAO,QAAQ,OAAO,KAAK,IAAI,OAAO;IAE5C,IAAI,QAAQ,GAAG,OAAO;IAEtB,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE;IAC/C,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,OAAO,CAAC,OAAO,KAAK,EAAE,IAAK,CAAC,OAAO,EAAE;IAEjE,IAAI,QAAQ,GAAG,OAAO,GAAG,MAAM,EAAE,EAAE,QAAQ,CAAC,CAAC;IAC7C,OAAO,GAAG,QAAQ,CAAC,CAAC;AACrB;AAEO,SAAS,wBAAwB,EACvC,SAAS,EACT,cAAc,IAAI,EAClB,aAAa,EACiB;;IAC9B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAkB,EAAE;IACxE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAC;IAE3C,wBAAwB;IACxB,IAAA,iVAAS;6CAAC;YACT,MAAM;+DAAY;oBACjB,aAAa;oBACb,IAAI;wBACH,MAAM,CAAC,aAAa,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;4BACtD,IAAA,+LAAmB;4BACnB,IAAA,oMAAwB,EAAC;gCAAE,QAAQ;gCAAW,OAAO;4BAAG;yBACxD;wBAED,IAAI,YAAY,OAAO,IAAI,YAAY,IAAI,EAAE;4BAC5C,WAAW,YAAY,IAAI;wBAC5B;wBAEA,IAAI,cAAc,OAAO,IAAI,cAAc,IAAI,EAAE;4BAChD,kBAAkB,cAAc,IAAI;wBACrC;oBACD,EAAE,OAAO,OAAO;wBACf,QAAQ,KAAK,CAAC,oCAAoC;oBACnD,SAAU;wBACT,aAAa;oBACd;gBACD;;YAEA;YAEA,wBAAwB;YACxB,MAAM,WAAW,YAAY,WAAW;YACxC;qDAAO,IAAM,cAAc;;QAC5B;4CAAG,EAAE;IAEL,gDAAgD;IAChD,IAAI,CAAC,WAAW,eAAe,MAAM,KAAK,GAAG;QAC5C,OAAO;IACR;IAEA,MAAM,gBAAgB,eAAe,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK,YAAY,MAAM;IACrF,MAAM,YAAY,eAAe,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK,QAAQ,MAAM;IAE7E,MAAM,iCACL,oWAAC;QAAI,WAAW,IAAA,2IAAE,EAAC,wBAAwB;kBAC1C,cAAA,oWAAC,6IAAM;YACN,SAAQ;YACR,MAAK;YACL,WAAU;;8BAEV,oWAAC,uSAAM;oBAAC,WAAU;;;;;;8BAClB,oWAAC;oBACA,WAAW,IAAA,2IAAE,EACZ,mHACA,gBAAgB,IACb,eACA,YAAY,IACX,kBACA;8BAGJ,eAAe,MAAM;;;;;;;;;;;;;;;;;IAM1B,IAAI,CAAC,aAAa;QACjB,OAAO;IACR;IAEA,qBACC,oWAAC,+IAAO;;0BACP,oWAAC,sJAAc;gBAAC,OAAO;0BAAE;;;;;;0BACzB,oWAAC,sJAAc;gBAAC,WAAU;gBAAW,OAAM;;kCAC1C,oWAAC;wBAAI,WAAU;;0CACd,oWAAC;gCAAI,WAAU;;kDACd,oWAAC,uSAAM;wCAAC,WAAU;;;;;;kDAClB,oWAAC;wCAAK,WAAU;kDAAwB;;;;;;;;;;;;0CAEzC,oWAAC,2IAAK;gCAAC,SAAQ;0CAAa,eAAe,MAAM;;;;;;;;;;;;kCAGlD,oWAAC,yJAAU;wBAAC,WAAU;kCACrB,cAAA,oWAAC;4BAAI,WAAU;sCACb,eAAe,GAAG,CAAC,CAAC;gCACpB,MAAM,aAAa,cAAc,OAAO,UAAU;gCAClD,qBACC,oWAAC;oCAEA,WAAU;oCACV,SAAS,IAAM,gBAAgB;8CAE/B,cAAA,oWAAC;wCAAI,WAAU;;0DACd,oWAAC;gDACA,WAAW,IAAA,2IAAE,EACZ,sBACA,eAAe,CAAC,OAAO,SAAS,CAAC,GAAG;0DAGrC,cAAA,oWAAC;oDACA,WAAW,IAAA,2IAAE,EACZ,WACA,eAAe,CAAC,OAAO,SAAS,CAAC,CAAC,OAAO,CAAC,OAAO;;;;;;;;;;;0DAIpD,oWAAC;gDAAI,WAAU;;kEACd,oWAAC;wDAAE,WAAU;kEACX,OAAO,QAAQ,CACd,OAAO,CAAC,YAAY,OACpB,OAAO,CAAC,MAAM,CAAC,IAAM,EAAE,WAAW;;;;;;kEAErC,oWAAC;wDAAE,WAAU;kEACX,OAAO,kBAAkB,CAAC,OAAO,CAAC,MAAM;;;;;;kEAE1C,oWAAC;wDAAI,WAAU;;0EACd,oWAAC,2IAAK;gEACL,SAAQ;gEACR,WAAW,IAAA,2IAAE,EACZ,2BACA,eAAe,CAAC,OAAO,SAAS,CAAC,CAAC,OAAO,CAAC,OAAO,YACjD,eAAe,CAAC,OAAO,SAAS,CAAC,CAAC,OAAO,CAAC,OAAO;0EAGjD,OAAO,SAAS;;;;;;0EAElB,oWAAC;gEAAK,WAAU;;kFACf,oWAAC,oSAAK;wEAAC,WAAU;;;;;;oEAChB,oBAAoB,OAAO,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;mCAxCpC,OAAO,EAAE;;;;;4BA+CjB;;;;;;;;;;;oBAID,eAAe,MAAM,GAAG,mBACxB;;0CACC,oWAAC,mJAAS;;;;;0CACV,oWAAC;gCAAI,WAAU;0CACd,cAAA,oWAAC,6IAAM;oCACN,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS;wCACR,kDAAkD;wCAClD,OAAO,QAAQ,CAAC,IAAI,GAAG;oCACxB;8CACA;;;;;;;;;;;;;;;;;;;;;;;;;AASR;GAtKgB;KAAA;AA2KT,SAAS,oBAAoB,EAAE,SAAS,EAA0B;;IACxE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IAEvC,IAAA,iVAAS;yCAAC;YACT,MAAM;2DAAY;oBACjB,IAAI;wBACH,MAAM,CAAC,aAAa,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;4BACtD,IAAA,+LAAmB;4BACnB,IAAA,oMAAwB,EAAC;gCAAE,QAAQ;gCAAW,OAAO;4BAAI;yBACzD;wBAED,IAAI,YAAY,OAAO,IAAI,YAAY,IAAI,EAAE;4BAC5C,WAAW,YAAY,IAAI;wBAC5B;wBAEA,IAAI,cAAc,OAAO,IAAI,cAAc,IAAI,EAAE;4BAChD,SAAS,cAAc,IAAI,CAAC,MAAM;wBACnC;oBACD,EAAE,OAAO,OAAO;wBACf,QAAQ,KAAK,CAAC,yCAAyC;oBACxD;gBACD;;YAEA;YACA,MAAM,WAAW,YAAY,WAAW;YACxC;iDAAO,IAAM,cAAc;;QAC5B;wCAAG,EAAE;IAEL,IAAI,CAAC,WAAW,UAAU,GAAG,OAAO;IAEpC,qBACC,oWAAC,2IAAK;QACL,SAAQ;QACR,WAAW,IAAA,2IAAE,EAAC,0CAA0C;kBAEvD;;;;;;AAGJ;IAvCgB;MAAA"}},
    {"offset": {"line": 4725, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/app-header-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { GalleryVerticalEnd, HelpCircle, Tv } from \"lucide-react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useDialerShortcut } from \"@/hooks/use-dialer-shortcut\";\nimport type { UserProfile } from \"@/lib/auth/user-data\";\nimport { HelpDropdown } from \"./help-dropdown\";\nimport { NotificationsDropdown } from \"./notifications-dropdown\";\nimport { PhoneDropdown } from \"./phone-dropdown\";\nimport { QuickAddDropdown } from \"./quick-add-dropdown\";\nimport { UserMenu } from \"./user-menu\";\nimport { getTotalUnreadCountAction } from \"@/actions/email-actions\";\nimport { PendingActionsIndicator } from \"@/components/ai/pending-actions-indicator\";\n\n/**\n * AppHeaderClient - Client Component (Minimal Interactivity Only)\n *\n * Performance optimizations:\n * - ONLY client-side code (mobile menu state, active nav detection)\n * - NO data fetching (userProfile passed from server component)\n * - NO loading states (data already available)\n * - Smaller JavaScript bundle\n *\n * Client-side features:\n * - Mobile menu open/close state\n * - Active navigation highlighting with usePathname\n * - Click outside to close mobile menu\n */\n\ntype AppHeaderClientProps = {\n\tuserProfile: UserProfile;\n\tcompanies: Array<{\n\t\tid: string;\n\t\tname: string;\n\t\tplan: string;\n\t\tonboardingComplete?: boolean;\n\t\thasPayment?: boolean;\n\t}>;\n\tactiveCompanyId?: string | null;\n\tcompanyPhones?: Array<{\n\t\tid: string;\n\t\tnumber: string;\n\t\tlabel?: string;\n\t}>;\n\thasPhoneNumbers?: boolean;\n\thasPayrixAccount?: boolean;\n\tpayrixStatus?: string | null;\n\tsubHeader?: React.ReactNode;\n};\n\ntype NavItemStatus = \"beta\" | \"new\" | \"updated\" | \"coming-soon\" | null;\n\ntype NavItem = {\n\tlabel: string;\n\thref: string;\n\tstatus?: NavItemStatus;\n\tisSpecial?: boolean; // For Ask Thorbis gradient style\n};\n\ntype NavItemWithMobile = NavItem & {\n\tmobileIcon?: string;\n\tmobileIconBg?: string;\n\tmobileIconColor?: string;\n};\n\nconst navigationItems: NavItemWithMobile[] = [\n\t{\n\t\tlabel: \"Ask Thorbis\",\n\t\thref: \"/dashboard/ai\",\n\t\tstatus: \"beta\",\n\t\tisSpecial: true,\n\t\tmobileIcon: \"AI\",\n\t\tmobileIconBg: \"bg-primary/10\",\n\t\tmobileIconColor: \"text-primary\",\n\t},\n\t{\n\t\tlabel: \"Today\",\n\t\thref: \"/dashboard\",\n\t\tmobileIcon: \"T\",\n\t\tmobileIconBg: \"bg-primary/10\",\n\t\tmobileIconColor: \"text-primary\",\n\t},\n\t{\n\t\tlabel: \"Schedule\",\n\t\thref: \"/dashboard/schedule\",\n\t\tmobileIcon: \"S\",\n\t\tmobileIconBg: \"bg-accent/10\",\n\t\tmobileIconColor: \"text-accent-foreground\",\n\t},\n\t{\n\t\tlabel: \"Communication\",\n\t\thref: \"/dashboard/communication\",\n\t\tmobileIcon: \"C\",\n\t\tmobileIconBg: \"bg-success/10\",\n\t\tmobileIconColor: \"text-success\",\n\t},\n\t{\n\t\tlabel: \"Work\",\n\t\thref: \"/dashboard/work\",\n\t\tstatus: \"beta\",\n\t\tmobileIcon: \"W\",\n\t\tmobileIconBg: \"bg-teal-500/10\",\n\t\tmobileIconColor: \"text-teal-600\",\n\t},\n\t{\n\t\tlabel: \"Finances\",\n\t\thref: \"/dashboard/finance\",\n\t\tstatus: \"coming-soon\",\n\t\tmobileIcon: \"F\",\n\t\tmobileIconBg: \"bg-emerald-500/10\",\n\t\tmobileIconColor: \"text-emerald-600\",\n\t},\n\t{\n\t\tlabel: \"Reporting\",\n\t\thref: \"/dashboard/reporting\",\n\t\tstatus: \"coming-soon\",\n\t\tmobileIcon: \"R\",\n\t\tmobileIconBg: \"bg-primary/10\",\n\t\tmobileIconColor: \"text-primary\",\n\t},\n\t{\n\t\tlabel: \"Marketing\",\n\t\thref: \"/dashboard/marketing\",\n\t\tstatus: \"coming-soon\",\n\t\tmobileIcon: \"M\",\n\t\tmobileIconBg: \"bg-accent/10\",\n\t\tmobileIconColor: \"text-accent-foreground\",\n\t},\n\t{\n\t\tlabel: \"Training\",\n\t\thref: \"/dashboard/training\",\n\t\tstatus: \"coming-soon\",\n\t\tmobileIcon: \"T\",\n\t\tmobileIconBg: \"bg-accent/10\",\n\t\tmobileIconColor: \"text-accent-foreground\",\n\t},\n];\n\n// Default logo for all companies\nconst defaultLogo = GalleryVerticalEnd;\n\nfunction StatusIndicator({ status }: { status?: NavItemStatus }) {\n\tif (!status) {\n\t\treturn null;\n\t}\n\n\t// For beta and coming-soon, show badge\n\tif (status === \"beta\") {\n\t\treturn (\n\t\t\t<span className=\"absolute -top-1.5 right-0 rounded bg-blue-500 px-1 py-0.5 text-[0.5rem] leading-none font-semibold tracking-wide text-white uppercase shadow-sm\">\n\t\t\t\tBeta\n\t\t\t</span>\n\t\t);\n\t}\n\n\tif (status === \"coming-soon\") {\n\t\treturn (\n\t\t\t<span className=\"absolute -top-1.5 right-0 rounded bg-purple-500 px-1 py-0.5 text-[0.5rem] leading-none font-semibold tracking-wide whitespace-nowrap text-white uppercase shadow-sm\">\n\t\t\t\tSoon\n\t\t\t</span>\n\t\t);\n\t}\n\n\t// Badge for \"new\" and \"updated\"\n\tif (status === \"new\") {\n\t\treturn (\n\t\t\t<span className=\"absolute -top-1.5 right-0 rounded bg-green-500 px-1 py-0.5 text-[0.5rem] leading-none font-semibold tracking-wide text-white uppercase shadow-sm\">\n\t\t\t\tNew\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn (\n\t\t<span\n\t\t\tclassName=\"absolute -top-1 right-0 size-2 rounded-full bg-blue-500 shadow-sm\"\n\t\t\ttitle=\"Updated\"\n\t\t/>\n\t);\n}\n\nfunction MobileStatusBadge({ status }: { status?: NavItemStatus }) {\n\tif (!status) {\n\t\treturn null;\n\t}\n\n\tconst styles = {\n\t\tbeta: \"bg-blue-500 text-white shadow-sm\",\n\t\tnew: \"bg-green-500 text-white shadow-sm\",\n\t\tupdated: \"bg-purple-500 text-white shadow-sm\",\n\t\t\"coming-soon\": \"bg-purple-500 text-white shadow-sm\",\n\t};\n\n\tconst labels = {\n\t\tbeta: \"Beta\",\n\t\tnew: \"New\",\n\t\tupdated: \"Updated\",\n\t\t\"coming-soon\": \"Soon\",\n\t};\n\n\treturn (\n\t\t<span\n\t\t\tclassName={`inline-flex items-center rounded-full px-2 py-0.5 text-[0.65rem] font-semibold tracking-wide uppercase ${styles[status]}`}\n\t\t>\n\t\t\t{labels[status]}\n\t\t</span>\n\t);\n}\n\nfunction formatBadgeCount(count: number): string {\n\tif (count <= 9) {\n\t\treturn count.toString();\n\t}\n\tif (count <= 99) {\n\t\treturn \"99+\";\n\t}\n\tif (count <= 999) {\n\t\treturn \"999+\";\n\t}\n\treturn \"1K+\";\n}\n\nfunction UnreadBadge({ count }: { count: number }) {\n\tif (count === 0) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<span className=\"absolute -top-1.5 right-0 rounded bg-red-500 px-1 py-0.5 text-[0.5rem] leading-none font-semibold tracking-wide text-white shadow-sm whitespace-nowrap\">\n\t\t\t{formatBadgeCount(count)}\n\t\t</span>\n\t);\n}\n\nexport function AppHeaderClient({\n\tuserProfile,\n\tcompanies,\n\tactiveCompanyId,\n\tcustomers = [],\n\tcompanyPhones = [],\n\thasPhoneNumbers = false,\n\thasPayrixAccount = false,\n\tpayrixStatus = null,\n\tsubHeader: _subHeader, // Ignore the server-passed subHeader\n}: AppHeaderClientProps) {\n\tconst pathname = usePathname();\n\n\t// Hide header completely on TV display route (not settings)\n\t// Check this early to avoid hooks issues\n\tconst isTVRoute = pathname === \"/dashboard/tv\";\n\n\t// Enable global keyboard shortcut for dialer (Ctrl+Shift+D or Cmd+Shift+D)\n\tuseDialerShortcut();\n\n\tconst [unreadCount, setUnreadCount] = useState(0);\n\n\t// Fetch unread count on mount, when pathname changes, and periodically\n\tuseEffect(() => {\n\t\tconst fetchUnreadCount = async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await getTotalUnreadCountAction();\n\t\t\t\tif (result.success && result.count !== undefined) {\n\t\t\t\t\tsetUnreadCount(result.count);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to fetch unread count:\", error);\n\t\t\t}\n\t\t};\n\n\t\t// Fetch immediately\n\t\tfetchUnreadCount();\n\n\t\t// Refresh every 30 seconds\n\t\tconst interval = setInterval(fetchUnreadCount, 30000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [pathname]); // Refresh when pathname changes (e.g., navigating to/from communication page)\n\n\t// Return null for TV route AFTER all hooks have been called\n\tif (isTVRoute) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<header className=\"safe-top bg-header-bg sticky top-0 z-50 w-full\">\n\t\t\t\t<div className=\"flex h-14 items-center gap-2 px-4 md:px-6\">\n\n\t\t\t\t{/* Logo */}\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 dark:hover:bg-accent/50 flex shrink-0 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 size-10 md:size-8\"\n\t\t\t\t\tdata-slot=\"button\"\n\t\t\t\t\thref=\"/\"\n\t\t\t\t>\n\t\t\t\t\t<Image\n\t\t\t\t\t\talt=\"Thorbis\"\n\t\t\t\t\t\tclassName=\"size-5\"\n\t\t\t\t\t\theight={20}\n\t\t\t\t\t\tsrc=\"/ThorbisLogo.webp\"\n\t\t\t\t\t\twidth={20}\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"sr-only\">Thorbis</span>\n\t\t\t\t</Link>\n\n\t\t\t\t{/* Main Navigation - Desktop only, mobile uses bottom tabs */}\n\t\t\t\t<nav className=\"hidden items-center gap-0.5 ml-2 lg:flex\">\n\t\t\t\t\t{navigationItems.map((item) => {\n\t\t\t\t\t\tconst isActive =\n\t\t\t\t\t\t\titem.href === \"/dashboard\"\n\t\t\t\t\t\t\t\t? pathname === \"/dashboard\"\n\t\t\t\t\t\t\t\t: pathname?.startsWith(item.href);\n\n\t\t\t\t\t\tif (item.isSpecial) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"relative\" key={item.href}>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={`focus-visible:ring-ring/50 relative inline-flex h-8 shrink-0 items-center justify-center gap-1.5 rounded-md px-3 text-sm font-medium whitespace-nowrap transition-all duration-150 outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 ${\n\t\t\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary/15 text-primary dark:bg-primary/25 shadow-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground hover:bg-muted/70 hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\tdata-slot=\"button\"\n\t\t\t\t\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<StatusIndicator status={item.status} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"relative\" key={item.href}>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tclassName={`focus-visible:ring-ring/50 relative inline-flex h-8 shrink-0 items-center justify-center gap-1.5 rounded-md px-3 text-sm font-medium whitespace-nowrap transition-all duration-150 outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 ${\n\t\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary/15 text-primary dark:bg-primary/25 shadow-sm\"\n\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground hover:bg-muted/70 hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tdata-slot=\"button\"\n\t\t\t\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<StatusIndicator status={item.status} />\n\t\t\t\t\t\t\t\t{item.href === \"/dashboard/communication\" && (\n\t\t\t\t\t\t\t\t\t<UnreadBadge count={unreadCount} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</nav>\n\n\t\t\t\t{/* Right side controls */}\n\t\t\t\t<div className=\"ml-auto flex items-center gap-2 overflow-visible md:flex-1 md:justify-end\">\n\t\t\t\t\t{/* Quick Add Menu */}\n\t\t\t\t\t<QuickAddDropdown />\n\n\t\t\t\t\t{/* Phone/Calls */}\n\t\t\t\t\t<PhoneDropdown\n\t\t\t\t\t\tcompanyId={activeCompanyId || \"\"}\n\t\t\t\t\t\tcompanyPhones={companyPhones}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* TV Display */}\n\t\t\t\t\t<Link href=\"/dashboard/tv\" title=\"TV Display\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"hover-gradient hover:border-primary/20 hover:bg-primary/10 hover:text-primary focus-visible:ring-ring/50 flex items-center justify-center rounded-md border border-transparent transition-all outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 size-10 md:size-8\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tv className=\"size-4\" />\n\t\t\t\t\t\t\t<span className=\"sr-only\">TV Display</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Link>\n\n\t\t\t\t\t{/* AI Pending Actions (Owner Approval) */}\n\t\t\t\t\t<PendingActionsIndicator />\n\n\t\t\t\t\t{/* Notifications */}\n\t\t\t\t\t<NotificationsDropdown\n\t\t\t\t\t\thasPhoneNumbers={hasPhoneNumbers}\n\t\t\t\t\t\thasPayrixAccount={hasPayrixAccount}\n\t\t\t\t\t\tpayrixStatus={payrixStatus}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Help */}\n\t\t\t\t\t<HelpDropdown />\n\n\t\t\t\t\t{/* User Menu - Data passed from server, no loading state needed */}\n\t\t\t\t\t{/* Deduplicate companies by ID to prevent duplicates */}\n\t\t\t\t\t<UserMenu\n\t\t\t\t\t\tactiveCompanyId={activeCompanyId}\n\t\t\t\t\t\tteams={Array.from(\n\t\t\t\t\t\t\tnew Map(\n\t\t\t\t\t\t\t\tcompanies.map((company) => [\n\t\t\t\t\t\t\t\t\tcompany.id,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: company.id,\n\t\t\t\t\t\t\t\t\t\tname: company.name,\n\t\t\t\t\t\t\t\t\t\tlogo: company.logo,\n\t\t\t\t\t\t\t\t\t\tplan: company.plan,\n\t\t\t\t\t\t\t\t\t\tonboardingComplete: company.onboardingComplete,\n\t\t\t\t\t\t\t\t\t\thasPayment: company.hasPayment,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t).values(),\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tuser={{\n\t\t\t\t\t\t\tname: userProfile.name,\n\t\t\t\t\t\t\temail: userProfile.email,\n\t\t\t\t\t\t\tavatar: userProfile.avatar,\n\t\t\t\t\t\t\tstatus: userProfile.status,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5208, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/app-header-error-boundary.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * AppHeaderErrorBoundary - Error boundary for AppHeader\n *\n * Catches runtime errors in AppHeader and displays a fallback UI\n * that matches the header design, preventing the entire page from crashing.\n *\n * Features:\n * - Catches all errors in AppHeader component tree\n * - Displays user-friendly error message\n * - Provides retry button to attempt recovery\n * - Logs errors for monitoring\n * - Matches header styling for visual consistency\n */\n\nimport { AlertCircle, RefreshCw } from \"lucide-react\";\nimport { Component, type ReactNode } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\ntype ErrorBoundaryProps = {\n\tchildren: ReactNode;\n};\n\ntype ErrorBoundaryState = {\n\thasError: boolean;\n\terror: Error | null;\n};\n\nexport class AppHeaderErrorBoundary extends Component<\n\tErrorBoundaryProps,\n\tErrorBoundaryState\n> {\n\tconstructor(props: ErrorBoundaryProps) {\n\t\tsuper(props);\n\t\tthis.state = { hasError: false, error: null };\n\t}\n\n\tstatic getDerivedStateFromError(error: Error): ErrorBoundaryState {\n\t\treturn { hasError: true, error };\n\t}\n\n\tcomponentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n\t\t// Log error to monitoring service (e.g., Sentry)\n\t\tconsole.error(\"AppHeader Error:\", error, errorInfo);\n\t}\n\n\thandleReset = () => {\n\t\tthis.setState({ hasError: false, error: null });\n\t\t// Force page reload to attempt recovery\n\t\twindow.location.reload();\n\t};\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn <HeaderErrorFallback onReset={this.handleReset} />;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\n/**\n * HeaderErrorFallback - Error state UI for AppHeader\n *\n * Displays when AppHeader encounters a runtime error.\n * Styled to match the header design for visual consistency.\n */\nfunction HeaderErrorFallback({ onReset }: { onReset: () => void }) {\n\treturn (\n\t\t<header className=\"border-border/40 bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full border-b backdrop-blur\">\n\t\t\t<div className=\"flex h-14 items-center justify-between px-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<div className=\"bg-destructive/10 flex h-8 w-8 items-center justify-center rounded-md\">\n\t\t\t\t\t\t<AlertCircle className=\"text-destructive h-4 w-4\" aria-hidden=\"true\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\tUnable to load header\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs hidden sm:inline\">\n\t\t\t\t\t\t\tAn error occurred while loading the navigation\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={onReset}\n\t\t\t\t\tclassName=\"gap-2\"\n\t\t\t\t\taria-label=\"Retry loading header\"\n\t\t\t\t>\n\t\t\t\t\t<RefreshCw className=\"h-3.5 w-3.5\" aria-hidden=\"true\" />\n\t\t\t\t\t<span className=\"hidden sm:inline\">Retry</span>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</header>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;;;;;;CAYC,GAED;AAAA;AACA;AACA;AAAA;AAlBA;;;;;AA6BO,MAAM,+BAA+B,iVAAS;IAIpD,YAAY,KAAyB,CAAE;QACtC,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;YAAO,OAAO;QAAK;IAC7C;IAEA,OAAO,yBAAyB,KAAY,EAAsB;QACjE,OAAO;YAAE,UAAU;YAAM;QAAM;IAChC;IAEA,kBAAkB,KAAY,EAAE,SAA0B,EAAE;QAC3D,iDAAiD;QACjD,QAAQ,KAAK,CAAC,oBAAoB,OAAO;IAC1C;IAEA,cAAc;QACb,IAAI,CAAC,QAAQ,CAAC;YAAE,UAAU;YAAO,OAAO;QAAK;QAC7C,wCAAwC;QACxC,OAAO,QAAQ,CAAC,MAAM;IACvB,EAAE;IAEF,SAAS;QACR,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACxB,qBAAO,oWAAC;gBAAoB,SAAS,IAAI,CAAC,WAAW;;;;;;QACtD;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC3B;AACD;AAEA;;;;;CAKC,GACD,SAAS,oBAAoB,EAAE,OAAO,EAA2B;IAChE,qBACC,oWAAC;QAAO,WAAU;kBACjB,cAAA,oWAAC;YAAI,WAAU;;8BACd,oWAAC;oBAAI,WAAU;;sCACd,oWAAC;4BAAI,WAAU;sCACd,cAAA,oWAAC,0TAAW;gCAAC,WAAU;gCAA2B,eAAY;;;;;;;;;;;sCAE/D,oWAAC;4BAAI,WAAU;;8CACd,oWAAC;oCAAK,WAAU;8CAAsB;;;;;;8CAGtC,oWAAC;oCAAK,WAAU;8CAAiD;;;;;;;;;;;;;;;;;;8BAMnE,oWAAC,6IAAM;oBACN,SAAQ;oBACR,MAAK;oBACL,SAAS;oBACT,WAAU;oBACV,cAAW;;sCAEX,oWAAC,oTAAS;4BAAC,WAAU;4BAAc,eAAY;;;;;;sCAC/C,oWAAC;4BAAK,WAAU;sCAAmB;;;;;;;;;;;;;;;;;;;;;;;AAKxC;KA/BS"}},
    {"offset": {"line": 5385, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/incoming-call-notification-wrapper.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Incoming Call Notification Wrapper\n *\n * Performance optimization wrapper that lazy-loads the heavy IncomingCallNotification component.\n *\n * Benefits:\n * - Reduces initial page load by ~700KB+ (component + dependencies)\n * - Only loads when needed (when checking for active calls)\n * - Improves Time to Interactive (TTI) significantly\n * - Does not block initial page render\n *\n * This wrapper checks for active calls and only loads the full component when needed.\n */\n\nimport dynamic from \"next/dynamic\";\nimport { Suspense } from \"react\";\n\n// Lazy load the heavy IncomingCallNotification component\n// Client-only because it uses browser APIs and WebRTC\nconst IncomingCallNotification = dynamic(\n\t() =>\n\t\timport(\"@/components/layout/incoming-call-notification\").then(\n\t\t\t(mod) => mod.IncomingCallNotification,\n\t\t),\n\t{\n\t\tloading: () => null, // No loading UI needed, it's invisible until there's a call\n\t\tssr: false, // Prevent server rendering to avoid hydration mismatches\n\t},\n);\n\n/**\n * Wrapper component that lazy-loads the incoming call notification\n */\nexport function IncomingCallNotificationWrapper() {\n\treturn (\n\t\t<Suspense fallback={null}>\n\t\t\t<IncomingCallNotification />\n\t\t</Suspense>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;;;;;;CAYC,GAED;AACA;;AAjBA;;;;AAmBA,yDAAyD;AACzD,sDAAsD;AACtD,MAAM,2BAA2B,IAAA,oVAAO,EACvC,IACC,+JAAyD,IAAI,CAC5D,CAAC,MAAQ,IAAI,wBAAwB;;;;;;IAGtC,SAAS,IAAM;IACf,KAAK;;KAPD;AAcC,SAAS;IACf,qBACC,oWAAC,gVAAQ;QAAC,UAAU;kBACnB,cAAA,oWAAC;;;;;;;;;;AAGJ;MANgB"}},
    {"offset": {"line": 5446, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/mobile-bottom-tabs.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n\tCalendar,\n\tHome,\n\tMessageSquare,\n\tMoreHorizontal,\n\tBriefcase,\n\tX,\n\tSparkles,\n\tDollarSign,\n\tBarChart3,\n\tMegaphone,\n\tGraduationCap,\n\tSettings,\n\tHelpCircle,\n\tChevronRight,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport * as Dialog from \"@radix-ui/react-dialog\";\n\ntype NavItemStatus = \"beta\" | \"new\" | \"updated\" | \"coming-soon\" | null;\n\ntype MoreNavItem = {\n\tlabel: string;\n\thref: string;\n\ticon: React.ElementType;\n\tstatus?: NavItemStatus;\n\ticonBg: string;\n\ticonColor: string;\n\tdescription?: string;\n};\n\nconst moreNavigationItems: MoreNavItem[] = [\n\t{\n\t\tlabel: \"Ask Thorbis\",\n\t\thref: \"/dashboard/ai\",\n\t\ticon: Sparkles,\n\t\tstatus: \"beta\",\n\t\ticonBg: \"bg-primary/10\",\n\t\ticonColor: \"text-primary\",\n\t\tdescription: \"AI-powered assistant\",\n\t},\n\t{\n\t\tlabel: \"Finances\",\n\t\thref: \"/dashboard/finance\",\n\t\ticon: DollarSign,\n\t\tstatus: \"coming-soon\",\n\t\ticonBg: \"bg-emerald-500/10\",\n\t\ticonColor: \"text-emerald-600\",\n\t\tdescription: \"Financial management\",\n\t},\n\t{\n\t\tlabel: \"Reporting\",\n\t\thref: \"/dashboard/reporting\",\n\t\ticon: BarChart3,\n\t\tstatus: \"coming-soon\",\n\t\ticonBg: \"bg-primary/10\",\n\t\ticonColor: \"text-primary\",\n\t\tdescription: \"Analytics and reports\",\n\t},\n\t{\n\t\tlabel: \"Marketing\",\n\t\thref: \"/dashboard/marketing\",\n\t\ticon: Megaphone,\n\t\tstatus: \"coming-soon\",\n\t\ticonBg: \"bg-accent/10\",\n\t\ticonColor: \"text-accent-foreground\",\n\t\tdescription: \"Marketing campaigns\",\n\t},\n\t{\n\t\tlabel: \"Training\",\n\t\thref: \"/dashboard/training\",\n\t\ticon: GraduationCap,\n\t\tstatus: \"coming-soon\",\n\t\ticonBg: \"bg-accent/10\",\n\t\ticonColor: \"text-accent-foreground\",\n\t\tdescription: \"Learning center\",\n\t},\n\t{\n\t\tlabel: \"Settings\",\n\t\thref: \"/dashboard/settings\",\n\t\ticon: Settings,\n\t\ticonBg: \"bg-muted/50\",\n\t\ticonColor: \"text-muted-foreground\",\n\t\tdescription: \"App preferences\",\n\t},\n\t{\n\t\tlabel: \"Help\",\n\t\thref: \"/help\",\n\t\ticon: HelpCircle,\n\t\ticonBg: \"bg-muted/50\",\n\t\ticonColor: \"text-muted-foreground\",\n\t\tdescription: \"Get support\",\n\t},\n];\n\nfunction StatusBadge({ status }: { status?: NavItemStatus }) {\n\tif (!status) {\n\t\treturn null;\n\t}\n\n\tconst styles = {\n\t\tbeta: \"bg-blue-500 text-white\",\n\t\tnew: \"bg-green-500 text-white\",\n\t\tupdated: \"bg-purple-500 text-white\",\n\t\t\"coming-soon\": \"bg-purple-500 text-white\",\n\t};\n\n\tconst labels = {\n\t\tbeta: \"Beta\",\n\t\tnew: \"New\",\n\t\tupdated: \"Updated\",\n\t\t\"coming-soon\": \"Soon\",\n\t};\n\n\treturn (\n\t\t<span\n\t\t\tclassName={`inline-flex items-center rounded-full px-2 py-0.5 text-[0.65rem] font-semibold tracking-wide uppercase ${styles[status]}`}\n\t\t>\n\t\t\t{labels[status]}\n\t\t</span>\n\t);\n}\n\nfunction formatBadgeCount(count: number): string {\n\tif (count <= 9) {\n\t\treturn count.toString();\n\t}\n\tif (count <= 99) {\n\t\treturn \"99+\";\n\t}\n\tif (count <= 999) {\n\t\treturn \"999+\";\n\t}\n\treturn \"1K+\";\n}\n\ntype MobileBottomTabsProps = {\n\tunreadCount?: number;\n};\n\nexport function MobileBottomTabs({ unreadCount = 0 }: MobileBottomTabsProps) {\n\tconst pathname = usePathname();\n\tconst [isMoreOpen, setIsMoreOpen] = useState(false);\n\n\t// Hide bottom tabs on TV route and welcome route\n\tconst isTVRoute = pathname === \"/dashboard/tv\";\n\tconst isWelcomeRoute = pathname === \"/welcome\";\n\n\t// Don't render on TV or welcome routes\n\tif (isTVRoute || isWelcomeRoute) {\n\t\treturn null;\n\t}\n\n\t// Define primary tabs (always visible at bottom)\n\t// Use mobile-optimized dashboard pages for Work and Communication tabs\n\tconst tabs = [\n\t\t{\n\t\t\tlabel: \"Today\",\n\t\t\thref: \"/dashboard\",\n\t\t\ticon: Home,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Messages\",\n\t\t\thref: \"/dashboard/communication/mobile\",\n\t\t\ticon: MessageSquare,\n\t\t\tbadge: unreadCount,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Work\",\n\t\t\thref: \"/dashboard/work/mobile\",\n\t\t\ticon: Briefcase,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Schedule\",\n\t\t\thref: \"/dashboard/schedule\",\n\t\t\ticon: Calendar,\n\t\t},\n\t\t{\n\t\t\tlabel: \"More\",\n\t\t\ticon: MoreHorizontal,\n\t\t\tonClick: () => setIsMoreOpen(true),\n\t\t},\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t{/* Mobile Bottom Tab Bar - iOS/Android style */}\n\t\t\t<nav className=\"safe-bottom bg-background fixed bottom-0 left-0 right-0 z-40 border-t border-border lg:hidden\">\n\t\t\t\t<div className=\"grid h-16 grid-cols-5\">\n\t\t\t\t\t{tabs.map((tab) => {\n\t\t\t\t\t\t// Determine if tab is active\n\t\t\t\t\t\tlet isActive = false;\n\t\t\t\t\t\tif (tab.href) {\n\t\t\t\t\t\t\tif (tab.href === \"/dashboard\") {\n\t\t\t\t\t\t\t\t// Today tab - exact match only\n\t\t\t\t\t\t\t\tisActive = pathname === \"/dashboard\";\n\t\t\t\t\t\t\t} else if (tab.href === \"/dashboard/communication/mobile\") {\n\t\t\t\t\t\t\t\t// Communication tab - match /dashboard/communication/* (including /mobile)\n\t\t\t\t\t\t\t\tisActive = pathname?.startsWith(\"/dashboard/communication\");\n\t\t\t\t\t\t\t} else if (tab.href === \"/dashboard/work/mobile\") {\n\t\t\t\t\t\t\t\t// Work tab - match /dashboard/work/* (including /mobile) or /dashboard/customers\n\t\t\t\t\t\t\t\tisActive =\n\t\t\t\t\t\t\t\t\tpathname?.startsWith(\"/dashboard/work\") ||\n\t\t\t\t\t\t\t\t\tpathname?.startsWith(\"/dashboard/customers\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Other tabs - standard prefix match\n\t\t\t\t\t\t\t\tisActive = pathname?.startsWith(tab.href);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst Icon = tab.icon;\n\n\t\t\t\t\t\t// If tab has onClick (More button), render as button\n\t\t\t\t\t\tif (tab.onClick) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`flex flex-col items-center justify-center gap-1 transition-colors ${\n\t\t\t\t\t\t\t\t\t\tisMoreOpen\n\t\t\t\t\t\t\t\t\t\t\t? \"text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground hover:text-foreground active:text-primary\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tkey={tab.label}\n\t\t\t\t\t\t\t\t\tonClick={tab.onClick}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\taria-label=\"Open more menu\"\n\t\t\t\t\t\t\t\t\taria-expanded={isMoreOpen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className=\"text-[0.65rem] font-medium leading-tight\">{tab.label}</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Regular tab with link\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName={`flex flex-col items-center justify-center gap-1 transition-colors ${\n\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t? \"text-primary\"\n\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground hover:text-foreground active:text-primary\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\thref={tab.href!}\n\t\t\t\t\t\t\t\tkey={tab.label}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t{typeof tab.badge === 'number' && tab.badge > 0 && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"absolute top-0 right-0 flex h-2 w-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"relative inline-flex rounded-full h-2 w-2 bg-red-500\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">{tab.badge} unread {tab.badge === 1 ? 'message' : 'messages'}</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{isActive && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"absolute -bottom-1.5 left-1/2 h-1 w-1 -translate-x-1/2 rounded-full bg-primary\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-[0.65rem] font-medium leading-tight\">{tab.label}</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</nav>\n\n\t\t\t{/* More Menu - Full Screen Overlay with Dialog (includes focus trap) */}\n\t\t\t<Dialog.Root open={isMoreOpen} onOpenChange={setIsMoreOpen}>\n\t\t\t\t<Dialog.Portal>\n\t\t\t\t\t<Dialog.Overlay className=\"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 lg:hidden\" />\n\t\t\t\t\t<Dialog.Content className=\"fixed inset-0 z-50 flex flex-col bg-background lg:hidden data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\">\n\t\t\t\t\t\t{/* Header with Close Button */}\n\t\t\t\t\t\t<div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-border\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between px-4 h-14\">\n\t\t\t\t\t\t\t\t<Dialog.Title className=\"text-lg font-bold tracking-tight\">\n\t\t\t\t\t\t\t\t\tMore\n\t\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t\t<Dialog.Close\n\t\t\t\t\t\t\t\t\tclassName=\"flex h-10 w-10 items-center justify-center rounded-full hover:bg-accent/80 transition-colors active:scale-95\"\n\t\t\t\t\t\t\t\t\taria-label=\"Close menu\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t</Dialog.Close>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Scrollable Content */}\n\t\t\t\t\t\t<div className=\"h-[calc(100vh-3.5rem)] overflow-y-auto px-4 py-6\">\n\t\t\t\t\t\t\t<div className=\"space-y-3 pb-safe\">\n\t\t\t\t\t\t\t\t{moreNavigationItems.map((item) => {\n\t\t\t\t\t\t\t\t\tconst isActive = pathname?.startsWith(item.href);\n\t\t\t\t\t\t\t\t\tconst Icon = item.icon;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName={`group flex items-center gap-4 rounded-2xl border-2 p-5 transition-all duration-200 active:scale-[0.98] ${\n\t\t\t\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"border-primary/40 bg-primary/10 text-primary shadow-lg shadow-primary/20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"border-border bg-card text-card-foreground hover:border-primary/30 hover:bg-primary/5 hover:shadow-md\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.href}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsMoreOpen(false)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`flex h-14 w-14 shrink-0 items-center justify-center rounded-xl transition-all duration-200 ${item.iconBg} ${\n\t\t\t\t\t\t\t\t\t\t\t\t\tisActive ? \"scale-105\" : \"group-hover:scale-105\"\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon className={`h-7 w-7 ${item.iconColor}`} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-base\">{item.label}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.status && <StatusBadge status={item.status} />}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.description && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm leading-snug\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`h-5 w-5 text-muted-foreground/50 transition-all ${\n\t\t\t\t\t\t\t\t\t\t\t\t\tisActive ? \"text-primary\" : \"group-hover:translate-x-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Dialog.Content>\n\t\t\t\t</Dialog.Portal>\n\t\t\t</Dialog.Root>\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5955, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/mobile-bottom-tabs-wrapper.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport { getTotalUnreadCountAction } from \"@/actions/email-actions\";\nimport { MobileBottomTabs } from \"./mobile-bottom-tabs\";\n\n/**\n * MobileBottomTabsWrapper - Client Component\n *\n * Fetches unread count and passes it to MobileBottomTabs.\n * Separate wrapper to keep the main component clean.\n */\nexport function MobileBottomTabsWrapper() {\n\tconst pathname = usePathname();\n\tconst [unreadCount, setUnreadCount] = useState(0);\n\n\t// Fetch unread count on mount, when pathname changes, and periodically\n\tuseEffect(() => {\n\t\tconst fetchUnreadCount = async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await getTotalUnreadCountAction();\n\t\t\t\tif (result.success && result.count !== undefined) {\n\t\t\t\t\tsetUnreadCount(result.count);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to fetch unread count:\", error);\n\t\t\t}\n\t\t};\n\n\t\t// Fetch immediately\n\t\tfetchUnreadCount();\n\n\t\t// Refresh every 30 seconds\n\t\tconst interval = setInterval(fetchUnreadCount, 30000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [pathname]);\n\n\treturn <MobileBottomTabs unreadCount={unreadCount} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAaO,SAAS;;IACf,MAAM,WAAW,IAAA,2TAAW;IAC5B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAE/C,uEAAuE;IACvE,IAAA,iVAAS;6CAAC;YACT,MAAM;sEAAmB;oBACxB,IAAI;wBACH,MAAM,SAAS,MAAM,IAAA,qMAAyB;wBAC9C,IAAI,OAAO,OAAO,IAAI,OAAO,KAAK,KAAK,WAAW;4BACjD,eAAe,OAAO,KAAK;wBAC5B;oBACD,EAAE,OAAO,OAAO;wBACf,QAAQ,KAAK,CAAC,iCAAiC;oBAChD;gBACD;;YAEA,oBAAoB;YACpB;YAEA,2BAA2B;YAC3B,MAAM,WAAW,YAAY,kBAAkB;YAE/C;qDAAO,IAAM,cAAc;;QAC5B;4CAAG;QAAC;KAAS;IAEb,qBAAO,oWAAC,8LAAgB;QAAC,aAAa;;;;;;AACvC;GA3BgB;;QACE,2TAAW;;;KADb"}},
    {"offset": {"line": 6024, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/layout/notifications-initializer.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * NotificationsInitializer\n *\n * Ensures realtime notifications and desktop permissions are ready globally.\n * - Subscribes to the notifications store as soon as the dashboard mounts\n * - Requests desktop notification permission once per browser\n * - Keeps communication toasts (SMS, calls, voicemail) in sync with desktop alerts\n */\n\nimport { useEffect, useRef } from \"react\";\nimport { useCommunicationNotificationsStore } from \"@/lib/stores/communication-notifications-store\";\nimport { useNotificationsStore } from \"@/lib/stores/notifications-store\";\nimport { createClient } from \"@/lib/supabase/client\";\n\nconst DESKTOP_PROMPT_KEY = \"communication_desktop_prompted\";\n\nexport function NotificationsInitializer() {\n\tconst subscribe = useNotificationsStore((state) => state.subscribe);\n\tconst unsubscribe = useNotificationsStore((state) => state.unsubscribe);\n\n\tconst requestDesktopPermission = useCommunicationNotificationsStore(\n\t\t(state) => state.requestDesktopNotificationPermission,\n\t);\n\tconst desktopNotificationsEnabled = useCommunicationNotificationsStore(\n\t\t(state) => state.desktopNotificationsEnabled,\n\t);\n\tconst setDesktopNotificationsEnabled = useCommunicationNotificationsStore(\n\t\t(state) => state.setDesktopNotificationsEnabled,\n\t);\n\n\tconst hasSubscribedRef = useRef(false);\n\n\t// Start realtime notifications subscription immediately\n\tuseEffect(() => {\n\t\tif (hasSubscribedRef.current) {\n\t\t\treturn;\n\t\t}\n\t\thasSubscribedRef.current = true;\n\n\t\tlet cancelled = false;\n\t\tconst supabase = createClient();\n\n\t\t(async () => {\n\t\t\tif (!supabase) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tdata: { user },\n\t\t\t} = await supabase.auth.getUser();\n\n\t\t\tif (!user || cancelled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait subscribe(user.id);\n\t\t})();\n\n\t\treturn () => {\n\t\t\tcancelled = true;\n\t\t\tunsubscribe();\n\t\t};\n\t}, [subscribe, unsubscribe]);\n\n\t// Ask for desktop notification permission once\n\tuseEffect(() => {\n\t\tif (typeof window === \"undefined\" || !(\"Notification\" in window)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst alreadyPrompted =\n\t\t\twindow.localStorage.getItem(DESKTOP_PROMPT_KEY) === \"true\";\n\n\t\tconst finalizePrompt = (granted: boolean) => {\n\t\t\twindow.localStorage.setItem(DESKTOP_PROMPT_KEY, \"true\");\n\t\t\tif (!granted && desktopNotificationsEnabled) {\n\t\t\t\tsetDesktopNotificationsEnabled(false);\n\t\t\t}\n\t\t};\n\n\t\t// Permission already decided\n\t\tif (Notification.permission === \"granted\") {\n\t\t\tif (!alreadyPrompted) {\n\t\t\t\twindow.localStorage.setItem(DESKTOP_PROMPT_KEY, \"true\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (Notification.permission === \"denied\") {\n\t\t\tif (!alreadyPrompted) {\n\t\t\t\twindow.localStorage.setItem(DESKTOP_PROMPT_KEY, \"true\");\n\t\t\t}\n\t\t\tif (desktopNotificationsEnabled) {\n\t\t\t\tsetDesktopNotificationsEnabled(false);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Only prompt once while permission is \"default\"\n\t\tif (alreadyPrompted) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timer = window.setTimeout(() => {\n\t\t\trequestDesktopPermission()\n\t\t\t\t.then((granted) => finalizePrompt(granted))\n\t\t\t\t.catch(() => finalizePrompt(false));\n\t\t}, 1500);\n\n\t\treturn () => window.clearTimeout(timer);\n\t}, [\n\t\tdesktopNotificationsEnabled,\n\t\trequestDesktopPermission,\n\t\tsetDesktopNotificationsEnabled,\n\t]);\n\n\treturn null;\n}\n"],"names":[],"mappings":";;;;AAEA;;;;;;;CAOC,GAED;AACA;AACA;AACA;;AAdA;;;;;AAgBA,MAAM,qBAAqB;AAEpB,SAAS;;IACf,MAAM,YAAY,IAAA,yLAAqB;qEAAC,CAAC,QAAU,MAAM,SAAS;;IAClE,MAAM,cAAc,IAAA,yLAAqB;uEAAC,CAAC,QAAU,MAAM,WAAW;;IAEtE,MAAM,2BAA2B,IAAA,uNAAkC;iGAClE,CAAC,QAAU,MAAM,oCAAoC;;IAEtD,MAAM,8BAA8B,IAAA,uNAAkC;oGACrE,CAAC,QAAU,MAAM,2BAA2B;;IAE7C,MAAM,iCAAiC,IAAA,uNAAkC;uGACxE,CAAC,QAAU,MAAM,8BAA8B;;IAGhD,MAAM,mBAAmB,IAAA,8UAAM,EAAC;IAEhC,wDAAwD;IACxD,IAAA,iVAAS;8CAAC;YACT,IAAI,iBAAiB,OAAO,EAAE;gBAC7B;YACD;YACA,iBAAiB,OAAO,GAAG;YAE3B,IAAI,YAAY;YAChB,MAAM,WAAW,IAAA,wJAAY;YAE7B;sDAAC;oBACA,IAAI,CAAC,UAAU;wBACd;oBACD;oBAEA,MAAM,EACL,MAAM,EAAE,IAAI,EAAE,EACd,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;oBAE/B,IAAI,CAAC,QAAQ,WAAW;wBACvB;oBACD;oBAEA,MAAM,UAAU,KAAK,EAAE;gBACxB;aAAC;YAED;sDAAO;oBACN,YAAY;oBACZ;gBACD;;QACD;6CAAG;QAAC;QAAW;KAAY;IAE3B,+CAA+C;IAC/C,IAAA,iVAAS;8CAAC;YACT,IAAI,+CAAkB,eAAe,CAAC,CAAC,kBAAkB,MAAM,GAAG;gBACjE;YACD;YAEA,MAAM,kBACL,OAAO,YAAY,CAAC,OAAO,CAAC,wBAAwB;YAErD,MAAM;qEAAiB,CAAC;oBACvB,OAAO,YAAY,CAAC,OAAO,CAAC,oBAAoB;oBAChD,IAAI,CAAC,WAAW,6BAA6B;wBAC5C,+BAA+B;oBAChC;gBACD;;YAEA,6BAA6B;YAC7B,IAAI,aAAa,UAAU,KAAK,WAAW;gBAC1C,IAAI,CAAC,iBAAiB;oBACrB,OAAO,YAAY,CAAC,OAAO,CAAC,oBAAoB;gBACjD;gBACA;YACD;YAEA,IAAI,aAAa,UAAU,KAAK,UAAU;gBACzC,IAAI,CAAC,iBAAiB;oBACrB,OAAO,YAAY,CAAC,OAAO,CAAC,oBAAoB;gBACjD;gBACA,IAAI,6BAA6B;oBAChC,+BAA+B;gBAChC;gBACA;YACD;YAEA,iDAAiD;YACjD,IAAI,iBAAiB;gBACpB;YACD;YAEA,MAAM,QAAQ,OAAO,UAAU;4DAAC;oBAC/B,2BACE,IAAI;oEAAC,CAAC,UAAY,eAAe;mEACjC,KAAK;oEAAC,IAAM,eAAe;;gBAC9B;2DAAG;YAEH;sDAAO,IAAM,OAAO,YAAY,CAAC;;QAClC;6CAAG;QACF;QACA;QACA;KACA;IAED,OAAO;AACR;GArGgB;;QACG,yLAAqB;QACnB,yLAAqB;QAER,uNAAkC;QAG/B,uNAAkC;QAG/B,uNAAkC;;;KAV1D"}},
    {"offset": {"line": 6170, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/ui/dialog.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC"}},
    {"offset": {"line": 6181, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/support/session-approval-modal.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Support Session Approval Modal\n *\n * Modal that appears when support requests access to the company account.\n * Customer can approve (with duration) or deny the request.\n */\n\nimport { useState } from \"react\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Shield, Clock, User, Ticket, AlertCircle } from \"lucide-react\";\nimport { approveSupportSessionRequest, rejectSupportSessionRequest } from \"@/actions/support-sessions\";\nimport { toast } from \"sonner\";\n\ninterface SupportSession {\n\tid: string;\n\tadmin_user_id: string;\n\tticket_id: string | null;\n\treason: string;\n\trequested_at: string;\n\trequested_permissions: string[];\n\tadmin_name?: string;\n\tadmin_email?: string;\n}\n\ninterface SessionApprovalModalProps {\n\tsession: SupportSession | null;\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tonApproved?: () => void;\n\tonRejected?: () => void;\n}\n\nexport function SessionApprovalModal({ session, open, onOpenChange, onApproved, onRejected }: SessionApprovalModalProps) {\n\tconst [isApproving, setIsApproving] = useState(false);\n\tconst [isRejecting, setIsRejecting] = useState(false);\n\tconst [duration, setDuration] = useState(\"60\"); // minutes\n\n\tif (!session) return null;\n\n\tconst handleApprove = async () => {\n\t\tsetIsApproving(true);\n\t\ttry {\n\t\t\tconst result = await approveSupportSessionRequest(session.id, parseInt(duration));\n\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Support access approved\", {\n\t\t\t\t\tdescription: `Access granted for ${duration} minutes`,\n\t\t\t\t});\n\t\t\t\tonOpenChange(false);\n\t\t\t\tonApproved?.();\n\t\t\t} else {\n\t\t\t\ttoast.error(\"Failed to approve access\", {\n\t\t\t\t\tdescription: result.error || \"Please try again\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttoast.error(\"Error approving access\");\n\t\t\tconsole.error(error);\n\t\t} finally {\n\t\t\tsetIsApproving(false);\n\t\t}\n\t};\n\n\tconst handleReject = async () => {\n\t\tsetIsRejecting(true);\n\t\ttry {\n\t\t\tconst result = await rejectSupportSessionRequest(session.id, \"Declined by customer\");\n\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Support access denied\");\n\t\t\t\tonOpenChange(false);\n\t\t\t\tonRejected?.();\n\t\t\t} else {\n\t\t\t\ttoast.error(\"Failed to deny access\", {\n\t\t\t\t\tdescription: result.error || \"Please try again\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttoast.error(\"Error denying access\");\n\t\t\tconsole.error(error);\n\t\t} finally {\n\t\t\tsetIsRejecting(false);\n\t\t}\n\t};\n\n\t// Format permissions for display\n\tconst permissionLabels: Record<string, string> = {\n\t\tview: \"View your account data\",\n\t\tedit_jobs: \"Modify jobs\",\n\t\tedit_invoices: \"Modify invoices\",\n\t\tedit_payments: \"Manage payments\",\n\t\trefund: \"Issue refunds\",\n\t\tedit_team: \"Manage team members\",\n\t\treset_password: \"Reset passwords\",\n\t\tedit_company: \"Update company settings\",\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent className=\"sm:max-w-[500px]\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t<div className=\"rounded-full bg-orange-100 dark:bg-orange-900/20 p-2\">\n\t\t\t\t\t\t\t<Shield className=\"h-5 w-5 text-orange-600\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<DialogTitle>Support Access Request</DialogTitle>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogDescription>A support team member is requesting access to your account to assist you.</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"space-y-4 py-4\">\n\t\t\t\t\t{/* Admin Info */}\n\t\t\t\t\t<div className=\"rounded-lg border bg-muted/50 p-4 space-y-3\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<User className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">Support Representative</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">{session.admin_name || session.admin_email || session.admin_user_id}</p>\n\n\t\t\t\t\t\t{session.ticket_id && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 pt-2 border-t\">\n\t\t\t\t\t\t\t\t<Ticket className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<span className=\"text-sm\">\n\t\t\t\t\t\t\t\t\tTicket: <span className=\"font-mono\">{session.ticket_id}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Reason */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<label className=\"text-sm font-medium\">Reason for Access</label>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground rounded-md border p-3 bg-muted/30\">{session.reason}</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Permissions */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<label className=\"text-sm font-medium\">Requested Permissions</label>\n\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t{session.requested_permissions.map((permission) => (\n\t\t\t\t\t\t\t\t<div key={permission} className=\"flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"h-1.5 w-1.5 rounded-full bg-orange-500\" />\n\t\t\t\t\t\t\t\t\t<span>{permissionLabels[permission] || permission}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Duration Selector */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<label className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Clock className=\"h-4 w-4\" />\n\t\t\t\t\t\t\tAccess Duration\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Select value={duration} onValueChange={setDuration}>\n\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t<SelectItem value=\"30\">30 minutes</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"60\">1 hour (recommended)</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"120\">2 hours</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"240\">4 hours</SelectItem>\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Support access will automatically expire after this time.</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Security Notice */}\n\t\t\t\t\t<div className=\"rounded-lg border border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/20 p-3 space-y-1\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-2\">\n\t\t\t\t\t\t\t<AlertCircle className=\"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0\" />\n\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium text-orange-900 dark:text-orange-100\">Security Notice</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-orange-800 dark:text-orange-200\">All actions taken by support will be logged and visible in your account audit trail.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<DialogFooter className=\"flex-col sm:flex-row gap-2\">\n\t\t\t\t\t<Button type=\"button\" variant=\"outline\" onClick={handleReject} disabled={isApproving || isRejecting} className=\"w-full sm:w-auto\">\n\t\t\t\t\t\t{isRejecting ? \"Denying...\" : \"Deny Access\"}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"button\" onClick={handleApprove} disabled={isApproving || isRejecting} className=\"w-full sm:w-auto bg-orange-600 hover:bg-orange-700\">\n\t\t\t\t\t\t{isApproving ? \"Approving...\" : `Approve for ${duration === \"60\" ? \"1 hour\" : duration === \"30\" ? \"30 min\" : duration === \"120\" ? \"2 hours\" : \"4 hours\"}`}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6680, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/support/active-session-banner.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Active Support Session Banner\n *\n * Displays at the top of the page when support is viewing the account.\n * Shows who's viewing, time remaining, and option to end access.\n */\n\nimport { useState, useEffect } from \"react\";\nimport { Shield, X, Clock, ExternalLink } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { endActiveSupportSession } from \"@/actions/support-sessions\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\n\ninterface ActiveSession {\n\tid: string;\n\tadmin_user_id: string;\n\tticket_id: string | null;\n\treason: string;\n\tapproved_at: string;\n\texpires_at: string;\n\tadmin_name?: string;\n\tadmin_email?: string;\n}\n\ninterface ActiveSessionBannerProps {\n\tsession: ActiveSession;\n\tonSessionEnded?: () => void;\n}\n\nexport function ActiveSessionBanner({ session, onSessionEnded }: ActiveSessionBannerProps) {\n\tconst [timeRemaining, setTimeRemaining] = useState(\"\");\n\tconst [isEnding, setIsEnding] = useState(false);\n\tconst [isExpired, setIsExpired] = useState(false);\n\n\t// Calculate time remaining\n\tuseEffect(() => {\n\t\tconst updateTimer = () => {\n\t\t\tconst now = new Date();\n\t\t\tconst expiresAt = new Date(session.expires_at);\n\t\t\tconst diff = expiresAt.getTime() - now.getTime();\n\n\t\t\tif (diff <= 0) {\n\t\t\t\tsetTimeRemaining(\"Expired\");\n\t\t\t\tsetIsExpired(true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst minutes = Math.floor(diff / 1000 / 60);\n\t\t\tconst seconds = Math.floor((diff / 1000) % 60);\n\n\t\t\tif (minutes > 0) {\n\t\t\t\tsetTimeRemaining(`${minutes}:${seconds.toString().padStart(2, \"0\")}`);\n\t\t\t} else {\n\t\t\t\tsetTimeRemaining(`${seconds}s`);\n\t\t\t}\n\t\t};\n\n\t\tupdateTimer();\n\t\tconst interval = setInterval(updateTimer, 1000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [session.expires_at]);\n\n\tconst handleEndSession = async () => {\n\t\tif (!confirm(\"Are you sure you want to end support access?\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsEnding(true);\n\t\ttry {\n\t\t\tconst result = await endActiveSupportSession(session.id);\n\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Support access ended\");\n\t\t\t\tonSessionEnded?.();\n\t\t\t} else {\n\t\t\t\ttoast.error(\"Failed to end access\", {\n\t\t\t\t\tdescription: result.error,\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttoast.error(\"Error ending support access\");\n\t\t\tconsole.error(error);\n\t\t} finally {\n\t\t\tsetIsEnding(false);\n\t\t}\n\t};\n\n\t// Don't show if expired\n\tif (isExpired) {\n\t\treturn null;\n\t}\n\n\t// Get timer color based on time remaining\n\tconst getTimerColor = () => {\n\t\tconst now = new Date();\n\t\tconst expiresAt = new Date(session.expires_at);\n\t\tconst minutesLeft = (expiresAt.getTime() - now.getTime()) / 1000 / 60;\n\n\t\tif (minutesLeft <= 5) return \"text-red-600 dark:text-red-400\";\n\t\tif (minutesLeft <= 10) return \"text-yellow-600 dark:text-yellow-400\";\n\t\treturn \"text-green-600 dark:text-green-400\";\n\t};\n\n\treturn (\n\t\t<div className=\"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-orange-500 to-orange-600 dark:from-orange-600 dark:to-orange-700 text-white shadow-lg\">\n\t\t\t<div className=\"container mx-auto px-4 py-2\">\n\t\t\t\t<div className=\"flex items-center justify-between gap-4\">\n\t\t\t\t\t{/* Left: Support viewing info */}\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<div className=\"rounded-full bg-white/20 p-1.5\">\n\t\t\t\t\t\t\t<Shield className=\"h-4 w-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t<span className=\"font-medium\">Support Access Active</span>\n\t\t\t\t\t\t\t<span className=\"opacity-90\">•</span>\n\t\t\t\t\t\t\t<span className=\"opacity-90\">{session.admin_name || session.admin_email || \"Support Team\"}</span>\n\t\t\t\t\t\t\t{session.ticket_id && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<span className=\"opacity-90\">•</span>\n\t\t\t\t\t\t\t\t\t<span className=\"opacity-90\">Ticket: {session.ticket_id}</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Right: Timer and actions */}\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t{/* Timer */}\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5 text-sm\">\n\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t<span className={`font-mono font-medium ${getTimerColor()}`}>{timeRemaining}</span>\n\t\t\t\t\t\t\t<span className=\"opacity-90 text-xs\">remaining</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* View Activity Link */}\n\t\t\t\t\t\t<Link href=\"/dashboard/settings/support-activity\" className=\"hidden sm:flex\">\n\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 gap-1.5 text-white hover:bg-white/20\">\n\t\t\t\t\t\t\t\t<ExternalLink className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t<span className=\"text-xs\">View Activity</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t\t{/* End Access Button */}\n\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" onClick={handleEndSession} disabled={isEnding} className=\"h-7 gap-1.5 text-white hover:bg-white/20 border border-white/30\">\n\t\t\t\t\t\t\t<X className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t<span className=\"text-xs\">{isEnding ? \"Ending...\" : \"End Access\"}</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6997, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/support/support-action-notifier.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Support Action Notifier\n *\n * Polls for new support actions during active sessions and shows toast notifications.\n * Keeps customers informed of what support is doing in real-time.\n */\n\nimport { useEffect, useRef } from \"react\";\nimport { toast } from \"sonner\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Edit, DollarSign, Users, FileText, Briefcase, Shield } from \"lucide-react\";\n\ninterface SupportAction {\n\tid: string;\n\taction: string;\n\tresource_type: string;\n\tresource_id: string;\n\treason: string | null;\n\tcreated_at: string;\n\tsession_id: string;\n}\n\nconst POLL_INTERVAL = 10000; // 10 seconds\n\nexport function SupportActionNotifier() {\n\tconst lastCheckedRef = useRef<string | null>(null);\n\tconst isCheckingRef = useRef(false);\n\n\tuseEffect(() => {\n\t\tconst checkForNewActions = async () => {\n\t\t\t// Prevent concurrent checks\n\t\t\tif (isCheckingRef.current) return;\n\t\t\tisCheckingRef.current = true;\n\n\t\t\ttry {\n\t\t\t\tconst supabase = createClient();\n\n\t\t\t\t// Get current user's company\n\t\t\t\tconst {\n\t\t\t\t\tdata: { user },\n\t\t\t\t} = await supabase.auth.getUser();\n\t\t\t\tif (!user) return;\n\n\t\t\t\tconst { data: teamMember } = await supabase.from(\"team_members\").select(\"company_id\").eq(\"user_id\", user.id).single();\n\t\t\t\tif (!teamMember) return;\n\n\t\t\t\t// Get active sessions for this company\n\t\t\t\tconst { data: activeSessions } = await supabase.from(\"support_sessions\").select(\"id\").eq(\"company_id\", teamMember.company_id).eq(\"status\", \"active\");\n\n\t\t\t\tif (!activeSessions || activeSessions.length === 0) return;\n\n\t\t\t\tconst sessionIds = activeSessions.map((s) => s.id);\n\n\t\t\t\t// Query for new actions since last check\n\t\t\t\tlet query = supabase.from(\"support_session_actions\").select(\"id, action, resource_type, resource_id, reason, created_at, session_id\").in(\"session_id\", sessionIds).order(\"created_at\", { ascending: false }).limit(10);\n\n\t\t\t\t// If we've checked before, only get actions after the last check\n\t\t\t\tif (lastCheckedRef.current) {\n\t\t\t\t\tquery = query.gt(\"created_at\", lastCheckedRef.current);\n\t\t\t\t}\n\n\t\t\t\tconst { data: newActions } = await query;\n\n\t\t\t\tif (newActions && newActions.length > 0) {\n\t\t\t\t\t// Update last checked timestamp\n\t\t\t\t\tlastCheckedRef.current = newActions[0].created_at;\n\n\t\t\t\t\t// Show toast for each new action (most recent first)\n\t\t\t\t\tnewActions.reverse().forEach((action) => {\n\t\t\t\t\t\tshowActionNotification(action);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Error checking for support actions:\", error);\n\t\t\t} finally {\n\t\t\t\tisCheckingRef.current = false;\n\t\t\t}\n\t\t};\n\n\t\t// Initial check\n\t\tcheckForNewActions();\n\n\t\t// Set up polling\n\t\tconst interval = setInterval(checkForNewActions, POLL_INTERVAL);\n\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\treturn null; // This component doesn't render anything\n}\n\nfunction showActionNotification(action: SupportAction) {\n\tconst icon = getActionIcon(action.resource_type);\n\tconst message = getActionMessage(action);\n\n\ttoast.info(message, {\n\t\tdescription: action.reason || \"Support action performed\",\n\t\ticon: icon,\n\t\tduration: 8000, // 8 seconds\n\t\taction: {\n\t\t\tlabel: \"View Activity\",\n\t\t\tonClick: () => {\n\t\t\t\twindow.location.href = \"/dashboard/settings/support-activity\";\n\t\t\t},\n\t\t},\n\t});\n}\n\nfunction getActionIcon(resourceType: string) {\n\tswitch (resourceType) {\n\t\tcase \"payment\":\n\t\t\treturn <DollarSign className=\"h-4 w-4\" />;\n\t\tcase \"invoice\":\n\t\t\treturn <FileText className=\"h-4 w-4\" />;\n\t\tcase \"job\":\n\t\t\treturn <Briefcase className=\"h-4 w-4\" />;\n\t\tcase \"team\":\n\t\t\treturn <Users className=\"h-4 w-4\" />;\n\t\tdefault:\n\t\t\treturn <Shield className=\"h-4 w-4\" />;\n\t}\n}\n\nfunction getActionMessage(action: SupportAction): string {\n\tconst resourceLabel = action.resource_type.charAt(0).toUpperCase() + action.resource_type.slice(1);\n\tconst actionLabel = action.action.replace(/_/g, \" \").toLowerCase();\n\tconst resourceId = action.resource_id.slice(0, 8);\n\n\treturn `Support ${actionLabel} on ${resourceLabel} (${resourceId}...)`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7160, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/web/src/components/support/support-session-provider.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Support Session Provider\n *\n * Polls for pending/active support sessions and displays:\n * - Approval modal for pending sessions\n * - Active session banner when support is viewing\n *\n * Uses polling initially, can be upgraded to Supabase Realtime for production.\n */\n\nimport { useState, useEffect } from \"react\";\nimport { getPendingSupportSessions, getActiveSupportSessions } from \"@/actions/support-sessions\";\nimport { SessionApprovalModal } from \"./session-approval-modal\";\nimport { ActiveSessionBanner } from \"./active-session-banner\";\nimport { SupportActionNotifier } from \"./support-action-notifier\";\n\ninterface SupportSession {\n\tid: string;\n\tadmin_user_id: string;\n\tticket_id: string | null;\n\treason: string;\n\trequested_at: string;\n\trequested_permissions: string[];\n\tapproved_at?: string;\n\texpires_at?: string;\n\tadmin_name?: string;\n\tadmin_email?: string;\n}\n\nconst POLL_INTERVAL = 10000; // 10 seconds\n\nexport function SupportSessionProvider({ children }: { children: React.ReactNode }) {\n\tconst [pendingSessions, setPendingSessions] = useState<SupportSession[]>([]);\n\tconst [activeSessions, setActiveSessions] = useState<SupportSession[]>([]);\n\tconst [showApprovalModal, setShowApprovalModal] = useState(false);\n\tconst [currentSessionIndex, setCurrentSessionIndex] = useState(0);\n\n\t// Fetch pending and active sessions\n\tconst fetchSessions = async () => {\n\t\ttry {\n\t\t\t// Fetch pending sessions\n\t\t\tconst pendingResult = await getPendingSupportSessions();\n\t\t\tif (pendingResult.success && pendingResult.sessions) {\n\t\t\t\tsetPendingSessions(pendingResult.sessions);\n\n\t\t\t\t// Show modal if there are pending sessions and it's not already shown\n\t\t\t\tif (pendingResult.sessions.length > 0 && !showApprovalModal) {\n\t\t\t\t\tsetShowApprovalModal(true);\n\t\t\t\t\tsetCurrentSessionIndex(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fetch active sessions\n\t\t\tconst activeResult = await getActiveSupportSessions();\n\t\t\tif (activeResult.success && activeResult.sessions) {\n\t\t\t\tsetActiveSessions(activeResult.sessions);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error fetching support sessions:\", error);\n\t\t}\n\t};\n\n\t// Poll for sessions\n\tuseEffect(() => {\n\t\t// Initial fetch\n\t\tfetchSessions();\n\n\t\t// Set up polling\n\t\tconst interval = setInterval(fetchSessions, POLL_INTERVAL);\n\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\t// Handle approval/rejection\n\tconst handleSessionApproved = () => {\n\t\t// Refresh sessions\n\t\tfetchSessions();\n\n\t\t// Show next pending session if any\n\t\tif (currentSessionIndex < pendingSessions.length - 1) {\n\t\t\tsetCurrentSessionIndex(currentSessionIndex + 1);\n\t\t} else {\n\t\t\tsetShowApprovalModal(false);\n\t\t}\n\t};\n\n\tconst handleSessionRejected = () => {\n\t\t// Refresh sessions\n\t\tfetchSessions();\n\n\t\t// Show next pending session if any\n\t\tif (currentSessionIndex < pendingSessions.length - 1) {\n\t\t\tsetCurrentSessionIndex(currentSessionIndex + 1);\n\t\t} else {\n\t\t\tsetShowApprovalModal(false);\n\t\t}\n\t};\n\n\tconst handleSessionEnded = () => {\n\t\t// Refresh sessions to remove ended session\n\t\tfetchSessions();\n\t};\n\n\tconst currentPendingSession = pendingSessions[currentSessionIndex] || null;\n\tconst currentActiveSession = activeSessions[0] || null; // Show first active session\n\n\treturn (\n\t\t<>\n\t\t\t{/* Active Session Banner */}\n\t\t\t{currentActiveSession && <ActiveSessionBanner session={currentActiveSession as any} onSessionEnded={handleSessionEnded} />}\n\n\t\t\t{/* Session Approval Modal */}\n\t\t\t<SessionApprovalModal session={currentPendingSession} open={showApprovalModal} onOpenChange={setShowApprovalModal} onApproved={handleSessionApproved} onRejected={handleSessionRejected} />\n\n\t\t\t{/* Support Action Notifier - shows toast when support takes actions */}\n\t\t\t<SupportActionNotifier />\n\n\t\t\t{/* Add padding to content if active session banner is shown */}\n\t\t\t<div className={currentActiveSession ? \"pt-12\" : \"\"}>{children}</div>\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;;;;CAQC,GAED;AACA;AAAA;AACA;AACA;AACA;;;AAhBA;;;;;;AA+BA,MAAM,gBAAgB,OAAO,aAAa;AAEnC,SAAS,uBAAuB,EAAE,QAAQ,EAAiC;;IACjF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,gVAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAmB,EAAE;IACzE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,gVAAQ,EAAC;IAC3D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,gVAAQ,EAAC;IAE/D,oCAAoC;IACpC,MAAM,gBAAgB;QACrB,IAAI;YACH,yBAAyB;YACzB,MAAM,gBAAgB,MAAM,IAAA,qMAAyB;YACrD,IAAI,cAAc,OAAO,IAAI,cAAc,QAAQ,EAAE;gBACpD,mBAAmB,cAAc,QAAQ;gBAEzC,sEAAsE;gBACtE,IAAI,cAAc,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,mBAAmB;oBAC5D,qBAAqB;oBACrB,uBAAuB;gBACxB;YACD;YAEA,wBAAwB;YACxB,MAAM,eAAe,MAAM,IAAA,oMAAwB;YACnD,IAAI,aAAa,OAAO,IAAI,aAAa,QAAQ,EAAE;gBAClD,kBAAkB,aAAa,QAAQ;YACxC;QACD,EAAE,OAAO,OAAO;YACf,QAAQ,KAAK,CAAC,oCAAoC;QACnD;IACD;IAEA,oBAAoB;IACpB,IAAA,iVAAS;4CAAC;YACT,gBAAgB;YAChB;YAEA,iBAAiB;YACjB,MAAM,WAAW,YAAY,eAAe;YAE5C;oDAAO,IAAM,cAAc;;QAC5B;2CAAG,EAAE;IAEL,4BAA4B;IAC5B,MAAM,wBAAwB;QAC7B,mBAAmB;QACnB;QAEA,mCAAmC;QACnC,IAAI,sBAAsB,gBAAgB,MAAM,GAAG,GAAG;YACrD,uBAAuB,sBAAsB;QAC9C,OAAO;YACN,qBAAqB;QACtB;IACD;IAEA,MAAM,wBAAwB;QAC7B,mBAAmB;QACnB;QAEA,mCAAmC;QACnC,IAAI,sBAAsB,gBAAgB,MAAM,GAAG,GAAG;YACrD,uBAAuB,sBAAsB;QAC9C,OAAO;YACN,qBAAqB;QACtB;IACD;IAEA,MAAM,qBAAqB;QAC1B,2CAA2C;QAC3C;IACD;IAEA,MAAM,wBAAwB,eAAe,CAAC,oBAAoB,IAAI;IACtE,MAAM,uBAAuB,cAAc,CAAC,EAAE,IAAI,MAAM,4BAA4B;IAEpF,qBACC;;YAEE,sCAAwB,oWAAC,qMAAmB;gBAAC,SAAS;gBAA6B,gBAAgB;;;;;;0BAGpG,oWAAC,uMAAoB;gBAAC,SAAS;gBAAuB,MAAM;gBAAmB,cAAc;gBAAsB,YAAY;gBAAuB,YAAY;;;;;;0BAGlK,oWAAC,yMAAqB;;;;;0BAGtB,oWAAC;gBAAI,WAAW,uBAAuB,UAAU;0BAAK;;;;;;;;AAGzD;GA1FgB;KAAA"}}]
}