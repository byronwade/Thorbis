module.exports=[338217,e=>{"use strict";var t=e.i(755535),r=e.i(377233),a=e.i(490003),s=e.i(492991),i=e.i(241970),n=e.i(357699),c=e.i(212454),o=e.i(48717),l=e.i(798301),u=e.i(986366),d=e.i(983537),p=e.i(147475),f=e.i(561930),g=e.i(803747),h=e.i(368557),m=e.i(42037),b=e.i(193695);e.i(432036);var _=e.i(573881),v=e.i(297676),y=e.i(471312),w=e.i(381259),R=e.i(511368),k=e.i(798348);let E=/\s+/,x=(0,w.createClient)("https://togejqdwggezkxahomeh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvZ2VqcWR3Z2dlemt4YWhvbWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3MjAyOTUsImV4cCI6MjA3NzI5NjI5NX0.a74QOxiIcxeALZsTsNXNDiOls1MZDsFfyGFq992eBBM",{auth:{persistSession:!1,autoRefreshToken:!1}});function C(e){return{...e,description:e?.description??void 0,icon:e?.icon??void 0}}function S(e){return{...e,excerpt:e?.excerpt??void 0,featured_image:e?.featured_image??void 0,author:e?.author??void 0,published_at:e?.published_at??void 0,updated_at:e?.updated_at??void 0,metaTitle:e?.metaTitle??void 0,metaDescription:e?.metaDescription??void 0,keywords:e?.keywords??void 0,tags:e?.tags?.map(e=>e.tag)??[],category:e?.category?C(e.category):e?.category}}async function q(e){try{if(!x)return{success:!1,error:"Supabase configuration is missing"};let t=x.from("kb_articles").select(`
        *,
        category:kb_categories(*),
        tags:kb_article_tags(
          tag:kb_tags(*)
        )
      `,{count:"exact"}).eq("published",!0).order("published_at",{ascending:!1});e?.category&&(t=t.eq("category.slug",e.category)),e?.featured!==void 0&&(t=t.eq("featured",e.featured));let r=e?.limit||20,a=e?.offset||0;t=t.range(a,a+r-1);let{data:s,error:i,count:n}=await t;if(i)return{success:!1,error:i.message};let c=s?.map(e=>S(e))??[];return{success:!0,articles:c,total:n||0}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to fetch articles"}}}async function I(e,t){try{if(!x)return{success:!1,error:"Supabase configuration is missing"};let{data:r,error:a}=await x.from("kb_categories").select("id").eq("slug",e).eq("is_active",!0).single();if(a||!r)return{success:!1,error:"Category not found"};let{data:s,error:i}=await x.from("kb_articles").select(`
        *,
        category:kb_categories(*),
        tags:kb_article_tags(
          tag:kb_tags(*)
        )
      `).eq("category_id",r.id).eq("slug",t).eq("published",!0).single();if(i)return{success:!1,error:i.message};if(!s)return{success:!1,error:"Article not found"};let n=S(s);return{success:!0,article:n}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to fetch article"}}}async function A(){try{if(!x)return{success:!1,error:"Supabase configuration is missing"};let{data:e,error:t}=await x.from("kb_categories").select("*").eq("is_active",!0).order("order",{ascending:!0}).order("title",{ascending:!0});if(t)return{success:!1,error:t.message};let r=new Map,a=[];if(e)for(let t of e)r.set(t.id,{...C(t),children:[]});if(e)for(let t of e){let e=r.get(t.id);if(!e)return;if(t.parent_id){let a=r.get(t.parent_id);a&&(a.children=a.children||[],a.children.push(e))}else a.push(e)}return{success:!0,categories:a}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to fetch categories"}}}async function T(e,t){try{if(!x)return{success:!1,error:"Supabase configuration is missing"};if(!e||0===e.trim().length)return{success:!0,articles:[],total:0};let r=e.split(E).map(e=>`${e}:*`).join(" & "),a=t?.limit||20,s=t?.offset||0,{data:i,error:n,count:c}=await x.from("kb_articles").select(`
        *,
        category:kb_categories(*),
        tags:kb_article_tags(
          tag:kb_tags(*)
        )
      `,{count:"exact"}).eq("published",!0).textSearch("search_vector",r,{type:"websearch",config:"english"}).order("view_count",{ascending:!1}).limit(a).range(s,s+a-1);if(n)return{success:!1,error:n.message};let o=i?.map(e=>S(e))??[];return{success:!0,articles:o,total:c||0}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to search articles"}}}async function N(e,t=5){try{if(!x)return{success:!1,error:"Supabase configuration is missing"};let{data:r,error:a}=await x.from("kb_article_related").select(`
        related_article:kb_articles!kb_article_related_related_article_id_fkey(
          *,
          category:kb_categories(*),
          tags:kb_article_tags(
            tag:kb_tags(*)
          )
        )
      `).eq("article_id",e).eq("related_article.published",!0).order("order",{ascending:!0}).limit(t);if(a)return{success:!1,error:a.message};let s=r?.map(e=>S(e.related_article))??[];return{success:!0,articles:s}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to fetch related articles"}}}async function O(e){try{let t=await (0,R.createClient)();if(!t)return{success:!1,error:"Database connection not available"};let{error:r}=await t.rpc("increment_kb_article_views",{article_id:e});if(r){let{data:r}=await t.from("kb_articles").select("view_count").eq("id",e).single();if(r){let{error:a}=await t.from("kb_articles").update({view_count:(r.view_count||0)+1}).eq("id",e);if(a)return{success:!1,error:a.message}}}return{success:!0}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to increment views"}}}async function M(e){try{let t=await (0,R.createClient)();if(!t)return{success:!1,error:"Database connection not available"};let{error:r}=await t.from("kb_feedback").insert({article_id:e.articleId,helpful:e.helpful,comment:e.comment,user_email:e.userEmail});if(r)return{success:!1,error:r.message};if(void 0!==e.helpful){let{data:r}=await t.from("kb_articles").select("helpful_count, not_helpful_count").eq("id",e.articleId).single();if(r){let a=!0===e.helpful?"helpful_count":"not_helpful_count",s=(r[a]||0)+1;await t.from("kb_articles").update({[a]:s}).eq("id",e.articleId)}}return{success:!0}}catch(e){if(e instanceof Error)return{success:!1,error:e.message};return{success:!1,error:"Failed to submit feedback"}}}(0,k.ensureServerEntryExports)([q,I,A,T,N,O,M]),(0,y.registerServerReference)(q,"4070bed0ecc25d050b4520c0f696340ebb01e5390b",null),(0,y.registerServerReference)(I,"60e4942793029c05824ec40bb94739dc0c0daa1438",null),(0,y.registerServerReference)(A,"00c1e90eff34225b6dd95f5f2f2a91828868b9fcfb",null),(0,y.registerServerReference)(T,"60301b0c2049c37f7b265049269699f6d4a7a33d92",null),(0,y.registerServerReference)(N,"605a67c4b75156644201622753ea0654e68cee60ae",null),(0,y.registerServerReference)(O,"40f0ec73569584e2e98c0966c6b8ceab6dc0c1f682",null),(0,y.registerServerReference)(M,"404ca2dce3a3b5558a45a363300d09bf2965522750",null);let D="http://localhost:3000";async function P(){let[e,t]=await Promise.all([q({limit:1e3}),A()]),r=e.success&&e.articles?e.articles:[],a=t.success?t.categories:[],s=r.map(e=>({url:`${D}/kb/${e.category.slug}/${e.slug}`,lastModified:e.updated_at?new Date(String(e.updated_at)):e.published_at?new Date(String(e.published_at)):new Date,changeFrequency:"weekly",priority:e.featured?.9:.7})),i=(a||[]).flatMap(e=>[e,...e.children||[]]).map(e=>({url:`${D}/kb/${e.slug}`,lastModified:new Date,changeFrequency:"daily",priority:.8}));return[{url:`${D}/kb`,lastModified:new Date,changeFrequency:"daily",priority:1},...i,...s]}e.s(["default",()=>P],29925);var F=e.i(225096);async function U(){let e=await P(),t=(0,F.resolveRouteData)(e,"sitemap");return new v.NextResponse(t,{headers:{"Content-Type":"application/xml","Cache-Control":"public, max-age=0, must-revalidate"}})}e.s(["GET",()=>U],919779),e.i(919779),e.i(29925),e.s(["GET",()=>U],94566);var H=e.i(94566);let $=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/(marketing)/kb/sitemap.xml/route",pathname:"/kb/sitemap.xml",filename:"sitemap--route-entry",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/apps/web/src/app/(marketing)/kb/sitemap--route-entry.js",nextConfigOutput:"",userland:H}),{workAsyncStorage:j,workUnitAsyncStorage:B,serverHooks:K}=$;function X(){return(0,a.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:B})}async function Z(e,t,a){$.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/(marketing)/kb/sitemap.xml/route";v=v.replace(/\/index$/,"")||"/";let y=await $.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:w,params:R,nextConfig:k,parsedUrl:E,isDraftMode:x,prerenderManifest:C,routerServerContext:S,isOnDemandRevalidate:q,revalidateOnlyGenerated:I,resolvedPathname:A,clientReferenceManifest:T,serverActionsManifest:N}=y,O=(0,o.normalizeAppPath)(v),M=!!(C.dynamicRoutes[O]||C.routes[A]),D=async()=>((null==S?void 0:S.render404)?await S.render404(e,t,E,!1):t.end("This page could not be found"),null);if(M&&!x){let e=!!C.routes[A],t=C.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(k.experimental.adapterPath)return await D();throw new b.NoFallbackError}}let P=null;!M||$.isDev||x||(P="/index"===(P=A)?"/":P);let F=!0===$.isDev||!M,U=M&&!F;N&&T&&(0,n.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:T,serverActionsManifest:N,serverModuleMap:(0,c.createServerModuleMap)({serverActionsManifest:N})});let H=e.method||"GET",j=(0,i.getTracer)(),B=j.getActiveScopeSpan(),K={params:R,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!k.experimental.authInterrupts},cacheComponents:!!k.cacheComponents,supportsDynamicResponse:F,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:k.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>$.onRequestError(e,t,a,S)},sharedContext:{buildId:w}},X=new l.NodeNextRequest(e),Z=new l.NodeNextResponse(t),G=u.NextRequestAdapter.fromNodeNextRequest(X,(0,u.signalFromNodeResponse)(t));try{let n=async e=>$.handle(G,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${v}`)}),c=!!(0,s.getRequestMeta)(e,"minimalMode"),o=async s=>{var i,o;let l=async({previousCacheEntry:r})=>{try{if(!c&&q&&I&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await n(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let o=K.renderOpts.pendingWaitUntil;o&&a.waitUntil&&(a.waitUntil(o),o=void 0);let l=K.renderOpts.collectedTags;if(!M)return await (0,f.sendResponse)(X,Z,i,K.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(i.headers);l&&(t[m.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:_.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await $.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:q})},S),t}},u=await $.handleResponse({req:e,nextConfig:k,cacheKey:P,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:q,revalidateOnlyGenerated:I,responseGenerator:l,waitUntil:a.waitUntil,isMinimalMode:c});if(!M)return null;if((null==u||null==(i=u.value)?void 0:i.kind)!==_.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(o=u.value)?void 0:o.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});c||t.setHeader("x-nextjs-cache",q?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),x&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,g.fromNodeOutgoingHttpHeaders)(u.value.headers);return c&&M||d.delete(m.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,f.sendResponse)(X,Z,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};B?await o(B):await j.withPropagatedContext(e.headers,()=>j.trace(d.BaseServerSpan.handleRequest,{spanName:`${H} ${v}`,kind:i.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},o))}catch(t){if(t instanceof b.NoFallbackError||await $.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:q})}),M)throw t;return await (0,f.sendResponse)(X,Z,new Response(null,{status:500})),null}}e.s(["handler",()=>Z,"patchFetch",()=>X,"routeModule",()=>$,"serverHooks",()=>K,"workAsyncStorage",()=>j,"workUnitAsyncStorage",()=>B],338217)}];

//# sourceMappingURL=3c0ae_next_dist_esm_build_templates_app-route_32f6a8d1.js.map