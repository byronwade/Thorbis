module.exports=[56418,e=>{"use strict";async function i(e,t,r,l={}){let{limit:a=50,offset:n=0,minSimilarity:s=.3,useFullTextSearch:m=!0,useFuzzyMatch:c=!0}=l;if(!r||0===r.trim().length)return[];let o=r.trim();if(m){let{data:i,error:r}=await e.rpc("search_customers_ranked",{company_id_param:t,search_query:o,result_limit:a,result_offset:n});if(!r&&i)return i}let{data:u}=await e.from("customers").select("*").eq("company_id",t).is("deleted_at",null).or(`display_name.ilike.%${o}%,email.ilike.%${o}%,phone.ilike.%${o}%,company_name.ilike.%${o}%,address.ilike.%${o}%,city.ilike.%${o}%`).order("display_name",{ascending:!0}).limit(a).range(n,n+a-1);return u||[]}async function t(e,i,r,l={}){let{limit:a=50,offset:n=0,useFullTextSearch:s=!0}=l;if(!r||0===r.trim().length)return[];let m=r.trim();if(s){let{data:t,error:r}=await e.rpc("search_jobs_ranked",{company_id_param:i,search_query:m,result_limit:a,result_offset:n});if(!r&&t)return t}let{data:c}=await e.from("jobs").select("*").eq("company_id",i).is("deleted_at",null).or(`job_number.ilike.%${m}%,title.ilike.%${m}%,description.ilike.%${m}%,notes.ilike.%${m}%`).order("created_at",{ascending:!1}).limit(a).range(n,n+a-1);return c||[]}async function r(e,i,t,l={}){let{limit:a=50,offset:n=0,useFullTextSearch:s=!0}=l;if(!t||0===t.trim().length)return[];let m=t.trim();if(s){let{data:t,error:r}=await e.rpc("search_properties_ranked",{company_id_param:i,search_query:m,result_limit:a,result_offset:n});if(!r&&t)return t}let{data:c}=await e.from("properties").select("*").eq("company_id",i).or(`name.ilike.%${m}%,address.ilike.%${m}%,city.ilike.%${m}%,state.ilike.%${m}%,zip_code.ilike.%${m}%`).order("address",{ascending:!0}).limit(a).range(n,n+a-1);return c||[]}async function l(e,i,t,r={}){let{limit:a=100,offset:n=0,useFullTextSearch:s=!0}=r;if(!t||0===t.trim().length)return[];let m=t.trim();if(s){let{data:t,error:r}=await e.rpc("search_price_book_items_ranked",{company_id_param:i,search_query:m,result_limit:a,result_offset:n});if(!r&&t)return t}let{data:c}=await e.from("price_book_items").select("*").eq("company_id",i).or(`name.ilike.%${m}%,sku.ilike.%${m}%,supplier_sku.ilike.%${m}%,description.ilike.%${m}%,category.ilike.%${m}%`).order("name",{ascending:!0}).limit(a).range(n,n+a-1);return c||[]}async function a(e,i,t,r={}){let{limit:l=50,offset:n=0,useFullTextSearch:s=!0}=r;if(!t||0===t.trim().length)return[];let m=t.trim();if(s){let{data:t,error:r}=await e.rpc("search_equipment_ranked",{company_id_param:i,search_query:m,result_limit:l,result_offset:n});if(!r&&t)return t}let{data:c}=await e.from("equipment").select("*").eq("company_id",i).is("deleted_at",null).or(`equipment_number.ilike.%${m}%,name.ilike.%${m}%,type.ilike.%${m}%,manufacturer.ilike.%${m}%,model.ilike.%${m}%,serial_number.ilike.%${m}%`).order("name",{ascending:!0}).limit(l).range(n,n+l-1);return c||[]}async function n(e,s,m,c={}){let o=c.limit||10,[u,_,d,p,f]=await Promise.all([i(e,s,m,{...c,limit:o}),t(e,s,m,{...c,limit:o}),r(e,s,m,{...c,limit:o}),a(e,s,m,{...c,limit:o}),l(e,s,m,{...c,limit:o})]);return{customers:u,jobs:_,properties:d,equipment:p,priceBookItems:f}}e.s(["searchAllEntities",()=>n,"searchCustomersFullText",()=>i,"searchJobsFullText",()=>t])}];

//# sourceMappingURL=apps_web_src_lib_search_full-text-search_ts_e5d10a81._.js.map