module.exports=[23322,e=>{"use strict";var t=e.i(353344),o=e.i(424830),n=e.i(443608),i=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({error:n.z.object({code:n.z.number().nullable(),message:n.z.string(),status:n.z.string()})}))),a=(0,t.createJsonErrorResponseHandler)({errorSchema:i,errorToMessage:e=>e.error.message}),l=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({outputDimensionality:n.z.number().optional(),taskType:n.z.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),r=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:n,abortSignal:i,providerOptions:r}){let d=await (0,t.parseProviderOptions)({provider:"google",providerOptions:r,schema:l});if(e.length>this.maxEmbeddingsPerCall)throw new o.TooManyEmbeddingValuesForCallError({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let c=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),n);if(1===e.length){let{responseHeaders:o,value:n,rawValue:l}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:c,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:null==d?void 0:d.outputDimensionality,taskType:null==d?void 0:d.taskType},failedResponseHandler:a,successfulResponseHandler:(0,t.createJsonResponseHandler)(u),abortSignal:i,fetch:this.config.fetch});return{embeddings:[n.embedding.values],usage:void 0,response:{headers:o,body:l}}}let{responseHeaders:g,value:h,rawValue:p}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:c,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:null==d?void 0:d.outputDimensionality,taskType:null==d?void 0:d.taskType}))},failedResponseHandler:a,successfulResponseHandler:(0,t.createJsonResponseHandler)(s),abortSignal:i,fetch:this.config.fetch});return{embeddings:h.embeddings.map(e=>e.values),usage:void 0,response:{headers:g,body:p}}}},s=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({embeddings:n.z.array(n.z.object({values:n.z.array(n.z.number())}))}))),u=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({embedding:n.z.object({values:n.z.array(n.z.number())})})));function d(e){var t;if(null==e||null!=(t=e)&&"object"==typeof t&&"object"===t.type&&(null==t.properties||0===Object.keys(t.properties).length)&&!t.additionalProperties)return;if("boolean"==typeof e)return{type:"boolean",properties:{}};let{type:o,description:n,required:i,properties:a,items:l,allOf:r,anyOf:s,oneOf:u,format:c,const:g,minLength:h,enum:p}=e,m={};if(n&&(m.description=n),i&&(m.required=i),c&&(m.format=c),void 0!==g&&(m.enum=[g]),o&&(Array.isArray(o)?o.includes("null")?(m.type=o.filter(e=>"null"!==e)[0],m.nullable=!0):m.type=o:"null"===o?m.type="null":m.type=o),void 0!==p&&(m.enum=p),null!=a&&(m.properties=Object.entries(a).reduce((e,[t,o])=>(e[t]=d(o),e),{})),l&&(m.items=Array.isArray(l)?l.map(d):d(l)),r&&(m.allOf=r.map(d)),s)if(s.some(e=>"object"==typeof e&&(null==e?void 0:e.type)==="null")){let e=s.filter(e=>"object"!=typeof e||(null==e?void 0:e.type)!=="null");if(1===e.length){let t=d(e[0]);"object"==typeof t&&(m.nullable=!0,Object.assign(m,t))}else m.anyOf=e.map(d),m.nullable=!0}else m.anyOf=s.map(d);return u&&(m.oneOf=u.map(d)),void 0!==h&&(m.minLength=h),m}function c(e){return e.includes("/")?e:`models/${e}`}var g=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({responseModalities:n.z.array(n.z.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:n.z.object({thinkingBudget:n.z.number().optional(),includeThoughts:n.z.boolean().optional()}).optional(),cachedContent:n.z.string().optional(),structuredOutputs:n.z.boolean().optional(),safetySettings:n.z.array(n.z.object({category:n.z.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:n.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:n.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:n.z.boolean().optional(),labels:n.z.record(n.z.string(),n.z.string()).optional(),mediaResolution:n.z.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:n.z.object({aspectRatio:n.z.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional()}).optional()})));function h({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var p=class{constructor(e,o){var n;this.specificationVersion="v2",this.modelId=e,this.config=o,this.generateId=null!=(n=o.generateId)?n:t.generateId}get provider(){return this.config.provider}get supportedUrls(){var e,t,o;return null!=(o=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?o:{}}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:a,topK:l,frequencyPenalty:r,presencePenalty:s,stopSequences:u,responseFormat:c,seed:h,tools:p,toolChoice:m,providerOptions:f}){var v,y;let b=[],z=await (0,t.parseProviderOptions)({provider:"google",providerOptions:f,schema:g});(null==(v=null==z?void 0:z.thinkingConfig)?void 0:v.includeThoughts)!==!0||this.config.provider.startsWith("google.vertex.")||b.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let C=this.modelId.toLowerCase().startsWith("gemma-"),{contents:T,systemInstruction:S}=function(e,n){var i;let a=[],l=[],r=!0,s=null!=(i=null==n?void 0:n.isGemmaModel)&&i;for(let{role:n,content:i}of e)switch(n){case"system":if(!r)throw new o.UnsupportedFunctionalityError({functionality:"system messages are only supported at the beginning of the conversation"});a.push({text:i});break;case"user":{r=!1;let e=[];for(let o of i)switch(o.type){case"text":e.push({text:o.text});break;case"file":{let n="image/*"===o.mediaType?"image/jpeg":o.mediaType;e.push(o.data instanceof URL?{fileData:{mimeType:n,fileUri:o.data.toString()}}:{inlineData:{mimeType:n,data:(0,t.convertToBase64)(o.data)}})}}l.push({role:"user",parts:e});break}case"assistant":r=!1,l.push({role:"model",parts:i.map(e=>{var n,i,a,l,r,s;switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text,thoughtSignature:null==(i=null==(n=e.providerOptions)?void 0:n.google)?void 0:i.thoughtSignature};case"reasoning":return 0===e.text.length?void 0:{text:e.text,thought:!0,thoughtSignature:null==(l=null==(a=e.providerOptions)?void 0:a.google)?void 0:l.thoughtSignature};case"file":if("image/png"!==e.mediaType)throw new o.UnsupportedFunctionalityError({functionality:"Only PNG images are supported in assistant messages"});if(e.data instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:e.mediaType,data:(0,t.convertToBase64)(e.data)}};case"tool-call":return{functionCall:{name:e.toolName,args:e.input},thoughtSignature:null==(s=null==(r=e.providerOptions)?void 0:r.google)?void 0:s.thoughtSignature}}}).filter(e=>void 0!==e)});break;case"tool":{r=!1;let e=[];for(let t of i){let o=t.output;if("content"===o.type)for(let n of o.value)switch(n.type){case"text":e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:n.text}}});break;case"media":e.push({inlineData:{mimeType:n.mediaType,data:n.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:e.push({text:JSON.stringify(n)})}else e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:o.value}}})}l.push({role:"user",parts:e})}}if(s&&a.length>0&&l.length>0&&"user"===l[0].role){let e=a.map(e=>e.text).join("\n\n");l[0].parts.unshift({text:e+"\n\n"})}return{systemInstruction:a.length>0&&!s?{parts:a}:void 0,contents:l}}(e,{isGemmaModel:C}),{tools:E,toolConfig:I,toolWarnings:R}=function({tools:e,toolChoice:t,modelId:n}){var i;e=(null==e?void 0:e.length)?e:void 0;let a=[],l=n.includes("gemini-2"),r=n.includes("gemini-1.5-flash")&&!n.includes("-8b"),s=n.includes("gemini-2.5");if(null==e)return{tools:void 0,toolConfig:void 0,toolWarnings:a};let u=e.some(e=>"function"===e.type),c=e.some(e=>"provider-defined"===e.type);if(u&&c&&a.push({type:"unsupported-tool",tool:e.find(e=>"function"===e.type),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."}),c){let t=[];return e.filter(e=>"provider-defined"===e.type).forEach(e=>{switch(e.id){case"google.google_search":l?t.push({googleSearch:{}}):r?t.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:e.args.mode,dynamicThreshold:e.args.dynamicThreshold}}}):t.push({googleSearchRetrieval:{}});break;case"google.url_context":l?t.push({urlContext:{}}):a.push({type:"unsupported-tool",tool:e,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":l?t.push({codeExecution:{}}):a.push({type:"unsupported-tool",tool:e,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":s?t.push({fileSearch:{...e.args}}):a.push({type:"unsupported-tool",tool:e,details:"The file search tool is only supported with Gemini 2.5 models."});break;default:a.push({type:"unsupported-tool",tool:e})}}),{tools:t.length>0?t:void 0,toolConfig:void 0,toolWarnings:a}}let g=[];for(let t of e)"function"===t.type?g.push({name:t.name,description:null!=(i=t.description)?i:"",parameters:d(t.inputSchema)}):a.push({type:"unsupported-tool",tool:t});if(null==t)return{tools:{functionDeclarations:g},toolConfig:void 0,toolWarnings:a};let h=t.type;switch(h){case"auto":return{tools:{functionDeclarations:g},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:a};case"none":return{tools:{functionDeclarations:g},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:a};case"required":return{tools:{functionDeclarations:g},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:a};case"tool":return{tools:{functionDeclarations:g},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:a};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${h}`})}}({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:n,temperature:i,topK:l,topP:a,frequencyPenalty:r,presencePenalty:s,stopSequences:u,seed:h,responseMimeType:(null==c?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(null==c?void 0:c.type)==="json"&&null!=c.schema&&(null==(y=null==z?void 0:z.structuredOutputs)||y)?d(c.schema):void 0,...(null==z?void 0:z.audioTimestamp)&&{audioTimestamp:z.audioTimestamp},responseModalities:null==z?void 0:z.responseModalities,thinkingConfig:null==z?void 0:z.thinkingConfig,...(null==z?void 0:z.imageConfig)&&{imageConfig:z.imageConfig},...(null==z?void 0:z.mediaResolution)&&{mediaResolution:z.mediaResolution}},contents:T,systemInstruction:C?void 0:S,safetySettings:null==z?void 0:z.safetySettings,tools:E,toolConfig:I,cachedContent:null==z?void 0:z.cachedContent,labels:null==z?void 0:z.labels},warnings:[...b,...R]}}async doGenerate(e){var o,n,i,l,r,s,u,d,g,p,f,v,y;let b,{args:z,warnings:T}=await this.getArgs(e),S=JSON.stringify(z),E=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),e.headers),{responseHeaders:I,value:R,rawValue:x}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:generateContent`,headers:E,body:z,failedResponseHandler:a,successfulResponseHandler:(0,t.createJsonResponseHandler)(C),abortSignal:e.abortSignal,fetch:this.config.fetch}),_=R.candidates[0],O=[],M=null!=(n=null==(o=_.content)?void 0:o.parts)?n:[],w=R.usageMetadata;for(let e of M)if("executableCode"in e&&(null==(i=e.executableCode)?void 0:i.code)){let t=this.config.generateId();b=t,O.push({type:"tool-call",toolCallId:t,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0})}else"codeExecutionResult"in e&&e.codeExecutionResult?(O.push({type:"tool-result",toolCallId:b,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output},providerExecuted:!0}),b=void 0):"text"in e&&null!=e.text&&e.text.length>0?O.push({type:!0===e.thought?"reasoning":"text",text:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}):"functionCall"in e?O.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:e.functionCall.name,input:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}):"inlineData"in e&&O.push({type:"file",data:e.inlineData.data,mediaType:e.inlineData.mimeType});for(let e of null!=(l=m({groundingMetadata:_.groundingMetadata,generateId:this.config.generateId}))?l:[])O.push(e);return{content:O,finishReason:h({finishReason:_.finishReason,hasToolCalls:O.some(e=>"tool-call"===e.type)}),usage:{inputTokens:null!=(r=null==w?void 0:w.promptTokenCount)?r:void 0,outputTokens:null!=(s=null==w?void 0:w.candidatesTokenCount)?s:void 0,totalTokens:null!=(u=null==w?void 0:w.totalTokenCount)?u:void 0,reasoningTokens:null!=(d=null==w?void 0:w.thoughtsTokenCount)?d:void 0,cachedInputTokens:null!=(g=null==w?void 0:w.cachedContentTokenCount)?g:void 0},warnings:T,providerMetadata:{google:{promptFeedback:null!=(p=R.promptFeedback)?p:null,groundingMetadata:null!=(f=_.groundingMetadata)?f:null,urlContextMetadata:null!=(v=_.urlContextMetadata)?v:null,safetyRatings:null!=(y=_.safetyRatings)?y:null,usageMetadata:null!=w?w:null}},request:{body:S},response:{headers:I,body:x}}}async doStream(e){let o,n,{args:i,warnings:l}=await this.getArgs(e),r=JSON.stringify(i),s=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),e.headers),{responseHeaders:u,value:d}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:i,failedResponseHandler:a,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(T),abortSignal:e.abortSignal,fetch:this.config.fetch}),g="unknown",p={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},f=this.config.generateId,v=!1,y=null,b=null,z=0,C=new Set;return{stream:d.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:l})},transform(t,i){var a,l,r,s,u,d,c,T,S,E,I,R,x;if(e.includeRawChunks&&i.enqueue({type:"raw",rawValue:t.rawValue}),!t.success)return void i.enqueue({type:"error",error:t.error});let _=t.value,O=_.usageMetadata;null!=O&&(p.inputTokens=null!=(a=O.promptTokenCount)?a:void 0,p.outputTokens=null!=(l=O.candidatesTokenCount)?l:void 0,p.totalTokens=null!=(r=O.totalTokenCount)?r:void 0,p.reasoningTokens=null!=(s=O.thoughtsTokenCount)?s:void 0,p.cachedInputTokens=null!=(u=O.cachedContentTokenCount)?u:void 0);let M=null==(d=_.candidates)?void 0:d[0];if(null==M)return;let w=M.content,A=m({groundingMetadata:M.groundingMetadata,generateId:f});if(null!=A)for(let e of A)"url"!==e.sourceType||C.has(e.url)||(C.add(e.url),i.enqueue(e));if(null!=w){for(let e of null!=(c=w.parts)?c:[])if("executableCode"in e&&(null==(T=e.executableCode)?void 0:T.code)){let t=f();o=t,i.enqueue({type:"tool-call",toolCallId:t,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0}),v=!0}else if("codeExecutionResult"in e&&e.codeExecutionResult){let t=o;t&&(i.enqueue({type:"tool-result",toolCallId:t,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output},providerExecuted:!0}),o=void 0)}else"text"in e&&null!=e.text&&e.text.length>0&&(!0===e.thought?(null!==y&&(i.enqueue({type:"text-end",id:y}),y=null),null===b&&(b=String(z++),i.enqueue({type:"reasoning-start",id:b,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})),i.enqueue({type:"reasoning-delta",id:b,delta:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})):(null!==b&&(i.enqueue({type:"reasoning-end",id:b}),b=null),null===y&&(y=String(z++),i.enqueue({type:"text-start",id:y,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})),i.enqueue({type:"text-delta",id:y,delta:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})));let e=null==(x=w.parts)?void 0:x.filter(e=>"inlineData"in e);if(null!=e)for(let t of e)i.enqueue({type:"file",mediaType:t.inlineData.mimeType,data:t.inlineData.data});let t=function({parts:e,generateId:t}){let o=null==e?void 0:e.filter(e=>"functionCall"in e);return null==o||0===o.length?void 0:o.map(e=>({type:"tool-call",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}))}({parts:w.parts,generateId:f});if(null!=t)for(let e of t)i.enqueue({type:"tool-input-start",id:e.toolCallId,toolName:e.toolName,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e.args,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-input-end",id:e.toolCallId,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.args,providerMetadata:e.providerMetadata}),v=!0}null!=M.finishReason&&(g=h({finishReason:M.finishReason,hasToolCalls:v}),n={google:{promptFeedback:null!=(S=_.promptFeedback)?S:null,groundingMetadata:null!=(E=M.groundingMetadata)?E:null,urlContextMetadata:null!=(I=M.urlContextMetadata)?I:null,safetyRatings:null!=(R=M.safetyRatings)?R:null}},null!=O&&(n.google.usageMetadata=O))},flush(e){null!==y&&e.enqueue({type:"text-end",id:y}),null!==b&&e.enqueue({type:"reasoning-end",id:b}),e.enqueue({type:"finish",finishReason:g,usage:p,providerMetadata:n})}})),response:{headers:u},request:{body:r}}}};function m({groundingMetadata:e,generateId:t}){var o;return null==(o=null==e?void 0:e.groundingChunks)?void 0:o.filter(e=>null!=e.web).map(e=>({type:"source",sourceType:"url",id:t(),url:e.web.uri,title:e.web.title}))}var f=()=>n.z.object({webSearchQueries:n.z.array(n.z.string()).nullish(),retrievalQueries:n.z.array(n.z.string()).nullish(),searchEntryPoint:n.z.object({renderedContent:n.z.string()}).nullish(),groundingChunks:n.z.array(n.z.object({web:n.z.object({uri:n.z.string(),title:n.z.string().nullish()}).nullish(),retrievedContext:n.z.union([n.z.object({uri:n.z.string(),title:n.z.string().nullish()}).nullish(),n.z.object({title:n.z.string().nullish(),text:n.z.string().nullish()})])})).nullish(),groundingSupports:n.z.array(n.z.object({segment:n.z.object({startIndex:n.z.number().nullish(),endIndex:n.z.number().nullish(),text:n.z.string().nullish()}),segment_text:n.z.string().nullish(),groundingChunkIndices:n.z.array(n.z.number()).nullish(),supportChunkIndices:n.z.array(n.z.number()).nullish(),confidenceScores:n.z.array(n.z.number()).nullish(),confidenceScore:n.z.array(n.z.number()).nullish()})).nullish(),retrievalMetadata:n.z.union([n.z.object({webDynamicRetrievalScore:n.z.number()}),n.z.object({})]).nullish()}),v=()=>n.z.object({parts:n.z.array(n.z.union([n.z.object({functionCall:n.z.object({name:n.z.string(),args:n.z.unknown()}),thoughtSignature:n.z.string().nullish()}),n.z.object({inlineData:n.z.object({mimeType:n.z.string(),data:n.z.string()})}),n.z.object({executableCode:n.z.object({language:n.z.string(),code:n.z.string()}).nullish(),codeExecutionResult:n.z.object({outcome:n.z.string(),output:n.z.string()}).nullish(),text:n.z.string().nullish(),thought:n.z.boolean().nullish(),thoughtSignature:n.z.string().nullish()})])).nullish()}),y=()=>n.z.object({category:n.z.string().nullish(),probability:n.z.string().nullish(),probabilityScore:n.z.number().nullish(),severity:n.z.string().nullish(),severityScore:n.z.number().nullish(),blocked:n.z.boolean().nullish()}),b=n.z.object({cachedContentTokenCount:n.z.number().nullish(),thoughtsTokenCount:n.z.number().nullish(),promptTokenCount:n.z.number().nullish(),candidatesTokenCount:n.z.number().nullish(),totalTokenCount:n.z.number().nullish()}),z=()=>n.z.object({urlMetadata:n.z.array(n.z.object({retrievedUrl:n.z.string(),urlRetrievalStatus:n.z.string()}))}),C=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({candidates:n.z.array(n.z.object({content:v().nullish().or(n.z.object({}).strict()),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(y()).nullish(),groundingMetadata:f().nullish(),urlContextMetadata:z().nullish()})),usageMetadata:b.nullish(),promptFeedback:n.z.object({blockReason:n.z.string().nullish(),safetyRatings:n.z.array(y()).nullish()}).nullish()}))),T=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({candidates:n.z.array(n.z.object({content:v().nullish(),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(y()).nullish(),groundingMetadata:f().nullish(),urlContextMetadata:z().nullish()})).nullish(),usageMetadata:b.nullish(),promptFeedback:n.z.object({blockReason:n.z.string().nullish(),safetyRatings:n.z.array(y()).nullish()}).nullish()}))),S=(0,t.createProviderDefinedToolFactoryWithOutputSchema)({id:"google.code_execution",name:"code_execution",inputSchema:n.z.object({language:n.z.string().describe("The programming language of the code."),code:n.z.string().describe("The code to be executed.")}),outputSchema:n.z.object({outcome:n.z.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:n.z.string().describe("The output from the code execution.")})}),E=n.z.object({fileSearchStoreNames:n.z.array(n.z.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:n.z.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:n.z.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),I=(0,t.lazySchema)(()=>(0,t.zodSchema)(E)),R=(0,t.createProviderDefinedToolFactory)({id:"google.file_search",name:"file_search",inputSchema:I}),x={googleSearch:(0,t.createProviderDefinedToolFactory)({id:"google.google_search",name:"google_search",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({mode:n.z.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:n.z.number().default(1)})))}),urlContext:(0,t.createProviderDefinedToolFactory)({id:"google.url_context",name:"url_context",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({})))}),fileSearch:R,codeExecution:S},_=class{constructor(e,t,o){this.modelId=e,this.settings=t,this.config=o,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return null!=(e=this.settings.maxImagesPerCall)?e:4}get provider(){return this.config.provider}async doGenerate(e){var o,n,i;let{prompt:l,n:r=1,size:s="1024x1024",aspectRatio:u="1:1",seed:d,providerOptions:c,headers:g,abortSignal:h}=e,p=[];null!=s&&p.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),null!=d&&p.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let m=await (0,t.parseProviderOptions)({provider:"google",providerOptions:c,schema:M}),f=null!=(i=null==(n=null==(o=this.config._internal)?void 0:o.currentDate)?void 0:n.call(o))?i:new Date,v={sampleCount:r};null!=u&&(v.aspectRatio=u),m&&Object.assign(v,m);let{responseHeaders:y,value:b}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),g),body:{instances:[{prompt:l}],parameters:v},failedResponseHandler:a,successfulResponseHandler:(0,t.createJsonResponseHandler)(O),abortSignal:h,fetch:this.config.fetch});return{images:b.predictions.map(e=>e.bytesBase64Encoded),warnings:null!=p?p:[],providerMetadata:{google:{images:b.predictions.map(e=>({}))}},response:{timestamp:f,modelId:this.modelId,headers:y}}}},O=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({predictions:n.z.array(n.z.object({bytesBase64Encoded:n.z.string()})).default([])}))),M=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({personGeneration:n.z.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:n.z.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function w(e={}){var o,n;let i=null!=(o=(0,t.withoutTrailingSlash)(e.baseURL))?o:"https://generativelanguage.googleapis.com/v1beta",a=null!=(n=e.name)?n:"google.generative-ai",l=()=>(0,t.withUserAgentSuffix)({"x-goog-api-key":(0,t.loadApiKey)({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},"ai-sdk/google/2.0.31"),s=o=>{var n;return new p(o,{provider:a,baseURL:i,headers:l,generateId:null!=(n=e.generateId)?n:t.generateId,supportedUrls:()=>({"*":[RegExp(`^${i}/files/.*$`),RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},u=t=>new r(t,{provider:a,baseURL:i,headers:l,fetch:e.fetch}),d=(t,o={})=>new _(t,o,{provider:a,baseURL:i,headers:l,fetch:e.fetch}),c=function(e){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return s(e)};return c.languageModel=s,c.chat=s,c.generativeAI=s,c.embedding=u,c.textEmbedding=u,c.textEmbeddingModel=u,c.image=d,c.imageModel=d,c.tools=x,c}var A=w();e.s(["createGoogleGenerativeAI",()=>w,"google",()=>A])}];

//# sourceMappingURL=84d3e_%40ai-sdk_google_dist_index_mjs_98380650._.js.map