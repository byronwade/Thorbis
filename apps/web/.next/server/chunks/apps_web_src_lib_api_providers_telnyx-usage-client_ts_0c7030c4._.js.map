{"version":3,"sources":["../../../../../apps/web/src/lib/api/providers/telnyx-usage-client.ts","../../../../../apps/web/src/lib/api/providers/supabase-usage-client.ts","../../../../../apps/web/src/lib/api/providers/google-cloud-client.ts","../../../../../apps/web/src/lib/api/providers/stripe-billing-client.ts","../../../../../apps/web/src/lib/api/api-service-config.ts"],"sourcesContent":["/**\n * Telnyx Usage Reports API Client\n *\n * Fetches real voice and SMS usage data from Telnyx\n * Docs: https://developers.telnyx.com/docs/reporting/usage-reports\n */\n\nexport interface TelnyxVoiceUsage {\n\ttotal_minutes: number;\n\tinbound_minutes: number;\n\toutbound_minutes: number;\n\ttotal_calls: number;\n\ttotal_cost_cents: number;\n}\n\nexport interface TelnyxSmsUsage {\n\ttotal_messages: number;\n\toutbound_messages: number;\n\tinbound_messages: number;\n\ttotal_cost_cents: number;\n}\n\ninterface CdrUsageReportResponse {\n\tdata: {\n\t\taggregations: {\n\t\t\ttotal_cost: number;\n\t\t\ttotal_duration: number;\n\t\t\trecord_count: number;\n\t\t};\n\t\trecords?: Array<{\n\t\t\tdirection: string;\n\t\t\tduration: number;\n\t\t\tcost: number;\n\t\t}>;\n\t};\n}\n\ninterface MessagingReportResponse {\n\tdata: Array<{\n\t\tdirection: \"outbound\" | \"inbound\";\n\t\tparts: number;\n\t\tcost: {\n\t\t\tamount: string;\n\t\t\tcurrency: string;\n\t\t};\n\t}>;\n\tmeta: {\n\t\ttotal_results: number;\n\t};\n}\n\n/**\n * Telnyx Usage Client\n * Requires TELNYX_API_KEY environment variable\n */\nexport class TelnyxUsageClient {\n\tprivate baseUrl = \"https://api.telnyx.com/v2\";\n\tprivate apiKey: string;\n\n\tconstructor() {\n\t\tconst apiKey = process.env.TELNYX_API_KEY;\n\n\t\tif (!apiKey) {\n\t\t\tconsole.warn(\"TELNYX_API_KEY not set - Telnyx usage tracking disabled\");\n\t\t}\n\n\t\tthis.apiKey = apiKey || \"\";\n\t}\n\n\tprivate async fetch<T>(endpoint: string, params?: Record<string, string>): Promise<T | null> {\n\t\tif (!this.apiKey) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = new URL(`${this.baseUrl}${endpoint}`);\n\t\tif (params) {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\turl.searchParams.append(key, value);\n\t\t\t});\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url.toString(), {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.apiKey}`,\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconsole.error(`Telnyx API error: ${response.status} ${response.statusText}`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (await response.json()) as T;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Telnyx API fetch error:\", error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get the current month's date range\n\t */\n\tprivate getCurrentMonthRange(): { startDate: string; endDate: string } {\n\t\tconst now = new Date();\n\t\tconst startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\t\tconst endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59);\n\n\t\treturn {\n\t\t\tstartDate: startOfMonth.toISOString(),\n\t\t\tendDate: endOfMonth.toISOString(),\n\t\t};\n\t}\n\n\t/**\n\t * Get voice CDR usage report\n\t * Synchronous endpoint - may take up to a couple minutes\n\t */\n\tasync getVoiceUsage(startDate?: string, endDate?: string): Promise<TelnyxVoiceUsage | null> {\n\t\tconst dateRange = startDate && endDate ? { startDate, endDate } : this.getCurrentMonthRange();\n\n\t\tconst response = await this.fetch<CdrUsageReportResponse>(\"/reports/cdr_usage_reports/sync\", {\n\t\t\tstart_date: dateRange.startDate,\n\t\t\tend_date: dateRange.endDate,\n\t\t});\n\n\t\tif (!response?.data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { aggregations, records } = response.data;\n\n\t\t// Calculate inbound vs outbound from records if available\n\t\tlet inboundMinutes = 0;\n\t\tlet outboundMinutes = 0;\n\n\t\tif (records) {\n\t\t\tfor (const record of records) {\n\t\t\t\tconst minutes = record.duration / 60; // Convert seconds to minutes\n\t\t\t\tif (record.direction === \"inbound\") {\n\t\t\t\t\tinboundMinutes += minutes;\n\t\t\t\t} else {\n\t\t\t\t\toutboundMinutes += minutes;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttotal_minutes: aggregations.total_duration / 60, // Convert seconds to minutes\n\t\t\tinbound_minutes: inboundMinutes,\n\t\t\toutbound_minutes: outboundMinutes,\n\t\t\ttotal_calls: aggregations.record_count,\n\t\t\ttotal_cost_cents: Math.round(aggregations.total_cost * 100), // Convert to cents\n\t\t};\n\t}\n\n\t/**\n\t * Get SMS/MMS messaging usage\n\t * Note: API can only retrieve messages from the last 10 days\n\t * For older messages, use MDR reports\n\t */\n\tasync getSmsUsage(startDate?: string, endDate?: string): Promise<TelnyxSmsUsage | null> {\n\t\t// For current month, we may need to use MDR reports for full data\n\t\t// The messages endpoint is limited to 10 days\n\t\tconst now = new Date();\n\t\tconst tenDaysAgo = new Date(now.getTime() - 10 * 24 * 60 * 60 * 1000);\n\n\t\tconst response = await this.fetch<MessagingReportResponse>(\"/messages\", {\n\t\t\t\"page[size]\": \"250\",\n\t\t\t\"filter[created_at][gte]\": tenDaysAgo.toISOString(),\n\t\t\t\"filter[created_at][lte]\": now.toISOString(),\n\t\t});\n\n\t\tif (!response?.data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet outboundMessages = 0;\n\t\tlet inboundMessages = 0;\n\t\tlet totalCostCents = 0;\n\n\t\tfor (const message of response.data) {\n\t\t\tif (message.direction === \"outbound\") {\n\t\t\t\toutboundMessages += message.parts;\n\t\t\t} else {\n\t\t\t\tinboundMessages += message.parts;\n\t\t\t}\n\t\t\ttotalCostCents += Math.round(parseFloat(message.cost.amount) * 100);\n\t\t}\n\n\t\treturn {\n\t\t\ttotal_messages: outboundMessages + inboundMessages,\n\t\t\toutbound_messages: outboundMessages,\n\t\t\tinbound_messages: inboundMessages,\n\t\t\ttotal_cost_cents: totalCostCents,\n\t\t};\n\t}\n\n\t/**\n\t * Get combined voice and SMS usage for current month\n\t */\n\tasync getCurrentMonthUsage(): Promise<{\n\t\tvoice: TelnyxVoiceUsage | null;\n\t\tsms: TelnyxSmsUsage | null;\n\t\ttotal_cost_cents: number;\n\t}> {\n\t\tconst [voice, sms] = await Promise.all([this.getVoiceUsage(), this.getSmsUsage()]);\n\n\t\treturn {\n\t\t\tvoice,\n\t\t\tsms,\n\t\t\ttotal_cost_cents: (voice?.total_cost_cents || 0) + (sms?.total_cost_cents || 0),\n\t\t};\n\t}\n\n\t/**\n\t * Check if the Telnyx API is healthy\n\t */\n\tasync checkHealth(): Promise<{ healthy: boolean; responseTimeMs: number; error?: string }> {\n\t\tconst startTime = Date.now();\n\n\t\ttry {\n\t\t\tconst response = await fetch(`${this.baseUrl}/connections`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.apiKey}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst responseTimeMs = Date.now() - startTime;\n\n\t\t\tif (response.ok) {\n\t\t\t\treturn { healthy: true, responseTimeMs };\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs,\n\t\t\t\terror: `HTTP ${response.status}: ${response.statusText}`,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs: Date.now() - startTime,\n\t\t\t\terror: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t};\n\t\t}\n\t}\n}\n\n// Export singleton instance\nexport const telnyxUsageClient = new TelnyxUsageClient();\n","/**\n * Supabase Management API Usage Client\n *\n * Fetches real usage data from Supabase Management API\n * Docs: https://supabase.com/docs/reference/api/introduction\n */\n\nexport interface SupabaseUsageStats {\n\ttotal_auth_requests: number;\n\ttotal_realtime_requests: number;\n\ttotal_rest_requests: number;\n\ttotal_storage_requests: number;\n\ttimestamp: string;\n}\n\nexport interface SupabaseProjectStats {\n\tdatabase_size_bytes: number;\n\tstorage_size_bytes: number;\n\tegress_bytes: number;\n\tmau: number;\n\tedge_function_invocations: number;\n}\n\ninterface ApiCountsResponse {\n\tdata: Array<{\n\t\ttotal_auth_requests: number;\n\t\ttotal_realtime_requests: number;\n\t\ttotal_rest_requests: number;\n\t\ttotal_storage_requests: number;\n\t\ttimestamp: string;\n\t}>;\n}\n\n/**\n * Supabase Usage Client\n * Requires SUPABASE_MANAGEMENT_PAT environment variable\n */\nexport class SupabaseUsageClient {\n\tprivate baseUrl = \"https://api.supabase.com/v1\";\n\tprivate accessToken: string;\n\tprivate projectRef: string;\n\n\tconstructor() {\n\t\tconst token = process.env.SUPABASE_MANAGEMENT_PAT;\n\t\tconst projectRef = process.env.NEXT_PUBLIC_SUPABASE_URL?.match(/https:\\/\\/([^.]+)\\.supabase\\.co/)?.[1];\n\n\t\tif (!token) {\n\t\t\tconsole.warn(\"SUPABASE_MANAGEMENT_PAT not set - Supabase usage tracking disabled\");\n\t\t}\n\n\t\tthis.accessToken = token || \"\";\n\t\tthis.projectRef = projectRef || \"\";\n\t}\n\n\tprivate async fetch<T>(endpoint: string, params?: Record<string, string>): Promise<T | null> {\n\t\tif (!this.accessToken || !this.projectRef) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = new URL(`${this.baseUrl}${endpoint}`);\n\t\tif (params) {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\turl.searchParams.append(key, value);\n\t\t\t});\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url.toString(), {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.accessToken}`,\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconsole.error(`Supabase API error: ${response.status} ${response.statusText}`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (await response.json()) as T;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Supabase API fetch error:\", error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get API request counts for the project\n\t * Returns auth, realtime, rest, and storage request counts\n\t */\n\tasync getApiCounts(interval: \"hourly\" | \"daily\" = \"daily\"): Promise<SupabaseUsageStats[] | null> {\n\t\tconst response = await this.fetch<ApiCountsResponse>(`/projects/${this.projectRef}/analytics/endpoints/usage.api-counts`, {\n\t\t\tinterval,\n\t\t});\n\n\t\treturn response?.data || null;\n\t}\n\n\t/**\n\t * Get total API request count for the project\n\t */\n\tasync getTotalApiRequestCount(): Promise<number | null> {\n\t\tconst response = await this.fetch<{ count: number }>(`/projects/${this.projectRef}/analytics/endpoints/usage.api-requests-count`);\n\n\t\treturn response?.count || null;\n\t}\n\n\t/**\n\t * Get project database size\n\t */\n\tasync getDatabaseSize(): Promise<number | null> {\n\t\t// This would require querying the database directly\n\t\t// The Management API doesn't expose database size directly\n\t\t// We can get this from pg_database_size() if needed\n\t\treturn null;\n\t}\n\n\t/**\n\t * Get aggregated usage for the current billing period\n\t */\n\tasync getCurrentPeriodUsage(): Promise<{\n\t\tauth_requests: number;\n\t\trest_requests: number;\n\t\trealtime_requests: number;\n\t\tstorage_requests: number;\n\t\ttotal_requests: number;\n\t} | null> {\n\t\tconst stats = await this.getApiCounts(\"daily\");\n\t\tif (!stats || stats.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Aggregate all stats for the current period\n\t\tconst aggregated = stats.reduce(\n\t\t\t(acc, stat) => ({\n\t\t\t\tauth_requests: acc.auth_requests + stat.total_auth_requests,\n\t\t\t\trest_requests: acc.rest_requests + stat.total_rest_requests,\n\t\t\t\trealtime_requests: acc.realtime_requests + stat.total_realtime_requests,\n\t\t\t\tstorage_requests: acc.storage_requests + stat.total_storage_requests,\n\t\t\t\ttotal_requests: acc.total_requests + stat.total_auth_requests + stat.total_rest_requests + stat.total_realtime_requests + stat.total_storage_requests,\n\t\t\t}),\n\t\t\t{\n\t\t\t\tauth_requests: 0,\n\t\t\t\trest_requests: 0,\n\t\t\t\trealtime_requests: 0,\n\t\t\t\tstorage_requests: 0,\n\t\t\t\ttotal_requests: 0,\n\t\t\t}\n\t\t);\n\n\t\treturn aggregated;\n\t}\n\n\t/**\n\t * Check if the Supabase API is healthy\n\t */\n\tasync checkHealth(): Promise<{ healthy: boolean; responseTimeMs: number; error?: string }> {\n\t\tconst startTime = Date.now();\n\n\t\ttry {\n\t\t\tconst response = await fetch(`${this.baseUrl}/projects`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.accessToken}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst responseTimeMs = Date.now() - startTime;\n\n\t\t\tif (response.ok) {\n\t\t\t\treturn { healthy: true, responseTimeMs };\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs,\n\t\t\t\terror: `HTTP ${response.status}: ${response.statusText}`,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs: Date.now() - startTime,\n\t\t\t\terror: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t};\n\t\t}\n\t}\n}\n\n// Export singleton instance\nexport const supabaseUsageClient = new SupabaseUsageClient();\n","/**\n * Google Cloud Usage & Billing Client\n *\n * Fetches usage data from Google Cloud APIs\n * - Cloud Billing API for cost data\n * - Service Usage API for API call counts\n *\n * Docs:\n * - https://cloud.google.com/billing/docs/reference/rest\n * - https://cloud.google.com/service-usage/docs/reference/rest\n */\n\nexport interface GoogleCloudUsage {\n\tservice_name: string;\n\tdisplay_name: string;\n\tusage_amount: number;\n\tusage_unit: string;\n\tcost_usd: number;\n\tmonth: string;\n}\n\nexport interface GoogleAIUsage {\n\tgemini_requests: number;\n\tgemini_tokens_input: number;\n\tgemini_tokens_output: number;\n\tdocument_ai_pages: number;\n\tvision_requests: number;\n\tspeech_minutes: number;\n\ttranslation_characters: number;\n\ttotal_cost_cents: number;\n}\n\ninterface ServiceUsageResponse {\n\tservices: Array<{\n\t\tname: string;\n\t\tconfig: {\n\t\t\tname: string;\n\t\t\ttitle: string;\n\t\t};\n\t}>;\n}\n\ninterface BillingReportResponse {\n\trows?: Array<{\n\t\tservice: { id: string; description: string };\n\t\tsku: { id: string; description: string };\n\t\tusage: { amount: string; unit: string };\n\t\tcost: { amount: string; currency: string };\n\t}>;\n}\n\n/**\n * Google Cloud Client\n *\n * Required environment variables:\n * - GOOGLE_CLOUD_PROJECT_ID\n * - GOOGLE_CLOUD_BILLING_ACCOUNT_ID\n * - GOOGLE_CLOUD_API_KEY or GOOGLE_APPLICATION_CREDENTIALS\n */\nexport class GoogleCloudClient {\n\tprivate projectId: string;\n\tprivate billingAccountId: string;\n\tprivate accessToken: string;\n\n\tconstructor() {\n\t\tthis.projectId = process.env.GOOGLE_CLOUD_PROJECT_ID || \"\";\n\t\tthis.billingAccountId = process.env.GOOGLE_CLOUD_BILLING_ACCOUNT_ID || \"\";\n\t\tthis.accessToken = process.env.GOOGLE_CLOUD_ACCESS_TOKEN || \"\";\n\n\t\tif (!this.projectId) {\n\t\t\tconsole.warn(\"GOOGLE_CLOUD_PROJECT_ID not set - Google Cloud tracking disabled\");\n\t\t}\n\t}\n\n\tprivate async fetch<T>(url: string): Promise<T | null> {\n\t\tif (!this.accessToken) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.accessToken}`,\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconsole.error(`Google Cloud API error: ${response.status} ${response.statusText}`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (await response.json()) as T;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Google Cloud API fetch error:\", error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get enabled services for the project\n\t */\n\tasync getEnabledServices(): Promise<string[] | null> {\n\t\tconst response = await this.fetch<ServiceUsageResponse>(`https://serviceusage.googleapis.com/v1/projects/${this.projectId}/services?filter=state:ENABLED`);\n\n\t\tif (!response?.services) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn response.services.map((s) => s.config.name);\n\t}\n\n\t/**\n\t * Get AI-specific usage from the current month\n\t * Note: This is a simplified implementation. In production, you'd use\n\t * the Cloud Billing Export to BigQuery for detailed usage data.\n\t */\n\tasync getAIUsage(): Promise<GoogleAIUsage | null> {\n\t\t// For accurate Google AI usage, you typically need to:\n\t\t// 1. Enable Cloud Billing export to BigQuery\n\t\t// 2. Query the billing export table\n\n\t\t// As a fallback, we can estimate from the billing API\n\t\t// but it doesn't provide granular token/request counts\n\n\t\t// Return structure for manual tracking until BigQuery export is set up\n\t\treturn {\n\t\t\tgemini_requests: 0,\n\t\t\tgemini_tokens_input: 0,\n\t\t\tgemini_tokens_output: 0,\n\t\t\tdocument_ai_pages: 0,\n\t\t\tvision_requests: 0,\n\t\t\tspeech_minutes: 0,\n\t\t\ttranslation_characters: 0,\n\t\t\ttotal_cost_cents: 0,\n\t\t};\n\t}\n\n\t/**\n\t * Get current month billing summary\n\t * Requires Cloud Billing API access\n\t */\n\tasync getCurrentMonthBilling(): Promise<GoogleCloudUsage[] | null> {\n\t\tif (!this.billingAccountId) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Note: The Cloud Billing API requires special permissions\n\t\t// For most use cases, you'd query BigQuery export instead\n\t\tconst now = new Date();\n\t\tconst startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n\t\t// This is a simplified example - actual implementation would use\n\t\t// the Cloud Billing Budget API or BigQuery export\n\t\tconst budgetsUrl = `https://cloudbilling.googleapis.com/v1/billingAccounts/${this.billingAccountId}/budgets`;\n\n\t\tconst response = await this.fetch<{\n\t\t\tbudgets?: Array<{\n\t\t\t\tamount: { specifiedAmount: { currencyCode: string; units: string } };\n\t\t\t\tcurrentSpend?: { currencyCode: string; units: string };\n\t\t\t}>;\n\t\t}>(budgetsUrl);\n\n\t\tif (!response?.budgets) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Transform budget data to usage format\n\t\treturn response.budgets.map((budget) => ({\n\t\t\tservice_name: \"all_services\",\n\t\t\tdisplay_name: \"All Google Cloud Services\",\n\t\t\tusage_amount: 1,\n\t\t\tusage_unit: \"budget\",\n\t\t\tcost_usd: parseFloat(budget.currentSpend?.units || \"0\"),\n\t\t\tmonth: startOfMonth.toISOString().slice(0, 7),\n\t\t}));\n\t}\n\n\t/**\n\t * Get Maps Platform usage\n\t * Uses the Cloud Billing API to fetch Maps-specific costs\n\t */\n\tasync getMapsUsage(): Promise<{\n\t\tgeocoding_requests: number;\n\t\tplaces_requests: number;\n\t\tdirections_requests: number;\n\t\tstatic_maps_requests: number;\n\t\ttotal_cost_cents: number;\n\t} | null> {\n\t\t// Maps usage is typically tracked via:\n\t\t// 1. Cloud Console usage reports\n\t\t// 2. BigQuery billing export\n\n\t\t// For now, return structure for manual tracking\n\t\treturn {\n\t\t\tgeocoding_requests: 0,\n\t\t\tplaces_requests: 0,\n\t\t\tdirections_requests: 0,\n\t\t\tstatic_maps_requests: 0,\n\t\t\ttotal_cost_cents: 0,\n\t\t};\n\t}\n\n\t/**\n\t * Check if Google Cloud APIs are healthy\n\t */\n\tasync checkHealth(): Promise<{ healthy: boolean; responseTimeMs: number; error?: string }> {\n\t\tconst startTime = Date.now();\n\n\t\ttry {\n\t\t\t// Check Service Usage API availability\n\t\t\tconst response = await fetch(`https://serviceusage.googleapis.com/v1/projects/${this.projectId}/services?pageSize=1`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.accessToken}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst responseTimeMs = Date.now() - startTime;\n\n\t\t\tif (response.ok) {\n\t\t\t\treturn { healthy: true, responseTimeMs };\n\t\t\t}\n\n\t\t\t// Special case: 401/403 means API is up but we need auth\n\t\t\tif (response.status === 401 || response.status === 403) {\n\t\t\t\treturn {\n\t\t\t\t\thealthy: true, // API is responding\n\t\t\t\t\tresponseTimeMs,\n\t\t\t\t\terror: \"Authentication required - API is available\",\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs,\n\t\t\t\terror: `HTTP ${response.status}: ${response.statusText}`,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs: Date.now() - startTime,\n\t\t\t\terror: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t};\n\t\t}\n\t}\n}\n\n// Export singleton instance\nexport const googleCloudClient = new GoogleCloudClient();\n\n/**\n * Google AI Internal Tracker\n *\n * Since Google Cloud doesn't provide real-time token/request counts via API,\n * we need to track these internally in our application.\n *\n * This class provides utilities for internal tracking that syncs with our database.\n */\nexport class GoogleAITracker {\n\t/**\n\t * Calculate cost for Gemini API usage\n\t * Based on: https://ai.google.dev/pricing\n\t */\n\tstatic calculateGeminiCost(inputTokens: number, outputTokens: number, model: \"gemini-1.5-flash\" | \"gemini-1.5-pro\" = \"gemini-1.5-flash\"): number {\n\t\t// Pricing as of 2024 (per million tokens)\n\t\tconst pricing = {\n\t\t\t\"gemini-1.5-flash\": {\n\t\t\t\tinput: 0.075, // $0.075 per 1M tokens\n\t\t\t\toutput: 0.3, // $0.30 per 1M tokens\n\t\t\t},\n\t\t\t\"gemini-1.5-pro\": {\n\t\t\t\tinput: 1.25, // $1.25 per 1M tokens\n\t\t\t\toutput: 5.0, // $5.00 per 1M tokens\n\t\t\t},\n\t\t};\n\n\t\tconst modelPricing = pricing[model];\n\t\tconst inputCost = (inputTokens / 1_000_000) * modelPricing.input;\n\t\tconst outputCost = (outputTokens / 1_000_000) * modelPricing.output;\n\n\t\treturn Math.round((inputCost + outputCost) * 100); // Return cents\n\t}\n\n\t/**\n\t * Calculate cost for Document AI\n\t * First 1,000 pages/month are free\n\t */\n\tstatic calculateDocumentAICost(pages: number): number {\n\t\tconst FREE_TIER = 1000;\n\t\tconst PRICE_PER_1000 = 1.5; // $1.50 per 1000 pages\n\n\t\tif (pages <= FREE_TIER) return 0;\n\n\t\tconst billablePages = pages - FREE_TIER;\n\t\treturn Math.round((billablePages / 1000) * PRICE_PER_1000 * 100);\n\t}\n\n\t/**\n\t * Calculate cost for Vision AI\n\t * First 1,000 units/month are free\n\t */\n\tstatic calculateVisionCost(requests: number): number {\n\t\tconst FREE_TIER = 1000;\n\t\tconst PRICE_PER_1000 = 1.5; // $1.50 per 1000 requests\n\n\t\tif (requests <= FREE_TIER) return 0;\n\n\t\tconst billableRequests = requests - FREE_TIER;\n\t\treturn Math.round((billableRequests / 1000) * PRICE_PER_1000 * 100);\n\t}\n\n\t/**\n\t * Calculate cost for Speech-to-Text\n\t * First 60 minutes/month are free\n\t */\n\tstatic calculateSpeechCost(minutes: number): number {\n\t\tconst FREE_TIER = 60;\n\t\tconst PRICE_PER_MINUTE = 0.024; // $0.024 per minute\n\n\t\tif (minutes <= FREE_TIER) return 0;\n\n\t\tconst billableMinutes = minutes - FREE_TIER;\n\t\treturn Math.round(billableMinutes * PRICE_PER_MINUTE * 100);\n\t}\n\n\t/**\n\t * Calculate cost for Translation API\n\t * First 500,000 characters/month are free\n\t */\n\tstatic calculateTranslationCost(characters: number): number {\n\t\tconst FREE_TIER = 500_000;\n\t\tconst PRICE_PER_MILLION = 20; // $20 per million characters\n\n\t\tif (characters <= FREE_TIER) return 0;\n\n\t\tconst billableChars = characters - FREE_TIER;\n\t\treturn Math.round((billableChars / 1_000_000) * PRICE_PER_MILLION * 100);\n\t}\n\n\t/**\n\t * Calculate total Google AI costs\n\t */\n\tstatic calculateTotalCost(usage: {\n\t\tgemini_input_tokens?: number;\n\t\tgemini_output_tokens?: number;\n\t\tgemini_model?: \"gemini-1.5-flash\" | \"gemini-1.5-pro\";\n\t\tdocument_ai_pages?: number;\n\t\tvision_requests?: number;\n\t\tspeech_minutes?: number;\n\t\ttranslation_characters?: number;\n\t}): number {\n\t\tlet total = 0;\n\n\t\tif (usage.gemini_input_tokens || usage.gemini_output_tokens) {\n\t\t\ttotal += this.calculateGeminiCost(usage.gemini_input_tokens || 0, usage.gemini_output_tokens || 0, usage.gemini_model || \"gemini-1.5-flash\");\n\t\t}\n\n\t\tif (usage.document_ai_pages) {\n\t\t\ttotal += this.calculateDocumentAICost(usage.document_ai_pages);\n\t\t}\n\n\t\tif (usage.vision_requests) {\n\t\t\ttotal += this.calculateVisionCost(usage.vision_requests);\n\t\t}\n\n\t\tif (usage.speech_minutes) {\n\t\t\ttotal += this.calculateSpeechCost(usage.speech_minutes);\n\t\t}\n\n\t\tif (usage.translation_characters) {\n\t\t\ttotal += this.calculateTranslationCost(usage.translation_characters);\n\t\t}\n\n\t\treturn total;\n\t}\n}\n","/**\n * Stripe Billing & Usage Client\n *\n * Fetches transaction data and calculates processing fees from Stripe\n * Docs: https://stripe.com/docs/api\n *\n * Stripe fees are percentage-based:\n * - 2.9% + $0.30 per successful card charge (US)\n * - 0.5% additional for international cards\n * - 1% additional for currency conversion\n */\n\nexport interface StripeUsage {\n\ttotal_transactions: number;\n\ttotal_volume_cents: number;\n\ttotal_fees_cents: number;\n\tsuccessful_charges: number;\n\tfailed_charges: number;\n\trefunds_count: number;\n\trefunds_amount_cents: number;\n\tdisputes_count: number;\n}\n\nexport interface StripeMonthlyStats {\n\tgross_volume_cents: number;\n\tnet_volume_cents: number;\n\tfees_cents: number;\n\trefunds_cents: number;\n\ttransaction_count: number;\n\taverage_transaction_cents: number;\n}\n\ninterface StripeBalanceTransaction {\n\tid: string;\n\tamount: number;\n\tfee: number;\n\tnet: number;\n\ttype: string;\n\tcreated: number;\n\tstatus: string;\n}\n\ninterface StripeListResponse<T> {\n\tobject: \"list\";\n\tdata: T[];\n\thas_more: boolean;\n\turl: string;\n}\n\n/**\n * Stripe Billing Client\n * Requires STRIPE_SECRET_KEY environment variable\n */\nexport class StripeBillingClient {\n\tprivate baseUrl = \"https://api.stripe.com/v1\";\n\tprivate secretKey: string;\n\n\tconstructor() {\n\t\tconst secretKey = process.env.STRIPE_SECRET_KEY;\n\n\t\tif (!secretKey) {\n\t\t\tconsole.warn(\"STRIPE_SECRET_KEY not set - Stripe billing tracking disabled\");\n\t\t}\n\n\t\tthis.secretKey = secretKey || \"\";\n\t}\n\n\tprivate async fetch<T>(endpoint: string, params?: Record<string, string>): Promise<T | null> {\n\t\tif (!this.secretKey) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = new URL(`${this.baseUrl}${endpoint}`);\n\t\tif (params) {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\turl.searchParams.append(key, value);\n\t\t\t});\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url.toString(), {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.secretKey}`,\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tconsole.error(`Stripe API error: ${response.status} ${response.statusText}`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (await response.json()) as T;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Stripe API fetch error:\", error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get the current month's date range as Unix timestamps\n\t */\n\tprivate getCurrentMonthRange(): { startTimestamp: number; endTimestamp: number } {\n\t\tconst now = new Date();\n\t\tconst startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\t\tconst endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59);\n\n\t\treturn {\n\t\t\tstartTimestamp: Math.floor(startOfMonth.getTime() / 1000),\n\t\t\tendTimestamp: Math.floor(endOfMonth.getTime() / 1000),\n\t\t};\n\t}\n\n\t/**\n\t * Get balance transactions for the current month\n\t * This includes all fees, charges, refunds, etc.\n\t */\n\tasync getBalanceTransactions(limit = 100): Promise<StripeBalanceTransaction[] | null> {\n\t\tconst { startTimestamp, endTimestamp } = this.getCurrentMonthRange();\n\n\t\tconst response = await this.fetch<StripeListResponse<StripeBalanceTransaction>>(\"/balance_transactions\", {\n\t\t\tlimit: limit.toString(),\n\t\t\t\"created[gte]\": startTimestamp.toString(),\n\t\t\t\"created[lte]\": endTimestamp.toString(),\n\t\t});\n\n\t\treturn response?.data || null;\n\t}\n\n\t/**\n\t * Get monthly statistics including fees\n\t */\n\tasync getCurrentMonthStats(): Promise<StripeMonthlyStats | null> {\n\t\tconst transactions = await this.getBalanceTransactions(100);\n\n\t\tif (!transactions) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet grossVolume = 0;\n\t\tlet netVolume = 0;\n\t\tlet totalFees = 0;\n\t\tlet refundsAmount = 0;\n\t\tlet chargeCount = 0;\n\n\t\tfor (const txn of transactions) {\n\t\t\tswitch (txn.type) {\n\t\t\t\tcase \"charge\":\n\t\t\t\t\tgrossVolume += txn.amount;\n\t\t\t\t\tnetVolume += txn.net;\n\t\t\t\t\ttotalFees += txn.fee;\n\t\t\t\t\tchargeCount++;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"refund\":\n\t\t\t\t\trefundsAmount += Math.abs(txn.amount);\n\t\t\t\t\tnetVolume += txn.net; // Negative for refunds\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"payout\":\n\t\t\t\t\t// Don't count payouts in volume\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// Other transaction types (adjustments, etc.)\n\t\t\t\t\tnetVolume += txn.net;\n\t\t\t\t\ttotalFees += txn.fee;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tgross_volume_cents: grossVolume,\n\t\t\tnet_volume_cents: netVolume,\n\t\t\tfees_cents: totalFees,\n\t\t\trefunds_cents: refundsAmount,\n\t\t\ttransaction_count: chargeCount,\n\t\t\taverage_transaction_cents: chargeCount > 0 ? Math.round(grossVolume / chargeCount) : 0,\n\t\t};\n\t}\n\n\t/**\n\t * Get detailed usage statistics\n\t */\n\tasync getUsage(): Promise<StripeUsage | null> {\n\t\tconst { startTimestamp, endTimestamp } = this.getCurrentMonthRange();\n\n\t\t// Fetch charges for the month\n\t\tconst chargesResponse = await this.fetch<\n\t\t\tStripeListResponse<{\n\t\t\t\tid: string;\n\t\t\t\tamount: number;\n\t\t\t\tstatus: string;\n\t\t\t\trefunded: boolean;\n\t\t\t\tamount_refunded: number;\n\t\t\t}>\n\t\t>(\"/charges\", {\n\t\t\tlimit: \"100\",\n\t\t\t\"created[gte]\": startTimestamp.toString(),\n\t\t\t\"created[lte]\": endTimestamp.toString(),\n\t\t});\n\n\t\t// Fetch disputes for the month\n\t\tconst disputesResponse = await this.fetch<\n\t\t\tStripeListResponse<{\n\t\t\t\tid: string;\n\t\t\t\tamount: number;\n\t\t\t\tstatus: string;\n\t\t\t}>\n\t\t>(\"/disputes\", {\n\t\t\tlimit: \"100\",\n\t\t\t\"created[gte]\": startTimestamp.toString(),\n\t\t\t\"created[lte]\": endTimestamp.toString(),\n\t\t});\n\n\t\tif (!chargesResponse?.data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst charges = chargesResponse.data;\n\t\tconst disputes = disputesResponse?.data || [];\n\n\t\tlet totalVolume = 0;\n\t\tlet successfulCharges = 0;\n\t\tlet failedCharges = 0;\n\t\tlet refundsCount = 0;\n\t\tlet refundsAmount = 0;\n\n\t\tfor (const charge of charges) {\n\t\t\tif (charge.status === \"succeeded\") {\n\t\t\t\tsuccessfulCharges++;\n\t\t\t\ttotalVolume += charge.amount;\n\t\t\t} else if (charge.status === \"failed\") {\n\t\t\t\tfailedCharges++;\n\t\t\t}\n\n\t\t\tif (charge.refunded || charge.amount_refunded > 0) {\n\t\t\t\trefundsCount++;\n\t\t\t\trefundsAmount += charge.amount_refunded;\n\t\t\t}\n\t\t}\n\n\t\t// Calculate estimated fees (2.9% + $0.30 per transaction)\n\t\tconst estimatedFees = Math.round(totalVolume * 0.029 + successfulCharges * 30);\n\n\t\treturn {\n\t\t\ttotal_transactions: charges.length,\n\t\t\ttotal_volume_cents: totalVolume,\n\t\t\ttotal_fees_cents: estimatedFees,\n\t\t\tsuccessful_charges: successfulCharges,\n\t\t\tfailed_charges: failedCharges,\n\t\t\trefunds_count: refundsCount,\n\t\t\trefunds_amount_cents: refundsAmount,\n\t\t\tdisputes_count: disputes.length,\n\t\t};\n\t}\n\n\t/**\n\t * Get current Stripe balance\n\t */\n\tasync getBalance(): Promise<{\n\t\tavailable_cents: number;\n\t\tpending_cents: number;\n\t\tcurrency: string;\n\t} | null> {\n\t\tconst response = await this.fetch<{\n\t\t\tavailable: Array<{ amount: number; currency: string }>;\n\t\t\tpending: Array<{ amount: number; currency: string }>;\n\t\t}>(\"/balance\");\n\n\t\tif (!response) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Get USD balance (or first available currency)\n\t\tconst availableUsd = response.available.find((b) => b.currency === \"usd\") || response.available[0];\n\t\tconst pendingUsd = response.pending.find((b) => b.currency === \"usd\") || response.pending[0];\n\n\t\treturn {\n\t\t\tavailable_cents: availableUsd?.amount || 0,\n\t\t\tpending_cents: pendingUsd?.amount || 0,\n\t\t\tcurrency: availableUsd?.currency || \"usd\",\n\t\t};\n\t}\n\n\t/**\n\t * Calculate Stripe fee for a given amount\n\t * Standard US pricing: 2.9% + $0.30\n\t */\n\tstatic calculateFee(\n\t\tamountCents: number,\n\t\toptions: {\n\t\t\tisInternational?: boolean;\n\t\t\thasCurrencyConversion?: boolean;\n\t\t} = {}\n\t): number {\n\t\tlet percentage = 0.029; // 2.9% base\n\n\t\tif (options.isInternational) {\n\t\t\tpercentage += 0.005; // +0.5% for international\n\t\t}\n\n\t\tif (options.hasCurrencyConversion) {\n\t\t\tpercentage += 0.01; // +1% for currency conversion\n\t\t}\n\n\t\tconst percentageFee = Math.round(amountCents * percentage);\n\t\tconst flatFee = 30; // $0.30\n\n\t\treturn percentageFee + flatFee;\n\t}\n\n\t/**\n\t * Calculate net amount after Stripe fees\n\t */\n\tstatic calculateNetAmount(\n\t\tamountCents: number,\n\t\toptions: {\n\t\t\tisInternational?: boolean;\n\t\t\thasCurrencyConversion?: boolean;\n\t\t} = {}\n\t): number {\n\t\tconst fee = this.calculateFee(amountCents, options);\n\t\treturn amountCents - fee;\n\t}\n\n\t/**\n\t * Check if the Stripe API is healthy\n\t */\n\tasync checkHealth(): Promise<{ healthy: boolean; responseTimeMs: number; error?: string }> {\n\t\tconst startTime = Date.now();\n\n\t\ttry {\n\t\t\tconst response = await fetch(`${this.baseUrl}/balance`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${this.secretKey}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst responseTimeMs = Date.now() - startTime;\n\n\t\t\tif (response.ok) {\n\t\t\t\treturn { healthy: true, responseTimeMs };\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs,\n\t\t\t\terror: `HTTP ${response.status}: ${response.statusText}`,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn {\n\t\t\t\thealthy: false,\n\t\t\t\tresponseTimeMs: Date.now() - startTime,\n\t\t\t\terror: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t};\n\t\t}\n\t}\n}\n\n// Export singleton instance\nexport const stripeBillingClient = new StripeBillingClient();\n","/**\n * API Service Configuration\n *\n * Comprehensive configuration for all external API services including:\n * - Free tier limits and thresholds\n * - Pricing after free tier\n * - Health check endpoints\n * - Provider API availability\n */\n\nexport type ServiceCategory = \"ai\" | \"google_maps\" | \"infrastructure\" | \"communication\" | \"data\" | \"payments\";\nexport type FreeTierPeriod = \"daily\" | \"monthly\" | \"yearly\";\nexport type SyncSource = \"provider_api\" | \"internal_tracking\" | \"manual\" | \"estimated\";\n\nexport interface FreeTierConfig {\n\tlimit: number;\n\tperiod: FreeTierPeriod;\n\tunit: string;\n}\n\nexport interface CostConfig {\n\t/** Cost in cents */\n\tcents?: number;\n\t/** Cost applies per this many units */\n\tperUnits?: number;\n\t/** Unit type (request, page, minute, etc) */\n\tunit?: string;\n\t/** For percentage-based pricing (e.g., Stripe) */\n\tpercentage?: number;\n\t/** Fixed fee in cents per transaction */\n\tfixedCents?: number;\n}\n\nexport interface ApiServiceConfig {\n\tserviceName: string;\n\tdisplayName: string;\n\tcategory: ServiceCategory;\n\tprovider: string;\n\t/** Free tier configuration, null if no free tier */\n\tfreeTier: FreeTierConfig | null;\n\t/** Cost after free tier is exhausted */\n\tcostAfterFree: CostConfig | null;\n\t/** Base monthly cost in cents (for subscription services) */\n\tbaseCostCents: number;\n\t/** Whether this service has an external API for fetching usage */\n\thasExternalApi: boolean;\n\t/** Endpoint to check for health status */\n\thealthCheckEndpoint?: string;\n\t/** Alert thresholds */\n\twarningThresholdPct: number;\n\tcriticalThresholdPct: number;\n\t/** Description of what this service is used for */\n\tdescription?: string;\n}\n\n/**\n * All API service configurations\n * Organized by category for easy access\n */\nexport const API_SERVICES: Record<string, ApiServiceConfig> = {\n\t// ==========================================\n\t// Google AI Services\n\t// ==========================================\n\tgoogle_gemini: {\n\t\tserviceName: \"google_gemini\",\n\t\tdisplayName: \"Google Gemini AI\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 1500, period: \"daily\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 7.5, perUnits: 1000000, unit: \"tokens\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\thealthCheckEndpoint: \"https://generativelanguage.googleapis.com/v1/models\",\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Gemini AI for text generation, chat, and multimodal tasks\",\n\t},\n\tgoogle_document_ai: {\n\t\tserviceName: \"google_document_ai\",\n\t\tdisplayName: \"Document AI\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 1000, period: \"monthly\", unit: \"pages\" },\n\t\tcostAfterFree: { cents: 1, perUnits: 1, unit: \"page\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Document parsing, OCR, and form extraction\",\n\t},\n\tgoogle_vision: {\n\t\tserviceName: \"google_vision\",\n\t\tdisplayName: \"Vision AI\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 1000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 150, perUnits: 1000, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Image analysis, OCR, and object detection\",\n\t},\n\tgoogle_speech_to_text: {\n\t\tserviceName: \"google_speech_to_text\",\n\t\tdisplayName: \"Speech-to-Text\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 60, period: \"monthly\", unit: \"minutes\" },\n\t\tcostAfterFree: { cents: 60, perUnits: 1, unit: \"minute\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Audio transcription and speech recognition\",\n\t},\n\tgoogle_text_to_speech: {\n\t\tserviceName: \"google_text_to_speech\",\n\t\tdisplayName: \"Text-to-Speech\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 4000000, period: \"monthly\", unit: \"characters\" },\n\t\tcostAfterFree: { cents: 400, perUnits: 1000000, unit: \"characters\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Text to natural speech synthesis\",\n\t},\n\tgoogle_translation: {\n\t\tserviceName: \"google_translation\",\n\t\tdisplayName: \"Translation\",\n\t\tcategory: \"ai\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 500000, period: \"monthly\", unit: \"characters\" },\n\t\tcostAfterFree: { cents: 2000, perUnits: 1000000, unit: \"characters\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Language translation services\",\n\t},\n\n\t// ==========================================\n\t// Google Maps Services\n\t// ==========================================\n\tgoogle_geocoding: {\n\t\tserviceName: \"google_geocoding\",\n\t\tdisplayName: \"Geocoding\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 10000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" }, // $5/1000 = $0.50/100\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Address to coordinates conversion\",\n\t},\n\tgoogle_directions: {\n\t\tserviceName: \"google_directions\",\n\t\tdisplayName: \"Directions\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 10000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Route planning and navigation\",\n\t},\n\tgoogle_places: {\n\t\tserviceName: \"google_places\",\n\t\tdisplayName: \"Places\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 10000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 170, perUnits: 100, unit: \"request\" }, // $17/1000\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Place search, details, and autocomplete\",\n\t},\n\tgoogle_distance_matrix: {\n\t\tserviceName: \"google_distance_matrix\",\n\t\tdisplayName: \"Distance Matrix\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 10000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Travel distance and time calculations\",\n\t},\n\tgoogle_maps_static: {\n\t\tserviceName: \"google_maps_static\",\n\t\tdisplayName: \"Maps Static\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 25000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 20, perUnits: 100, unit: \"request\" }, // $2/1000\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Static map image generation\",\n\t},\n\tgoogle_street_view: {\n\t\tserviceName: \"google_street_view\",\n\t\tdisplayName: \"Street View\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 25000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 70, perUnits: 100, unit: \"request\" }, // $7/1000\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Street-level imagery\",\n\t},\n\tgoogle_routes: {\n\t\tserviceName: \"google_routes\",\n\t\tdisplayName: \"Routes API\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: { limit: 10000, period: \"monthly\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Advanced routing with traffic awareness\",\n\t},\n\tgoogle_elevation: {\n\t\tserviceName: \"google_elevation\",\n\t\tdisplayName: \"Elevation\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: null,\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Terrain elevation data\",\n\t},\n\tgoogle_timezone: {\n\t\tserviceName: \"google_timezone\",\n\t\tdisplayName: \"Time Zone\",\n\t\tcategory: \"google_maps\",\n\t\tprovider: \"google\",\n\t\tfreeTier: null,\n\t\tcostAfterFree: { cents: 50, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Time zone lookups by location\",\n\t},\n\n\t// ==========================================\n\t// Infrastructure Services\n\t// ==========================================\n\tsupabase: {\n\t\tserviceName: \"supabase\",\n\t\tdisplayName: \"Supabase\",\n\t\tcategory: \"infrastructure\",\n\t\tprovider: \"supabase\",\n\t\tfreeTier: null, // Pro plan, usage-based after base\n\t\tcostAfterFree: null,\n\t\tbaseCostCents: 2500, // $25/month\n\t\thasExternalApi: true,\n\t\thealthCheckEndpoint: \"https://api.supabase.com/v1/projects\",\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Database, Auth, Storage, Edge Functions\",\n\t},\n\tvercel: {\n\t\tserviceName: \"vercel\",\n\t\tdisplayName: \"Vercel\",\n\t\tcategory: \"infrastructure\",\n\t\tprovider: \"vercel\",\n\t\tfreeTier: { limit: 1000, period: \"monthly\", unit: \"GB\" }, // 1TB bandwidth included\n\t\tcostAfterFree: { cents: 15, perUnits: 1, unit: \"GB\" }, // $0.15/GB\n\t\tbaseCostCents: 2000, // $20/month Pro plan\n\t\thasExternalApi: false, // Limited API, track internally\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Hosting, Edge Functions, Analytics\",\n\t},\n\n\t// ==========================================\n\t// Communication Services\n\t// ==========================================\n\ttelnyx_voice: {\n\t\tserviceName: \"telnyx_voice\",\n\t\tdisplayName: \"Telnyx Voice\",\n\t\tcategory: \"communication\",\n\t\tprovider: \"telnyx\",\n\t\tfreeTier: null, // No free tier\n\t\tcostAfterFree: { cents: 90, perUnits: 100, unit: \"minute\" }, // $0.009/min\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\thealthCheckEndpoint: \"https://api.telnyx.com/v2/connections\",\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"VoIP calls and call control\",\n\t},\n\ttelnyx_sms: {\n\t\tserviceName: \"telnyx_sms\",\n\t\tdisplayName: \"Telnyx SMS\",\n\t\tcategory: \"communication\",\n\t\tprovider: \"telnyx\",\n\t\tfreeTier: null, // No free tier\n\t\tcostAfterFree: { cents: 25, perUnits: 100, unit: \"message\" }, // $0.0025/msg\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"SMS and MMS messaging\",\n\t},\n\tresend: {\n\t\tserviceName: \"resend\",\n\t\tdisplayName: \"Resend Email\",\n\t\tcategory: \"communication\",\n\t\tprovider: \"resend\",\n\t\tfreeTier: { limit: 3000, period: \"monthly\", unit: \"emails\" },\n\t\tcostAfterFree: { cents: 9, perUnits: 100, unit: \"email\" }, // ~$0.0009/email\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false, // Track internally\n\t\thealthCheckEndpoint: \"https://api.resend.com/emails\",\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Transactional email delivery\",\n\t},\n\tassemblyai: {\n\t\tserviceName: \"assemblyai\",\n\t\tdisplayName: \"AssemblyAI\",\n\t\tcategory: \"communication\",\n\t\tprovider: \"assemblyai\",\n\t\tfreeTier: { limit: 500, period: \"monthly\", unit: \"credits\" }, // $50 in credits\n\t\tcostAfterFree: { cents: 15, perUnits: 1, unit: \"hour\" }, // $0.15/hour\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Call transcription and audio intelligence\",\n\t},\n\n\t// ==========================================\n\t// Data APIs\n\t// ==========================================\n\tattom: {\n\t\tserviceName: \"attom\",\n\t\tdisplayName: \"ATTOM Property\",\n\t\tcategory: \"data\",\n\t\tprovider: \"attom\",\n\t\tfreeTier: null, // No free tier\n\t\tcostAfterFree: { cents: 500, perUnits: 100, unit: \"request\" }, // ~$0.05/request\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Property data, valuations, sales history\",\n\t},\n\tshovels: {\n\t\tserviceName: \"shovels\",\n\t\tdisplayName: \"Shovels Permits\",\n\t\tcategory: \"data\",\n\t\tprovider: \"shovels\",\n\t\tfreeTier: null,\n\t\tcostAfterFree: { cents: 300, perUnits: 100, unit: \"request\" }, // ~$0.03/request\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Building permits and contractor data\",\n\t},\n\twalk_score: {\n\t\tserviceName: \"walk_score\",\n\t\tdisplayName: \"Walk Score\",\n\t\tcategory: \"data\",\n\t\tprovider: \"walkscore\",\n\t\tfreeTier: { limit: 5000, period: \"daily\", unit: \"requests\" },\n\t\tcostAfterFree: { cents: 10, perUnits: 100, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Walkability, transit, and bike scores\",\n\t},\n\tcrimeometer: {\n\t\tserviceName: \"crimeometer\",\n\t\tdisplayName: \"CrimeoMeter\",\n\t\tcategory: \"data\",\n\t\tprovider: \"crimeometer\",\n\t\tfreeTier: null,\n\t\tcostAfterFree: { cents: 500, perUnits: 100, unit: \"request\" }, // ~$0.05/request\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Real-time crime data and safety scores\",\n\t},\n\tfema_flood: {\n\t\tserviceName: \"fema_flood\",\n\t\tdisplayName: \"FEMA Flood\",\n\t\tcategory: \"data\",\n\t\tprovider: \"fema\",\n\t\tfreeTier: null, // Free government API\n\t\tcostAfterFree: { cents: 0, perUnits: 1, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Flood zone and risk data (free)\",\n\t},\n\tcensus_bureau: {\n\t\tserviceName: \"census_bureau\",\n\t\tdisplayName: \"Census Bureau\",\n\t\tcategory: \"data\",\n\t\tprovider: \"census\",\n\t\tfreeTier: null, // Free government API\n\t\tcostAfterFree: { cents: 0, perUnits: 1, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Demographics and housing data (free)\",\n\t},\n\tfbi_crime: {\n\t\tserviceName: \"fbi_crime\",\n\t\tdisplayName: \"FBI Crime Data\",\n\t\tcategory: \"data\",\n\t\tprovider: \"fbi\",\n\t\tfreeTier: null, // Free government API\n\t\tcostAfterFree: { cents: 0, perUnits: 1, unit: \"request\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: false,\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Crime statistics by state (free)\",\n\t},\n\n\t// ==========================================\n\t// Payment Services\n\t// ==========================================\n\tstripe: {\n\t\tserviceName: \"stripe\",\n\t\tdisplayName: \"Stripe\",\n\t\tcategory: \"payments\",\n\t\tprovider: \"stripe\",\n\t\tfreeTier: null,\n\t\tcostAfterFree: { percentage: 2.9, fixedCents: 30, unit: \"transaction\" },\n\t\tbaseCostCents: 0,\n\t\thasExternalApi: true,\n\t\thealthCheckEndpoint: \"https://api.stripe.com/v1/balance\",\n\t\twarningThresholdPct: 80,\n\t\tcriticalThresholdPct: 95,\n\t\tdescription: \"Payment processing (2.9% + $0.30)\",\n\t},\n};\n\n/**\n * Get services by category\n */\nexport function getServicesByCategory(category: ServiceCategory): ApiServiceConfig[] {\n\treturn Object.values(API_SERVICES).filter((s) => s.category === category);\n}\n\n/**\n * Get services by provider\n */\nexport function getServicesByProvider(provider: string): ApiServiceConfig[] {\n\treturn Object.values(API_SERVICES).filter((s) => s.provider === provider);\n}\n\n/**\n * Get all services with free tiers\n */\nexport function getServicesWithFreeTier(): ApiServiceConfig[] {\n\treturn Object.values(API_SERVICES).filter((s) => s.freeTier !== null);\n}\n\n/**\n * Get all services that have external APIs for usage data\n */\nexport function getServicesWithExternalApi(): ApiServiceConfig[] {\n\treturn Object.values(API_SERVICES).filter((s) => s.hasExternalApi);\n}\n\n/**\n * Calculate cost for usage\n */\nexport function calculateCost(serviceName: string, usage: number, transactionAmount?: number): number {\n\tconst service = API_SERVICES[serviceName];\n\tif (!service || !service.costAfterFree) return 0;\n\n\tconst { cents, perUnits, percentage, fixedCents } = service.costAfterFree;\n\n\t// For percentage-based pricing (Stripe)\n\tif (percentage !== undefined && transactionAmount !== undefined) {\n\t\tconst percentageCost = (transactionAmount * percentage) / 100;\n\t\tconst fixedCost = (fixedCents || 0) / 100;\n\t\treturn percentageCost + fixedCost;\n\t}\n\n\t// For unit-based pricing\n\tif (cents !== undefined && perUnits !== undefined) {\n\t\treturn (usage / perUnits) * cents;\n\t}\n\n\treturn 0;\n}\n\n/**\n * Calculate free tier percentage used\n */\nexport function calculateFreeTierPercentage(serviceName: string, used: number): number | null {\n\tconst service = API_SERVICES[serviceName];\n\tif (!service || !service.freeTier) return null;\n\n\treturn Math.min(100, (used / service.freeTier.limit) * 100);\n}\n\n/**\n * Get alert level based on usage\n */\nexport function getAlertLevel(serviceName: string, percentUsed: number): \"ok\" | \"warning\" | \"critical\" {\n\tconst service = API_SERVICES[serviceName];\n\tif (!service) return \"ok\";\n\n\tif (percentUsed >= service.criticalThresholdPct) return \"critical\";\n\tif (percentUsed >= service.warningThresholdPct) return \"warning\";\n\treturn \"ok\";\n}\n\n/**\n * Service categories with display names\n */\nexport const SERVICE_CATEGORIES: Record<ServiceCategory, { displayName: string; icon: string }> = {\n\tai: { displayName: \"AI Services\", icon: \"brain\" },\n\tgoogle_maps: { displayName: \"Google Maps\", icon: \"map\" },\n\tinfrastructure: { displayName: \"Infrastructure\", icon: \"server\" },\n\tcommunication: { displayName: \"Communication\", icon: \"message-square\" },\n\tdata: { displayName: \"Data APIs\", icon: \"database\" },\n\tpayments: { displayName: \"Payments\", icon: \"credit-card\" },\n};\n"],"names":[],"mappings":"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"}