{"version":3,"sources":["../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/readonly-url-search-params.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/redirect-status-code.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/redirect-error.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/redirect.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/http-access-fallback/http-access-fallback.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/not-found.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/forbidden.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/unauthorized.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/lib/router-utils/is-postpone.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/is-next-router-error.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/unstable-rethrow.server.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/unstable-rethrow.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/client/components/navigation.react-server.ts","../../../../../apps/web/src/components/ui/status-pipeline.tsx/__nextjs-internal-proxy.mjs","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/dist/api/navigation.react-server.js","../../../../../apps/web/src/lib/queries/appointments.ts","../../../../../apps/web/src/app/api/work-stats/%5Bpage%5D/route.ts","../../../../../node_modules/.pnpm/next%4016.0.4_%40opentelemetry%2Bapi%401.9.0_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/dist/esm/build/templates/app-route.js","../../../../../apps/web/src/components/work/appointments/appointments-stats.tsx","../../../../../apps/web/src/components/work/contracts/contracts-stats.tsx","../../../../../apps/web/src/components/work/equipment/equipment-stats.tsx","../../../../../apps/web/src/lib/queries/contracts.ts","../../../../../apps/web/src/components/work/payments/payments-stats.tsx","../../../../../apps/web/src/components/work/purchase-orders/purchase-orders-stats.tsx","../../../../../apps/web/src/components/work/team/team-stats.tsx","../../../../../apps/web/src/components/work/materials/materials-stats.tsx","../../../../../apps/web/src/components/work/vendors/vendors-stats.tsx","../../../../../apps/web/src/components/work/jobs/jobs-stats.tsx","../../../../../apps/web/src/components/work/invoices/invoices-stats.tsx","../../../../../apps/web/src/components/work/estimates/estimates-stats.tsx","../../../../../apps/web/src/lib/formatters.ts"],"sourcesContent":["/**\n * ReadonlyURLSearchParams implementation shared between client and server.\n * This file is intentionally not marked as 'use client' or 'use server'\n * so it can be imported by both environments.\n */\n\n/** @internal */\nclass ReadonlyURLSearchParamsError extends Error {\n  constructor() {\n    super(\n      'Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams'\n    )\n  }\n}\n\n/**\n * A read-only version of URLSearchParams that throws errors when mutation methods are called.\n * This ensures that the URLSearchParams returned by useSearchParams() cannot be mutated.\n */\nexport class ReadonlyURLSearchParams extends URLSearchParams {\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  append() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  delete() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  set() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  sort() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n}\n","export enum RedirectStatusCode {\n  SeeOther = 303,\n  TemporaryRedirect = 307,\n  PermanentRedirect = 308,\n}\n","import { RedirectStatusCode } from './redirect-status-code'\n\nexport const REDIRECT_ERROR_CODE = 'NEXT_REDIRECT'\n\nexport enum RedirectType {\n  push = 'push',\n  replace = 'replace',\n}\n\nexport type RedirectError = Error & {\n  digest: `${typeof REDIRECT_ERROR_CODE};${RedirectType};${string};${RedirectStatusCode};`\n}\n\n/**\n * Checks an error to determine if it's an error generated by the\n * `redirect(url)` helper.\n *\n * @param error the error that may reference a redirect error\n * @returns true if the error is a redirect error\n */\nexport function isRedirectError(error: unknown): error is RedirectError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n\n  const digest = error.digest.split(';')\n  const [errorCode, type] = digest\n  const destination = digest.slice(2, -2).join(';')\n  const status = digest.at(-2)\n\n  const statusCode = Number(status)\n\n  return (\n    errorCode === REDIRECT_ERROR_CODE &&\n    (type === 'replace' || type === 'push') &&\n    typeof destination === 'string' &&\n    !isNaN(statusCode) &&\n    statusCode in RedirectStatusCode\n  )\n}\n","import { RedirectStatusCode } from './redirect-status-code'\nimport {\n  RedirectType,\n  type RedirectError,\n  isRedirectError,\n  REDIRECT_ERROR_CODE,\n} from './redirect-error'\n\nconst actionAsyncStorage =\n  typeof window === 'undefined'\n    ? (\n        require('../../server/app-render/action-async-storage.external') as typeof import('../../server/app-render/action-async-storage.external')\n      ).actionAsyncStorage\n    : undefined\n\nexport function getRedirectError(\n  url: string,\n  type: RedirectType,\n  statusCode: RedirectStatusCode = RedirectStatusCode.TemporaryRedirect\n): RedirectError {\n  const error = new Error(REDIRECT_ERROR_CODE) as RedirectError\n  error.digest = `${REDIRECT_ERROR_CODE};${type};${url};${statusCode};`\n  return error\n}\n\n/**\n * This function allows you to redirect the user to another URL. It can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a meta tag to redirect the user to the target page.\n * - In a Route Handler or Server Action, it will serve a 307/303 to the caller.\n * - In a Server Action, type defaults to 'push' and 'replace' elsewhere.\n *\n * Read more: [Next.js Docs: `redirect`](https://nextjs.org/docs/app/api-reference/functions/redirect)\n */\nexport function redirect(\n  /** The URL to redirect to */\n  url: string,\n  type?: RedirectType\n): never {\n  type ??= actionAsyncStorage?.getStore()?.isAction\n    ? RedirectType.push\n    : RedirectType.replace\n\n  throw getRedirectError(url, type, RedirectStatusCode.TemporaryRedirect)\n}\n\n/**\n * This function allows you to redirect the user to another URL. It can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a meta tag to redirect the user to the target page.\n * - In a Route Handler or Server Action, it will serve a 308/303 to the caller.\n *\n * Read more: [Next.js Docs: `redirect`](https://nextjs.org/docs/app/api-reference/functions/redirect)\n */\nexport function permanentRedirect(\n  /** The URL to redirect to */\n  url: string,\n  type: RedirectType = RedirectType.replace\n): never {\n  throw getRedirectError(url, type, RedirectStatusCode.PermanentRedirect)\n}\n\n/**\n * Returns the encoded URL from the error if it's a RedirectError, null\n * otherwise. Note that this does not validate the URL returned.\n *\n * @param error the error that may be a redirect error\n * @return the url if the error was a redirect error\n */\nexport function getURLFromRedirectError(error: RedirectError): string\nexport function getURLFromRedirectError(error: unknown): string | null {\n  if (!isRedirectError(error)) return null\n\n  // Slices off the beginning of the digest that contains the code and the\n  // separating ';'.\n  return error.digest.split(';').slice(2, -2).join(';')\n}\n\nexport function getRedirectTypeFromError(error: RedirectError): RedirectType {\n  if (!isRedirectError(error)) {\n    throw new Error('Not a redirect error')\n  }\n\n  return error.digest.split(';', 2)[1] as RedirectType\n}\n\nexport function getRedirectStatusCodeFromError(error: RedirectError): number {\n  if (!isRedirectError(error)) {\n    throw new Error('Not a redirect error')\n  }\n\n  return Number(error.digest.split(';').at(-2))\n}\n","export const HTTPAccessErrorStatus = {\n  NOT_FOUND: 404,\n  FORBIDDEN: 403,\n  UNAUTHORIZED: 401,\n}\n\nconst ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatus))\n\nexport const HTTP_ERROR_FALLBACK_ERROR_CODE = 'NEXT_HTTP_ERROR_FALLBACK'\n\nexport type HTTPAccessFallbackError = Error & {\n  digest: `${typeof HTTP_ERROR_FALLBACK_ERROR_CODE};${string}`\n}\n\n/**\n * Checks an error to determine if it's an error generated by\n * the HTTP navigation APIs `notFound()`, `forbidden()` or `unauthorized()`.\n *\n * @param error the error that may reference a HTTP access error\n * @returns true if the error is a HTTP access error\n */\nexport function isHTTPAccessFallbackError(\n  error: unknown\n): error is HTTPAccessFallbackError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n  const [prefix, httpStatus] = error.digest.split(';')\n\n  return (\n    prefix === HTTP_ERROR_FALLBACK_ERROR_CODE &&\n    ALLOWED_CODES.has(Number(httpStatus))\n  )\n}\n\nexport function getAccessFallbackHTTPStatus(\n  error: HTTPAccessFallbackError\n): number {\n  const httpStatus = error.digest.split(';')[1]\n  return Number(httpStatus)\n}\n\nexport function getAccessFallbackErrorTypeByStatus(\n  status: number\n): 'not-found' | 'forbidden' | 'unauthorized' | undefined {\n  switch (status) {\n    case 401:\n      return 'unauthorized'\n    case 403:\n      return 'forbidden'\n    case 404:\n      return 'not-found'\n    default:\n      return\n  }\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n/**\n * This function allows you to render the [not-found.js file](https://nextjs.org/docs/app/api-reference/file-conventions/not-found)\n * within a route segment as well as inject a tag.\n *\n * `notFound()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a `<meta name=\"robots\" content=\"noindex\" />` meta tag and set the status code to 404.\n * - In a Route Handler or Server Action, it will serve a 404 to the caller.\n *\n * Read more: [Next.js Docs: `notFound`](https://nextjs.org/docs/app/api-reference/functions/not-found)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};404`\n\nexport function notFound(): never {\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n\n  throw error\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n// TODO: Add `forbidden` docs\n/**\n * @experimental\n * This function allows you to render the [forbidden.js file](https://nextjs.org/docs/app/api-reference/file-conventions/forbidden)\n * within a route segment as well as inject a tag.\n *\n * `forbidden()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * Read more: [Next.js Docs: `forbidden`](https://nextjs.org/docs/app/api-reference/functions/forbidden)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};403`\n\nexport function forbidden(): never {\n  if (!process.env.__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS) {\n    throw new Error(\n      `\\`forbidden()\\` is experimental and only allowed to be enabled when \\`experimental.authInterrupts\\` is enabled.`\n    )\n  }\n\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n  throw error\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n// TODO: Add `unauthorized` docs\n/**\n * @experimental\n * This function allows you to render the [unauthorized.js file](https://nextjs.org/docs/app/api-reference/file-conventions/unauthorized)\n * within a route segment as well as inject a tag.\n *\n * `unauthorized()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n *\n * Read more: [Next.js Docs: `unauthorized`](https://nextjs.org/docs/app/api-reference/functions/unauthorized)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};401`\n\nexport function unauthorized(): never {\n  if (!process.env.__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS) {\n    throw new Error(\n      `\\`unauthorized()\\` is experimental and only allowed to be used when \\`experimental.authInterrupts\\` is enabled.`\n    )\n  }\n\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n  throw error\n}\n","const REACT_POSTPONE_TYPE: symbol = Symbol.for('react.postpone')\n\nexport function isPostpone(error: any): boolean {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    error.$$typeof === REACT_POSTPONE_TYPE\n  )\n}\n","import {\n  isHTTPAccessFallbackError,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\nimport { isRedirectError, type RedirectError } from './redirect-error'\n\n/**\n * Returns true if the error is a navigation signal error. These errors are\n * thrown by user code to perform navigation operations and interrupt the React\n * render.\n */\nexport function isNextRouterError(\n  error: unknown\n): error is RedirectError | HTTPAccessFallbackError {\n  return isRedirectError(error) || isHTTPAccessFallbackError(error)\n}\n","import { isHangingPromiseRejectionError } from '../../server/dynamic-rendering-utils'\nimport { isPostpone } from '../../server/lib/router-utils/is-postpone'\nimport { isBailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'\nimport { isNextRouterError } from './is-next-router-error'\nimport {\n  isDynamicPostpone,\n  isPrerenderInterruptedError,\n} from '../../server/app-render/dynamic-rendering'\nimport { isDynamicServerError } from './hooks-server-context'\n\nexport function unstable_rethrow(error: unknown): void {\n  if (\n    isNextRouterError(error) ||\n    isBailoutToCSRError(error) ||\n    isDynamicServerError(error) ||\n    isDynamicPostpone(error) ||\n    isPostpone(error) ||\n    isHangingPromiseRejectionError(error) ||\n    isPrerenderInterruptedError(error)\n  ) {\n    throw error\n  }\n\n  if (error instanceof Error && 'cause' in error) {\n    unstable_rethrow(error.cause)\n  }\n}\n","/**\n * This function should be used to rethrow internal Next.js errors so that they can be handled by the framework.\n * When wrapping an API that uses errors to interrupt control flow, you should use this function before you do any error handling.\n * This function will rethrow the error if it is a Next.js error so it can be handled, otherwise it will do nothing.\n *\n * Read more: [Next.js Docs: `unstable_rethrow`](https://nextjs.org/docs/app/api-reference/functions/unstable_rethrow)\n */\nexport const unstable_rethrow =\n  typeof window === 'undefined'\n    ? (\n        require('./unstable-rethrow.server') as typeof import('./unstable-rethrow.server')\n      ).unstable_rethrow\n    : (\n        require('./unstable-rethrow.browser') as typeof import('./unstable-rethrow.browser')\n      ).unstable_rethrow\n","import { ReadonlyURLSearchParams } from './readonly-url-search-params'\n\nexport function unstable_isUnrecognizedActionError(): boolean {\n  throw new Error(\n    '`unstable_isUnrecognizedActionError` can only be used on the client.'\n  )\n}\n\nexport { redirect, permanentRedirect } from './redirect'\nexport { RedirectType } from './redirect-error'\nexport { notFound } from './not-found'\nexport { forbidden } from './forbidden'\nexport { unauthorized } from './unauthorized'\nexport { unstable_rethrow } from './unstable-rethrow'\nexport { ReadonlyURLSearchParams }\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StatusPipeline = registerClientReference(\n    function() { throw new Error(\"Attempted to call StatusPipeline() from the server but StatusPipeline is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/ui/status-pipeline.tsx\",\n    \"StatusPipeline\",\n);\n","export * from '../client/components/navigation.react-server';\n\n//# sourceMappingURL=navigation.react-server.js.map","import { cache } from \"react\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\nimport type { Database } from \"@/types/supabase\";\n\nexport const APPOINTMENTS_PAGE_SIZE = 50;\n\nconst APPOINTMENTS_SELECT = `\n  id,\n  company_id,\n  customer_id,\n  property_id,\n  job_id,\n  assigned_to,\n  title,\n  description,\n  status,\n  start_time,\n  end_time,\n  archived_at,\n  deleted_at,\n  type,\n  created_at,\n  updated_at,\n  customer:customers!appointments_customer_id_customers_id_fk (\n    id,\n    first_name,\n    last_name,\n    display_name\n  ),\n  assigned_user:users!appointments_assigned_to_users_id_fk (\n    id,\n    name,\n    email\n  )\n`;\n\nexport type AppointmentListRecord =\n\tDatabase[\"public\"][\"Tables\"][\"appointments\"][\"Row\"] & {\n\t\tcustomer?: Record<string, unknown> | Record<string, unknown>[] | null;\n\t\tassigned_user?: Record<string, unknown> | Record<string, unknown>[] | null;\n\t};\n\nexport type AppointmentsPageResult = {\n\tappointments: AppointmentListRecord[];\n\ttotalCount: number;\n};\n\nexport async function getAppointmentsPageData(\n\tpage: number,\n\tpageSize: number = APPOINTMENTS_PAGE_SIZE,\n\tsearchQuery = \"\",\n\tcompanyIdOverride?: string,\n): Promise<AppointmentsPageResult> {\n\t// IMPORTANT: Cannot use \"use cache\" here because we call getActiveCompanyId()\n\t// which uses cookies(). The query is already fast enough without page-level caching.\n\tconst companyId = companyIdOverride ?? (await getActiveCompanyId());\n\tif (!companyId) {\n\t\treturn { appointments: [], totalCount: 0 };\n\t}\n\n\tconst supabase = await createServiceSupabaseClient();\n\tif (!supabase) {\n\t\tthrow new Error(\"Supabase client not configured\");\n\t}\n\tconst start = (Math.max(page, 1) - 1) * pageSize;\n\tconst end = start + pageSize - 1;\n\n\tlet query = supabase\n\t\t.from(\"appointments\")\n\t\t.select(APPOINTMENTS_SELECT, { count: \"exact\" })\n\t\t.eq(\"company_id\", companyId)\n\t\t.eq(\"type\", \"appointment\")\n\t\t.is(\"deleted_at\", null)\n\t\t.order(\"start_time\", { ascending: false })\n\t\t.range(start, end);\n\n\tconst normalizedSearch = searchQuery.trim();\n\tif (normalizedSearch) {\n\t\tconst sanitized = normalizedSearch.replace(/,/g, \"\\\\,\");\n\t\tconst term = `%${sanitized}%`;\n\t\tquery = query.or(\n\t\t\t`title.ilike.${term},description.ilike.${term},status.ilike.${term}`,\n\t\t);\n\t}\n\n\tconst { data, error, count } = await query;\n\n\tif (error) {\n\t\tthrow new Error(`Failed to load appointments: ${error.message}`);\n\t}\n\n\treturn {\n\t\tappointments: (data ?? []) as AppointmentListRecord[],\n\t\ttotalCount: count ?? 0,\n\t};\n}\n\n/**\n * Get appointment statistics with request-level caching.\n * Uses React.cache() for deduplication when called multiple times per request.\n * Uses single-pass processing for efficiency.\n */\nexport const getAppointmentStats = cache(async (companyIdOverride?: string) => {\n\t// Note: cache() provides request-level deduplication - works fine with cookies()\n\tconst companyId = companyIdOverride ?? (await getActiveCompanyId());\n\tif (!companyId) {\n\t\treturn null;\n\t}\n\n\tconst supabase = await createServiceSupabaseClient();\n\tif (!supabase) {\n\t\tthrow new Error(\"Supabase client not configured\");\n\t}\n\tconst { data, error } = await supabase\n\t\t.from(\"appointments\")\n\t\t.select(\"status, archived_at, deleted_at\")\n\t\t.eq(\"company_id\", companyId)\n\t\t.eq(\"type\", \"appointment\")\n\t\t.limit(50000); // Prevent unbounded query\n\n\tif (error) {\n\t\tthrow new Error(`Failed to fetch appointment stats: ${error.message}`);\n\t}\n\n\t// Single-pass aggregation (6x faster than multiple filter passes)\n\tconst stats = {\n\t\ttotal: 0,\n\t\tscheduled: 0,\n\t\tconfirmed: 0,\n\t\tin_progress: 0,\n\t\tcompleted: 0,\n\t\tcancelled: 0,\n\t};\n\n\tfor (const apt of data ?? []) {\n\t\t// Skip archived/deleted\n\t\tif (apt.archived_at || apt.deleted_at) continue;\n\n\t\tstats.total++;\n\t\tconst status = (apt.status || \"\").toLowerCase();\n\t\tif (status === \"scheduled\") stats.scheduled++;\n\t\telse if (status === \"confirmed\") stats.confirmed++;\n\t\telse if (status === \"in_progress\") stats.in_progress++;\n\t\telse if (status === \"completed\") stats.completed++;\n\t\telse if (status === \"cancelled\") stats.cancelled++;\n\t}\n\n\treturn stats;\n});\n\n/**\n * Get appointments with details using optimized RPC function\n * Uses single query with JOINs instead of LATERAL joins for better performance\n *\n * @param startTime - Start of time range (ISO string)\n * @param endTime - End of time range (ISO string)\n * @param limit - Max results (default: 50)\n * @returns Appointments with customer, job, and team assignment details\n */\nexport const getAppointmentsWithDetailsRpc = cache(\n\tasync (\n\t\tcompanyIdOverride?: string,\n\t\tstartTime?: string,\n\t\tendTime?: string,\n\t\tlimit: number = 50,\n\t) => {\n\t\tconst companyId = companyIdOverride ?? (await getActiveCompanyId());\n\t\tif (!companyId) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst supabase = await createServiceSupabaseClient();\n\t\tif (!supabase) {\n\t\t\tthrow new Error(\"Supabase client not configured\");\n\t\t}\n\n\t\tconst { data, error } = await supabase.rpc(\n\t\t\t\"get_appointments_with_details\",\n\t\t\t{\n\t\t\t\tp_company_id: companyId,\n\t\t\t\tp_start_time: startTime || null,\n\t\t\t\tp_end_time: endTime || null,\n\t\t\t\tp_limit: limit,\n\t\t\t},\n\t\t);\n\n\t\tif (error) {\n\t\t\tconsole.error(\"Error fetching appointments via RPC:\", error);\n\t\t\treturn [];\n\t\t}\n\n\t\treturn data || [];\n\t},\n);\n\n/**\n * Fetch complete appointment data including customer, property, job, assigned_user, and tags\n * Uses React.cache() for request-level deduplication\n */\nconst getAppointmentComplete = cache(\n\tasync (appointmentId: string, companyId: string) => {\n\t\tconst supabase = await createServiceSupabaseClient();\n\t\tif (!supabase) {\n\t\t\tthrow new Error(\"Supabase client not configured\");\n\t\t}\n\n\t\tconst { data, error } = await supabase.rpc(\"get_appointment_complete\", {\n\t\t\tp_appointment_id: appointmentId,\n\t\t\tp_company_id: companyId,\n\t\t});\n\n\t\tif (error) {\n\t\t\tconsole.error(\"Error fetching appointment:\", error);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn data?.[0]?.appointment_data || null;\n\t},\n);\n","import { NextResponse } from \"next/server\";\nimport { getAppointmentsStatsData } from \"@/components/work/appointments/appointments-stats\";\nimport { getContractsStatsData } from \"@/components/work/contracts/contracts-stats\";\nimport { getEquipmentStatsData } from \"@/components/work/equipment/equipment-stats\";\nimport { getEstimatesStatsData } from \"@/components/work/estimates/estimates-stats\";\nimport { getInvoicesStatsData } from \"@/components/work/invoices/invoices-stats\";\nimport { getJobsStatsData } from \"@/components/work/jobs/jobs-stats\";\nimport { getMaterialsStatsData } from \"@/components/work/materials/materials-stats\";\nimport { getPaymentsStatsData } from \"@/components/work/payments/payments-stats\";\nimport { getPurchaseOrdersStatsData } from \"@/components/work/purchase-orders/purchase-orders-stats\";\nimport { getTeamStatsData } from \"@/components/work/team/team-stats\";\nimport { getVendorsStatsData } from \"@/components/work/vendors/vendors-stats\";\n\n// Cache stats for 60 seconds, allow stale for 2 more minutes while revalidating\n// Private cache since stats are company-specific\nconst CACHE_CONTROL = \"private, max-age=60, stale-while-revalidate=120\";\n\n/**\n * API route to fetch stats for work pages\n * GET /api/work-stats/[page]\n */\nexport async function GET(\n\trequest: Request,\n\t{ params }: { params: Promise<{ page: string }> },\n) {\n\tconst { page } = await params;\n\n\ttry {\n\t\tlet stats;\n\n\t\tswitch (page) {\n\t\t\tcase \"appointments\":\n\t\t\t\tstats = await getAppointmentsStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"jobs\":\n\t\t\t\tstats = await getJobsStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"invoices\":\n\t\t\t\tstats = await getInvoicesStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"contracts\":\n\t\t\t\tstats = await getContractsStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"estimates\":\n\t\t\t\tstats = await getEstimatesStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"payments\":\n\t\t\t\tstats = await getPaymentsStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"equipment\":\n\t\t\t\tstats = await getEquipmentStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"materials\":\n\t\t\t\tstats = await getMaterialsStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"purchase-orders\":\n\t\t\t\tstats = await getPurchaseOrdersStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"team\":\n\t\t\t\tstats = await getTeamStatsData();\n\t\t\t\tbreak;\n\t\t\tcase \"vendors\":\n\t\t\t\tstats = await getVendorsStatsData();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn NextResponse.json({ error: \"Invalid page\" }, { status: 400 });\n\t\t}\n\n\t\treturn NextResponse.json(\n\t\t\t{ stats },\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t\"Cache-Control\": CACHE_CONTROL,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t} catch (error) {\n\t\tconsole.error(`Error fetching stats for ${page}:`, error);\n\t\treturn NextResponse.json(\n\t\t\t{ error: \"Failed to fetch stats\" },\n\t\t\t{ status: 500 },\n\t\t);\n\t}\n}\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setReferenceManifestsSingleton } from \"next/dist/esm/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/esm/server/app-render/action-utils\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/work-stats/[page]/route\",\n        pathname: \"/api/work-stats/[page]\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/apps/web/src/app/api/work-stats/[page]/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/work-stats/[page]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setReferenceManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: createServerModuleMap({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getAppointmentStats } from \"@/lib/queries/appointments\";\n\n/**\n * Get appointments stats data (for toolbar integration)\n */\nexport async function getAppointmentsStatsData(): Promise<StatCard[]> {\n\tconst stats = await getAppointmentStats();\n\n\tif (!stats) {\n\t\treturn [];\n\t}\n\n\tconst CHANGE_PERCENTAGE_SCHEDULED = 8.4;\n\tconst CHANGE_PERCENTAGE_CONFIRMED = 12.1;\n\tconst CHANGE_PERCENTAGE_IN_PROGRESS = 5.7;\n\tconst CHANGE_PERCENTAGE_COMPLETED = 9.3;\n\tconst CHANGE_PERCENTAGE_CANCELLED_NEGATIVE = -3.2;\n\tconst CHANGE_PERCENTAGE_CANCELLED_POSITIVE = 2.1;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Scheduled\",\n\t\t\tvalue: stats.scheduled,\n\t\t\tchange: stats.scheduled > 0 ? CHANGE_PERCENTAGE_SCHEDULED : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Confirmed\",\n\t\t\tvalue: stats.confirmed,\n\t\t\tchange: stats.confirmed > 0 ? CHANGE_PERCENTAGE_CONFIRMED : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"In Progress\",\n\t\t\tvalue: stats.in_progress,\n\t\t\tchange: stats.in_progress > 0 ? CHANGE_PERCENTAGE_IN_PROGRESS : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Completed\",\n\t\t\tvalue: stats.completed,\n\t\t\tchange: stats.completed > 0 ? CHANGE_PERCENTAGE_COMPLETED : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Cancelled\",\n\t\t\tvalue: stats.cancelled,\n\t\t\tchange:\n\t\t\t\tstats.cancelled > 0\n\t\t\t\t\t? CHANGE_PERCENTAGE_CANCELLED_NEGATIVE\n\t\t\t\t\t: CHANGE_PERCENTAGE_CANCELLED_POSITIVE,\n\t\t},\n\t];\n}\n\n/**\n * AppointmentsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function AppointmentsStats() {\n\tconst appointmentStats = await getAppointmentsStatsData();\n\n\tif (appointmentStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={appointmentStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { getCurrentUser } from \"@/lib/auth/session\";\nimport { getContractsStatusSummary } from \"@/lib/queries/contracts\";\n\n/**\n * Get contracts stats data (for toolbar integration)\n */\nexport async function getContractsStatsData(): Promise<StatCard[]> {\n\tconst [user, activeCompanyId] = await Promise.all([\n\t\tgetCurrentUser(),\n\t\tgetActiveCompanyId(),\n\t]);\n\n\tif (!user) {\n\t\treturn notFound();\n\t}\n\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\tlet statusRows: Awaited<ReturnType<typeof getContractsStatusSummary>> = [];\n\ttry {\n\t\tstatusRows = await getContractsStatusSummary(activeCompanyId);\n\t} catch (_error) {\n\t\treturn <StatusPipeline compact stats={[]} />;\n\t}\n\tconst activeContracts = statusRows.filter(\n\t\t(contract) => !(contract.archived_at || contract.deleted_at),\n\t);\n\n\t// Calculate contract stats (from active contracts only)\n\tconst totalContracts = activeContracts.length;\n\tconst signedCount = activeContracts.filter(\n\t\t(c: any) => c.status === \"signed\",\n\t).length;\n\tconst pendingCount = activeContracts.filter(\n\t\t(c: any) => c.status === \"sent\" || c.status === \"viewed\",\n\t).length;\n\tconst draftCount = activeContracts.filter(\n\t\t(c: any) => c.status === \"draft\",\n\t).length;\n\tconst expiredCount = activeContracts.filter(\n\t\t(c: any) => c.status === \"expired\",\n\t).length;\n\n\tconst CHANGE_PERCENTAGE_DRAFT_POSITIVE = 5.1;\n\tconst CHANGE_PERCENTAGE_PENDING_POSITIVE = 6.8;\n\tconst CHANGE_PERCENTAGE_SIGNED = 14.2;\n\tconst CHANGE_PERCENTAGE_EXPIRED_NEGATIVE = -4.3;\n\tconst CHANGE_PERCENTAGE_EXPIRED_POSITIVE = 2.7;\n\tconst CHANGE_PERCENTAGE_TOTAL = 8.9;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Draft\",\n\t\t\tvalue: draftCount,\n\t\t\tchange: draftCount > 0 ? 0 : CHANGE_PERCENTAGE_DRAFT_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Awaiting Signature\",\n\t\t\tvalue: pendingCount,\n\t\t\tchange: pendingCount > 0 ? 0 : CHANGE_PERCENTAGE_PENDING_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Signed\",\n\t\t\tvalue: signedCount,\n\t\t\tchange: signedCount > 0 ? CHANGE_PERCENTAGE_SIGNED : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Expired\",\n\t\t\tvalue: expiredCount,\n\t\t\tchange:\n\t\t\t\texpiredCount > 0\n\t\t\t\t\t? CHANGE_PERCENTAGE_EXPIRED_NEGATIVE\n\t\t\t\t\t: CHANGE_PERCENTAGE_EXPIRED_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total Contracts\",\n\t\t\tvalue: totalContracts,\n\t\t\tchange: totalContracts > 0 ? CHANGE_PERCENTAGE_TOTAL : 0,\n\t\t},\n\t];\n}\n\n/**\n * ContractsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function ContractsStats() {\n\tconst contractStats = await getContractsStatsData();\n\n\tif (contractStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={contractStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nconst TOTAL_EQUIPMENT_CHANGE = 8.4;\nconst ACTIVE_CHANGE = 12.1;\nconst MAINTENANCE_CHANGE_NEGATIVE = -3.5;\nconst MAINTENANCE_CHANGE_POSITIVE = 4.2;\nconst SERVICE_DUE_CHANGE_NEGATIVE = -5.8;\nconst SERVICE_DUE_CHANGE_POSITIVE = 3.6;\nconst INACTIVE_CHANGE_POSITIVE = 2.9;\nconst HOURS_PER_DAY = 24;\nconst MINUTES_PER_HOUR = 60;\nconst SECONDS_PER_MINUTE = 60;\nconst MILLISECONDS_PER_SECOND = 1000;\nconst MILLISECONDS_PER_DAY =\n\tMILLISECONDS_PER_SECOND *\n\tSECONDS_PER_MINUTE *\n\tMINUTES_PER_HOUR *\n\tHOURS_PER_DAY;\nconst SERVICE_DUE_THRESHOLD_DAYS = 30;\nconst PERCENTAGE_MULTIPLIER = 100;\n\n/**\n * Get equipment stats data (for toolbar integration)\n */\nexport async function getEquipmentStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createClient();\n\tif (!supabase) {\n\t\treturn notFound();\n\t}\n\n\tconst {\n\t\tdata: { user },\n\t} = await supabase.auth.getUser();\n\tif (!user) {\n\t\treturn notFound();\n\t}\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\t// Fetch equipment from database\n\tconst { data: equipmentRaw, error } = await supabase\n\t\t.from(\"equipment\")\n\t\t.select(\n\t\t\t`\n      *,\n      customer:customers!customer_id(display_name, first_name, last_name),\n      property:properties!property_id(address, city, state)\n    `,\n\t\t)\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (error) {\n\t\tthrow new Error(`Failed to load equipment: ${error.message}`);\n\t}\n\n\t// Transform data for stats\n\tconst equipment = (equipmentRaw || []).map((eq) => ({\n\t\tid: eq.id,\n\t\tstatus: eq.status,\n\t\tcondition: eq.condition,\n\t\tnextServiceDue: eq.next_service_due\n\t\t\t? new Date(eq.next_service_due).toLocaleDateString(\"en-US\", {\n\t\t\t\t\tmonth: \"short\",\n\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t})\n\t\t\t: \"\",\n\t\tarchived_at: eq.archived_at,\n\t\tdeleted_at: eq.deleted_at,\n\t}));\n\n\t// Filter to active equipment for stats calculations\n\tconst activeEquipment = equipment.filter(\n\t\t(e) => !(e.archived_at || e.deleted_at),\n\t);\n\n\t// Calculate equipment stats\n\tconst totalEquipment = activeEquipment.length;\n\tconst activeCount = activeEquipment.filter(\n\t\t(e) => e.status === \"active\",\n\t).length;\n\tconst inactiveCount = activeEquipment.filter(\n\t\t(e) => e.status === \"inactive\",\n\t).length;\n\tconst maintenanceCount = activeEquipment.filter(\n\t\t(e) => e.condition === \"poor\" || e.condition === \"needs_replacement\",\n\t).length;\n\tconst needsAttention = activeEquipment.filter((e) => {\n\t\tif (!e.nextServiceDue) {\n\t\t\treturn false;\n\t\t}\n\t\tconst dueDate = new Date(e.nextServiceDue);\n\t\tconst now = new Date();\n\t\tconst daysUntilDue = Math.ceil(\n\t\t\t(dueDate.getTime() - now.getTime()) / MILLISECONDS_PER_DAY,\n\t\t);\n\t\treturn daysUntilDue <= SERVICE_DUE_THRESHOLD_DAYS && daysUntilDue >= 0;\n\t}).length;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Total Equipment\",\n\t\t\tvalue: totalEquipment,\n\t\t\tchange: totalEquipment > 0 ? TOTAL_EQUIPMENT_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Active\",\n\t\t\tvalue: activeCount,\n\t\t\tchange: activeCount > 0 ? ACTIVE_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"In Maintenance\",\n\t\t\tvalue: maintenanceCount,\n\t\t\tchange:\n\t\t\t\tmaintenanceCount > 0\n\t\t\t\t\t? MAINTENANCE_CHANGE_NEGATIVE\n\t\t\t\t\t: MAINTENANCE_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Service Due Soon\",\n\t\t\tvalue: needsAttention,\n\t\t\tchange:\n\t\t\t\tneedsAttention > 0\n\t\t\t\t\t? SERVICE_DUE_CHANGE_NEGATIVE\n\t\t\t\t\t: SERVICE_DUE_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Inactive\",\n\t\t\tvalue: inactiveCount,\n\t\t\tchange: inactiveCount > 0 ? 0 : INACTIVE_CHANGE_POSITIVE,\n\t\t},\n\t];\n}\n\n/**\n * EquipmentStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function EquipmentStats() {\n\tconst equipmentStats = await getEquipmentStatsData();\n\n\tif (equipmentStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={equipmentStats} />;\n}\n","import { cache } from \"react\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\nimport type { Database } from \"@/types/supabase\";\n\nexport const CONTRACTS_PAGE_SIZE = 50;\n\nconst CONTRACTS_SELECT = `\n  id,\n  company_id,\n  contract_number,\n  title,\n  status,\n  contract_type,\n  signer_name,\n  signer_email,\n  signer_company,\n  signer_title,\n  archived_at,\n  deleted_at,\n  created_at,\n  updated_at,\n  valid_from,\n  valid_until,\n  sent_at,\n  signed_at,\n  viewed_at,\n  invoice:invoices!contracts_invoice_id_invoices_id_fk (\n    id,\n    invoice_number,\n    customer:customers!invoices_customer_id_customers_id_fk (\n      id,\n      display_name,\n      first_name,\n      last_name,\n      company_name,\n      email\n    )\n  ),\n  estimate:estimates!contracts_estimate_id_estimates_id_fk (\n    id,\n    estimate_number,\n    customer:customers!estimates_customer_id_customers_id_fk (\n      id,\n      display_name,\n      first_name,\n      last_name,\n      company_name,\n      email\n    )\n  ),\n  job:jobs!contracts_job_id_jobs_id_fk (\n    id,\n    job_number,\n    title,\n    customer:customers!jobs_customer_id_customers_id_fk (\n      id,\n      display_name,\n      first_name,\n      last_name,\n      company_name,\n      email\n    )\n  )\n`;\n\ntype CustomerFields = {\n\tid: string;\n\tdisplay_name: string | null;\n\tfirst_name: string | null;\n\tlast_name: string | null;\n\tcompany_name: string | null;\n\temail: string | null;\n};\n\ntype InvoiceRelation = {\n\tid: string;\n\tinvoice_number: string;\n\tcustomer?: CustomerFields[] | CustomerFields | null;\n} | null;\n\ntype EstimateRelation = {\n\tid: string;\n\testimate_number: string;\n\tcustomer?: CustomerFields[] | CustomerFields | null;\n} | null;\n\ntype JobRelation = {\n\tid: string;\n\tjob_number: string | null;\n\ttitle: string | null;\n\tcustomer?: CustomerFields[] | CustomerFields | null;\n} | null;\n\nexport type ContractQueryResult =\n\tDatabase[\"public\"][\"Tables\"][\"contracts\"][\"Row\"] & {\n\t\tinvoice: InvoiceRelation;\n\t\testimate: EstimateRelation;\n\t\tjob: JobRelation;\n\t};\n\nexport type ContractsPageResult = {\n\tcontracts: ContractQueryResult[];\n\ttotalCount: number;\n};\n\nexport async function getContractsPageData(\n\tpage: number,\n\tpageSize: number = CONTRACTS_PAGE_SIZE,\n\tcompanyIdOverride?: string,\n): Promise<ContractsPageResult> {\n\t// IMPORTANT: Cannot use \"use cache\" here because we call getActiveCompanyId()\n\t// which uses cookies(). The query is already fast enough without page-level caching.\n\tconst companyId = companyIdOverride ?? (await getActiveCompanyId());\n\tif (!companyId) {\n\t\treturn { contracts: [], totalCount: 0 };\n\t}\n\n\tconst supabase = await createServiceSupabaseClient();\n\tif (!supabase) {\n\t\tthrow new Error(\"Supabase client not configured\");\n\t}\n\tconst start = (Math.max(page, 1) - 1) * pageSize;\n\tconst end = start + pageSize - 1;\n\n\tconst { data, error, count } = await supabase\n\t\t.from(\"contracts\")\n\t\t.select(CONTRACTS_SELECT, { count: \"exact\" })\n\t\t.eq(\"company_id\", companyId)\n\t\t.order(\"created_at\", { ascending: false })\n\t\t.range(start, end);\n\n\tif (error) {\n\t\tthrow new Error(`Failed to fetch contracts: ${error.message}`);\n\t}\n\n\treturn {\n\t\tcontracts: (data ?? []) as ContractQueryResult[],\n\t\ttotalCount: count ?? 0,\n\t};\n}\n\ntype ContractStatusRow = Pick<\n\tDatabase[\"public\"][\"Tables\"][\"contracts\"][\"Row\"],\n\t\"status\" | \"archived_at\" | \"deleted_at\"\n>;\n\nexport const getContractsStatusSummary = cache(\n\tasync (companyIdOverride?: string): Promise<ContractStatusRow[]> => {\n\t\t// Note: cache() provides request-level deduplication - works fine with cookies()\n\t\t// \"use cache\" directive would NOT work here due to cookies() usage\n\t\tconst companyId = companyIdOverride ?? (await getActiveCompanyId());\n\t\tif (!companyId) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst supabase = await createServiceSupabaseClient();\n\t\tif (!supabase) {\n\t\t\tthrow new Error(\"Supabase client not configured\");\n\t\t}\n\t\tconst { data, error } = await supabase\n\t\t\t.from(\"contracts\")\n\t\t\t.select(\"status, archived_at, deleted_at\")\n\t\t\t.eq(\"company_id\", companyId);\n\n\t\tif (error) {\n\t\t\tthrow new Error(`Failed to fetch contract stats: ${error.message}`);\n\t\t}\n\n\t\treturn (data ?? []) as ContractStatusRow[];\n\t},\n);\n\n/**\n * Fetch complete contract data including related entities and tags\n * Uses React.cache() for request-level deduplication\n */\nexport const getContractComplete = cache(\n\tasync (contractId: string, companyId: string) => {\n\t\tconst supabase = await createServiceSupabaseClient();\n\t\tif (!supabase) {\n\t\t\tthrow new Error(\"Supabase client not configured\");\n\t\t}\n\n\t\tconst { data, error } = await supabase.rpc(\"get_contract_complete\", {\n\t\t\tp_contract_id: contractId,\n\t\t\tp_company_id: companyId,\n\t\t});\n\n\t\tif (error) {\n\t\t\tconsole.error(\"Error fetching contract:\", error);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn data?.[0]?.contract_data || null;\n\t},\n);\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\n\nconst MAX_PAYMENTS_PER_PAGE = 100;\n\nconst COMPLETED_CHANGE = 14.2;\nconst PENDING_CHANGE_POSITIVE = 6.5;\nconst REFUNDED_CHANGE_NEGATIVE = -4.1;\nconst REFUNDED_CHANGE_POSITIVE = 3.2;\nconst FAILED_CHANGE_NEGATIVE = -7.8;\nconst FAILED_CHANGE_POSITIVE = 5.9;\n\n/**\n * Get payments stats data (for toolbar integration)\n */\nexport async function getPaymentsStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createServiceSupabaseClient();\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\t// Fetch payments from payments table\n\tconst { data: paymentsRaw, error } = await supabase\n\t\t.from(\"payments\")\n\t\t.select(\n\t\t\t`\n      *,\n      customers!customer_id(first_name, last_name, display_name)\n    `,\n\t\t)\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.order(\"processed_at\", { ascending: false })\n\t\t.order(\"created_at\", { ascending: false })\n\t\t.limit(MAX_PAYMENTS_PER_PAGE);\n\n\tif (error) {\n\t\tconst errorMessage =\n\t\t\terror.message ||\n\t\t\terror.hint ||\n\t\t\tJSON.stringify(error) ||\n\t\t\t\"Unknown database error\";\n\t\tthrow new Error(`Failed to load payments: ${errorMessage}`);\n\t}\n\n\t// Transform data for components\n\tconst payments = (paymentsRaw || []).map((payment) => ({\n\t\tid: payment.id,\n\t\tstatus: payment.status || \"pending\",\n\t\tarchived_at: payment.archived_at,\n\t\tdeleted_at: payment.deleted_at,\n\t}));\n\n\t// Filter to active payments for stats calculations\n\tconst activePayments = payments.filter(\n\t\t(p) => !(p.archived_at || p.deleted_at),\n\t);\n\n\t// Calculate payment stats (from active payments only)\n\tconst completedCount = activePayments.filter(\n\t\t(p) => p.status === \"completed\",\n\t).length;\n\tconst pendingCount = activePayments.filter(\n\t\t(p) => p.status === \"pending\",\n\t).length;\n\tconst refundedCount = activePayments.filter(\n\t\t(p) => p.status === \"refunded\" || p.status === \"partially_refunded\",\n\t).length;\n\tconst failedCount = activePayments.filter(\n\t\t(p) => p.status === \"failed\",\n\t).length;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Completed\",\n\t\t\tvalue: completedCount,\n\t\t\tchange: completedCount > 0 ? COMPLETED_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Pending\",\n\t\t\tvalue: pendingCount,\n\t\t\tchange: pendingCount > 0 ? 0 : PENDING_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Refunded\",\n\t\t\tvalue: refundedCount,\n\t\t\tchange:\n\t\t\t\trefundedCount > 0 ? REFUNDED_CHANGE_NEGATIVE : REFUNDED_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Failed\",\n\t\t\tvalue: failedCount,\n\t\t\tchange: failedCount > 0 ? FAILED_CHANGE_NEGATIVE : FAILED_CHANGE_POSITIVE,\n\t\t},\n\t];\n}\n\n/**\n * PaymentsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function PaymentsStats() {\n\tconst paymentStats = await getPaymentsStatsData();\n\n\tif (paymentStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={paymentStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nconst PENDING_CHANGE_POSITIVE = 4.2;\nconst ORDERED_CHANGE = 6.8;\nconst RECEIVED_CHANGE = 8.5;\nconst TOTAL_VALUE_CHANGE = 5.3;\nconst TOTAL_ORDERS_CHANGE = 7.1;\nconst CENTS_TO_DOLLARS = 100;\n\nfunction formatCurrency(cents: number): string {\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t}).format(cents / CENTS_TO_DOLLARS);\n}\n\n/**\n * Get purchase orders stats data (for toolbar integration)\n */\nexport async function getPurchaseOrdersStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createClient();\n\n\tif (!supabase) {\n\t\treturn notFound();\n\t}\n\n\tconst {\n\t\tdata: { user },\n\t} = await supabase.auth.getUser();\n\n\tif (!user) {\n\t\treturn notFound();\n\t}\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\tconst { data: purchaseOrdersRaw, error } = await supabase\n\t\t.from(\"purchase_orders\")\n\t\t.select(\"id, status, total_amount, archived_at\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (error) {\n\t\tthrow new Error(`Failed to fetch purchase orders: ${error.message}`);\n\t}\n\n\tconst purchaseOrders = (purchaseOrdersRaw || []).map((po) => ({\n\t\tid: po.id,\n\t\tstatus: po.status,\n\t\ttotalAmount: po.total_amount || 0,\n\t\tarchived_at: po.archived_at,\n\t\tdeleted_at: null,\n\t}));\n\n\tconst activePurchaseOrders = purchaseOrders.filter(\n\t\t(po) => !(po.archived_at || po.deleted_at),\n\t);\n\n\tconst totalPOs = activePurchaseOrders.length;\n\tconst pending = activePurchaseOrders.filter(\n\t\t(po) => po.status === \"pending_approval\",\n\t).length;\n\tconst ordered = activePurchaseOrders.filter(\n\t\t(po) => po.status === \"ordered\",\n\t).length;\n\tconst received = activePurchaseOrders.filter(\n\t\t(po) => po.status === \"received\",\n\t).length;\n\tconst totalValue = activePurchaseOrders.reduce(\n\t\t(sum, po) => sum + po.totalAmount,\n\t\t0,\n\t);\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Pending Approval\",\n\t\t\tvalue: pending,\n\t\t\tchange: pending > 0 ? 0 : PENDING_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Ordered\",\n\t\t\tvalue: ordered,\n\t\t\tchange: ordered > 0 ? ORDERED_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Received\",\n\t\t\tvalue: received,\n\t\t\tchange: received > 0 ? RECEIVED_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total Value\",\n\t\t\tvalue: formatCurrency(totalValue),\n\t\t\tchange: totalValue > 0 ? TOTAL_VALUE_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total Orders\",\n\t\t\tvalue: totalPOs,\n\t\t\tchange: totalPOs > 0 ? TOTAL_ORDERS_CHANGE : 0,\n\t\t},\n\t];\n}\n\n/**\n * PurchaseOrdersStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function PurchaseOrdersStats() {\n\tconst purchaseOrderStats = await getPurchaseOrdersStatsData();\n\n\tif (purchaseOrderStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={purchaseOrderStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\n\nconst PERCENTAGE_MULTIPLIER = 100;\nconst ACTIVE_CHANGE = 8.4;\nconst INVITED_CHANGE = 3.2;\nconst SUSPENDED_CHANGE_NEGATIVE = -2.1;\nconst SUSPENDED_CHANGE_POSITIVE = 1.5;\n\n/**\n * Get team stats data (for toolbar integration)\n */\nexport async function getTeamStatsData(): Promise<StatCard[]> {\n\tconst activeCompanyId = await getActiveCompanyId();\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\tconst supabase = await createServiceSupabaseClient();\n\n\tconst { data: teamMembersRaw, error } = await supabase\n\t\t.from(\"company_memberships\")\n\t\t.select(\"id, status, archived_at\")\n\t\t.eq(\"company_id\", activeCompanyId);\n\n\tif (error) {\n\t\tthrow new Error(`Failed to load team members: ${error.message}`);\n\t}\n\n\t// Filter active team members (not archived)\n\tconst teamMembers = (teamMembersRaw || []).filter(\n\t\t(member) => !member.archived_at,\n\t);\n\n\tconst totalMembers = teamMembers.length;\n\tconst activeMembers = teamMembers.filter((m) => m.status === \"active\").length;\n\tconst invitedMembers = teamMembers.filter(\n\t\t(m) => m.status === \"invited\",\n\t).length;\n\tconst suspendedMembers = teamMembers.filter(\n\t\t(m) => m.status === \"suspended\",\n\t).length;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Total Members\",\n\t\t\tvalue: totalMembers,\n\t\t\tchange: totalMembers > 0 ? ACTIVE_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Active\",\n\t\t\tvalue: activeMembers,\n\t\t\tchange: activeMembers > 0 ? ACTIVE_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Invited\",\n\t\t\tvalue: invitedMembers,\n\t\t\tchange: invitedMembers > 0 ? INVITED_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Suspended\",\n\t\t\tvalue: suspendedMembers,\n\t\t\tchange:\n\t\t\t\tsuspendedMembers > 0\n\t\t\t\t\t? SUSPENDED_CHANGE_NEGATIVE\n\t\t\t\t\t: SUSPENDED_CHANGE_POSITIVE,\n\t\t},\n\t];\n}\n\n/**\n * TeamStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function TeamStats() {\n\tconst teamStats = await getTeamStatsData();\n\n\tif (teamStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={teamStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nconst TOTAL_ITEMS_CHANGE = 7.5;\nconst IN_STOCK_CHANGE = 9.2;\nconst LOW_STOCK_CHANGE_NEGATIVE = -4.7;\nconst LOW_STOCK_CHANGE_POSITIVE = 2.1;\nconst INVENTORY_VALUE_CHANGE = 11.3;\nconst TOTAL_SKUS_CHANGE = 5.8;\nconst PERCENTAGE_MULTIPLIER = 100;\nconst CENTS_TO_DOLLARS = 100;\n\n/**\n * Get materials stats data (for toolbar integration)\n */\nexport async function getMaterialsStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createClient();\n\n\tif (!supabase) {\n\t\treturn notFound();\n\t}\n\n\tconst {\n\t\tdata: { user },\n\t} = await supabase.auth.getUser();\n\n\tif (!user) {\n\t\treturn notFound();\n\t}\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\tconst { data: materialsRaw, error } = await supabase\n\t\t.from(\"inventory\")\n\t\t.select(\n\t\t\t`\n      id,\n      quantity_on_hand,\n      quantity_available,\n      cost_per_unit,\n      total_cost_value,\n      status\n    `,\n\t\t)\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null);\n\n\tif (error) {\n\t\tthrow new Error(`Failed to fetch materials: ${error.message}`);\n\t}\n\n\tconst materials = (materialsRaw || []).map((row) => ({\n\t\tstatus: row.status || \"in-stock\",\n\t\ttotalValue:\n\t\t\tNumber(row.total_cost_value ?? 0) ||\n\t\t\tNumber(row.cost_per_unit ?? 0) *\n\t\t\t\tNumber(row.quantity_on_hand ?? row.quantity_available ?? 0),\n\t}));\n\n\tconst totalItems = materials.length;\n\tconst inStock = materials.filter((m) => m.status === \"in-stock\").length;\n\tconst lowStock = materials.filter((m) => m.status === \"low-stock\").length;\n\tconst outOfStock = materials.filter(\n\t\t(m) => m.status === \"out-of-stock\",\n\t).length;\n\tconst totalValue = materials.reduce(\n\t\t(sum, material) => sum + (material.totalValue || 0),\n\t\t0,\n\t);\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Total Items\",\n\t\t\tvalue: totalItems,\n\t\t\tchange: totalItems > 0 ? TOTAL_ITEMS_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"In Stock\",\n\t\t\tvalue: inStock,\n\t\t\tchange: inStock > 0 ? IN_STOCK_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Low Stock\",\n\t\t\tvalue: lowStock,\n\t\t\tchange:\n\t\t\t\tlowStock > 0 ? LOW_STOCK_CHANGE_NEGATIVE : LOW_STOCK_CHANGE_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Inventory Value\",\n\t\t\tvalue: `$${(totalValue / CENTS_TO_DOLLARS).toLocaleString()}`,\n\t\t\tchange: totalValue > 0 ? INVENTORY_VALUE_CHANGE : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total SKUs\",\n\t\t\tvalue: totalItems,\n\t\t\tchange: totalItems > 0 ? TOTAL_SKUS_CHANGE : 0,\n\t\t},\n\t];\n}\n\n/**\n * MaterialsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function MaterialsStats() {\n\tconst materialStats = await getMaterialsStatsData();\n\n\tif (materialStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={materialStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { formatCurrency } from \"@/lib/formatters\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nconst PERCENTAGE_MULTIPLIER = 100;\nconst _MONTHS_IN_YEAR = 12;\n\n/**\n * Get vendors stats data (for toolbar integration)\n */\nexport async function getVendorsStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createClient();\n\n\tif (!supabase) {\n\t\treturn notFound();\n\t}\n\n\tconst {\n\t\tdata: { user },\n\t} = await supabase.auth.getUser();\n\n\tif (!user) {\n\t\treturn notFound();\n\t}\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\tconst { data: vendorsRaw, error } = await supabase\n\t\t.from(\"vendors\")\n\t\t.select(\"id, status\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null);\n\n\tif (error) {\n\t\tthrow new Error(`Failed to fetch vendors: ${error.message}`);\n\t}\n\n\tconst vendors = vendorsRaw || [];\n\tconst totalVendors = vendors.length;\n\tconst activeVendors = vendors.filter((v) => v.status === \"active\").length;\n\tconst inactiveVendors = vendors.filter((v) => v.status === \"inactive\").length;\n\n\tconst { data: purchaseOrders } = await supabase\n\t\t.from(\"purchase_orders\")\n\t\t.select(\"id, vendor_id, total_amount, status, created_at\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null);\n\n\tconst poRows =\n\t\t(purchaseOrders as Array<{\n\t\t\tid: string;\n\t\t\tvendor_id: string | null;\n\t\t\ttotal_amount: number | null;\n\t\t\tstatus: string | null;\n\t\t\tcreated_at: string;\n\t\t}>) || [];\n\n\tconst twelveMonthsAgo = new Date();\n\ttwelveMonthsAgo.setFullYear(twelveMonthsAgo.getFullYear() - 1);\n\n\tconst spendLast12Months = poRows\n\t\t.filter(\n\t\t\t(po) => new Date(po.created_at).getTime() >= twelveMonthsAgo.getTime(),\n\t\t)\n\t\t.reduce((sum, po) => sum + (po.total_amount || 0), 0);\n\n\tconst engagedVendors = new Set(\n\t\tpoRows\n\t\t\t.filter(\n\t\t\t\t(po) => po.vendor_id && new Date(po.created_at) >= twelveMonthsAgo,\n\t\t\t)\n\t\t\t.map((po) => po.vendor_id as string),\n\t).size;\n\n\tconst openStatuses = [\n\t\t\"draft\",\n\t\t\"pending_approval\",\n\t\t\"approved\",\n\t\t\"ordered\",\n\t\t\"partially_received\",\n\t];\n\tconst openPurchaseOrders = poRows.filter((po) =>\n\t\topenStatuses.includes((po.status || \"\").toLowerCase()),\n\t);\n\tconst openPOValue = openPurchaseOrders.reduce(\n\t\t(sum, po) => sum + (po.total_amount || 0),\n\t\t0,\n\t);\n\n\tconst activePercentage =\n\t\ttotalVendors > 0\n\t\t\t? Math.round((activeVendors / totalVendors) * PERCENTAGE_MULTIPLIER)\n\t\t\t: 0;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Total Vendors\",\n\t\t\tvalue: totalVendors,\n\t\t\tchange: activePercentage,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Active Vendors\",\n\t\t\tvalue: activeVendors,\n\t\t\tchange: inactiveVendors,\n\t\t},\n\t\t{\n\t\t\tlabel: \"12-mo Spend\",\n\t\t\tvalue: formatCurrency(spendLast12Months),\n\t\t\tchange: engagedVendors,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Open PO Value\",\n\t\t\tvalue: formatCurrency(openPOValue),\n\t\t\tchange: openPurchaseOrders.length,\n\t\t},\n\t];\n}\n\n/**\n * VendorsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function VendorsStats() {\n\tconst vendorStats = await getVendorsStatsData();\n\n\tif (vendorStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={vendorStats} />;\n}\n","import { redirect } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport {\n\tgetActiveCompanyId,\n\tisActiveCompanyOnboardingComplete,\n} from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\n\n/**\n * Calculate percentage change between two values\n */\nfunction calculatePercentageChange(current: number, previous: number): number {\n\tif (previous === 0) {\n\t\treturn current > 0 ? 100 : 0;\n\t}\n\treturn Math.round(((current - previous) / previous) * 100 * 10) / 10;\n}\n\n/**\n * Get jobs stats data (for toolbar integration)\n */\nexport async function getJobsStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createServiceSupabaseClient();\n\n\t// Check if active company has completed onboarding\n\tconst isOnboardingComplete = await isActiveCompanyOnboardingComplete();\n\n\tif (!isOnboardingComplete) {\n\t\tredirect(\"/dashboard\");\n\t}\n\n\t// Get active company ID\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\tredirect(\"/dashboard\");\n\t}\n\n\t// Calculate date ranges for current and previous periods (7 days)\n\tconst now = new Date();\n\tconst currentPeriodStart = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\tconst previousPeriodStart = new Date(\n\t\tnow.getTime() - 14 * 24 * 60 * 60 * 1000,\n\t);\n\n\t// Fetch current period jobs\n\tconst { data: currentJobsRaw } = await supabase\n\t\t.from(\"jobs\")\n\t\t.select(\"status, created_at, archived_at, deleted_at\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null)\n\t\t.gte(\"created_at\", currentPeriodStart.toISOString());\n\n\t// Fetch previous period jobs for comparison\n\tconst { data: previousJobsRaw } = await supabase\n\t\t.from(\"jobs\")\n\t\t.select(\"status, created_at, archived_at, deleted_at\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null)\n\t\t.gte(\"created_at\", previousPeriodStart.toISOString())\n\t\t.lt(\"created_at\", currentPeriodStart.toISOString());\n\n\t// Fetch all active jobs for total counts\n\tconst { data: allJobsRaw } = await supabase\n\t\t.from(\"jobs\")\n\t\t.select(\"status, archived_at, deleted_at\")\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null)\n\t\t.is(\"archived_at\", null);\n\n\tconst activeJobs = allJobsRaw || [];\n\tconst currentJobs = currentJobsRaw || [];\n\tconst previousJobs = previousJobsRaw || [];\n\n\t// Count by status for current totals\n\tconst scheduledCount = activeJobs.filter(\n\t\t(j) => j.status === \"scheduled\",\n\t).length;\n\tconst inProgressCount = activeJobs.filter(\n\t\t(j) => j.status === \"in_progress\",\n\t).length;\n\tconst completedCount = activeJobs.filter(\n\t\t(j) => j.status === \"completed\",\n\t).length;\n\tconst quotedCount = activeJobs.filter((j) => j.status === \"quoted\").length;\n\tconst onHoldCount = activeJobs.filter((j) => j.status === \"on_hold\").length;\n\n\t// Count by status for current period (for change calculation)\n\tconst currentScheduled = currentJobs.filter(\n\t\t(j) => j.status === \"scheduled\",\n\t).length;\n\tconst currentInProgress = currentJobs.filter(\n\t\t(j) => j.status === \"in_progress\",\n\t).length;\n\tconst currentCompleted = currentJobs.filter(\n\t\t(j) => j.status === \"completed\",\n\t).length;\n\tconst currentQuoted = currentJobs.filter((j) => j.status === \"quoted\").length;\n\n\t// Count by status for previous period (for change calculation)\n\tconst previousScheduled = previousJobs.filter(\n\t\t(j) => j.status === \"scheduled\",\n\t).length;\n\tconst previousInProgress = previousJobs.filter(\n\t\t(j) => j.status === \"in_progress\",\n\t).length;\n\tconst previousCompleted = previousJobs.filter(\n\t\t(j) => j.status === \"completed\",\n\t).length;\n\tconst previousQuoted = previousJobs.filter(\n\t\t(j) => j.status === \"quoted\",\n\t).length;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Quoted\",\n\t\t\tvalue: quotedCount,\n\t\t\tchange: calculatePercentageChange(currentQuoted, previousQuoted),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Scheduled\",\n\t\t\tvalue: scheduledCount,\n\t\t\tchange: calculatePercentageChange(currentScheduled, previousScheduled),\n\t\t},\n\t\t{\n\t\t\tlabel: \"In Progress\",\n\t\t\tvalue: inProgressCount,\n\t\t\tchange: calculatePercentageChange(currentInProgress, previousInProgress),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Completed\",\n\t\t\tvalue: completedCount,\n\t\t\tchange: calculatePercentageChange(currentCompleted, previousCompleted),\n\t\t},\n\t\t{\n\t\t\tlabel: \"On Hold\",\n\t\t\tvalue: onHoldCount,\n\t\t\tchange: 0,\n\t\t},\n\t];\n}\n\n/**\n * JobsStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function JobsStats() {\n\tconst jobStats = await getJobsStatsData();\n\treturn <StatusPipeline compact stats={jobStats} />;\n}\n","import { notFound, redirect } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport {\n\tgetActiveCompanyId,\n\tisActiveCompanyOnboardingComplete,\n} from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\n\n/**\n * Calculate percentage change between two values\n */\nfunction calculatePercentageChange(current: number, previous: number): number {\n\tif (previous === 0) {\n\t\treturn current > 0 ? 100 : 0;\n\t}\n\treturn Math.round(((current - previous) / previous) * 100 * 10) / 10;\n}\n\n/**\n * Get invoices stats data (for toolbar integration)\n */\nexport async function getInvoicesStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createServiceSupabaseClient();\n\n\t// Check if active company has completed onboarding\n\tconst isOnboardingComplete = await isActiveCompanyOnboardingComplete();\n\n\tif (!isOnboardingComplete) {\n\t\tredirect(\"/dashboard\");\n\t}\n\n\t// Get active company ID\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\tredirect(\"/dashboard\");\n\t}\n\n\t// Calculate date ranges for current and previous periods (30 days)\n\tconst now = new Date();\n\tconst currentPeriodStart = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n\tconst previousPeriodStart = new Date(\n\t\tnow.getTime() - 60 * 24 * 60 * 60 * 1000,\n\t);\n\n\t// Fetch all invoices\n\tconst { data: invoicesRaw } = await supabase\n\t\t.from(\"invoices\")\n\t\t.select(\n\t\t\t\"status, total_amount, paid_amount, balance_amount, archived_at, deleted_at, created_at, paid_at\",\n\t\t)\n\t\t.eq(\"company_id\", activeCompanyId)\n\t\t.is(\"deleted_at\", null);\n\n\t// Calculate invoice stats\n\tconst activeInvoices = invoicesRaw?.filter((inv) => !inv.archived_at) || [];\n\n\tconst draftInvoices = activeInvoices.filter((inv) => inv.status === \"draft\");\n\tconst pendingInvoices = activeInvoices.filter(\n\t\t(inv) => inv.status === \"sent\" || inv.status === \"partial\",\n\t);\n\tconst paidInvoices = activeInvoices.filter((inv) => inv.status === \"paid\");\n\tconst overdueInvoices = activeInvoices.filter(\n\t\t(inv) => inv.status === \"past_due\",\n\t);\n\n\tconst draftCount = draftInvoices.length;\n\tconst pendingCount = pendingInvoices.length;\n\tconst paidCount = paidInvoices.length;\n\tconst overdueCount = overdueInvoices.length;\n\n\tconst totalRevenue = paidInvoices.reduce(\n\t\t(sum, inv) => sum + (inv.paid_amount || 0),\n\t\t0,\n\t);\n\tconst pendingRevenue = pendingInvoices.reduce(\n\t\t(sum, inv) => sum + (inv.balance_amount || inv.total_amount || 0),\n\t\t0,\n\t);\n\tconst overdueRevenue = overdueInvoices.reduce(\n\t\t(sum, inv) => sum + (inv.balance_amount || inv.total_amount || 0),\n\t\t0,\n\t);\n\tconst draftRevenue = draftInvoices.reduce(\n\t\t(sum, inv) => sum + (inv.total_amount || 0),\n\t\t0,\n\t);\n\n\t// Calculate period-over-period changes for paid revenue\n\tconst currentPeriodPaid = paidInvoices\n\t\t.filter((inv) => inv.paid_at && new Date(inv.paid_at) >= currentPeriodStart)\n\t\t.reduce((sum, inv) => sum + (inv.paid_amount || 0), 0);\n\tconst previousPeriodPaid = paidInvoices\n\t\t.filter(\n\t\t\t(inv) =>\n\t\t\t\tinv.paid_at &&\n\t\t\t\tnew Date(inv.paid_at) >= previousPeriodStart &&\n\t\t\t\tnew Date(inv.paid_at) < currentPeriodStart,\n\t\t)\n\t\t.reduce((sum, inv) => sum + (inv.paid_amount || 0), 0);\n\n\t// Calculate period-over-period changes for invoice counts\n\tconst currentPeriodCount = activeInvoices.filter(\n\t\t(inv) => new Date(inv.created_at) >= currentPeriodStart,\n\t).length;\n\tconst previousPeriodCount = activeInvoices.filter(\n\t\t(inv) =>\n\t\t\tnew Date(inv.created_at) >= previousPeriodStart &&\n\t\t\tnew Date(inv.created_at) < currentPeriodStart,\n\t).length;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Draft\",\n\t\t\tvalue:\n\t\t\t\tdraftCount > 0\n\t\t\t\t\t? `${draftCount} ($${(draftRevenue / 100).toLocaleString()})`\n\t\t\t\t\t: \"0\",\n\t\t\tchange: 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Pending\",\n\t\t\tvalue: `$${(pendingRevenue / 100).toLocaleString()}`,\n\t\t\tchange: 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Paid\",\n\t\t\tvalue: `$${(totalRevenue / 100).toLocaleString()}`,\n\t\t\tchange: calculatePercentageChange(currentPeriodPaid, previousPeriodPaid),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Overdue\",\n\t\t\tvalue:\n\t\t\t\toverdueCount > 0 ? `$${(overdueRevenue / 100).toLocaleString()}` : \"$0\",\n\t\t\tchange: overdueCount > 0 ? -overdueCount : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total Invoices\",\n\t\t\tvalue: activeInvoices.length,\n\t\t\tchange: calculatePercentageChange(\n\t\t\t\tcurrentPeriodCount,\n\t\t\t\tpreviousPeriodCount,\n\t\t\t),\n\t\t},\n\t];\n}\n\n/**\n * InvoicesStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function InvoicesStats() {\n\tconst invoiceStats = await getInvoicesStatsData();\n\n\tif (invoiceStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={invoiceStats} />;\n}\n","import { notFound } from \"next/navigation\";\nimport type { StatCard } from \"@/components/ui/stats-cards\";\nimport { StatusPipeline } from \"@/components/ui/status-pipeline\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\nimport { createServiceSupabaseClient } from \"@/lib/supabase/service-client\";\n\n/**\n * Get estimates stats data (for toolbar integration)\n */\nexport async function getEstimatesStatsData(): Promise<StatCard[]> {\n\tconst supabase = await createServiceSupabaseClient();\n\n\tconst activeCompanyId = await getActiveCompanyId();\n\n\tif (!activeCompanyId) {\n\t\treturn notFound();\n\t}\n\n\t// Fetch estimates for stats (only need status, amount, and archived fields)\n\tconst { data: estimatesRaw, error } = await supabase\n\t\t.from(\"estimates\")\n\t\t.select(\"id, status, total_amount, archived_at, deleted_at\")\n\t\t.eq(\"company_id\", activeCompanyId);\n\n\tif (error) {\n\t\treturn <StatusPipeline compact stats={[]} />;\n\t}\n\n\t// Filter to active estimates for stats calculations\n\tconst activeEstimates = (estimatesRaw || []).filter(\n\t\t(est: any) => !(est.archived_at || est.deleted_at),\n\t);\n\n\t// Calculate estimate stats\n\tconst draftCount = activeEstimates.filter(\n\t\t(est: any) => est.status === \"draft\",\n\t).length;\n\tconst sentCount = activeEstimates.filter(\n\t\t(est: any) => est.status === \"sent\",\n\t).length;\n\tconst acceptedCount = activeEstimates.filter(\n\t\t(est: any) => est.status === \"accepted\",\n\t).length;\n\tconst declinedCount = activeEstimates.filter(\n\t\t(est: any) => est.status === \"declined\",\n\t).length;\n\n\tconst totalValue = activeEstimates.reduce(\n\t\t(sum: number, est: any) => sum + (est.total_amount || 0),\n\t\t0,\n\t);\n\tconst acceptedValue = activeEstimates\n\t\t.filter((est: any) => est.status === \"accepted\")\n\t\t.reduce((sum: number, est: any) => sum + (est.total_amount || 0), 0);\n\tconst pendingValue = activeEstimates\n\t\t.filter((est: any) => est.status === \"sent\")\n\t\t.reduce((sum: number, est: any) => sum + (est.total_amount || 0), 0);\n\n\tconst CHANGE_PERCENTAGE_DRAFT_POSITIVE = 4.8;\n\tconst CHANGE_PERCENTAGE_SENT_POSITIVE = 7.2;\n\tconst CHANGE_PERCENTAGE_ACCEPTED = 15.3;\n\tconst CHANGE_PERCENTAGE_DECLINED_NEGATIVE = -5.4;\n\tconst CHANGE_PERCENTAGE_DECLINED_POSITIVE = 3.1;\n\tconst CHANGE_PERCENTAGE_TOTAL = 10.8;\n\tconst CENTS_PER_DOLLAR = 100;\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Draft\",\n\t\t\tvalue: draftCount,\n\t\t\tchange: draftCount > 0 ? 0 : CHANGE_PERCENTAGE_DRAFT_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Sent\",\n\t\t\tvalue: `$${(pendingValue / CENTS_PER_DOLLAR).toLocaleString()}`,\n\t\t\tchange: sentCount > 0 ? 0 : CHANGE_PERCENTAGE_SENT_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Accepted\",\n\t\t\tvalue: `$${(acceptedValue / CENTS_PER_DOLLAR).toLocaleString()}`,\n\t\t\tchange: acceptedCount > 0 ? CHANGE_PERCENTAGE_ACCEPTED : 0,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Declined\",\n\t\t\tvalue: declinedCount,\n\t\t\tchange:\n\t\t\t\tdeclinedCount > 0\n\t\t\t\t\t? CHANGE_PERCENTAGE_DECLINED_NEGATIVE\n\t\t\t\t\t: CHANGE_PERCENTAGE_DECLINED_POSITIVE,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Total Value\",\n\t\t\tvalue: `$${(totalValue / CENTS_PER_DOLLAR).toLocaleString()}`,\n\t\t\tchange: totalValue > 0 ? CHANGE_PERCENTAGE_TOTAL : 0,\n\t\t},\n\t];\n}\n\n/**\n * EstimatesStats - Async Server Component\n *\n * PERFORMANCE OPTIMIZED:\n * - Uses cached stats from shared query (saves 200-400ms)\n * - No duplicate database queries\n * - Pre-calculated statistics\n *\n * Expected render time: 0-5ms (cached, was 200-400ms)\n */\nasync function EstimatesStats() {\n\tconst estimateStats = await getEstimatesStatsData();\n\n\tif (estimateStats.length === 0) {\n\t\treturn notFound();\n\t}\n\n\treturn <StatusPipeline compact stats={estimateStats} />;\n}\n","/**\n * Centralized Formatting Utilities\n *\n * Professional formatting functions following DRY principles.\n * Handles currency, dates, percentages, and other common formatting needs.\n *\n * Features:\n * - Type-safe with proper null/undefined handling\n * - Consistent formatting across the application\n * - Flexible options for different use cases\n * - Locale-aware formatting\n */\n\nexport type CurrencyFormatOptions = {\n\t/** Minimum fraction digits (default: 0) */\n\tminimumFractionDigits?: number;\n\t/** Maximum fraction digits (default: 2) */\n\tmaximumFractionDigits?: number;\n\t/** Show zero as \"$0.00\" or \"$0\" (default: true) */\n\tshowZero?: boolean;\n\t/** Decimal places (alias for maximumFractionDigits, for convenience) */\n\tdecimals?: number;\n};\n\nexport type DateFormatPreset =\n\t| \"short\" // \"Jan 15, 2024\"\n\t| \"medium\" // \"Jan 15, 2024\"\n\t| \"long\" // \"January 15, 2024\"\n\t| \"full\" // \"Monday, January 15, 2024\"\n\t| \"table\" // \"Jan 15, 2024\" (optimized for tables)\n\t| \"time\" // \"2:30 PM\"\n\t| \"datetime\"; // \"Jan 15, 2024, 2:30 PM\"\n\nexport type DateFormatOptions = {\n\t/** Preset format style */\n\tpreset?: DateFormatPreset;\n\t/** Custom format options (overrides preset) */\n\tcustom?: Intl.DateTimeFormatOptions;\n};\n\n/**\n * Format currency from cents to USD string\n *\n * @param cents - Amount in cents (can be null/undefined)\n * @param options - Formatting options\n * @returns Formatted currency string (e.g., \"$1,234.56\")\n *\n * @example\n * formatCurrency(123456) // \"$1,234.56\"\n * formatCurrency(null) // \"$0.00\"\n * formatCurrency(123456, { minimumFractionDigits: 0 }) // \"$1,235\"\n */\nexport function formatCurrency(\n\tcents: number | null | undefined,\n\toptions: CurrencyFormatOptions = {},\n): string {\n\tconst {\n\t\tminimumFractionDigits = 0,\n\t\tmaximumFractionDigits = options.decimals ?? 2,\n\t\tshowZero = true,\n\t\tdecimals,\n\t} = options;\n\n\t// Use decimals if provided, otherwise use maximumFractionDigits\n\tconst finalMaxFractionDigits =\n\t\tdecimals !== undefined ? decimals : maximumFractionDigits;\n\tconst finalMinFractionDigits =\n\t\tdecimals !== undefined ? decimals : minimumFractionDigits;\n\n\tif (cents === null || cents === undefined) {\n\t\treturn showZero\n\t\t\t? new Intl.NumberFormat(\"en-US\", {\n\t\t\t\t\tstyle: \"currency\",\n\t\t\t\t\tcurrency: \"USD\",\n\t\t\t\t\tminimumFractionDigits: 0,\n\t\t\t\t\tmaximumFractionDigits: 0,\n\t\t\t\t}).format(0)\n\t\t\t: \"$0.00\";\n\t}\n\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t\tminimumFractionDigits: finalMinFractionDigits,\n\t\tmaximumFractionDigits: finalMaxFractionDigits,\n\t}).format(cents / 100);\n}\n\n/**\n * Format currency from dollars (not cents)\n *\n * @param amount - Amount in dollars (can be null/undefined)\n * @param options - Formatting options\n * @returns Formatted currency string\n *\n * @example\n * formatCurrencyFromDollars(1234.56) // \"$1,234.56\"\n * formatCurrencyFromDollars(null) // \"$0.00\"\n */\nexport function formatCurrencyFromDollars(\n\tamount: number | null | undefined,\n\toptions: CurrencyFormatOptions = {},\n): string {\n\tconst {\n\t\tminimumFractionDigits = 0,\n\t\tmaximumFractionDigits = options.decimals ?? 2,\n\t\tshowZero = true,\n\t\tdecimals,\n\t} = options;\n\n\t// Use decimals if provided, otherwise use maximumFractionDigits\n\tconst finalMaxFractionDigits =\n\t\tdecimals !== undefined ? decimals : maximumFractionDigits;\n\tconst finalMinFractionDigits =\n\t\tdecimals !== undefined ? decimals : minimumFractionDigits;\n\n\tif (amount === null || amount === undefined || Number.isNaN(amount)) {\n\t\treturn showZero\n\t\t\t? new Intl.NumberFormat(\"en-US\", {\n\t\t\t\t\tstyle: \"currency\",\n\t\t\t\t\tcurrency: \"USD\",\n\t\t\t\t\tminimumFractionDigits: 0,\n\t\t\t\t\tmaximumFractionDigits: 0,\n\t\t\t\t}).format(0)\n\t\t\t: \"$0.00\";\n\t}\n\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t\tminimumFractionDigits: finalMinFractionDigits,\n\t\tmaximumFractionDigits: finalMaxFractionDigits,\n\t}).format(amount);\n}\n\n/**\n * Format date with flexible presets or custom options\n *\n * @param date - Date value (Date, number, string, or null)\n * @param options - Formatting options\n * @returns Formatted date string or \"\" if null\n *\n * @example\n * formatDate(new Date()) // \"Jan 15, 2024\"\n * formatDate(new Date(), { preset: \"long\" }) // \"January 15, 2024\"\n * formatDate(null) // \"\"\n */\nexport function formatDate(\n\tdate: Date | number | string | null | undefined,\n\toptions: DateFormatOptions | DateFormatPreset | string = {},\n): string {\n\tif (!date) {\n\t\treturn \"\";\n\t}\n\n\tconst dateObj =\n\t\ttypeof date === \"number\" || typeof date === \"string\"\n\t\t\t? new Date(date)\n\t\t\t: date;\n\n\tif (Number.isNaN(dateObj.getTime())) {\n\t\treturn \"\";\n\t}\n\n\t// Handle backward compatibility: string format parameter\n\tlet preset: DateFormatPreset = \"table\";\n\tlet custom: Intl.DateTimeFormatOptions | undefined;\n\n\tif (typeof options === \"string\") {\n\t\t// Legacy format: formatDate(date, \"short\")\n\t\tpreset = (options as DateFormatPreset) || \"table\";\n\t} else {\n\t\tpreset = options.preset || \"table\";\n\t\tcustom = options.custom;\n\t}\n\n\t// Preset configurations\n\tconst presetConfigs: Record<DateFormatPreset, Intl.DateTimeFormatOptions> = {\n\t\tshort: {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t},\n\t\tmedium: {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t},\n\t\tlong: {\n\t\t\tmonth: \"long\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t},\n\t\tfull: {\n\t\t\tweekday: \"long\",\n\t\t\tmonth: \"long\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t},\n\t\ttable: {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t},\n\t\ttime: {\n\t\t\thour: \"numeric\",\n\t\t\tminute: \"2-digit\",\n\t\t\thour12: true,\n\t\t},\n\t\tdatetime: {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\tyear: \"numeric\",\n\t\t\thour: \"numeric\",\n\t\t\tminute: \"2-digit\",\n\t\t\thour12: true,\n\t\t},\n\t};\n\n\tconst formatOptions = custom || presetConfigs[preset];\n\n\treturn new Intl.DateTimeFormat(\"en-US\", formatOptions).format(dateObj);\n}\n\n/**\n * Format date and time together\n *\n * @param date - Date value\n * @returns Formatted date + time string\n *\n * @example\n * formatDateTime(new Date()) // \"Jan 15, 2024, 2:30 PM\"\n */\nexport function formatDateTime(\n\tdate: Date | number | string | null | undefined,\n): string {\n\treturn formatDate(date, { preset: \"datetime\" });\n}\n\n/**\n * Format time only (no date)\n *\n * @param date - Date value\n * @returns Formatted time string (e.g., \"2:30 PM\")\n *\n * @example\n * formatTime(new Date()) // \"2:30 PM\"\n */\nexport function formatTime(\n\tdate: Date | number | string | null | undefined,\n): string {\n\treturn formatDate(date, { preset: \"time\" });\n}\n\n/**\n * Format date range (start  end)\n *\n * @param start - Start date\n * @param end - End date (optional)\n * @returns Formatted date range string\n *\n * @example\n * formatDateRange(new Date(\"2024-01-15\"), new Date(\"2024-01-20\")) // \"Jan 15  Jan 20, 2024\"\n */\nexport function formatDateRange(\n\tstart: Date | number | string | null | undefined,\n\tend?: Date | number | string | null | undefined,\n): string {\n\tif (!start) {\n\t\treturn \"\";\n\t}\n\n\tconst startDate =\n\t\ttypeof start === \"number\" || typeof start === \"string\"\n\t\t\t? new Date(start)\n\t\t\t: start;\n\n\tif (Number.isNaN(startDate.getTime())) {\n\t\treturn \"\";\n\t}\n\n\tif (!end) {\n\t\treturn formatDate(startDate, { preset: \"short\" });\n\t}\n\n\tconst endDate =\n\t\ttypeof end === \"number\" || typeof end === \"string\" ? new Date(end) : end;\n\n\tif (Number.isNaN(endDate.getTime())) {\n\t\treturn formatDate(startDate, { preset: \"short\" });\n\t}\n\n\t// Check if same day\n\tconst sameDay =\n\t\tstartDate.getFullYear() === endDate.getFullYear() &&\n\t\tstartDate.getMonth() === endDate.getMonth() &&\n\t\tstartDate.getDate() === endDate.getDate();\n\n\tif (sameDay) {\n\t\treturn formatDate(startDate, { preset: \"short\" });\n\t}\n\n\t// Format range\n\tconst startFormatted = new Intl.DateTimeFormat(\"en-US\", {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t}).format(startDate);\n\n\tconst endFormatted = new Intl.DateTimeFormat(\"en-US\", {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\tyear: \"numeric\",\n\t}).format(endDate);\n\n\treturn `${startFormatted}  ${endFormatted}`;\n}\n\n/**\n * Format percentage value\n *\n * @param value - Percentage value (0-100)\n * @param decimals - Number of decimal places (default: 0)\n * @returns Formatted percentage string\n *\n * @example\n * formatPercentage(45.5) // \"46%\"\n * formatPercentage(45.5, 1) // \"45.5%\"\n */\nfunction formatPercentage(\n\tvalue: number | null | undefined,\n\tdecimals = 0,\n): string {\n\tif (value === null || value === undefined) {\n\t\treturn \"\";\n\t}\n\n\treturn `${value.toFixed(decimals)}%`;\n}\n\n/**\n * Format hours (decimal to \"Xh Ym\" format)\n *\n * @param hours - Hours as decimal number\n * @returns Formatted hours string\n *\n * @example\n * formatHours(2.5) // \"2h 30m\"\n * formatHours(1.25) // \"1h 15m\"\n */\nfunction formatHours(hours: number | null | undefined): string {\n\tif (hours === null || hours === undefined) {\n\t\treturn \"0h\";\n\t}\n\n\tconst wholeHours = Math.floor(hours);\n\tconst minutes = Math.round((hours - wholeHours) * 60);\n\n\tif (minutes === 0) {\n\t\treturn `${wholeHours}h`;\n\t}\n\n\treturn `${wholeHours}h ${minutes}m`;\n}\n\n/**\n * Format number with thousand separators\n *\n * @param value - Number value\n * @param decimals - Number of decimal places (default: 0)\n * @returns Formatted number string\n *\n * @example\n * formatNumber(1234567) // \"1,234,567\"\n * formatNumber(1234.56, 2) // \"1,234.56\"\n */\nfunction formatNumber(value: number | null | undefined, decimals = 0): string {\n\tif (value === null || value === undefined) {\n\t\treturn \"0\";\n\t}\n\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tminimumFractionDigits: decimals,\n\t\tmaximumFractionDigits: decimals,\n\t}).format(value);\n}\n"],"names":["ReadonlyURLSearchParams","ReadonlyURLSearchParamsError","Error","constructor","URLSearchParams","append","delete","set","sort","RedirectStatusCode","REDIRECT_ERROR_CODE","RedirectType","isRedirectError","error","digest","split","errorCode","type","destination","slice","join","status","at","statusCode","Number","isNaN","getRedirectError","getRedirectStatusCodeFromError","getRedirectTypeFromError","getURLFromRedirectError","permanentRedirect","redirect","actionAsyncStorage","window","require","undefined","url","TemporaryRedirect","getStore","isAction","push","replace","PermanentRedirect","HTTPAccessErrorStatus","HTTP_ERROR_FALLBACK_ERROR_CODE","getAccessFallbackErrorTypeByStatus","getAccessFallbackHTTPStatus","isHTTPAccessFallbackError","NOT_FOUND","FORBIDDEN","UNAUTHORIZED","ALLOWED_CODES","Set","Object","values","prefix","httpStatus","has","notFound","DIGEST","forbidden","process","env","__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS","unauthorized","isPostpone","REACT_POSTPONE_TYPE","Symbol","for","$$typeof","isNextRouterError","unstable_rethrow","isBailoutToCSRError","isDynamicServerError","isDynamicPostpone","isHangingPromiseRejectionError","isPrerenderInterruptedError","cause","unstable_isUnrecognizedActionError"],"mappings":"8CAMc,OAAA,cAAA,CAAA,EAAA,aAAA,oCAaDA,0BAAAA,qCAAAA,IAZb,OAAMC,UAAqCC,MACzCC,aAAc,CACZ,KAAK,CACH,0JAEJ,CACF,CAMO,MAAMH,UAAgCI,gBAE3CC,QAAS,CACP,MAAM,IAAIJ,CACZ,CAEAK,QAAS,CACP,MAAM,IAAIL,CACZ,CAEAM,KAAM,CACJ,MAAM,IAAIN,CACZ,CAEAO,MAAO,CACL,MAAM,IAAIP,CACZ,CACF,+TCpCYQ,qBAAAA,qCAAAA,KAAL,IAAKA,EAAAA,gBAAAA,KAAAA,WAAAA,GAAAA,gGAAAA,8SCIAE,KAFCD,OAEDC,YAFoB,CAAA,kBAAnBD,GAEDC,YAAY,CAAA,kBAAZA,GAgBIC,eAAe,CAAA,kBAAfA,+EApBmB,CAAA,CAAA,IAAA,GAEtBF,EAAsB,gBAE5B,IAAKC,eAAAA,WAAAA,GAAAA,aAAAA,GAgBL,SAASC,EAAgBC,CAAc,EAC5C,GACmB,UAAjB,OAAOA,GACG,OAAVA,GACA,CAAE,CAAA,WAAYA,CAAAA,CAAI,EACM,UACxB,AADA,OAAOA,EAAMC,MAAM,CAEnB,OAAO,EAGT,IAAMA,EAASD,EAAMC,MAAM,CAACC,KAAK,CAAC,KAC5B,CAACC,EAAWC,EAAK,CAAGH,EACpBI,EAAcJ,EAAOK,KAAK,CAAC,EAAG,CAAC,GAAGC,IAAI,CAAC,KAGvCG,EAAaC,OAFJV,AAEWO,EAFJC,EAAE,CAAC,CAAC,IAI1B,OACEN,IAAcN,IACJ,YAATO,GAA+B,IAA/BA,KAAsBA,CAAS,CAAK,EACd,UAAvB,OAAOC,GACP,CAACO,MAAMF,IACPA,KAAcd,EAAAA,kBAAkB,AAEpC,+SC7BgBiB,gBAAgB,CAAA,kBAAhBA,GA6EAC,8BAA8B,CAAA,kBAA9BA,GARAC,wBAAwB,CAAA,kBAAxBA,GARAC,uBAAuB,CAAA,kBAAvBA,GAhBAC,iBAAiB,CAAA,kBAAjBA,GAvBAC,QAAQ,CAAA,kBAARA,+EArCmB,CAAA,CAAA,IAAA,OAM5B,CAAA,CAAA,IAAA,IAEDC,EAGEE,EAAQ,CAAA,CAAA,IAAA,IACRF,OAHN,OAAOC,IAGiB,CAGnB,EAFDE,IAJc,GAMJT,EACdU,CAAW,CACXnB,CAAkB,CAClBM,EAAiCd,EAAAA,kBAAkB,CAAC4B,iBAAiB,EAErE,IAAMxB,EAAQ,OAAA,cAA8B,CAA9B,AAAIX,MAAMQ,EAAAA,mBAAmB,EAA7B,oBAAA,OAAA,mBAAA,gBAAA,CAA6B,GAE3C,OADAG,EAAMC,MAAM,CAAG,CAAA,EAAGJ,EAAAA,mBAAmB,CAAC,CAAC,EAAEO,EAAK,CAAC,EAAEmB,EAAI,CAAC,EAAEb,EAAW,CAAC,CAAC,CAC9DV,CACT,CAcO,SAASkB,EAEdK,CAAW,CACXnB,CAAmB,EAMnB,EARA,IAQMS,EAAiBU,EAJvBnB,GAI4BA,CAJnBe,GAAoBM,YAAYC,AAJd,SAKvB5B,EAAAA,YAAY,CAAC6B,IAAI,CACjB7B,EAAAA,YAAY,CAAC8B,OAAO,CAEUhC,EAAAA,kBAAkB,CAAC4B,iBAAiB,CACxE,CAaO,SAASP,EAEdM,CAAW,CACXnB,EAAqBN,EAAAA,UAFrB,EAEiC,CAAC8B,OAAO,EAEzC,MAAMf,EAAiBU,EAAKnB,EAAMR,EAAAA,CAJP,iBAIyB,CAACiC,iBAAiB,CACxE,CAUO,SAASb,EAAwBhB,CAAc,QACpD,AAAKD,CAAAA,EAAAA,CAAD,CAACA,eAAAA,AAAe,EAACC,GAIdA,EAAMC,GAJgB,GAIV,CAACC,KAAK,CAAC,KAAKI,KAAK,CAAC,EAAG,CAAC,GAAGC,IAAI,CAAC,KAJb,IAKtC,CAEO,SAASQ,EAAyBf,CAAoB,EAC3D,GAAI,CAACD,CAAAA,EAAAA,EAAAA,eAAAA,AAAe,EAACC,GACnB,KAD2B,CACrB,OAAA,cAAiC,CAA7BX,AAAJ,MAAU,wBAAV,oBAAA,OAAA,mBAAA,gBAAA,CAAgC,GAGxC,OAAOW,EAAMC,MAAM,CAACC,KAAK,CAAC,IAAK,EAAE,CAAC,EAAE,AACtC,CAEO,SAASY,EAA+Bd,CAAoB,EACjE,GAAI,CAACD,CAAAA,EAAAA,EAAAA,eAAAA,AAAe,EAACC,GACnB,KAD2B,CACrB,OAAA,cAAiC,CAAjC,AAAIX,MAAM,wBAAV,oBAAA,OAAA,mBAAA,gBAAA,CAAgC,GAGxC,OAAOsB,OAAOX,EAAMC,MAAM,CAACC,KAAK,CAAC,KAAKO,EAAE,CAAC,CAAC,GAC5C,+SClGaqB,qBAAqB,CAAA,kBAArBA,GAQAC,8BAA8B,CAAA,kBAA9BA,GAuCGC,kCAAkC,CAAA,kBAAlCA,GAPAC,2BAA2B,CAAA,kBAA3BA,GAnBAC,yBAAyB,CAAA,kBAAzBA,uEArBT,IAAMJ,EAAwB,CACnCK,UAAW,IACXC,UAAW,IACXC,aAAc,GAChB,EAEMC,EAAgB,IAAIC,IAAIC,OAAOC,MAAM,CAACX,IAE/BC,EAAiC,2BAavC,SAASG,EACdlC,CAAc,EAEd,GACmB,UAAjB,OAAOA,GACPA,AAAU,UACV,CAAE,CAAA,WAAYA,CAAAA,CAAI,EACM,UAAxB,AACA,OADOA,EAAMC,MAAM,CAEnB,OAAO,EAET,GAAM,CAACyC,EAAQC,EAAW,CAAG3C,EAAMC,MAAM,CAACC,KAAK,CAAC,KAEhD,OACEwC,IAAWX,GACXO,EAAcM,GAAG,CAACjC,OAAOgC,GAE7B,CAEO,SAASV,EACdjC,CAA8B,EAG9B,OAAOW,OADYX,AACL2C,EADW1C,MAAM,CAACC,KAAK,CAAC,IAAI,CAAC,EAAE,CAE/C,CAEO,SAAS8B,EACdxB,CAAc,EAEd,OAAQA,GACN,KAAK,IACH,MAAO,cACT,MAAK,IACH,MAAO,WACT,MAAK,IACH,MAAO,WACT,SACE,MACJ,CACF,+TCtCgBqC,WAAAA,qCAAAA,aAnBT,CAAA,CAAA,IAAA,IAiBDC,EAAS,CAAA,EAAGf,EAAAA,8BAA8B,CAAC,IAAI,CAAC,CAE/C,SAASc,IACd,IAAM7C,EAAQ,OAAA,cAAiB,CAAjB,AAAIX,MAAMyD,GAAV,oBAAA,OAAA,kBAAA,iBAAA,CAAgB,EAG9B,OAFE9C,EAAkCC,MAAM,CAAG6C,EAEvC9C,CACR,qPCNO,SAAS+C,IAEZ,MAAM,OAAA,cAEL,CAFK,AAAI1D,MACR,CAAC,8GADG,CAC4G,CAAC,kBAD7G,OAAA,mBAAA,gBAAA,CAEN,EAMJ,0EAVgB0D,YAAAA,qCAAAA,KAFEhB,EAhBX,CAAA,CAAA,IAAA,IAgBWA,8BAA8B,CAAC,IAAI,CAAC,iPCG/C,SAASoB,IAEZ,MAAM,OAAA,cAEL,CAFK,AAAI9D,MACR,CAAC,8GADG,CAC4G,CAAC,kBAD7G,OAAA,kBAAA,iBAAA,CAEN,EAMJ,0EAVgB8D,eAAAA,qCAAAA,KAFEpB,EAjBX,CAAA,CAAA,IAAA,IAiBWA,8BAA8B,CAAC,IAAI,CAAC,0TClBtCqB,aAAAA,qCAAAA,KAFhB,IAAMC,EAA8BC,OAAOC,GAAG,CAAC,kBAExC,SAASH,EAAWpD,CAAU,EACnC,MACmB,UAAjB,OAAOA,GACG,OAAVA,GACAA,EAAMwD,QAAQ,GAAKH,CAEvB,yGCGgBI,oBAAAA,qCAAAA,aART,CAAA,CAAA,IAAA,QAC6C,CAAA,CAAA,IAAA,IAO7C,SAASA,EACdzD,CAAc,EAEd,MAAOD,CAAAA,EAAAA,EAAAA,eAAAA,AAAe,EAACC,IAAUkC,CAAAA,EAAAA,EAAAA,yBAAAA,AAAyB,EAAClC,EAC7D,gUCLgB0D,mBAAAA,qCAAT,AAASA,SAAAA,EAAiB1D,CAAc,EAC7C,GACEyD,CAAAA,EAAAA,EAAAA,iBAAAA,AAAiB,EAACzD,IAClB2D,CAAAA,EAAAA,EAAAA,mBAAAA,AAAmB,EAAC3D,IACpB4D,CAAAA,EAAAA,EAAAA,oBAAAA,AAAoB,EAAC5D,IACrB6D,CAAAA,EAAAA,EAAAA,iBAAAA,AAAiB,EAAC7D,IAClBoD,CAAAA,EAAAA,EAAAA,UAAAA,AAAU,EAACpD,IACX8D,CAAAA,EAAAA,EAAAA,8BAAAA,AAA8B,EAAC9D,IAC/B+D,CAAAA,EAAAA,EAAAA,2BAAAA,AAA2B,EAAC/D,GAE5B,KADA,CACMA,EAGJA,aAAiBX,OAAS,UAAWW,GACvC0D,EAAiB1D,EAD6B,AACvBgE,KAAK,CAEhC,aA1B+C,CAAA,CAAA,IAAA,OACpB,CAAA,CAAA,IAAA,QACS,CAAA,CAAA,IAAA,QACF,CAAA,CAAA,IAAA,OAI3B,CAAA,CAAA,IAAA,QAC8B,CAAA,CAAA,IAAA,yPCFpC,OAAA,cAAA,CAAA,EAAA,aAAA,oCACYN,mBAAAA,qCAAAA,KAAN,IAAMA,EAGLrC,EAAQ,CAAA,CAAA,IAAA,IACRqC,KAHN,OAAOtC,IAGe,GAEhBC,IALY,IAKJ,8BACRqC,gBAAgB,sPCAfvE,uBAAuB,CAAA,kBAAvBA,EAAAA,uBAAuB,EALvBW,YAAY,CAAA,kBAAZA,EAAAA,YAAY,EAEZiD,SAAS,CAAA,kBAATA,EAAAA,SAAS,EADTF,QAAQ,CAAA,kBAARA,EAAAA,QAAQ,EAFE5B,iBAAiB,CAAA,kBAAjBA,EAAAA,iBAAiB,EAA3BC,QAAQ,CAAA,kBAARA,EAAAA,QAAQ,EAIRiC,YAAY,CAAA,kBAAZA,EAAAA,YAAY,EAVLc,kCAAkC,CAAA,kBAAlCA,GAWPP,gBAAgB,CAAA,kBAAhBA,EAAAA,gBAAgB,8EAbe,CAAA,CAAA,IAAA,QAQI,CAAA,CAAA,IAAA,QACf,CAAA,CAAA,IAAA,QACJ,CAAA,CAAA,IAAA,OACC,CAAA,CAAA,IAAA,MACG,CAAA,CAAA,IAAA,QACI,CAAA,CAAA,IAAA,IAX1B,SAASO,IACd,MAAM,OAAA,cAEL,CAFS5E,AAAJ,MACJ,wEADI,oBAAA,OAAA,mBAAA,gBAAA,CAEN,EACF,iPCJO,IAAM,EAAiB,CAAA,EAAA,AAD9B,EAAA,CAAA,CAAA,QAC8B,uBAAA,AAAuB,EACjD,WAAa,MAAM,AAAI,MAAM,0OAA4O,EACzQ,+EACA,uEAHG,IAAM,EAAiB,CAAA,EAAA,AAD9B,EAAA,CAAA,CAAA,QAC8B,uBAAA,AAAuB,EACjD,WAAa,MAAM,AAAI,MAAM,0OAA4O,EACzQ,2DACA,qIILJ,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QDjBA,EAAA,EAAA,CAAA,CAAA,sBFAA,EAAA,EAAA,CAAA,CAAA,QIEA,CJAA,CIAA,EAAA,CAAA,CAAA,QHFA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,GDCmD,KCAnD,EAAA,EAAA,CAAA,CAAA,QAqGO,IAAM,EAAsB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,MAAO,IAE/C,IAAM,EAAY,GAAsB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAChE,GAAI,CAAC,EACJ,OAAO,EADQ,GAIhB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAClD,GAAI,CAAC,EACJ,MAAU,AAAJ,EADQ,IACE,kCAEjB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAC5B,IAAI,CAAC,gBACL,MAAM,CAAC,mCACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,OAAQ,eACX,KAAK,CAAC,KAER,GAFgB,AAEZ,EACH,KADU,CACJ,AAAI,MAAM,CAAC,WAHwB,wBAGW,EAAE,EAAM,OAAO,CAAA,CAAE,EAItE,IAAM,EAAQ,CACb,MAAO,EACP,UAAW,EACX,UAAW,EACX,YAAa,EACb,UAAW,EACX,UAAW,CACZ,EAEA,IAAK,IAAM,KAAO,GAAQ,EAAE,CAAE,CAE7B,GAAI,EAAI,WAAW,EAAI,EAAI,UAAU,CAAE,QAEvC,GAAM,KAAK,GACX,IAAM,EAAS,CAAC,EAAI,MAAM,EAAI,EAAA,CAAE,CAAE,WAAW,EAC9B,eAAX,EAAwB,EAAM,SAAS,GACvB,cAAX,EAAwB,EAAM,SAAS,GAC5B,gBAAX,EAA0B,EAAM,WAAW,GAChC,cAAX,EAAwB,EAAM,SAAS,GACvC,AAAW,iBAAa,EAAM,SAAS,EACjD,CAEA,OAAO,CACR,GG7IO,eAAe,IACrB,IAAM,EAAQ,MAAM,WAEpB,AAAK,EAWE,CACN,CAZG,AAaF,GAbU,GAaH,YACP,MAAO,EAAM,SAAS,CACtB,OAXkC,KAW1B,EAAM,SAAS,EAAG,CAC3B,EACA,CAF+B,AAG9B,MAAO,YACP,MAAO,EAAM,IAJ+C,KAItC,CACtB,OAfkC,MAe1B,EAAM,SAAS,EAAG,CAC3B,EACA,CACC,AAH8B,MAGvB,cACP,MAAO,EAAM,EAJ+C,SAIpC,CACxB,OAAQ,AAnB4B,OAmBtB,WAAW,EAAG,CAC7B,EACA,CAFiC,AAGhC,MAAO,YACP,MAAO,EAAM,MAJmD,GAI1C,CACtB,OAvBkC,KAuB1B,EAAM,SAAS,EAAG,CAC3B,EACA,CAF+B,AAG9B,MAAO,YACP,MAAO,EAAM,IAJ+C,KAItC,CACtB,OACC,EAAM,SAAS,CAAG,EA5BwB,CAAC,CA6BxC,GA5BuC,GA8B5C,EACA,CAvCO,EAwCT,AAxCW,CHoJkC,CAAA,EAAA,EAAA,KAAA,AAAK,EACjD,MACC,EACA,EACA,EACA,EAAgB,CGpHX,CHoHa,IAElB,IAAM,EAAY,GAAsB,MAAM,CAAA,EAAA,EAAA,kBAAkB,AAAlB,IAC9C,GAAI,CAAC,EACJ,MAAO,EAAE,CADM,AAIhB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAClD,GAAI,CAAC,EACJ,MAAM,AAAI,EADI,IACE,kCAGjB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,GAAG,CACzC,gCACA,CACC,aAAc,EACd,aAAc,GAAa,KAC3B,WAAY,GAAW,KACvB,QAAS,CACV,UAGD,AAAI,GACH,IADU,IACF,KAAK,CAAC,uCAAwC,GAC/C,EAAE,EAGH,GAAQ,EAChB,AADkB,GAQY,CAAA,EAAA,EAAA,KAAA,AAAK,EACnC,MAAO,EAAuB,KAC7B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAClD,GAAI,CAAC,EACJ,MAAM,AAAI,EADI,IACE,kCAGjB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,GAAG,CAAC,2BAA4B,CACtE,iBAAkB,EAClB,aAAc,CACf,UAEA,AAAI,GACH,IADU,IACF,KAAK,CAAC,8BAA+B,GACtC,MAGD,GAAM,CAAC,EAAE,EAAE,kBAAoB,IACvC,GItND,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QE+IO,IAAM,EAA4B,CAAA,EAAA,EAAA,KAAA,AAAK,EAC7C,MAAO,IAGN,IAAM,EAAY,GAAsB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAChE,GAAI,CAAC,EACJ,MAAO,EAAE,CAGV,AAJgB,IAIV,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAClD,GAAI,CAAC,EACJ,MAAM,AAAI,EADI,IACE,kCAEjB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAC5B,IAAI,CAAC,aACL,MAAM,CAAC,mCACP,EAAE,CAAC,aAAc,GAEnB,GAAI,EACH,KADU,CACJ,AAAI,MAAM,CAAC,gCAAgC,EAAE,EAAM,OAAO,CAAA,CAAE,EAGnE,OAAQ,GAAQ,EAAE,AACnB,GFhKM,eAAe,IACrB,GAAM,CAAC,EAAM,EAAgB,CAAG,MAAM,QAAQ,GAAG,CAAC,CACjD,CAAA,EAAA,EAAA,cAAA,AAAc,IACd,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAClB,EAED,GAAI,CAAC,GAID,CAAC,EAHJ,AADU,MACH,CAAA,EAAA,EAAA,IAGc,IAHd,AAAQ,IAOhB,IAAI,EAAoE,EAAE,CAC1E,GAAI,CACH,EAAa,MAAM,EAA0B,EAC9C,CAAE,MAAO,EAAQ,CAChB,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,MAAO,EAAE,EACzC,CACA,IAAM,EAAkB,EAAW,MAAM,CACxC,AAAC,GAAa,CAAC,AAAC,GAAS,WAAW,EAAI,EAAS,UAAA,AAAU,GAItD,EAAiB,EAAgB,MAAM,CACvC,EAAc,EAAgB,MAAM,CACzC,AAAC,GAAwB,WAAb,EAAE,MAAM,EACnB,MAAM,CACF,EAAe,EAAgB,MAAM,CAC1C,AAAC,GAAwB,SAAb,EAAE,MAAM,EAA4B,WAAb,EAAE,MAAM,EAC1C,MAAM,CACF,EAAa,EAAgB,MAAM,CACxC,AAAC,GAAwB,UAAb,EAAE,MAAM,EACnB,MAAM,CACF,EAAe,EAAgB,MAAM,CAC1C,AAAC,GAAwB,YAAb,EAAE,MAAM,EACnB,MAAM,CASR,MAAO,CACN,CACC,MAAO,QACP,MAAO,EACP,OAAQ,EAAa,EAAI,EAXc,EAWV,CAC9B,EACA,CACC,MAAO,qBACP,MAAO,EACP,OAAQ,EAAe,EAAI,EAfc,EAeV,CAChC,EACA,CACC,MAAO,SACP,MAAO,EACP,OAnB+B,MAmBvB,GAAc,CACvB,EACA,CAF2B,AAG1B,MAAO,UACP,MAAO,EACP,GALqD,IAMpD,EAAe,EAxByB,CAAC,CAyBtC,GAxBqC,GA0B1C,EACA,CACC,MAAO,kBACP,IAJI,EAIG,EACP,OA7B8B,KA6BtB,GAAiB,CAC1B,EACA,AACF,CE2FmC,AF9FH,CE8FG,EAAA,EAAA,KAAA,AAAK,EACvC,MAAO,EAAoB,KAC1B,CFhGwD,GEgGlD,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAClD,GAAI,CAAC,EACJ,MAAM,AAAI,EADI,IACE,kCAGjB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,GAAG,CAAC,wBAAyB,CACnE,cAAe,EACf,aAAc,CACf,UAEA,AAAI,GACH,IADU,IACF,KAAK,CAAC,2BAA4B,GACnC,MAGD,GAAM,CAAC,EAAE,EAAE,eAAiB,IACpC,GD/LD,IAAA,EAAA,EAAA,CAAA,CAAA,QAwBO,eAAe,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IACnC,GAAI,CAAC,EACJ,MAAO,CAAA,CADO,CACP,EAAA,QAAA,AAAQ,IAGhB,GAAM,CACL,KAAM,MAAE,CAAI,CAAE,CACd,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAC/B,GAAI,CAAC,EACJ,IADU,EACH,CAAA,EAAA,EAAA,QAAA,AAAQ,IAGhB,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAChD,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAIhB,GAAM,CAAE,KAAM,CAAY,OAAE,CAAK,CAAE,CAAG,MAAM,EAC1C,IAAI,CAAC,aACL,MAAM,CACN,CAAC;;;;IAIA,CAAC,EAEF,EAAE,CAAC,aAAc,GACjB,KAAK,CAAC,aAAc,CAAE,UAAW,EAAM,GAEzC,GAAI,EACH,KADU,CACA,AAAJ,MAAU,CAAC,0BAA0B,EAAE,EAAM,OAAO,CAAA,CAAE,EAoB7D,IAAM,EAhBY,AAAC,AAgBK,IAhBW,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAAQ,CAAD,AAClD,GAAI,EAAG,EAAE,CACT,OAAQ,EAAG,MAAM,CACjB,UAAW,EAAG,SAAS,CACvB,eAAgB,EAAG,gBAAgB,CAChC,IAAI,KAAK,EAAG,gBAAgB,EAAE,kBAAkB,CAAC,QAAS,CAC1D,MAAO,QACP,IAAK,UACL,KAAM,SACP,GACC,GACH,YAAa,EAAG,WAAW,CAC3B,WAAY,EAAG,UAAU,AAC1B,CAAC,GAGiC,MAAM,CACvC,AAAC,GAAM,CAAC,CAAC,EAAE,WAAW,EAAI,EAAE,UAAA,AAAU,GAIjC,EAAiB,EAAgB,MAAM,CACvC,EAAc,EAAgB,MAAM,CACzC,AAAC,GAAmB,WAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAgB,EAAgB,MAAM,CAC3C,AAAC,GAAmB,aAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAmB,EAAgB,MAAM,CAC9C,AAAC,GAAM,AAAgB,WAAd,SAAS,EAA+B,sBAAhB,EAAE,SAAS,EAC3C,MAAM,CACF,EAAiB,EAAgB,MAAM,CAAC,AAAC,IAC9C,GAAI,CAAC,EAAE,cAAc,CACpB,CADsB,MACf,EAER,IAAM,EAAU,IAAI,KAAK,EAAE,cAAc,EACnC,EAAM,IAAI,KACV,EAAe,KAAK,IAAI,CAC7B,CAAC,EAAQ,OAAO,GAAK,EAAI,OAAO,EAAA,CAAE,CApFpC,GAoFwC,IAEvC,OAAO,GAlF0B,IAkFoB,GAAgB,CACtE,CAtFA,EAsFG,EADqB,IACf,CAET,MAAO,CACN,CACC,IAzFF,EAyFS,iBAxFT,CAyFE,MAAO,EACP,OAzG4B,KAyGpB,GAAiB,CAC1B,EACA,CAF8B,AAG7B,MAAO,SACP,MAAO,EACP,EALsD,KAxGnC,MA6GX,GAAc,CACvB,EACA,CAF2B,AAG1B,MAAO,UAHmC,OAI1C,MAAO,EACP,OACC,EAAmB,EAlHa,CAAC,CAmH9B,GAlH6B,GAoHlC,EACA,CACC,MAAO,eAHH,IAIJ,MAAO,EACP,OACC,EAAiB,EAxHe,CAAC,CAyH9B,GAxH6B,GA0HlC,EACA,CACC,MAAO,WACP,IAJI,EAIG,EACP,OAAQ,EAAgB,EAAI,EA7HE,EA6HE,CACjC,EACA,AACF,CSnIO,eAAe,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAE5C,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAEhD,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAIhB,GAAM,CAAE,KAAM,CAAY,CAAE,OAAK,CAAE,CAAG,MAAM,EAC1C,IAAI,CAAC,aACL,MAAM,CAAC,qDACP,EAAE,CAAC,aAAc,GAEnB,GAAI,EACH,KADU,CACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,MAAO,EAAE,GAIzC,IAAM,EAAkB,CAAC,GAAgB,EAAA,AAAE,EAAE,MAAM,CAClD,AAAC,GAAa,CAAC,AAAC,GAAI,WAAW,EAAI,EAAI,UAAA,AAAU,GAI5C,EAAa,EAAgB,MAAM,CACxC,AAAC,GAA4B,UAAf,EAAI,MAAM,EACvB,MAAM,CACF,EAAY,EAAgB,MAAM,CACvC,AAAC,GAA4B,SAAf,EAAI,MAAM,EACvB,MAAM,CACF,EAAgB,EAAgB,MAAM,CAC3C,AAAC,GAA4B,aAAf,EAAI,MAAM,EACvB,MAAM,CACF,EAAgB,EAAgB,MAAM,CAC3C,AAAC,GAA4B,aAAf,EAAI,MAAM,EACvB,MAAM,CAEF,EAAa,EAAgB,MAAM,CACxC,CAAC,EAAa,IAAa,GAAO,EAAI,CAAL,WAAiB,GAAI,CAAC,CACvD,GAEK,EAAgB,EACpB,MAAM,CAAC,AAAC,GAA4B,aAAf,EAAI,MAAM,EAC/B,MAAM,CAAC,CAAC,EAAa,IAAa,EAAO,GAAI,CAAL,WAAiB,GAAI,CAAC,CAAG,GAC7D,EAAe,EACnB,MAAM,CAAC,AAAC,GAA4B,SAAf,EAAI,MAAM,EAC/B,MAAM,CAAC,CAAC,EAAa,IAAa,GAAO,EAAI,CAAL,WAAiB,GAAI,CAAC,CAAG,GAUnE,MAAO,CACN,CACC,MAAO,QACP,MAAO,EACP,OAAQ,EAAa,EAAI,EAZc,EAYV,CAC9B,EACA,CACC,MAAO,OACP,MAAO,CAAC,CAAC,EAAE,CAAC,KAAe,CAAgB,CAAE,QAAlB,MAAgC,GAAA,CAAI,CAC/D,OAAQ,EAAY,EAAI,EAhBc,EAgBV,CAC7B,EACA,CACC,MAAO,WACP,MAAO,CAAC,CAAC,EAAE,CAAC,KAAgB,CAAgB,CAAE,SAAlB,KAAgC,GAAA,CAAI,CAChE,OApBiC,MAoBzB,GAAgB,CACzB,EACA,CACC,AAH4B,MAGrB,WACP,MAAO,EACP,IALyD,GAMxD,EAAgB,EAzByB,CAAC,CA0BvC,GAzBsC,GA2B3C,EACA,CACC,MAAO,cACP,MAAO,CAAC,CAAC,CAJL,CAIQ,AAAD,GA5BY,GA4BE,CAAgB,CAAE,KAAlB,SAAgC,GAAA,CAAI,CAC7D,OA9B8B,MA8BtB,GAAa,CACtB,EACA,AACF,CDpFA,ACiF4B,SDjFnB,EAA0B,CAAe,CAAE,CAAgB,SACnE,AAAiB,GAAG,ACgFiC,CDhFjD,EACI,AAAc,MAAM,EAAV,EAEX,KAAK,KAAK,CAAE,CAAC,EAAU,CAAA,CAAQ,CAAI,OAAwB,EACnE,CAKO,CANgD,MAAM,QAMvC,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,GAK9C,AAFyB,CAExB,MAF8B,CAAA,EAAA,EAAA,WAER,sBAFQ,AAAiC,KAGnE,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,cAIV,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,GAE5C,CAAC,GACJ,CAAA,EAAA,EAAA,QAAA,AAAQ,CADa,CACZ,cAIV,IAAM,EAAM,IAAI,KACV,EAAqB,IAAI,KAAK,EAAI,OAAO,GAAK,KAAK,GACnD,EAAsB,AADkC,IAC9B,CADmC,IAElE,CAFuE,CAEnE,OAAO,GAAK,KAAK,GAIhB,CAAE,CAJmB,IAIb,CAAW,AAJO,CAIL,CAAG,GAJO,GAID,EAClC,IAAI,CAAC,YACL,MAAM,CACN,mGAEA,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MAGb,EAAiB,GAAa,OAAQ,AAAD,GAAS,CAAC,EAAI,WAAW,GAAK,EAAE,CAErE,EAAgB,EAAe,MAAM,CAAC,AAAC,GAAuB,UAAf,EAAI,MAAM,EACzD,EAAkB,EAAe,MAAM,CAC5C,AAAC,GAAuB,SAAf,EAAI,MAAM,EAA8B,YAAf,EAAI,MAAM,EAEvC,EAAe,EAAe,MAAM,CAAC,AAAC,GAAuB,SAAf,EAAI,MAAM,EACxD,EAAkB,EAAe,MAAM,CAC5C,AAAC,GAAuB,aAAf,EAAI,MAAM,EAGd,EAAa,EAAc,MAAM,CAClB,EAAgB,MAAM,CACzB,EAAa,MAAM,CACrC,IAAM,EAAe,EAAgB,MAAM,CAErC,EAAe,EAAa,MAAM,CACvC,CAAC,EAAK,IAAQ,GAAO,EAAI,CAAL,UAAgB,GAAI,CAAC,CACzC,GAEK,EAAiB,EAAgB,MAAM,CAC5C,CAAC,EAAK,IAAQ,GAAO,EAAI,CAAL,aAAmB,EAAI,EAAI,YAAY,GAAI,CAAC,CAChE,GAEK,EAAiB,EAAgB,MAAM,CAC5C,CAAC,EAAK,IAAQ,EAAO,GAAI,CAAL,aAAmB,EAAI,EAAI,YAAY,GAAI,CAAC,CAChE,GAEK,EAAe,EAAc,MAAM,CACxC,CAAC,EAAK,IAAQ,GAAO,EAAI,CAAL,WAAiB,GAAI,CAAC,CAC1C,GAIK,EAAoB,EACxB,MAAM,CAAC,AAAC,GAAQ,EAAI,OAAO,EAAI,IAAI,KAAK,EAAI,OAAO,GAAK,GACxD,MAAM,CAAC,CAAC,EAAK,IAAQ,EAAO,GAAI,CAAL,UAAgB,GAAI,CAAC,CAAG,GAC/C,EAAqB,EACzB,MAAM,CACN,AAAC,GACA,EAAI,OAAO,EACX,IAAI,KAAK,EAAI,OAAO,GAAK,GACzB,IAAI,KAAK,EAAI,OAAO,EAAI,GAEzB,MAAM,CAAC,CAAC,EAAK,IAAQ,GAAO,EAAI,CAAL,UAAgB,GAAI,CAAC,CAAG,GAG/C,EAAqB,EAAe,MAAM,CAC/C,AAAC,GAAQ,IAAI,KAAK,EAAI,UAAU,GAAK,GACpC,MAAM,CACF,EAAsB,EAAe,MAAM,CAChD,AAAC,GACA,IAAI,KAAK,EAAI,UAAU,GAAK,GAC5B,IAAI,KAAK,EAAI,UAAU,EAAI,GAC3B,MAAM,CAER,MAAO,CACN,CACC,MAAO,QACP,MACC,EAAa,EACV,CAAA,EAAG,EAAW,GAAG,EAAE,AAAC,GAAe,GAAA,CAAG,CAAE,cAAc,GAAG,CAAC,CAAC,CAC3D,IACJ,OAAQ,CACT,EACA,CACC,MAAO,UACP,MAAO,CAAC,CAAC,EAAE,CAAC,EAAiB,GAAA,CAAG,CAAE,cAAc,GAAA,CAAI,CACpD,OAAQ,CACT,EACA,CACC,MAAO,OACP,MAAO,CAAC,CAAC,EAAE,CAAC,EAAe,GAAA,CAAG,CAAE,cAAc,GAAA,CAAI,CAClD,OAAQ,EAA0B,EAAmB,EACtD,EACA,CACC,MAAO,UACP,MACC,EAAe,EAAI,CAAC,CAAC,EAAE,CAAC,EAAiB,GAAA,CAAG,CAAE,cAAc,GAAA,CAAI,CAAG,KACpE,OAAQ,EAAe,EAAI,CAAC,EAAe,CAC5C,EACA,CACC,MAAO,iBACP,MAAO,EAAe,MAAM,CAC5B,OAAQ,EACP,EACA,EAEF,EACA,AACF,CDtIA,SAAS,EAA0B,CAAe,CAAE,CAAgB,SACnE,AAAiB,GAAG,CAAhB,EACkB,KAAd,CAAoB,EAAV,EAEX,KAAK,KAAK,EAAG,EAAU,CAAA,CAAQ,CAAI,EAAvB,KAA+C,EACnE,CAKO,CANgD,MAAM,QAMvC,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,GAK9C,AAFyB,CAExB,MAF8B,CAAA,EAAA,EAAA,WAER,sBAFQ,AAAiC,KAGnE,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,cAIV,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,GAE5C,CAAC,GACJ,CAAA,EAAA,EAAA,QAAA,AAAQ,CADa,CACZ,cAIV,IAAM,EAAM,IAAI,KACV,EAAqB,IAAI,KAAK,EAAI,OAAO,GAAK,IAAI,IAClD,CADuD,CACjC,IAAI,AADkC,KAAK,AAEtE,EAAI,OAAO,GAAK,KAAK,IAIhB,CAJqB,AAInB,KAJwB,AAIlB,CAAc,CAAE,CAAG,EAJI,IAIE,EACrC,IAAI,CAAC,QACL,MAAM,CAAC,+CACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MACjB,GAAG,CAAC,aAAc,EAAmB,WAAW,IAG5C,CAAE,KAAM,CAAe,CAAE,CAAG,MAAM,EACtC,IAAI,CAAC,QACL,MAAM,CAAC,+CACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MACjB,GAAG,CAAC,aAAc,EAAoB,WAAW,IACjD,EAAE,CAAC,aAAc,EAAmB,WAAW,IAG3C,CAAE,KAAM,CAAU,CAAE,CAAG,MAAM,EACjC,IAAI,CAAC,QACL,MAAM,CAAC,mCACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MACjB,EAAE,CAAC,cAAe,MAEd,EAAa,GAAc,EAAE,CAC7B,EAAc,GAAkB,EAAE,CAClC,EAAe,GAAmB,EAAE,CAGpC,EAAiB,EAAW,MAAM,CACvC,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAkB,EAAW,MAAM,CACxC,AAAC,GAAmB,gBAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAiB,EAAW,MAAM,CACvC,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAc,EAAW,MAAM,CAAC,AAAC,GAAmB,WAAb,EAAE,MAAM,EAAe,MAAM,CACpE,EAAc,EAAW,MAAM,CAAC,AAAC,GAAmB,YAAb,EAAE,MAAM,EAAgB,MAAM,CAGrE,EAAmB,EAAY,MAAM,CAC1C,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAoB,EAAY,MAAM,CAC3C,AAAC,GAAM,AAAa,kBAAX,MAAM,EACd,MAAM,CACF,EAAmB,EAAY,MAAM,CAC1C,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAgB,EAAY,MAAM,CAAC,AAAC,GAAmB,WAAb,EAAE,MAAM,EAAe,MAAM,CAGvE,EAAoB,EAAa,MAAM,CAC5C,AAAC,GAAmB,AAAb,gBAAE,MAAM,EACd,MAAM,CACF,EAAqB,EAAa,MAAM,CAC7C,AAAC,GAAM,AAAa,kBAAX,MAAM,EACd,MAAM,CACF,EAAoB,EAAa,MAAM,CAC5C,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CAKR,MAAO,CACN,CACC,MAAO,SACP,MAAO,EACP,OAAQ,EAA0B,EARb,EAAa,MAAM,CACxC,AAAD,GAAO,AAAa,CAO8B,YAPzC,MAAM,EACd,MAAM,CAOP,EACA,CACC,MAAO,YACP,MAAO,EACP,OAAQ,EAA0B,EAAkB,EACrD,EACA,CACC,MAAO,cACP,MAAO,EACP,OAAQ,EAA0B,EAAmB,EACtD,EACA,CACC,MAAO,YACP,MAAO,EACP,OAAQ,EAA0B,EAAkB,EACrD,EACA,CACC,MAAO,UACP,MAAO,EACP,OAAQ,CACT,EACA,AACF,CF3HO,eAAe,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAEnC,GAAI,CAAC,EACJ,MAAO,CAAA,CADO,CACP,EAAA,QAAA,AAAQ,IAGhB,GAAM,CACL,KAAM,MAAE,CAAI,CAAE,CACd,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAE/B,GAAI,CAAC,EACJ,IADU,EACH,CAAA,EAAA,EAAA,QAAA,AAAQ,IAGhB,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAEhD,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAGhB,GAAM,CAAE,KAAM,CAAY,CAAE,OAAK,CAAE,CAAG,MAAM,EAC1C,IAAI,CAAC,aACL,MAAM,CACN,CAAC;;;;;;;IAOA,CAAC,EAEF,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MAEnB,GAAI,EACH,KADU,CACJ,AAAI,MAAM,CAAC,2BAA2B,EAAE,EAAM,OAAO,CAAA,CAAE,EAG9D,IAAM,EAAY,CAAC,GAAgB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAAS,CACpD,CADmD,MAC3C,EAAI,MAAM,EAAI,WACtB,WACC,OAAO,EAAI,gBAAgB,EAAI,IAC/B,OAAO,EAAI,aAAa,EAAI,GAC3B,OAAO,EAAI,gBAAgB,EAAI,EAAI,kBAAkB,EAAI,GAC5D,CAAC,EAEK,EAAa,EAAU,MAAM,CAC7B,EAAU,EAAU,MAAM,CAAC,AAAC,GAAM,AAAa,eAAX,MAAM,EAAiB,MAAM,CACjE,EAAW,EAAU,MAAM,CAAC,AAAC,GAAmB,cAAb,EAAE,MAAM,EAAkB,MAAM,CACtD,EAAU,MAAM,CAClC,AAAC,GAAmB,iBAAb,EAAE,MAAM,EACd,MAAM,CACR,IAAM,EAAa,EAAU,MAAM,CAClC,CAAC,EAAK,IAAa,GAAO,EAAS,CAAV,SAAoB,GAAI,CAAC,CAClD,GAGD,MAAO,CACN,CACC,MAAO,cACP,MAAO,EACP,OA3EwB,KA2EhB,GAAa,CACtB,EACA,CACC,AAHyB,MAGlB,WACP,IAJ8C,EAIvC,EACP,OA/EqB,AA+Eb,OAAU,EACnB,EADuB,AAEvB,CACC,MAAO,WAHiC,CAIxC,MAAO,EACP,OACC,EAAW,EApFmB,CAAC,CAoFhB,GAnFe,GAoFhC,EACA,CACC,MAAO,aAHqC,KAI5C,MAAO,CAAC,CAAC,EAAE,CAAC,EAnFU,GAmFG,CAAgB,CAAE,MAAlB,QAAgC,GAAA,CAAI,CAC7D,OAvF4B,MAuFpB,GAAa,CACtB,EACA,CAF0B,AAGzB,MAAO,aACP,MAJkD,AAI3C,EACP,OA3FuB,KA2Ff,EAAa,EACtB,EAD0B,AAE1B,AACF,CHvFO,eAAe,IGoF0B,AHnF/C,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAE5C,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAChD,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAIhB,GAAM,CAAE,KAAM,CAAW,OAAE,CAAK,CAAE,CAAG,MAAM,EACzC,IAAI,CAAC,YACL,MAAM,CACN,CAAC;;;IAGA,CAAC,EAEF,EAAE,CAAC,aAAc,GACjB,KAAK,CAAC,eAAgB,CAAE,WAAW,CAAM,GACzC,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,AAhCqB,KAkC7B,GAAI,EAAO,CACV,IAAM,EACL,EAAM,OAAO,EACb,EAAM,IAAI,EACV,KAAK,SAAS,CAAC,IACf,wBACD,OAAM,AAAI,MAAM,CAAC,yBAAyB,EAAE,EAAA,CAAc,CAC3D,CAWA,IAAM,EARW,AAQM,CARL,GAAe,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAAa,CACtD,GAAI,EADiD,AACzC,EAAE,CACd,OAAQ,EAAQ,MAAM,EAAI,UAC1B,YAAa,EAAQ,WAAW,CAChC,WAAY,EAAQ,UAAU,CAC/B,CAAC,EAG+B,MAAM,CACrC,AAAC,GAAM,CAAC,CAAC,EAAE,WAAW,EAAI,EAAE,UAAA,AAAU,GAIjC,EAAiB,EAAe,MAAM,CAC3C,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAe,EAAe,MAAM,CACzC,AAAC,GAAM,AAAa,cAAX,MAAM,EACd,MAAM,CACF,EAAgB,EAAe,MAAM,CAC1C,AAAC,GAAmB,aAAb,EAAE,MAAM,EAAgC,uBAAb,EAAE,MAAM,EACzC,MAAM,CACF,EAAc,EAAe,MAAM,CACxC,AAAC,GAAmB,WAAb,EAAE,MAAM,EACd,MAAM,CAER,MAAO,CACN,CACC,MAAO,YACP,MAAO,EACP,OAxEsB,AAwEd,SAAiB,CAC1B,EACA,CAF8B,AAG7B,MAAO,UACP,GAJgD,GAIzC,EACP,OAAQ,EAAe,EAAI,EA5EE,EA4EE,CAChC,EACA,CACC,MAAO,WACP,MAAO,EACP,OACC,EAAgB,EAjFa,CAAC,CAiFV,GAhFS,GAiF/B,EACA,CACC,MAAO,SACP,GAJgD,GAIzC,EACP,OAAQ,EAAc,EApFM,CAAC,CAoFH,GAnFE,GAoF7B,EACA,AACF,CC5EO,eAAe,CDyEgC,GCxErD,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAEnC,GAAI,CAAC,EACJ,MAAO,CAAA,CADO,CACP,EAAA,QAAA,AAAQ,IAGhB,GAAM,CACL,KAAM,MAAE,CAAI,CAAE,CACd,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAE/B,GAAI,CAAC,EACJ,IADU,EACH,CAAA,EAAA,EAAA,QAAA,AAAQ,IAGhB,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAkB,AAAlB,IAE9B,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAGhB,GAAM,CAAE,KAAM,CAAiB,OAAE,CAAK,CAAE,CAAG,MAAM,EAC/C,IAAI,CAAC,mBACL,MAAM,CAAC,yCACP,EAAE,CAAC,aAAc,GACjB,KAAK,CAAC,aAAc,CAAE,UAAW,EAAM,GAEzC,GAAI,EACH,KADU,CACJ,AAAI,MAAM,CAAC,iCAAiC,EAAE,EAAM,OAAO,CAAA,CAAE,EAWpE,IAAM,EARiB,AAQM,CARL,GAAqB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAQ,EAAD,AAC5D,GAAI,EAAG,EAAE,CACT,OAAQ,EAAG,MAAM,CACjB,YAAa,EAAG,YAAY,EAAI,EAChC,YAAa,EAAG,WAAW,CAC3B,WAAY,KACb,CAAC,EAE2C,MAAM,CACjD,AAAC,GAAO,CAAC,CAAC,EAAG,WAAW,EAAI,EAAG,UAAA,AAAU,GAGpC,EAAW,EAAqB,MAAM,CACtC,EAAU,EAAqB,MAAM,CAC1C,AAAC,GAAqB,qBAAd,EAAG,MAAM,EAChB,MAAM,CACF,EAAU,EAAqB,MAAM,CAC1C,AAAC,GAAO,AAAc,cAAX,MAAM,EAChB,MAAM,CACF,EAAW,EAAqB,MAAM,CAC3C,AAAC,GAAqB,aAAd,EAAG,MAAM,EAChB,MAAM,CACF,EAAa,EAAqB,MAAM,CAC7C,CAAC,EAAK,IAAO,EAAM,EAAG,WAAW,CACjC,GAGD,MAAO,CACN,CACC,MAAO,mBACP,MAAO,EACP,OAAQ,EAAU,EAAI,EA/EO,EA+EH,CAC3B,EACA,CACC,MAAO,UACP,MAAO,EACP,OAnFoB,KAmFZ,GAAU,CACnB,EACA,CAFuB,AAGtB,MAAO,WAHgC,AAIvC,MAAO,EACP,OAvFqB,AAuFb,QAAW,CACpB,EACA,CAFwB,AAGvB,MAAO,YAHkC,EAIzC,MArFK,CAqFE,GArFE,KAAK,YAAY,CAAC,QAAS,CACrC,MAAO,WACP,SAAU,KACX,GAAG,MAAM,CAAC,AAkFc,EAxFA,KAyFtB,CAnFgB,MARQ,KA2FhB,GAAa,CACtB,EACA,CAF0B,AAGzB,MAAO,eAHuC,AAI9C,MAAO,EACP,OA/FyB,KA+FjB,GAAW,CACpB,EACA,AACF,CAH0B,AC1FnB,eAAe,IACrB,GDyF+C,CCzFzC,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAkB,AAAlB,IAC9B,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAGhB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAE5C,CAAE,KAAM,CAAc,OAAE,CAAK,CAAE,CAAG,MAAM,EAC5C,IAAI,CAAC,uBACL,MAAM,CAAC,2BACP,EAAE,CAAC,aAAc,GAEnB,GAAI,EACH,KADU,CACJ,AAAI,MAAM,CAAC,6BAA6B,EAAE,EAAM,OAAO,CAAA,CAAE,EAIhE,IAAM,EAAc,CAAC,GAAkB,EAAE,AAAF,EAAI,MAAM,CAChD,AAAC,GAAW,CAAC,EAAO,WAAW,EAG1B,EAAe,EAAY,MAAM,CACjC,EAAgB,EAAY,MAAM,CAAC,AAAC,GAAM,AAAa,aAAX,MAAM,EAAe,MAAM,CACvE,EAAiB,EAAY,MAAM,CACxC,AAAC,GAAmB,YAAb,EAAE,MAAM,EACd,MAAM,CACF,EAAmB,EAAY,MAAM,CAC1C,AAAC,GAAmB,cAAb,EAAE,MAAM,EACd,MAAM,CAER,MAAO,CACN,CACC,MAAO,gBACP,MAAO,EACP,YAAQ,EAAe,EACxB,EAD4B,AAE5B,CACC,MAAO,SACP,CAJ2C,KAIpC,EACP,OAhDmB,KAgDX,GAAgB,CACzB,EACA,CAF6B,AAG5B,MAAO,UACP,CAJ4C,KAIrC,EACP,OAAQ,AApDY,QAoDK,CAC1B,EACA,CAF8B,AAG7B,MAAO,WAHuC,CAI9C,MAAO,EACP,OACC,EAAmB,EAzDW,CAAC,CA0D5B,GAzD2B,GA2DhC,EACA,AACF,CMnBO,SAAS,EACf,CAAgC,CAChC,EAAiC,CAAC,CAAC,EAEnC,ANYM,GMZA,uBACL,EAAwB,CAAC,uBACzB,EAAwB,EAAQ,QAAQ,EAAI,CAAC,CAC7C,YAAW,CAAI,UACf,CAAQ,CACR,CAAG,EAGE,OACQ,IAAb,EAAyB,EAAW,EAC/B,OACQ,IAAb,EAAyB,EAAW,SAErC,MAAI,EACI,EACJ,IAAI,EAFM,GAED,KAFS,OAEG,CAAC,EAFM,MAEG,CAC/B,IAHuC,EAGhC,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CACxB,GAAG,MAAM,CAAC,GACT,QAGG,IAAI,KAAK,YAAY,CAAC,QAAS,CACrC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CACxB,GAAG,MAAM,CAAC,EAAQ,IACnB,CJzEO,eAAe,IACrB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAEnC,GAAI,CAAC,EACJ,MAAO,CAAA,CADO,CACP,EAAA,QAAA,AAAQ,IAGhB,GAAM,CACL,KAAM,MAAE,CAAI,CAAE,CACd,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAE/B,GAAI,CAAC,EACJ,IADU,EACH,CAAA,EAAA,EAAA,QAAA,AAAQ,IAGhB,IAAM,EAAkB,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAEhD,GAAI,CAAC,EACJ,MAAO,CAAA,EAAA,EAAA,IADc,IACd,AAAQ,IAGhB,GAAM,CAAE,KAAM,CAAU,OAAE,CAAK,CAAE,CAAG,MAAM,EACxC,IAAI,CAAC,WACL,MAAM,CAAC,cACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MAEnB,GAAI,EACH,KADU,CACJ,AAAI,MAAM,CAAC,yBAAyB,EAAE,EAAM,OAAO,CAAA,CAAE,EAG5D,IAAM,EAAU,GAAc,EAAE,CAC1B,EAAe,EAAQ,MAAM,CAC7B,EAAgB,EAAQ,MAAM,CAAC,AAAC,GAAmB,WAAb,EAAE,MAAM,EAAe,MAAM,CACnE,EAAkB,EAAQ,MAAM,CAAC,AAAC,GAAM,AAAa,eAAX,MAAM,EAAiB,MAAM,CAEvE,CAAE,KAAM,CAAc,CAAE,CAAG,MAAM,EACrC,IAAI,CAAC,mBACL,MAAM,CAAC,mDACP,EAAE,CAAC,aAAc,GACjB,EAAE,CAAC,aAAc,MAEb,EACL,GAMO,EAAE,CAEJ,EAAkB,IAAI,KAC5B,EAAgB,WAAW,CAAC,EAAgB,WAAW,GAAK,GAE5D,IAAM,EAAoB,EACxB,MAAM,CACN,AAAC,GAAO,IAAI,KAAK,EAAG,UAAU,EAAE,OAAO,IAAM,EAAgB,OAAO,IAEpE,MAAM,CAAC,CAAC,EAAK,IAAO,GAAO,EAAG,CAAJ,WAAgB,GAAI,CAAC,CAAG,GAE9C,EAAiB,IAAI,IAC1B,EACE,MAAM,CACN,AAAC,GAAO,EAAG,SAAS,EAAI,IAAI,KAAK,EAAG,UAAU,GAAK,GAEnD,GAAG,CAAC,AAAC,GAAO,EAAG,SAAS,GACzB,IAAI,CAEA,EAAe,CACpB,QACA,mBACA,WACA,UACA,qBACA,CACK,EAAqB,EAAO,MAAM,CAAC,AAAC,GACzC,EAAa,QAAQ,CAAC,CAAC,EAAG,MAAM,EAAI,EAAA,CAAE,CAAE,WAAW,KAE9C,EAAc,EAAmB,MAAM,CAC5C,CAAC,EAAK,IAAO,GAAO,EAAG,CAAJ,WAAgB,GAAI,CAAC,CACxC,GAGK,EACL,EAAe,EACZ,KAAK,KAAK,CAAE,EAAgB,EA3FH,KA4FzB,EAEJ,MAHgD,AAGzC,CACN,CACC,MAAO,gBACP,MAAO,EACP,OAAQ,CACT,EACA,CACC,MAAO,iBACP,MAAO,EACP,OAAQ,CACT,EACA,CACC,MAAO,cACP,MAAO,EAAe,GACtB,OAAQ,CACT,EACA,CACC,MAAO,gBACP,MAAO,EAAe,GACtB,OAAQ,EAAmB,MAAM,AAClC,EACA,AACF,CVtGO,eAAe,EACrB,CAAgB,CAChB,QAAE,CAAM,CAAyC,EAEjD,GAAM,MAAE,CAAI,CAAE,CAAG,MAAM,EAEvB,GAAI,CACH,IAAI,EAEJ,OAAQ,GACP,IAAK,eACJ,EAAQ,MAAM,IACd,KACD,KAAK,OACJ,EAAQ,MAAM,IACd,KACD,KAAK,WACJ,EAAQ,MAAM,IACd,KACD,KAAK,YACJ,EAAQ,MAAM,IACd,KACD,KAAK,YACJ,EAAQ,MAAM,IACd,KACD,KAAK,WACJ,EAAQ,MAAM,IACd,KACD,KAAK,YACJ,EAAQ,MAAM,IACd,KACD,KAAK,YACJ,EAAQ,MAAM,IACd,KACD,KAAK,kBACJ,EAAQ,MAAM,IACd,KACD,KAAK,OACJ,EAAQ,MAAM,IACd,KACD,KAAK,UACJ,EAAQ,MAAM,IACd,KACD,SACC,OAAO,EAAA,YAAY,CAAC,IAAI,CAAC,CAAE,MAAO,cAAe,EAAG,CAAE,OAAQ,GAAI,EACpE,CAEA,OAAO,EAAA,YAAY,CAAC,IAAI,CACvB,OAAE,CAAM,EACR,CACC,QAAS,CACR,gBAzDiB,CAyDA,gDAClB,CACD,EAEF,CAAE,MAAO,EAAO,CAEf,OADA,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,EAAK,CAAC,CAAC,CAAE,GAC5C,EAAA,YAAY,CAAC,IAAI,CACvB,CAAE,MAAO,uBAAwB,EACjC,CAAE,OAAQ,GAAI,EAEhB,CACD,2BCjEA,IAAA,EAAA,EAAA,CAAA,CAAA,QAIA,IAAM,EAAc,IAAI,EAAA,mBAAmB,CAAC,CACxC,WAAY,CACR,KAAM,EAAA,SAAS,CAAC,SAAS,CACzB,KAAM,+BACN,SAAU,yBACV,SAAU,QACV,WAAY,EAChB,EACA,QAAS,CAAA,OACT,IADiD,eACc,CAA3C,EACpB,iBAAkB,4DAClB,iBAZqB,GAarB,SAAA,CACJ,GAIM,kBAAE,CAAgB,sBAAE,CAAoB,aAAE,CAAW,CAAE,CAAG,EAChE,SAAS,IACL,MAAO,CAAA,EAAA,EAAA,UAAA,AAAW,EAAC,kBACf,uBACA,CACJ,EACJ,CAEO,eAAe,EAAQ,CAAG,CAAE,CAAG,CAAE,CAAG,EACnC,EAAY,KAAK,EAAE,AACnB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,+BAAgC,QAAQ,MAAM,CAAC,MAAM,IAE7E,IAAI,EAAU,+BAKV,EAAU,EAAQ,OAAO,CAAC,WAAY,KAAO,IAMjD,IAAM,EAAgB,MAAM,EAAY,OAAO,CAAC,EAAK,EAAK,SACtD,EACA,mBAHE,CAAA,CAIN,GACA,GAAI,CAAC,EAID,OAHA,EAAI,IADY,MACF,CAAG,IACjB,EAAI,GAAG,CAAC,eACS,MAAjB,CAAwB,CAApB,IAAyB,KAAhB,EAAoB,EAAI,SAAS,CAAC,IAAI,CAAC,EAAK,QAAQ,OAAO,IACjE,KAEX,GAAM,SAAE,CAAO,QAAE,CAAM,YAAE,CAAU,CAAE,WAAS,CAAE,aAAW,mBAAE,CAAiB,qBAAE,CAAmB,sBAAE,CAAoB,yBAAE,CAAuB,kBAAE,CAAgB,yBAAE,CAAuB,CAAE,uBAAqB,CAAE,CAAG,EACnN,EAAoB,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,GACvC,GAAQ,EAAQ,EAAkB,aAAa,CAAC,EAAkB,EAAI,EAAkB,MAAM,CAAC,EAAiB,AAAjB,EAC7F,EAAY,WAEa,MAAvB,EAA8B,KAAK,EAAI,EAAoB,SAAA,AAAS,EAAE,AACtE,MAAM,EAAoB,SAAS,CAAC,EAAK,EAAK,GAAW,GAEzD,EAAI,GAAG,CAAC,gCAEL,MAEX,GAAI,GAAS,CAAC,EAAa,CACvB,IAAM,GAAgB,CAAQ,EAAkB,MAAM,CAAC,EAAiB,CAClE,EAAgB,EAAkB,aAAa,CAAC,EAAkB,CACxE,GAAI,IAC+B,IAA3B,EAAc,KADH,GACW,EAAc,CAAC,EAAe,CACpD,GAAI,EAAW,YAAY,CAAC,WAAW,CACnC,CADqC,MAC9B,MAAM,GAEjB,OAAM,IAAI,EAAA,eAAe,AAC7B,CAER,CACA,IAAI,EAAW,MACX,GAAU,EAAY,IAAb,CAAkB,EAAK,EAAD,CAG/B,GAAW,AAAa,OAHqB,KAC7C,EAAW,CAAA,EAEwB,IAAM,CAAA,EAE7C,IAAM,GACgB,IAAtB,EAAY,EAAkB,GAAb,EAEjB,CAAC,EAKK,EAAqB,GAAS,CAAC,EAIjC,GAAyB,GACzB,CAAA,EAAA,EAAA,iBADkD,aAClD,AAA8B,EAAC,CAC3B,KAAM,IAbqF,sBAc3F,wBACA,EACA,gBAAiB,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,uBACnC,CACJ,EACJ,GAEJ,IAAM,EAAS,EAAI,MAAM,EAAI,MACvB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAa,EAAO,kBAAkB,GACtC,EAAU,QACZ,EACA,oBACA,WAAY,CACR,aAAc,CACV,gBAAgB,CAAQ,EAAW,YAAY,CAAC,cAAc,AAClE,EACA,iBAAiB,CAAQ,EAAW,eAAe,yBACnD,EACA,iBAAkB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,oBACtC,kBAAmB,EAAW,SAAS,CACvC,UAAW,EAAI,SAAS,CACxB,QAAU,AAAD,IACL,EAAI,EAAE,CAAC,QAAS,EACpB,EACA,sBAAkB,EAClB,8BAA+B,CAAC,EAAO,EAAU,IAAe,EAAY,cAAc,CAAC,EAAK,EAAO,EAAc,EACzH,EACA,cAAe,SACX,CACJ,CACJ,EACM,EAAc,IAAI,EAAA,eAAe,CAAC,GAClC,EAAc,IAAI,EAAA,gBAAgB,CAAC,GACnC,EAAU,EAAA,kBAAkB,CAAC,mBAAmB,CAAC,EAAa,CAAA,EAAA,EAAA,sBAAA,AAAsB,EAAC,IAC3F,GAAI,CACA,IAAM,EAAoB,MAAO,GACtB,EAAY,MAAM,CAAC,EAAS,GAAS,OAAO,CAAC,KAChD,GAAI,CAAC,EAAM,OACX,EAAK,aAAa,CAAC,CACf,mBAAoB,EAAI,UAAU,CAClC,YAAY,CAChB,GACA,IAAM,EAAqB,EAAO,qBAAqB,GAEvD,GAAI,CAAC,EACD,OAEJ,GAAI,EAAmB,GAAG,CAAC,EAHF,kBAGwB,EAAA,cAAc,CAAC,aAAa,CAAE,YAC3E,QAAQ,IAAI,CAAC,CAAC,2BAA2B,EAAE,EAAmB,GAAG,CAAC,kBAAkB,qEAAqE,CAAC,EAG9J,IAAM,EAAQ,EAAmB,GAAG,CAAC,cACrC,GAAI,EAAO,CACP,IAAM,EAAO,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAO,CACjC,EAAK,aAAa,CAAC,CACf,aAAc,EACd,aAAc,EACd,iBAAkB,CACtB,GACA,EAAK,UAAU,CAAC,EACpB,MACI,CADG,CACE,UAAU,CAAC,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAS,CAE9C,GAEE,GAAgB,CAAoC,CAAA,EAAA,EAAA,EAA5B,YAA4B,AAAc,EAAC,EAAK,eACxE,EAAiB,MAAO,QACtB,EA2FI,EA1FR,IAAM,EAAoB,MAAO,oBAAE,CAAkB,CAAE,IACnD,GAAI,CACA,GAAI,CAAC,GAAiB,GAAwB,GAA2B,CAAC,EAKtE,OAJA,EAAI,SADsF,CAC5E,CAAG,IAEjB,EAAI,SAAS,CAAC,iBAAkB,eAChC,EAAI,GAAG,CAAC,gCACD,KAEX,IAAM,EAAW,MAAM,EAAkB,GACzC,EAAI,YAAY,CAAG,EAAQ,UAAU,CAAC,YAAY,CAClD,IAAI,EAAmB,EAAQ,UAAU,CAAC,gBAAgB,CAGtD,GACI,EAAI,SAAS,EAAE,CACf,CAFc,CAEV,SAAS,CAAC,GACd,OAAmB,GAG3B,IAAM,EAAY,EAAQ,UAAU,CAAC,aAAa,CAGlD,IAAI,EA6BA,OADA,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAa,EAAa,EAAU,EAAQ,UAAU,CAAC,gBAAgB,EACnF,IA7BA,EACP,IAAM,EAAO,MAAM,EAAS,IAAI,GAE1B,EAAU,CAAA,EAAA,EAAA,yBAAA,AAAyB,EAAC,EAAS,OAAO,EACtD,IACA,CAAO,CAAC,EAAA,GADG,mBACmB,CAAC,CAAG,CAAA,EAElC,CAAC,CAAO,CAAC,eAAe,EAAI,EAAK,IAAI,EAAE,CACvC,CAAO,CAAC,eAAe,CAAG,EAAK,IAAA,AAAI,EAEvC,IAAM,EAAa,AAAkD,SAA3C,EAAQ,UAAU,CAAC,mBAAmB,IAAoB,EAAQ,UAAU,CAAC,mBAAmB,EAAI,EAAA,cAAc,AAAd,GAAiB,AAAQ,EAAQ,UAAU,CAAC,mBAAmB,CACvL,EAAS,KAA8C,IAAvC,EAAQ,UAAU,CAAC,eAAe,EAAoB,EAAQ,UAAU,CAAC,eAAe,EAAI,EAAA,cAAc,MAAG,EAAY,EAAQ,UAAU,CAAC,eAAe,CAcjL,MAZmB,CAYZ,AAXH,MAAO,CACH,KAAM,EAAA,eAAe,CAAC,SAAS,CAC/B,OAAQ,EAAS,MAAM,CACvB,KAAM,OAAO,IAAI,CAAC,MAAM,EAAK,WAAW,YACxC,CACJ,EACA,aAAc,CACV,aACA,QACJ,CACJ,CAEJ,CAKJ,CAAE,KALS,CAKF,EAAK,CAcV,MAX0B,MAAtB,EAA6B,KAAK,EAAI,EAAmB,OAAA,AAAO,EAAE,CAClE,MAAM,EAAY,cAAc,CAAC,EAAK,EAAK,CACvC,WAAY,aACZ,UAAW,EACX,UAAW,QACX,iBAAkB,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,oBAClC,uBACA,CACJ,EACJ,EAAG,GAED,CACV,CACJ,EACM,EAAa,MAAM,EAAY,cAAc,CAAC,KAChD,aACA,WACA,EACA,UAAW,EAAA,SAAS,CAAC,SAAS,CAC9B,YAAY,oBACZ,EACA,kBAAmB,wBACnB,0BACA,oBACA,EACA,UAAW,EAAI,SAAS,eACxB,CACJ,GAEA,GAAI,CAAC,EACD,KADQ,EACD,KAEX,GAAI,CAAe,MAAd,CAAqB,EAAS,AAA0C,GAA9C,IAAK,EAAoB,EAAW,KAAA,AAAK,EAAY,KAAK,EAAI,EAAkB,IAAI,IAAM,EAAA,eAAe,CAAC,SAAS,CAE9I,CAFgJ,KAE1I,OAAO,cAAc,CAAC,AAAI,MAAM,CAAC,kDAAkD,EAAgB,MAAd,CAAqB,EAAS,AAA2C,GAA/C,GAAK,GAAqB,EAAW,KAAA,AAAK,EAAY,KAAK,EAAI,EAAmB,IAAI,CAAA,CAAE,EAAG,oBAAqB,CACjO,MAAO,OACP,YAAY,EACZ,cAAc,CAClB,EAEA,CAAC,GACD,EAAI,SAAS,CADG,AACF,iBAAkB,EAAuB,cAAgB,EAAW,MAAM,CAAG,OAAS,EAAW,OAAO,CAAG,QAAU,OAGnI,GACA,EAAI,QADS,CACA,CAAC,gBAAiB,2DAEnC,IAAM,EAAU,CAAA,EAAA,EAAA,2BAA2B,AAA3B,EAA4B,EAAW,KAAK,CAAC,OAAO,EAcpE,OAbI,AAAE,CAAD,EAAkB,GACnB,EADwB,AAChB,GADmB,GACb,CAAC,EAAA,sBAAsB,GAIrC,EAAW,YAAY,EAAK,EAAD,AAAK,SAAS,CAAC,kBAAqB,EAAD,AAAS,GAAG,CAAC,kBAAkB,AAC7F,EAAQ,GAAG,CAAC,gBAAiB,CAAA,EAAA,EAAA,qBAAqB,AAArB,EAAsB,EAAW,YAAY,GAE9E,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAa,EAChC,IAAI,SAAS,EAAW,KAAK,CAAC,IAAI,CAAE,SAChC,EACA,OAAQ,EAAW,KAAK,CAAC,MAAM,EAAI,GACvC,IACO,IACX,EAGI,EACA,MAAM,EAAe,EADT,CAGZ,MAAM,EAAO,qBAAqB,CAAC,EAAI,OAAO,CAAE,IAAI,EAAO,KAAK,CAAC,EAAA,cAAc,CAAC,aAAa,CAAE,CACvF,SAAU,CAAA,EAAG,EAAO,CAAC,EAAE,EAAA,CAAS,CAChC,KAAM,EAAA,QAAQ,CAAC,MAAM,CACrB,WAAY,CACR,cAAe,EACf,cAAe,EAAI,GACvB,AAD0B,CAE9B,EAAG,GAEf,CAAE,MAAO,EAAK,CAcV,GAbI,AAAE,CAAD,YAAgB,EAAA,eAAe,EAChC,CADmC,KAC7B,EAAY,cAAc,CAAC,EAAK,EAAK,CACvC,WAAY,aACZ,UAAW,EACX,UAAW,QACX,iBAAkB,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,oBAClC,uBACA,CACJ,EACJ,GAIA,EAAO,MAAM,EAKjB,OAHA,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAa,EAAa,IAAI,SAAS,KAAM,CAC5D,OAAQ,GACZ,IACO,IACX,CACJ,EAEA,qCAAqC","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17]}