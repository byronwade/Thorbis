{"version":3,"sources":["../../../../../../apps/web/src/components/ui/base-toolbar-actions.tsx","../../../../../../apps/web/src/components/work/work-view-switcher.tsx","../../../../../../apps/web/src/components/ui/column-visibility-menu.tsx","../../../../../../apps/web/src/components/ui/column-builder-dialog.tsx","../../../../../../apps/web/src/lib/datatable/field-introspection.ts"],"sourcesContent":["/**\n * BaseToolbarActions - Base Toolbar Actions Component\n *\n * Provides a reusable base for toolbar actions with common patterns:\n * - Optional view switcher\n * - Primary action button (New/Create)\n * - Import/Export dropdown\n * - Additional custom actions\n *\n * This reduces duplication across toolbar action components.\n */\n\nimport { Plus } from \"lucide-react\";\nimport Link from \"next/link\";\nimport type { ReactNode } from \"react\";\nimport {\n\ttype DataType,\n\tImportExportDropdownLazy as ImportExportDropdown,\n} from \"@/components/data/import-export-dropdown-lazy\";\nimport { Button } from \"@stratos/ui\";\nimport { WorkViewSwitcher } from \"@/components/work/work-view-switcher\";\nimport type { WorkSection } from \"@/lib/stores/work-view-store\";\n\nexport type BaseToolbarActionsProps = {\n\t/** Optional view switcher section (e.g., \"jobs\", \"invoices\", \"customers\") */\n\tviewSwitcherSection?: WorkSection;\n\n\t/** Primary action button configuration */\n\tprimaryAction?: {\n\t\thref: string;\n\t\tlabel: string;\n\t\ticon?: ReactNode;\n\t};\n\n\t/** Import/Export data type */\n\timportExportDataType?: DataType;\n\n\t/** Additional custom actions to render */\n\tchildren?: ReactNode;\n\n\t/** Custom actions to render before primary action */\n\tbeforePrimaryAction?: ReactNode;\n\n\t/** Custom actions to render after primary action */\n\tafterPrimaryAction?: ReactNode;\n};\n\nexport function BaseToolbarActions({\n\tviewSwitcherSection,\n\tprimaryAction,\n\timportExportDataType,\n\tchildren,\n\tbeforePrimaryAction,\n\tafterPrimaryAction,\n}: BaseToolbarActionsProps) {\n\treturn (\n\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t{viewSwitcherSection && (\n\t\t\t\t<WorkViewSwitcher section={viewSwitcherSection} />\n\t\t\t)}\n\t\t\t{beforePrimaryAction}\n\t\t\t{primaryAction && (\n\t\t\t\t<Button asChild className=\"font-medium\" size=\"sm\" variant=\"default\">\n\t\t\t\t\t<Link href={primaryAction.href}>\n\t\t\t\t\t\t{primaryAction.icon || <Plus className=\"size-4\" />}\n\t\t\t\t\t\t<span>{primaryAction.label}</span>\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t\t{afterPrimaryAction}\n\t\t\t{importExportDataType && (\n\t\t\t\t<ImportExportDropdown dataType={importExportDataType} />\n\t\t\t)}\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport { KanbanSquare, List } from \"lucide-react\";\nimport { useCallback } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport {\n\tuseSetWorkView,\n\tuseWorkView,\n\ttype WorkSection,\n\ttype WorkViewMode,\n} from \"@/lib/stores/work-view-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype WorkViewSwitcherProps = {\n\tsection: WorkSection;\n\tclassName?: string;\n\tdisabledModes?: Partial<Record<WorkViewMode, { reason: string }>>;\n};\n\nexport function WorkViewSwitcher({\n\tsection,\n\tclassName,\n\tdisabledModes,\n}: WorkViewSwitcherProps) {\n\tconst viewMode = useWorkView(section);\n\tconst setView = useSetWorkView(section);\n\n\tconst handleSelect = useCallback(\n\t\t(mode: WorkViewMode) => () => setView(mode),\n\t\t[setView],\n\t);\n\n\tconst isModeDisabled = (mode: WorkViewMode) =>\n\t\tdisabledModes?.[mode]?.reason !== undefined;\n\n\tconst tooltipFor = (mode: WorkViewMode) =>\n\t\tdisabledModes?.[mode]?.reason ??\n\t\t(mode === \"table\" ? \"Table view\" : \"Kanban board\");\n\n\treturn (\n\t\t<TooltipProvider>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"border-border/60 bg-background/80 flex h-7 items-center gap-0.5 rounded-md border p-0.5\",\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Tooltip delayDuration={150}>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\taria-pressed={viewMode === \"table\"}\n\t\t\t\t\t\t\tclassName={cn(\"h-6 w-7 p-0\", viewMode === \"table\" && \"bg-accent\")}\n\t\t\t\t\t\t\tonClick={handleSelect(\"table\")}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<List className=\"size-3.5\" />\n\t\t\t\t\t\t\t<span className=\"sr-only\">Table view</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent>Table view</TooltipContent>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip delayDuration={150}>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\taria-pressed={viewMode === \"kanban\"}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"h-6 w-7 p-0\",\n\t\t\t\t\t\t\t\tviewMode === \"kanban\" && \"bg-accent\",\n\t\t\t\t\t\t\t\tisModeDisabled(\"kanban\") && \"opacity-60\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tdisabled={isModeDisabled(\"kanban\")}\n\t\t\t\t\t\t\tonClick={handleSelect(\"kanban\")}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<KanbanSquare className=\"size-3.5\" />\n\t\t\t\t\t\t\t<span className=\"sr-only\">Kanban view</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent>{tooltipFor(\"kanban\")}</TooltipContent>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t</TooltipProvider>\n\t);\n}\n","\"use client\";\n\n/**\n * ColumnVisibilityMenu - Toolbar Component for Column Management\n *\n * Features:\n * - Dropdown menu for toggling column visibility\n * - Checkbox list of all hideable columns\n * - Quick actions: Show All / Hide All\n * - Integrates with Zustand store for persistence\n * - Excel-style column management\n *\n * Performance:\n * - Client component (uses state and interactions)\n * - Selective Zustand subscriptions\n * - Minimal re-renders\n */\n\nimport { Columns, Eye, EyeOff, Plus, Trash2 } from \"lucide-react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n\tButton,\n\tDropdownMenu,\n\tDropdownMenuCheckboxItem,\n\tDropdownMenuContent,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@stratos/ui\";\nimport { ColumnBuilderDialog } from \"./column-builder-dialog\";\nimport { useCustomColumnsStore } from \"@/lib/stores/custom-columns-store\";\nimport { useDataTableColumnsStore } from \"@/lib/stores/datatable-columns-store\";\n\nexport type ColumnVisibilityItem = {\n\tkey: string;\n\tlabel: string;\n};\n\ntype ColumnVisibilityMenuProps = {\n\t/** Entity type (e.g., \"appointments\", \"jobs\", \"customers\") */\n\tentity: string;\n\t/** List of columns that can be toggled */\n\tcolumns: ColumnVisibilityItem[];\n\t/** List of critical columns (always visible, shown for reference) */\n\tcriticalColumns?: ColumnVisibilityItem[];\n\t/** Optional custom trigger button */\n\ttrigger?: React.ReactNode;\n};\n\nexport function ColumnVisibilityMenu({\n\tentity,\n\tcolumns,\n\tcriticalColumns = [],\n\ttrigger,\n}: ColumnVisibilityMenuProps) {\n\t// Mounted state to prevent hydration mismatch\n\tconst [mounted, setMounted] = useState(false);\n\n\t// Dialog state\n\tconst [dialogOpen, setDialogOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\t// Zustand stores\n\tconst isColumnVisible = useDataTableColumnsStore(\n\t\t(state) => state.isColumnVisible,\n\t);\n\tconst toggleColumn = useDataTableColumnsStore((state) => state.toggleColumn);\n\tconst showAllColumns = useDataTableColumnsStore(\n\t\t(state) => state.showAllColumns,\n\t);\n\tconst hideAllColumns = useDataTableColumnsStore(\n\t\t(state) => state.hideAllColumns,\n\t);\n\tconst resetEntity = useDataTableColumnsStore((state) => state.resetEntity);\n\n\t// Subscribe to column visibility state to trigger re-renders when columns are toggled\n\tconst columnVisibilityState = useDataTableColumnsStore((state) =>\n\t\tentity ? state.entities[entity] : null,\n\t);\n\n\t// Custom columns store - get all columns and memoize\n\tconst allCustomColumns = useCustomColumnsStore((state) => state.columns);\n\tconst removeColumn = useCustomColumnsStore((state) => state.removeColumn);\n\n\t// Memoize custom columns for this entity to prevent re-renders\n\tconst customColumns = useMemo(\n\t\t() => allCustomColumns[entity] || [],\n\t\t[allCustomColumns, entity],\n\t);\n\n\t// Count visible columns (recompute when visibility state changes)\n\tconst visibleCount = useMemo(\n\t\t() => columns.filter((col) => isColumnVisible(entity, col.key)).length,\n\t\t[columns, entity, isColumnVisible],\n\t);\n\tconst allVisible = visibleCount === columns.length;\n\tconst noneVisible = visibleCount === 0;\n\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu>\n\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t{trigger || (\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t<Columns className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tColumns\n\t\t\t\t\t\t\t{mounted && visibleCount < columns.length && (\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground ml-1.5 text-xs\">\n\t\t\t\t\t\t\t\t\t({visibleCount}/{columns.length})\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-64\">\n\t\t\t\t\t<DropdownMenuLabel>\n\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t<span>Optional Columns</span>\n\t\t\t\t\t\t\t{mounted && columns.length > 0 && (\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-normal\">\n\t\t\t\t\t\t\t\t\t{visibleCount}/{columns.length}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs leading-tight font-normal\">\n\t\t\t\t\t\t\tCritical columns are always visible\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</DropdownMenuLabel>\n\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t{/* Add Custom Column Button */}\n\t\t\t\t\t<div className=\"px-2 py-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"w-full justify-start text-xs\"\n\t\t\t\t\t\t\tonClick={() => setDialogOpen(true)}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Plus className=\"mr-2 h-3.5 w-3.5\" />\n\t\t\t\t\t\t\tAdd Custom Column\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t{/* Quick Actions */}\n\t\t\t\t\t{columns.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-1 px-2 py-1\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"h-7 text-xs\"\n\t\t\t\t\t\t\t\t\tdisabled={allVisible}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tshowAllColumns(\n\t\t\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\t\t\tcolumns.map((c) => c.key),\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Eye className=\"mr-1.5 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\tShow All\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"h-7 text-xs\"\n\t\t\t\t\t\t\t\t\tdisabled={noneVisible}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\thideAllColumns(\n\t\t\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\t\t\tcolumns.map((c) => c.key),\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<EyeOff className=\"mr-1.5 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\tHide All\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"px-2 pb-1\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"h-7 w-full text-xs\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tresetEntity(entity);\n\t\t\t\t\t\t\t\t\t\t// Re-initialize with all columns visible (default state)\n\t\t\t\t\t\t\t\t\t\tshowAllColumns(\n\t\t\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\t\t\tcolumns.map((c) => c.key),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tReset to Default\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Critical Columns Section (Always Visible) */}\n\t\t\t\t\t{criticalColumns.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"px-2 py-2\">\n\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground mb-2 text-xs font-medium\">\n\t\t\t\t\t\t\t\t\tAlways Visible (Critical)\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{criticalColumns.map((column) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2 rounded-sm px-2 py-1.5 text-sm\"\n\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"border-primary bg-primary flex h-4 w-4 items-center justify-center rounded-sm border\">\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary-foreground h-3 w-3\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={3}\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">{column.label}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground ml-auto text-xs\">\n\t\t\t\t\t\t\t\t\t\t\tAlways\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{columns.length === 0 && criticalColumns.length === 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"text-muted-foreground px-2 py-3 text-center text-xs\">\n\t\t\t\t\t\t\t\tNo columns available to customize.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Optional Columns Section */}\n\t\t\t\t\t{columns.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{criticalColumns.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground px-2 pt-1 pb-2 text-xs font-medium\">\n\t\t\t\t\t\t\t\t\tOptional Columns\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"max-h-[300px] overflow-y-auto\">\n\t\t\t\t\t\t\t\t{mounted &&\n\t\t\t\t\t\t\t\t\tcolumns.map((column) => {\n\t\t\t\t\t\t\t\t\t\t// Get fresh visibility state for each render\n\t\t\t\t\t\t\t\t\t\tconst visible = columnVisibilityState?.[column.key] ?? true;\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuCheckboxItem\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={visible}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`${column.key}-${visible}`}\n\t\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={() => toggleColumn(entity, column.key)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible ? \"font-medium\" : \"text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{column.label}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuCheckboxItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t\t{/* Custom Columns Section */}\n\t\t\t\t\t\t\t\t{customColumns && customColumns.length > 0 && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuLabel className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\tCustom Columns\n\t\t\t\t\t\t\t\t\t\t</DropdownMenuLabel>\n\t\t\t\t\t\t\t\t\t\t{mounted &&\n\t\t\t\t\t\t\t\t\t\t\tcustomColumns.map((column) => {\n\t\t\t\t\t\t\t\t\t\t\t\t// Get fresh visibility state for each render\n\t\t\t\t\t\t\t\t\t\t\t\tconst visible =\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnVisibilityState?.[column.id] ?? true;\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"group relative\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${column.id}-${visible}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuCheckboxItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={visible}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer pr-8\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleColumn(entity, column.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"font-medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{column.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuCheckboxItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute top-1/2 right-2 h-5 w-5 -translate-y-1/2 opacity-0 transition-opacity group-hover:opacity-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveColumn(entity, column.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"text-destructive h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</DropdownMenuContent>\n\t\t\t</DropdownMenu>\n\n\t\t\t{/* Column Builder Dialog */}\n\t\t\t<ColumnBuilderDialog\n\t\t\t\tentity={entity}\n\t\t\t\tonOpenChange={setDialogOpen}\n\t\t\t\topen={dialogOpen}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","\"use client\";\n\n/**\n * Column Builder Dialog - Client Component\n *\n * Allows users to add custom database fields as columns in datatables.\n *\n * Features:\n * - Field selector with all available database fields\n * - Custom label input\n * - Width selection\n * - Format selection (auto-recommended based on field type)\n * - Sortable toggle\n * - Live preview\n */\n\nimport { useState } from \"react\";\nimport {\n\tButton,\n\tCheckbox,\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n\tInput,\n\tLabel,\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@stratos/ui\";\nimport { StandardFormField } from \"./standard-form-field\";\nimport { renderCustomColumn } from \"@/lib/datatable/custom-column-renderer\";\nimport {\n\ttype FieldDefinition,\n\tgetAvailableFields,\n} from \"@/lib/datatable/field-introspection\";\nimport type { CustomColumn } from \"@/lib/stores/custom-columns-store\";\nimport { useCustomColumnsStore } from \"@/lib/stores/custom-columns-store\";\n\ntype ColumnBuilderDialogProps = {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tentity: string; // Entity type (e.g., \"appointments\", \"jobs\")\n};\n\nexport function ColumnBuilderDialog({\n\topen,\n\tonOpenChange,\n\tentity,\n}: ColumnBuilderDialogProps) {\n\tconst addColumn = useCustomColumnsStore((state) => state.addColumn);\n\n\t// Available fields for this entity\n\tconst availableFields = getAvailableFields(entity);\n\n\t// Form state\n\tconst [selectedField, setSelectedField] = useState<FieldDefinition | null>(\n\t\tnull,\n\t);\n\tconst [label, setLabel] = useState(\"\");\n\tconst [width, setWidth] = useState<string>(\"auto\");\n\tconst [format, setFormat] = useState<CustomColumn[\"format\"]>(\"text\");\n\tconst [sortable, setSortable] = useState(true);\n\n\t// Update label and format when field is selected\n\tconst handleFieldSelect = (fieldPath: string) => {\n\t\tconst field = availableFields.find((f) => f.path === fieldPath);\n\t\tif (field) {\n\t\t\tsetSelectedField(field);\n\t\t\tsetLabel(field.label); // Auto-populate label\n\t\t\tsetFormat(field.recommended || \"text\"); // Auto-select recommended format\n\t\t}\n\t};\n\n\t// Submit handler\n\tconst handleSubmit = () => {\n\t\tif (!selectedField) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newColumn: CustomColumn = {\n\t\t\tid: `custom-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n\t\t\tfieldPath: selectedField.path,\n\t\t\tlabel,\n\t\t\twidth,\n\t\t\tformat,\n\t\t\tsortable,\n\t\t};\n\n\t\taddColumn(entity, newColumn);\n\n\t\t// Reset form\n\t\tsetSelectedField(null);\n\t\tsetLabel(\"\");\n\t\tsetWidth(\"auto\");\n\t\tsetFormat(\"text\");\n\t\tsetSortable(true);\n\n\t\t// Close dialog\n\t\tonOpenChange(false);\n\t};\n\n\t// Preview data - use a fixed date to avoid PPR issues\n\tconst previewData = {\n\t\t// Sample data for preview\n\t\tstring: \"Sample Text\",\n\t\tnumber: 12_345,\n\t\tdate: \"2024-01-15T10:30:00.000Z\", // Fixed date for preview\n\t\tboolean: true,\n\t\trelation: \"Related Value\",\n\t};\n\n\treturn (\n\t\t<Dialog onOpenChange={onOpenChange} open={open}>\n\t\t\t<DialogContent className=\"sm:max-w-2xl\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Add Custom Column</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tSelect a database field to add as a custom column to your table. The\n\t\t\t\t\t\tcolumn will appear after existing columns.\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"space-y-4 py-4\">\n\t\t\t\t\t{/* Field Selector */}\n\t\t\t\t\t<StandardFormField label=\"Database Field\" htmlFor=\"field\">\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tonValueChange={handleFieldSelect}\n\t\t\t\t\t\t\tvalue={selectedField?.path || \"\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger className=\"w-full\" id=\"field\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select a field...\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent className=\"max-h-[300px]\">\n\t\t\t\t\t\t\t\t{availableFields.map((field) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={field.path} value={field.path}>\n\t\t\t\t\t\t\t\t\t\t{field.label}{\" \"}\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t({field.path})\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t{/* Label Input */}\n\t\t\t\t\t<StandardFormField label=\"Column Label\" htmlFor=\"label\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"label\"\n\t\t\t\t\t\t\tonChange={(e) => setLabel(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Enter column label...\"\n\t\t\t\t\t\t\tvalue={label}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t{/* Width Select */}\n\t\t\t\t\t<StandardFormField label=\"Column Width\" htmlFor=\"width\">\n\t\t\t\t\t\t<Select onValueChange={setWidth} value={width}>\n\t\t\t\t\t\t\t<SelectTrigger id=\"width\">\n\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t<SelectItem value=\"auto\">Auto (Flexible)</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"sm\">Small (128px)</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"md\">Medium (192px)</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"lg\">Large (256px)</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"xl\">X-Large (384px)</SelectItem>\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t{/* Format Select */}\n\t\t\t\t\t<StandardFormField label=\"Format\" htmlFor=\"format\">\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\t\t\t\tsetFormat(value as CustomColumn[\"format\"])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={format}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"format\">\n\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t<SelectItem value=\"text\">Text</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"date\">Date/Time</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"currency\">Currency</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"number\">Number</SelectItem>\n\t\t\t\t\t\t\t\t<SelectItem value=\"badge\">Badge</SelectItem>\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t{/* Sortable Toggle */}\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tchecked={sortable}\n\t\t\t\t\t\t\tid=\"sortable\"\n\t\t\t\t\t\t\tonCheckedChange={(checked) => setSortable(checked === true)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\tclassName=\"cursor-pointer text-sm font-normal\"\n\t\t\t\t\t\t\thtmlFor=\"sortable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEnable sorting for this column\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Preview */}\n\t\t\t\t\t{selectedField && (\n\t\t\t\t\t\t<div className=\"bg-muted/30 space-y-2 rounded-lg border p-4\">\n\t\t\t\t\t\t\t<Label>Preview</Label>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground text-xs font-semibold\">\n\t\t\t\t\t\t\t\t\t{label || selectedField.label}:\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{renderCustomColumn(previewData, selectedField.type, format)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button onClick={() => onOpenChange(false)} variant=\"outline\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={!(selectedField && label.trim())}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd Column\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","/**\n * Field Introspection - Database Field Discovery\n *\n * Returns available fields for each entity type for custom column builder.\n * Includes direct fields and nested relationship fields.\n */\n\nexport type FieldDefinition = {\n\tpath: string; // e.g., \"email\", \"customer.email\"\n\tlabel: string; // Human-readable label\n\ttype: \"string\" | \"number\" | \"date\" | \"boolean\" | \"relation\";\n\trecommended?: \"text\" | \"date\" | \"currency\" | \"number\" | \"badge\"; // Suggested format\n};\n\n/**\n * Get available fields for an entity type\n */\nexport function getAvailableFields(entity: string): FieldDefinition[] {\n\tconst fieldMap: Record<string, FieldDefinition[]> = {\n\t\tappointments: [\n\t\t\t// Direct fields\n\t\t\t{\n\t\t\t\tpath: \"appointment_number\",\n\t\t\t\tlabel: \"Appointment Number\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{ path: \"title\", label: \"Title\", type: \"string\", recommended: \"text\" },\n\t\t\t{\n\t\t\t\tpath: \"description\",\n\t\t\t\tlabel: \"Description\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{ path: \"status\", label: \"Status\", type: \"string\", recommended: \"badge\" },\n\t\t\t{\n\t\t\t\tpath: \"priority\",\n\t\t\t\tlabel: \"Priority\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t\t{ path: \"type\", label: \"Type\", type: \"string\", recommended: \"badge\" },\n\t\t\t{\n\t\t\t\tpath: \"scheduled_start\",\n\t\t\t\tlabel: \"Scheduled Start\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"scheduled_end\",\n\t\t\t\tlabel: \"Scheduled End\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"actual_start\",\n\t\t\t\tlabel: \"Actual Start\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"actual_end\",\n\t\t\t\tlabel: \"Actual End\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"duration_minutes\",\n\t\t\t\tlabel: \"Duration (minutes)\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"number\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"travel_time_minutes\",\n\t\t\t\tlabel: \"Travel Time (minutes)\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"number\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"confirmation_sent\",\n\t\t\t\tlabel: \"Confirmation Sent\",\n\t\t\t\ttype: \"boolean\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"reminder_sent\",\n\t\t\t\tlabel: \"Reminder Sent\",\n\t\t\t\ttype: \"boolean\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"cancellation_reason\",\n\t\t\t\tlabel: \"Cancellation Reason\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{ path: \"notes\", label: \"Notes\", type: \"string\", recommended: \"text\" },\n\t\t\t{\n\t\t\t\tpath: \"created_at\",\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"updated_at\",\n\t\t\t\tlabel: \"Updated At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\n\t\t\t// Customer fields (nested)\n\t\t\t{\n\t\t\t\tpath: \"customer.first_name\",\n\t\t\t\tlabel: \"Customer First Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.last_name\",\n\t\t\t\tlabel: \"Customer Last Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.email\",\n\t\t\t\tlabel: \"Customer Email\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.phone\",\n\t\t\t\tlabel: \"Customer Phone\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.company_name\",\n\t\t\t\tlabel: \"Customer Company\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\n\t\t\t// Assigned user fields (nested)\n\t\t\t{\n\t\t\t\tpath: \"assigned_user.name\",\n\t\t\t\tlabel: \"Assigned Technician\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"assigned_user.email\",\n\t\t\t\tlabel: \"Technician Email\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\n\t\t\t// Property fields (nested)\n\t\t\t{\n\t\t\t\tpath: \"property.address\",\n\t\t\t\tlabel: \"Property Address\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"property.city\",\n\t\t\t\tlabel: \"Property City\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"property.state\",\n\t\t\t\tlabel: \"Property State\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"property.zip_code\",\n\t\t\t\tlabel: \"Property Zip\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\n\t\t\t// Job fields (nested)\n\t\t\t{\n\t\t\t\tpath: \"job.job_number\",\n\t\t\t\tlabel: \"Job Number\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"job.title\",\n\t\t\t\tlabel: \"Job Title\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"job.status\",\n\t\t\t\tlabel: \"Job Status\",\n\t\t\t\ttype: \"relation\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t],\n\n\t\tjobs: [\n\t\t\t// Jobs entity fields\n\t\t\t{ path: \"job_number\", label: \"Job Number\", type: \"string\" },\n\t\t\t{ path: \"title\", label: \"Title\", type: \"string\" },\n\t\t\t{\n\t\t\t\tpath: \"description\",\n\t\t\t\tlabel: \"Description\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"text\",\n\t\t\t},\n\t\t\t{ path: \"status\", label: \"Status\", type: \"string\", recommended: \"badge\" },\n\t\t\t{\n\t\t\t\tpath: \"priority\",\n\t\t\t\tlabel: \"Priority\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"job_type\",\n\t\t\t\tlabel: \"Job Type\",\n\t\t\t\ttype: \"string\",\n\t\t\t\trecommended: \"badge\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"scheduled_start\",\n\t\t\t\tlabel: \"Scheduled Start\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"scheduled_end\",\n\t\t\t\tlabel: \"Scheduled End\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"actual_start\",\n\t\t\t\tlabel: \"Actual Start\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"actual_end\",\n\t\t\t\tlabel: \"Actual End\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"total_cost\",\n\t\t\t\tlabel: \"Total Cost\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"labor_cost\",\n\t\t\t\tlabel: \"Labor Cost\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"material_cost\",\n\t\t\t\tlabel: \"Material Cost\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.first_name\",\n\t\t\t\tlabel: \"Customer First Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.last_name\",\n\t\t\t\tlabel: \"Customer Last Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{ path: \"customer.email\", label: \"Customer Email\", type: \"relation\" },\n\t\t\t{ path: \"customer.phone\", label: \"Customer Phone\", type: \"relation\" },\n\t\t\t{\n\t\t\t\tpath: \"property.address\",\n\t\t\t\tlabel: \"Property Address\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{ path: \"property.city\", label: \"Property City\", type: \"relation\" },\n\t\t\t{ path: \"property.state\", label: \"Property State\", type: \"relation\" },\n\t\t\t{\n\t\t\t\tpath: \"created_at\",\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"updated_at\",\n\t\t\t\tlabel: \"Updated At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t],\n\n\t\tcustomers: [\n\t\t\t{ path: \"first_name\", label: \"First Name\", type: \"string\" },\n\t\t\t{ path: \"last_name\", label: \"Last Name\", type: \"string\" },\n\t\t\t{ path: \"display_name\", label: \"Display Name\", type: \"string\" },\n\t\t\t{ path: \"email\", label: \"Email\", type: \"string\" },\n\t\t\t{ path: \"phone\", label: \"Phone\", type: \"string\" },\n\t\t\t{ path: \"company_name\", label: \"Company Name\", type: \"string\" },\n\t\t\t{ path: \"customer_type\", label: \"Type\", type: \"string\" },\n\t\t\t{ path: \"status\", label: \"Status\", type: \"string\", recommended: \"badge\" },\n\t\t\t{ path: \"address\", label: \"Address\", type: \"string\" },\n\t\t\t{ path: \"city\", label: \"City\", type: \"string\" },\n\t\t\t{ path: \"state\", label: \"State\", type: \"string\" },\n\t\t\t{ path: \"zip_code\", label: \"Zip Code\", type: \"string\" },\n\t\t\t{\n\t\t\t\tpath: \"created_at\",\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"updated_at\",\n\t\t\t\tlabel: \"Updated At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t],\n\n\t\tinvoices: [\n\t\t\t{ path: \"invoice_number\", label: \"Invoice Number\", type: \"string\" },\n\t\t\t{ path: \"status\", label: \"Status\", type: \"string\", recommended: \"badge\" },\n\t\t\t{\n\t\t\t\tpath: \"issue_date\",\n\t\t\t\tlabel: \"Issue Date\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"due_date\",\n\t\t\t\tlabel: \"Due Date\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"subtotal\",\n\t\t\t\tlabel: \"Subtotal\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"tax_amount\",\n\t\t\t\tlabel: \"Tax Amount\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"total_amount\",\n\t\t\t\tlabel: \"Total Amount\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"balance_due\",\n\t\t\t\tlabel: \"Balance Due\",\n\t\t\t\ttype: \"number\",\n\t\t\t\trecommended: \"currency\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.first_name\",\n\t\t\t\tlabel: \"Customer First Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.last_name\",\n\t\t\t\tlabel: \"Customer Last Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{ path: \"customer.email\", label: \"Customer Email\", type: \"relation\" },\n\t\t\t{\n\t\t\t\tpath: \"created_at\",\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t],\n\n\t\tequipment: [\n\t\t\t{\n\t\t\t\tpath: \"equipment_number\",\n\t\t\t\tlabel: \"Equipment Number\",\n\t\t\t\ttype: \"string\",\n\t\t\t},\n\t\t\t{ path: \"name\", label: \"Name\", type: \"string\" },\n\t\t\t{ path: \"type\", label: \"Type\", type: \"string\", recommended: \"badge\" },\n\t\t\t{ path: \"manufacturer\", label: \"Manufacturer\", type: \"string\" },\n\t\t\t{ path: \"model\", label: \"Model\", type: \"string\" },\n\t\t\t{ path: \"serial_number\", label: \"Serial Number\", type: \"string\" },\n\t\t\t{ path: \"category\", label: \"Category\", type: \"string\" },\n\t\t\t{ path: \"location\", label: \"Location\", type: \"string\" },\n\t\t\t{ path: \"status\", label: \"Status\", type: \"string\", recommended: \"badge\" },\n\t\t\t{\n\t\t\t\tpath: \"install_date\",\n\t\t\t\tlabel: \"Install Date\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"warranty_expires\",\n\t\t\t\tlabel: \"Warranty Expires\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.first_name\",\n\t\t\t\tlabel: \"Customer First Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"customer.last_name\",\n\t\t\t\tlabel: \"Customer Last Name\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"property.address\",\n\t\t\t\tlabel: \"Property Address\",\n\t\t\t\ttype: \"relation\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: \"created_at\",\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\ttype: \"date\",\n\t\t\t\trecommended: \"date\",\n\t\t\t},\n\t\t],\n\t};\n\n\treturn fieldMap[entity] || [];\n}\n\n/**\n * Get recommended format for a field type\n */\nfunction getRecommendedFormat(\n\ttype: FieldDefinition[\"type\"],\n): \"text\" | \"date\" | \"currency\" | \"number\" | \"badge\" {\n\tswitch (type) {\n\t\tcase \"date\":\n\t\t\treturn \"date\";\n\t\tcase \"number\":\n\t\t\treturn \"number\";\n\t\tcase \"boolean\":\n\t\t\treturn \"badge\";\n\t\tdefault:\n\t\t\treturn \"text\";\n\t}\n}\n"],"names":[],"mappings":"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MACd,EACA,CACC,KAAM,aACN,MAAO,aACP,KAAM,OACN,YAAa,MACd,EAGA,CACC,KAAM,sBACN,MAAO,sBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,qBACN,MAAO,qBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,iBACN,MAAO,iBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,iBACN,MAAO,iBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,wBACN,MAAO,mBACP,KAAM,WACN,YAAa,MACd,EAGA,CACC,KAAM,qBACN,MAAO,sBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,sBACN,MAAO,mBACP,KAAM,WACN,YAAa,MACd,EAGA,CACC,KAAM,mBACN,MAAO,mBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,gBACN,MAAO,gBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,iBACN,MAAO,iBACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,oBACN,MAAO,eACP,KAAM,WACN,YAAa,MACd,EAGA,CACC,KAAM,iBACN,MAAO,aACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,YACN,MAAO,YACP,KAAM,WACN,YAAa,MACd,EACA,CACC,KAAM,aACN,MAAO,aACP,KAAM,WACN,YAAa,OACd,EACA,CAED,KAAM,CAEL,CAAE,KAAM,aAAc,MAAO,aAAc,KAAM,QAAS,EAC1D,CAAE,KAAM,QAAS,MAAO,QAAS,KAAM,QAAS,EAChD,CACC,KAAM,cACN,MAAO,cACP,KAAM,SACN,YAAa,MACd,EACA,CAAE,KAAM,SAAU,MAAO,SAAU,KAAM,SAAU,YAAa,OAAQ,EACxE,CACC,KAAM,WACN,MAAO,WACP,KAAM,SACN,YAAa,OACd,EACA,CACC,KAAM,WACN,MAAO,WACP,KAAM,SACN,YAAa,OACd,EACA,CACC,KAAM,kBACN,MAAO,kBACP,KAAM,OACN,YAAa,MACd,EACA,CACC,KAAM,gBACN,MAAO,gBACP,KAAM,OACN,YAAa,MACd,EACA,CACC,KAAM,eACN,M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"}