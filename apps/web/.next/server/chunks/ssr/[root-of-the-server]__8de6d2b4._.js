module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},721135,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ToolbarStatsProvider() from the server but ToolbarStatsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/toolbar-stats-provider.tsx <module evaluation>","ToolbarStatsProvider");a.s(["ToolbarStatsProvider",0,b])},444593,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ToolbarStatsProvider() from the server but ToolbarStatsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/toolbar-stats-provider.tsx","ToolbarStatsProvider");a.s(["ToolbarStatsProvider",0,b])},206372,a=>{"use strict";a.i(721135);var b=a.i(444593);a.n(b)},669668,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call VendorPageContent() from the server but VendorPageContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/vendors/vendor-page-content.tsx <module evaluation>","VendorPageContent");a.s(["VendorPageContent",0,b])},22789,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call VendorPageContent() from the server but VendorPageContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/vendors/vendor-page-content.tsx","VendorPageContent");a.s(["VendorPageContent",0,b])},869e3,a=>{"use strict";a.i(669668);var b=a.i(22789);a.n(b)},952434,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(206372),f=a.i(869e3);a.i(467361);var g=a.i(445074),h=a.i(136874);async function i({vendorId:a}){let c=await (0,h.createClient)();if(!c)return(0,d.notFound)();let{data:{user:i}}=await c.auth.getUser();if(!i)return(0,d.notFound)();let j=await (0,g.getActiveCompanyId)();if(!j)return(0,d.notFound)();let{data:k}=await c.from("vendors").select("*").eq("id",a).eq("company_id",j).is("deleted_at",null).maybeSingle();if(!k)return(0,d.notFound)();let[{data:l},{data:m},{data:n},{data:o}]=await Promise.all([c.from("purchase_orders").select(`
				*,
				job:jobs(id, job_number, title, status)
			`).eq("vendor_id",a).eq("company_id",j).is("deleted_at",null).order("created_at",{ascending:!1}),c.from("purchase_orders").select("id, po_number, title, total_amount, status, created_at").eq("company_id",j).is("deleted_at",null).is("vendor_id",null).order("created_at",{ascending:!1}).limit(50),c.from("contacts").select("id, name, email, phone, title, company_name").eq("company_id",j).is("deleted_at",null).order("name",{ascending:!0}).limit(100),c.from("activity_log").select("*, user:users!user_id(*)").eq("entity_type","vendor").eq("entity_id",a).order("created_at",{ascending:!1}).limit(50)]),p=l||[],q=p.reduce((a,b)=>a+(b.total_amount||0),0),r=p.filter(a=>["draft","pending_approval","approved","ordered"].includes(a.status||"")).length,s=p.filter(a=>"received"===a.status||"completed"===a.status).length,t=Array.from(new Map(p.filter(a=>a.job).map(a=>[a.job.id,a.job])).values()),u=[{label:"Total Spend",value:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q),change:0,changeLabel:"lifetime"},{label:"Open POs",value:r,change:0,changeLabel:"in progress"},{label:"Completed",value:s,change:0,changeLabel:"fulfilled"},{label:"Related Jobs",value:t.length,change:0,changeLabel:"projects"}];return(0,b.jsx)(e.ToolbarStatsProvider,{stats:u,children:(0,b.jsx)("div",{className:"flex h-full w-full flex-col overflow-auto",children:(0,b.jsx)("div",{className:"mx-auto w-full max-w-7xl",children:(0,b.jsx)(f.VendorPageContent,{entityData:{vendor:k,purchaseOrders:p,allPurchaseOrders:m||[],allContacts:n||[],relatedJobs:t,activities:o||[]}})})})})}function j(){return(0,b.jsx)("div",{className:"flex h-full w-full flex-col overflow-auto",children:(0,b.jsxs)("div",{className:"mx-auto w-full max-w-7xl space-y-6 p-6",children:[(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-muted h-8 w-64 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-80 animate-pulse rounded"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"bg-muted h-10 w-28 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-10 w-28 animate-pulse rounded"})]})]})}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-6 w-32 animate-pulse rounded"})]},a))}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[(0,b.jsx)("div",{className:"bg-muted h-6 w-40 animate-pulse rounded"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-full animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-3/4 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-2/3 animate-pulse rounded"})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[(0,b.jsx)("div",{className:"bg-muted h-6 w-48 animate-pulse rounded"}),(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-48 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"})]},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[(0,b.jsx)("div",{className:"bg-muted h-6 w-24 animate-pulse rounded"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-full animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-3/4 animate-pulse rounded"})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[(0,b.jsx)("div",{className:"bg-muted h-6 w-24 animate-pulse rounded"}),(0,b.jsx)("div",{className:"space-y-2",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"bg-muted h-10 w-full animate-pulse rounded"},a))})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-6",children:[(0,b.jsx)("div",{className:"bg-muted h-6 w-32 animate-pulse rounded"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-full animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-2/3 animate-pulse rounded"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex gap-4 border-b",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"bg-muted h-10 w-28 animate-pulse rounded-t"},a))}),(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"bg-muted h-24 w-full animate-pulse rounded"},a))})]})]})})}async function k({params:a}){let{id:d}=await a;return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(j,{}),children:(0,b.jsx)(i,{vendorId:d})})}a.s(["default",()=>k],952434)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8de6d2b4._.js.map