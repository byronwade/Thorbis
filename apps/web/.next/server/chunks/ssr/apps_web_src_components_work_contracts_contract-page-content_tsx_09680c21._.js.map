{"version":3,"sources":["../../../../../../apps/web/src/components/work/contracts/contract-page-content.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n\tCalendar,\n\tCalendarDays,\n\tFileSignature,\n\tFileText,\n\tGitBranch,\n\tMapPin,\n\tNotebookPen,\n\tPackage,\n\tSend,\n\tUser,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport {\n\ttype ElementType,\n\ttype ReactElement,\n\ttype ReactNode,\n\tuseMemo,\n} from \"react\";\nimport { toast } from \"sonner\";\nimport { updateEntityTags } from \"@/actions/entity-tags\";\nimport type { DetailPageHeaderConfig } from \"@/components/layout/detail-page-content-layout\";\nimport { DetailPageContentLayout } from \"@/components/layout/detail-page-content-layout\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tUnifiedAccordionContent,\n\ttype UnifiedAccordionSection,\n} from \"@/components/ui/unified-accordion\";\nimport { WorkflowTimeline } from \"@/components/ui/workflow-timeline\";\nimport { EntityTags } from \"@/components/work/entity-tags\";\nimport { useSectionShortcuts } from \"@/hooks/use-section-shortcuts\";\nimport { formatCurrency, formatDate } from \"@/lib/formatters\";\nimport { cn } from \"@/lib/utils\";\n\ntype ContractStatus =\n\t| \"draft\"\n\t| \"sent\"\n\t| \"viewed\"\n\t| \"signed\"\n\t| \"rejected\"\n\t| \"expired\"\n\t| string;\n\nexport type ContractRecord = {\n\tid: string;\n\tcontractNumber?: string | null;\n\ttitle?: string | null;\n\tdescription?: string | null;\n\tcustomerName: string;\n\tcustomerId?: string | null;\n\tstatus?: ContractStatus | null;\n\tcontractType?: string | null;\n\tsignerName?: string | null;\n\tsignerEmail?: string | null;\n\tsignerTitle?: string | null;\n\tsignerCompany?: string | null;\n\tsignedAt?: string | null;\n\tsentAt?: string | null;\n\tviewedAt?: string | null;\n\tcreatedAt?: string | null;\n\tvalidFrom?: string | null;\n\tvalidUntil?: string | null;\n\tipAddress?: string | null;\n\tcontent?: string | null;\n\tterms?: string | null;\n\tnotes?: string | null;\n};\n\nexport type CustomerRecord = {\n\tid: string;\n\tdisplay_name?: string | null;\n\tfirst_name?: string | null;\n\tlast_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n};\n\nexport type PropertyRecord = {\n\tid: string;\n\tname?: string | null;\n\taddress?: string | null;\n\tcity?: string | null;\n\tstate?: string | null;\n};\n\nexport type RelatedEstimate = {\n\tid: string;\n\testimate_number?: string | null;\n\ttitle?: string | null;\n\tstatus?: string | null;\n\tcreated_at?: string | null;\n};\n\nexport type RelatedInvoice = {\n\tid: string;\n\tinvoice_number?: string | null;\n\ttitle?: string | null;\n\tstatus?: string | null;\n\tcreated_at?: string | null;\n\tbalance_amount?: number | null;\n\tpaid_at?: string | null;\n};\n\nexport type RelatedJob = {\n\tid: string;\n\tjob_number?: string | null;\n\ttitle?: string | null;\n\tstatus?: string | null;\n\tcreated_at?: string | null;\n};\n\nexport type AppointmentRecord = {\n\tid: string;\n\tscheduled_start?: string | null;\n\tscheduled_end?: string | null;\n\tstatus?: string | null;\n\ttype?: string | null;\n};\n\ntype RelatedItemBadgeVariant =\n\t| \"default\"\n\t| \"secondary\"\n\t| \"destructive\"\n\t| \"outline\";\n\ntype RelatedItem = {\n\tid: string;\n\ttype: string;\n\ttitle: string;\n\tsubtitle?: string;\n\thref: string;\n\tbadge?: {\n\t\tlabel: string;\n\t\tvariant?: RelatedItemBadgeVariant;\n\t};\n};\n\ntype WorkflowStageStatus = \"completed\" | \"current\" | \"pending\";\n\ntype WorkflowStage = {\n\tid: string;\n\tlabel: string;\n\tstatus: WorkflowStageStatus;\n\tdate?: string;\n\thref?: string;\n\tdescription?: string;\n};\n\nexport type Tag = {\n\tid: string;\n\tname: string;\n\tslug: string;\n\tcolor: string | null;\n\tcategory: string | null;\n\ticon: string | null;\n};\n\nexport type ContractPageEntityData = {\n\tcontract: ContractRecord & {\n\t\tcontract_tags?: Tag[];\n\t};\n\tcustomer?: CustomerRecord | null;\n\tproperty?: PropertyRecord | null;\n\testimate?: RelatedEstimate | null;\n\tinvoice?: RelatedInvoice | null;\n\tjob?: RelatedJob | null;\n\tappointments?: AppointmentRecord[];\n};\n\nexport type ContractPageContentProps = {\n\tentityData: ContractPageEntityData;\n};\n\nfunction formatStatusLabel(status: ContractStatus | null | undefined): string {\n\tif (!status) {\n\t\treturn \"Draft\";\n\t}\n\n\treturn status\n\t\t.toString()\n\t\t.split(\"_\")\n\t\t.map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n\t\t.join(\" \");\n}\n\nfunction getStatusBadgeStyles(status: ContractStatus | null | undefined) {\n\tswitch (status) {\n\t\tcase \"signed\":\n\t\t\treturn \"bg-green-500/90 text-white hover:bg-green-600\";\n\t\tcase \"sent\":\n\t\t\treturn \"bg-primary/10 text-primary\";\n\t\tcase \"viewed\":\n\t\t\treturn \"bg-accent/10 text-accent-foreground\";\n\t\tcase \"rejected\":\n\t\t\treturn \"bg-destructive/10 text-destructive\";\n\t\tcase \"expired\":\n\t\t\treturn \"bg-warning/10 text-warning\";\n\t\tdefault:\n\t\t\treturn \"bg-muted text-foreground\";\n\t}\n}\n\nfunction getCustomerDisplayName(\n\tcustomer?: CustomerRecord | null,\n\tfallback?: string,\n): string {\n\tif (!customer) {\n\t\treturn fallback || \"Unknown Customer\";\n\t}\n\n\tif (customer.display_name) {\n\t\treturn customer.display_name;\n\t}\n\n\tconst fullName =\n\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim();\n\tif (fullName) {\n\t\treturn fullName;\n\t}\n\n\treturn fallback || \"Unknown Customer\";\n}\n\nfunction getPropertyDisplayName(property?: PropertyRecord | null): string {\n\tif (!property) {\n\t\treturn \"Property\";\n\t}\n\n\treturn (\n\t\tproperty.address ||\n\t\tproperty.name ||\n\t\t[property.city, property.state].filter(Boolean).join(\", \") ||\n\t\t\"Property\"\n\t);\n}\n\nfunction buildHeaderConfig(\n\tcontract: ContractRecord,\n\tcustomerName: string,\n\tstatusBadge: ReactElement | null,\n): DetailPageHeaderConfig {\n\tconst contractNumber =\n\t\tcontract.contractNumber || `CON-${contract.id.slice(0, 8).toUpperCase()}`;\n\n\tconst badges: ReactElement[] = [\n\t\t<Badge key=\"contract-number\" variant=\"outline\">\n\t\t\t{contractNumber}\n\t\t</Badge>,\n\t];\n\n\tif (statusBadge) {\n\t\tbadges.push(statusBadge);\n\t}\n\n\tif (contract.contractType) {\n\t\tbadges.push(\n\t\t\t<Badge className=\"capitalize\" key=\"contract-type\" variant=\"secondary\">\n\t\t\t\t{contract.contractType}\n\t\t\t</Badge>,\n\t\t);\n\t}\n\n\treturn {\n\t\ttitle: contract.title || contractNumber,\n\t\tsubtitle: customerName,\n\t\tbadges,\n\t};\n}\n\nexport function ContractPageContent({ entityData }: ContractPageContentProps) {\n\tconst router = useRouter();\n\tconst {\n\t\tcontract,\n\t\tcustomer,\n\t\tproperty,\n\t\testimate,\n\t\tinvoice,\n\t\tjob,\n\t\tappointments = [],\n\t} = entityData;\n\n\tconst customerName = getCustomerDisplayName(customer, contract.customerName);\n\tconst statusLabel = formatStatusLabel(contract.status);\n\tconst statusBadge = contract.status ? (\n\t\t<Badge\n\t\t\tclassName={cn(\"capitalize\", getStatusBadgeStyles(contract.status))}\n\t\t\tkey=\"status-badge\"\n\t\t\tvariant=\"outline\"\n\t\t>\n\t\t\t{statusLabel}\n\t\t</Badge>\n\t) : null;\n\n\tconst headerConfig = buildHeaderConfig(contract, customerName, statusBadge);\n\n\t// Extract tags from junction table data\n\tconst contractTags = useMemo(() => {\n\t\tif (!contract?.contract_tags) return [];\n\t\treturn contract.contract_tags.map((ct: Tag) => ({\n\t\t\tid: ct.id,\n\t\t\tname: ct.name,\n\t\t\tslug: ct.slug,\n\t\t\tcolor: ct.color,\n\t\t\tcategory: ct.category,\n\t\t\ticon: ct.icon,\n\t\t}));\n\t}, [contract?.contract_tags]);\n\n\t// Keyboard shortcuts (Ctrl+1-9)\n\tconst sectionShortcuts = useMemo(\n\t\t() => ({\n\t\t\t\"1\": () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementById(\"contract-overview\")\n\t\t\t\t\t?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t\t\"2\": () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementById(\"contract-terms\")\n\t\t\t\t\t?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t\t\"3\": () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementById(\"signature\")\n\t\t\t\t\t?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t\t\"4\": () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementById(\"engagement-history\")\n\t\t\t\t\t?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t\t\"5\": () => {\n\t\t\t\tdocument\n\t\t\t\t\t.getElementById(\"appointments\")\n\t\t\t\t\t?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t\t\"9\": () => {\n\t\t\t\tdocument.getElementById(\"tags\")?.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t},\n\t\t}),\n\t\t[],\n\t);\n\n\tuseSectionShortcuts(sectionShortcuts);\n\n\tconst quickInfo = useMemo(() => {\n\t\tconst items: {\n\t\t\tkey: string;\n\t\t\ticon: ElementType;\n\t\t\tlabel: string;\n\t\t\tvalue: string;\n\t\t}[] = [];\n\n\t\titems.push({\n\t\t\tkey: \"status\",\n\t\t\ticon: GitBranch,\n\t\t\tlabel: \"Status\",\n\t\t\tvalue: statusLabel,\n\t\t});\n\n\t\titems.push({\n\t\t\tkey: \"sent\",\n\t\t\ticon: Send,\n\t\t\tlabel: \"Sent At\",\n\t\t\tvalue:\n\t\t\t\tcontract.sentAt && contract.sentAt !== \"\"\n\t\t\t\t\t? formatDate(contract.sentAt, { preset: \"datetime\" })\n\t\t\t\t\t: \"Not sent\",\n\t\t});\n\n\t\titems.push({\n\t\t\tkey: \"viewed\",\n\t\t\ticon: CalendarDays,\n\t\t\tlabel: \"Viewed\",\n\t\t\tvalue:\n\t\t\t\tcontract.viewedAt && contract.viewedAt !== \"\"\n\t\t\t\t\t? formatDate(contract.viewedAt, { preset: \"datetime\" })\n\t\t\t\t\t: \"Not viewed\",\n\t\t});\n\n\t\titems.push({\n\t\t\tkey: \"signed\",\n\t\t\ticon: FileSignature,\n\t\t\tlabel: \"Signed\",\n\t\t\tvalue:\n\t\t\t\tcontract.signedAt && contract.signedAt !== \"\"\n\t\t\t\t\t? formatDate(contract.signedAt, { preset: \"datetime\" })\n\t\t\t\t\t: \"Awaiting signature\",\n\t\t});\n\n\t\treturn items;\n\t}, [contract.sentAt, contract.viewedAt, contract.signedAt, statusLabel]);\n\n\tconst relatedItems = useMemo<RelatedItem[]>(() => {\n\t\tconst items: RelatedItem[] = [];\n\n\t\tif (customer) {\n\t\t\titems.push({\n\t\t\t\tid: `customer-${customer.id}`,\n\t\t\t\ttype: \"customer\",\n\t\t\t\ttitle: getCustomerDisplayName(customer, contract.customerName),\n\t\t\t\tsubtitle: customer.email || customer.phone || undefined,\n\t\t\t\thref: `/dashboard/customers/${customer.id}`,\n\t\t\t});\n\t\t} else if (contract.customerId) {\n\t\t\titems.push({\n\t\t\t\tid: `customer-${contract.customerId}`,\n\t\t\t\ttype: \"customer\",\n\t\t\t\ttitle: contract.customerName,\n\t\t\t\thref: `/dashboard/customers/${contract.customerId}`,\n\t\t\t});\n\t\t}\n\n\t\tif (property) {\n\t\t\titems.push({\n\t\t\t\tid: `property-${property.id}`,\n\t\t\t\ttype: \"property\",\n\t\t\t\ttitle: getPropertyDisplayName(property),\n\t\t\t\tsubtitle:\n\t\t\t\t\t[property.city, property.state].filter(Boolean).join(\", \") ||\n\t\t\t\t\tundefined,\n\t\t\t\thref: `/dashboard/work/properties/${property.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (job) {\n\t\t\titems.push({\n\t\t\t\tid: `job-${job.id}`,\n\t\t\t\ttype: \"job\",\n\t\t\t\ttitle: job.title || `Job #${job.job_number || job.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: job.status || undefined,\n\t\t\t\thref: `/dashboard/work/${job.id}`,\n\t\t\t\tbadge: job.status\n\t\t\t\t\t? { label: formatStatusLabel(job.status), variant: \"outline\" }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\tif (estimate) {\n\t\t\titems.push({\n\t\t\t\tid: `estimate-${estimate.id}`,\n\t\t\t\ttype: \"estimate\",\n\t\t\t\ttitle:\n\t\t\t\t\testimate.title ||\n\t\t\t\t\t`Estimate #${estimate.estimate_number || estimate.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: estimate.status || undefined,\n\t\t\t\thref: `/dashboard/work/estimates/${estimate.id}`,\n\t\t\t\tbadge: estimate.status\n\t\t\t\t\t? { label: formatStatusLabel(estimate.status), variant: \"secondary\" }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\tif (invoice) {\n\t\t\titems.push({\n\t\t\t\tid: `invoice-${invoice.id}`,\n\t\t\t\ttype: \"invoice\",\n\t\t\t\ttitle:\n\t\t\t\t\tinvoice.title ||\n\t\t\t\t\t`Invoice #${invoice.invoice_number || invoice.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: invoice.status || undefined,\n\t\t\t\thref: `/dashboard/work/invoices/${invoice.id}`,\n\t\t\t\tbadge: invoice.status\n\t\t\t\t\t? { label: formatStatusLabel(invoice.status), variant: \"outline\" }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [contract, customer, estimate, invoice, job, property]);\n\n\tconst workflowStages = useMemo<WorkflowStage[]>(() => {\n\t\tif (!(estimate || invoice)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tid: \"estimate\",\n\t\t\t\tlabel: \"Estimate Created\",\n\t\t\t\tstatus: estimate ? \"completed\" : \"pending\",\n\t\t\t\tdate: estimate?.created_at || undefined,\n\t\t\t\thref: estimate?.id\n\t\t\t\t\t? `/dashboard/work/estimates/${estimate.id}`\n\t\t\t\t\t: undefined,\n\t\t\t\tdescription: estimate?.estimate_number\n\t\t\t\t\t? `#${estimate.estimate_number}`\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"contract\",\n\t\t\t\tlabel: \"Contract Generated\",\n\t\t\t\tstatus: \"completed\",\n\t\t\t\tdate: contract.createdAt || undefined,\n\t\t\t\thref: `/dashboard/work/contracts/${contract.id}`,\n\t\t\t\tdescription:\n\t\t\t\t\tcontract.status === \"signed\" ? \"Signed\" : \"Pending signature\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"invoice\",\n\t\t\t\tlabel: \"Invoice Created\",\n\t\t\t\tstatus: invoice ? \"completed\" : \"pending\",\n\t\t\t\tdate: invoice?.created_at || undefined,\n\t\t\t\thref: invoice?.id\n\t\t\t\t\t? `/dashboard/work/invoices/${invoice.id}`\n\t\t\t\t\t: undefined,\n\t\t\t\tdescription: invoice?.invoice_number\n\t\t\t\t\t? `#${invoice.invoice_number}`\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"payment\",\n\t\t\t\tlabel: \"Payment Received\",\n\t\t\t\tstatus:\n\t\t\t\t\tinvoice?.status === \"paid\"\n\t\t\t\t\t\t? \"completed\"\n\t\t\t\t\t\t: invoice\n\t\t\t\t\t\t\t? \"current\"\n\t\t\t\t\t\t\t: \"pending\",\n\t\t\t\tdate: invoice?.paid_at || undefined,\n\t\t\t\tdescription: invoice?.paid_at\n\t\t\t\t\t? \"Completed\"\n\t\t\t\t\t: invoice\n\t\t\t\t\t\t? `Balance: ${formatCurrency(invoice.balance_amount ?? 0)}`\n\t\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t];\n\t}, [contract, estimate, invoice]);\n\n\tconst overviewSection = useMemo<UnifiedAccordionSection>(() => {\n\t\tconst contractNumber =\n\t\t\tcontract.contractNumber || `CON-${contract.id.slice(0, 8).toUpperCase()}`;\n\n\t\treturn {\n\t\t\tid: \"contract-overview\",\n\t\t\ttitle: \"Contract Overview\",\n\t\t\ticon: <FileText className=\"size-4\" />,\n\t\t\tdefaultOpen: true,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"grid gap-6 md:grid-cols-2\">\n\t\t\t\t\t\t<InfoBlock label=\"Contract Number\" value={`#${contractNumber}`} />\n\t\t\t\t\t\t<InfoBlock label=\"Status\" value={statusLabel} />\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Contract Type\"\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tcontract.contractType ? contract.contractType : \"Not specified\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Created\"\n\t\t\t\t\t\t\tvalue={formatDate(contract.createdAt, { preset: \"datetime\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Valid From\"\n\t\t\t\t\t\t\tvalue={formatDate(contract.validFrom, { preset: \"long\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Valid Until\"\n\t\t\t\t\t\t\tvalue={formatDate(contract.validUntil, { preset: \"long\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Customer\"\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tcustomer ? (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary inline-flex items-center gap-2 text-sm font-medium hover:underline\"\n\t\t\t\t\t\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<User className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t{getCustomerDisplayName(customer, contract.customerName)}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\tcontract.customerName\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{property && (\n\t\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\t\tlabel=\"Property\"\n\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary inline-flex items-center gap-2 text-sm font-medium hover:underline\"\n\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/properties/${property.id}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<MapPin className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t{getPropertyDisplayName(property)}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [contract, customer, property, statusLabel]);\n\n\tconst termsSection = useMemo<UnifiedAccordionSection>(\n\t\t() => ({\n\t\t\tid: \"contract-terms\",\n\t\t\ttitle: \"Contract Terms\",\n\t\t\ticon: <FileSignature className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"border-border/60 bg-muted/30 rounded-lg border p-5 text-sm leading-relaxed\">\n\t\t\t\t\t\t{contract.content && contract.content.trim().length > 0 ? (\n\t\t\t\t\t\t\t<p className=\"whitespace-pre-wrap\">{contract.content}</p>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\tNo contract terms provided.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t}),\n\t\t[contract.content],\n\t);\n\n\tconst signerSection = useMemo<UnifiedAccordionSection | null>(() => {\n\t\tif (!(contract.signerName || contract.signedAt)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tid: \"signature\",\n\t\t\ttitle: \"Signature\",\n\t\t\ticon: <FileSignature className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"border-border/60 bg-muted/20 flex items-start gap-4 rounded-lg border p-4\">\n\t\t\t\t\t\t<div className=\"bg-background rounded-lg p-3 shadow-sm\">\n\t\t\t\t\t\t\t<FileSignature className=\"text-muted-foreground size-6\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1 space-y-1\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t{contract.signerName || \"Signer name not provided\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{contract.signerTitle && (\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t{contract.signerTitle}\n\t\t\t\t\t\t\t\t\t{contract.signerCompany\n\t\t\t\t\t\t\t\t\t\t? ` at ${contract.signerCompany}`\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{contract.signerEmail && (\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t{contract.signerEmail}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tSigned on{\" \"}\n\t\t\t\t\t\t\t\t\t{formatDate(contract.signedAt, { preset: \"datetime\" })}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{contract.ipAddress && <p>IP: {contract.ipAddress}</p>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [\n\t\tcontract.ipAddress,\n\t\tcontract.signerCompany,\n\t\tcontract.signerEmail,\n\t\tcontract.signerName,\n\t\tcontract.signerTitle,\n\t\tcontract.signedAt,\n\t]);\n\n\tconst engagementSection = useMemo<UnifiedAccordionSection>(() => {\n\t\tconst events: {\n\t\t\tid: string;\n\t\t\tlabel: string;\n\t\t\tvalue: string;\n\t\t\ticon: ElementType;\n\t\t\ttone: \"default\" | \"accent\" | \"success\" | \"muted\";\n\t\t}[] = [\n\t\t\t{\n\t\t\t\tid: \"signed\",\n\t\t\t\tlabel: \"Signed\",\n\t\t\t\tvalue: formatDate(contract.signedAt, { preset: \"datetime\" }),\n\t\t\t\ticon: FileSignature,\n\t\t\t\ttone: \"success\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"viewed\",\n\t\t\t\tlabel: \"Viewed\",\n\t\t\t\tvalue: formatDate(contract.viewedAt, { preset: \"datetime\" }),\n\t\t\t\ticon: CalendarDays,\n\t\t\t\ttone: \"accent\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"sent\",\n\t\t\t\tlabel: \"Sent\",\n\t\t\t\tvalue: formatDate(contract.sentAt, { preset: \"datetime\" }),\n\t\t\t\ticon: Send,\n\t\t\t\ttone: \"default\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"created\",\n\t\t\t\tlabel: \"Created\",\n\t\t\t\tvalue: formatDate(contract.createdAt, { preset: \"datetime\" }),\n\t\t\t\ticon: Calendar,\n\t\t\t\ttone: \"muted\",\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tid: \"engagement-history\",\n\t\t\ttitle: \"Engagement History\",\n\t\t\ticon: <GitBranch className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t{events.map((event) => (\n\t\t\t\t\t\t\t<TimelineEvent event={event} key={event.id} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [\n\t\tcontract.createdAt,\n\t\tcontract.sentAt,\n\t\tcontract.signedAt,\n\t\tcontract.viewedAt,\n\t]);\n\n\tconst appointmentsSection = useMemo<UnifiedAccordionSection | null>(() => {\n\t\tif (appointments.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tid: \"appointments\",\n\t\t\ttitle: \"Recent Appointments\",\n\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t{appointments.map((appointment) => (\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"border-border/60 hover:bg-muted/40 flex items-center justify-between gap-3 rounded-lg border p-3 transition-colors\"\n\t\t\t\t\t\t\t\thref={`/dashboard/appointments/${appointment.id}`}\n\t\t\t\t\t\t\t\tkey={appointment.id}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{formatDate(appointment.scheduled_start, {\n\t\t\t\t\t\t\t\t\t\t\tpreset: \"long\",\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t{formatDate(appointment.scheduled_start, {\n\t\t\t\t\t\t\t\t\t\t\tpreset: \"time\",\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t{appointment.scheduled_end\n\t\t\t\t\t\t\t\t\t\t\t? ` – ${formatDate(appointment.scheduled_end, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpreset: \"time\",\n\t\t\t\t\t\t\t\t\t\t\t\t})}`\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t{formatStatusLabel(appointment.status || \"scheduled\")}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [appointments]);\n\n\tconst additionalTermsSection = useMemo<UnifiedAccordionSection | null>(() => {\n\t\tif (!contract.terms || contract.terms.trim().length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tid: \"additional-terms\",\n\t\t\ttitle: \"Additional Terms\",\n\t\t\ticon: <NotebookPen className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<p className=\"text-sm leading-relaxed whitespace-pre-wrap\">\n\t\t\t\t\t\t{contract.terms}\n\t\t\t\t\t</p>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [contract.terms]);\n\n\tconst internalNotesSection = useMemo<UnifiedAccordionSection | null>(() => {\n\t\tif (!contract.notes || contract.notes.trim().length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tid: \"internal-notes\",\n\t\t\ttitle: \"Internal Notes\",\n\t\t\ticon: <NotebookPen className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<p className=\"text-muted-foreground text-sm whitespace-pre-wrap\">\n\t\t\t\t\t\t{contract.notes}\n\t\t\t\t\t</p>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t};\n\t}, [contract.notes]);\n\n\tconst tagsSection = useMemo<UnifiedAccordionSection>(\n\t\t() => ({\n\t\t\tid: \"tags\",\n\t\t\ttitle: \"Tags\",\n\t\t\ticon: <Package className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<EntityTags\n\t\t\t\t\t\tentityId={contract.id}\n\t\t\t\t\t\tentityType=\"contract\"\n\t\t\t\t\t\tonUpdateTags={async (id, tags) => {\n\t\t\t\t\t\t\tconst result = await updateEntityTags(\"contract\", id, tags);\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\trouter.refresh();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttoast.error(result.error || \"Failed to update tags\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttags={contractTags}\n\t\t\t\t\t/>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t}),\n\t\t[contract.id, contractTags, router],\n\t);\n\n\tconst customSections = useMemo<UnifiedAccordionSection[]>(\n\t\t() =>\n\t\t\t[\n\t\t\t\toverviewSection,\n\t\t\t\ttermsSection,\n\t\t\t\tsignerSection,\n\t\t\t\tengagementSection,\n\t\t\t\tappointmentsSection,\n\t\t\t\tadditionalTermsSection,\n\t\t\t\tinternalNotesSection,\n\t\t\t\ttagsSection,\n\t\t\t].filter(Boolean) as UnifiedAccordionSection[],\n\t\t[\n\t\t\tadditionalTermsSection,\n\t\t\tappointmentsSection,\n\t\t\tengagementSection,\n\t\t\toverviewSection,\n\t\t\tsignerSection,\n\t\t\ttermsSection,\n\t\t\tinternalNotesSection,\n\t\t\ttagsSection,\n\t\t],\n\t);\n\n\tconst shouldShowWorkflowTimeline = workflowStages.length > 0;\n\n\treturn (\n\t\t<DetailPageContentLayout\n\t\t\tbeforeContent={\n\t\t\t\tshouldShowWorkflowTimeline ? (\n\t\t\t\t\t<div className=\"w-full px-2 sm:px-0\">\n\t\t\t\t\t\t<div className=\"mx-auto max-w-7xl\">\n\t\t\t\t\t\t\t<WorkflowTimeline stages={workflowStages} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : undefined\n\t\t\t}\n\t\t\tcustomHeader={\n\t\t\t\t<HeaderSurface config={headerConfig} quickInfo={quickInfo} />\n\t\t\t}\n\t\t\tcustomSections={customSections}\n\t\t\tdefaultOpenSection=\"contract-overview\"\n\t\t\trelatedItems={relatedItems}\n\t\t\tshowStandardSections={{\n\t\t\t\tactivities: false,\n\t\t\t\tnotes: false,\n\t\t\t\tattachments: false,\n\t\t\t\trelatedItems: relatedItems.length > 0,\n\t\t\t}}\n\t\t\tstorageKey=\"contract-details\"\n\t\t/>\n\t);\n}\n\nfunction HeaderSurface({\n\tconfig,\n\tquickInfo,\n}: {\n\tconfig: DetailPageHeaderConfig;\n\tquickInfo: {\n\t\tkey: string;\n\t\ticon: ElementType;\n\t\tlabel: string;\n\t\tvalue: string;\n\t}[];\n}) {\n\treturn (\n\t\t<div className=\"w-full px-2 sm:px-0\">\n\t\t\t<div className=\"border-border/60 bg-card mx-auto max-w-7xl rounded-xl border shadow-sm\">\n\t\t\t\t<div className=\"flex flex-col gap-6 p-6 md:p-8\">\n\t\t\t\t\t<DetailPageHeader config={config} />\n\t\t\t\t\t<QuickInfoGrid items={quickInfo} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction DetailPageHeader({ config }: { config: DetailPageHeaderConfig }) {\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t{config.title ? (\n\t\t\t\t\t<h1 className=\"text-2xl leading-tight font-semibold md:text-3xl\">\n\t\t\t\t\t\t{config.title}\n\t\t\t\t\t</h1>\n\t\t\t\t) : null}\n\t\t\t\t{config.subtitle ? (\n\t\t\t\t\t<p className=\"text-muted-foreground text-sm md:text-base\">\n\t\t\t\t\t\t{config.subtitle}\n\t\t\t\t\t</p>\n\t\t\t\t) : null}\n\t\t\t\t{config.description ? (\n\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">{config.description}</p>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t{config.badges && config.badges.length > 0 ? (\n\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">{config.badges}</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nfunction QuickInfoGrid({\n\titems,\n}: {\n\titems: {\n\t\tkey: string;\n\t\ticon: ElementType;\n\t\tlabel: string;\n\t\tvalue: string;\n\t}[];\n}) {\n\tif (items.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n\t\t\t{items.map((item) => {\n\t\t\t\tconst Icon = item.icon;\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"border-border/60 bg-muted/30 flex items-start gap-3 rounded-lg border p-3\"\n\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"bg-background rounded-md p-2 shadow-sm\">\n\t\t\t\t\t\t\t<Icon className=\"text-muted-foreground size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">{item.value}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\nfunction InfoBlock({ label, value }: { label: string; value: ReactNode }) {\n\treturn (\n\t\t<div className=\"space-y-1\">\n\t\t\t<span className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t{label}\n\t\t\t</span>\n\t\t\t<div className=\"text-sm font-medium\">{value}</div>\n\t\t</div>\n\t);\n}\n\nfunction TimelineEvent({\n\tevent,\n}: {\n\tevent: {\n\t\tid: string;\n\t\tlabel: string;\n\t\tvalue: string;\n\t\ticon: ElementType;\n\t\ttone: \"default\" | \"accent\" | \"success\" | \"muted\";\n\t};\n}) {\n\tif (event.value === \"—\") {\n\t\treturn null;\n\t}\n\n\tconst Icon = event.icon;\n\n\tconst toneClasses: Record<typeof event.tone, string> = {\n\t\tdefault:\n\t\t\t\"bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary-foreground\",\n\t\taccent:\n\t\t\t\"bg-accent/10 text-accent-foreground dark:bg-accent/20 dark:text-accent-foreground\",\n\t\tsuccess: \"bg-success/10 text-success dark:bg-success/20 dark:text-success\",\n\t\tmuted: \"bg-muted text-muted-foreground\",\n\t};\n\n\treturn (\n\t\t<div className=\"flex items-start gap-3\">\n\t\t\t<span\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"flex size-10 shrink-0 items-center justify-center rounded-full\",\n\t\t\t\t\ttoneClasses[event.tone],\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Icon className=\"size-4\" />\n\t\t\t</span>\n\t\t\t<div className=\"space-y-1\">\n\t\t\t\t<p className=\"text-sm font-medium\">{event.label}</p>\n\t\t\t\t<p className=\"text-muted-foreground text-xs\">{event.value}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,0BAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAYA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAMA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAIA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QA6IA,SAAS,EAAkB,CAAyC,SACnE,AAAK,EAIE,EAJH,AAKF,IALW,IAKH,GACR,KAAK,CAAC,KACN,GAAG,CAAC,AAAC,GAAS,EAAK,MAAM,CAAC,GAAG,WAAW,GAAK,EAAK,KAAK,CAAC,IACxD,IAAI,CAAC,KAPC,OAQT,CAmBA,SAAS,EACR,CAAgC,CAChC,CAAiB,EAEjB,GAAI,CAAC,EACJ,OAAO,CADO,EACK,mBAGpB,GAAI,EAAS,YAAY,CACxB,CAD0B,MACnB,EAAS,YAAY,CAG7B,IAAM,EACL,CAAA,EAAG,EAAS,UAAU,EAAI,GAAG,CAAC,EAAE,EAAS,SAAS,EAAI,GAAA,CAAI,CAAC,IAAI,UAC5D,AAAJ,GAIO,GAAY,IAJL,cAKf,CAEA,SAAS,EAAuB,CAAgC,SAC/D,AAAK,IAAD,AAKH,EAAS,IALK,GAKE,EAChB,EAAS,IAAI,EACb,CAAC,EAAS,IAAI,CAAE,EAAS,KAAK,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,KAAA,GACrD,UAEF,CAmCO,SAAS,EAAoB,YAAE,CAAU,CAA4B,EAC3E,MA1BM,EA0BA,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,UACL,CAAQ,UACR,CAAQ,UACR,CAAQ,CACR,UAAQ,CACR,SAAO,KACP,CAAG,cACH,EAAe,EAAE,CACjB,CAAG,EAEE,EAAe,EAAuB,EAAU,EAAS,YAAY,EACrE,EAAc,EAAkB,EAAS,MAAM,EAC/C,EAAc,EAAS,MAAM,CAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,aAAc,AApG/B,SAAS,AAAqB,CAAyC,EACtE,OAAQ,GACP,IAAK,SACJ,MAAO,+CACR,KAAK,OACJ,MAAO,4BACR,KAAK,SACJ,MAAO,qCACR,KAAK,WACJ,MAAO,oCACR,KAAK,UACJ,MAAO,4BACR,SACC,MAAO,0BACT,CACD,EAqFoD,EAAS,MAAM,GAEhE,QAAQ,mBAEP,GAHG,gBAKF,KAEE,GApDA,EACL,EAAS,QAmDW,MAnDG,EAAI,CAAC,IAAI,EAAE,EAAS,EAAE,CAAC,KAAK,CAAC,EAAG,GAAG,WAAW,GAAA,CAAI,GAE3C,CAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAuB,QAAQ,mBACnC,GADS,mBAGX,CAEG,GACH,EAAO,IAAI,CAAC,AA0CkD,GA3C9C,AAIb,AAuCmC,EAvC1B,YAAY,EAAE,AAC1B,EAAO,IAAI,CACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,aAAiC,QAAQ,qBACxD,EAAS,YAAY,EADW,kBAM7B,CACN,MAAO,EAAS,KAAK,EAAI,EACzB,SA6BgD,CA7BtC,QACV,CACD,GA8BM,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IACvB,AAAL,GAAe,CAAX,aACG,CADuB,CACd,aAAa,CAAC,GAAG,CAAC,AAAC,IAAa,CAAD,AAC9C,GAAI,EAAG,EAAE,CACT,KAAM,EAAG,IAAI,CACb,KAAM,EAAG,IAAI,CACb,MAAO,EAAG,KAAK,CACf,SAAU,EAAG,QAAQ,CACrB,KAAM,EAAG,IAAI,CACd,CAAC,EARoC,EAAE,CASrC,CAAC,GAAU,cAAc,EAGtB,EAAmB,CAAA,EAAA,EAAA,OAAA,AAAO,EAC/B,IAAM,CAAC,CACN,EAAK,KACJ,SACE,cAAc,CAAC,sBACd,eAAe,CAAE,SAAU,QAAS,EACxC,EACA,EAAK,KACJ,SACE,cAAc,CAAC,mBACd,eAAe,CAAE,SAAU,QAAS,EACxC,EACA,EAAK,KACJ,SACE,cAAc,CAAC,cACd,eAAe,CAAE,SAAU,QAAS,EACxC,EACA,EAAK,KACJ,SACE,cAAc,CAAC,uBACd,eAAe,CAAE,SAAU,QAAS,EACxC,EACA,EAAK,KACJ,SACE,cAAc,CAAC,iBACd,eAAe,CAAE,SAAU,QAAS,EACxC,EACA,EAAK,KACJ,SAAS,cAAc,CAAC,SAAS,eAAe,CAAE,SAAU,QAAS,EACtE,EACD,CAAC,CACD,EAAE,EAGH,CAAA,EAAA,EAAA,mBAAmB,AAAnB,EAAoB,GAEpB,IAAM,EAAY,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACzB,IAAM,EAKA,EAAE,CAuCR,OArCA,EAAM,IAAI,CAAC,CACV,IAAK,SACL,KAAM,EAAA,SAAS,CACf,MAAO,SACP,MAAO,CACR,GAEA,EAAM,IAAI,CAAC,CACV,IAAK,OACL,KAAM,EAAA,IAAI,CACV,MAAO,UACP,MACC,EAAS,MAAM,EAAwB,KAApB,EAAS,MAAM,CAC/B,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,MAAM,CAAE,CAAE,OAAQ,UAAW,GACjD,UACL,GAEA,EAAM,IAAI,CAAC,CACV,IAAK,SACL,KAAM,EAAA,YAAY,CAClB,MAAO,SACP,MACC,EAAS,QAAQ,EAA0B,KAAtB,EAAS,QAAQ,CACnC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,QAAQ,CAAE,CAAE,OAAQ,UAAW,GACnD,YACL,GAEA,EAAM,IAAI,CAAC,CACV,IAAK,SACL,KAAM,EAAA,aAAa,CACnB,MAAO,SACP,MACC,EAAS,QAAQ,EAA0B,KAAtB,EAAS,QAAQ,CACnC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,QAAQ,CAAE,CAAE,OAAQ,UAAW,GACnD,oBACL,GAEO,CACR,EAAG,CAAC,EAAS,MAAM,CAAE,EAAS,QAAQ,CAAE,EAAS,QAAQ,CAAE,EAAY,EAEjE,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAgB,KAC3C,IAAM,EAAuB,EAAE,CA0E/B,OAxEI,EACH,EAAM,IAAI,CAAC,CADE,AAEZ,GAAI,CAAC,SAAS,EAAE,EAAS,EAAE,CAAA,CAAE,CAC7B,KAAM,WACN,MAAO,EAAuB,EAAU,EAAS,YAAY,EAC7D,SAAU,EAAS,KAAK,EAAI,EAAS,KAAK,OAAI,EAC9C,KAAM,CAAC,qBAAqB,EAAE,EAAS,EAAE,CAAA,CAAE,AAC5C,GACU,EAAS,UAAU,EAAE,AAC/B,EAAM,IAAI,CAAC,CACV,GAAI,CAAC,SAAS,EAAE,EAAS,UAAU,CAAA,CAAE,CACrC,KAAM,WACN,MAAO,EAAS,YAAY,CAC5B,KAAM,CAAC,qBAAqB,EAAE,EAAS,UAAU,CAAA,CAClD,AADoD,GAIjD,GACH,EAAM,IAAI,CADG,AACF,CACV,GAAI,CAAC,SAAS,EAAE,EAAS,EAAE,CAAA,CAAE,CAC7B,KAAM,WACN,MAAO,EAAuB,GAC9B,SACC,CAAC,EAAS,IAAI,CAAE,EAAS,KAAK,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,YACrD,EACD,KAAM,CAAC,2BAA2B,EAAE,EAAS,EAAE,CAAA,CAAE,AAClD,GAGG,GACH,EADQ,AACF,IAAI,CAAC,CACV,GAAI,CAAC,IAAI,EAAE,EAAI,EAAE,CAAA,CAAE,CACnB,KAAM,MACN,MAAO,EAAI,KAAK,EAAI,CAAC,KAAK,EAAE,EAAI,UAAU,EAAI,EAAI,EAAE,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CAClE,SAAU,EAAI,MAAM,OAAI,EACxB,KAAM,CAAC,gBAAgB,EAAE,EAAI,EAAE,CAAA,CAAE,CACjC,MAAO,EAAI,MAAM,CACd,CAAE,MAAO,EAAkB,EAAI,MAAM,EAAG,QAAS,SAAU,OAC3D,CACJ,GAGG,GACH,EAAM,IAAI,CADG,AACF,CACV,GAAI,CAAC,SAAS,EAAE,EAAS,EAAE,CAAA,CAAE,CAC7B,KAAM,WACN,MACC,EAAS,KAAK,EACd,CAAC,UAAU,EAAE,EAAS,eAAe,EAAI,EAAS,EAAE,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CACnE,SAAU,EAAS,MAAM,OAAI,EAC7B,KAAM,CAAC,0BAA0B,EAAE,EAAS,EAAE,CAAA,CAAE,CAChD,MAAO,EAAS,MAAM,CACnB,CAAE,MAAO,EAAkB,EAAS,MAAM,EAAG,QAAS,WAAY,OAClE,CACJ,GAGG,GACH,EAAM,IADM,AACF,CAAC,CACV,GAAI,CAAC,QAAQ,EAAE,EAAQ,EAAE,CAAA,CAAE,CAC3B,KAAM,UACN,MACC,EAAQ,KAAK,EACb,CAAC,SAAS,EAAE,EAAQ,cAAc,EAAI,EAAQ,EAAE,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CAC/D,SAAU,EAAQ,MAAM,OAAI,EAC5B,KAAM,CAAC,yBAAyB,EAAE,EAAQ,EAAE,CAAA,CAAE,CAC9C,MAAO,EAAQ,MAAM,CAClB,CAAE,MAAO,EAAkB,EAAQ,MAAM,EAAG,QAAS,SAAU,OAC/D,CACJ,GAGM,CACR,EAAG,CAAC,EAAU,EAAU,EAAU,EAAS,EAAK,EAAS,EAEnD,EAAiB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAkB,IACzC,AAAN,GAAkB,CAAd,CAIG,AAJF,CAKJ,CACC,GAAI,AANmB,GAAG,QAO1B,MAAO,mBACP,OAAQ,EAAW,YAAc,UACjC,KAAM,GAAU,iBAAc,EAC9B,KAAM,GAAU,GACb,CAAC,0BAA0B,EAAE,EAAS,EAAE,CAAA,CAAE,MAC1C,EACH,YAAa,GAAU,gBACpB,CAAC,CAAC,EAAE,EAAS,eAAe,CAAA,CAAE,MAC9B,CACJ,EACA,CACC,GAAI,WACJ,MAAO,qBACP,OAAQ,YACR,KAAM,EAAS,SAAS,EAAI,OAC5B,KAAM,CAAC,0BAA0B,EAAE,EAAS,EAAE,CAAA,CAAE,CAChD,YACqB,WAApB,EAAS,MAAM,CAAgB,SAAW,mBAC5C,EACA,CACC,GAAI,UACJ,MAAO,kBACP,OAAQ,EAAU,YAAc,UAChC,KAAM,GAAS,iBAAc,EAC7B,KAAM,GAAS,GACZ,CAAC,yBAAyB,EAAE,EAAQ,EAAE,CAAA,CAAE,MACxC,EACH,YAAa,GAAS,eACnB,CAAC,CAAC,EAAE,EAAQ,cAAc,CAAA,CAAE,MAC5B,CACJ,EACA,CACC,GAAI,UACJ,MAAO,mBACP,OACC,GAAS,SAAW,OACjB,YACA,EACC,UACA,UACL,KAAM,GAAS,cAAW,EAC1B,YAAa,GAAS,QACnB,YACA,EACC,CAAC,SAAS,EAAE,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAQ,cAAc,EAAI,GAAA,CAAI,MACzD,CACL,EACA,CArDO,EAAE,CAsDR,CAAC,EAAU,EAAU,EAAQ,EAE1B,EAAkB,CAAA,EAAA,EAAA,OAAO,AAAP,EAAiC,KACxD,IAAM,EACL,EAAS,cAAc,EAAI,CAAC,IAAI,EAAE,EAAS,EAAE,CAAC,KAAK,CAAC,EAAG,GAAG,WAAW,GAAA,CAAI,CAE1E,MAAO,CACN,GAAI,oBACJ,MAAO,oBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,WAC1B,aAAa,EACb,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,MAAM,kBAAkB,MAAO,CAAC,CAAC,EAAE,EAAA,CAAgB,GAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,MAAM,SAAS,MAAO,IACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,gBACN,MACC,EAAS,YAAY,CAAG,EAAS,YAAY,CAAG,kBAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,UACN,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,SAAS,CAAE,CAAE,OAAQ,UAAW,KAE5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,aACN,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,SAAS,CAAE,CAAE,OAAQ,MAAO,KAExD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,cACN,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,UAAU,CAAE,CAAE,OAAQ,MAAO,KAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,WACN,MACC,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACJ,UAAU,kFACV,KAAM,CAAC,qBAAqB,EAAE,EAAS,EAAE,CAAA,CAAE,WAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,WACf,EAAuB,EAAU,EAAS,YAAY,KAGxD,EAAS,YAAY,GAIvB,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACA,MAAM,WACN,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACJ,UAAU,kFACV,KAAM,CAAC,2BAA2B,EAAE,EAAS,EAAE,CAAA,CAAE,WAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,WACjB,EAAuB,YAQhC,CACD,EAAG,CAAC,EAAU,EAAU,EAAU,EAAY,EAExC,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAC3B,IAAM,CAAC,CACN,GAAI,iBACJ,MAAO,iBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,WAC/B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sFACb,EAAS,OAAO,EAAI,EAAS,OAAO,CAAC,IAAI,GAAG,MAAM,CAAG,EACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAAuB,EAAS,OAAO,GAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,oCAO1C,CAAC,CACD,CAAC,EAAS,OAAO,CAAC,EAGb,EAAgB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAiC,IAC7D,AAAM,EAAS,EAAX,CAAC,OAAoB,EAAI,EAAS,QAAQ,CAIvC,CACN,CALgD,EAK5C,YACJ,MAAO,YACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,WAC/B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sFACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mCAE1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BACX,EAAS,UAAU,EAAI,6BAExB,EAAS,WAAW,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACX,EAAS,WAAW,CACpB,EAAS,aAAa,CACpB,CAAC,IAAI,EAAE,EAAS,aAAa,CAAA,CAAE,CAC/B,MAGJ,EAAS,WAAW,EACpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACX,EAAS,WAAW,GAGvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACd,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,YACQ,IACT,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,QAAQ,CAAE,CAAE,OAAQ,UAAW,MAEpD,EAAS,SAAS,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,OAAK,EAAS,SAAS,cAMvD,EAzCQ,KA0CN,CACF,EAAS,SAAS,CAClB,EAAS,aAAa,CACtB,EAAS,WAAW,CACpB,EAAS,UAAU,CACnB,EAAS,WAAW,CACpB,EAAS,QAAQ,CACjB,EAEK,EAAoB,CAAA,EAAA,EAAA,OAAA,AAAO,EAA0B,KAC1D,IAAM,EAMA,CACL,CACC,GAAI,SACJ,MAAO,SACP,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,QAAQ,CAAE,CAAE,OAAQ,UAAW,GAC1D,KAAM,EAAA,aAAa,CACnB,KAAM,SACP,EACA,CACC,GAAI,SACJ,MAAO,SACP,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,QAAQ,CAAE,CAAE,OAAQ,UAAW,GAC1D,KAAM,EAAA,YAAY,CAClB,KAAM,QACP,EACA,CACC,GAAI,OACJ,MAAO,OACP,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,MAAM,CAAE,CAAE,OAAQ,UAAW,GACxD,KAAM,EAAA,IAAI,CACV,KAAM,SACP,EACA,CACC,GAAI,UACJ,MAAO,UACP,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,SAAS,CAAE,CAAE,OAAQ,UAAW,GAC3D,KAAM,EAAA,QAAQ,CACd,KAAM,OACP,EACA,CAED,MAAO,CACN,GAAI,qBACJ,MAAO,qBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,WAC3B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACb,EAAO,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAc,MAAO,GAAY,EAAM,EAAE,MAK/C,CACD,EAAG,CACF,EAAS,SAAS,CAClB,EAAS,MAAM,CACf,EAAS,QAAQ,CACjB,EAAS,QAAQ,CACjB,EAEK,GAAsB,CAAA,EAAA,EAAA,OAAO,AAAP,EAAwC,IACnE,AAA4B,GAAG,CAA3B,EAAa,MAAM,CACf,KAGD,CACN,GAAI,eACJ,MAAO,sBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,WAC1B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACb,EAAa,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACJ,UAAU,qHACV,KAAM,CAAC,wBAAwB,EAAE,EAAY,EAAE,CAAA,CAAE,WAGjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BACX,CAAA,EAAA,EAAA,UAAA,EAAW,EAAY,eAAe,CAAE,CACxC,OAAQ,MACT,KAED,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACX,CAAA,EAAA,EAAA,UAAA,EAAW,EAAY,eAAe,CAAE,CACxC,OAAQ,MACT,GACC,EAAY,aAAa,CACvB,CAAC,GAAG,EAAE,CAAA,EAAA,EAAA,UAAA,EAAW,EAAY,aAAa,CAAE,CAC5C,OAAQ,MACT,GAAA,CAAI,CACH,SAGL,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBACb,EAAkB,EAAY,MAAM,EAAI,iBApBrC,EAAY,EAAE,MA2BzB,EACE,CAAC,EAAa,EAEX,GAAyB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAiC,IACtE,AAAI,AAAC,EAAS,KAAK,EAAI,AAAiC,GAAG,GAA3B,KAAK,CAAC,IAAI,GAAG,MAAM,CAI5C,CACN,GAAI,mBACJ,MAAO,mBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CAAC,UAAU,WAC7B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uDACX,EAAS,KAAK,IAInB,EAdQ,KAeN,CAAC,EAAS,KAAK,CAAC,EAEb,GAAuB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAiC,IACpE,AAAI,AAAC,EAAS,KAAK,EAAqC,GAAG,CAApC,EAAS,KAAK,CAAC,IAAI,GAAG,MAAM,CAI5C,CACN,GAAI,iBACJ,MAAO,iBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAW,CAAA,CAAC,UAAU,WAC7B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DACX,EAAS,KAAK,IAInB,EAdQ,KAeN,CAAC,EAAS,KAAK,CAAC,EAEb,GAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAC1B,IAAM,CAAC,CACN,GAAI,OACJ,MAAO,OACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,WACzB,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACV,SAAU,EAAS,EAAE,CACrB,WAAW,WACX,aAAc,MAAO,EAAI,KACxB,IAAM,EAAS,MAAM,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,WAAY,EAAI,EAClD,GAAO,OAAO,CACjB,CADmB,CACZ,OAAO,GAEd,EAAA,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,wBAE9B,EACA,KAAM,MAIV,CAAC,CACD,CAAC,EAAS,EAAE,CAAE,EAAc,EAAO,EAG9B,GAAiB,CAAA,EAAA,EAAA,OAAA,AAAO,EAC7B,IACC,CACC,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,CAAC,MAAM,CAAC,SACV,CACC,GACA,GACA,EACA,EACA,EACA,EACA,GACA,GACA,EAGI,GAA6B,EAAe,MAAM,CAAG,EAE3D,MACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,CACvB,cACC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,OAAQ,aAGzB,EAEL,aACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAc,OAAQ,EAAc,UAAW,IAEjD,eAAgB,GAChB,mBAAmB,oBACnB,aAAc,EACd,qBAAsB,CACrB,YAAY,EACZ,OAAO,EACP,aAAa,EACb,aAAc,EAAa,MAAM,CAAG,CACrC,EACA,WAAW,oBAGd,CAEA,SAAS,EAAc,QACtB,CAAM,WACN,CAAS,CAST,EACA,MACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAiB,OAAQ,IAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAc,MAAO,UAK3B,CAEA,SAAS,EAAiB,QAAE,CAAM,CAAsC,EACvE,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,EAAO,KAAK,CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4DACZ,EAAO,KAAK,GAEX,KACH,EAAO,QAAQ,CACf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDACX,EAAO,QAAQ,GAEd,KACH,EAAO,WAAW,CAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAO,WAAW,GAC7D,QAEJ,EAAO,MAAM,EAAI,EAAO,MAAM,CAAC,MAAM,CAAG,EACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAqC,EAAO,MAAM,GAC9D,OAGP,CAEA,SAAS,EAAc,CACtB,OAAK,CAQL,SACA,AAAqB,GAAG,CAApB,EAAM,MAAM,CACR,KAIP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACb,EAAM,GAAG,CAAE,AAAD,IACV,IAAM,EAAO,EAAK,IAAI,CACtB,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACA,UAAU,sFAGV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,mCAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+EACd,EAAK,KAAK,GAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BAAuB,EAAK,KAAK,QAT7C,EAAK,GAAG,CAahB,IAGH,CAEA,SAAS,EAAU,OAAE,CAAK,OAAE,CAAK,CAAuC,EACvE,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+EACd,IAEF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAuB,MAGzC,CAEA,SAAS,EAAc,OACtB,CAAK,CASL,EACA,GAAoB,KAAK,CAArB,EAAM,KAAK,CACd,OAAO,KAGR,IAAM,EAAO,EAAM,IAAI,CAWvB,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACA,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACZ,iEACA,AAdmD,CACtD,QACC,6EACD,OACC,oFACD,QAAS,kEACT,MAAO,gCACR,CAOe,CAAC,EAAM,IAAI,CAAC,WAGxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,aAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAAuB,EAAM,KAAK,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAM,KAAK,QAI7D"}