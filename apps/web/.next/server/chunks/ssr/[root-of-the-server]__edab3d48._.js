module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},468729,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx <module evaluation>","WorkDataView");a.s(["WorkDataView",0,b])},750692,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx","WorkDataView");a.s(["WorkDataView",0,b])},310669,a=>{"use strict";a.i(468729);var b=a.i(750692);a.n(b)},148233,a=>{a.n(a.i(424946))},659256,a=>{a.n(a.i(679010))},595871,a=>{"use strict";var b=a.i(429969);a.i(467361);var c=a.i(445074),d=a.i(933427);let e=`
  id,
  equipment_number,
  name,
  classification,
  type,
  manufacturer,
  model,
  serial_number,
  status,
  condition,
  install_date,
  last_service_date,
  next_service_due,
  location,
  archived_at,
  deleted_at,
  customer:customers!equipment_customer_id_customers_id_fk (
    display_name,
    first_name,
    last_name
  ),
  property:properties!equipment_property_id_properties_id_fk (
    address,
    city,
    state
  )
`;async function f(a,b=50,g){let h=g??await (0,c.getActiveCompanyId)();if(!h)return{equipment:[],totalCount:0};let i=await (0,d.createServiceSupabaseClient)();if(!i)throw Error("Supabase client not configured");let j=(Math.max(a,1)-1)*b,{data:k,error:l,count:m}=await i.from("equipment").select(e,{count:"exact"}).eq("company_id",h).order("created_at",{ascending:!1}).range(j,j+b-1);if(l)throw Error(`Failed to load equipment: ${l.message}`);return{equipment:k??[],totalCount:m??0}}let g=(0,b.cache)(async(a,b)=>{let c=await (0,d.createServiceSupabaseClient)();if(!c)throw Error("Supabase client not configured");let{data:e,error:f}=await c.rpc("get_equipment_complete",{p_equipment_id:a,p_company_id:b});return f?(console.error("Error fetching equipment:",f),null):e?.[0]?.equipment_data||null});a.s(["EQUIPMENT_PAGE_SIZE",0,50,"getEquipmentComplete",0,g,"getEquipmentPageData",()=>f])},101542,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentKanban() from the server but EquipmentKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-kanban.tsx <module evaluation>","EquipmentKanban");a.s(["EquipmentKanban",0,b])},307224,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentKanban() from the server but EquipmentKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-kanban.tsx","EquipmentKanban");a.s(["EquipmentKanban",0,b])},649131,a=>{"use strict";a.i(101542);var b=a.i(307224);a.n(b)},587930,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentTable() from the server but EquipmentTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-table.tsx <module evaluation>","EquipmentTable");a.s(["EquipmentTable",0,b])},209710,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentTable() from the server but EquipmentTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-table.tsx","EquipmentTable");a.s(["EquipmentTable",0,b])},332302,a=>{"use strict";a.i(587930);var b=a.i(209710);a.n(b)},831822,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(649131),f=a.i(332302),g=a.i(310669);a.i(467361);var h=a.i(445074),i=a.i(595871);let j={equipment:"Equipment",tool:"Tool",vehicle:"Vehicle"},k={hvac:"HVAC System",plumbing:"Plumbing",electrical:"Electrical",appliance:"Appliance",water_heater:"Water Heater",furnace:"Furnace",ac_unit:"A/C Unit",vehicle:"Vehicle",tool:"Tool",other:"Other"},l=a=>a?a.replace(/[_-]+/g," ").replace(/\b\w/g,a=>a.toUpperCase()).trim():"",m=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";async function n({searchParams:a}){let c=await (0,h.getActiveCompanyId)();if(!c)return(0,d.notFound)();let n=Number(a?.page)||1,{equipment:o,totalCount:p}=await (0,i.getEquipmentPageData)(n,i.EQUIPMENT_PAGE_SIZE,c),q=o.map(a=>{var b,c;let d,e,f,g,h;return d=Array.isArray(a.customer)?a.customer[0]:a.customer,e=Array.isArray(a.property)?a.property[0]:a.property,g=j[f=a.classification||((b=a.type||void 0)?["vehicle","fleet_vehicle","truck","van"].includes(b)?"vehicle":["tool","hand_tool","power_tool","equipment_tool","pipe_tool","jetter"].includes(b)?"tool":"equipment":"equipment")]||l(f),h=k[a.type]||l(a.type),{id:a.id,equipmentNumber:a.equipment_number,name:a.name,classification:f,classificationLabel:g,type:a.type||"other",typeLabel:h,manufacturer:a.manufacturer||"",model:a.model||"",assetId:a.equipment_number||a.id,assignedTo:a.assigned_to||"Unassigned",customer:d?d.display_name?d.display_name:`${d.first_name||""} ${d.last_name||""}`.trim()||"Unknown":"Unknown",location:(c=a.location,e?`${e.address||""}, ${e.city||""} ${e.state||""}`.trim():c||""),status:a.status,condition:a.condition,installDate:m(a.install_date),lastService:m(a.last_service_date),nextService:m(a.next_service_due),nextServiceDue:m(a.next_service_due),archived_at:a.archived_at,deleted_at:a.deleted_at}});return(0,b.jsx)(g.WorkDataView,{kanban:(0,b.jsx)(e.EquipmentKanban,{equipment:q}),section:"equipment",table:(0,b.jsx)(f.EquipmentTable,{equipment:q,currentPage:n,itemsPerPage:i.EQUIPMENT_PAGE_SIZE,totalCount:p})})}a.i(250202);var o=a.i(709027);function p(){return(0,b.jsx)(o.DataTableListSkeleton,{})}async function q({searchParams:a}){let d=await a;return(0,b.jsx)("div",{className:"flex h-full flex-col",children:(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(p,{}),children:(0,b.jsx)(n,{searchParams:d})})})})}a.s(["default",()=>q],831822)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__edab3d48._.js.map