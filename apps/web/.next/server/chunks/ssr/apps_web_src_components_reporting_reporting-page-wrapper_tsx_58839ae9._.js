module.exports=[141751,a=>{"use strict";var b=a.i(861467),c=a.i(783281),d=a.i(145679),e=a.i(773608),f=a.i(129774),g=a.i(912288),h=a.i(838441),i=a.i(788568),j=a.i(674832),k=a.i(159929);a.i(445255);var l=a.i(18170);a.i(708402);var m=a.i(876067);a.i(297229);var n=a.i(489904);a.i(40744);var o=a.i(419573);a.i(146697);var p=a.i(778737);a.i(19256);var q=a.i(417132);a.i(839984);var r=a.i(372712);a.i(458393);var s=a.i(82012);a.i(531982);var t=a.i(421983);a.i(21368);var u=a.i(341903),v=a.i(187056),w=a.i(271758),x=a.i(319895),y=a.i(273819),z=a.i(789815),A=a.i(198803),B=a.i(638446),C=a.i(739044),D=a.i(624126),E=a.i(156916),F=a.i(629185);let G=[{id:"csv",label:"CSV",icon:w.FileSpreadsheet,description:"Spreadsheet compatible"},{id:"excel",label:"Excel",icon:w.FileSpreadsheet,description:"Full formatting"},{id:"pdf",label:"PDF",icon:x.FileText,description:"Print-ready document"},{id:"png",label:"Image",icon:y.Image,description:"Chart screenshot"}];function H({reportType:a,reportTitle:d,days:e=90,trigger:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)("download"),[k,m]=(0,c.useState)("csv"),[n,p]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,H]=(0,c.useState)(`${d} - ${new Date().toLocaleDateString()}`),[I,J]=(0,c.useState)(!0),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)("weekly"),O=async()=>{p(!0);try{if("download"===i)if("csv"===k){let b=await (0,F.exportReportToCSV)(a,e);if(!b.success||!b.data)return void E.toast.error(b.error||"Failed to export report");let c=new Blob([b.data],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=b.filename||`${a}-report.csv`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d),E.toast.success("Report downloaded successfully"),h(!1)}else if("pdf"===k)window.print(),E.toast.success("Print dialog opened - select 'Save as PDF'"),h(!1);else if("excel"===k){let b=await (0,F.exportReportToCSV)(a,e);if(!b.success||!b.data)return void E.toast.error(b.error||"Failed to export report");let c=new Blob([b.data],{type:"application/vnd.ms-excel;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=`${a}-report.xlsx`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d),E.toast.success("Excel file downloaded"),h(!1)}else"png"===k&&E.toast.info("Chart image export coming soon");else{if(!w)return void E.toast.error("Please enter an email address");await new Promise(a=>setTimeout(a,1500)),K?E.toast.success(`Report scheduled for ${M} delivery to ${w}`):E.toast.success(`Report sent to ${w}`),h(!1)}}catch(a){console.error("Export error:",a),E.toast.error("Failed to export report")}finally{p(!1)}};return(0,b.jsxs)(q.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:f||(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(v.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsxs)(q.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Download,{className:"h-5 w-5"}),"Export Report"]}),(0,b.jsxs)(q.DialogDescription,{children:['Download or email "',d,'"']})]}),(0,b.jsxs)(t.Tabs,{value:i,onValueChange:a=>j(a),className:"mt-4",children:[(0,b.jsxs)(t.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsxs)(t.TabsTrigger,{value:"download",className:"gap-2",children:[(0,b.jsx)(v.Download,{className:"h-4 w-4"}),"Download"]}),(0,b.jsxs)(t.TabsTrigger,{value:"email",className:"gap-2",children:[(0,b.jsx)(z.Mail,{className:"h-4 w-4"}),"Email"]})]}),(0,b.jsxs)(t.TabsContent,{value:"download",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Select Format"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:G.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>m(a.id),className:`flex items-center gap-3 rounded-lg border-2 p-3 text-left transition-all ${k===a.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,b.jsx)("div",{className:`flex h-9 w-9 items-center justify-center rounded-md ${k===a.id?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,b.jsx)(a.icon,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.label}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]}),k===a.id&&(0,b.jsx)(B.Check,{className:"ml-auto h-4 w-4 text-primary"})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border bg-muted/30 p-3",children:[(0,b.jsx)(u.Checkbox,{id:"includeCharts",checked:I,onCheckedChange:a=>J(a)}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{htmlFor:"includeCharts",className:"cursor-pointer",children:"Include charts and visualizations"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visual elements to the export"})]})]})]}),(0,b.jsxs)(t.TabsContent,{value:"email",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{htmlFor:"emailTo",children:"Send to"}),(0,b.jsx)(r.Input,{id:"emailTo",type:"email",placeholder:"email@example.com",value:w,onChange:a=>x(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Separate multiple emails with commas"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{htmlFor:"emailSubject",children:"Subject"}),(0,b.jsx)(r.Input,{id:"emailSubject",value:y,onChange:a=>H(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Format"}),(0,b.jsxs)(o.Select,{value:k,onValueChange:a=>m(a),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"pdf",children:"PDF Document"}),(0,b.jsx)(o.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,b.jsx)(o.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(u.Checkbox,{id:"scheduleDelivery",checked:K,onCheckedChange:a=>L(a)}),(0,b.jsx)("div",{children:(0,b.jsxs)(s.Label,{htmlFor:"scheduleDelivery",className:"cursor-pointer flex items-center gap-2",children:[(0,b.jsx)(D.Clock,{className:"h-4 w-4"}),"Schedule recurring delivery"]})})]}),K&&(0,b.jsxs)("div",{className:"ml-6 mt-3 space-y-2",children:[(0,b.jsxs)(o.Select,{value:M,onValueChange:N,children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(o.SelectItem,{value:"weekly",children:"Weekly (Mondays)"}),(0,b.jsx)(o.SelectItem,{value:"monthly",children:"Monthly (1st)"})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Reports will be sent automatically at 8:00 AM"})]})]})]})]}),(0,b.jsxs)(q.DialogFooter,{className:"mt-4",children:[(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(l.Button,{onClick:O,disabled:n,children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"email"===i?"Sending...":"Exporting..."]}):(0,b.jsx)(b.Fragment,{children:"email"===i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Send,{className:"mr-2 h-4 w-4"}),K?"Schedule":"Send"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Download,{className:"mr-2 h-4 w-4"}),"Download"]})})})]})]})]})}a.i(288007);var I=a.i(986990);a.i(650756);var J=a.i(560450),K=a.i(587969),L=a.i(638727),M=a.i(300298);let N=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],O=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"];function P({reportTitle:a,reportType:d,trigger:e,onScheduled:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)("weekly"),[n,p]=(0,c.useState)(1),[t,u]=(0,c.useState)(1),[v,w]=(0,c.useState)("08:00"),[x,y]=(0,c.useState)("pdf"),[C,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)([]),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!0),T=()=>{P&&P.includes("@")?(G.includes(P)||H([...G,P]),Q("")):E.toast.error("Please enter a valid email address")},U=async()=>{if(0===G.length)return void E.toast.error("Please add at least one recipient");j(!0);try{await new Promise(a=>setTimeout(a,1e3));let a={frequency:k,dayOfWeek:"weekly"===k?n:void 0,dayOfMonth:"monthly"===k||"quarterly"===k?t:void 0,time:v,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,recipients:G,format:x,includeCharts:C,isActive:R};f?.(a),E.toast.success("Report schedule saved successfully"),h(!1)}catch(a){E.toast.error("Failed to save schedule")}finally{j(!1)}},V=a=>{if(a>3&&a<21)return"th";switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};return(0,b.jsxs)(q.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:e||(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(K.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsxs)(q.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(K.Calendar,{className:"h-5 w-5"}),"Schedule Report"]}),(0,b.jsxs)(q.DialogDescription,{children:['Set up automatic delivery for "',a,'"']})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Delivery Frequency"}),(0,b.jsxs)(o.Select,{value:k,onValueChange:a=>m(a),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(o.SelectItem,{value:"weekly",children:"Weekly"}),(0,b.jsx)(o.SelectItem,{value:"monthly",children:"Monthly"}),(0,b.jsx)(o.SelectItem,{value:"quarterly",children:"Quarterly"})]})]})]}),"weekly"===k&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Day of Week"}),(0,b.jsxs)(o.Select,{value:n.toString(),onValueChange:a=>p(parseInt(a)),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:N.map(a=>(0,b.jsx)(o.SelectItem,{value:a.value.toString(),children:a.label},a.value))})]})]}),("monthly"===k||"quarterly"===k)&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Day of Month"}),(0,b.jsxs)(o.Select,{value:t.toString(),onValueChange:a=>u(parseInt(a)),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:Array.from({length:28},(a,b)=>b+1).map(a=>(0,b.jsxs)(o.SelectItem,{value:a.toString(),children:[a,V(a)]},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Delivery Time"}),(0,b.jsxs)(o.Select,{value:v,onValueChange:w,children:[(0,b.jsxs)(o.SelectTrigger,{children:[(0,b.jsx)(D.Clock,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(o.SelectValue,{})]}),(0,b.jsx)(o.SelectContent,{children:O.map(a=>(0,b.jsx)(o.SelectItem,{value:a,children:a},a))})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Times are in your local timezone (",Intl.DateTimeFormat().resolvedOptions().timeZone,")"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Recipients"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(r.Input,{type:"email",placeholder:"email@example.com",value:P,onChange:a=>Q(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),T())}),(0,b.jsx)(l.Button,{type:"button",variant:"outline",onClick:T,children:(0,b.jsx)(L.Plus,{className:"h-4 w-4"})})]}),G.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:G.map(a=>(0,b.jsxs)(I.Badge,{variant:"secondary",className:"gap-1 pr-1",children:[(0,b.jsx)(z.Mail,{className:"h-3 w-3"}),a,(0,b.jsx)("button",{type:"button",onClick:()=>{H(G.filter(b=>b!==a))},className:"ml-1 rounded-full hover:bg-muted p-0.5",children:(0,b.jsx)(M.X,{className:"h-3 w-3"})})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.Label,{children:"Report Format"}),(0,b.jsxs)(o.Select,{value:x,onValueChange:a=>y(a),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"pdf",children:"PDF Document"}),(0,b.jsx)(o.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,b.jsx)(o.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{children:"Include Charts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visualizations to the report"})]}),(0,b.jsx)(J.Switch,{checked:C,onCheckedChange:F})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{children:"Schedule Active"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable automatic delivery"})]}),(0,b.jsx)(J.Switch,{checked:R,onCheckedChange:S})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(B.Check,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"font-medium",children:(()=>{let a="";switch(k){case"daily":a=`Daily at ${v}`;break;case"weekly":a=`Every ${N.find(a=>a.value===n)?.label} at ${v}`;break;case"monthly":a=`Monthly on the ${t}${V(t)} at ${v}`;break;case"quarterly":a=`Quarterly on the ${t}${V(t)} at ${v}`}return a})()})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["to ",G.length," recipient",1!==G.length?"s":""," as ",x.toUpperCase()]})]})]}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(l.Button,{onClick:U,disabled:i||0===G.length,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Check,{className:"mr-2 h-4 w-4"}),"Save Schedule"]})})]})]})]})}var Q=a.i(359974),R=a.i(971197),R=R,S=a.i(998574),T=a.i(339632),U=a.i(916680),V=a.i(624038),W=a.i(688014);let X=[{id:"revenue",label:"Revenue"},{id:"jobs_completed",label:"Jobs Completed"},{id:"conversion_rate",label:"Conversion Rate"},{id:"customer_count",label:"Customer Count"},{id:"avg_ticket",label:"Average Ticket"},{id:"utilization",label:"Team Utilization"}],Y=[{id:"above",label:"Goes above",icon:W.TrendingUp},{id:"below",label:"Falls below",icon:V.TrendingDown},{id:"change",label:"Changes by",icon:U.AlertTriangle}];function Z({reportTitle:a,reportType:d,trigger:e,onSaved:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)("22:00"),[C,D]=(0,c.useState)("08:00"),[F,G]=(0,c.useState)([{id:"1",metric:"revenue",operator:"below",value:1e3,isActive:!0}]),H=(a,b)=>{G(F.map(c=>c.id===a?{...c,...b}:c))},I=async()=>{j(!0);try{await new Promise(a=>setTimeout(a,1e3)),f?.({alerts:F,channels:{inApp:k,email:n,sms:t},quietHours:{enabled:v,start:x,end:C}}),E.toast.success("Notification preferences saved"),h(!1)}catch(a){E.toast.error("Failed to save preferences")}finally{j(!1)}};return(0,b.jsxs)(q.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:e||(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(Q.Bell,{className:"mr-2 h-4 w-4"}),"Notifications"]})}),(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-5xl max-h-[85vh] overflow-y-auto",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsxs)(q.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(R.default,{className:"h-5 w-5"}),"Notification Preferences"]}),(0,b.jsxs)(q.DialogDescription,{children:['Get alerts when "',a,'" metrics hit certain thresholds']})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"text-base font-semibold",children:"Alert Conditions"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when metrics hit thresholds"})]}),(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{G([...F,{id:Date.now().toString(),metric:"revenue",operator:"below",value:0,isActive:!0}])},children:[(0,b.jsx)(L.Plus,{className:"mr-1 h-3 w-3"}),"Add Alert"]})]}),(0,b.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:[F.map(a=>(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border bg-card p-3",children:[(0,b.jsx)(J.Switch,{checked:a.isActive,onCheckedChange:b=>H(a.id,{isActive:b})}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"When"}),(0,b.jsxs)(o.Select,{value:a.metric,onValueChange:b=>H(a.id,{metric:b}),children:[(0,b.jsx)(o.SelectTrigger,{className:"w-[140px] h-8",children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:X.map(a=>(0,b.jsx)(o.SelectItem,{value:a.id,children:a.label},a.id))})]}),(0,b.jsxs)(o.Select,{value:a.operator,onValueChange:b=>H(a.id,{operator:b}),children:[(0,b.jsx)(o.SelectTrigger,{className:"w-[130px] h-8",children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:Y.map(a=>(0,b.jsx)(o.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(a.icon,{className:"h-3 w-3"}),a.label]})},a.id))})]}),(0,b.jsx)(r.Input,{type:"number",value:a.value,onChange:b=>H(a.id,{value:parseFloat(b.target.value)||0}),className:"w-[100px] h-8"}),(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive ml-auto",onClick:()=>{var b;return b=a.id,void G(F.filter(a=>a.id!==b))},children:(0,b.jsx)(T.Trash2,{className:"h-4 w-4"})})]},a.id)),0===F.length&&(0,b.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,b.jsx)(U.AlertTriangle,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"No alerts configured"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Add Alert" to create your first alert condition'})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-2",children:"Example alerts:"}),(0,b.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,b.jsx)("li",{children:"• Revenue falls below $10,000"}),(0,b.jsx)("li",{children:"• Jobs completed goes above 50"}),(0,b.jsx)("li",{children:"• Conversion rate changes by 10%"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"text-base font-semibold",children:"Notification Channels"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose how you want to be notified"})]}),(0,b.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10",children:(0,b.jsx)(Q.Bell,{className:"h-5 w-5 text-blue-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"font-medium",children:"In-App Notifications"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show in notification center"})]})]}),(0,b.jsx)(J.Switch,{checked:k,onCheckedChange:m})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:(0,b.jsx)(z.Mail,{className:"h-5 w-5 text-green-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"font-medium",children:"Email Alerts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Send to your registered email"})]})]}),(0,b.jsx)(J.Switch,{checked:n,onCheckedChange:p})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-500/10",children:(0,b.jsx)(S.Smartphone,{className:"h-5 w-5 text-purple-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"font-medium",children:"SMS Alerts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Text message for urgent alerts"})]})]}),(0,b.jsx)(J.Switch,{checked:t,onCheckedChange:u})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{className:"text-base font-semibold",children:"Quiet Hours"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pause notifications during specific times"})]}),(0,b.jsx)(J.Switch,{checked:v,onCheckedChange:w})]}),v&&(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(s.Label,{className:"text-xs text-muted-foreground",children:"Start Time"}),(0,b.jsxs)(o.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:Array.from({length:24},(a,c)=>{let d=c.toString().padStart(2,"0");return(0,b.jsxs)(o.SelectItem,{value:`${d}:00`,children:[d,":00"]},d)})})]})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsx)("span",{className:"text-muted-foreground",children:"→"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(s.Label,{className:"text-xs text-muted-foreground",children:"End Time"}),(0,b.jsxs)(o.Select,{value:C,onValueChange:D,children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsx)(o.SelectContent,{children:Array.from({length:24},(a,c)=>{let d=c.toString().padStart(2,"0");return(0,b.jsxs)(o.SelectItem,{value:`${d}:00`,children:[d,":00"]},d)})})]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Notifications will be queued and delivered when quiet hours end"})]})]})]})]})}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(l.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(l.Button,{onClick:I,disabled:i,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Check,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})})]})]})]})}var $=a.i(6774),_=a.i(246840),aa=a.i(766153),ab=a.i(127487),ac=a.i(700760);let ad=[{label:"Today",value:"today",days:0},{label:"Yesterday",value:"yesterday",days:1},{label:"Last 7 days",value:"7d",days:7},{label:"Last 14 days",value:"14d",days:14},{label:"Last 30 days",value:"30d",days:30},{label:"Last 90 days",value:"90d",days:90},{label:"Last 12 months",value:"12m",days:365},{label:"Month to date",value:"mtd",days:-1},{label:"Year to date",value:"ytd",days:-2},{label:"Last year",value:"ly",days:-3}],ae=[{label:"7D",value:"7d",days:7},{label:"30D",value:"30d",days:30},{label:"90D",value:"90d",days:90},{label:"1Y",value:"12m",days:365}];function af(a){let b=new Date;switch(b.setHours(23,59,59,999),a){case"today":let c=new Date;return c.setHours(0,0,0,0),{from:c,to:b};case"yesterday":let d=(0,f.subDays)(b,1);d.setHours(0,0,0,0);let e=(0,f.subDays)(b,1);return e.setHours(23,59,59,999),{from:d,to:e};case"7d":return{from:(0,f.subDays)(b,7),to:b};case"14d":return{from:(0,f.subDays)(b,14),to:b};case"30d":default:return{from:(0,f.subDays)(b,30),to:b};case"90d":return{from:(0,f.subDays)(b,90),to:b};case"12m":return{from:(0,f.subDays)(b,365),to:b};case"mtd":return{from:(0,h.startOfMonth)(b),to:b};case"ytd":return{from:(0,j.startOfYear)(b),to:b};case"ly":var l;return{from:(0,j.startOfYear)((0,k.addYears)(b,-1,void 0)),to:(0,i.endOfMonth)((l=(0,j.startOfYear)(b),(0,g.addMonths)(l,-1,void 0)))}}}function ag({onDateChange:a,onRefresh:f,showRefresh:g=!0}){let[h,i]=(0,c.useState)("30d"),[j,k]=(0,c.useState)(()=>af("30d")),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),u=(0,c.useCallback)(b=>{i(b),t(!1);let c=af(b);k(c),a?.(c)},[a]),w=(0,c.useCallback)(b=>{b&&(k(b),t(!0),i("custom"),a?.(b))},[a]),x=(0,c.useCallback)(a=>{u(a)},[u]),y=j?.from?j.to?(0,b.jsxs)(b.Fragment,{children:[(0,e.format)(j.from,"MMM d, yyyy")," - ",(0,e.format)(j.to,"MMM d, yyyy")]}):(0,e.format)(j.from,"MMM d, yyyy"):"Select date range",z=s?"Custom":ad.find(a=>a.value===h)?.label||"Last 30 days";return(0,b.jsxs)("div",{className:"flex flex-col gap-4 border-b bg-background px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(ab.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(p.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Business Intelligence"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Real-time analytics and insights for your business"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g&&(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:f,title:"Refresh data",children:(0,b.jsx)(_.RefreshCw,{className:"h-4 w-4"})}),(0,b.jsx)(Z,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",title:"Notification preferences",children:(0,b.jsx)(Q.Bell,{className:"h-4 w-4"})})}),(0,b.jsx)(p.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsx)(P,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(K.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,b.jsx)(H,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(v.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,b.jsx)(l.Button,{size:"sm",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/dashboard/reporting/builder",children:[(0,b.jsx)(L.Plus,{className:"mr-2 h-4 w-4"}),"Custom Report Builder"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:ae.map(a=>(0,b.jsx)(l.Button,{variant:h!==a.value||s?"ghost":"secondary",size:"sm",className:(0,ac.cn)("h-7 px-3 text-xs font-medium",h===a.value&&!s&&"bg-background shadow-sm"),onClick:()=>x(a.value),children:a.label},a.value))}),(0,b.jsx)(p.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsxs)(o.Select,{value:h,onValueChange:u,children:[(0,b.jsxs)(o.SelectTrigger,{className:"h-8 w-[140px] text-xs",children:[(0,b.jsx)(D.Clock,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)(o.SelectValue,{placeholder:"Select range"})]}),(0,b.jsx)(o.SelectContent,{children:ad.map(a=>(0,b.jsx)(o.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)(n.Popover,{open:q,onOpenChange:r,children:[(0,b.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",className:(0,ac.cn)("h-8 justify-start text-left font-normal",!j&&"text-muted-foreground",s&&"border-primary"),children:[(0,b.jsx)($.CalendarIcon,{className:"mr-2 h-3.5 w-3.5"}),(0,b.jsx)("span",{className:"text-xs",children:y}),(0,b.jsx)(aa.ChevronDown,{className:"ml-2 h-3.5 w-3.5 opacity-50"})]})}),(0,b.jsx)(n.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsxs)("div",{className:"w-[130px] border-r p-2 space-y-0.5",children:[(0,b.jsx)("p",{className:"px-2 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wide",children:"Quick Select"}),ad.map(a=>(0,b.jsx)(l.Button,{variant:h!==a.value||s?"ghost":"secondary",size:"sm",className:"w-full justify-start text-xs h-7 px-2",onClick:()=>{u(a.value),r(!1)},children:a.label},a.value))]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)(m.Calendar,{mode:"range",defaultMonth:j?.from,selected:j,onSelect:w,numberOfMonths:2}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between border-t pt-3",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:j?.from&&j?.to&&(0,b.jsxs)(b.Fragment,{children:[Math.ceil((j.to.getTime()-j.from.getTime())/864e5)," days selected"]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>{u("30d"),r(!1)},children:"Reset"}),(0,b.jsx)(l.Button,{size:"sm",onClick:()=>r(!1),children:"Apply"})]})]})]})]})})]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"Showing:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:z})]})]})]})}function ah({children:a}){let[d,e]=(0,c.useState)(),[f,g]=(0,c.useState)(0),h=(0,c.useCallback)(a=>{e(a)},[]),i=(0,c.useCallback)(()=>{g(a=>a+1)},[]);return(0,b.jsxs)("div",{className:"flex w-full flex-col",children:[(0,b.jsx)(ag,{onDateChange:h,onRefresh:i,showRefresh:!0}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:a})]},f)}a.s(["ReportingPageWrapper",()=>ah],141751)}];

//# sourceMappingURL=apps_web_src_components_reporting_reporting-page-wrapper_tsx_58839ae9._.js.map