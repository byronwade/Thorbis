module.exports=[141751,a=>{"use strict";var b=a.i(861467),c=a.i(783281),d=a.i(788568),e=a.i(773608),f=a.i(838441),g=a.i(674832),h=a.i(129774),i=a.i(912288),j=a.i(159929),k=a.i(359974),l=a.i(6774),m=a.i(587969),n=a.i(766153),o=a.i(624126),p=a.i(187056),q=a.i(638727),r=a.i(246840),s=a.i(145679),t=a.i(638446),u=a.i(271758),v=a.i(319895),w=a.i(273819),x=a.i(198803),y=a.i(789815),z=a.i(739044),A=a.i(156916),B=a.i(556313);a.i(445255);var C=a.i(18170);a.i(21368);var D=a.i(341903);a.i(19256);var E=a.i(417132);a.i(839984);var F=a.i(372712);a.i(458393);var G=a.i(82012);a.i(40744);var H=a.i(419573);a.i(531982);var I=a.i(421983);let J=[{id:"csv",label:"CSV",icon:u.FileSpreadsheet,description:"Spreadsheet compatible"},{id:"excel",label:"Excel",icon:u.FileSpreadsheet,description:"Full formatting"},{id:"pdf",label:"PDF",icon:v.FileText,description:"Print-ready document"},{id:"png",label:"Image",icon:w.Image,description:"Chart screenshot"}];function K({reportType:a,reportTitle:d,days:e=90,trigger:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)("download"),[k,l]=(0,c.useState)("csv"),[m,n]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,u]=(0,c.useState)(`${d} - ${new Date().toLocaleDateString()}`),[v,w]=(0,c.useState)(!0),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)("weekly"),O=async()=>{n(!0);try{if("download"===i)if("csv"===k){let b=await (0,B.exportReportToCSV)(a,e);if(!b.success||!b.data)return void A.toast.error(b.error||"Failed to export report");let c=new Blob([b.data],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=b.filename||`${a}-report.csv`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d),A.toast.success("Report downloaded successfully"),h(!1)}else if("pdf"===k)window.print(),A.toast.success("Print dialog opened - select 'Save as PDF'"),h(!1);else if("excel"===k){let b=await (0,B.exportReportToCSV)(a,e);if(!b.success||!b.data)return void A.toast.error(b.error||"Failed to export report");let c=new Blob([b.data],{type:"application/vnd.ms-excel;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=`${a}-report.xlsx`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d),A.toast.success("Excel file downloaded"),h(!1)}else"png"===k&&A.toast.info("Chart image export coming soon");else{if(!q)return void A.toast.error("Please enter an email address");await new Promise(a=>setTimeout(a,1500)),K?A.toast.success(`Report scheduled for ${M} delivery to ${q}`):A.toast.success(`Report sent to ${q}`),h(!1)}}catch(a){console.error("Export error:",a),A.toast.error("Failed to export report")}finally{n(!1)}};return(0,b.jsxs)(E.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(E.DialogTrigger,{asChild:!0,children:f||(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(p.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,b.jsxs)(E.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(E.DialogHeader,{children:[(0,b.jsxs)(E.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Download,{className:"h-5 w-5"}),"Export Report"]}),(0,b.jsxs)(E.DialogDescription,{children:['Download or email "',d,'"']})]}),(0,b.jsxs)(I.Tabs,{value:i,onValueChange:a=>j(a),className:"mt-4",children:[(0,b.jsxs)(I.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsxs)(I.TabsTrigger,{value:"download",className:"gap-2",children:[(0,b.jsx)(p.Download,{className:"h-4 w-4"}),"Download"]}),(0,b.jsxs)(I.TabsTrigger,{value:"email",className:"gap-2",children:[(0,b.jsx)(y.Mail,{className:"h-4 w-4"}),"Email"]})]}),(0,b.jsxs)(I.TabsContent,{value:"download",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Select Format"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:J.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>l(a.id),className:`flex items-center gap-3 rounded-lg border-2 p-3 text-left transition-all ${k===a.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,b.jsx)("div",{className:`flex h-9 w-9 items-center justify-center rounded-md ${k===a.id?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,b.jsx)(a.icon,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.label}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]}),k===a.id&&(0,b.jsx)(t.Check,{className:"ml-auto h-4 w-4 text-primary"})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border bg-muted/30 p-3",children:[(0,b.jsx)(D.Checkbox,{id:"includeCharts",checked:v,onCheckedChange:a=>w(a)}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"includeCharts",className:"cursor-pointer",children:"Include charts and visualizations"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visual elements to the export"})]})]})]}),(0,b.jsxs)(I.TabsContent,{value:"email",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{htmlFor:"emailTo",children:"Send to"}),(0,b.jsx)(F.Input,{id:"emailTo",type:"email",placeholder:"email@example.com",value:q,onChange:a=>r(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Separate multiple emails with commas"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{htmlFor:"emailSubject",children:"Subject"}),(0,b.jsx)(F.Input,{id:"emailSubject",value:s,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Format"}),(0,b.jsxs)(H.Select,{value:k,onValueChange:a=>l(a),children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"pdf",children:"PDF Document"}),(0,b.jsx)(H.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,b.jsx)(H.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(D.Checkbox,{id:"scheduleDelivery",checked:K,onCheckedChange:a=>L(a)}),(0,b.jsx)("div",{children:(0,b.jsxs)(G.Label,{htmlFor:"scheduleDelivery",className:"cursor-pointer flex items-center gap-2",children:[(0,b.jsx)(o.Clock,{className:"h-4 w-4"}),"Schedule recurring delivery"]})})]}),K&&(0,b.jsxs)("div",{className:"ml-6 mt-3 space-y-2",children:[(0,b.jsxs)(H.Select,{value:M,onValueChange:N,children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(H.SelectItem,{value:"weekly",children:"Weekly (Mondays)"}),(0,b.jsx)(H.SelectItem,{value:"monthly",children:"Monthly (1st)"})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Reports will be sent automatically at 8:00 AM"})]})]})]})]}),(0,b.jsxs)(E.DialogFooter,{className:"mt-4",children:[(0,b.jsx)(C.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(C.Button,{onClick:O,disabled:m,children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"email"===i?"Sending...":"Exporting..."]}):(0,b.jsx)(b.Fragment,{children:"email"===i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Send,{className:"mr-2 h-4 w-4"}),K?"Schedule":"Send"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Download,{className:"mr-2 h-4 w-4"}),"Download"]})})})]})]})]})}var L=a.i(916680),M=a.i(971197),M=M,N=a.i(998574),O=a.i(339632),P=a.i(624038),Q=a.i(688014);a.i(650756);var R=a.i(560450);let S=[{id:"revenue",label:"Revenue"},{id:"jobs_completed",label:"Jobs Completed"},{id:"conversion_rate",label:"Conversion Rate"},{id:"customer_count",label:"Customer Count"},{id:"avg_ticket",label:"Average Ticket"},{id:"utilization",label:"Team Utilization"}],T=[{id:"above",label:"Goes above",icon:Q.TrendingUp},{id:"below",label:"Falls below",icon:P.TrendingDown},{id:"change",label:"Changes by",icon:L.AlertTriangle}];function U({reportTitle:a,reportType:d,trigger:e,onSaved:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!0),[p,r]=(0,c.useState)(!1),[s,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)("22:00"),[z,B]=(0,c.useState)("08:00"),[D,I]=(0,c.useState)([{id:"1",metric:"revenue",operator:"below",value:1e3,isActive:!0}]),J=(a,b)=>{I(D.map(c=>c.id===a?{...c,...b}:c))},K=async()=>{j(!0);try{await new Promise(a=>setTimeout(a,1e3)),f?.({alerts:D,channels:{inApp:l,email:n,sms:p},quietHours:{enabled:s,start:v,end:z}}),A.toast.success("Notification preferences saved"),h(!1)}catch(a){A.toast.error("Failed to save preferences")}finally{j(!1)}};return(0,b.jsxs)(E.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(E.DialogTrigger,{asChild:!0,children:e||(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(k.Bell,{className:"mr-2 h-4 w-4"}),"Notifications"]})}),(0,b.jsxs)(E.DialogContent,{className:"sm:max-w-5xl max-h-[85vh] overflow-y-auto",children:[(0,b.jsxs)(E.DialogHeader,{children:[(0,b.jsxs)(E.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(M.default,{className:"h-5 w-5"}),"Notification Preferences"]}),(0,b.jsxs)(E.DialogDescription,{children:['Get alerts when "',a,'" metrics hit certain thresholds']})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-base font-semibold",children:"Alert Conditions"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when metrics hit thresholds"})]}),(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",onClick:()=>{I([...D,{id:Date.now().toString(),metric:"revenue",operator:"below",value:0,isActive:!0}])},children:[(0,b.jsx)(q.Plus,{className:"mr-1 h-3 w-3"}),"Add Alert"]})]}),(0,b.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:[D.map(a=>(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border bg-card p-3",children:[(0,b.jsx)(R.Switch,{checked:a.isActive,onCheckedChange:b=>J(a.id,{isActive:b})}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"When"}),(0,b.jsxs)(H.Select,{value:a.metric,onValueChange:b=>J(a.id,{metric:b}),children:[(0,b.jsx)(H.SelectTrigger,{className:"w-[140px] h-8",children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:S.map(a=>(0,b.jsx)(H.SelectItem,{value:a.id,children:a.label},a.id))})]}),(0,b.jsxs)(H.Select,{value:a.operator,onValueChange:b=>J(a.id,{operator:b}),children:[(0,b.jsx)(H.SelectTrigger,{className:"w-[130px] h-8",children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:T.map(a=>(0,b.jsx)(H.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(a.icon,{className:"h-3 w-3"}),a.label]})},a.id))})]}),(0,b.jsx)(F.Input,{type:"number",value:a.value,onChange:b=>J(a.id,{value:parseFloat(b.target.value)||0}),className:"w-[100px] h-8"}),(0,b.jsx)(C.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive ml-auto",onClick:()=>{var b;return b=a.id,void I(D.filter(a=>a.id!==b))},children:(0,b.jsx)(O.Trash2,{className:"h-4 w-4"})})]},a.id)),0===D.length&&(0,b.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,b.jsx)(L.AlertTriangle,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"No alerts configured"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Add Alert" to create your first alert condition'})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-2",children:"Example alerts:"}),(0,b.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,b.jsx)("li",{children:"• Revenue falls below $10,000"}),(0,b.jsx)("li",{children:"• Jobs completed goes above 50"}),(0,b.jsx)("li",{children:"• Conversion rate changes by 10%"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-base font-semibold",children:"Notification Channels"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose how you want to be notified"})]}),(0,b.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10",children:(0,b.jsx)(k.Bell,{className:"h-5 w-5 text-blue-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"font-medium",children:"In-App Notifications"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show in notification center"})]})]}),(0,b.jsx)(R.Switch,{checked:l,onCheckedChange:m})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:(0,b.jsx)(y.Mail,{className:"h-5 w-5 text-green-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"font-medium",children:"Email Alerts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Send to your registered email"})]})]}),(0,b.jsx)(R.Switch,{checked:n,onCheckedChange:o})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-500/10",children:(0,b.jsx)(N.Smartphone,{className:"h-5 w-5 text-purple-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"font-medium",children:"SMS Alerts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Text message for urgent alerts"})]})]}),(0,b.jsx)(R.Switch,{checked:p,onCheckedChange:r})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-base font-semibold",children:"Quiet Hours"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pause notifications during specific times"})]}),(0,b.jsx)(R.Switch,{checked:s,onCheckedChange:u})]}),s&&(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs text-muted-foreground",children:"Start Time"}),(0,b.jsxs)(H.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:Array.from({length:24},(a,c)=>{let d=c.toString().padStart(2,"0");return(0,b.jsxs)(H.SelectItem,{value:`${d}:00`,children:[d,":00"]},d)})})]})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsx)("span",{className:"text-muted-foreground",children:"→"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs text-muted-foreground",children:"End Time"}),(0,b.jsxs)(H.Select,{value:z,onValueChange:B,children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:Array.from({length:24},(a,c)=>{let d=c.toString().padStart(2,"0");return(0,b.jsxs)(H.SelectItem,{value:`${d}:00`,children:[d,":00"]},d)})})]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Notifications will be queued and delivered when quiet hours end"})]})]})]})]})}),(0,b.jsxs)(E.DialogFooter,{children:[(0,b.jsx)(C.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(C.Button,{onClick:K,disabled:i,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Check,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})})]})]})]})}var V=a.i(300298);a.i(288007);var W=a.i(986990);let X=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],Y=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"];function Z({reportTitle:a,reportType:d,trigger:e,onScheduled:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)("weekly"),[n,p]=(0,c.useState)(1),[r,s]=(0,c.useState)(1),[u,v]=(0,c.useState)("08:00"),[w,z]=(0,c.useState)("pdf"),[B,D]=(0,c.useState)(!0),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!0),O=()=>{K&&K.includes("@")?(I.includes(K)||J([...I,K]),L("")):A.toast.error("Please enter a valid email address")},P=async()=>{if(0===I.length)return void A.toast.error("Please add at least one recipient");j(!0);try{await new Promise(a=>setTimeout(a,1e3));let a={frequency:k,dayOfWeek:"weekly"===k?n:void 0,dayOfMonth:"monthly"===k||"quarterly"===k?r:void 0,time:u,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,recipients:I,format:w,includeCharts:B,isActive:M};f?.(a),A.toast.success("Report schedule saved successfully"),h(!1)}catch(a){A.toast.error("Failed to save schedule")}finally{j(!1)}},Q=a=>{if(a>3&&a<21)return"th";switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};return(0,b.jsxs)(E.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(E.DialogTrigger,{asChild:!0,children:e||(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(m.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,b.jsxs)(E.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(E.DialogHeader,{children:[(0,b.jsxs)(E.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"h-5 w-5"}),"Schedule Report"]}),(0,b.jsxs)(E.DialogDescription,{children:['Set up automatic delivery for "',a,'"']})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Delivery Frequency"}),(0,b.jsxs)(H.Select,{value:k,onValueChange:a=>l(a),children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(H.SelectItem,{value:"weekly",children:"Weekly"}),(0,b.jsx)(H.SelectItem,{value:"monthly",children:"Monthly"}),(0,b.jsx)(H.SelectItem,{value:"quarterly",children:"Quarterly"})]})]})]}),"weekly"===k&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Day of Week"}),(0,b.jsxs)(H.Select,{value:n.toString(),onValueChange:a=>p(parseInt(a)),children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:X.map(a=>(0,b.jsx)(H.SelectItem,{value:a.value.toString(),children:a.label},a.value))})]})]}),("monthly"===k||"quarterly"===k)&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Day of Month"}),(0,b.jsxs)(H.Select,{value:r.toString(),onValueChange:a=>s(parseInt(a)),children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsx)(H.SelectContent,{children:Array.from({length:28},(a,b)=>b+1).map(a=>(0,b.jsxs)(H.SelectItem,{value:a.toString(),children:[a,Q(a)]},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Delivery Time"}),(0,b.jsxs)(H.Select,{value:u,onValueChange:v,children:[(0,b.jsxs)(H.SelectTrigger,{children:[(0,b.jsx)(o.Clock,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(H.SelectValue,{})]}),(0,b.jsx)(H.SelectContent,{children:Y.map(a=>(0,b.jsx)(H.SelectItem,{value:a,children:a},a))})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Times are in your local timezone (",Intl.DateTimeFormat().resolvedOptions().timeZone,")"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Recipients"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(F.Input,{type:"email",placeholder:"email@example.com",value:K,onChange:a=>L(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),O())}),(0,b.jsx)(C.Button,{type:"button",variant:"outline",onClick:O,children:(0,b.jsx)(q.Plus,{className:"h-4 w-4"})})]}),I.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:I.map(a=>(0,b.jsxs)(W.Badge,{variant:"secondary",className:"gap-1 pr-1",children:[(0,b.jsx)(y.Mail,{className:"h-3 w-3"}),a,(0,b.jsx)("button",{type:"button",onClick:()=>{J(I.filter(b=>b!==a))},className:"ml-1 rounded-full hover:bg-muted p-0.5",children:(0,b.jsx)(V.X,{className:"h-3 w-3"})})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(G.Label,{children:"Report Format"}),(0,b.jsxs)(H.Select,{value:w,onValueChange:a=>z(a),children:[(0,b.jsx)(H.SelectTrigger,{children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"pdf",children:"PDF Document"}),(0,b.jsx)(H.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,b.jsx)(H.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{children:"Include Charts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visualizations to the report"})]}),(0,b.jsx)(R.Switch,{checked:B,onCheckedChange:D})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{children:"Schedule Active"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable automatic delivery"})]}),(0,b.jsx)(R.Switch,{checked:M,onCheckedChange:N})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(t.Check,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"font-medium",children:(()=>{let a="";switch(k){case"daily":a=`Daily at ${u}`;break;case"weekly":a=`Every ${X.find(a=>a.value===n)?.label} at ${u}`;break;case"monthly":a=`Monthly on the ${r}${Q(r)} at ${u}`;break;case"quarterly":a=`Quarterly on the ${r}${Q(r)} at ${u}`}return a})()})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["to ",I.length," recipient",1!==I.length?"s":""," as ",w.toUpperCase()]})]})]}),(0,b.jsxs)(E.DialogFooter,{children:[(0,b.jsx)(C.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,b.jsx)(C.Button,{onClick:P,disabled:i||0===I.length,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Check,{className:"mr-2 h-4 w-4"}),"Save Schedule"]})})]})]})]})}a.i(708402);var $=a.i(442458);a.i(297229);var _=a.i(489904);a.i(146697);var aa=a.i(778737),ab=a.i(127487),ac=a.i(700760);let ad=[{label:"Today",value:"today",days:0},{label:"Yesterday",value:"yesterday",days:1},{label:"Last 7 days",value:"7d",days:7},{label:"Last 14 days",value:"14d",days:14},{label:"Last 30 days",value:"30d",days:30},{label:"Last 90 days",value:"90d",days:90},{label:"Last 12 months",value:"12m",days:365},{label:"Month to date",value:"mtd",days:-1},{label:"Year to date",value:"ytd",days:-2},{label:"Last year",value:"ly",days:-3}],ae=[{label:"7D",value:"7d",days:7},{label:"30D",value:"30d",days:30},{label:"90D",value:"90d",days:90},{label:"1Y",value:"12m",days:365}];function af(a){let b=new Date;switch(b.setHours(23,59,59,999),a){case"today":{let a=new Date;return a.setHours(0,0,0,0),{from:a,to:b}}case"yesterday":{let a=(0,h.subDays)(b,1);a.setHours(0,0,0,0);let c=(0,h.subDays)(b,1);return c.setHours(23,59,59,999),{from:a,to:c}}case"7d":return{from:(0,h.subDays)(b,7),to:b};case"14d":return{from:(0,h.subDays)(b,14),to:b};case"30d":default:return{from:(0,h.subDays)(b,30),to:b};case"90d":return{from:(0,h.subDays)(b,90),to:b};case"12m":return{from:(0,h.subDays)(b,365),to:b};case"mtd":return{from:(0,f.startOfMonth)(b),to:b};case"ytd":return{from:(0,g.startOfYear)(b),to:b};case"ly":var c;return{from:(0,g.startOfYear)((0,j.addYears)(b,-1,void 0)),to:(0,d.endOfMonth)((c=(0,g.startOfYear)(b),(0,i.addMonths)(c,-1,void 0)))}}}function ag({onDateChange:a,onRefresh:d,showRefresh:f=!0}){let[g,h]=(0,c.useState)("30d"),[i,j]=(0,c.useState)(()=>af("30d")),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),x=(0,c.useCallback)(b=>{h(b),w(!1);let c=af(b);j(c),a?.(c)},[a]),y=(0,c.useCallback)(b=>{b&&(j(b),w(!0),h("custom"),a?.(b))},[a]),z=(0,c.useCallback)(a=>{x(a)},[x]),A=i?.from?i.to?(0,b.jsxs)(b.Fragment,{children:[(0,e.format)(i.from,"MMM d, yyyy")," -"," ",(0,e.format)(i.to,"MMM d, yyyy")]}):(0,e.format)(i.from,"MMM d, yyyy"):"Select date range",B=v?"Custom":ad.find(a=>a.value===g)?.label||"Last 30 days";return(0,b.jsxs)("div",{className:"flex flex-col gap-4 border-b bg-background px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(ab.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(aa.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Business Intelligence"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Real-time analytics and insights for your business"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,b.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:d,title:"Refresh data",children:(0,b.jsx)(r.RefreshCw,{className:"h-4 w-4"})}),(0,b.jsx)(U,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsx)(C.Button,{variant:"ghost",size:"icon",title:"Notification preferences",children:(0,b.jsx)(k.Bell,{className:"h-4 w-4"})})}),(0,b.jsx)(aa.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsx)(Z,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(m.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,b.jsx)(K,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(p.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,b.jsx)(C.Button,{size:"sm",asChild:!0,children:(0,b.jsxs)(s.default,{href:"/dashboard/reporting/builder",children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-4 w-4"}),"Custom Report Builder"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:ae.map(a=>(0,b.jsx)(C.Button,{variant:g!==a.value||v?"ghost":"secondary",size:"sm",className:(0,ac.cn)("h-7 px-3 text-xs font-medium",g===a.value&&!v&&"bg-background shadow-sm"),onClick:()=>z(a.value),children:a.label},a.value))}),(0,b.jsx)(aa.Separator,{orientation:"vertical",className:"h-6"}),(0,b.jsxs)(H.Select,{value:g,onValueChange:x,children:[(0,b.jsxs)(H.SelectTrigger,{className:"h-8 w-[140px] text-xs",children:[(0,b.jsx)(o.Clock,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)(H.SelectValue,{placeholder:"Select range"})]}),(0,b.jsx)(H.SelectContent,{children:ad.map(a=>(0,b.jsx)(H.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)(_.Popover,{open:t,onOpenChange:u,children:[(0,b.jsx)(_.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(C.Button,{variant:"outline",size:"sm",className:(0,ac.cn)("h-8 justify-start text-left font-normal",!i&&"text-muted-foreground",v&&"border-primary"),children:[(0,b.jsx)(l.CalendarIcon,{className:"mr-2 h-3.5 w-3.5"}),(0,b.jsx)("span",{className:"text-xs",children:A}),(0,b.jsx)(n.ChevronDown,{className:"ml-2 h-3.5 w-3.5 opacity-50"})]})}),(0,b.jsx)(_.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsxs)("div",{className:"w-[130px] border-r p-2 space-y-0.5",children:[(0,b.jsx)("p",{className:"px-2 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wide",children:"Quick Select"}),ad.map(a=>(0,b.jsx)(C.Button,{variant:g!==a.value||v?"ghost":"secondary",size:"sm",className:"w-full justify-start text-xs h-7 px-2",onClick:()=>{x(a.value),u(!1)},children:a.label},a.value))]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)($.Calendar,{mode:"range",defaultMonth:i?.from,selected:i,onSelect:y,numberOfMonths:2}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between border-t pt-3",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:i?.from&&i?.to&&(0,b.jsxs)(b.Fragment,{children:[Math.ceil((i.to.getTime()-i.from.getTime())/864e5)," ","days selected"]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(C.Button,{variant:"ghost",size:"sm",onClick:()=>{x("30d"),u(!1)},children:"Reset"}),(0,b.jsx)(C.Button,{size:"sm",onClick:()=>u(!1),children:"Apply"})]})]})]})]})})]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"Showing:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:B})]})]})]})}function ah({children:a}){let[d,e]=(0,c.useState)(),[f,g]=(0,c.useState)(0),h=(0,c.useCallback)(a=>{e(a)},[]),i=(0,c.useCallback)(()=>{g(a=>a+1)},[]);return(0,b.jsxs)("div",{className:"flex w-full flex-col",children:[(0,b.jsx)(ag,{onDateChange:h,onRefresh:i,showRefresh:!0}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:a})]},f)}a.s(["ReportingPageWrapper",()=>ah],141751)}];

//# sourceMappingURL=apps_web_src_components_reporting_reporting-page-wrapper_tsx_58839ae9._.js.map