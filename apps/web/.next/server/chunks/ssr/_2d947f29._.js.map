{"version":3,"sources":["../../../../../../apps/web/src/lib/utils/customer-display.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/circle-check-big.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/loader.ts","../../../../../../apps/web/src/components/ui/status-badge.tsx","../../../../../../apps/web/src/lib/utils/badges.ts","../../../../../../apps/web/src/components/ui/row-actions-dropdown.tsx","../../../../../../apps/web/src/components/ui/hover-card.tsx","../../../../../../apps/web/src/components/work/jobs-table.tsx","../../../../../../apps/web/src/components/work/customer-preview-card.tsx"],"sourcesContent":["/**\n * Customer Display Utilities\n *\n * Unified logic for displaying customer information consistently across the application.\n * This prevents inconsistent customer name display and provides fallback logic.\n */\n\nexport interface CustomerDisplayData {\n\tid?: string;\n\tdisplay_name?: string | null;\n\tfirst_name?: string | null;\n\tlast_name?: string | null;\n\tcompany_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n}\n\n/**\n * Get a customer's display name using consistent precedence logic:\n * 1. display_name (if set)\n * 2. first_name + last_name (combined)\n * 3. first_name OR last_name (whichever exists)\n * 4. company_name (for business customers)\n * 5. email (as last resort)\n * 6. \"Unknown Customer\" (ultimate fallback)\n *\n * @param customer - Customer object with potential name fields\n * @param fallbackEmail - Optional email to use if customer has no name\n * @returns Display-ready customer name\n *\n * @example\n * ```ts\n * getCustomerDisplayName({ first_name: \"John\", last_name: \"Doe\" })\n * // Returns: \"John Doe\"\n *\n * getCustomerDisplayName({ display_name: \"John's Plumbing\" })\n * // Returns: \"John's Plumbing\"\n *\n * getCustomerDisplayName({ email: \"john@example.com\" })\n * // Returns: \"john@example.com\"\n * ```\n */\nexport function getCustomerDisplayName(\n\tcustomer: CustomerDisplayData | null | undefined,\n\tfallbackEmail?: string | null,\n): string {\n\tif (!customer) {\n\t\treturn fallbackEmail || \"Unknown Customer\";\n\t}\n\n\t// Priority 1: Explicit display name\n\tif (customer.display_name) {\n\t\treturn customer.display_name;\n\t}\n\n\t// Priority 2: Full name (first + last)\n\tconst firstName = customer.first_name?.trim();\n\tconst lastName = customer.last_name?.trim();\n\n\tif (firstName && lastName) {\n\t\treturn `${firstName} ${lastName}`;\n\t}\n\n\t// Priority 3: Either first or last name\n\tif (firstName) return firstName;\n\tif (lastName) return lastName;\n\n\t// Priority 4: Company name (for business customers)\n\tif (customer.company_name) {\n\t\treturn customer.company_name;\n\t}\n\n\t// Priority 5: Email from customer record\n\tif (customer.email) {\n\t\treturn customer.email;\n\t}\n\n\t// Priority 6: Fallback email provided\n\tif (fallbackEmail) {\n\t\treturn fallbackEmail;\n\t}\n\n\t// Ultimate fallback\n\treturn \"Unknown Customer\";\n}\n\n/**\n * Get customer initials for avatar displays\n * Takes first letter of each word (max 2 letters)\n *\n * @param customer - Customer object with potential name fields\n * @returns 1-2 character initials (uppercase)\n *\n * @example\n * ```ts\n * getCustomerInitials({ first_name: \"John\", last_name: \"Doe\" })\n * // Returns: \"JD\"\n *\n * getCustomerInitials({ display_name: \"ACME Corp\" })\n * // Returns: \"AC\"\n *\n * getCustomerInitials({ email: \"john@example.com\" })\n * // Returns: \"J\"\n * ```\n */\nexport function getCustomerInitials(\n\tcustomer: CustomerDisplayData | null | undefined,\n): string {\n\tif (!customer) return \"?\";\n\n\tconst displayName = getCustomerDisplayName(customer);\n\n\t// Split by spaces and take first letter of each word\n\tconst words = displayName.split(/\\s+/).filter(Boolean);\n\n\tif (words.length >= 2) {\n\t\treturn (words[0][0] + words[1][0]).toUpperCase();\n\t}\n\n\tif (words.length === 1 && words[0].length >= 2) {\n\t\treturn words[0].slice(0, 2).toUpperCase();\n\t}\n\n\tif (words.length === 1) {\n\t\treturn words[0][0].toUpperCase();\n\t}\n\n\treturn \"?\";\n}\n\n/**\n * Get customer's full contact display (name + email/phone)\n * Useful for tooltips, hover cards, and detail views\n *\n * @param customer - Customer object\n * @returns Multi-line contact string\n *\n * @example\n * ```ts\n * getCustomerContactDisplay({\n *   first_name: \"John\",\n *   last_name: \"Doe\",\n *   email: \"john@example.com\",\n *   phone: \"555-1234\"\n * })\n * // Returns: \"John Doe\\njohn@example.com\\n555-1234\"\n * ```\n */\nexport function getCustomerContactDisplay(\n\tcustomer: CustomerDisplayData | null | undefined,\n): string {\n\tif (!customer) return \"Unknown Customer\";\n\n\tconst lines: string[] = [getCustomerDisplayName(customer)];\n\n\tif (customer.email) {\n\t\tlines.push(customer.email);\n\t}\n\n\tif (customer.phone) {\n\t\tlines.push(customer.phone);\n\t}\n\n\treturn lines.join(\"\\n\");\n}\n\n/**\n * Check if customer has any name information (not just email)\n * Useful for validation and \"not linked\" indicators\n *\n * @param customer - Customer object\n * @returns true if customer has a real name, false if only email/unknown\n */\nexport function hasCustomerName(\n\tcustomer: CustomerDisplayData | null | undefined,\n): boolean {\n\tif (!customer) return false;\n\n\treturn !!(\n\t\tcustomer.display_name ||\n\t\tcustomer.first_name ||\n\t\tcustomer.last_name ||\n\t\tcustomer.company_name\n\t);\n}\n\n/**\n * Format customer name for sorting/comparison\n * Always uses \"Last, First\" format for consistent alphabetization\n *\n * @param customer - Customer object\n * @returns Sortable name string\n *\n * @example\n * ```ts\n * getCustomerSortName({ first_name: \"John\", last_name: \"Doe\" })\n * // Returns: \"Doe, John\"\n *\n * getCustomerSortName({ company_name: \"ACME Corp\" })\n * // Returns: \"ACME Corp\"\n * ```\n */\nexport function getCustomerSortName(\n\tcustomer: CustomerDisplayData | null | undefined,\n): string {\n\tif (!customer) return \"zzz_unknown\"; // Sort unknowns to end\n\n\t// If only last name, use it\n\tif (customer.last_name && !customer.first_name) {\n\t\treturn customer.last_name;\n\t}\n\n\t// If only first name, use it\n\tif (customer.first_name && !customer.last_name) {\n\t\treturn customer.first_name;\n\t}\n\n\t// If both names, use \"Last, First\" format\n\tif (customer.first_name && customer.last_name) {\n\t\treturn `${customer.last_name}, ${customer.first_name}`;\n\t}\n\n\t// Otherwise use display name logic\n\treturn getCustomerDisplayName(customer);\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 2v4', key: '3427ic' }],\n  ['path', { d: 'm16.2 7.8 2.9-2.9', key: 'r700ao' }],\n  ['path', { d: 'M18 12h4', key: 'wj9ykh' }],\n  ['path', { d: 'm16.2 16.2 2.9 2.9', key: '1bxg5t' }],\n  ['path', { d: 'M12 18v4', key: 'jadmvz' }],\n  ['path', { d: 'm4.9 19.1 2.9-2.9', key: 'bwix9q' }],\n  ['path', { d: 'M2 12h4', key: 'j09sii' }],\n  ['path', { d: 'm4.9 4.9 2.9 2.9', key: 'giyufr' }],\n];\n\n/**\n * @component @name Loader\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMnY0IiAvPgogIDxwYXRoIGQ9Im0xNi4yIDcuOCAyLjktMi45IiAvPgogIDxwYXRoIGQ9Ik0xOCAxMmg0IiAvPgogIDxwYXRoIGQ9Im0xNi4yIDE2LjIgMi45IDIuOSIgLz4KICA8cGF0aCBkPSJNMTIgMTh2NCIgLz4KICA8cGF0aCBkPSJtNC45IDE5LjEgMi45LTIuOSIgLz4KICA8cGF0aCBkPSJNMiAxMmg0IiAvPgogIDxwYXRoIGQ9Im00LjkgNC45IDIuOSAyLjkiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Loader = createLucideIcon('loader', __iconNode);\n\nexport default Loader;\n","/**\n * Status Badge Component\n *\n * Reusable badge component that uses centralized badge configurations.\n * Provides consistent styling across the application.\n */\n\nimport { Badge, cn } from \"@stratos/ui\";\nimport {\n\ttype BadgeConfig,\n\tgetContractTypeBadgeConfig,\n\tgetJobStatusBadgeConfig,\n\tgetPriorityBadgeConfig,\n\tgetPurchaseOrderStatusBadgeConfig,\n\tgetStatusBadgeConfig,\n} from \"@/lib/utils/badges\";\n\ntype StatusBadgeProps = {\n\tstatus: string;\n\ttype?:\n\t\t| \"job\"\n\t\t| \"invoice\"\n\t\t| \"estimate\"\n\t\t| \"contract\"\n\t\t| \"customer\"\n\t\t| \"purchase_order\";\n\tpriority?: string;\n\tcontractType?: string;\n\tclassName?: string;\n\tvariant?: \"default\" | \"secondary\" | \"destructive\" | \"outline\";\n};\n\n/**\n * StatusBadge - Unified badge component for all status types\n */\nexport function StatusBadge({\n\tstatus,\n\ttype,\n\tpriority,\n\tcontractType,\n\tclassName,\n\tvariant = \"outline\",\n}: StatusBadgeProps) {\n\tlet config: BadgeConfig;\n\n\tif (contractType) {\n\t\tconfig = getContractTypeBadgeConfig(contractType);\n\t} else if (priority) {\n\t\tconfig = getPriorityBadgeConfig(priority);\n\t} else if (type === \"purchase_order\") {\n\t\tconfig = getPurchaseOrderStatusBadgeConfig(status);\n\t} else if (type) {\n\t\tconfig = getStatusBadgeConfig(status, type);\n\t} else {\n\t\t// Default to job status if no type specified\n\t\tconfig = getJobStatusBadgeConfig(status);\n\t}\n\n\tconst Icon = config.icon;\n\n\treturn (\n\t\t<Badge\n\t\t\tclassName={cn(\n\t\t\t\t\"inline-flex items-center gap-1 px-2 py-0.5 text-[11px] font-medium transition-all duration-200\",\n\t\t\t\tconfig.className,\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tvariant={variant}\n\t\t\taria-label={config.ariaLabel || config.label}\n\t\t>\n\t\t\t{Icon && <Icon className=\"h-3 w-3\" aria-hidden=\"true\" />}\n\t\t\t{config.label}\n\t\t</Badge>\n\t);\n}\n\n/**\n * JobStatusBadge - Convenience component for job statuses\n */\nexport function JobStatusBadge({\n\tstatus,\n\tclassName,\n}: {\n\tstatus: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} status={status} type=\"job\" />;\n}\n\n/**\n * InvoiceStatusBadge - Convenience component for invoice statuses\n */\nexport function InvoiceStatusBadge({\n\tstatus,\n\tclassName,\n}: {\n\tstatus: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} status={status} type=\"invoice\" />;\n}\n\n/**\n * EstimateStatusBadge - Convenience component for estimate statuses\n */\nexport function EstimateStatusBadge({\n\tstatus,\n\tclassName,\n}: {\n\tstatus: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} status={status} type=\"estimate\" />;\n}\n\n/**\n * ContractStatusBadge - Convenience component for contract statuses\n */\nexport function ContractStatusBadge({\n\tstatus,\n\tclassName,\n}: {\n\tstatus: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} status={status} type=\"contract\" />;\n}\n\n/**\n * CustomerStatusBadge - Convenience component for customer statuses\n */\nexport function CustomerStatusBadge({\n\tstatus,\n\tclassName,\n}: {\n\tstatus: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} status={status} type=\"customer\" />;\n}\n\n/**\n * PriorityBadge - Convenience component for priority badges\n */\nexport function PriorityBadge({\n\tpriority,\n\tclassName,\n}: {\n\tpriority: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} priority={priority} status=\"\" />;\n}\n\n/**\n * ContractTypeBadge - Convenience component for contract type badges\n */\nexport function ContractTypeBadge({\n\ttype,\n\tclassName,\n}: {\n\ttype: string;\n\tclassName?: string;\n}) {\n\treturn <StatusBadge className={className} contractType={type} status=\"\" />;\n}\n","/**\n * Centralized Badge Utilities\n *\n * Unified badge configurations for status, priority, and type badges.\n * Replaces duplicate implementations scattered across components.\n */\n\nimport {\n\tAlertCircle,\n\tCalendar,\n\tCheck,\n\tCheckCircle,\n\tClock,\n\tFileText,\n\tLoader,\n\ttype LucideIcon,\n\tMail,\n\tX,\n\tXCircle,\n} from \"lucide-react\";\n\nexport type BadgeConfig = {\n\tclassName: string;\n\tlabel: string;\n\ticon?: LucideIcon;\n\tariaLabel?: string; // Descriptive label for screen readers\n};\n\n/**\n * Job status badge configurations\n */\nexport function getJobStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tquoted: {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground hover:bg-muted/50\",\n\t\t\tlabel: \"Quoted\",\n\t\t\ticon: FileText,\n\t\t\tariaLabel: \"Job status: Quoted\",\n\t\t},\n\t\tscheduled: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400\",\n\t\t\tlabel: \"Scheduled\",\n\t\t\ticon: Calendar,\n\t\t\tariaLabel: \"Job status: Scheduled\",\n\t\t},\n\t\tin_progress: {\n\t\t\tclassName: \"border-blue-500/50 bg-blue-500 text-white hover:bg-blue-600\",\n\t\t\tlabel: \"In Progress\",\n\t\t\ticon: Loader,\n\t\t\tariaLabel: \"Job status: In Progress\",\n\t\t},\n\t\tcompleted: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-500/50 bg-green-500 text-white hover:bg-green-600\",\n\t\t\tlabel: \"Completed\",\n\t\t\ticon: CheckCircle,\n\t\t\tariaLabel: \"Job status: Completed\",\n\t\t},\n\t\tcancelled: {\n\t\t\tclassName: \"border-red-500/50 bg-red-500 text-white hover:bg-red-600\",\n\t\t\tlabel: \"Cancelled\",\n\t\t\ticon: XCircle,\n\t\t\tariaLabel: \"Job status: Cancelled\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName: \"border-border/50 bg-background text-muted-foreground\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Invoice status badge configurations\n */\nfunction getInvoiceStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tpaid: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-500/30 bg-green-500 text-white hover:bg-green-600 shadow-sm\",\n\t\t\tlabel: \"Paid\",\n\t\t\ticon: CheckCircle,\n\t\t\tariaLabel: \"Invoice status: Paid\",\n\t\t},\n\t\tunpaid: {\n\t\t\tclassName:\n\t\t\t\t\"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400 shadow-sm\",\n\t\t\tlabel: \"Unpaid\",\n\t\t\ticon: Clock,\n\t\t\tariaLabel: \"Invoice status: Unpaid\",\n\t\t},\n\t\toverdue: {\n\t\t\tclassName:\n\t\t\t\t\"border-red-500/30 bg-red-500 text-white hover:bg-red-600 shadow-sm ring-1 ring-red-500/20\",\n\t\t\tlabel: \"Overdue\",\n\t\t\ticon: AlertCircle,\n\t\t\tariaLabel: \"Invoice status: Overdue - requires immediate attention\",\n\t\t},\n\t\tdraft: {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground hover:bg-muted/50 shadow-sm\",\n\t\t\tlabel: \"Draft\",\n\t\t\ticon: FileText,\n\t\t\tariaLabel: \"Invoice status: Draft\",\n\t\t},\n\t\tsent: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200/50 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400 shadow-sm\",\n\t\t\tlabel: \"Sent\",\n\t\t\ticon: Mail,\n\t\t\tariaLabel: \"Invoice status: Sent\",\n\t\t},\n\t\tpending: {\n\t\t\tclassName:\n\t\t\t\t\"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 shadow-sm\",\n\t\t\tlabel: \"Pending\",\n\t\t\ticon: Clock,\n\t\t\tariaLabel: \"Invoice status: Pending\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground shadow-sm\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Estimate status badge configurations\n */\nfunction getEstimateStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\taccepted: {\n\t\t\tclassName: \"bg-green-500 hover:bg-green-600 text-white\",\n\t\t\tlabel: \"Accepted\",\n\t\t},\n\t\tsent: {\n\t\t\tclassName:\n\t\t\t\t\"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400\",\n\t\t\tlabel: \"Sent\",\n\t\t},\n\t\tdraft: {\n\t\t\tclassName:\n\t\t\t\t\"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400\",\n\t\t\tlabel: \"Draft\",\n\t\t},\n\t\tdeclined: {\n\t\t\tclassName: \"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400\",\n\t\t\tlabel: \"Declined\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName:\n\t\t\t\t\"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Contract status badge configurations\n */\nfunction getContractStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tsigned: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-500/50 bg-green-500 text-white hover:bg-green-600\",\n\t\t\tlabel: \"Signed\",\n\t\t},\n\t\tsent: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400\",\n\t\t\tlabel: \"Sent\",\n\t\t},\n\t\tviewed: {\n\t\t\tclassName:\n\t\t\t\t\"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400\",\n\t\t\tlabel: \"Viewed\",\n\t\t},\n\t\tdraft: {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground hover:bg-muted/50\",\n\t\t\tlabel: \"Draft\",\n\t\t},\n\t\trejected: {\n\t\t\tclassName: \"border-red-500/50 bg-red-500 text-white hover:bg-red-600\",\n\t\t\tlabel: \"Rejected\",\n\t\t},\n\t\texpired: {\n\t\t\tclassName:\n\t\t\t\t\"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400\",\n\t\t\tlabel: \"Expired\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground hover:bg-muted/50\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Customer status badge configurations\n */\nfunction getCustomerStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tactive: {\n\t\t\tclassName:\n\t\t\t\t\"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400\",\n\t\t\tlabel: \"Active\",\n\t\t},\n\t\tinactive: {\n\t\t\tclassName:\n\t\t\t\t\"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400\",\n\t\t\tlabel: \"Inactive\",\n\t\t},\n\t\tprospect: {\n\t\t\tclassName:\n\t\t\t\t\"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400\",\n\t\t\tlabel: \"Prospect\",\n\t\t},\n\t\tlead: {\n\t\t\tclassName:\n\t\t\t\t\"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400\",\n\t\t\tlabel: \"Lead\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName:\n\t\t\t\t\"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Priority badge configurations\n */\nexport function getPriorityBadgeConfig(priority: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tlow: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400\",\n\t\t\tlabel: \"Low\",\n\t\t},\n\t\tmedium: {\n\t\t\tclassName:\n\t\t\t\t\"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400\",\n\t\t\tlabel: \"Medium\",\n\t\t},\n\t\thigh: {\n\t\t\tclassName:\n\t\t\t\t\"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400\",\n\t\t\tlabel: \"High\",\n\t\t},\n\t\turgent: {\n\t\t\tclassName:\n\t\t\t\t\"border-red-200/50 bg-red-50/50 text-red-700 dark:border-red-900/50 dark:bg-red-950/30 dark:text-red-400\",\n\t\t\tlabel: \"Urgent\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[priority] || {\n\t\t\tclassName: \"border-border/50 bg-background text-muted-foreground\",\n\t\t\tlabel: priority.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Purchase order status badge configurations\n */\nexport function getPurchaseOrderStatusBadgeConfig(status: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tdraft: {\n\t\t\tclassName:\n\t\t\t\t\"border-border/50 bg-background text-muted-foreground hover:bg-muted/50\",\n\t\t\tlabel: \"Draft\",\n\t\t},\n\t\tpending: {\n\t\t\tclassName:\n\t\t\t\t\"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400\",\n\t\t\tlabel: \"Pending\",\n\t\t},\n\t\tapproved: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-500/50 bg-green-500 text-white hover:bg-green-600\",\n\t\t\tlabel: \"Approved\",\n\t\t},\n\t\tpartially_received: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400\",\n\t\t\tlabel: \"Partially Received\",\n\t\t},\n\t\treceived: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-500/50 bg-green-500 text-white hover:bg-green-600\",\n\t\t\tlabel: \"Received\",\n\t\t},\n\t\tcancelled: {\n\t\t\tclassName: \"border-red-500/50 bg-red-500 text-white hover:bg-red-600\",\n\t\t\tlabel: \"Cancelled\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[status] || {\n\t\t\tclassName: \"border-border/50 bg-background text-muted-foreground\",\n\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Contract type badge configurations\n */\nexport function getContractTypeBadgeConfig(type: string): BadgeConfig {\n\tconst configs: Record<string, BadgeConfig> = {\n\t\tservice: {\n\t\t\tclassName:\n\t\t\t\t\"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400\",\n\t\t\tlabel: \"Service\",\n\t\t},\n\t\tmaintenance: {\n\t\t\tclassName:\n\t\t\t\t\"border-green-200/50 bg-green-50/50 text-green-700 dark:border-green-900/50 dark:bg-green-950/30 dark:text-green-400\",\n\t\t\tlabel: \"Maintenance\",\n\t\t},\n\t\tcustom: {\n\t\t\tclassName:\n\t\t\t\t\"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400\",\n\t\t\tlabel: \"Custom\",\n\t\t},\n\t};\n\n\treturn (\n\t\tconfigs[type] || {\n\t\t\tclassName:\n\t\t\t\t\"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400\",\n\t\t\tlabel: type.replace(/_/g, \" \"),\n\t\t}\n\t);\n}\n\n/**\n * Generic status badge config getter\n */\nexport function getStatusBadgeConfig(\n\tstatus: string,\n\ttype: \"job\" | \"invoice\" | \"estimate\" | \"contract\" | \"customer\",\n): BadgeConfig {\n\tswitch (type) {\n\t\tcase \"job\":\n\t\t\treturn getJobStatusBadgeConfig(status);\n\t\tcase \"invoice\":\n\t\t\treturn getInvoiceStatusBadgeConfig(status);\n\t\tcase \"estimate\":\n\t\t\treturn getEstimateStatusBadgeConfig(status);\n\t\tcase \"contract\":\n\t\t\treturn getContractStatusBadgeConfig(status);\n\t\tcase \"customer\":\n\t\t\treturn getCustomerStatusBadgeConfig(status);\n\t\tdefault:\n\t\t\treturn {\n\t\t\t\tclassName: \"border-border/50 bg-background text-muted-foreground\",\n\t\t\t\tlabel: status.replace(/_/g, \" \"),\n\t\t\t};\n\t}\n}\n","// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n","// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n","\"use client\";\n\n/**\n * JobsTable Component\n * Full-width Gmail-style table for displaying jobs\n *\n * Features:\n * - Full-width responsive layout\n * - Row selection with bulk actions\n * - Search and filtering\n * - Status and priority badges\n * - Click to view job details\n * - ✨ Auto-virtualization for >1,000 jobs (100x faster!)\n *\n * Performance:\n * - <1,000 jobs: Pagination mode (50 per page)\n * - >1,000 jobs: Virtual scrolling (60fps, only renders ~20 visible rows)\n * - Can force with: enableVirtualization={true|false|\"auto\"}\n */\n\nimport { Archive, Briefcase, Edit, Eye, FileText, Plus } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport {\n\tAlertDialog,\n\tAlertDialogAction,\n\tAlertDialogCancel,\n\tAlertDialogContent,\n\tAlertDialogDescription,\n\tAlertDialogFooter,\n\tAlertDialogHeader,\n\tAlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype BulkAction,\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport { RowActionsDropdown } from \"@/components/ui/row-actions-dropdown\";\nimport { JobStatusBadge, PriorityBadge } from \"@/components/ui/status-badge\";\nimport { CustomerPreviewCard } from \"@/components/work/customer-preview-card\";\nimport type { Job } from \"@/lib/db/schema\";\nimport { formatCurrency, formatDate } from \"@/lib/formatters\";\nimport { useArchiveStore } from \"@/lib/stores/archive-store\";\nimport { getCustomerDisplayName } from \"@/lib/utils/customer-display\";\n\ntype JobsTableProps = {\n\tjobs: Job[];\n\titemsPerPage?: number;\n\ttotalCount?: number; // Total count from server (for accurate pagination display)\n\tcurrentPage?: number; // Current page from server (for hydration)\n\tonJobClick?: (job: Job) => void;\n\tshowRefresh?: boolean;\n\tinitialSearchQuery?: string;\n};\n\nexport function JobsTable({\n\tjobs,\n\titemsPerPage = 50,\n\ttotalCount,\n\tcurrentPage = 1,\n\tonJobClick,\n\tshowRefresh = false,\n\tinitialSearchQuery = \"\",\n}: JobsTableProps) {\n\t// Archive filter state\n\tconst archiveFilter = useArchiveStore((state) => state.filters.jobs);\n\n\tconst [isArchiveDialogOpen, setIsArchiveDialogOpen] = useState(false);\n\tconst [itemToArchive, setItemToArchive] = useState<string | null>(null);\n\tconst [isBulkArchiveOpen, setIsBulkArchiveOpen] = useState(false);\n\tconst [selectedItemIds, setSelectedItemIds] = useState<Set<string>>(\n\t\tnew Set(),\n\t);\n\n\t// Filter jobs based on archive status\n\tconst filteredJobs = jobs.filter((job) => {\n\t\tconst jobRecord = job as unknown as Record<string, unknown>;\n\t\tconst isArchived = Boolean(jobRecord.archived_at ?? jobRecord.deleted_at);\n\t\tif (archiveFilter === \"active\") {\n\t\t\treturn !isArchived;\n\t\t}\n\t\tif (archiveFilter === \"archived\") {\n\t\t\treturn isArchived;\n\t\t}\n\t\treturn true; // \"all\"\n\t});\n\n\tconst columns: ColumnDef<Job>[] = [\n\t\t{\n\t\t\tkey: \"jobNumber\",\n\t\t\theader: \"Job Number\",\n\t\t\twidth: \"w-36\",\n\t\t\tshrink: true,\n\t\t\trender: (job) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline\"\n\t\t\t\t\thref={`/dashboard/work/${job.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t{job.jobNumber ?? \"—\"}\n\t\t\t\t</Link>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"title\",\n\t\t\theader: \"Title\",\n\t\t\twidth: \"flex-1\",\n\t\t\trender: (job) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"block min-w-0\"\n\t\t\t\t\thref={`/dashboard/work/${job.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"truncate text-sm leading-tight font-medium hover:underline\">\n\t\t\t\t\t\t{job.title ?? \"Untitled Job\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t{job.description ? (\n\t\t\t\t\t\t<div className=\"text-muted-foreground mt-0.5 truncate text-xs leading-tight\">\n\t\t\t\t\t\t\t{job.description}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</Link>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"customer\",\n\t\t\theader: \"Customer\",\n\t\t\twidth: \"w-48\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (job) => {\n\t\t\t\tconst jobData = job as any; // Type assertion for customer data\n\t\t\t\tconst customer = jobData.customer || jobData.customers;\n\n\t\t\t\tif (!customer)\n\t\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\t\tconst customerName = getCustomerDisplayName(customer);\n\n\t\t\t\treturn <CustomerPreviewCard customer={customer} />;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tkey: \"status\",\n\t\t\theader: \"Status\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\thideable: false, // CRITICAL: Status essential for workflow management\n\t\t\trender: (job) => (\n\t\t\t\t<JobStatusBadge status={(job.status ?? \"quoted\") as string} />\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"priority\",\n\t\t\theader: \"Priority\",\n\t\t\twidth: \"w-28\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (job) => (\n\t\t\t\t<PriorityBadge priority={(job.priority ?? \"medium\") as string} />\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"scheduledStart\",\n\t\t\theader: \"Scheduled\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (job) => (\n\t\t\t\t<span className=\"text-muted-foreground text-sm tabular-nums\">\n\t\t\t\t\t{formatDate(job.scheduledStart ?? null, \"short\")}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"totalAmount\",\n\t\t\theader: \"Amount\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\talign: \"right\",\n\t\t\thideable: false, // CRITICAL: Financial data essential\n\t\t\trender: (job) => (\n\t\t\t\t<span className=\"font-semibold tabular-nums\">\n\t\t\t\t\t{formatCurrency(job.totalAmount || 0, { decimals: 2 })}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"actions\",\n\t\t\theader: \"\",\n\t\t\twidth: \"w-10\",\n\t\t\tshrink: true,\n\t\t\trender: (job) => (\n\t\t\t\t<RowActionsDropdown\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"View Details\",\n\t\t\t\t\t\t\ticon: Eye,\n\t\t\t\t\t\t\thref: `/dashboard/work/${job.id}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Edit Job\",\n\t\t\t\t\t\t\ticon: Edit,\n\t\t\t\t\t\t\thref: `/dashboard/work/${job.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Create Invoice\",\n\t\t\t\t\t\t\ticon: FileText,\n\t\t\t\t\t\t\thref: `/dashboard/work/invoices/new?jobId=${job.id}`,\n\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Archive Job\",\n\t\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\t\tvariant: \"destructive\",\n\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tsetItemToArchive(job.id);\n\t\t\t\t\t\t\t\tsetIsArchiveDialogOpen(true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t),\n\t\t},\n\t];\n\n\t// Bulk actions\n\tconst bulkActions: BulkAction[] = [\n\t\t{\n\t\t\tlabel: \"Archive Selected\",\n\t\t\ticon: <Archive className=\"h-4 w-4\" />,\n\t\t\tonClick: (selectedIds) => {\n\t\t\t\tsetSelectedItemIds(selectedIds);\n\t\t\t\tsetIsBulkArchiveOpen(true);\n\t\t\t},\n\t\t\tvariant: \"destructive\",\n\t\t},\n\t];\n\n\tconst handleRowClick = (job: Job) => {\n\t\tif (onJobClick) {\n\t\t\tonJobClick(job);\n\t\t} else {\n\t\t\twindow.location.href = `/dashboard/work/${job.id}`;\n\t\t}\n\t};\n\n\tconst handleRefresh = () => {\n\t\twindow.location.reload();\n\t};\n\n\tconst handleAddJob = () => {\n\t\twindow.location.href = \"/dashboard/work/new\";\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FullWidthDataTable\n\t\t\t\tbulkActions={bulkActions}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={filteredJobs}\n\t\t\t\ttotalCount={totalCount}\n\t\t\t\tcurrentPageFromServer={currentPage}\n\t\t\t\tinitialSearchQuery={initialSearchQuery}\n\t\t\t\tserverPagination\n\t\t\t\temptyAction={\n\t\t\t\t\t<Button onClick={handleAddJob} size=\"sm\">\n\t\t\t\t\t\t<Plus className=\"mr-2 size-4\" />\n\t\t\t\t\t\tAdd Job\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\temptyIcon={<Briefcase className=\"text-muted-foreground h-8 w-8\" />}\n\t\t\t\temptyMessage=\"No jobs found\"\n\t\t\t\tenableSelection={true}\n\t\t\t\tentity=\"jobs\"\n\t\t\t\tgetItemId={(job) => job.id}\n\t\t\t\tisArchived={(job) => {\n\t\t\t\t\tconst jobRecord = job as unknown as Record<string, unknown>;\n\t\t\t\t\treturn Boolean(jobRecord.archived_at ?? jobRecord.deleted_at);\n\t\t\t\t}}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\tonRefresh={handleRefresh}\n\t\t\t\tonRowClick={handleRowClick}\n\t\t\t\tserverSearch\n\t\t\t\tsearchParamKey=\"search\"\n\t\t\t\tsearchPlaceholder=\"Search jobs by customer, category, equipment, service type...\"\n\t\t\t\tshowArchived={archiveFilter !== \"active\"}\n\t\t\t\tshowRefresh={showRefresh}\n\t\t\t/>\n\n\t\t\t{/* Archive Single Job Dialog */}\n\t\t\t<AlertDialog\n\t\t\t\tonOpenChange={setIsArchiveDialogOpen}\n\t\t\t\topen={isArchiveDialogOpen}\n\t\t\t>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>Archive Job?</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis job will be archived and can be restored within 90 days.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tif (itemToArchive) {\n\t\t\t\t\t\t\t\t\tconst { archiveJob } = await import(\"@/actions/jobs\");\n\t\t\t\t\t\t\t\t\tconst result = await archiveJob(itemToArchive);\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\n\t\t\t{/* Bulk Archive Dialog */}\n\t\t\t<AlertDialog onOpenChange={setIsBulkArchiveOpen} open={isBulkArchiveOpen}>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>\n\t\t\t\t\t\t\tArchive {selectedItemIds.size} Job(s)?\n\t\t\t\t\t\t</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\t{selectedItemIds.size} job(s) will be archived and can be restored\n\t\t\t\t\t\t\twithin 90 days.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tconst { archiveJob } = await import(\"@/actions/jobs\");\n\t\t\t\t\t\t\t\tlet archived = 0;\n\t\t\t\t\t\t\t\tfor (const id of selectedItemIds) {\n\t\t\t\t\t\t\t\t\tconst result = await archiveJob(id);\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\tarchived++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (archived > 0) {\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\t\t</>\n\t);\n}\n","\"use client\";\n\n/**\n * CustomerPreviewCard - Keyboard-accessible customer info preview\n *\n * Provides both hover preview (for mouse users) and button-triggered\n * preview (for keyboard users) to meet WCAG 2.1 AA accessibility.\n */\n\nimport { Info, Mail, Phone, User } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tHoverCard,\n\tHoverCardContent,\n\tHoverCardTrigger,\n} from \"@/components/ui/hover-card\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { getCustomerDisplayName } from \"@/lib/utils/customer-display\";\n\ntype Customer = {\n\tid: string;\n\tfirst_name?: string | null;\n\tlast_name?: string | null;\n\tcompany_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n};\n\ntype CustomerPreviewCardProps = {\n\tcustomer: Customer;\n\tclassName?: string;\n};\n\n/**\n * Customer info card content (reusable in both HoverCard and Popover)\n */\nfunction CustomerCardContent({ customer }: { customer: Customer }) {\n\tconst customerName = getCustomerDisplayName(customer);\n\n\treturn (\n\t\t<div className=\"space-y-3\">\n\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t<div className=\"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full shrink-0\">\n\t\t\t\t\t<User className=\"text-primary h-5 w-5\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t<p className=\"font-semibold text-sm\">{customerName}</p>\n\t\t\t\t\t{customer.company_name && (\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t{customer.company_name}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t{customer.email && (\n\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs\">\n\t\t\t\t\t\t<Mail className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`mailto:${customer.email}`}\n\t\t\t\t\t\t\tclassName=\"text-primary hover:underline truncate\"\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{customer.email}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{customer.phone && (\n\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs\">\n\t\t\t\t\t\t<Phone className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`tel:${customer.phone}`}\n\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{customer.phone}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * Keyboard-accessible customer preview component\n * - Mouse users: hover over customer name to see preview\n * - Keyboard users: tab to info button and press Enter/Space to see preview\n */\nexport function CustomerPreviewCard({\n\tcustomer,\n\tclassName,\n}: CustomerPreviewCardProps) {\n\tconst [popoverOpen, setPopoverOpen] = useState(false);\n\tconst customerName = getCustomerDisplayName(customer);\n\n\treturn (\n\t\t<div className=\"flex items-center gap-1\">\n\t\t\t{/* Mouse-accessible: Hover to preview */}\n\t\t\t<HoverCard>\n\t\t\t\t<HoverCardTrigger asChild>\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\tclassName=\"text-sm hover:underline hover:text-primary flex items-center gap-1.5 truncate\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<User className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n\t\t\t\t\t\t<span className=\"truncate\">{customerName}</span>\n\t\t\t\t\t</Link>\n\t\t\t\t</HoverCardTrigger>\n\t\t\t\t<HoverCardContent className=\"w-80\" align=\"start\">\n\t\t\t\t\t<CustomerCardContent customer={customer} />\n\t\t\t\t</HoverCardContent>\n\t\t\t</HoverCard>\n\n\t\t\t{/* Keyboard-accessible: Button to open preview */}\n\t\t\t<Popover open={popoverOpen} onOpenChange={setPopoverOpen}>\n\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tclassName=\"h-5 w-5 p-0 shrink-0\"\n\t\t\t\t\t\taria-label={`View ${customerName} contact information`}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Info className=\"h-3.5 w-3.5 text-muted-foreground\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</PopoverTrigger>\n\t\t\t\t<PopoverContent className=\"w-80\" align=\"start\">\n\t\t\t\t\t<CustomerCardContent customer={customer} />\n\t\t\t\t</PopoverContent>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}