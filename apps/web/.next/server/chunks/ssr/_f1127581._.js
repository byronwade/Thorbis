module.exports=[112932,a=>{"use strict";function b(a,b){if(!a)return b||"Unknown Customer";if(a.display_name)return a.display_name;let c=a.first_name?.trim(),d=a.last_name?.trim();return c&&d?`${c} ${d}`:c||d||(a.company_name?a.company_name:a.email?a.email:b||"Unknown Customer")}function c(a){if(!a)return"?";let c=b(a).split(/\s+/).filter(Boolean);return c.length>=2?(c[0][0]+c[1][0]).toUpperCase():1===c.length&&c[0].length>=2?c[0].slice(0,2).toUpperCase():1===c.length?c[0][0].toUpperCase():"?"}a.s(["getCustomerDisplayName",()=>b,"getCustomerInitials",()=>c])},162447,a=>{"use strict";let b=(0,a.i(203431).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["default",()=>b])},253520,a=>{"use strict";var b=a.i(162447);a.s(["CheckCircle",()=>b.default])},576777,a=>{"use strict";let b=(0,a.i(203431).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);a.s(["default",()=>b])},493667,a=>{"use strict";var b=a.i(861467);a.i(156120);var c=a.i(986990),d=a.i(481938),e=a.i(97997),f=a.i(587969),g=a.i(253520),h=a.i(624126),i=a.i(319895),j=a.i(576777),j=j,k=a.i(789815),l=a.i(240716);function m(a){return({quoted:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Quoted",icon:i.FileText,ariaLabel:"Job status: Quoted"},scheduled:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Scheduled",icon:f.Calendar,ariaLabel:"Job status: Scheduled"},in_progress:{className:"border-blue-500/50 bg-blue-500 text-white hover:bg-blue-600",label:"In Progress",icon:j.default,ariaLabel:"Job status: In Progress"},completed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Completed",icon:g.CheckCircle,ariaLabel:"Job status: Completed"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled",icon:l.XCircle,ariaLabel:"Job status: Cancelled"}})[a]||{className:"border-border/50 bg-background text-muted-foreground",label:a.replace(/_/g," ")}}function n({status:a,type:f,priority:j,contractType:l,className:n,variant:o="outline"}){let p,q=(p=l?({service:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Service"},maintenance:{className:"border-green-200/50 bg-green-50/50 text-green-700 dark:border-green-900/50 dark:bg-green-950/30 dark:text-green-400",label:"Maintenance"},custom:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Custom"}})[l]||{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:l.replace(/_/g," ")}:j?({low:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Low"},medium:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Medium"},high:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"High"},urgent:{className:"border-red-200/50 bg-red-50/50 text-red-700 dark:border-red-900/50 dark:bg-red-950/30 dark:text-red-400",label:"Urgent"}})[j]||{className:"border-border/50 bg-background text-muted-foreground",label:j.replace(/_/g," ")}:"purchase_order"===f?({draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},pending:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Pending"},approved:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Approved"},partially_received:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Partially Received"},received:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Received"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled"}})[a]||{className:"border-border/50 bg-background text-muted-foreground",label:a.replace(/_/g," ")}:f?function(a,b){switch(b){case"job":return m(a);case"invoice":return({paid:{className:"border-green-500/30 bg-green-500 text-white hover:bg-green-600 shadow-sm",label:"Paid",icon:g.CheckCircle,ariaLabel:"Invoice status: Paid"},unpaid:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400 shadow-sm",label:"Unpaid",icon:h.Clock,ariaLabel:"Invoice status: Unpaid"},overdue:{className:"border-red-500/30 bg-red-500 text-white hover:bg-red-600 shadow-sm ring-1 ring-red-500/20",label:"Overdue",icon:e.AlertCircle,ariaLabel:"Invoice status: Overdue - requires immediate attention"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50 shadow-sm",label:"Draft",icon:i.FileText,ariaLabel:"Invoice status: Draft"},sent:{className:"border-blue-200/50 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400 shadow-sm",label:"Sent",icon:k.Mail,ariaLabel:"Invoice status: Sent"},pending:{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 shadow-sm",label:"Pending",icon:h.Clock,ariaLabel:"Invoice status: Pending"}})[a]||{className:"border-border/50 bg-background text-muted-foreground shadow-sm",label:a.replace(/_/g," ")};case"estimate":return({accepted:{className:"bg-green-500 hover:bg-green-600 text-white",label:"Accepted"},sent:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Sent"},draft:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Draft"},declined:{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",label:"Declined"}})[a]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:a.replace(/_/g," ")};case"contract":return({signed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Signed"},sent:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Sent"},viewed:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Viewed"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},rejected:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Rejected"},expired:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"Expired"}})[a]||{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:a.replace(/_/g," ")};case"customer":return({active:{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",label:"Active"},inactive:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Inactive"},prospect:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Prospect"},lead:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Lead"}})[a]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:a.replace(/_/g," ")};default:return{className:"border-border/50 bg-background text-muted-foreground",label:a.replace(/_/g," ")}}}(a,f):m(a)).icon;return(0,b.jsxs)(c.Badge,{className:(0,d.cn)("inline-flex items-center gap-1 px-2 py-0.5 text-[11px] font-medium transition-all duration-200",p.className,n),variant:o,"aria-label":p.ariaLabel||p.label,children:[q&&(0,b.jsx)(q,{className:"h-3 w-3","aria-hidden":"true"}),p.label]})}function o({status:a,className:c}){return(0,b.jsx)(n,{className:c,status:a,type:"job"})}function p({status:a,className:c}){return(0,b.jsx)(n,{className:c,status:a,type:"invoice"})}function q({status:a,className:c}){return(0,b.jsx)(n,{className:c,status:a,type:"estimate"})}function r({status:a,className:c}){return(0,b.jsx)(n,{className:c,status:a,type:"contract"})}function s({status:a,className:c}){return(0,b.jsx)(n,{className:c,status:a,type:"customer"})}function t({priority:a,className:c}){return(0,b.jsx)(n,{className:c,priority:a,status:""})}function u({type:a,className:c}){return(0,b.jsx)(n,{className:c,contractType:a,status:""})}a.s(["ContractStatusBadge",()=>r,"ContractTypeBadge",()=>u,"CustomerStatusBadge",()=>s,"EstimateStatusBadge",()=>q,"InvoiceStatusBadge",()=>p,"JobStatusBadge",()=>o,"PriorityBadge",()=>t,"StatusBadge",()=>n],493667)},696137,a=>{"use strict";a.i(156120),a.s([])},794388,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(48199),e=a.i(525756),f=a.i(854729),g=a.i(319895),h=a.i(638727),i=a.i(145679),j=a.i(783281),k=a.i(278932),l=a.i(789815),m=a.i(898062),n=a.i(320091);a.i(445255);var o=a.i(18170);a.i(275601);var p=a.i(184158);a.i(297229);var q=a.i(489904),r=a.i(112932);function s({customer:a}){let c=(0,r.getCustomerDisplayName)(a);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full shrink-0",children:(0,b.jsx)(n.User,{className:"text-primary h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:c}),a.company_name&&(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.company_name})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(l.Mail,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"text-primary hover:underline truncate",onClick:a=>a.stopPropagation(),children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(m.Phone,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,b.jsx)("a",{href:`tel:${a.phone}`,className:"text-primary hover:underline",onClick:a=>a.stopPropagation(),children:a.phone})]})]})]})}function t({customer:a,className:c}){let[d,e]=(0,j.useState)(!1),f=(0,r.getCustomerDisplayName)(a);return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(p.HoverCard,{children:[(0,b.jsx)(p.HoverCardTrigger,{asChild:!0,children:(0,b.jsxs)(i.default,{href:`/dashboard/customers/${a.id}`,onClick:a=>a.stopPropagation(),className:"text-sm hover:underline hover:text-primary flex items-center gap-1.5 truncate",children:[(0,b.jsx)(n.User,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"}),(0,b.jsx)("span",{className:"truncate",children:f})]})}),(0,b.jsx)(p.HoverCardContent,{className:"w-80",align:"start",children:(0,b.jsx)(s,{customer:a})})]}),(0,b.jsxs)(q.Popover,{open:d,onOpenChange:e,children:[(0,b.jsx)(q.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(o.Button,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 shrink-0","aria-label":`View ${f} contact information`,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(k.Info,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),(0,b.jsx)(q.PopoverContent,{className:"w-80",align:"start",children:(0,b.jsx)(s,{customer:a})})]})]})}a.i(400355);var u=a.i(694340),v=a.i(380340);a.i(696137);var w=a.i(736096),x=a.i(493667),y=a.i(792268),z=a.i(563432);function A({jobs:k,itemsPerPage:l=50,totalCount:m,currentPage:n=1,onJobClick:p,showRefresh:q=!1,initialSearchQuery:s=""}){let A=(0,z.useArchiveStore)(a=>a.filters.jobs),[B,C]=(0,j.useState)(!1),[D,E]=(0,j.useState)(null),[F,G]=(0,j.useState)(!1),[H,I]=(0,j.useState)(new Set),J=k.filter(a=>{let b=!!(a.archived_at??a.deleted_at);return"active"===A?!b:"archived"!==A||b}),K=[{key:"jobNumber",header:"Job Number",width:"w-36",shrink:!0,render:a=>(0,b.jsx)(i.default,{className:"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline",href:`/dashboard/work/${a.id}`,onClick:a=>a.stopPropagation(),children:a.jobNumber??"—"})},{key:"title",header:"Title",width:"flex-1",render:a=>(0,b.jsxs)(i.default,{className:"block min-w-0",href:`/dashboard/work/${a.id}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"truncate text-sm leading-tight font-medium hover:underline",children:a.title??"Untitled Job"}),a.description?(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:a.description}):null]})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>{let c=a.customer||a.customers;return c?((0,r.getCustomerDisplayName)(c),(0,b.jsx)(t,{customer:c})):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}},{key:"status",header:"Status",width:"w-32",shrink:!0,hideable:!1,render:a=>(0,b.jsx)(x.JobStatusBadge,{status:a.status??"quoted"})},{key:"priority",header:"Priority",width:"w-28",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)(x.PriorityBadge,{priority:a.priority??"medium"})},{key:"scheduledStart",header:"Scheduled",width:"w-32",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm tabular-nums",children:(0,y.formatDate)(a.scheduledStart??null,"short")})},{key:"totalAmount",header:"Amount",width:"w-32",shrink:!0,align:"right",hideable:!1,render:a=>(0,b.jsx)("span",{className:"font-semibold tabular-nums",children:(0,y.formatCurrency)(a.totalAmount||0,{decimals:2})})},{key:"actions",header:"",width:"w-10",shrink:!0,render:a=>(0,b.jsx)(w.RowActionsDropdown,{actions:[{label:"View Details",icon:f.Eye,href:`/dashboard/work/${a.id}`},{label:"Edit Job",icon:e.Edit,href:`/dashboard/work/${a.id}/edit`},{label:"Create Invoice",icon:g.FileText,href:`/dashboard/work/invoices/new?jobId=${a.id}`,separatorBefore:!0},{label:"Archive Job",icon:c.Archive,variant:"destructive",separatorBefore:!0,onClick:()=>{E(a.id),C(!0)}}]})}],L=[{label:"Archive Selected",icon:(0,b.jsx)(c.Archive,{className:"h-4 w-4"}),onClick:a=>{I(a),G(!0)},variant:"destructive"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.FullWidthDataTable,{bulkActions:L,columns:K,data:J,totalCount:m,currentPageFromServer:n,initialSearchQuery:s,serverPagination:!0,emptyAction:(0,b.jsxs)(o.Button,{onClick:()=>{window.location.href="/dashboard/work/new"},size:"sm",children:[(0,b.jsx)(h.Plus,{className:"mr-2 size-4"}),"Add Job"]}),emptyIcon:(0,b.jsx)(d.Briefcase,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No jobs found",enableSelection:!0,entity:"jobs",getItemId:a=>a.id,isArchived:a=>!!(a.archived_at??a.deleted_at),itemsPerPage:l,onRefresh:()=>{window.location.reload()},onRowClick:a=>{p?p(a):window.location.href=`/dashboard/work/${a.id}`},serverSearch:!0,searchParamKey:"search",searchPlaceholder:"Search jobs by customer, category, equipment, service type...",showArchived:"active"!==A,showRefresh:q}),(0,b.jsx)(u.AlertDialog,{onOpenChange:C,open:B,children:(0,b.jsxs)(u.AlertDialogContent,{children:[(0,b.jsxs)(u.AlertDialogHeader,{children:[(0,b.jsx)(u.AlertDialogTitle,{children:"Archive Job?"}),(0,b.jsx)(u.AlertDialogDescription,{children:"This job will be archived and can be restored within 90 days."})]}),(0,b.jsxs)(u.AlertDialogFooter,{children:[(0,b.jsx)(u.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(u.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{if(D){let{archiveJob:b}=await a.A(965863);(await b(D)).success&&window.location.reload()}},children:"Archive"})]})]})}),(0,b.jsx)(u.AlertDialog,{onOpenChange:G,open:F,children:(0,b.jsxs)(u.AlertDialogContent,{children:[(0,b.jsxs)(u.AlertDialogHeader,{children:[(0,b.jsxs)(u.AlertDialogTitle,{children:["Archive ",H.size," Job(s)?"]}),(0,b.jsxs)(u.AlertDialogDescription,{children:[H.size," job(s) will be archived and can be restored within 90 days."]})]}),(0,b.jsxs)(u.AlertDialogFooter,{children:[(0,b.jsx)(u.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(u.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{let{archiveJob:b}=await a.A(965863),c=0;for(let a of H)(await b(a)).success&&c++;c>0&&window.location.reload()},children:"Archive"})]})]})})]})}a.s(["JobsTable",()=>A],794388)}];

//# sourceMappingURL=_f1127581._.js.map