module.exports=[483967,a=>{"use strict";var b=a.i(649408);a.s(["Palette",()=>b.default])},391432,a=>{"use strict";var b=a.i(861467),c=a.i(638446),d=a.i(337850),e=a.i(527936),f=a.i(187056),g=a.i(854729),h=a.i(319895),i=a.i(332284),j=a.i(789815),k=a.i(483967),l=a.i(127634),m=a.i(145679),n=a.i(337241),o=a.i(783281),p=a.i(156916);a.i(445255);var q=a.i(18170);a.i(380934);var r=a.i(347421);a.i(919381);var s=a.i(662143);a.i(40744);var t=a.i(419573);a.i(146697);var u=a.i(778737),v=a.i(127487);a.i(585886);var w=a.i(644243),x=a.i(382281);a.i(650756);var y=a.i(560450),z=a.i(700760);let A=[{id:"modern",name:"Modern Clean",description:"Minimalist design with clean lines",icon:h.FileText},{id:"professional",name:"Professional",description:"Traditional business invoice layout",icon:h.FileText},{id:"contractor",name:"Contractor",description:"Optimized for construction/trade work",icon:h.FileText},{id:"service",name:"Service-Based",description:"Best for service businesses",icon:h.FileText},{id:"commercial",name:"Commercial",description:"Large commercial projects",icon:h.FileText},{id:"detailed",name:"Detailed Breakdown",description:"Itemized with material/labor breakdown",icon:h.FileText}],B=[{id:"line-numbers",label:"Line Numbers",icon:c.Check},{id:"item-codes",label:"Item Codes",icon:c.Check},{id:"subtotals",label:"Subtotals",icon:c.Check},{id:"tax-breakdown",label:"Tax Breakdown",icon:c.Check},{id:"notes",label:"Notes Section",icon:c.Check},{id:"terms",label:"Terms & Conditions",icon:c.Check}],C=[{id:"online-payment",label:"Online Payment",icon:e.CreditCard},{id:"payment-methods",label:"Payment Methods",icon:e.CreditCard},{id:"partial-payments",label:"Partial Payments",icon:e.CreditCard},{id:"payment-plan",label:"Payment Plan",icon:e.CreditCard}];function D(){let a=(0,n.usePathname)(),h=a?.split("/").pop()||"",[D,E]=(0,o.useState)("modern"),[F,G]=(0,o.useState)("#3b82f6"),[H,I]=(0,o.useState)([80]),[J,K]=(0,o.useState)("medium"),[L,M]=(0,o.useState)(["line-numbers","subtotals","tax-breakdown","notes","terms"]),[N,O]=(0,o.useState)(["online-payment","payment-methods"]),[P,Q]=(0,o.useState)(!1),[R,S]=(0,o.useState)(!0),T=a=>{M(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},U=a=>{O(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])};return(0,b.jsxs)(v.Sidebar,{collapsible:"offcanvas",side:"right",variant:"inset",children:[(0,b.jsx)(v.SidebarHeader,{className:"border-b",children:(0,b.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:"Customer View"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-0.5 text-xs",children:"Customize what customers see"})]}),(0,b.jsx)(q.Button,{onClick:()=>{p.toast.success("Opening customer preview...")},size:"icon",variant:"ghost",children:(0,b.jsx)(g.Eye,{className:"size-4"})})]})}),(0,b.jsxs)(v.SidebarContent,{className:"gap-0",children:[(0,b.jsx)(s.Collapsible,{defaultOpen:!0,children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:["PDF Template",(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsx)("div",{className:"space-y-2 px-2 pt-2",children:A.map(a=>(0,b.jsx)(r.Card,{className:(0,z.cn)("group hover:border-primary/50 hover:bg-accent/5 cursor-pointer rounded-lg border p-3 transition-all",D===a.id&&"border-primary bg-primary/5"),onClick:()=>{var b;E(b=a.id),p.toast.success(`Template changed to ${b}`)},children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"mt-0.5",children:(0,b.jsx)(a.icon,{className:"text-muted-foreground size-4"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("p",{className:"text-sm leading-none font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.description})]}),D===a.id&&(0,b.jsx)(c.Check,{className:"text-primary size-4"})]})},a.id))})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsx)(s.Collapsible,{children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Palette,{className:"size-3.5"}),"Design & Branding"]}),(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsxs)("div",{className:"space-y-3 px-2 pt-1 pb-2",children:[(0,b.jsx)(x.StandardFormField,{label:"Primary Color",htmlFor:"invoice-options-primary-color",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{id:"invoice-options-primary-color",className:"h-8 w-16 cursor-pointer rounded border",onChange:a=>G(a.target.value),type:"color",value:F}),(0,b.jsx)("input",{className:"bg-background h-8 flex-1 rounded border px-2 text-xs",onChange:a=>G(a.target.value),type:"text",value:F})]})}),(0,b.jsxs)(x.StandardFormField,{label:"Logo Opacity",htmlFor:"invoice-options-logo-opacity",children:[(0,b.jsx)(w.Slider,{id:"invoice-options-logo-opacity",className:"w-full",max:100,min:0,onValueChange:I,step:10,value:H}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[H[0],"%"]})]}),(0,b.jsx)(x.StandardFormField,{label:"Font Size",htmlFor:"invoice-options-font-size",children:(0,b.jsxs)(t.Select,{onValueChange:K,value:J,children:[(0,b.jsx)(t.SelectTrigger,{id:"invoice-options-font-size",className:"h-8 text-xs",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"small",children:"Small"}),(0,b.jsx)(t.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(t.SelectItem,{value:"large",children:"Large"})]})]})})]})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsx)(s.Collapsible,{children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Eye,{className:"size-3.5"}),"What Customers See"]}),(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsx)("div",{className:"space-y-1 px-2 pt-2",children:B.map(a=>{let d=L.includes(a.id);return(0,b.jsxs)("button",{className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors",onClick:()=>T(a.id),type:"button",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[d&&(0,b.jsx)(c.Check,{className:"text-primary size-3"}),(0,b.jsx)("span",{className:(0,z.cn)("text-xs",d?"font-medium":""),children:a.label})]}),(0,b.jsx)(y.Switch,{checked:d,onCheckedChange:()=>T(a.id)})]},a.id)})})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsx)(s.Collapsible,{children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.CreditCard,{className:"size-3.5"}),"Payment Options"]}),(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsx)("div",{className:"space-y-1 px-2 pt-2",children:C.map(a=>{let d=N.includes(a.id);return(0,b.jsxs)("button",{className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors",onClick:()=>U(a.id),type:"button",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[d&&(0,b.jsx)(c.Check,{className:"text-primary size-3"}),(0,b.jsx)("span",{className:(0,z.cn)("text-xs",d?"font-medium":""),children:a.label})]}),(0,b.jsx)(y.Switch,{checked:d,onCheckedChange:()=>U(a.id)})]},a.id)})})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsx)(s.Collapsible,{children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Mail,{className:"size-3.5"}),"Email Settings"]}),(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsxs)("div",{className:"space-y-3 px-2 pt-1 pb-2",children:[(0,b.jsx)(r.Card,{className:"rounded-lg border p-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("p",{className:"text-xs font-medium",children:"Auto-send on Create"}),(0,b.jsx)("p",{className:"text-muted-foreground text-[10px]",children:"Automatically email invoice to customer"})]}),(0,b.jsx)(y.Switch,{checked:P,onCheckedChange:Q})]})}),(0,b.jsx)(q.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(m.default,{href:"/dashboard/settings/email-templates",children:[(0,b.jsx)(j.Mail,{className:"size-3"}),"Customize Email Template"]})})]})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsx)(s.Collapsible,{children:(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{asChild:!0,children:(0,b.jsxs)(s.CollapsibleTrigger,{className:"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Globe,{className:"size-3.5"}),"Customer Portal"]}),(0,b.jsx)(d.ChevronRight,{className:"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(s.CollapsibleContent,{children:(0,b.jsxs)("div",{className:"space-y-2 px-2 pt-2",children:[(0,b.jsx)(r.Card,{className:(0,z.cn)("group hover:border-primary/50 hover:bg-accent/5 cursor-pointer rounded-lg border p-3 transition-all",R&&"border-primary bg-primary/5"),onClick:()=>S(!R),children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("p",{className:"text-sm leading-none font-medium",children:"Portal Access"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:R?"Enabled":"Disabled"})]}),(0,b.jsx)(y.Switch,{checked:R,onCheckedChange:S})]})}),(0,b.jsx)(q.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(m.default,{href:"/dashboard/settings/customer-portal",children:[(0,b.jsx)(l.Settings,{className:"size-3"}),"Configure Portal Settings"]})})]})})]})}),(0,b.jsx)(u.Separator,{className:"my-2"}),(0,b.jsxs)(v.SidebarGroup,{children:[(0,b.jsx)(v.SidebarGroupLabel,{children:"Quick Actions"}),(0,b.jsxs)("div",{className:"space-y-2 px-2",children:[(0,b.jsxs)(q.Button,{className:"w-full justify-start gap-2 text-xs",onClick:()=>window.open(`/api/invoices/${h}/pdf`,"_blank"),size:"sm",variant:"outline",children:[(0,b.jsx)(f.Download,{className:"size-3"}),"Download PDF"]}),(0,b.jsx)(q.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(m.default,{href:`/invoices/${h}/preview`,children:[(0,b.jsx)(g.Eye,{className:"size-3"}),"Preview Customer View"]})})]})]})]}),(0,b.jsx)(v.SidebarFooter,{className:"border-t p-3",children:(0,b.jsxs)(q.Button,{className:"w-full gap-2",onClick:()=>{p.toast.success("Customer view settings saved")},size:"sm",variant:"default",children:[(0,b.jsx)(l.Settings,{className:"size-4"}),"Save Settings"]})})]})}a.s(["InvoiceOptionsSidebar",()=>D])},973302,a=>{"use strict";var b=a.i(861467),c=a.i(145679),d=a.i(337241),e=a.i(337850),f=a.i(638727),g=a.i(339632),h=a.i(638446),i=a.i(766153),j=a.i(263614),j=j,k=a.i(789815),l=a.i(128952),m=a.i(101482);a.i(445255);var n=a.i(18170);a.i(956852);var o=a.i(90125),p=a.i(700760);function q(){let a=(0,d.usePathname)(),e=[{name:"Dashboard",url:"/dashboard/communication",icon:j.default},{name:"Email",url:"/dashboard/communication/email?folder=inbox",icon:k.Mail},{name:"SMS",url:"/dashboard/communication/sms",icon:l.MessageSquare},{name:"Teams",url:"/dashboard/communication/teams?channel=general",icon:m.Users}],f=b=>{if("/dashboard/communication"===b)return"/dashboard/communication"===a;let c=b.split("?")[0];return a?.startsWith(c)??!1},g=e.find(a=>f(a.url))||e[0],q=g.icon;return(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(n.Button,{variant:"ghost",size:"sm",className:(0,p.cn)("w-full justify-between h-8 px-2.5 rounded-md","border border-sidebar-border","bg-sidebar-accent/30 hover:bg-sidebar-accent/50","text-sidebar-foreground","font-medium text-sm","transition-colors","group"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"size-4 text-sidebar-foreground/70"}),(0,b.jsx)("span",{className:"truncate",children:g.name})]}),(0,b.jsx)(i.ChevronDown,{className:"size-3.5 text-sidebar-foreground/50 transition-transform duration-200 group-data-[state=open]:rotate-180"})]})}),(0,b.jsxs)(o.DropdownMenuContent,{className:"w-[200px] p-1",align:"start",side:"bottom",sideOffset:4,children:[(0,b.jsx)(o.DropdownMenuItem,{asChild:!0,className:"p-0",children:(0,b.jsxs)(c.default,{href:e[0].url,className:(0,p.cn)("flex items-center gap-2.5 px-2 py-1.5 rounded-sm cursor-pointer","text-sm transition-colors",f(e[0].url)?"bg-accent font-medium":"hover:bg-muted/80"),children:[(0,b.jsx)(j.default,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"flex-1",children:"Dashboard"}),f(e[0].url)&&(0,b.jsx)(h.Check,{className:"size-3.5 text-foreground/70"})]})}),(0,b.jsx)(o.DropdownMenuSeparator,{className:"my-1"}),(0,b.jsx)("div",{className:"space-y-0.5",children:e.slice(1).map(a=>{let d=f(a.url),e=a.icon;return(0,b.jsx)(o.DropdownMenuItem,{asChild:!0,className:"p-0",children:(0,b.jsxs)(c.default,{href:a.url,className:(0,p.cn)("flex items-center gap-2.5 px-2 py-1.5 rounded-sm cursor-pointer","text-sm transition-colors",d?"bg-accent font-medium":"hover:bg-muted/80"),children:[(0,b.jsx)(e,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"flex-1",children:a.name}),d&&(0,b.jsx)(h.Check,{className:"size-3.5 text-foreground/70"})]})},a.name)})})]})]})}var r=a.i(127487);function s({groups:a,pathname:d="/dashboard",searchParams:e,className:f}){let g=d||"/dashboard";if(!Array.isArray(a))return null;let h=["/team","/invoices","/estimates","/contracts","/appointments","/payments","/purchase-orders","/maintenance-plans","/service-agreements","/materials","/equipment","/pricebook","/schedule"];return(0,b.jsx)(b.Fragment,{children:a.map((a,d)=>Array.isArray(a?.items)?(0,b.jsxs)(r.SidebarGroup,{className:f,children:[a.label&&(0,b.jsx)(r.SidebarGroupLabel,{children:a.label}),(0,b.jsx)(r.SidebarMenu,{children:a.items.map(a=>{let d=new URL(a.url,"http://localhost"),f=d.pathname,i=d.searchParams,j=g===f,k=!0;if(i.toString()&&e){for(let[a,b]of i.entries())if(e.get(a)!==b){k=!1;break}}else i.toString()&&!e&&(k=!1);let l=j&&k,m=g.startsWith(`${a.url}/`);if("/dashboard/work"===a.url&&m){let a=g.replace("/dashboard/work","");h.some(b=>a.startsWith(b))&&(m=!1)}let n=a.items?.some(a=>g===a.url),o=l||m||n;if(a.items&&a.items.length>0)return(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,isActive:o&&g===a.url,tooltip:a.title,children:(0,b.jsxs)(c.default,{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title})]})}),(0,b.jsx)(r.SidebarMenuSub,{children:a.items.map(a=>{let d=g===a.url||g.startsWith(`${a.url}/`);return(0,b.jsx)(r.SidebarMenuSubItem,{children:(0,b.jsx)(r.SidebarMenuSubButton,{asChild:!0,isActive:d,children:(0,b.jsx)(c.default,{href:a.url,children:(0,b.jsx)("span",{children:a.title})})})},a.title)})})]},a.title);let p=a.url.startsWith("#"),q="yellow"===a.highlight?"ring-2 ring-yellow-500/50 hover:ring-yellow-500/70 dark:ring-yellow-500/50 dark:hover:ring-yellow-500/70":"";return a.onClick?(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsxs)(r.SidebarMenuButton,{className:q,isActive:o,onClick:a.onClick,tooltip:a.title,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title})]}),void 0!==a.badge&&(0,b.jsx)(r.SidebarMenuBadge,{children:"number"==typeof a.badge?a.badge.toLocaleString():a.badge})]},a.title):(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,className:q,isActive:o,tooltip:a.title,children:p?(0,b.jsxs)("a",{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title})]}):(0,b.jsxs)(c.default,{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title})]})}),void 0!==a.badge&&(0,b.jsx)(r.SidebarMenuBadge,{children:"number"==typeof a.badge?a.badge.toLocaleString():a.badge})]},a.title)})})]},`${a.label||"group"}-${d}`):null)})}a.i(919381);var t=a.i(662143);a.i(413309);var u=a.i(54210),v=a.i(783281);let w="sidebar-scroll-positions";function x(){let a=(0,v.useRef)(null),b=(0,d.usePathname)(),c=(0,v.useRef)();return(0,v.useEffect)(()=>{let c=a.current;if(!c||!b)return;let d=setTimeout(()=>{try{let a=sessionStorage.getItem(w);if(a){let d=JSON.parse(a)[b];void 0!==d&&(c.scrollTop=d)}}catch(a){console.error("Failed to restore sidebar scroll position:",a)}},50);return()=>clearTimeout(d)},[b]),(0,v.useEffect)(()=>{let d=a.current;if(!d||!b)return;let e=()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{try{let a=sessionStorage.getItem(w),c=a?JSON.parse(a):{};c[b]=d.scrollTop,sessionStorage.setItem(w,JSON.stringify(c))}catch(a){console.error("Failed to save sidebar scroll position:",a)}},150)};return d.addEventListener("scroll",e,{passive:!0}),()=>{d.removeEventListener("scroll",e),c.current&&clearTimeout(c.current)}},[b]),(0,v.useEffect)(()=>()=>{let c=a.current;if(c&&b)try{let a=sessionStorage.getItem(w),d=a?JSON.parse(a):{};d[b]=c.scrollTop,sessionStorage.setItem(w,JSON.stringify(d))}catch(a){console.error("Failed to save sidebar scroll position on unmount:",a)}},[b]),a}function y({config:a,...h}){let i=(0,d.usePathname)(),j=(0,d.useSearchParams)(),k=x(),{navGroups:l,primaryAction:m,additionalSections:o}=a;return(0,b.jsxs)(r.Sidebar,{collapsible:"offcanvas",variant:"inset",...h,children:[(0,b.jsxs)(r.SidebarHeader,{className:"gap-3 px-3 pt-4 md:pt-0 pb-2",children:[(0,b.jsx)(q,{}),m&&(0,b.jsx)(n.Button,{className:"w-full h-11 md:h-9 font-medium text-base md:text-sm",variant:m.variant||"default",type:"button",onClick:m.onClick,asChild:!!m.href,children:m.href?(0,b.jsxs)(c.default,{href:m.href,children:[(0,b.jsx)(m.icon,{className:"size-5 md:size-4"}),m.label]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.icon,{className:"size-5 md:size-4"}),m.label]})})]}),(0,b.jsxs)(r.SidebarContent,{ref:k,children:[(0,b.jsx)(s,{groups:l,pathname:i??void 0,searchParams:j}),o?.map((a,d)=>(0,b.jsx)(t.Collapsible,{defaultOpen:a.defaultOpen??!0,className:"group/collapsible",children:(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(t.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)("div",{className:"flex items-center justify-between px-2 cursor-pointer hover:bg-sidebar-accent/50 rounded-md transition-colors",children:[(0,b.jsxs)(r.SidebarGroupLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.ChevronRight,{className:"size-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"}),a.label]}),a.addButton||a.onAddClick&&(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:b=>{b.stopPropagation(),a.onAddClick?.()},type:"button",children:(0,b.jsx)(f.Plus,{className:"size-4"})})]})}),(0,b.jsx)(t.CollapsibleContent,{children:(0,b.jsx)(r.SidebarMenu,{children:a.scrollable?(0,b.jsx)(u.ScrollArea,{className:a.scrollHeight||"h-[200px] w-full",children:a.items.map((a,d)=>(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsxs)("div",{className:"group/item flex items-center w-full",children:[a.url?(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,className:"flex-1",children:(0,b.jsxs)(c.default,{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{className:"size-4"}),(0,b.jsx)("span",{children:a.title}),void 0!==a.badge&&(0,b.jsx)(r.SidebarMenuBadge,{children:"number"==typeof a.badge?a.badge.toLocaleString():a.badge})]})}):(0,b.jsxs)(r.SidebarMenuButton,{onClick:a.onClick,type:a.onClick?"button":void 0,className:"flex-1",children:[a.icon&&(0,b.jsx)(a.icon,{className:"size-4"}),(0,b.jsx)("span",{children:a.title}),void 0!==a.badge&&a.badge>0&&(0,b.jsx)(r.SidebarMenuBadge,{children:"number"==typeof a.badge?a.badge.toLocaleString():a.badge})]}),a.folderId&&a.onDelete&&(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover/item:opacity-100 transition-opacity ml-auto",onClick:b=>{b.preventDefault(),b.stopPropagation(),confirm(`Are you sure you want to delete "${a.title}"?`)&&a.onDelete?.(a.folderId)},title:"Delete folder",children:(0,b.jsx)(g.Trash2,{className:"h-3.5 w-3.5 text-destructive"})})]})},d))}):a.items.map((a,d)=>(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsxs)("div",{className:"group/item flex items-center w-full",children:[a.url?(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,className:"flex-1",children:(0,b.jsxs)(c.default,{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{className:"size-4"}),(0,b.jsx)("span",{children:a.title}),void 0!==a.badge&&a.badge>0&&(0,b.jsx)(r.SidebarMenuBadge,{children:"number"==typeof a.badge?a.badge.toLocaleString():a.badge})]})}):(0,b.jsxs)(r.SidebarMenuButton,{onClick:a.onClick,type:a.onClick?"button":void 0,className:"flex-1",children:[a.icon&&(0,b.jsx)(a.icon,{className:"size-4"}),(0,b.jsx)("span",{children:a.title}),void 0!==a.badge&&(0,b.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:a.badge})]}),a.folderId&&a.onDelete&&(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover/item:opacity-100 transition-opacity ml-auto",onClick:b=>{b.preventDefault(),b.stopPropagation(),confirm(`Are you sure you want to delete "${a.title}"?`)&&a.onDelete?.(a.folderId)},title:"Delete folder",children:(0,b.jsx)(g.Trash2,{className:"h-3.5 w-3.5 text-destructive"})})]})},d))})})]})},d))]}),(0,b.jsx)(r.SidebarRail,{})]})}var z=a.i(452168),A=a.i(527936),B=a.i(891079),C=a.i(125987),D=a.i(933232),E=a.i(278932),F=a.i(739044),G=a.i(171768),H=a.i(688014);function I(a){let c={navGroups:[{label:"MY INBOX",items:[{title:"Inbox",url:"/dashboard/communication/email?inbox=personal&folder=inbox",icon:D.Inbox},{title:"Sent",url:"/dashboard/communication/email?inbox=personal&folder=sent",icon:F.Send},{title:"Drafts",url:"/dashboard/communication/email?inbox=personal&folder=drafts",icon:B.File},{title:"Starred",url:"/dashboard/communication/email?inbox=personal&folder=starred",icon:G.Star},{title:"Archive",url:"/dashboard/communication/email?inbox=personal&folder=archive",icon:z.Archive}]},{label:"COMPANY INBOX",items:[{title:"Support",url:"/dashboard/communication/email?inbox=company&category=support",icon:C.HelpCircle},{title:"Sales",url:"/dashboard/communication/email?inbox=company&category=sales",icon:H.TrendingUp},{title:"Billing",url:"/dashboard/communication/email?inbox=company&category=billing",icon:A.CreditCard},{title:"General",url:"/dashboard/communication/email?inbox=company&category=general",icon:E.Info}]}],primaryAction:void 0,additionalSections:[{label:"Folders",items:[],scrollable:!0,scrollHeight:"h-[200px]",defaultOpen:!0}]};return(0,b.jsx)(y,{config:c,...a})}var J=a.i(156916),K=a.i(621791),L=a.i(169021),M=(0,L.createServerReference)("40ab3b361b2041f77f436c8d1e4550cc0e1195ba49",L.callServer,void 0,L.findSourceMapURL,"deleteEmailFolderAction"),N=(0,L.createServerReference)("009d2437f279bb220435d6b93fe38eb909817e6046",L.callServer,void 0,L.findSourceMapURL,"getEmailFoldersAction"),O=a.i(788024),O=O,P=a.i(263758),Q=a.i(198803),R=a.i(898062),S=a.i(320091),T=a.i(51089),U=a.i(441178);a.i(516775);var V=a.i(560272);a.i(288007);var W=a.i(986990);a.i(421695);var X=a.i(736786);a.i(19256);var Y=a.i(417132),Z=a.i(527228);let $=(0,Z.create)(a=>({activeFilter:"all",setActiveFilter:b=>a({activeFilter:b}),selectedMessageId:null,setSelectedMessageId:b=>a({selectedMessageId:b}),isDetailView:!1,setIsDetailView:b=>a({isDetailView:b}),activeThreadId:null,setActiveThreadId:b=>a({activeThreadId:b}),composer:{type:null},openComposer:(b,c)=>{a({composer:{type:b,context:c}})},closeComposer:()=>a({composer:{type:null}}),pendingMessages:{},addPendingMessage:b=>a(a=>{let c=a.pendingMessages[b.conversationId]??[];return{pendingMessages:{...a.pendingMessages,[b.conversationId]:[...c,b]}}}),resolvePendingMessage:(b,c,d)=>a(a=>{let e=(a.pendingMessages[b]??[]).filter(a=>a.id!==c);return d&&e.push(d),{pendingMessages:e.length>0?{...a.pendingMessages,[b]:e}:Object.fromEntries(Object.entries(a.pendingMessages).filter(([a])=>a!==b))}}),resetPendingMessages:b=>a(a=>a.pendingMessages[b]?{pendingMessages:Object.fromEntries(Object.entries(a.pendingMessages).filter(([a])=>a!==b))}:{pendingMessages:a.pendingMessages})}));function _({open:a,onOpenChange:c,recipientType:d}){let[e,f]=(0,v.useState)(""),[g,h]=(0,v.useState)(""),[i,j]=(0,v.useState)(null),[m,n]=(0,v.useState)([]),[o,q]=(0,v.useState)([]),[r,s]=(0,v.useState)(!1),[t,u]=(0,v.useTransition)(),w=$(a=>a.openComposer);(0,v.useEffect)(()=>{if(!a||null!==i){a||(n([]),q([]));return}if(e.trim().length<2){n([]),q([]);return}let b=setTimeout(()=>{s(!0),u(async()=>{try{let a=await (0,T.searchCustomers)(e,{limit:20}),b=[];if(a.success&&a.data)b=Array.isArray(a.data)?a.data:[a.data];else if(Array.isArray(a))b=a;else if(a.error){console.warn("Customer search failed:",a.error),n([]);return}if(b.length>0){let a=b.map(a=>({id:a.id,display_name:a.display_name||`${a.first_name||""} ${a.last_name||""}`.trim()||"Customer",email:a.email||null,phone:a.phone||a.primary_phone||null,company_name:a.company_name||null}));n(a)}else n([]);let c=await (0,U.searchVendors)(e);if(c.success){let a=Array.isArray(c.data)?c.data:c.data?[c.data]:[];if(a.length>0){let b=a.map(a=>({id:a.id,name:a.name,display_name:a.display_name||a.name,email:a.email,phone:a.phone}));q(b)}else q([])}else console.warn("Vendor search failed:",c.error||"Unknown error"),q([])}catch(a){console.error("Error searching recipients:",a),n([]),q([])}finally{s(!1)}})},300);return()=>clearTimeout(b)},[e,a,i]);let x=(0,v.useCallback)(a=>{if("customer"===a.type){let b=a.data,c=b.email||"",e=b.phone||"",f=b.display_name||"Customer";"email"===d&&c?w("email",{customerId:b.id,customerName:f,email:c}):"sms"===d&&e&&w("sms",{customerId:b.id,customerName:f,phone:e})}else if("vendor"===a.type){let b=a.data,c=b.email||"",e=b.phone||"",f=b.display_name||b.name||"Vendor";"email"===d&&c?w("email",{customerName:f,email:c}):"sms"===d&&e&&w("sms",{customerName:f,phone:e})}else"custom-email"===a.type?w("email",{customerName:a.email,email:a.email}):"custom-phone"===a.type&&w("sms",{customerName:a.phone,phone:a.phone});c(!1),setTimeout(()=>{f(""),h(""),j(null),n([]),q([])},200)},[d,w,c]);(0,v.useEffect)(()=>{a||(f(""),h(""),j(null),n([]),q([]))},[a]),(0,v.useCallback)(()=>{if(g.trim()){if("email"===i){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.trim()))return;x({type:"custom-email",email:g.trim()})}else if("phone"===i){if(g.replace(/\D/g,"").length<10)return;x({type:"custom-phone",phone:g.trim()})}}},[g,i,x]);let y=null!==g.trim().match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/),z=g.replace(/\D/g,"").length>=10,A=m.length>0||o.length>0,B=(e.trim().length>=2||null!==i)&&!r;return(0,b.jsx)(Y.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(Y.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(Y.DialogHeader,{children:[(0,b.jsx)(Y.DialogTitle,{children:"email"===d?"Send Email To":"Send Text To"}),(0,b.jsxs)(Y.DialogDescription,{children:["Search for a customer or vendor, or enter a custom"," ","email"===d?"email address":"phone number"]})]}),(0,b.jsxs)(X.Command,{className:"rounded-lg border shadow-md",shouldFilter:!1,children:[(0,b.jsx)(X.CommandInput,{placeholder:`Search customers, vendors, or enter ${"email"===d?"email":"phone number"}...`,value:i?g:e,onValueChange:a=>{if(i)h(a);else{let b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.trim()),c=a.replace(/\D/g,"").length>=10;b&&"email"===d?(j("email"),h(a),f("")):c&&"sms"===d&&!a.includes("@")?(j("phone"),h(a),f("")):(f(a),j(null),h(""))}},onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),"email"===i&&y?x({type:"custom-email",email:g.trim()}):"phone"===i&&z?x({type:"custom-phone",phone:g.trim()}):!i&&e.trim().length>=2&&("email"===d&&e.includes("@")&&e.includes(".")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())&&x({type:"custom-email",email:e.trim()}):"sms"===d&&e.replace(/\D/g,"").length>=10&&x({type:"custom-phone",phone:e.trim()})))}}),(0,b.jsxs)(X.CommandList,{children:[r&&(0,b.jsxs)("div",{className:"flex items-center justify-center py-6",children:[(0,b.jsx)(Q.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}),!r&&!A&&!B&&e.trim().length>=2&&(0,b.jsx)(X.CommandEmpty,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(S.User,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"No results found"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Try a different search term or enter a custom"," ","email"===d?"email address":"phone number"]})]})}),!r&&!A&&!B&&0===e.trim().length&&(0,b.jsx)(X.CommandEmpty,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(k.Mail,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"Start typing to search"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Search for customers or vendors, or type an"," ","email"===d?"email address":"phone number"," ","directly"]})]})}),B&&(0,b.jsxs)(X.CommandGroup,{heading:"Custom",children:["email"===i&&(0,b.jsxs)(X.CommandItem,{onSelect:()=>{y&&x({type:"custom-email",email:g.trim()})},disabled:!y,className:(0,p.cn)("flex items-center gap-2 cursor-pointer",!y&&"opacity-50 cursor-not-allowed"),children:[(0,b.jsx)(O.default,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"flex-1",children:["Send to ",g.trim()||"email address"]}),y&&(0,b.jsx)(W.Badge,{variant:"default",className:"text-xs",children:"Press Enter"}),!y&&g.trim().length>0&&(0,b.jsx)(W.Badge,{variant:"outline",className:"text-xs",children:"Invalid email"})]}),"phone"===i&&(0,b.jsxs)(X.CommandItem,{onSelect:()=>{z&&x({type:"custom-phone",phone:g.trim()})},disabled:!z,className:(0,p.cn)("flex items-center gap-2 cursor-pointer",!z&&"opacity-50 cursor-not-allowed"),children:[(0,b.jsx)(R.Phone,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"flex-1",children:["Send to ",g.trim()||"phone number"]}),z&&(0,b.jsx)(W.Badge,{variant:"default",className:"text-xs",children:"Press Enter"}),!z&&g.trim().length>0&&(0,b.jsx)(W.Badge,{variant:"outline",className:"text-xs",children:"Invalid phone"})]}),!i&&e.trim().length>=2&&"email"===d&&(0,b.jsxs)(X.CommandItem,{onSelect:()=>{j("email"),h(e),f("")},className:"flex items-center gap-2",children:[(0,b.jsx)(O.default,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:['Use "',e,'" as email address']})]}),!i&&e.trim().length>=2&&"sms"===d&&(0,b.jsxs)(X.CommandItem,{onSelect:()=>{j("phone"),h(e),f("")},className:"flex items-center gap-2",children:[(0,b.jsx)(R.Phone,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:['Use "',e,'" as phone number']})]})]}),m.length>0&&(0,b.jsx)(X.CommandGroup,{heading:"Customers",children:m.map(a=>{let c=!!a.email,e=!!a.phone,f="email"===d?c:e;return(0,b.jsxs)(X.CommandItem,{onSelect:()=>{f&&x({type:"customer",data:a})},disabled:!f,className:(0,p.cn)("flex items-center gap-3",!f&&"opacity-50 cursor-not-allowed"),children:[(0,b.jsx)(V.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(V.AvatarFallback,{children:a.display_name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)})}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.display_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.email&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Mail,{className:"h-3 w-3"}),a.email]}),a.phone&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(R.Phone,{className:"h-3 w-3"}),a.phone]}),!f&&(0,b.jsxs)(W.Badge,{variant:"outline",className:"text-xs",children:["No ","email"===d?"email":"phone"]})]})]}),f&&("email"===d?(0,b.jsx)(k.Mail,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(l.MessageSquare,{className:"h-4 w-4 text-muted-foreground"}))]},a.id)})}),o.length>0&&(0,b.jsx)(X.CommandGroup,{heading:"Vendors",children:o.map(a=>{let c=!!a.email,e=!!a.phone;return("email"===d?c:e)?(0,b.jsxs)(X.CommandItem,{onSelect:()=>x({type:"vendor",data:a}),className:"flex items-center gap-3",children:[(0,b.jsx)(V.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(V.AvatarFallback,{children:(0,b.jsx)(P.Building2,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.display_name||a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.email&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Mail,{className:"h-3 w-3"}),a.email]}),a.phone&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(R.Phone,{className:"h-3 w-3"}),a.phone]})]})]}),"email"===d?(0,b.jsx)(k.Mail,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(l.MessageSquare,{className:"h-4 w-4 text-muted-foreground"})]},a.id):null})})]})]})]})})}var aa=a.i(414379),ab=(0,L.createServerReference)("40d07b28bd187d6d3394516f5d39d8c4717c1b232c",L.callServer,void 0,L.findSourceMapURL,"createEmailFolderAction");a.i(839984);var ac=a.i(372712);a.i(458393);var ad=a.i(82012);a.i(897346);var ae=a.i(75892);function af({onFolderCreated:a,children:c}){let[e,g]=(0,v.useState)(!1),[h,i]=(0,v.useState)(!1),[j,k]=(0,v.useState)(""),[l,m]=(0,v.useState)(""),o=(0,d.useRouter)(),p=async b=>{if(b.preventDefault(),!j.trim())return void J.toast.error("Folder name is required");i(!0);try{let b=await ab({name:j.trim(),description:l.trim()||void 0});b.success&&b.folder?(J.toast.success("Folder created successfully"),g(!1),k(""),m(""),o.push(`/dashboard/communication/folder/${b.folder.slug}`),a?.()):J.toast.error(b.error||"Failed to create folder")}catch(a){J.toast.error("Failed to create folder",{description:a instanceof Error?a.message:"Unknown error"})}finally{i(!1)}};return(0,b.jsxs)(Y.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(Y.DialogTrigger,{asChild:!0,children:c||(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,b.jsx)(f.Plus,{className:"h-4 w-4"})})}),(0,b.jsx)(Y.DialogContent,{children:(0,b.jsxs)("form",{onSubmit:p,children:[(0,b.jsxs)(Y.DialogHeader,{children:[(0,b.jsx)(Y.DialogTitle,{children:"Create New Folder"}),(0,b.jsx)(Y.DialogDescription,{children:"Create a custom folder to organize your emails. You can add emails to this folder using labels."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"name",children:"Folder Name"}),(0,b.jsx)(ac.Input,{id:"name",value:j,onChange:a=>k(a.target.value),placeholder:"e.g., CSLB, Important, Follow-up",required:!0,maxLength:100,disabled:h})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"description",children:"Description (Optional)"}),(0,b.jsx)(ae.Textarea,{id:"description",value:l,onChange:a=>m(a.target.value),placeholder:"Add a description for this folder",maxLength:500,disabled:h,rows:3})]})]}),(0,b.jsxs)(Y.DialogFooter,{children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:h,children:"Cancel"}),(0,b.jsx)(n.Button,{type:"submit",disabled:h||!j.trim(),children:h?"Creating...":"Create Folder"})]})]})})]})}function ag(a,c){let d=[];return c&&c.length>0&&c.sort((a,b)=>a.sort_order-b.sort_order).forEach(b=>{let c=a?.[b.slug];d.push({title:b.name,icon:aa.Tag,badge:c&&c>0?c:void 0,url:`/dashboard/communication/folder/${encodeURIComponent(b.slug)}`,folderId:b.id})}),a&&Object.keys(a).forEach(b=>{if(!["all","inbox","drafts","sent","archive","snoozed","spam","trash","starred"].includes(b)&&!d.some(a=>a.url.includes(b))){let c=a[b];d.push({title:b,icon:aa.Tag,badge:c&&c>0?c:void 0,url:`/dashboard/communication/label/${encodeURIComponent(b.toLowerCase())}`})}}),{navGroups:[{label:"MY INBOX",items:[{title:"Inbox",url:"/dashboard/communication/email?inbox=personal&folder=inbox",icon:D.Inbox,badge:a?.personal_inbox&&a.personal_inbox>0?a.personal_inbox:void 0},{title:"Sent",url:"/dashboard/communication/email?inbox=personal&folder=sent",icon:F.Send,badge:a?.personal_sent&&a.personal_sent>0?a.personal_sent:void 0},{title:"Drafts",url:"/dashboard/communication/email?inbox=personal&folder=drafts",icon:B.File,badge:a?.personal_drafts&&a.personal_drafts>0?a.personal_drafts:void 0},{title:"Starred",url:"/dashboard/communication/email?inbox=personal&folder=starred",icon:G.Star,badge:a?.personal_starred&&a.personal_starred>0?a.personal_starred:void 0},{title:"Archive",url:"/dashboard/communication/email?inbox=personal&folder=archive",icon:z.Archive,badge:a?.personal_archive&&a.personal_archive>0?a.personal_archive:void 0}]},{label:"COMPANY INBOX",items:[{title:"Support",url:"/dashboard/communication/email?inbox=company&category=support",icon:C.HelpCircle,badge:a?.company_support&&a.company_support>0?a.company_support:void 0},{title:"Sales",url:"/dashboard/communication/email?inbox=company&category=sales",icon:H.TrendingUp,badge:a?.company_sales&&a.company_sales>0?a.company_sales:void 0},{title:"Billing",url:"/dashboard/communication/email?inbox=company&category=billing",icon:A.CreditCard,badge:a?.company_billing&&a.company_billing>0?a.company_billing:void 0},{title:"General",url:"/dashboard/communication/email?inbox=company&category=general",icon:E.Info,badge:a?.company_general&&a.company_general>0?a.company_general:void 0}]}],primaryAction:{label:"New email",icon:f.Plus,href:"/dashboard/communication/email?compose=true"},additionalSections:[{label:"Folders",items:d.map(a=>({...a,url:a.url,folderId:a.folderId})),addButton:(0,b.jsx)(af,{onFolderCreated:()=>{window.dispatchEvent(new Event("folder-created"))}}),scrollable:!0,scrollHeight:"h-[200px]",defaultOpen:!0}]}}function ah(a){let[c,d]=(0,v.useState)(()=>ag()),e=(0,v.useCallback)(async()=>{try{let[a,b]=await Promise.all([(0,K.getEmailFolderCountsAction)(),N()]);if(a.success&&a.counts){let c={...a.counts};b.success&&b.folders&&b.folders.forEach(a=>{c[a.slug]=c[a.slug]||0});let f={inbox:c.inbox??0,drafts:c.drafts??0,sent:c.sent??0,archive:c.archive??0,snoozed:c.snoozed??0,spam:c.spam??0,trash:c.trash??0,...c},g=ag(f,b.folders);g.additionalSections?.[0]?.items&&(g.additionalSections[0].items=g.additionalSections[0].items.map(a=>({...a,onDelete:async a=>{let b=await M({id:a});b.success?(J.toast.success("Folder deleted"),e()):J.toast.error("Failed to delete folder",{description:b.error||"Unknown error"})}}))),d(g)}else console.error("❌ Failed to fetch email folder counts:",a.error),d(ag({inbox:0,drafts:0,sent:0,archive:0,snoozed:0,spam:0,trash:0},b.folders))}catch(a){console.error("Failed to fetch email folder data:",a)}},[]);(0,v.useEffect)(()=>{e();let a=setInterval(e,3e4),b=()=>{e()};window.addEventListener("folder-created",b);let c=()=>{setTimeout(()=>e(),1e3)};window.addEventListener("email-read",c),window.addEventListener("email-unread",c);let d=()=>{e()};return window.addEventListener("email-archived",d),window.addEventListener("email-starred-toggled",d),window.addEventListener("email-spam-toggled",d),window.addEventListener("email-snoozed",d),()=>{clearInterval(a),window.removeEventListener("folder-created",b),window.removeEventListener("email-read",c),window.removeEventListener("email-unread",c),window.removeEventListener("email-archived",d),window.removeEventListener("email-starred-toggled",d),window.removeEventListener("email-spam-toggled",d),window.removeEventListener("email-snoozed",d)}},[e]);let[f,g]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{let a=a=>{a.detail?.type==="email"&&g(!0)};return window.addEventListener("open-recipient-selector",a),()=>{window.removeEventListener("open-recipient-selector",a)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{config:c,...a}),(0,b.jsx)(_,{open:f,onOpenChange:g,recipientType:"email"})]})}ag();var ai=a.i(989630);let aj={navGroups:[{label:"Channels",items:[{title:"General",url:"/dashboard/communication/teams?channel=general",icon:ai.Hash},{title:"Sales",url:"/dashboard/communication/teams?channel=sales",icon:ai.Hash},{title:"Support",url:"/dashboard/communication/teams?channel=support",icon:ai.Hash},{title:"Technicians",url:"/dashboard/communication/teams?channel=technicians",icon:ai.Hash},{title:"Management",url:"/dashboard/communication/teams?channel=management",icon:ai.Hash}]}],primaryAction:{label:"New channel",icon:f.Plus,onClick:()=>{}}};function ak(a){return(0,b.jsx)(y,{config:aj,...a})}var al=a.i(459050);function am(a){return{navGroups:[{label:"Core",items:[{title:"Inbox",url:"/dashboard/communication/sms?folder=inbox",icon:l.MessageSquare,badge:a?.inbox??0},{title:"Sent",url:"/dashboard/communication/sms?folder=sent",icon:F.Send,badge:a?.sent??0},{title:"Archive",url:"/dashboard/communication/sms?folder=archive",icon:z.Archive,badge:a?.archive??0}]},{label:"Groups",items:[{title:"All Groups",url:"/dashboard/communication/sms?folder=groups",icon:m.Users}]}],primaryAction:{label:"New text",icon:f.Plus,onClick:()=>{}},additionalSections:[{label:"Folders",items:[],scrollable:!0,scrollHeight:"h-[200px]",defaultOpen:!0}]}}function an(a){let[c,d]=(0,v.useState)(()=>am({})),e=(0,v.useCallback)(async()=>{try{let a=await (0,al.getSmsFolderCountsAction)();a.success&&a.counts?d(am(a.counts)):console.error("❌ Failed to fetch SMS folder counts:",a.error)}catch(a){console.error("Failed to fetch SMS folder data:",a)}},[]);(0,v.useEffect)(()=>{e();let a=setInterval(e,3e4),b=()=>{e()};return window.addEventListener("sms-read",b),()=>{clearInterval(a),window.removeEventListener("sms-read",b)}},[e]);let[f,g]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{let a=a=>{a.detail?.type==="sms"&&g(!0)};return window.addEventListener("open-recipient-selector",a),()=>{window.removeEventListener("open-recipient-selector",a)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{config:c,...a}),(0,b.jsx)(_,{open:f,onOpenChange:g,recipientType:"sms"})]})}function ao({open:a,onOpenChange:c}){let e=(0,d.useRouter)();return(0,b.jsx)(Y.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(Y.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(Y.DialogHeader,{children:[(0,b.jsx)(Y.DialogTitle,{children:"New Message"}),(0,b.jsx)(Y.DialogDescription,{children:"Choose the type of message you want to send."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{c(!1),e.push("/dashboard/communication/email?compose=true")},className:"group flex flex-col items-center gap-3 rounded-lg border border-border bg-card p-6 transition-all hover:border-primary hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 group-hover:bg-primary/20",children:(0,b.jsx)(k.Mail,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Email"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Send an email message"})]})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{c(!1),window.dispatchEvent(new CustomEvent("open-recipient-selector",{detail:{type:"sms"}})),e.push("/dashboard/communication/sms")},className:"group flex flex-col items-center gap-3 rounded-lg border border-border bg-card p-6 transition-all hover:border-primary hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-500/10 group-hover:bg-green-500/20",children:(0,b.jsx)(l.MessageSquare,{className:"h-6 w-6 text-green-500"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Text Message"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Send an SMS/MMS"})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(n.Button,{variant:"ghost",onClick:()=>c(!1),children:"Cancel"})})]})})}var ap=a.i(268344);function aq(a,b){return{navGroups:[{label:"ALL COMMUNICATIONS",items:[{title:"All Messages",url:"/dashboard/communication",icon:D.Inbox,badge:a?.all??0},{title:"Starred",url:"/dashboard/communication?folder=starred",icon:G.Star,badge:a?.starred??0},{title:"Sent",url:"/dashboard/communication?folder=sent",icon:F.Send,badge:a?.sent??0},{title:"Archive",url:"/dashboard/communication?folder=archive",icon:z.Archive,badge:a?.archive??0}]},{label:"BY TYPE",items:[{title:"Emails",url:"/dashboard/communication?type=email",icon:k.Mail,badge:a?.email??0},{title:"Text Messages",url:"/dashboard/communication?type=sms",icon:l.MessageSquare,badge:a?.sms??0},{title:"Phone Calls",url:"/dashboard/communication?type=call",icon:R.Phone,badge:a?.call??0},{title:"Voicemails",url:"/dashboard/communication?type=voicemail",icon:ap.Voicemail,badge:a?.voicemail??0}]},{label:"COMPANY INBOX",items:[{title:"Support",url:"/dashboard/communication?category=support",icon:C.HelpCircle,badge:a?.company_support??0},{title:"Sales",url:"/dashboard/communication?category=sales",icon:H.TrendingUp,badge:a?.company_sales??0},{title:"Billing",url:"/dashboard/communication?category=billing",icon:A.CreditCard,badge:a?.company_billing??0},{title:"General",url:"/dashboard/communication?category=general",icon:E.Info,badge:a?.company_general??0}]}],primaryAction:{label:"New message",icon:f.Plus,onClick:()=>{}},additionalSections:[{label:"Quick Access",items:[{title:"My Email",icon:k.Mail,url:"/dashboard/communication/email?inbox=personal&folder=inbox"},{title:"My SMS",icon:l.MessageSquare,url:"/dashboard/communication/sms?folder=inbox"},{title:"Team Chats",icon:m.Users,url:"/dashboard/communication/teams?channel=general"}],scrollable:!1,defaultOpen:!0}]}}function ar(c){let[d,e]=(0,v.useState)(()=>aq()),[f,g]=(0,v.useState)(!1),h=(0,v.useCallback)(async()=>{try{let{getEmailFolderCountsAction:b}=await a.A(667705),{getSmsFolderCountsAction:c}=await a.A(928738),{getCommunicationCountsAction:d}=await a.A(42387),[f,g,h]=await Promise.all([b(),c(),d()]),i=h.counts,j={email:i?.email??0,personal_inbox:f.counts?.personal_inbox??0,personal_sent:f.counts?.personal_sent??0,personal_drafts:f.counts?.personal_drafts??0,company_support:f.counts?.company_support??0,company_sales:f.counts?.company_sales??0,company_billing:f.counts?.company_billing??0,company_general:f.counts?.company_general??0,sms:i?.sms??0,sms_inbox:g.counts?.inbox??0,sms_sent:g.counts?.sent??0,sms_archive:g.counts?.archive??0,inbox:(f.counts?.personal_inbox||0)+(g.counts?.inbox||0),sent:(f.counts?.personal_sent||0)+(g.counts?.sent||0),archive:(f.counts?.personal_archive||0)+(g.counts?.archive||0),starred:f.counts?.personal_starred??0,call:i?.call??0,voicemail:i?.voicemail??0};j.all=i?.all??0,e(aq(j))}catch(a){console.error("Failed to fetch unified communication counts:",a)}},[]);return(0,v.useEffect)(()=>{h();let a=setInterval(h,3e4),b=()=>{setTimeout(h,1e3)};return window.addEventListener("email-read",b),window.addEventListener("email-archived",b),window.addEventListener("sms-read",b),window.addEventListener("communication-updated",b),()=>{clearInterval(a),window.removeEventListener("email-read",b),window.removeEventListener("email-archived",b),window.removeEventListener("sms-read",b),window.removeEventListener("communication-updated",b)}},[h]),(0,v.useEffect)(()=>{let a=()=>{g(!0)};return window.addEventListener("open-unified-compose",a),()=>{window.removeEventListener("open-unified-compose",a)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{config:d,...c}),(0,b.jsx)(ao,{open:f,onOpenChange:g})]})}var as=a.i(699617),as=as,at=a.i(50900),au=(0,L.createServerReference)("4019c922633b8ec9611fbf9a4260f8b6365e540a39",L.callServer,void 0,L.findSourceMapURL,"getChats"),av=(0,L.createServerReference)("4072d8665dd8168ec873c971190c1b50389e0de901",L.callServer,void 0,L.findSourceMapURL,"deleteChat"),aw=a.i(367301),ax=a.i(309515);function ay({open:a,onOpenChange:c}){let[d,e]=(0,v.useState)(""),f=(0,ax.useChatStore)(ax.chatSelectors.chats),{setActiveChat:g}=(0,ax.useChatStore)();(0,v.useEffect)(()=>{a&&e("")},[a]),(0,v.useEffect)(()=>{let b=b=>{(b.metaKey||b.ctrlKey)&&"k"===b.key&&(b.preventDefault(),c(!a))};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a,c]);let h=(0,v.useMemo)(()=>(function(a,b){if(!b.trim())return a.map(a=>({chat:a,matchedSnippet:null,score:a.messages.length>0?new Date(a.messages[a.messages.length-1].timestamp).getTime():new Date(a.createdAt).getTime()})).sort((a,b)=>b.score-a.score);let c=b.toLowerCase().trim(),d=c.split(/\s+/).filter(Boolean),e=[];for(let b of a){let a=0,f=null,g=b.title.toLowerCase();for(let e of(d.every(a=>g.includes(a))&&(a+=g===c?150:100),b.messages)){let b=e.content.toLowerCase();if(d.every(a=>b.includes(a))&&(a+="user"===e.role?20:10,!f)){let a=b.indexOf(d[0]),c=Math.max(0,a-20),g=Math.min(e.content.length,a+60);f=(c>0?"...":"")+e.content.slice(c,g)+(g<e.content.length?"...":"")}}if(a>0){let c=b.messages.length>0?new Date(b.messages[b.messages.length-1].timestamp).getTime():new Date(b.createdAt).getTime();e.push({chat:b,matchedSnippet:f,score:a+Math.min(20,(c-Date.now()+6048e5)/864e5)})}}return e.sort((a,b)=>b.score-a.score)})(f,d),[f,d]),i=(0,v.useCallback)(a=>{g(a),c(!1)},[g,c]);return(0,b.jsxs)(X.CommandDialog,{open:a,onOpenChange:c,children:[(0,b.jsx)(X.CommandInput,{placeholder:"Search chats...",value:d,onValueChange:e,className:"h-9 text-sm"}),(0,b.jsxs)(X.CommandList,{className:"max-h-[320px]",children:[(0,b.jsx)(X.CommandEmpty,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center py-6",children:[(0,b.jsx)(at.Search,{className:"size-5 text-muted-foreground/40 mb-2"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"No chats found"})]})}),h.length>0&&(0,b.jsx)(X.CommandGroup,{children:h.slice(0,15).map(a=>{var c;let e;return(0,b.jsxs)(X.CommandItem,{value:a.chat.id,onSelect:()=>i(a.chat.id),className:"py-2 px-2 cursor-pointer",children:[(0,b.jsx)(l.MessageSquare,{className:"size-3.5 text-muted-foreground/60 mr-2 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-sm truncate",children:a.chat.title}),(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground/60 shrink-0",children:(e=new Date((c=a.chat).messages.length>0?c.messages[c.messages.length-1].timestamp:c.createdAt),(0,aw.formatDistanceToNow)(e,{addSuffix:!1}))})]}),a.matchedSnippet&&d&&(0,b.jsx)("p",{className:"text-[11px] text-muted-foreground/70 truncate mt-0.5",children:a.matchedSnippet})]})]},a.chat.id)})})]}),(0,b.jsxs)("div",{className:"border-t border-border/40 px-2 py-1.5 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground/60",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("kbd",{className:"bg-muted/60 px-1 py-0.5 rounded font-mono",children:"↵"})," ","select"]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("kbd",{className:"bg-muted/60 px-1 py-0.5 rounded font-mono",children:"↑↓"})," ","navigate"]})]}),(0,b.jsxs)("span",{className:"text-[10px] text-muted-foreground/60",children:[(0,b.jsx)("kbd",{className:"bg-muted/60 px-1 py-0.5 rounded font-mono",children:"esc"})," ","close"]})]})]})}a.i(129112);var az=a.i(256003);let aA=null,aB=0,aC=null;async function aD(a,b=!1){let c=Date.now();return!b&&aA&&c-aB<3e4?aA.slice(0,a):aC?aC.then(b=>b.slice(0,a)):aC=(async()=>{try{let b=await au({limit:a});if(b.success&&b.data)return aA=b.data,aB=Date.now(),b.data}catch(a){console.error("[NavChatHistory] Failed to load chats",a)}finally{aC=null}return aA=null,aB=0,[]})()}function aE(){let a=(0,d.useRouter)(),[c,e]=(0,v.useState)(!1),[f,g]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{(async()=>{g((await aD(1)).length>0)})()},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.SidebarGroup,{className:"pb-0",children:(0,b.jsxs)("div",{className:"px-2 space-y-3",children:[(0,b.jsxs)(n.Button,{className:"w-full h-9 font-medium gap-2",variant:"default",onClick:()=>{a.push("/dashboard/ai")},children:[(0,b.jsx)(as.default,{className:"size-4"}),(0,b.jsx)("span",{children:"New Chat"})]}),f&&(0,b.jsxs)(n.Button,{variant:"outline",className:"w-full h-8 gap-2 justify-start text-sm font-normal bg-muted/50 border-transparent hover:bg-muted hover:border-border",onClick:()=>e(!0),children:[(0,b.jsx)(at.Search,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"Search chats..."}),(0,b.jsx)("kbd",{className:"ml-auto hidden sm:inline-flex h-5 items-center gap-1 rounded border bg-background px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:"⌘K"})]})]})}),(0,b.jsx)(ay,{open:c,onOpenChange:e})]})}function aF(){let a=(0,d.useRouter)(),c=(0,d.usePathname)(),[e,f]=(0,v.useState)([]),[h,i]=(0,v.useState)(!0),[j,k]=(0,v.useTransition)(),l=c?.match(/\/dashboard\/ai\/([^/]+)/)?.[1]??null;(0,v.useEffect)(()=>{(async()=>{i(!0),f(await aD(10)),i(!1)})()},[]);let[m,n]=(0,v.useState)(!1);(0,v.useEffect)(()=>{let a=c?.startsWith("/dashboard/ai")??!1;a&&!m&&(async()=>{f(await aD(10,!0))})(),n(a)},[c,m]);let o=(0,v.useCallback)(b=>{a.push(`/dashboard/ai/${b}`)},[a]),p=(0,v.useCallback)(async(b,c)=>{b.preventDefault(),b.stopPropagation(),k(async()=>{(await av(c)).success?(f(a=>{let b=a.filter(a=>a.chatId!==c);return aA=b,aB=Date.now(),b}),J.toast.success("Chat deleted"),l===c&&a.push("/dashboard/ai")):J.toast.error("Failed to delete chat")})},[l,a]);return h?(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"Recent Chats"}),(0,b.jsxs)("div",{className:"space-y-1 px-2",children:[(0,b.jsx)(az.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(az.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(az.Skeleton,{className:"h-8 w-full"})]})]}):0===e.length?null:(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"Recent Chats"}),(0,b.jsx)(r.SidebarMenu,{children:e.map(a=>{let c=l===a.chatId;return(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsx)(r.SidebarMenuButton,{isActive:c,onClick:()=>o(a.chatId),title:a.title,disabled:j,children:(0,b.jsx)("span",{className:"flex-1 truncate text-left",children:a.title})}),(0,b.jsx)(r.SidebarMenuAction,{"aria-label":"Delete chat",onClick:b=>p(b,a.chatId),showOnHover:!0,title:"Delete chat",children:(0,b.jsx)(g.Trash2,{className:"h-3.5 w-3.5"})})]},a.chatId)})})]})}function aG({items:a,pathname:d="/dashboard"}){let f=d||"/dashboard";return(0,b.jsx)(r.SidebarGroup,{children:(0,b.jsx)(r.SidebarMenu,{children:a.map(a=>{let d=f===a.url,g=f.startsWith(`${a.url}/`),h=a.items?.some(a=>f===a.url||f.startsWith(`${a.url}/`)),i=d||g||h;return a.items&&a.items.length>0?(0,b.jsx)(t.Collapsible,{asChild:!0,defaultOpen:!0,open:!0,children:(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsx)(t.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)(r.SidebarMenuButton,{isActive:i&&f===a.url,tooltip:a.title,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title}),(0,b.jsx)(e.ChevronRight,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),(0,b.jsx)(t.CollapsibleContent,{children:(0,b.jsx)(r.SidebarMenuSub,{children:a.items.map(a=>{let d=f===a.url||f.startsWith(`${a.url}/`);return(0,b.jsx)(r.SidebarMenuSubItem,{children:(0,b.jsx)(r.SidebarMenuSubButton,{asChild:!0,isActive:d,children:(0,b.jsx)(c.default,{href:a.url,children:(0,b.jsx)("span",{children:a.title})})})},a.title)})})})]})},a.title):(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,isActive:i,tooltip:a.title,children:(0,b.jsxs)(c.default,{href:a.url,children:[a.icon&&(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:a.title})]})})},a.title)})})})}var aH=a.i(805034),aI=a.i(869662),aJ=a.i(132440);async function aK(){let a=(0,aJ.createClient)();if(!a)return[];let{data:b,error:c}=await a.from("price_book_categories").select("id, name, slug, parent_id, path, level, sort_order, item_count, descendant_item_count").eq("is_active",!0).order("level",{ascending:!0}).order("sort_order",{ascending:!0});return c?[]:b||[]}async function aL(){var a;let b,c;return a=await aK(),b=new Map,a.forEach(a=>{b.set(a.id,{name:a.name,count:a.descendant_item_count,imageUrl:void 0,children:[],parent_id:a.parent_id})}),c=[],b.forEach((a,d)=>{if(null===a.parent_id){let{parent_id:b,...d}=a;c.push(d)}else{let c=b.get(a.parent_id);if(c?.children){let{parent_id:b,...d}=a;c.children.push(d)}}}),c}var aM=a.i(996329),aN=a.i(733695);function aO({node:a,parentPath:c,depth:f=0}){let g=(0,d.useRouter)(),h=(0,aN.usePriceBookStore)(a=>a.navigationPath),i=[...c,a.name],j=h.some((a,b)=>h.slice(0,b+1).join(" > ").startsWith(i.join(" > "))),k=h.length===i.length&&h.every((a,b)=>a===i[b]),l=a.children&&a.children.length>0,m=()=>{let a=(0,aM.buildCategoryUrl)(i);g.push(a)},n=f>0?{paddingLeft:`${1.5*f+.5}rem`}:void 0;return l&&f<5?(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsxs)(t.Collapsible,{className:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90",defaultOpen:j,children:[(0,b.jsx)(t.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)(r.SidebarMenuButton,{className:(0,p.cn)("pr-8",k&&"bg-primary/10 text-primary font-medium"),isActive:k,onClick:m,style:n,tooltip:{children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.count," items"]})]})},children:[(0,b.jsx)(e.ChevronRight,{className:"shrink-0 transition-transform"}),(0,b.jsx)(aI.Folder,{className:"size-4 shrink-0"}),a.name]})}),(0,b.jsx)(r.SidebarMenuBadge,{children:a.count}),(0,b.jsx)(t.CollapsibleContent,{children:(0,b.jsx)(r.SidebarMenuSub,{className:"mx-0 px-0",children:a.children?.map(a=>(0,b.jsx)(aO,{depth:f+1,node:a,parentPath:i},a.name))})})]})}):(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsxs)(r.SidebarMenuButton,{className:(0,p.cn)("pr-8",k&&"bg-primary/10 text-primary font-medium"),isActive:k,onClick:m,style:n,tooltip:{children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.count," items"]})]})},children:[(0,b.jsx)(aI.Folder,{className:"size-4 shrink-0"}),a.name]}),(0,b.jsx)(r.SidebarMenuBadge,{children:a.count})]})}function aP(a){let c=(0,d.useRouter)(),e=0===(0,aN.usePriceBookStore)(a=>a.navigationPath).length,[f,g]=(0,v.useState)([]),[h,i]=(0,v.useState)(!0);return(0,v.useEffect)(()=>{!async function(){try{i(!0);let a=await aL();g(a)}catch(a){}finally{i(!1)}}()},[]),(0,b.jsxs)(r.Sidebar,{collapsible:"offcanvas",variant:"inset",...a,children:[(0,b.jsxs)(r.SidebarContent,{children:[(0,b.jsx)(r.SidebarGroup,{children:(0,b.jsx)(r.SidebarGroupContent,{children:(0,b.jsx)(r.SidebarMenu,{children:(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsxs)(r.SidebarMenuButton,{onClick:()=>{c.push("/dashboard/work")},tooltip:"Return to Work",type:"button",children:[(0,b.jsx)(aH.ArrowLeft,{className:"size-4 shrink-0"}),"Back to Work"]})})})})}),(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"Categories"}),(0,b.jsx)(r.SidebarGroupContent,{children:(0,b.jsxs)(r.SidebarMenu,{children:[(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsxs)(r.SidebarMenuButton,{className:(0,p.cn)(e&&"bg-primary/10 text-primary font-medium"),isActive:e,onClick:()=>{c.push("/dashboard/work/pricebook")},tooltip:"Browse all categories",children:[(0,b.jsx)(aI.Folder,{className:"size-4 shrink-0"}),"All Items"]})}),h?(0,b.jsx)("div",{className:"space-y-2 px-2 py-2",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"bg-muted h-8 animate-pulse rounded"},c))}):f.map(a=>(0,b.jsx)(aO,{depth:0,node:a,parentPath:[]},a.name))]})})]})]}),(0,b.jsx)(r.SidebarRail,{})]})}var aQ=a.i(556253),aR=a.i(274956),aS=a.i(158239),aT=a.i(195700),aT=aT;let aU=[{label:"Quick Access",items:[{title:"Overview",href:"/dashboard/reporting"},{title:"Executive Dashboard",href:"/dashboard/reporting/executive",badge:"Premium"},{title:"Custom Reports Builder",href:"/dashboard/reporting/custom"}]},{label:"AI & Intelligence",items:[{title:"AI Performance Metrics",href:"/dashboard/reporting/ai/performance",badge:"New"},{title:"Conversation Analytics",href:"/dashboard/reporting/ai/conversations"},{title:"Sentiment Analysis",href:"/dashboard/reporting/ai/sentiment"},{title:"AI Response Quality",href:"/dashboard/reporting/ai/quality"},{title:"Training Data Insights",href:"/dashboard/reporting/ai/training"},{title:"AI Cost Analysis",href:"/dashboard/reporting/ai/costs"},{title:"Automation Success Rate",href:"/dashboard/reporting/ai/automation"}]},{label:"Communication Analytics",items:[{title:"Phone Call Reports",href:"/dashboard/reporting/communication/calls",badge:"Popular"},{title:"Call Duration & Volume",href:"/dashboard/reporting/communication/call-metrics"},{title:"Call Recordings",href:"/dashboard/reporting/communication/call-recordings"},{title:"Text Message Analytics",href:"/dashboard/reporting/communication/sms"},{title:"Email Campaigns",href:"/dashboard/reporting/communication/email"},{title:"Email Metrics",href:"/dashboard/reporting/communication/email-metrics"},{title:"Support Tickets",href:"/dashboard/reporting/communication/tickets"},{title:"Response Times",href:"/dashboard/reporting/communication/response-time"},{title:"Customer Satisfaction",href:"/dashboard/reporting/communication/satisfaction"},{title:"Channel Performance",href:"/dashboard/reporting/communication/channels"}]},{label:"Financial Reports",items:[{title:"Profit & Loss",href:"/dashboard/reporting/finance/profit-loss",badge:"Essential"},{title:"Revenue Analysis",href:"/dashboard/reporting/finance/revenue"},{title:"Expense Breakdown",href:"/dashboard/reporting/finance/expenses"},{title:"Cash Flow",href:"/dashboard/reporting/finance/cash-flow"},{title:"Invoice Aging",href:"/dashboard/reporting/finance/invoice-aging"},{title:"Payment Analytics",href:"/dashboard/reporting/finance/payments"},{title:"Tax Reports",href:"/dashboard/reporting/finance/tax"},{title:"Budget vs Actual",href:"/dashboard/reporting/finance/budget"},{title:"Job Profitability",href:"/dashboard/reporting/finance/job-profitability"},{title:"Customer LTV",href:"/dashboard/reporting/finance/ltv"},{title:"Accounts Receivable",href:"/dashboard/reporting/finance/ar"},{title:"Accounts Payable",href:"/dashboard/reporting/finance/ap"}]},{label:"Operations & Jobs",items:[{title:"Job Performance",href:"/dashboard/reporting/operations/jobs",badge:"Popular"},{title:"Service Types",href:"/dashboard/reporting/operations/service-types"},{title:"Completion Rates",href:"/dashboard/reporting/operations/completion"},{title:"Schedule Efficiency",href:"/dashboard/reporting/operations/schedule"},{title:"Dispatch Analytics",href:"/dashboard/reporting/operations/dispatch"},{title:"Route Optimization",href:"/dashboard/reporting/operations/routes"},{title:"Equipment Usage",href:"/dashboard/reporting/operations/equipment"},{title:"Materials Usage",href:"/dashboard/reporting/operations/materials"},{title:"Inventory Turnover",href:"/dashboard/reporting/operations/inventory"},{title:"Warranty Claims",href:"/dashboard/reporting/operations/warranty"}]},{label:"Team Performance",items:[{title:"Technician Leaderboard",href:"/dashboard/reporting/team/leaderboard",badge:"Popular"},{title:"Individual Performance",href:"/dashboard/reporting/team/individual"},{title:"Team Productivity",href:"/dashboard/reporting/team/productivity"},{title:"Revenue Per Tech",href:"/dashboard/reporting/team/revenue"},{title:"Jobs Completed",href:"/dashboard/reporting/team/jobs-completed"},{title:"Customer Ratings",href:"/dashboard/reporting/team/ratings"},{title:"Time Tracking",href:"/dashboard/reporting/team/time-tracking"},{title:"Attendance",href:"/dashboard/reporting/team/attendance"},{title:"Training",href:"/dashboard/reporting/team/training"},{title:"Certifications",href:"/dashboard/reporting/team/certifications"},{title:"Commissions",href:"/dashboard/reporting/team/commission"},{title:"Bonuses",href:"/dashboard/reporting/team/bonus"}]},{label:"Customer Analytics",items:[{title:"Acquisition",href:"/dashboard/reporting/customers/acquisition"},{title:"Retention",href:"/dashboard/reporting/customers/retention"},{title:"Churn Analysis",href:"/dashboard/reporting/customers/churn"},{title:"Segments",href:"/dashboard/reporting/customers/segments"},{title:"Service History",href:"/dashboard/reporting/customers/service-history"},{title:"Repeat Business",href:"/dashboard/reporting/customers/repeat"},{title:"Referrals",href:"/dashboard/reporting/customers/referrals"},{title:"Geography",href:"/dashboard/reporting/customers/geography"},{title:"Demographics",href:"/dashboard/reporting/customers/demographics"}]},{label:"Marketing & Growth",items:[{title:"Campaigns",href:"/dashboard/reporting/marketing/campaigns",badge:"New"},{title:"Lead Generation",href:"/dashboard/reporting/marketing/leads"},{title:"Conversions",href:"/dashboard/reporting/marketing/conversion"},{title:"ROI Analysis",href:"/dashboard/reporting/marketing/roi"},{title:"Website Analytics",href:"/dashboard/reporting/marketing/website"},{title:"Social Media",href:"/dashboard/reporting/marketing/social"},{title:"Reviews",href:"/dashboard/reporting/marketing/reviews"},{title:"Ad Performance",href:"/dashboard/reporting/marketing/ads"},{title:"SEO Rankings",href:"/dashboard/reporting/marketing/seo"}]},{label:"Scheduling & Dispatch",items:[{title:"Utilization",href:"/dashboard/reporting/schedule/utilization"},{title:"First-Time Fix",href:"/dashboard/reporting/schedule/first-time-fix"},{title:"Callbacks",href:"/dashboard/reporting/schedule/callbacks"},{title:"Travel Time",href:"/dashboard/reporting/schedule/travel-time"},{title:"Same-Day Bookings",href:"/dashboard/reporting/schedule/same-day"},{title:"Appointment Types",href:"/dashboard/reporting/schedule/appointment-types"},{title:"No-Shows",href:"/dashboard/reporting/schedule/no-shows"},{title:"Rescheduling",href:"/dashboard/reporting/schedule/rescheduling"}]},{label:"Maintenance & Agreements",items:[{title:"Active Agreements",href:"/dashboard/reporting/maintenance/active"},{title:"Renewals",href:"/dashboard/reporting/maintenance/renewals"},{title:"Revenue",href:"/dashboard/reporting/maintenance/revenue"},{title:"Schedule",href:"/dashboard/reporting/maintenance/schedule"},{title:"Preventive",href:"/dashboard/reporting/maintenance/preventive"},{title:"Profitability",href:"/dashboard/reporting/maintenance/profitability"}]},{label:"Inventory & Materials",items:[{title:"Stock Levels",href:"/dashboard/reporting/inventory/stock"},{title:"Costs",href:"/dashboard/reporting/inventory/costs"},{title:"Reorder Trends",href:"/dashboard/reporting/inventory/reorder"},{title:"Suppliers",href:"/dashboard/reporting/inventory/suppliers"},{title:"Part Usage",href:"/dashboard/reporting/inventory/usage"},{title:"Dead Stock",href:"/dashboard/reporting/inventory/dead-stock"}]},{label:"Compliance & Safety",items:[{title:"Licensing",href:"/dashboard/reporting/compliance/licensing"},{title:"Insurance",href:"/dashboard/reporting/compliance/insurance"},{title:"Certifications",href:"/dashboard/reporting/compliance/certifications"},{title:"Safety Incidents",href:"/dashboard/reporting/compliance/safety"},{title:"OSHA",href:"/dashboard/reporting/compliance/osha"},{title:"Audits",href:"/dashboard/reporting/compliance/audits"}]},{label:"Advanced Analytics",items:[{title:"Predictive Insights",href:"/dashboard/reporting/analytics/predictive",badge:"Premium"},{title:"Trends",href:"/dashboard/reporting/analytics/trends"},{title:"Seasonality",href:"/dashboard/reporting/analytics/seasonality"},{title:"Forecasting",href:"/dashboard/reporting/analytics/forecasting"},{title:"Benchmarks",href:"/dashboard/reporting/analytics/benchmarks"},{title:"What-If Analysis",href:"/dashboard/reporting/analytics/what-if"}]},{label:"Export & Sharing",items:[{title:"Scheduled Reports",href:"/dashboard/reporting/export/scheduled"},{title:"Templates",href:"/dashboard/reporting/export/templates"},{title:"Data Export",href:"/dashboard/reporting/export/data"},{title:"Share",href:"/dashboard/reporting/export/share"},{title:"History",href:"/dashboard/reporting/export/history"}]}];function aV(){let a=(0,d.usePathname)(),c=(0,d.useRouter)(),[f,g]=(0,v.useState)(!1),[h,i]=(0,v.useState)(""),j=aU.map(a=>({...a,items:a.items.filter(a=>a.title.toLowerCase().includes(h.toLowerCase()))})).filter(a=>a.items.length>0);return(0,b.jsxs)(o.DropdownMenu,{onOpenChange:g,open:f,children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,p.cn)("flex w-full items-center justify-between gap-2 rounded-md px-2 py-2","text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none"),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aT.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Browse Preset Reports"})]}),(0,b.jsx)(e.ChevronRight,{className:(0,p.cn)("h-4 w-4 transition-transform",f&&"rotate-90")})]})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"start",className:"w-[320px]",side:"right",children:[(0,b.jsx)("div",{className:"p-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(at.Search,{className:"text-muted-foreground absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2"}),(0,b.jsx)(ac.Input,{className:"h-9 pl-8",onChange:a=>i(a.target.value),placeholder:"Search reports...",value:h})]})}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsx)(u.ScrollArea,{className:"h-[400px]",children:0===j.length?(0,b.jsx)("div",{className:"text-muted-foreground py-6 text-center text-sm",children:"No reports found"}):(0,b.jsx)("div",{className:"flex flex-col gap-2",children:j.map(d=>(0,b.jsxs)("div",{className:"relative flex w-full min-w-0 flex-col p-2",children:[(0,b.jsx)("div",{className:"text-muted-foreground flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium",children:d.label}),(0,b.jsx)("div",{className:"flex flex-col gap-0.5",children:d.items.map(d=>{let e=a===d.href;return(0,b.jsxs)("button",{className:(0,p.cn)("flex items-center gap-2 rounded-md p-2 text-left outline-hidden transition-all","focus-visible:ring-ring focus-visible:ring-2","hover:bg-accent hover:text-accent-foreground","h-[30px] w-full border border-transparent text-[0.8rem] font-medium",e&&"border-accent bg-accent text-accent-foreground font-medium"),onClick:()=>{var a;return a=d.href,void(c.push(a),g(!1),i(""))},type:"button",children:[(0,b.jsx)("span",{className:"flex-1 truncate",children:d.title}),d.badge&&(0,b.jsx)("span",{className:"bg-primary ml-auto flex size-2 rounded-full",title:d.badge})]},d.href)})})]},d.label))})}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)("div",{className:"text-muted-foreground p-2 text-center text-xs",children:[aU.reduce((a,b)=>a+b.items.length,0)," preset reports available"]})]})]})}let aW=[{title:"Profit & Loss",href:"/dashboard/reporting/finance/profit-loss",icon:aR.DollarSign,description:"Essential financial overview"},{title:"Revenue Analysis",href:"/dashboard/reporting/finance/revenue",icon:H.TrendingUp,description:"Track income trends"},{title:"Team Performance",href:"/dashboard/reporting/team/leaderboard",icon:m.Users,description:"Technician rankings"},{title:"Job Performance",href:"/dashboard/reporting/operations/jobs",icon:aQ.BarChart3,description:"Operations metrics"}];function aX(){let a=(0,d.usePathname)(),e=(0,aS.useReportingStore)(aS.reportingSelectors.customReports),{deleteCustomReport:h,setIsCreatingReport:i}=(0,aS.useReportingStore)(),j=()=>{i(!0)};return(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"All Reports"}),(0,b.jsx)(aV,{})]}),(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"Quick Access"}),(0,b.jsx)(r.SidebarMenu,{children:aW.map(d=>{let e=a===d.href;return(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,isActive:e,tooltip:d.description,children:(0,b.jsxs)(c.default,{href:d.href,children:[(0,b.jsx)(d.icon,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"flex-1 truncate",children:d.title})]})})},d.href)})})]}),(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsxs)(r.SidebarGroupLabel,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"My Custom Reports"}),(0,b.jsx)("button",{className:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex h-5 w-5 items-center justify-center rounded-md transition-colors",onClick:j,title:"Create new report",type:"button",children:(0,b.jsx)(f.Plus,{className:"h-3.5 w-3.5"})})]}),(0,b.jsx)(r.SidebarMenu,{children:0===e.length?(0,b.jsxs)("div",{className:"px-2 py-8 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2 text-sm",children:"No custom reports yet"}),(0,b.jsx)("button",{className:"text-primary text-xs hover:underline",onClick:j,type:"button",children:"Create your first report"})]}):e.map(d=>{let e=a===d.href;return(0,b.jsxs)(r.SidebarMenuItem,{children:[(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,isActive:e,children:(0,b.jsx)(c.default,{href:d.href,children:(0,b.jsx)("span",{className:"flex-1 truncate text-left",children:d.title})})}),(0,b.jsx)(r.SidebarMenuAction,{"aria-label":"Delete report",onClick:a=>{var b;return b=d.id,void(a.preventDefault(),a.stopPropagation(),h(b))},showOnHover:!0,title:"Delete report",children:(0,b.jsx)(g.Trash2,{className:"h-3.5 w-3.5"})})]},d.id)})})]}),(0,b.jsx)(r.SidebarGroup,{children:(0,b.jsxs)("div",{className:"border-border bg-muted/30 rounded-lg border p-3",children:[(0,b.jsx)("p",{className:"mb-1 text-xs font-medium",children:"💡 Pro Tip"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs leading-relaxed",children:"Create custom reports with your own filters and metrics. Save time by building reports you check frequently."})]})})]})}var aY=a.i(140596);let aZ={"job-header":{title:"Job Header",description:"Job number, title, status, and priority",minSize:{width:4,height:1},defaultSize:{width:4,height:1},maxSize:{width:4,height:1},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"job-financials":{title:"Financial Summary",description:"Quick overview of job finances",minSize:{width:1,height:1},defaultSize:{width:1,height:1},maxSize:{width:2,height:1},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"job-details":{title:"Job Information",description:"Detailed job information and notes",minSize:{width:1,height:1},defaultSize:{width:2,height:1},maxSize:{width:2,height:1},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"property-details":{title:"Property Details",description:"Basic property information",minSize:{width:1,height:1},defaultSize:{width:1,height:1},maxSize:{width:2,height:1},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"property-enrichment":{title:"Property Intelligence",description:"Enriched property data (ownership, permits, tax info)",minSize:{width:1,height:1},defaultSize:{width:1,height:1},maxSize:{width:2,height:1},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"customer-info":{title:"Customer Information",description:"Customer contact and billing details",minSize:{width:1,height:1},defaultSize:{width:1,height:1},maxSize:{width:2,height:1},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"location-map":{title:"Location Map",description:"Interactive map with property location",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"core",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},invoices:{title:"Invoices",description:"Job invoices and payment history",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},estimates:{title:"Estimates",description:"Job estimates and quotes",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"job-costing":{title:"Job Costing",description:"Detailed cost breakdown by category",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},profitability:{title:"Profitability Analysis",description:"Profit margin and revenue analysis",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"payment-tracker":{title:"Payment Tracker",description:"Visual payment progress and reminders",minSize:{width:1,height:1},defaultSize:{width:1,height:2},maxSize:{width:2,height:3},category:"financial",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},schedule:{title:"Schedule",description:"Job schedule and milestones",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"project",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"team-assignments":{title:"Team Assignments",description:"Assigned technicians and crew",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"project",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"materials-list":{title:"Materials List",description:"Required and used materials",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"project",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"equipment-list":{title:"Equipment List",description:"Equipment and tools needed",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"project",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"purchase-orders":{title:"Purchase Orders",description:"Material and equipment purchase orders",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"project",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},photos:{title:"Photo Gallery",description:"Before, during, and after photos",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"documentation",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},documents:{title:"Documents",description:"Contracts, specs, and files",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"documentation",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},permits:{title:"Permits",description:"Required permits and inspections",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"documentation",industries:["hvac","plumbing","electrical","roofing","general_contractor","remodeling","commercial","custom"]},communications:{title:"Communications",description:"Messages, emails, and notes",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"documentation",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"activity-log":{title:"Activity Log",description:"Timeline of all job activities",minSize:{width:2,height:2},defaultSize:{width:2,height:3},maxSize:{width:4,height:4},category:"documentation",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"hvac-equipment":{title:"HVAC Equipment",description:"Units, tonnage, and specifications",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"industry",industries:["hvac"]},"plumbing-fixtures":{title:"Plumbing Fixtures",description:"Fixtures, piping, and connections",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"industry",industries:["plumbing"]},"electrical-panels":{title:"Electrical Panels",description:"Panels, circuits, and load calculations",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"industry",industries:["electrical"]},"roofing-materials":{title:"Roofing Materials",description:"Shingles, underlayment, and squares",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"industry",industries:["roofing"]},"landscape-zones":{title:"Landscape Zones",description:"Planting zones and irrigation",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"industry",industries:["landscaping"]},"time-tracking":{title:"Time Tracking",description:"Labor hours and time on site",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"analytics",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"labor-hours":{title:"Labor Hours",description:"Detailed labor breakdown by crew",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"analytics",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"material-costs":{title:"Material Costs",description:"Actual vs estimated material costs",minSize:{width:1,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"analytics",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]},"change-orders":{title:"Change Orders",description:"Scope changes and additional work",minSize:{width:2,height:2},defaultSize:{width:2,height:2},maxSize:{width:4,height:3},category:"analytics",industries:["hvac","plumbing","electrical","roofing","landscaping","general_contractor","remodeling","commercial","custom"]}},a$=[{id:"financials",type:"job-financials",title:"Financial Summary",position:{x:0,y:0},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"profitability",type:"profitability",title:"Profitability Analysis",position:{x:1,y:0},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"customer",type:"customer-info",title:"Customer Information",position:{x:0,y:1},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"property-details",type:"property-details",title:"Property Details",position:{x:1,y:1},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"job-details",type:"job-details",title:"Job Information",position:{x:0,y:2},size:{width:2,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"schedule",type:"schedule",title:"Schedule",position:{x:0,y:3},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"team-assignments",type:"team-assignments",title:"Team Assignments",position:{x:1,y:3},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"materials-list",type:"materials-list",title:"Materials List",position:{x:0,y:4},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"permits",type:"permits",title:"Permits",position:{x:1,y:4},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"photos",type:"photos",title:"Photo Gallery",position:{x:0,y:5},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"payment-tracker",type:"payment-tracker",title:"Payment Tracker",position:{x:1,y:5},size:{width:1,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0},{id:"activity-log",type:"activity-log",title:"Activity Log",position:{x:0,y:6},size:{width:2,height:1},isVisible:!0,isCollapsible:!1,isCollapsed:!1,isResizable:!0,isDraggable:!0}],a_=(0,Z.create)()((0,aY.devtools)((0,aY.persist)((a,b)=>({widgets:a$,industry:"general_contractor",version:4,addWidget:b=>{let c=aZ[b],d={id:`${b}-${Date.now()}`,type:b,title:c.title,description:c.description,position:{x:0,y:0},size:c.defaultSize,isVisible:!0,isCollapsible:!0,isCollapsed:!1,isResizable:!0,isDraggable:!0};a(a=>({widgets:[...a.widgets,d]}))},removeWidget:b=>{a(a=>({widgets:a.widgets.filter(a=>a.id!==b)}))},updateWidget:(b,c)=>{a(a=>({widgets:a.widgets.map(a=>a.id===b?{...a,...c}:a)}))},moveWidget:(a,c)=>{b().updateWidget(a,{position:c})},resizeWidget:(a,c)=>{b().updateWidget(a,{size:c})},toggleWidgetVisibility:a=>{let c=b().getWidgetById(a);c&&b().updateWidget(a,{isVisible:!c.isVisible})},toggleWidgetCollapse:a=>{let c=b().getWidgetById(a);c?.isCollapsible&&b().updateWidget(a,{isCollapsed:!c.isCollapsed})},loadPreset:b=>{a({widgets:b.widgets,industry:b.industry})},setIndustry:b=>{a({industry:b})},resetToDefault:()=>{a({widgets:a$,industry:"general_contractor",version:4})},getWidgetById:a=>b().widgets.find(b=>b.id===a),getVisibleWidgets:()=>b().widgets.filter(a=>a.isVisible)}),{name:"job-details-layout-storage-v2",version:4,partialize:a=>({widgets:a.widgets,industry:a.industry,version:a.version}),migrate:(a,b)=>b<4?{widgets:a$,industry:"general_contractor",version:4}:a}),{name:"JobDetailsLayoutStore"}));function a0(){let[a,c]=(0,v.useState)(!1),[d,g]=(0,v.useState)(""),h=a_(a=>a.widgets),i=a_(a=>a.addWidget),j=Object.entries(aZ).filter(([a])=>!h.some(b=>b.type===a)),k=[{label:"Core",items:j.filter(([a,b])=>"core"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))},{label:"Financial",items:j.filter(([a,b])=>"financial"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))},{label:"Project Management",items:j.filter(([a,b])=>"project"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))},{label:"Documentation",items:j.filter(([a,b])=>"documentation"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))},{label:"Analytics",items:j.filter(([a,b])=>"analytics"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))},{label:"Industry-Specific",items:j.filter(([a,b])=>"industry"===b.category).map(([a,b])=>({type:a,title:b.title,description:b.description}))}].filter(a=>a.items.length>0),l=k.map(a=>({...a,items:a.items.filter(a=>a.title.toLowerCase().includes(d.toLowerCase())||a.description.toLowerCase().includes(d.toLowerCase()))})).filter(a=>a.items.length>0),m=k.reduce((a,b)=>a+b.items.length,0);return(0,b.jsxs)(o.DropdownMenu,{onOpenChange:c,open:a,children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,p.cn)("flex w-full items-center justify-between gap-2 rounded-md px-2 py-2","text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none"),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Plus,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Add Widget"})]}),(0,b.jsx)(e.ChevronRight,{className:(0,p.cn)("h-4 w-4 transition-transform",a&&"rotate-90")})]})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"start",className:"w-[320px]",side:"right",children:[(0,b.jsx)("div",{className:"p-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(at.Search,{className:"text-muted-foreground absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2"}),(0,b.jsx)(ac.Input,{className:"h-9 pl-8",onChange:a=>g(a.target.value),placeholder:"Search widgets...",value:d})]})}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsx)(u.ScrollArea,{className:"h-[400px]",children:0===l.length?(0,b.jsx)("div",{className:"text-muted-foreground py-6 text-center text-sm",children:0===m?"All widgets added":"No widgets found"}):(0,b.jsx)("div",{className:"flex flex-col gap-2",children:l.map(a=>(0,b.jsxs)("div",{className:"relative flex w-full min-w-0 flex-col p-2",children:[(0,b.jsx)("div",{className:"text-muted-foreground flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium",children:a.label}),(0,b.jsx)("div",{className:"flex flex-col gap-0.5",children:a.items.map(a=>(0,b.jsxs)("button",{className:(0,p.cn)("flex flex-col gap-1 rounded-md p-2 text-left outline-hidden transition-all","focus-visible:ring-ring focus-visible:ring-2","hover:bg-accent hover:text-accent-foreground","min-h-[44px] w-full border border-transparent"),onClick:()=>{i(a.type),c(!1),g("")},type:"button",children:[(0,b.jsx)("span",{className:"text-[0.8rem] font-medium",children:a.title}),(0,b.jsx)("span",{className:"text-muted-foreground text-[0.7rem] leading-tight",children:a.description})]},a.type))})]},a.label))})}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)("div",{className:"text-muted-foreground p-2 text-center text-xs",children:[m," widget",1!==m?"s":""," available"]})]})]})}var a1=a.i(115807),a1=a1,a2=a.i(420492),a2=a2;function a3(a,b,c,d,e,f,g,h={}){return{id:a,type:b,title:c,position:{x:d,y:e},size:{width:f,height:g},isVisible:!0,isCollapsible:!0,isCollapsed:!1,isResizable:!0,isDraggable:!0,...h}}let a4=[{id:"hvac-preset",name:"HVAC Contractor",description:"Optimized for HVAC installation and repair jobs with equipment tracking",industry:"hvac",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("hvac-equipment","hvac-equipment","HVAC Equipment",0,2,2,2),a3("property-enrichment","property-enrichment","Property Intelligence",2,2,2,2),a3("job-financials","job-financials","Financial Summary",0,4,1,2),a3("job-costing","job-costing","Job Costing",1,4,1,2),a3("job-details","job-details","Job Information",2,4,2,3),a3("photos","photos","Photo Gallery",0,7,2,2),a3("permits","permits","Permits",2,7,1,2),a3("customer-info","customer-info","Customer",3,7,1,2)]},{id:"plumbing-preset",name:"Plumbing Contractor",description:"Optimized for plumbing jobs with fixture and permit tracking",industry:"plumbing",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("plumbing-fixtures","plumbing-fixtures","Plumbing Fixtures",0,2,2,2),a3("property-details","property-details","Property Details",2,2,2,2),a3("permits","permits","Permits & Inspections",0,4,2,2),a3("materials-list","materials-list","Materials",2,4,2,2),a3("job-financials","job-financials","Financials",0,6,2,2),a3("photos","photos","Photos",2,6,2,2)]},{id:"electrical-preset",name:"Electrical Contractor",description:"Optimized for electrical work with panel and circuit tracking",industry:"electrical",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("electrical-panels","electrical-panels","Electrical Panels",0,2,2,2),a3("permits","permits","Permits & Inspections",2,2,2,2),a3("property-details","property-details","Property Details",0,4,2,2),a3("materials-list","materials-list","Materials",2,4,2,2),a3("job-financials","job-financials","Financials",0,6,2,2),a3("photos","photos","Photos",2,6,2,2)]},{id:"roofing-preset",name:"Roofing Contractor",description:"Optimized for roofing jobs with material and weather tracking",industry:"roofing",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("roofing-materials","roofing-materials","Roofing Materials",0,2,2,2),a3("property-enrichment","property-enrichment","Property Intelligence",2,2,2,2),a3("photos","photos","Photo Gallery",0,4,2,3),a3("job-details","job-details","Job Information",2,4,2,3),a3("job-financials","job-financials","Financials",0,7,2,2),a3("permits","permits","Permits",2,7,2,2)]},{id:"landscaping-preset",name:"Landscaping Contractor",description:"Optimized for landscaping projects with zone and material tracking",industry:"landscaping",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("landscape-zones","landscape-zones","Landscape Zones",0,2,2,2),a3("location-map","location-map","Location Map",2,2,2,2),a3("materials-list","materials-list","Materials",0,4,2,2),a3("photos","photos","Photos",2,4,2,2),a3("job-financials","job-financials","Financials",0,6,2,2),a3("job-details","job-details","Job Information",2,6,2,2)]},{id:"general-contractor-preset",name:"General Contractor",description:"Comprehensive layout for general construction projects",industry:"general_contractor",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("job-details","job-details","Job Information",0,2,2,3),a3("property-enrichment","property-enrichment","Property Intelligence",2,2,2,3),a3("job-costing","job-costing","Job Costing",0,5,2,2),a3("profitability","profitability","Profitability",2,5,2,2),a3("schedule","schedule","Schedule",0,7,2,2),a3("team-assignments","team-assignments","Team",2,7,2,2),a3("photos","photos","Photos",0,9,2,2),a3("documents","documents","Documents",2,9,2,2)]},{id:"remodeling-preset",name:"Remodeling Contractor",description:"Optimized for remodeling projects with detailed photo tracking",industry:"remodeling",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("photos","photos","Photo Gallery",0,2,2,3),a3("job-details","job-details","Job Information",2,2,2,3),a3("change-orders","change-orders","Change Orders",0,5,2,2),a3("job-costing","job-costing","Job Costing",2,5,2,2),a3("materials-list","materials-list","Materials",0,7,2,2),a3("permits","permits","Permits",2,7,2,2)]},{id:"commercial-preset",name:"Commercial Construction",description:"Comprehensive layout for large commercial projects",industry:"commercial",widgets:[a3("header","job-header","Job Header",0,0,4,1,{isCollapsible:!1,isResizable:!1,isDraggable:!1}),a3("job-details","job-details","Job Information",0,2,2,3),a3("property-enrichment","property-enrichment","Property Intelligence",2,2,2,3),a3("schedule","schedule","Project Schedule",0,5,2,2),a3("team-assignments","team-assignments","Teams",2,5,2,2),a3("job-costing","job-costing","Job Costing",0,7,2,2),a3("profitability","profitability","Profitability",2,7,2,2),a3("purchase-orders","purchase-orders","Purchase Orders",0,9,2,2),a3("permits","permits","Permits & Inspections",2,9,2,2),a3("photos","photos","Photos",0,11,2,2),a3("documents","documents","Documents",2,11,2,2)]}];function a5(){let[a,c]=(0,v.useState)(!1),d=a_(a=>a.industry),f=a_(a=>a.loadPreset);return(0,b.jsxs)(o.DropdownMenu,{onOpenChange:c,open:a,children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,p.cn)("flex w-full items-center justify-between gap-2 rounded-md px-2 py-2","text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none"),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(a2.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Presets"})]}),(0,b.jsx)(e.ChevronRight,{className:(0,p.cn)("h-4 w-4 transition-transform",a&&"rotate-90")})]})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"start",className:"w-[320px]",side:"right",children:[(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:"Layout Presets"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"Choose a pre-configured layout optimized for your industry"})]}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsx)(u.ScrollArea,{className:"h-[400px]",children:(0,b.jsx)("div",{className:"flex flex-col gap-1 p-2",children:a4.map(a=>(0,b.jsxs)("button",{className:(0,p.cn)("flex flex-col gap-1 rounded-md p-3 text-left outline-hidden transition-all","hover:bg-accent hover:text-accent-foreground","min-h-[44px] w-full border",d===a.industry?"border-primary bg-primary/5":"border-transparent"),onClick:()=>{var b;let d;return b=a.id,void((d=a4.find(a=>a.id===b))&&(f(d),c(!1)))},type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-[0.8rem] font-medium",children:a.name}),d===a.industry?(0,b.jsx)(W.Badge,{className:"h-5 px-1.5 text-[0.65rem]",variant:"default",children:"Current"}):null]}),(0,b.jsx)("span",{className:"text-muted-foreground text-[0.7rem]",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[0.65rem]",children:[(0,b.jsx)(a1.default,{className:"text-muted-foreground h-3 w-3"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a.widgets.length," widgets"]})]})]},a.id))})}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)("div",{className:"text-muted-foreground p-2 text-center text-xs",children:[a4.length," preset",1!==a4.length?"s":""," ","available"]})]})]})}var a6=a.i(89626),a7=a.i(686945),a8=a.i(319895),a9=a.i(273819),ba=a.i(949747),bb=a.i(817889),bc=a.i(362841);let bd={"job-financials":a7.CircleDollarSign,"customer-info":m.Users,"job-details":a8.FileText,"property-enrichment":P.Building2,"property-details":P.Building2,photos:a9.Image,invoices:a7.CircleDollarSign,estimates:a8.FileText,"job-costing":bb.PieChart,profitability:bb.PieChart,communications:l.MessageSquare,documents:a8.FileText,schedule:a6.Activity,"time-tracking":a6.Activity,"team-assignments":m.Users,"materials-list":ba.Package,"equipment-list":bc.Wrench,"activity-log":a6.Activity,"location-map":P.Building2,"purchase-orders":ba.Package,"hvac-equipment":bc.Wrench,"job-header":a8.FileText,"payment-tracker":a7.CircleDollarSign,permits:a8.FileText,"plumbing-fixtures":bc.Wrench,"electrical-panels":bc.Wrench,"roofing-materials":ba.Package,"landscape-zones":P.Building2,"labor-hours":a6.Activity,"material-costs":ba.Package,"change-orders":a8.FileText};function be(){let a=function(){let[a,b]=(0,v.useState)(!1);(0,v.useEffect)(()=>{b(!0)},[]);let c=a_(a=>a.widgets),d=(0,v.useMemo)(()=>a?c.filter(a=>a.isVisible):[],[c,a]);return(0,v.useMemo)(()=>{let a={core:"Overview",financial:"Financials",project:"Project Management",documentation:"Documentation",analytics:"Analytics",industry:"Industry-Specific"},b={};for(let a of d){let c=aZ[a.type],d=c?.category||"core";b[d]||(b[d]=[]),b[d].push(a)}let c=[];for(let[d,e]of Object.entries(b))0!==e.length&&c.push({label:a[d]||d,items:e.map(a=>({title:a.title,url:`#widget-${a.id}`,icon:bd[a.type]||a8.FileText}))});return c},[d])}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.SidebarGroup,{children:(0,b.jsx)(r.SidebarMenu,{children:(0,b.jsx)(r.SidebarMenuItem,{children:(0,b.jsx)(r.SidebarMenuButton,{asChild:!0,children:(0,b.jsxs)(c.default,{href:"/dashboard/work",children:[(0,b.jsx)(aH.ArrowLeft,{}),(0,b.jsx)("span",{children:"Back to Jobs"})]})})})})}),(0,b.jsxs)(r.SidebarGroup,{children:[(0,b.jsx)(r.SidebarGroupLabel,{children:"Layout"}),(0,b.jsx)(a0,{}),(0,b.jsx)(a5,{})]}),(0,b.jsx)(s,{groups:a})]})}var bf=a.i(226559);let bg=(0,bf.default)(()=>a.A(745266).then(a=>a.Home),{loadableGenerated:{modules:[77157]}}),bh=(0,bf.default)(()=>a.A(745266).then(a=>a.Settings),{loadableGenerated:{modules:[77157]}}),bi=(0,bf.default)(()=>a.A(745266).then(a=>a.Users),{loadableGenerated:{modules:[77157]}}),bj=(0,bf.default)(()=>a.A(745266).then(a=>a.User),{loadableGenerated:{modules:[77157]}}),bk=(0,bf.default)(()=>a.A(745266).then(a=>a.UserPlus),{loadableGenerated:{modules:[77157]}}),bl=(0,bf.default)(()=>a.A(745266).then(a=>a.Mail),{loadableGenerated:{modules:[77157]}}),bm=(0,bf.default)(()=>a.A(745266).then(a=>a.MailOpen),{loadableGenerated:{modules:[77157]}}),bn=(0,bf.default)(()=>a.A(745266).then(a=>a.Phone),{loadableGenerated:{modules:[77157]}}),bo=(0,bf.default)(()=>a.A(745266).then(a=>a.MessageSquare),{loadableGenerated:{modules:[77157]}}),bp=(0,bf.default)(()=>a.A(745266).then(a=>a.Calendar),{loadableGenerated:{modules:[77157]}}),bq=(0,bf.default)(()=>a.A(745266).then(a=>a.ClipboardList),{loadableGenerated:{modules:[77157]}}),br=(0,bf.default)(()=>a.A(745266).then(a=>a.FileText),{loadableGenerated:{modules:[77157]}}),bs=(0,bf.default)(()=>a.A(745266).then(a=>a.FileSignature),{loadableGenerated:{modules:[77157]}}),bt=(0,bf.default)(()=>a.A(745266).then(a=>a.FileSpreadsheet),{loadableGenerated:{modules:[77157]}}),bu=(0,bf.default)(()=>a.A(745266).then(a=>a.FileEdit),{loadableGenerated:{modules:[77157]}}),bv=(0,bf.default)(()=>a.A(745266).then(a=>a.Receipt),{loadableGenerated:{modules:[77157]}});(0,bf.default)(()=>a.A(745266).then(a=>a.Inbox),{loadableGenerated:{modules:[77157]}});let bw=(0,bf.default)(()=>a.A(745266).then(a=>a.Archive),{loadableGenerated:{modules:[77157]}}),bx=(0,bf.default)(()=>a.A(745266).then(a=>a.Trash),{loadableGenerated:{modules:[77157]}}),by=(0,bf.default)(()=>a.A(745266).then(a=>a.Star),{loadableGenerated:{modules:[77157]}}),bz=(0,bf.default)(()=>a.A(745266).then(a=>a.Hash),{loadableGenerated:{modules:[77157]}}),bA=(0,bf.default)(()=>a.A(745266).then(a=>a.Ticket),{loadableGenerated:{modules:[77157]}}),bB=(0,bf.default)(()=>a.A(745266).then(a=>a.Wrench),{loadableGenerated:{modules:[77157]}}),bC=(0,bf.default)(()=>a.A(745266).then(a=>a.ShieldCheck),{loadableGenerated:{modules:[77157]}}),bD=(0,bf.default)(()=>a.A(745266).then(a=>a.ShieldAlert),{loadableGenerated:{modules:[77157]}}),bE=(0,bf.default)(()=>a.A(745266).then(a=>a.Shield),{loadableGenerated:{modules:[77157]}}),bF=(0,bf.default)(()=>a.A(745266).then(a=>a.BookOpen),{loadableGenerated:{modules:[77157]}}),bG=(0,bf.default)(()=>a.A(745266).then(a=>a.Book),{loadableGenerated:{modules:[77157]}}),bH=(0,bf.default)(()=>a.A(745266).then(a=>a.Box),{loadableGenerated:{modules:[77157]}}),bI=(0,bf.default)(()=>a.A(745266).then(a=>a.Package),{loadableGenerated:{modules:[77157]}}),bJ=(0,bf.default)(()=>a.A(745266).then(a=>a.DollarSign),{loadableGenerated:{modules:[77157]}}),bK=(0,bf.default)(()=>a.A(745266).then(a=>a.CreditCard),{loadableGenerated:{modules:[77157]}}),bL=(0,bf.default)(()=>a.A(745266).then(a=>a.TrendingUp),{loadableGenerated:{modules:[77157]}}),bM=(0,bf.default)(()=>a.A(745266).then(a=>a.BarChart),{loadableGenerated:{modules:[77157]}}),bN=(0,bf.default)(()=>a.A(745266).then(a=>a.Target),{loadableGenerated:{modules:[77157]}}),bO=(0,bf.default)(()=>a.A(745266).then(a=>a.Trophy),{loadableGenerated:{modules:[77157]}}),bP=(0,bf.default)(()=>a.A(745266).then(a=>a.BadgeCheck),{loadableGenerated:{modules:[77157]}}),bQ=(0,bf.default)(()=>a.A(745266).then(a=>a.Sparkles),{loadableGenerated:{modules:[77157]}}),bR=(0,bf.default)(()=>a.A(745266).then(a=>a.Zap),{loadableGenerated:{modules:[77157]}}),bS=(0,bf.default)(()=>a.A(745266).then(a=>a.Globe),{loadableGenerated:{modules:[77157]}}),bT=(0,bf.default)(()=>a.A(745266).then(a=>a.MapPin),{loadableGenerated:{modules:[77157]}}),bU=(0,bf.default)(()=>a.A(745266).then(a=>a.Building2),{loadableGenerated:{modules:[77157]}}),bV=(0,bf.default)(()=>a.A(745266).then(a=>a.Briefcase),{loadableGenerated:{modules:[77157]}}),bW=(0,bf.default)(()=>a.A(745266).then(a=>a.Calculator),{loadableGenerated:{modules:[77157]}}),bX=(0,bf.default)(()=>a.A(745266).then(a=>a.Clock),{loadableGenerated:{modules:[77157]}}),bY=(0,bf.default)(()=>a.A(745266).then(a=>a.Camera),{loadableGenerated:{modules:[77157]}}),bZ=(0,bf.default)(()=>a.A(745266).then(a=>a.QrCode),{loadableGenerated:{modules:[77157]}}),b$=(0,bf.default)(()=>a.A(745266).then(a=>a.Search),{loadableGenerated:{modules:[77157]}}),b_=(0,bf.default)(()=>a.A(745266).then(a=>a.Tag),{loadableGenerated:{modules:[77157]}}),b0=(0,bf.default)(()=>a.A(745266).then(a=>a.List),{loadableGenerated:{modules:[77157]}}),b1=(0,bf.default)(()=>a.A(745266).then(a=>a.CheckCircle2),{loadableGenerated:{modules:[77157]}}),b2=(0,bf.default)(()=>a.A(745266).then(a=>a.ArrowLeft),{loadableGenerated:{modules:[77157]}}),b3=(0,bf.default)(()=>a.A(745266).then(a=>a.ArrowUpFromLine),{loadableGenerated:{modules:[77157]}}),b4=(0,bf.default)(()=>a.A(745266).then(a=>a.ArrowDownToLine),{loadableGenerated:{modules:[77157]}}),b5=(0,bf.default)(()=>a.A(745266).then(a=>a.Megaphone),{loadableGenerated:{modules:[77157]}}),b6=(0,bf.default)(()=>a.A(745266).then(a=>a.Palette),{loadableGenerated:{modules:[77157]}}),b7=(0,bf.default)(()=>a.A(745266).then(a=>a.Paperclip),{loadableGenerated:{modules:[77157]}}),b8=(0,bf.default)(()=>a.A(745266).then(a=>a.ShoppingCart),{loadableGenerated:{modules:[77157]}}),b9=(0,bf.default)(()=>a.A(745266).then(a=>a.GraduationCap),{loadableGenerated:{modules:[77157]}});(0,bf.default)(()=>a.A(745266).then(a=>a.Bug),{loadableGenerated:{modules:[77157]}});let ca=(0,bf.default)(()=>a.A(745266).then(a=>a.X),{loadableGenerated:{modules:[77157]}}),cb=(0,bf.default)(()=>a.A(745266).then(a=>a.Bell),{loadableGenerated:{modules:[77157]}}),cc=(0,bf.default)(()=>a.A(745266).then(a=>a.Sliders),{loadableGenerated:{modules:[77157]}}),cd=(0,bf.default)(()=>a.A(745266).then(a=>a.UserCog),{loadableGenerated:{modules:[77157]}}),ce=(0,bf.default)(()=>a.A(745266).then(a=>a.Repeat),{loadableGenerated:{modules:[77157]}}),cf=(0,bf.default)(()=>a.A(745266).then(a=>a.Wallet),{loadableGenerated:{modules:[77157]}}),cg=(0,bf.default)(()=>a.A(745266).then(a=>a.Workflow),{loadableGenerated:{modules:[77157]}}),ch=(0,bf.default)(()=>a.A(745266).then(a=>a.Database),{loadableGenerated:{modules:[77157]}});(0,bf.default)(()=>a.A(745266).then(a=>a.Lock),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.KeyRound),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.Heart),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.Gift),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.Folder),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.Store),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.PiggyBank),{loadableGenerated:{modules:[77157]}}),(0,bf.default)(()=>a.A(745266).then(a=>a.Landmark),{loadableGenerated:{modules:[77157]}});let ci={today:[{title:"Today",url:"/dashboard",icon:bg}],communication:[{label:"Company Communications",items:[{title:"All Communications",url:"/dashboard/communication",icon:bU,badge:"new",description:"Company-wide communications hub"}]},{label:"My Inbox",items:[{title:"My Email",url:"/dashboard/communication/email?folder=inbox",icon:bl,description:"Personal email inbox"},{title:"My SMS",url:"/dashboard/communication/sms",icon:bo,description:"Personal text messages"},{title:"My Calls",url:"/dashboard/communication/calls",icon:bn,description:"Personal call history"}]},{label:"Team Collaboration",items:[{title:"Teams",url:"/dashboard/communication/teams?channel=general",icon:bi,description:"Team channels and discussions"}]},{label:"Analytics",items:[{title:"Statistics",url:"/dashboard/communication/stats",icon:bM,description:"Communication metrics and reports"}]}],work:[{label:"Work Management",items:[{title:"Jobs",url:"/dashboard/work",icon:bq},{title:"Appointments",url:"/dashboard/work/appointments",icon:bp},{title:"Team Members",url:"/dashboard/work/team",icon:bk},{title:"Customers",url:"/dashboard/customers",icon:bi}]},{label:"Financial Documents",items:[{title:"Invoices",url:"/dashboard/work/invoices",icon:br},{title:"Estimates",url:"/dashboard/work/estimates",icon:br},{title:"Payments",url:"/dashboard/work/payments",icon:bK},{title:"Contracts",url:"/dashboard/work/contracts",icon:bs},{title:"Purchase Orders",url:"/dashboard/work/purchase-orders",icon:bv}]},{label:"Service Management",items:[{title:"Maintenance Plans",url:"/dashboard/work/maintenance-plans",icon:bB},{title:"Service Agreements",url:"/dashboard/work/service-agreements",icon:bC}]},{label:"Company Resources",items:[{title:"Price Book",url:"/dashboard/work/pricebook",icon:bF},{title:"Vendors",url:"/dashboard/work/vendors",icon:bU},{title:"Materials Inventory",url:"/dashboard/work/materials",icon:bH},{title:"Equipment & Fleet",url:"/dashboard/work/equipment",icon:bI}]}],finance:[{label:"Overview",items:[{title:"Banking",url:"/dashboard/finance",icon:bU},{title:"Cash Flow",url:"/dashboard/finance/cash-flow",icon:bL},{title:"Payments",url:"/dashboard/finance/payments",icon:bK},{title:"Reports",url:"/dashboard/finance/reports",icon:br,badge:"Soon"}]},{label:"Expenses",items:[{title:"Expenses",url:"/dashboard/finance/expenses",icon:bv,badge:"Soon"},{title:"Debit Cards",url:"/dashboard/finance/debit-cards",icon:bK},{title:"Credit Cards",url:"/dashboard/finance/credit-cards",icon:bK}]},{label:"Bookkeeping",items:[{title:"Bookkeeping",url:"/dashboard/finance/bookkeeping",icon:bG,badge:"Soon"},{title:"Bank Reconciliation",url:"/dashboard/finance/bank-reconciliation",icon:b1,badge:"Soon"},{title:"Journal Entries",url:"/dashboard/finance/journal-entries",icon:bu,badge:"Soon"}]},{label:"Accounting",items:[{title:"Accounting",url:"/dashboard/finance/accounting",icon:bW,badge:"Soon"},{title:"Chart of Accounts",url:"/dashboard/finance/chart-of-accounts",icon:b0,badge:"Soon"},{title:"General Ledger",url:"/dashboard/finance/general-ledger",icon:bF,badge:"Soon"},{title:"Accounts Receivable",url:"/dashboard/finance/accounts-receivable",icon:b4,badge:"Soon"},{title:"Accounts Payable",url:"/dashboard/finance/accounts-payable",icon:b3,badge:"Soon"},{title:"QuickBooks",url:"/dashboard/finance/quickbooks",icon:bU,badge:"Soon"}]},{label:"Payroll & Taxes",items:[{title:"Payroll",url:"/dashboard/finance/payroll",icon:bi,badge:"Soon"},{title:"Taxes",url:"/dashboard/finance/tax",icon:br,badge:"Soon"}]},{label:"Financing",items:[{title:"Business Financing",url:"/dashboard/finance/business-financing",icon:bU,badge:"Soon"},{title:"Consumer Financing",url:"/dashboard/finance/consumer-financing",icon:bi,badge:"Soon"}]},{label:"Planning",items:[{title:"Budget",url:"/dashboard/finance/budget",icon:bN,badge:"Soon"}]}],reporting:[{label:"Sections",items:[{title:"Overview",url:"/dashboard/reporting",icon:bM,badge:"Soon"},{title:"Executive Dashboard",url:"/dashboard/reporting/executive",icon:bL,badge:"Soon"},{title:"AI Insights",url:"/dashboard/reporting/ai",icon:bQ,badge:"Soon"},{title:"Communication",url:"/dashboard/reporting/communication",icon:bo,badge:"Soon"},{title:"Finance",url:"/dashboard/reporting/finance",icon:bJ,badge:"Soon"},{title:"Operations",url:"/dashboard/reporting/operations",icon:bB,badge:"Soon"},{title:"Team Performance",url:"/dashboard/reporting/team",icon:bi,badge:"Soon"},{title:"Custom Reports",url:"/dashboard/reporting/custom",icon:bu,badge:"Soon"}]},{label:"AI & Intelligence",items:[{title:"AI Performance Metrics",url:"/dashboard/reporting/ai/performance",icon:bQ},{title:"Conversation Analytics",url:"/dashboard/reporting/ai/conversations",icon:bo},{title:"Sentiment Analysis",url:"/dashboard/reporting/ai/sentiment",icon:bN},{title:"AI Response Quality",url:"/dashboard/reporting/ai/quality",icon:bP},{title:"Training Data Insights",url:"/dashboard/reporting/ai/training",icon:bF},{title:"AI Cost Analysis",url:"/dashboard/reporting/ai/costs",icon:bJ},{title:"Automation Success Rate",url:"/dashboard/reporting/ai/automation",icon:bR}]},{label:"Communication Analytics",items:[{title:"Phone Call Reports",url:"/dashboard/reporting/communication/calls",icon:bn},{title:"Call Duration & Volume",url:"/dashboard/reporting/communication/call-metrics",icon:bM},{title:"Call Recordings",url:"/dashboard/reporting/communication/call-recordings",icon:bw},{title:"Text Message Analytics",url:"/dashboard/reporting/communication/sms",icon:bo},{title:"Email Campaigns",url:"/dashboard/reporting/communication/email",icon:bl},{title:"Email Open & Click Rates",url:"/dashboard/reporting/communication/email-metrics",icon:bM},{title:"Support Ticket Analysis",url:"/dashboard/reporting/communication/tickets",icon:bA},{title:"Response Time Metrics",url:"/dashboard/reporting/communication/response-time",icon:bX},{title:"Customer Satisfaction",url:"/dashboard/reporting/communication/satisfaction",icon:by},{title:"Channel Performance",url:"/dashboard/reporting/communication/channels",icon:bL}]},{label:"Financial Reports",items:[{title:"Profit & Loss",url:"/dashboard/reporting/finance/profit-loss",icon:bJ},{title:"Revenue Analysis",url:"/dashboard/reporting/finance/revenue",icon:bL},{title:"Expense Breakdown",url:"/dashboard/reporting/finance/expenses",icon:bv},{title:"Cash Flow Reports",url:"/dashboard/reporting/finance/cash-flow",icon:b3},{title:"Invoice Aging",url:"/dashboard/reporting/finance/invoice-aging",icon:br},{title:"Payment Analytics",url:"/dashboard/reporting/finance/payments",icon:bK},{title:"Tax Reports",url:"/dashboard/reporting/finance/tax",icon:bt},{title:"Budget vs Actual",url:"/dashboard/reporting/finance/budget",icon:bN},{title:"Job Profitability",url:"/dashboard/reporting/finance/job-profitability",icon:bM},{title:"Customer Lifetime Value",url:"/dashboard/reporting/finance/ltv",icon:bi},{title:"Accounts Receivable",url:"/dashboard/reporting/finance/ar",icon:b4},{title:"Accounts Payable",url:"/dashboard/reporting/finance/ap",icon:b3}]},{label:"Operations & Jobs",items:[{title:"Job Performance",url:"/dashboard/reporting/operations/jobs",icon:bq},{title:"Service Type Analysis",url:"/dashboard/reporting/operations/service-types",icon:bB},{title:"Completion Rates",url:"/dashboard/reporting/operations/completion",icon:b1},{title:"Schedule Efficiency",url:"/dashboard/reporting/operations/schedule",icon:bp},{title:"Dispatch Analytics",url:"/dashboard/reporting/operations/dispatch",icon:bT},{title:"Route Optimization",url:"/dashboard/reporting/operations/routes",icon:bT},{title:"Equipment Utilization",url:"/dashboard/reporting/operations/equipment",icon:bH},{title:"Materials Usage",url:"/dashboard/reporting/operations/materials",icon:bI},{title:"Inventory Turnover",url:"/dashboard/reporting/operations/inventory",icon:bw},{title:"Warranty Claims",url:"/dashboard/reporting/operations/warranty",icon:bC}]},{label:"Team Performance",items:[{title:"Technician Leaderboard",url:"/dashboard/reporting/team/leaderboard",icon:bO},{title:"Individual Performance",url:"/dashboard/reporting/team/individual",icon:bj},{title:"Team Productivity",url:"/dashboard/reporting/team/productivity",icon:bL},{title:"Revenue Per Technician",url:"/dashboard/reporting/team/revenue",icon:bJ},{title:"Jobs Completed",url:"/dashboard/reporting/team/jobs-completed",icon:b1},{title:"Customer Ratings",url:"/dashboard/reporting/team/ratings",icon:by},{title:"Time Tracking",url:"/dashboard/reporting/team/time-tracking",icon:bX},{title:"Attendance & Availability",url:"/dashboard/reporting/team/attendance",icon:bp},{title:"Training Completion",url:"/dashboard/reporting/team/training",icon:b9},{title:"Certifications",url:"/dashboard/reporting/team/certifications",icon:bP},{title:"Commission Reports",url:"/dashboard/reporting/team/commission",icon:bJ},{title:"Bonus Tracking",url:"/dashboard/reporting/team/bonus",icon:by}]},{label:"Customer Analytics",items:[{title:"Customer Acquisition",url:"/dashboard/reporting/customers/acquisition",icon:bi},{title:"Retention Rates",url:"/dashboard/reporting/customers/retention",icon:bL},{title:"Churn Analysis",url:"/dashboard/reporting/customers/churn",icon:b4},{title:"Customer Segments",url:"/dashboard/reporting/customers/segments",icon:b0},{title:"Service History",url:"/dashboard/reporting/customers/service-history",icon:bq},{title:"Repeat Business",url:"/dashboard/reporting/customers/repeat",icon:bL},{title:"Referral Sources",url:"/dashboard/reporting/customers/referrals",icon:bi},{title:"Customer Geography",url:"/dashboard/reporting/customers/geography",icon:bT},{title:"Demographics",url:"/dashboard/reporting/customers/demographics",icon:bM}]},{label:"Marketing & Growth",items:[{title:"Campaign Performance",url:"/dashboard/reporting/marketing/campaigns",icon:b5},{title:"Lead Generation",url:"/dashboard/reporting/marketing/leads",icon:bN},{title:"Lead Conversion",url:"/dashboard/reporting/marketing/conversion",icon:bL},{title:"ROI Analysis",url:"/dashboard/reporting/marketing/roi",icon:bJ},{title:"Website Analytics",url:"/dashboard/reporting/marketing/website",icon:bM},{title:"Social Media Metrics",url:"/dashboard/reporting/marketing/social",icon:bo},{title:"Review Analysis",url:"/dashboard/reporting/marketing/reviews",icon:by},{title:"Ad Performance",url:"/dashboard/reporting/marketing/ads",icon:b5},{title:"SEO Rankings",url:"/dashboard/reporting/marketing/seo",icon:bL}]},{label:"Scheduling & Dispatch",items:[{title:"Schedule Utilization",url:"/dashboard/reporting/schedule/utilization",icon:bp},{title:"First-Time Fix Rate",url:"/dashboard/reporting/schedule/first-time-fix",icon:b1},{title:"Callback Analysis",url:"/dashboard/reporting/schedule/callbacks",icon:bn},{title:"Travel Time Analysis",url:"/dashboard/reporting/schedule/travel-time",icon:bT},{title:"Same-Day Bookings",url:"/dashboard/reporting/schedule/same-day",icon:bp},{title:"Appointment Types",url:"/dashboard/reporting/schedule/appointment-types",icon:bq},{title:"No-Show Rate",url:"/dashboard/reporting/schedule/no-shows",icon:ca},{title:"Rescheduling Trends",url:"/dashboard/reporting/schedule/rescheduling",icon:bp}]},{label:"Maintenance & Agreements",items:[{title:"Active Agreements",url:"/dashboard/reporting/maintenance/active",icon:br},{title:"Renewal Rates",url:"/dashboard/reporting/maintenance/renewals",icon:bL},{title:"Service Plan Revenue",url:"/dashboard/reporting/maintenance/revenue",icon:bJ},{title:"Maintenance Schedule",url:"/dashboard/reporting/maintenance/schedule",icon:bp},{title:"Preventive Maintenance",url:"/dashboard/reporting/maintenance/preventive",icon:bE},{title:"Agreement Profitability",url:"/dashboard/reporting/maintenance/profitability",icon:bM}]},{label:"Inventory & Materials",items:[{title:"Stock Levels",url:"/dashboard/reporting/inventory/stock",icon:bI},{title:"Material Costs",url:"/dashboard/reporting/inventory/costs",icon:bJ},{title:"Reorder Trends",url:"/dashboard/reporting/inventory/reorder",icon:bL},{title:"Supplier Performance",url:"/dashboard/reporting/inventory/suppliers",icon:bU},{title:"Part Usage",url:"/dashboard/reporting/inventory/usage",icon:bM},{title:"Dead Stock Analysis",url:"/dashboard/reporting/inventory/dead-stock",icon:bx}]},{label:"Compliance & Safety",items:[{title:"Licensing Status",url:"/dashboard/reporting/compliance/licensing",icon:bP},{title:"Insurance Coverage",url:"/dashboard/reporting/compliance/insurance",icon:bE},{title:"Certification Tracking",url:"/dashboard/reporting/compliance/certifications",icon:b9},{title:"Safety Incidents",url:"/dashboard/reporting/compliance/safety",icon:bD},{title:"OSHA Compliance",url:"/dashboard/reporting/compliance/osha",icon:bC},{title:"Audit Reports",url:"/dashboard/reporting/compliance/audits",icon:br}]},{label:"Advanced Analytics",items:[{title:"Predictive Insights",url:"/dashboard/reporting/analytics/predictive",icon:bQ},{title:"Trend Analysis",url:"/dashboard/reporting/analytics/trends",icon:bL},{title:"Seasonality Reports",url:"/dashboard/reporting/analytics/seasonality",icon:bp},{title:"Forecasting",url:"/dashboard/reporting/analytics/forecasting",icon:bM},{title:"Benchmark Comparisons",url:"/dashboard/reporting/analytics/benchmarks",icon:bN},{title:"What-If Analysis",url:"/dashboard/reporting/analytics/what-if",icon:bW}]},{label:"Export & Sharing",items:[{title:"Scheduled Reports",url:"/dashboard/reporting/export/scheduled",icon:bp},{title:"Report Templates",url:"/dashboard/reporting/export/templates",icon:br},{title:"Data Export",url:"/dashboard/reporting/export/data",icon:b4},{title:"Share Reports",url:"/dashboard/reporting/export/share",icon:bi},{title:"Report History",url:"/dashboard/reporting/export/history",icon:bw}]}],marketing:[{label:"Overview",items:[{title:"Marketing Dashboard",url:"/dashboard/marketing",icon:b5},{title:"Campaign Performance",url:"/dashboard/marketing/performance",icon:bL},{title:"Lead Analytics",url:"/dashboard/marketing/analytics",icon:bM}]},{label:"Lead Sources",items:[{title:"All Leads",url:"/dashboard/marketing/leads",icon:bi},{title:"Thumbtack",url:"/dashboard/marketing/leads/thumbtack",icon:bN},{title:"Angi (Angie's List)",url:"/dashboard/marketing/leads/angi",icon:b1},{title:"Google Local Services",url:"/dashboard/marketing/leads/google-local",icon:b$},{title:"Yelp",url:"/dashboard/marketing/leads/yelp",icon:by},{title:"HomeAdvisor",url:"/dashboard/marketing/leads/homeadvisor",icon:bg},{title:"Website Leads",url:"/dashboard/marketing/leads/website",icon:bS}]},{label:"Paid Advertising",items:[{title:"Google Ads",url:"/dashboard/marketing/ads/google",icon:b$,items:[{title:"Campaigns",url:"/dashboard/marketing/ads/google/campaigns"},{title:"Performance Max",url:"/dashboard/marketing/ads/google/performance-max"},{title:"Search Ads",url:"/dashboard/marketing/ads/google/search"},{title:"Local Services Ads",url:"/dashboard/marketing/ads/google/local-services"},{title:"Analytics & Reports",url:"/dashboard/marketing/ads/google/analytics"}]},{title:"Facebook & Instagram Ads",url:"/dashboard/marketing/ads/facebook",icon:bY,items:[{title:"Campaigns",url:"/dashboard/marketing/ads/facebook/campaigns"},{title:"Ad Sets",url:"/dashboard/marketing/ads/facebook/ad-sets"},{title:"Creative Library",url:"/dashboard/marketing/ads/facebook/creative"},{title:"Audience Targeting",url:"/dashboard/marketing/ads/facebook/audiences"},{title:"Performance",url:"/dashboard/marketing/ads/facebook/performance"}]},{title:"Nextdoor Ads",url:"/dashboard/marketing/ads/nextdoor",icon:bT},{title:"Bing Ads",url:"/dashboard/marketing/ads/bing",icon:b$}]},{label:"Organic Marketing",items:[{title:"Google Business Profile",url:"/dashboard/marketing/organic/google-business",icon:b$},{title:"SEO Management",url:"/dashboard/marketing/organic/seo",icon:bL},{title:"Content Marketing",url:"/dashboard/marketing/organic/content",icon:br},{title:"Blog Posts",url:"/dashboard/marketing/organic/blog",icon:bF}]},{label:"Social Media",items:[{title:"Social Hub",url:"/dashboard/marketing/social",icon:bo},{title:"Facebook",url:"/dashboard/marketing/social/facebook",icon:bo},{title:"Instagram",url:"/dashboard/marketing/social/instagram",icon:bY},{title:"LinkedIn",url:"/dashboard/marketing/social/linkedin",icon:bV},{title:"X (Twitter)",url:"/dashboard/marketing/social/twitter",icon:bz},{title:"Post Scheduler",url:"/dashboard/marketing/social/scheduler",icon:bp}]},{label:"Review Management",items:[{title:"All Reviews",url:"/dashboard/marketing/reviews",icon:by},{title:"Google Reviews",url:"/dashboard/marketing/reviews/google",icon:b$},{title:"Yelp Reviews",url:"/dashboard/marketing/reviews/yelp",icon:by},{title:"Facebook Reviews",url:"/dashboard/marketing/reviews/facebook",icon:bo},{title:"Angi Reviews",url:"/dashboard/marketing/reviews/angi",icon:b1},{title:"Thumbtack Reviews",url:"/dashboard/marketing/reviews/thumbtack",icon:bN},{title:"Review Requests",url:"/dashboard/marketing/reviews/requests",icon:bl},{title:"Review Responses",url:"/dashboard/marketing/reviews/responses",icon:bo}]},{label:"Email Marketing",items:[{title:"Email Campaigns",url:"/dashboard/marketing/email/campaigns",icon:bl},{title:"Newsletters",url:"/dashboard/marketing/email/newsletters",icon:bm},{title:"Email Templates",url:"/dashboard/marketing/email/templates",icon:br},{title:"Subscriber Lists",url:"/dashboard/marketing/email/lists",icon:b0},{title:"Automation Workflows",url:"/dashboard/marketing/email/automation",icon:bR}]},{label:"Customer Outreach",items:[{title:"Outreach Dashboard",url:"/dashboard/marketing/outreach",icon:b5},{title:"Seasonal Campaigns",url:"/dashboard/marketing/outreach/seasonal",icon:bp},{title:"Referral Program",url:"/dashboard/marketing/outreach/referrals",icon:bi},{title:"Loyalty Program",url:"/dashboard/marketing/outreach/loyalty",icon:bO},{title:"Promotions & Offers",url:"/dashboard/marketing/outreach/promotions",icon:b_}]},{label:"Lead Management",items:[{title:"Lead Pipeline",url:"/dashboard/marketing/lead-pipeline",icon:bq},{title:"Lead Scoring",url:"/dashboard/marketing/lead-scoring",icon:bN},{title:"Lead Assignment",url:"/dashboard/marketing/lead-assignment",icon:bk},{title:"Lead Nurturing",url:"/dashboard/marketing/lead-nurturing",icon:bL}]},{label:"Marketing Tools",items:[{title:"Landing Pages",url:"/dashboard/marketing/tools/landing-pages",icon:br},{title:"QR Codes",url:"/dashboard/marketing/tools/qr-codes",icon:bZ},{title:"Marketing Materials",url:"/dashboard/marketing/tools/materials",icon:bI},{title:"Brand Assets",url:"/dashboard/marketing/tools/brand-assets",icon:b6}]}],shop:[{label:"Categories",items:[{title:"All Products",url:"/dashboard/shop",icon:b8,badge:"8"},{title:"Payment Hardware",url:"/dashboard/shop?category=hardware",icon:bK,badge:"3"},{title:"Uniforms & Apparel",url:"/dashboard/shop?category=apparel",icon:bj,badge:"1"},{title:"Tools & Equipment",url:"/dashboard/shop?category=tools",icon:bB,badge:"1"},{title:"Office Supplies",url:"/dashboard/shop?category=supplies",icon:b7,badge:"1"},{title:"Marketing Materials",url:"/dashboard/shop?category=marketing",icon:b5,badge:"2"}]}],automation:[{title:"Automation Overview",url:"/dashboard/automation",icon:bR},{title:"Workflows",url:"/dashboard/automation/workflows"},{title:"Rules",url:"/dashboard/automation/rules"},{title:"Templates",url:"/dashboard/automation/templates"}],ai:[{label:void 0,items:[{title:"Automation",url:"/dashboard/ai/automation",icon:bR},{title:"AI Calls",url:"/dashboard/ai/calls",icon:bn},{title:"AI Texts",url:"/dashboard/ai/texts",icon:bo},{title:"Activity Log",url:"/dashboard/ai/activity",icon:bq}]}],settings:[{label:void 0,items:[{title:"Overview",url:"/dashboard/settings",icon:bh}]},{label:"Account",items:[{title:"Personal Info",url:"/dashboard/settings/profile/personal",icon:bj},{title:"Security",url:"/dashboard/settings/profile/security",icon:bE},{title:"Notifications",url:"/dashboard/settings/profile/notifications",icon:cb},{title:"Preferences",url:"/dashboard/settings/profile/preferences",icon:cc}]},{label:"Company",items:[{title:"Company Profile",url:"/dashboard/settings/company",icon:bU},{title:"Billing",url:"/dashboard/settings/billing",icon:bK}]},{label:"Communication",items:[{title:"Communications",url:"/dashboard/settings/communications",icon:bo,items:[{title:"Overview",url:"/dashboard/settings/communications"},{title:"Email",url:"/dashboard/settings/communications/email"},{title:"SMS & Text",url:"/dashboard/settings/communications/sms"},{title:"Phone & Voice",url:"/dashboard/settings/communications/phone"},{title:"Notifications",url:"/dashboard/settings/communications/notifications"},{title:"Templates",url:"/dashboard/settings/communications/templates"}]},{title:"Teams & Channels",url:"/dashboard/settings/teams-channels",icon:bi}]},{label:"Work",items:[{title:"Jobs",url:"/dashboard/settings/jobs",icon:bV},{title:"Customer Intake",url:"/dashboard/settings/customer-intake",icon:bq},{title:"Booking",url:"/dashboard/settings/booking",icon:bp},{title:"Checklists",url:"/dashboard/settings/checklists",icon:b1},{title:"Job Fields",url:"/dashboard/settings/job-fields",icon:b0}]},{label:"Schedule",items:[{title:"Schedule Settings",url:"/dashboard/settings/schedule",icon:bp,items:[{title:"Overview",url:"/dashboard/settings/schedule"},{title:"Calendar Settings",url:"/dashboard/settings/schedule/calendar"},{title:"Availability",url:"/dashboard/settings/schedule/availability"},{title:"Service Areas",url:"/dashboard/settings/schedule/service-areas"},{title:"Dispatch Rules",url:"/dashboard/settings/schedule/dispatch"},{title:"Team Scheduling",url:"/dashboard/settings/schedule/team"}]}]},{label:"Customers",items:[{title:"Customer Settings",url:"/dashboard/settings/customers",icon:cd,items:[{title:"Overview",url:"/dashboard/settings/customers"},{title:"Preferences",url:"/dashboard/settings/customers/preferences"},{title:"Loyalty & Rewards",url:"/dashboard/settings/customers/loyalty"},{title:"Notifications",url:"/dashboard/settings/customers/notifications"},{title:"Privacy & Consent",url:"/dashboard/settings/customers/privacy"},{title:"Custom Fields",url:"/dashboard/settings/customers/custom-fields"}]},{title:"Customer Portal",url:"/dashboard/settings/customer-portal",icon:bS},{title:"Tags",url:"/dashboard/settings/tags",icon:b_}]},{label:"Finances",items:[{title:"Invoices",url:"/dashboard/settings/invoices",icon:bv},{title:"Estimates",url:"/dashboard/settings/estimates",icon:br},{title:"Price Book",url:"/dashboard/settings/pricebook",icon:bF},{title:"Service Plans",url:"/dashboard/settings/service-plans",icon:ce},{title:"Payroll",url:"/dashboard/settings/payroll",icon:bi,items:[{title:"Overview",url:"/dashboard/settings/payroll"},{title:"Commission",url:"/dashboard/settings/payroll/commission"},{title:"Materials",url:"/dashboard/settings/payroll/materials"},{title:"Callbacks",url:"/dashboard/settings/payroll/callbacks"},{title:"Bonuses",url:"/dashboard/settings/payroll/bonuses"},{title:"Overtime",url:"/dashboard/settings/payroll/overtime"},{title:"Deductions",url:"/dashboard/settings/payroll/deductions"},{title:"Schedule",url:"/dashboard/settings/payroll/schedule"}]},{title:"Finance",url:"/dashboard/settings/finance",icon:cf,items:[{title:"Overview",url:"/dashboard/settings/finance"},{title:"Bank Accounts",url:"/dashboard/settings/finance/bank-accounts"},{title:"Virtual Buckets",url:"/dashboard/settings/finance/virtual-buckets"},{title:"Consumer Financing",url:"/dashboard/settings/finance/consumer-financing"},{title:"Business Financing",url:"/dashboard/settings/finance/business-financing"},{title:"Bookkeeping",url:"/dashboard/settings/finance/bookkeeping"},{title:"Accounting",url:"/dashboard/settings/finance/accounting"},{title:"Debit Cards",url:"/dashboard/settings/finance/debit-cards"},{title:"Gas Cards",url:"/dashboard/settings/finance/gas-cards"},{title:"Gift Cards",url:"/dashboard/settings/finance/gift-cards"}]}]},{label:"Reporting",items:[{title:"Reporting Settings",url:"/dashboard/settings/reporting",icon:bM,items:[{title:"Overview",url:"/dashboard/settings/reporting"},{title:"Report Templates",url:"/dashboard/settings/reporting/templates"},{title:"Scheduled Reports",url:"/dashboard/settings/reporting/scheduled"},{title:"Distribution",url:"/dashboard/settings/reporting/distribution"},{title:"Metrics & KPIs",url:"/dashboard/settings/reporting/metrics"},{title:"Dashboards",url:"/dashboard/settings/reporting/dashboards"}]}]},{label:"Marketing",items:[{title:"Marketing Center",url:"/dashboard/settings/marketing",icon:b5},{title:"Lead Sources",url:"/dashboard/settings/lead-sources",icon:bN}]},{label:"Automation",items:[{title:"Automation Settings",url:"/dashboard/settings/automation",icon:cg,items:[{title:"Overview",url:"/dashboard/settings/automation"},{title:"Workflows",url:"/dashboard/settings/automation/workflows"},{title:"Triggers & Actions",url:"/dashboard/settings/automation/triggers"},{title:"AI Automation",url:"/dashboard/settings/automation/ai"},{title:"Conditional Logic",url:"/dashboard/settings/automation/logic"},{title:"Data Filters",url:"/dashboard/settings/automation/filters"}]}]},{label:"System",items:[{title:"Data Import/Export",url:"/dashboard/settings/data-import-export",icon:ch},{title:"Integrations",url:"/dashboard/settings/integrations",icon:bI},{title:"QuickBooks",url:"/dashboard/settings/quickbooks",icon:bF}]}],pricebook:"custom",tools:[{label:"Marketing & Social",items:[{title:"Google Business Profile",url:"/tools/marketing/google-business",icon:b$},{title:"Local Services Ads",url:"/tools/marketing/local-services",icon:bP},{title:"Social Media Setup",url:"/tools/marketing/social-media",icon:b5},{title:"Facebook Business",url:"/tools/marketing/facebook",icon:bo},{title:"Instagram for Business",url:"/tools/marketing/instagram",icon:bY},{title:"X (Twitter) Business",url:"/tools/marketing/twitter",icon:bz},{title:"LinkedIn Company Page",url:"/tools/marketing/linkedin",icon:bi}]},{label:"Business Setup",items:[{title:"Business Registration",url:"/tools/business/registration",icon:bV},{title:"Licensing & Permits",url:"/tools/business/licensing",icon:br},{title:"Insurance Providers",url:"/tools/business/insurance",icon:bE},{title:"Banking & Payroll",url:"/tools/business/banking",icon:bJ},{title:"Legal Resources",url:"/tools/business/legal",icon:bC}]},{label:"Financing & Growth",items:[{title:"Consumer Financing",url:"/tools/financing/consumer",icon:bv},{title:"Business Loans",url:"/tools/financing/business-loans",icon:bJ},{title:"Equipment Financing",url:"/tools/financing/equipment",icon:bB},{title:"Credit Card Processing",url:"/tools/financing/credit-card",icon:bv}]},{label:"Industry Networks",items:[{title:"Nexstar Network",url:"/tools/networks/nexstar",icon:bi},{title:"Service Nation Alliance",url:"/tools/networks/service-nation",icon:bi},{title:"ACCA (HVAC)",url:"/tools/networks/acca",icon:bR},{title:"PHCC (Plumbing)",url:"/tools/networks/phcc",icon:bB},{title:"NECA (Electrical)",url:"/tools/networks/neca",icon:bR}]},{label:"Training & Certification",items:[{title:"Trade Certifications",url:"/tools/training/certifications",icon:bP},{title:"OSHA Training",url:"/tools/training/osha",icon:bC},{title:"EPA Certification",url:"/tools/training/epa",icon:bE},{title:"Business Management",url:"/tools/training/business",icon:b9}]},{label:"Resources & Tools",items:[{title:"Industry News",url:"/tools/resources/news",icon:bF},{title:"Calculators & Estimators",url:"/tools/resources/calculators",icon:bB},{title:"Vendor Directories",url:"/tools/resources/vendors",icon:bI},{title:"Emergency Services",url:"/tools/resources/emergency",icon:bn}]}],jobDetails:[{label:void 0,items:[{title:"Back to Jobs",url:"/dashboard/work",icon:b2}]},{label:"Overview",items:[{title:"Job Details",url:"#job-details",icon:bq},{title:"Timeline",url:"#timeline",icon:bp}]},{label:"Related",items:[{title:"Property",url:"#property",icon:bT},{title:"Customer",url:"#customer",icon:bj}]},{label:"Financials",items:[{title:"Job Costing",url:"#costing",icon:bJ},{title:"Profitability",url:"#profitability",icon:bM},{title:"Invoices",url:"#invoices",icon:bv},{title:"Estimates",url:"#estimates",icon:br}]},{label:"Activity",items:[{title:"Communications",url:"#communications",icon:bo},{title:"Photo Gallery",url:"#photo-gallery",icon:bY},{title:"Documentation",url:"#documents",icon:b7}]}]},cj=/^\/dashboard\/work\/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;function ck({pathname:a,...e}){let f=(0,d.usePathname)()||a||"/dashboard",g=x(),h="/dashboard"===f?"today":f.startsWith("/dashboard/communication")?"communication":f.startsWith("/dashboard/work/pricebook")?"pricebook":f.match(cj)?"jobDetails":f.startsWith("/dashboard/work")||f.startsWith("/dashboard/customers")?"work":f.startsWith("/dashboard/finance")?"finance":f.startsWith("/dashboard/reporting")?"reporting":f.startsWith("/dashboard/marketing")?"marketing":f.startsWith("/dashboard/shop")?"shop":f.startsWith("/dashboard/automation")?"automation":f.startsWith("/dashboard/ai")?"ai":f.startsWith("/dashboard/settings")?"settings":f.startsWith("/tools")?"tools":"today",i=ci[h],j="ai"===h,k="settings"===h||"ai"===h||"work"===h||"communication"===h||"finance"===h||"marketing"===h||"shop"===h||"tools"===h||"pricebook"===h||"jobDetails"===h,l="custom"===i,m="/dashboard/communication"===f||"/dashboard/communication/inbox"===f||"/dashboard/communication/sent"===f||"/dashboard/communication/archive"===f||"/dashboard/communication/trash"===f||"/dashboard/communication/snoozed"===f||"/dashboard/communication/spam"===f||"/dashboard/communication/drafts"===f,n="/dashboard/communication/stats"===f,o=f?.startsWith("/dashboard/communication/email"),p=f?.startsWith("/dashboard/communication/sms"),t=f?.startsWith("/dashboard/communication/teams");return m?(0,b.jsx)(ar,{...e}):n?(0,b.jsx)(I,{...e}):o?(0,b.jsx)(ah,{...e}):p?(0,b.jsx)(an,{...e}):t?(0,b.jsx)(ak,{...e}):l&&"pricebook"===h?(0,b.jsx)(aP,{...e}):(0,b.jsxs)(r.Sidebar,{collapsible:"offcanvas",variant:"inset",...e,children:["communication"===h&&(0,b.jsx)("div",{className:"px-3 pt-2 pb-1",children:(0,b.jsx)(q,{})}),(0,b.jsxs)(r.SidebarContent,{ref:g,children:["reporting"===h?(0,b.jsx)(aX,{}):"jobDetails"===h?(0,b.jsx)(be,{}):k?(0,b.jsxs)(b.Fragment,{children:[j&&(0,b.jsx)(aE,{}),(0,b.jsx)(s,{groups:i,pathname:f})]}):(0,b.jsx)(aG,{items:i,pathname:f}),j&&(0,b.jsx)(aF,{})]}),(0,b.jsx)(r.SidebarFooter,{children:(0,b.jsxs)("div",{className:"group border-border from-primary/5 via-primary/10 to-primary/5 hover:border-primary/30 relative flex flex-col gap-2 overflow-hidden rounded-lg border bg-gradient-to-br p-4 transition-all hover:shadow-md",children:[(0,b.jsx)(c.default,{className:"absolute inset-0 z-0",href:"/changelog"}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-md",children:(0,b.jsx)(bQ,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm font-semibold",children:"What's New"}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"Version 2.1.0"})]})]}),(0,b.jsx)("p",{className:"text-muted-foreground relative z-10 text-xs leading-relaxed",children:"Check out the latest features, improvements, and bug fixes."}),(0,b.jsx)("div",{className:"via-primary/5 absolute inset-0 bg-gradient-to-r from-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100"})]})}),(0,b.jsx)(r.SidebarRail,{})]})}a.s(["AppSidebar",()=>ck],973302)},322401,a=>{"use strict";var b=a.i(861467),c=a.i(97997),d=a.i(786087),e=a.i(638446),f=a.i(96250),g=a.i(766153),h=a.i(337850),i=a.i(187056),j=a.i(198803),k=a.i(638727),l=a.i(127634),m=a.i(688014),n=a.i(597635),o=a.i(300298),p=a.i(145679),q=a.i(783281);a.i(288007);var r=a.i(986990);a.i(445255);var s=a.i(18170);a.i(146697);var t=a.i(778737),u=a.i(127487),v=a.i(733695);function w({status:a}){switch(a){case"connected":return(0,b.jsx)(f.CheckCircle2,{className:"text-success dark:text-success size-4"});case"syncing":return(0,b.jsx)(j.Loader2,{className:"text-primary dark:text-primary size-4 animate-spin"});case"error":return(0,b.jsx)(c.AlertCircle,{className:"text-destructive dark:text-destructive size-4"});case"warning":return(0,b.jsx)(c.AlertCircle,{className:"text-warning dark:text-warning size-4"});default:return(0,b.jsx)("div",{className:"bg-muted-foreground/30 size-2 rounded-full"})}}function x({name:a,displayName:c,status:d,lastSyncAt:e,itemsImported:f,errorMessage:g}){let h=(0,v.usePriceBookStore)(a=>a.syncSupplier),[i,k]=(0,q.useState)(!1),l=async()=>{k(!0),await h(a),k(!1)};return(0,b.jsxs)("div",{className:"group hover:border-primary/50 hover:bg-accent/5 rounded-lg border p-3 transition-all",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"mt-0.5",children:(0,b.jsx)(w,{status:d})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("p",{className:"text-sm leading-none font-medium",children:c}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:(()=>{if("syncing"===d)return"Syncing...";if("error"===d)return g||"Error";if("connected"===d&&e){let a=Math.floor((new Date().getTime()-e.getTime())/36e5);return a<1?"Just now":a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}return"Not connected"})()}),"connected"===d&&f>0&&(0,b.jsxs)("p",{className:"text-success dark:text-success text-xs",children:[f.toLocaleString()," items"]})]})]}),(0,b.jsx)(s.Button,{className:"size-7 opacity-0 transition-opacity group-hover:opacity-100",disabled:i||"syncing"===d,onClick:l,size:"icon",variant:"ghost",children:(0,b.jsx)(j.Loader2,{className:`size-3 ${i||"syncing"===d?"animate-spin":""}`})})]}),"error"===d&&g&&(0,b.jsx)("div",{className:"bg-destructive dark:bg-destructive/20 mt-2 rounded-md p-2",children:(0,b.jsx)("p",{className:"text-destructive dark:text-destructive text-xs",children:g})})]})}function y(){return(0,b.jsxs)(u.SidebarGroup,{children:[(0,b.jsx)(u.SidebarGroupLabel,{children:"Quick Actions"}),(0,b.jsxs)("div",{className:"space-y-2 px-2",children:[(0,b.jsx)(s.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(p.default,{href:"/dashboard/work/pricebook/labor-calculator",children:[(0,b.jsx)(d.Calculator,{className:"size-3"}),"Labor Calculator"]})}),(0,b.jsx)(s.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(p.default,{href:"/dashboard/work/pricebook/mass-update",children:[(0,b.jsx)(m.TrendingUp,{className:"size-3"}),"Mass Price Increase"]})}),(0,b.jsx)(s.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(p.default,{href:"/dashboard/work/pricebook/import",children:[(0,b.jsx)(n.Upload,{className:"size-3"}),"Bulk Import"]})}),(0,b.jsx)(s.Button,{asChild:!0,className:"w-full justify-start gap-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)(p.default,{href:"/dashboard/work/pricebook/export",children:[(0,b.jsx)(i.Download,{className:"size-3"}),"Bulk Export"]})})]})]})}function z(){let[a,c]=(0,q.useState)(!1),d=(0,v.usePriceBookStore)(a=>a.filters.categories),f=(0,v.usePriceBookStore)(a=>a.setCategories);return(0,b.jsxs)(u.SidebarGroup,{children:[(0,b.jsxs)("button",{className:"flex w-full items-center justify-between px-2",onClick:()=>c(!a),type:"button",children:[(0,b.jsx)(u.SidebarGroupLabel,{children:"Categories"}),a?(0,b.jsx)(h.ChevronRight,{className:"size-4"}):(0,b.jsx)(g.ChevronDown,{className:"size-4"})]}),!a&&(0,b.jsx)("div",{className:"space-y-1 px-2 pt-2",children:[{name:"HVAC",count:45},{name:"Plumbing",count:38},{name:"Electrical",count:52},{name:"General",count:23}].map(a=>(0,b.jsxs)("button",{className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors",onClick:()=>{var b;return b=a.name,void(d.includes(b)?f(d.filter(a=>a!==b)):f([...d,b]))},type:"button",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[d.includes(a.name)&&(0,b.jsx)(e.Check,{className:"text-primary size-3"}),(0,b.jsx)("span",{className:d.includes(a.name)?"font-medium":"",children:a.name})]}),(0,b.jsx)(r.Badge,{className:"text-xs",variant:"secondary",children:a.count})]},a.name))})]})}function A(){let a=(0,v.usePriceBookStore)(a=>a.filters),c=(0,v.usePriceBookStore)(a=>a.resetFilters),d=(0,v.usePriceBookStore)(a=>a.setCategories),e=(0,v.usePriceBookStore)(a=>a.setItemTypes);return a.categories.length>0||a.itemTypes.length>0||"all"!==a.statusFilter||a.supplierFilter.length>0?(0,b.jsxs)(u.SidebarGroup,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,b.jsx)(u.SidebarGroupLabel,{children:"Active Filters"}),(0,b.jsx)(s.Button,{className:"h-auto p-0 text-xs",onClick:c,size:"sm",variant:"link",children:"Clear all"})]}),(0,b.jsxs)("div",{className:"space-y-2 px-2",children:[a.categories.map(c=>(0,b.jsxs)(r.Badge,{className:"gap-1",variant:"secondary",children:[c,(0,b.jsx)("button",{className:"hover:bg-accent ml-1 rounded-sm",onClick:()=>{d(a.categories.filter(a=>a!==c))},type:"button",children:(0,b.jsx)(o.X,{className:"size-3"})})]},c)),a.itemTypes.map(c=>(0,b.jsxs)(r.Badge,{className:"gap-1",variant:"outline",children:[c,(0,b.jsx)("button",{className:"hover:bg-accent ml-1 rounded-sm",onClick:()=>{e(a.itemTypes.filter(a=>a!==c))},type:"button",children:(0,b.jsx)(o.X,{className:"size-3"})})]},c))]})]}):null}function B(){let a=(0,v.usePriceBookStore)(a=>a.suppliers),[c,d]=(0,q.useState)(!1);return(0,b.jsxs)(u.Sidebar,{collapsible:"offcanvas",side:"right",variant:"inset",children:[(0,b.jsx)(u.SidebarHeader,{className:"border-b p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:"Price Book Tools"}),(0,b.jsx)(s.Button,{asChild:!0,size:"icon",variant:"ghost",children:(0,b.jsx)(p.default,{href:"/dashboard/settings/pricebook/integrations",children:(0,b.jsx)(l.Settings,{className:"size-4"})})})]})}),(0,b.jsxs)(u.SidebarContent,{className:"gap-0",children:[(0,b.jsxs)(u.SidebarGroup,{children:[(0,b.jsxs)("button",{className:"flex w-full items-center justify-between px-2",onClick:()=>d(!c),type:"button",children:[(0,b.jsx)(u.SidebarGroupLabel,{children:"API Integrations"}),c?(0,b.jsx)(h.ChevronRight,{className:"size-4"}):(0,b.jsx)(g.ChevronDown,{className:"size-4"})]}),!c&&(0,b.jsx)("div",{className:"space-y-2 px-2 pt-2",children:a.map(a=>(0,b.jsx)(x,{...a},a.name))})]}),(0,b.jsx)(t.Separator,{className:"my-2"}),(0,b.jsx)(y,{}),(0,b.jsx)(t.Separator,{className:"my-2"}),(0,b.jsx)(z,{}),(0,b.jsx)(t.Separator,{className:"my-2"}),(0,b.jsx)(A,{})]}),(0,b.jsx)(u.SidebarFooter,{className:"border-t p-3",children:(0,b.jsx)(s.Button,{asChild:!0,className:"w-full gap-2",size:"sm",variant:"default",children:(0,b.jsxs)(p.default,{href:"/dashboard/work/pricebook/new",children:[(0,b.jsx)(k.Plus,{className:"size-4"}),"Add Item"]})})})]})}a.s(["PriceBookSidebar",()=>B])}];

//# sourceMappingURL=_a5c0d55f._.js.map