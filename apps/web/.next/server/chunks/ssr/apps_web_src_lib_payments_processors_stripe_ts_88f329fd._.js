module.exports=[397357,a=>{"use strict";var b=a.i(189358);class c{config;constructor(a){this.config=a}getSupportedChannels(){return["online"]}async processPayment(a){if(!b.stripe)return{success:!1,status:"failed",error:"Stripe is not configured"};try{a.amount>1e5&&console.warn(`Stripe: High-value payment of ${a.amount} cents - verify this is platform billing, not contractor payment`);let c=await b.stripe.paymentIntents.create({amount:a.amount,currency:a.currency||"usd",customer:a.customerId,payment_method:a.paymentMethodId,confirm:!0,metadata:{company_id:this.config.companyId,invoice_id:a.invoiceId||"",channel:a.channel,...a.metadata},description:a.description});return{success:"succeeded"===c.status,transactionId:c.id,processorTransactionId:c.id,status:"succeeded"===c.status?"succeeded":"requires_action"===c.status?"requires_action":"processing",clientSecret:c.client_secret||void 0,processorMetadata:c}}catch(a){return{success:!1,status:"failed",error:a.message||"Payment processing failed",failureCode:a.code,failureMessage:a.message}}}async refundPayment(a){if(!b.stripe)return{success:!1,status:"failed",error:"Stripe is not configured"};try{let c=await b.stripe.refunds.create({payment_intent:a.transactionId,amount:a.amount,metadata:{reason:a.reason||"",...a.metadata}});return{success:"succeeded"===c.status,refundId:c.id,processorRefundId:c.id,status:"succeeded"===c.status?"succeeded":"processing"}}catch(a){return{success:!1,status:"failed",error:a.message||"Refund failed"}}}async getPaymentStatus(a){if(!b.stripe)throw Error("Stripe is not configured");let c=await b.stripe.paymentIntents.retrieve(a);return{status:c.status,amount:c.amount,metadata:c}}verifyWebhook(a,c){if(!b.stripe)return!1;try{if(!process.env.STRIPE_WEBHOOK_SECRET)return!1;return!0}catch(a){return!1}}}a.s(["StripeProcessor",()=>c])}];

//# sourceMappingURL=apps_web_src_lib_payments_processors_stripe_ts_88f329fd._.js.map