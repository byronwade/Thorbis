{"version":3,"sources":["../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/notification-testing-client.tsx","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/notification-registry.ts","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/channel-health.tsx","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/delivery-history.tsx","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/notification-test-card.tsx","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/email-preview-modal.tsx","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/notifications/testing/components/notification-test-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n\tActivity,\n\tAlertCircle,\n\tBell,\n\tCheckCircle2,\n\tMail,\n\tMessageSquare,\n\tSmartphone,\n\tXCircle,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tgetImplementationStats,\n\tgetNotificationsByCategory,\n\tgetNotificationsByChannel,\n\tNOTIFICATION_REGISTRY,\n\ttype NotificationChannel,\n\ttype NotificationDefinition,\n} from \"../notification-registry\";\nimport { ChannelHealth } from \"./channel-health\";\nimport { DeliveryHistory } from \"./delivery-history\";\nimport { NotificationTestCard } from \"./notification-test-card\";\n\nexport function NotificationTestingClient() {\n\tconst [activeChannel, setActiveChannel] = useState<\n\t\tNotificationChannel | \"all\"\n\t>(\"all\");\n\tconst [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n\n\tconst stats = getImplementationStats();\n\n\t// Filter notifications based on active channel and category\n\tconst filteredNotifications = NOTIFICATION_REGISTRY.filter((notification) => {\n\t\tconst matchesChannel =\n\t\t\tactiveChannel === \"all\" ||\n\t\t\tnotification.channels[activeChannel] !== undefined;\n\t\tconst matchesCategory =\n\t\t\tselectedCategory === \"all\" || notification.category === selectedCategory;\n\t\treturn matchesChannel && matchesCategory;\n\t});\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Overview Stats */}\n\t\t\t<div className=\"grid grid-cols-1 gap-4 md:grid-cols-4\">\n\t\t\t\t<StatsCard\n\t\t\t\t\ttitle=\"Total Notifications\"\n\t\t\t\t\tvalue={stats.total}\n\t\t\t\t\ticon={<Activity className=\"h-4 w-4\" />}\n\t\t\t\t\tdescription=\"Across all channels\"\n\t\t\t\t/>\n\t\t\t\t<StatsCard\n\t\t\t\t\ttitle=\"Email Templates\"\n\t\t\t\t\tvalue={`${stats.byChannel.email.complete}/${stats.byChannel.email.total}`}\n\t\t\t\t\ticon={<Mail className=\"h-4 w-4\" />}\n\t\t\t\t\tdescription={`${stats.byChannel.email.missing} missing`}\n\t\t\t\t\tstatus={\n\t\t\t\t\t\tstats.byChannel.email.complete === stats.byChannel.email.total\n\t\t\t\t\t\t\t? \"success\"\n\t\t\t\t\t\t\t: \"warning\"\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<StatsCard\n\t\t\t\t\ttitle=\"SMS Types\"\n\t\t\t\t\tvalue={`${stats.byChannel.sms.complete}/${stats.byChannel.sms.total}`}\n\t\t\t\t\ticon={<MessageSquare className=\"h-4 w-4\" />}\n\t\t\t\t\tdescription={`${stats.byChannel.sms.missing} missing`}\n\t\t\t\t\tstatus={\n\t\t\t\t\t\tstats.byChannel.sms.complete === stats.byChannel.sms.total\n\t\t\t\t\t\t\t? \"success\"\n\t\t\t\t\t\t\t: \"error\"\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<StatsCard\n\t\t\t\t\ttitle=\"Push Notifications\"\n\t\t\t\t\tvalue={`${stats.byChannel.push.complete}/${stats.byChannel.push.total}`}\n\t\t\t\t\ticon={<Smartphone className=\"h-4 w-4\" />}\n\t\t\t\t\tdescription={`${stats.byChannel.push.missing} missing`}\n\t\t\t\t\tstatus={\n\t\t\t\t\t\tstats.byChannel.push.complete === stats.byChannel.push.total\n\t\t\t\t\t\t\t? \"success\"\n\t\t\t\t\t\t\t: \"error\"\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{/* Channel Health Dashboard */}\n\t\t\t<ChannelHealth />\n\n\t\t\t{/* Channel Tabs */}\n\t\t\t<Tabs\n\t\t\t\tdefaultValue=\"all\"\n\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\tsetActiveChannel(value as NotificationChannel | \"all\")\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<TabsList className=\"grid w-full grid-cols-5\">\n\t\t\t\t\t<TabsTrigger value=\"all\">All ({stats.total})</TabsTrigger>\n\t\t\t\t\t<TabsTrigger value=\"email\">\n\t\t\t\t\t\t<Mail className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tEmail ({stats.byChannel.email.total})\n\t\t\t\t\t</TabsTrigger>\n\t\t\t\t\t<TabsTrigger value=\"sms\">\n\t\t\t\t\t\t<MessageSquare className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tSMS ({stats.byChannel.sms.total})\n\t\t\t\t\t</TabsTrigger>\n\t\t\t\t\t<TabsTrigger value=\"in_app\">\n\t\t\t\t\t\t<Bell className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tIn-App ({stats.byChannel.in_app.total})\n\t\t\t\t\t</TabsTrigger>\n\t\t\t\t\t<TabsTrigger value=\"push\">\n\t\t\t\t\t\t<Smartphone className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tPush ({stats.byChannel.push.total})\n\t\t\t\t\t</TabsTrigger>\n\t\t\t\t</TabsList>\n\n\t\t\t\t<TabsContent value={activeChannel} className=\"mt-6 space-y-4\">\n\t\t\t\t\t{/* Category Filter */}\n\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\tvariant={selectedCategory === \"all\" ? \"default\" : \"outline\"}\n\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\n\t\t\t\t\t\t\tonClick={() => setSelectedCategory(\"all\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAll Categories\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t{Object.keys(stats.byCategory).map((category) => (\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tkey={category}\n\t\t\t\t\t\t\t\tvariant={selectedCategory === category ? \"default\" : \"outline\"}\n\t\t\t\t\t\t\t\tclassName=\"cursor-pointer capitalize\"\n\t\t\t\t\t\t\t\tonClick={() => setSelectedCategory(category)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{category} ({stats.byCategory[category]})\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Notification Test Cards */}\n\t\t\t\t\t{filteredNotifications.length > 0 ? (\n\t\t\t\t\t\t<div className=\"grid grid-cols-1 gap-4 lg:grid-cols-2\">\n\t\t\t\t\t\t\t{filteredNotifications.map((notification) => (\n\t\t\t\t\t\t\t\t<NotificationTestCard\n\t\t\t\t\t\t\t\t\tkey={notification.id}\n\t\t\t\t\t\t\t\t\tnotification={notification}\n\t\t\t\t\t\t\t\t\tactiveChannel={activeChannel}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardContent className=\"flex h-32 items-center justify-center\">\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tNo notifications found for this filter\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)}\n\t\t\t\t</TabsContent>\n\t\t\t</Tabs>\n\n\t\t\t{/* Delivery History */}\n\t\t\t<DeliveryHistory\n\t\t\t\tchannel={activeChannel === \"all\" ? undefined : activeChannel}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\ninterface StatsCardProps {\n\ttitle: string;\n\tvalue: string | number;\n\ticon: React.ReactNode;\n\tdescription: string;\n\tstatus?: \"success\" | \"warning\" | \"error\";\n}\n\nfunction StatsCard({\n\ttitle,\n\tvalue,\n\ticon,\n\tdescription,\n\tstatus,\n}: StatsCardProps) {\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n\t\t\t\t<CardTitle className=\"text-sm font-medium\">{title}</CardTitle>\n\t\t\t\t{icon}\n\t\t\t</CardHeader>\n\t\t\t<CardContent>\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div className=\"text-2xl font-bold\">{value}</div>\n\t\t\t\t\t{status && (\n\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t{status === \"success\" && (\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{status === \"warning\" && (\n\t\t\t\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-yellow-500\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{status === \"error\" && (\n\t\t\t\t\t\t\t\t<XCircle className=\"h-5 w-5 text-red-500\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">{description}</p>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n","/**\n * Notification Registry - Centralized definition of all notification types\n *\n * This file contains the complete catalog of all notifications in the system:\n * - Email notifications (20 templates)\n * - SMS notifications (8 types)\n * - In-app notifications (10 event types)\n * - Push notifications (6 types)\n *\n * Each notification includes:\n * - Implementation status (complete, partial, missing)\n * - Template/trigger information\n * - Test data for previews\n * - Channel availability\n */\n\nexport type NotificationChannel = \"email\" | \"sms\" | \"in_app\" | \"push\";\n\nexport type ImplementationStatus = \"complete\" | \"partial\" | \"missing\";\n\nexport interface NotificationDefinition {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tcategory: \"auth\" | \"job\" | \"billing\" | \"customer\" | \"team\" | \"system\";\n\tchannels: {\n\t\temail?: {\n\t\t\tstatus: ImplementationStatus;\n\t\t\ttemplatePath?: string;\n\t\t\ttemplateComponent?: string;\n\t\t};\n\t\tsms?: {\n\t\t\tstatus: ImplementationStatus;\n\t\t\ttemplateFunction?: string;\n\t\t};\n\t\tin_app?: {\n\t\t\tstatus: ImplementationStatus;\n\t\t\ttriggerFunction?: string;\n\t\t};\n\t\tpush?: {\n\t\t\tstatus: ImplementationStatus;\n\t\t\tserviceFunction?: string;\n\t\t};\n\t};\n\ttestData: Record<string, any>;\n\tpriority: \"low\" | \"medium\" | \"high\" | \"urgent\";\n\tuserPreferenceKey?: string;\n}\n\n/**\n * Complete Notification Registry\n */\nexport const NOTIFICATION_REGISTRY: NotificationDefinition[] = [\n\t// ========================================\n\t// AUTHENTICATION NOTIFICATIONS (5)\n\t// ========================================\n\t{\n\t\tid: \"auth-welcome\",\n\t\tname: \"Welcome Email\",\n\t\tdescription: \"Welcome new users to the platform\",\n\t\tcategory: \"auth\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/auth/welcome.tsx\",\n\t\t\t\ttemplateComponent: \"WelcomeEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifySystem\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tuserEmail: \"john@example.com\",\n\t\t\tdashboardUrl: \"https://app.stratos.com/dashboard\",\n\t\t},\n\t\tuserPreferenceKey: \"email_system\",\n\t},\n\t{\n\t\tid: \"auth-email-verification\",\n\t\tname: \"Email Verification\",\n\t\tdescription: \"Verify user email address with confirmation link\",\n\t\tcategory: \"auth\",\n\t\tpriority: \"urgent\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/auth/email-verification.tsx\",\n\t\t\t\ttemplateComponent: \"EmailVerificationEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tverificationUrl: \"https://app.stratos.com/auth/verify?token=abc123\",\n\t\t\texpiresInHours: 24,\n\t\t},\n\t},\n\t{\n\t\tid: \"auth-password-reset\",\n\t\tname: \"Password Reset\",\n\t\tdescription: \"Send password reset link to user\",\n\t\tcategory: \"auth\",\n\t\tpriority: \"urgent\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/auth/password-reset.tsx\",\n\t\t\t\ttemplateComponent: \"PasswordResetEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsPasswordResetCode\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tresetUrl: \"https://app.stratos.com/auth/reset-password?token=xyz789\",\n\t\t\texpiresInMinutes: 15,\n\t\t},\n\t},\n\t{\n\t\tid: \"auth-password-changed\",\n\t\tname: \"Password Changed Confirmation\",\n\t\tdescription: \"Confirm password was successfully changed\",\n\t\tcategory: \"auth\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/auth/password-changed.tsx\",\n\t\t\t\ttemplateComponent: \"PasswordChangedEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyAlert\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tchangedAt: new Date().toISOString(),\n\t\t\tipAddress: \"192.168.1.1\",\n\t\t\tuserAgent: \"Chrome on macOS\",\n\t\t},\n\t},\n\t{\n\t\tid: \"auth-magic-link\",\n\t\tname: \"Magic Link Login\",\n\t\tdescription: \"Passwordless login via email link\",\n\t\tcategory: \"auth\",\n\t\tpriority: \"urgent\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/auth/magic-link.tsx\",\n\t\t\t\ttemplateComponent: \"MagicLinkEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tloginUrl: \"https://app.stratos.com/auth/magic?token=magic123\",\n\t\t\texpiresInMinutes: 10,\n\t\t},\n\t},\n\n\t// ========================================\n\t// JOB LIFECYCLE NOTIFICATIONS (4)\n\t// ========================================\n\t{\n\t\tid: \"job-confirmation\",\n\t\tname: \"Appointment Confirmation\",\n\t\tdescription: \"Confirm job appointment with customer\",\n\t\tcategory: \"job\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/jobs/job-confirmation.tsx\",\n\t\t\t\ttemplateComponent: \"JobConfirmationEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsAppointmentConfirmation\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyJobCreated\",\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\tserviceFunction: \"pushJobConfirmation\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tjobType: \"HVAC Maintenance\",\n\t\t\tscheduledDate: \"2025-12-01\",\n\t\t\tscheduledTime: \"2:00 PM - 4:00 PM\",\n\t\t\ttechnicianName: \"Mike Smith\",\n\t\t\taddress: \"123 Main St, Anytown, CA 90210\",\n\t\t\tconfirmationNumber: \"JOB-2025-001\",\n\t\t},\n\t\tuserPreferenceKey: \"email_new_jobs\",\n\t},\n\t{\n\t\tid: \"job-reminder\",\n\t\tname: \"Appointment Reminder\",\n\t\tdescription: \"Remind customer 24h before appointment\",\n\t\tcategory: \"job\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/jobs/appointment-reminder.tsx\",\n\t\t\t\ttemplateComponent: \"AppointmentReminderEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsAppointmentReminder\",\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\tserviceFunction: \"pushAppointmentReminder\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tjobType: \"HVAC Maintenance\",\n\t\t\tscheduledDate: \"2025-12-01\",\n\t\t\tscheduledTime: \"2:00 PM\",\n\t\t\ttechnicianName: \"Mike Smith\",\n\t\t\tconfirmationNumber: \"JOB-2025-001\",\n\t\t},\n\t},\n\t{\n\t\tid: \"job-tech-enroute\",\n\t\tname: \"Technician En Route\",\n\t\tdescription: \"Notify customer that technician is on the way\",\n\t\tcategory: \"job\",\n\t\tpriority: \"urgent\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/jobs/tech-en-route.tsx\",\n\t\t\t\ttemplateComponent: \"TechEnRouteEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsTechEnRoute\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyJobUpdated\",\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\tserviceFunction: \"pushTechEnRoute\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\ttechnicianName: \"Mike Smith\",\n\t\t\ttechnicianPhone: \"+1 (555) 123-4567\",\n\t\t\testimatedArrival: \"20 minutes\",\n\t\t\ttrackingUrl: \"https://app.stratos.com/track/abc123\",\n\t\t},\n\t},\n\t{\n\t\tid: \"job-complete\",\n\t\tname: \"Job Completion\",\n\t\tdescription: \"Notify customer that service is complete\",\n\t\tcategory: \"job\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/jobs/job-complete.tsx\",\n\t\t\t\ttemplateComponent: \"JobCompleteEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsJobComplete\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyJobCompleted\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tjobType: \"HVAC Maintenance\",\n\t\t\tcompletedDate: new Date().toISOString(),\n\t\t\ttechnicianName: \"Mike Smith\",\n\t\t\tworkPerformed:\n\t\t\t\t\"Replaced air filter, cleaned coils, checked refrigerant levels\",\n\t\t\tinvoiceUrl: \"https://app.stratos.com/invoices/INV-001\",\n\t\t\treviewUrl: \"https://app.stratos.com/review/abc123\",\n\t\t},\n\t\tuserPreferenceKey: \"email_job_updates\",\n\t},\n\n\t// ========================================\n\t// BILLING NOTIFICATIONS (4)\n\t// ========================================\n\t{\n\t\tid: \"billing-invoice-sent\",\n\t\tname: \"Invoice Sent\",\n\t\tdescription: \"Send invoice to customer\",\n\t\tcategory: \"billing\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/billing/invoice-sent.tsx\",\n\t\t\t\ttemplateComponent: \"InvoiceSentEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyPaymentDue\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tinvoiceNumber: \"INV-2025-001\",\n\t\t\tinvoiceDate: \"2025-11-18\",\n\t\t\tdueDate: \"2025-12-18\",\n\t\t\ttotalAmount: 450.0,\n\t\t\titems: [\n\t\t\t\t{ description: \"HVAC Maintenance\", amount: 350.0 },\n\t\t\t\t{ description: \"Air Filter Replacement\", amount: 100.0 },\n\t\t\t],\n\t\t\tpaymentUrl: \"https://app.stratos.com/pay/inv-001\",\n\t\t},\n\t\tuserPreferenceKey: \"email_invoices\",\n\t},\n\t{\n\t\tid: \"billing-payment-received\",\n\t\tname: \"Payment Received\",\n\t\tdescription: \"Confirm payment received from customer\",\n\t\tcategory: \"billing\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/billing/payment-received.tsx\",\n\t\t\t\ttemplateComponent: \"PaymentReceivedEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyPaymentReceived\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tinvoiceNumber: \"INV-2025-001\",\n\t\t\tpaymentAmount: 450.0,\n\t\t\tpaymentDate: new Date().toISOString(),\n\t\t\tpaymentMethod: \"Credit Card (**** 4242)\",\n\t\t\treceiptUrl: \"https://app.stratos.com/receipts/PAY-001\",\n\t\t},\n\t},\n\t{\n\t\tid: \"billing-payment-reminder\",\n\t\tname: \"Payment Reminder\",\n\t\tdescription: \"Remind customer of overdue payment\",\n\t\tcategory: \"billing\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/billing/payment-reminder.tsx\",\n\t\t\t\ttemplateComponent: \"PaymentReminderEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsPaymentReminder\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyAlert\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tinvoiceNumber: \"INV-2025-001\",\n\t\t\toriginalDueDate: \"2025-12-18\",\n\t\t\tdaysOverdue: 7,\n\t\t\ttotalAmount: 450.0,\n\t\t\tpaymentUrl: \"https://app.stratos.com/pay/inv-001\",\n\t\t},\n\t},\n\t{\n\t\tid: \"billing-estimate-sent\",\n\t\tname: \"Estimate Sent\",\n\t\tdescription: \"Send estimate/quote to customer\",\n\t\tcategory: \"billing\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/billing/estimate-sent.tsx\",\n\t\t\t\ttemplateComponent: \"EstimateSentEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\testimateNumber: \"EST-2025-001\",\n\t\t\testimateDate: \"2025-11-18\",\n\t\t\tvalidUntil: \"2025-12-18\",\n\t\t\ttotalAmount: 1250.0,\n\t\t\titems: [\n\t\t\t\t{ description: \"HVAC System Installation\", amount: 1000.0 },\n\t\t\t\t{ description: \"Thermostat Upgrade\", amount: 250.0 },\n\t\t\t],\n\t\t\tapproveUrl: \"https://app.stratos.com/estimates/EST-001/approve\",\n\t\t},\n\t},\n\n\t// ========================================\n\t// CUSTOMER ENGAGEMENT NOTIFICATIONS (6)\n\t// ========================================\n\t{\n\t\tid: \"customer-invoice\",\n\t\tname: \"Customer Invoice Notification\",\n\t\tdescription: \"Customer-facing invoice notification\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/invoice-notification.tsx\",\n\t\t\t\ttemplateComponent: \"CustomerInvoiceEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\tinvoiceNumber: \"INV-2025-001\",\n\t\t\ttotalAmount: 450.0,\n\t\t\tdueDate: \"2025-12-18\",\n\t\t\tviewUrl: \"https://app.stratos.com/customer/invoices/INV-001\",\n\t\t},\n\t},\n\t{\n\t\tid: \"customer-estimate\",\n\t\tname: \"Customer Estimate Notification\",\n\t\tdescription: \"Customer-facing estimate notification\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/estimate-notification.tsx\",\n\t\t\t\ttemplateComponent: \"CustomerEstimateEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\testimateNumber: \"EST-2025-001\",\n\t\t\ttotalAmount: 1250.0,\n\t\t\tvalidUntil: \"2025-12-18\",\n\t\t\tviewUrl: \"https://app.stratos.com/customer/estimates/EST-001\",\n\t\t},\n\t},\n\t{\n\t\tid: \"customer-review-request\",\n\t\tname: \"Review Request\",\n\t\tdescription: \"Request customer review after service completion\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"low\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/review-request.tsx\",\n\t\t\t\ttemplateComponent: \"ReviewRequestEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsReviewRequest\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\ttechnicianName: \"Mike Smith\",\n\t\t\tserviceDate: \"2025-11-18\",\n\t\t\treviewUrl: \"https://app.stratos.com/review/abc123\",\n\t\t},\n\t},\n\t{\n\t\tid: \"customer-service-reminder\",\n\t\tname: \"Service Reminder\",\n\t\tdescription: \"Remind customer of upcoming maintenance\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"low\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/service-reminder.tsx\",\n\t\t\t\ttemplateComponent: \"ServiceReminderEmail\",\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\ttemplateFunction: \"smsServiceReminder\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\tserviceType: \"Annual HVAC Maintenance\",\n\t\t\tlastServiceDate: \"2024-11-18\",\n\t\t\tequipmentType: \"HVAC System\",\n\t\t\tscheduleUrl: \"https://app.stratos.com/schedule\",\n\t\t},\n\t},\n\t{\n\t\tid: \"customer-welcome\",\n\t\tname: \"Welcome New Customer\",\n\t\tdescription: \"Welcome email for new customers\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/welcome-customer.tsx\",\n\t\t\t\ttemplateComponent: \"WelcomeCustomerEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\tsupportEmail: \"support@acmehvac.com\",\n\t\t\tsupportPhone: \"+1 (555) 123-4567\",\n\t\t\tportalUrl: \"https://app.stratos.com/customer/portal\",\n\t\t},\n\t},\n\t{\n\t\tid: \"customer-portal-invitation\",\n\t\tname: \"Customer Portal Invitation\",\n\t\tdescription: \"Invite customer to access customer portal\",\n\t\tcategory: \"customer\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/customer/portal-invitation.tsx\",\n\t\t\t\ttemplateComponent: \"PortalInvitationEmail\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcustomerName: \"Sarah Johnson\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\tinvitationUrl: \"https://app.stratos.com/customer/accept/abc123\",\n\t\t\texpiresInDays: 7,\n\t\t},\n\t},\n\n\t// ========================================\n\t// TEAM NOTIFICATIONS (1)\n\t// ========================================\n\t{\n\t\tid: \"team-invitation\",\n\t\tname: \"Team Member Invitation\",\n\t\tdescription: \"Invite new team member to join company\",\n\t\tcategory: \"team\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/team/invitation.tsx\",\n\t\t\t\ttemplateComponent: \"TeamInvitationEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyTeamMemberAdded\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tinviteeName: \"Alex Rodriguez\",\n\t\t\tinviterName: \"John Manager\",\n\t\t\tcompanyName: \"Acme HVAC Services\",\n\t\t\trole: \"Technician\",\n\t\t\tinvitationUrl: \"https://app.stratos.com/invite/accept/xyz789\",\n\t\t\texpiresInDays: 7,\n\t\t},\n\t},\n\n\t// ========================================\n\t// SYSTEM NOTIFICATIONS (1)\n\t// ========================================\n\t{\n\t\tid: \"system-verification-submitted\",\n\t\tname: \"Telnyx Verification Submitted\",\n\t\tdescription: \"Confirm 10DLC verification submission to Telnyx\",\n\t\tcategory: \"system\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\temail: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttemplatePath: \"/emails/templates/onboarding/verification-submitted.tsx\",\n\t\t\t\ttemplateComponent: \"VerificationSubmittedEmail\",\n\t\t\t},\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifySystem\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tuserName: \"John Doe\",\n\t\t\tbusinessName: \"Acme HVAC Services\",\n\t\t\tsubmissionDate: new Date().toISOString(),\n\t\t\testimatedReviewTime: \"2-3 business days\",\n\t\t},\n\t},\n\n\t// ========================================\n\t// IN-APP ONLY NOTIFICATIONS (3)\n\t// ========================================\n\t{\n\t\tid: \"inapp-new-message\",\n\t\tname: \"New Message\",\n\t\tdescription: \"New customer message received\",\n\t\tcategory: \"system\",\n\t\tpriority: \"high\",\n\t\tchannels: {\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyNewMessage\",\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\tserviceFunction: \"pushNewMessage\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tsenderName: \"Sarah Johnson\",\n\t\t\tmessagePreview: \"Can we reschedule my appointment?\",\n\t\t\tconversationUrl: \"/dashboard/communications/messages/123\",\n\t\t},\n\t\tuserPreferenceKey: \"email_messages\",\n\t},\n\t{\n\t\tid: \"inapp-missed-call\",\n\t\tname: \"Missed Call\",\n\t\tdescription: \"Missed call from customer\",\n\t\tcategory: \"system\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyMissedCall\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tcallerName: \"Sarah Johnson\",\n\t\t\tcallerNumber: \"+1 (555) 987-6543\",\n\t\t\tcallTime: new Date().toISOString(),\n\t\t},\n\t},\n\t{\n\t\tid: \"inapp-team-assignment\",\n\t\tname: \"Team Assignment\",\n\t\tdescription: \"Assigned to a job or task\",\n\t\tcategory: \"team\",\n\t\tpriority: \"medium\",\n\t\tchannels: {\n\t\t\tin_app: {\n\t\t\t\tstatus: \"complete\",\n\t\t\t\ttriggerFunction: \"notifyTeamAssignment\",\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tstatus: \"missing\",\n\t\t\t\tserviceFunction: \"pushTeamAssignment\",\n\t\t\t},\n\t\t},\n\t\ttestData: {\n\t\t\tassignerName: \"John Manager\",\n\t\t\tjobType: \"HVAC Maintenance\",\n\t\t\tjobUrl: \"/dashboard/work/jobs/456\",\n\t\t\tscheduledDate: \"2025-12-01\",\n\t\t},\n\t},\n];\n\n/**\n * Get notification by ID\n */\nexport function getNotificationById(\n\tid: string,\n): NotificationDefinition | undefined {\n\treturn NOTIFICATION_REGISTRY.find((n) => n.id === id);\n}\n\n/**\n * Get notifications by category\n */\nexport function getNotificationsByCategory(\n\tcategory: NotificationDefinition[\"category\"],\n): NotificationDefinition[] {\n\treturn NOTIFICATION_REGISTRY.filter((n) => n.category === category);\n}\n\n/**\n * Get notifications by channel\n */\nexport function getNotificationsByChannel(\n\tchannel: NotificationChannel,\n): NotificationDefinition[] {\n\treturn NOTIFICATION_REGISTRY.filter((n) => n.channels[channel] !== undefined);\n}\n\n/**\n * Get implementation status summary\n */\nexport function getImplementationStats() {\n\tconst stats = {\n\t\ttotal: NOTIFICATION_REGISTRY.length,\n\t\tbyChannel: {\n\t\t\temail: { complete: 0, partial: 0, missing: 0, total: 0 },\n\t\t\tsms: { complete: 0, partial: 0, missing: 0, total: 0 },\n\t\t\tin_app: { complete: 0, partial: 0, missing: 0, total: 0 },\n\t\t\tpush: { complete: 0, partial: 0, missing: 0, total: 0 },\n\t\t},\n\t\tbyCategory: {} as Record<string, number>,\n\t};\n\n\tNOTIFICATION_REGISTRY.forEach((notification) => {\n\t\t// Count by category\n\t\tstats.byCategory[notification.category] =\n\t\t\t(stats.byCategory[notification.category] || 0) + 1;\n\n\t\t// Count by channel\n\t\t(Object.keys(notification.channels) as NotificationChannel[]).forEach(\n\t\t\t(channel) => {\n\t\t\t\tconst channelData = notification.channels[channel];\n\t\t\t\tif (channelData) {\n\t\t\t\t\tstats.byChannel[channel].total++;\n\t\t\t\t\tstats.byChannel[channel][channelData.status]++;\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t});\n\n\treturn stats;\n}\n\n/**\n * Get incomplete notifications (partial or missing implementations)\n */\nfunction getIncompleteNotifications(): NotificationDefinition[] {\n\treturn NOTIFICATION_REGISTRY.filter((notification) => {\n\t\treturn Object.values(notification.channels).some(\n\t\t\t(channel) =>\n\t\t\t\tchannel &&\n\t\t\t\t(channel.status === \"partial\" || channel.status === \"missing\"),\n\t\t);\n\t});\n}\n","\"use client\";\n\nimport {\n\tAlertTriangle,\n\tBell,\n\tCheckCircle2,\n\tExternalLink,\n\tMail,\n\tMessageSquare,\n\tRefreshCw,\n\tSmartphone,\n\tXCircle,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface ChannelStatus {\n\tchannel: string;\n\tname: string;\n\ticon: React.ReactNode;\n\tstatus: \"operational\" | \"degraded\" | \"down\";\n\tapiStatus: \"connected\" | \"disconnected\" | \"error\";\n\tsuccessRate: number; // 0-100\n\tlastChecked: Date;\n\tdailySent: number;\n\tdailyFailed: number;\n\tconfig: {\n\t\tapiKey: boolean;\n\t\tfromAddress?: string;\n\t\tmessagingProfile?: string;\n\t\tserviceWorker?: boolean;\n\t};\n\terrors: string[];\n}\n\nexport function ChannelHealth() {\n\tconst [channels, setChannels] = useState<ChannelStatus[]>([\n\t\t{\n\t\t\tchannel: \"email\",\n\t\t\tname: \"Email (Resend)\",\n\t\t\ticon: <Mail className=\"h-5 w-5\" />,\n\t\t\tstatus: \"operational\",\n\t\t\tapiStatus: \"connected\",\n\t\t\tsuccessRate: 98.5,\n\t\t\tlastChecked: new Date(),\n\t\t\tdailySent: 142,\n\t\t\tdailyFailed: 2,\n\t\t\tconfig: {\n\t\t\t\tapiKey: true,\n\t\t\t\tfromAddress: \"noreply@stratos.com\",\n\t\t\t},\n\t\t\terrors: [],\n\t\t},\n\t\t{\n\t\t\tchannel: \"sms\",\n\t\t\tname: \"SMS (Telnyx)\",\n\t\t\ticon: <MessageSquare className=\"h-5 w-5\" />,\n\t\t\tstatus: \"degraded\",\n\t\t\tapiStatus: \"connected\",\n\t\t\tsuccessRate: 75.0,\n\t\t\tlastChecked: new Date(),\n\t\t\tdailySent: 45,\n\t\t\tdailyFailed: 15,\n\t\t\tconfig: {\n\t\t\t\tapiKey: true,\n\t\t\t\tmessagingProfile: \"profile_abc123\",\n\t\t\t},\n\t\t\terrors: [\"Some messages failing due to invalid phone numbers\"],\n\t\t},\n\t\t{\n\t\t\tchannel: \"in_app\",\n\t\t\tname: \"In-App Notifications\",\n\t\t\ticon: <Bell className=\"h-5 w-5\" />,\n\t\t\tstatus: \"operational\",\n\t\t\tapiStatus: \"connected\",\n\t\t\tsuccessRate: 100,\n\t\t\tlastChecked: new Date(),\n\t\t\tdailySent: 387,\n\t\t\tdailyFailed: 0,\n\t\t\tconfig: {\n\t\t\t\tapiKey: false, // Uses Supabase Realtime\n\t\t\t},\n\t\t\terrors: [],\n\t\t},\n\t\t{\n\t\t\tchannel: \"push\",\n\t\t\tname: \"Push Notifications\",\n\t\t\ticon: <Smartphone className=\"h-5 w-5\" />,\n\t\t\tstatus: \"down\",\n\t\t\tapiStatus: \"error\",\n\t\t\tsuccessRate: 0,\n\t\t\tlastChecked: new Date(),\n\t\t\tdailySent: 0,\n\t\t\tdailyFailed: 0,\n\t\t\tconfig: {\n\t\t\t\tapiKey: false,\n\t\t\t\tserviceWorker: false,\n\t\t\t},\n\t\t\terrors: [\n\t\t\t\t\"Service worker not configured\",\n\t\t\t\t\"VAPID keys not set\",\n\t\t\t\t\"No push subscriptions found\",\n\t\t\t],\n\t\t},\n\t]);\n\n\tconst [isRefreshing, setIsRefreshing] = useState(false);\n\n\tconst handleRefresh = async () => {\n\t\tsetIsRefreshing(true);\n\t\t// Simulate API call\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\n\t\t// Update last checked time\n\t\tsetChannels((prev) =>\n\t\t\tprev.map((channel) => ({\n\t\t\t\t...channel,\n\t\t\t\tlastChecked: new Date(),\n\t\t\t})),\n\t\t);\n\n\t\tsetIsRefreshing(false);\n\t};\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader>\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CardTitle>Channel Health</CardTitle>\n\t\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\t\tMonitor the status and performance of all notification channels\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\tdisabled={isRefreshing}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RefreshCw\n\t\t\t\t\t\t\tclassName={`mr-2 h-4 w-4 ${isRefreshing ? \"animate-spin\" : \"\"}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<CardContent>\n\t\t\t\t<div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t{channels.map((channel) => (\n\t\t\t\t\t\t<ChannelStatusCard key={channel.channel} channel={channel} />\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n\nfunction ChannelStatusCard({ channel }: { channel: ChannelStatus }) {\n\tconst statusConfig = {\n\t\toperational: {\n\t\t\tcolor: \"bg-green-100 text-green-700 border-green-300\",\n\t\t\ticon: <CheckCircle2 className=\"h-4 w-4\" />,\n\t\t\tlabel: \"Operational\",\n\t\t},\n\t\tdegraded: {\n\t\t\tcolor: \"bg-yellow-100 text-yellow-700 border-yellow-300\",\n\t\t\ticon: <AlertTriangle className=\"h-4 w-4\" />,\n\t\t\tlabel: \"Degraded\",\n\t\t},\n\t\tdown: {\n\t\t\tcolor: \"bg-red-100 text-red-700 border-red-300\",\n\t\t\ticon: <XCircle className=\"h-4 w-4\" />,\n\t\t\tlabel: \"Down\",\n\t\t},\n\t};\n\n\tconst { color, icon, label } = statusConfig[channel.status];\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t{channel.icon}\n\t\t\t\t\t\t<CardTitle className=\"text-base\">{channel.name}</CardTitle>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tclassName={`flex items-center gap-1 ${color}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Badge>\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t{/* Success Rate */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<div className=\"flex items-center justify-between text-sm\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Success Rate (24h)</span>\n\t\t\t\t\t\t<span className=\"font-semibold\">\n\t\t\t\t\t\t\t{channel.successRate.toFixed(1)}%\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Progress value={channel.successRate} className=\"h-2\" />\n\t\t\t\t</div>\n\n\t\t\t\t{/* Daily Stats */}\n\t\t\t\t<div className=\"grid grid-cols-2 gap-4 text-sm\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"text-muted-foreground\">Sent Today</div>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{channel.dailySent}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"text-muted-foreground\">Failed Today</div>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold text-red-600\">\n\t\t\t\t\t\t\t{channel.dailyFailed}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Configuration Status */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<div className=\"text-sm font-medium\">Configuration:</div>\n\t\t\t\t\t<div className=\"space-y-1 text-xs\">\n\t\t\t\t\t\t<ConfigItem\n\t\t\t\t\t\t\tlabel=\"API Key\"\n\t\t\t\t\t\t\tvalue={channel.config.apiKey}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{channel.config.fromAddress && (\n\t\t\t\t\t\t\t<ConfigItem\n\t\t\t\t\t\t\t\tlabel=\"From Address\"\n\t\t\t\t\t\t\t\tvalue={channel.config.fromAddress}\n\t\t\t\t\t\t\t\tisText\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{channel.config.messagingProfile && (\n\t\t\t\t\t\t\t<ConfigItem\n\t\t\t\t\t\t\t\tlabel=\"Messaging Profile\"\n\t\t\t\t\t\t\t\tvalue={channel.config.messagingProfile}\n\t\t\t\t\t\t\t\tisText\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{channel.config.serviceWorker !== undefined && (\n\t\t\t\t\t\t\t<ConfigItem\n\t\t\t\t\t\t\t\tlabel=\"Service Worker\"\n\t\t\t\t\t\t\t\tvalue={channel.config.serviceWorker}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Errors */}\n\t\t\t\t{channel.errors.length > 0 && (\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<div className=\"text-sm font-medium text-red-600\">Issues:</div>\n\t\t\t\t\t\t<ul className=\"space-y-1 text-xs text-red-600\">\n\t\t\t\t\t\t\t{channel.errors.map((error, index) => (\n\t\t\t\t\t\t\t\t<li key={index} className=\"flex items-start gap-1\">\n\t\t\t\t\t\t\t\t\t<XCircle className=\"mt-0.5 h-3 w-3 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t\t<span>{error}</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Last Checked */}\n\t\t\t\t<div className=\"text-muted-foreground border-t pt-2 text-xs\">\n\t\t\t\t\tLast checked: {channel.lastChecked.toLocaleTimeString()}\n\t\t\t\t</div>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n\ninterface ConfigItemProps {\n\tlabel: string;\n\tvalue: boolean | string;\n\trequired?: boolean;\n\tisText?: boolean;\n}\n\nfunction ConfigItem({ label, value, required, isText }: ConfigItemProps) {\n\tif (isText) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<span className=\"text-muted-foreground\">{label}:</span>\n\t\t\t\t<code className=\"bg-muted rounded px-2 py-0.5\">{value}</code>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst configured = value === true;\n\n\treturn (\n\t\t<div className=\"flex items-center justify-between\">\n\t\t\t<span className=\"text-muted-foreground\">{label}:</span>\n\t\t\t<Badge\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tclassName={\n\t\t\t\t\tconfigured\n\t\t\t\t\t\t? \"border-green-300 bg-green-100 text-green-700\"\n\t\t\t\t\t\t: \"border-red-300 bg-red-100 text-red-700\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{configured ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<CheckCircle2 className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\tConfigured\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<XCircle className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\tMissing{required && \" (Required)\"}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Badge>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport { formatDistanceToNow } from \"date-fns\";\nimport {\n\tBell,\n\tCheckCircle2,\n\tClock,\n\tMail,\n\tMessageSquare,\n\tRefreshCw,\n\tRotateCw,\n\tSmartphone,\n\tXCircle,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableHead,\n\tTableHeader,\n\tTableRow,\n} from \"@/components/ui/table\";\nimport type { NotificationChannel } from \"../notification-registry\";\n\ninterface DeliveryHistoryProps {\n\tchannel?: NotificationChannel;\n}\n\n// Mock data - replace with actual API call\nconst getMockDeliveryHistory = (channel?: NotificationChannel) => {\n\tconst allHistory = [\n\t\t{\n\t\t\tid: \"1\",\n\t\t\tnotificationName: \"Welcome Email\",\n\t\t\tchannel: \"email\" as NotificationChannel,\n\t\t\trecipient: \"test@example.com\",\n\t\t\tstatus: \"sent\" as const,\n\t\t\tsentAt: new Date(Date.now() - 1000 * 60 * 5), // 5 minutes ago\n\t\t\tattempts: 1,\n\t\t\terrorMessage: null,\n\t\t},\n\t\t{\n\t\t\tid: \"2\",\n\t\t\tnotificationName: \"Appointment Confirmation\",\n\t\t\tchannel: \"sms\" as NotificationChannel,\n\t\t\trecipient: \"+1 (555) 123-4567\",\n\t\t\tstatus: \"failed\" as const,\n\t\t\tsentAt: new Date(Date.now() - 1000 * 60 * 15), // 15 minutes ago\n\t\t\tattempts: 3,\n\t\t\terrorMessage: \"Invalid phone number format\",\n\t\t},\n\t\t{\n\t\t\tid: \"3\",\n\t\t\tnotificationName: \"Job Completion\",\n\t\t\tchannel: \"in_app\" as NotificationChannel,\n\t\t\trecipient: \"user_123\",\n\t\t\tstatus: \"sent\" as const,\n\t\t\tsentAt: new Date(Date.now() - 1000 * 60 * 30), // 30 minutes ago\n\t\t\tattempts: 1,\n\t\t\terrorMessage: null,\n\t\t},\n\t\t{\n\t\t\tid: \"4\",\n\t\t\tnotificationName: \"Payment Received\",\n\t\t\tchannel: \"email\" as NotificationChannel,\n\t\t\trecipient: \"customer@example.com\",\n\t\t\tstatus: \"pending\" as const,\n\t\t\tsentAt: new Date(Date.now() - 1000 * 60 * 2), // 2 minutes ago\n\t\t\tattempts: 0,\n\t\t\terrorMessage: null,\n\t\t},\n\t\t{\n\t\t\tid: \"5\",\n\t\t\tnotificationName: \"Technician En Route\",\n\t\t\tchannel: \"push\" as NotificationChannel,\n\t\t\trecipient: \"device_xyz\",\n\t\t\tstatus: \"sent\" as const,\n\t\t\tsentAt: new Date(Date.now() - 1000 * 60 * 45), // 45 minutes ago\n\t\t\tattempts: 1,\n\t\t\terrorMessage: null,\n\t\t},\n\t];\n\n\treturn channel ? allHistory.filter((h) => h.channel === channel) : allHistory;\n};\n\nexport function DeliveryHistory({ channel }: DeliveryHistoryProps) {\n\tconst [history, setHistory] = useState(getMockDeliveryHistory(channel));\n\tconst [isRefreshing, setIsRefreshing] = useState(false);\n\n\tconst handleRefresh = async () => {\n\t\tsetIsRefreshing(true);\n\t\t// Simulate API call\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1000));\n\t\tsetHistory(getMockDeliveryHistory(channel));\n\t\tsetIsRefreshing(false);\n\t};\n\n\tconst handleRetry = async (id: string) => {\n\t\tconsole.log(\"[Notification Retry] Attempting to retry notification:\", id);\n\t\t// Find the notification entry and update its status\n\t\tsetHistory((prev) =>\n\t\t\tprev.map((item) =>\n\t\t\t\titem.id === id ? { ...item, status: \"pending\" as const } : item\n\t\t\t)\n\t\t);\n\t\t// Simulate retry delay\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\t\t// Update status to delivered (in real implementation, this would call the notification API)\n\t\tsetHistory((prev) =>\n\t\t\tprev.map((item) =>\n\t\t\t\titem.id === id\n\t\t\t\t\t? { ...item, status: \"delivered\" as const, timestamp: new Date().toISOString() }\n\t\t\t\t\t: item\n\t\t\t)\n\t\t);\n\t\tconsole.log(\"[Notification Retry] Retry completed for notification:\", id);\n\t};\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader>\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CardTitle>Delivery History</CardTitle>\n\t\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\t\tRecent notification sends {channel && `for ${channel} channel`}\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\tdisabled={isRefreshing}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RefreshCw\n\t\t\t\t\t\t\tclassName={`mr-2 h-4 w-4 ${isRefreshing ? \"animate-spin\" : \"\"}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<CardContent>\n\t\t\t\t<ScrollArea className=\"h-[400px]\">\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableHead>Notification</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Channel</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Recipient</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Status</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Sent</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Attempts</TableHead>\n\t\t\t\t\t\t\t\t<TableHead>Actions</TableHead>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{history.length === 0 ? (\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tcolSpan={7}\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-muted-foreground py-8 text-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tNo delivery history found\n\t\t\t\t\t\t\t\t\t\t{channel && ` for ${channel} channel`}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\thistory.map((item) => (\n\t\t\t\t\t\t\t\t\t<TableRow key={item.id}>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{item.notificationName}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<ChannelBadge channel={item.channel} />\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-mono text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{item.recipient}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<StatusBadge\n\t\t\t\t\t\t\t\t\t\t\t\tstatus={item.status}\n\t\t\t\t\t\t\t\t\t\t\t\terrorMessage={item.errorMessage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{formatDistanceToNow(item.sentAt, { addSuffix: true })}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t\t{item.attempts}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t{item.status === \"failed\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleRetry(item.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RotateCw className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tRetry\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</ScrollArea>\n\n\t\t\t\t{history.length > 0 && (\n\t\t\t\t\t<div className=\"text-muted-foreground mt-4 text-center text-xs\">\n\t\t\t\t\t\tShowing {history.length} recent notifications\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n\nfunction ChannelBadge({ channel }: { channel: NotificationChannel }) {\n\tconst config = {\n\t\temail: {\n\t\t\ticon: <Mail className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-blue-100 text-blue-700\",\n\t\t},\n\t\tsms: {\n\t\t\ticon: <MessageSquare className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-green-100 text-green-700\",\n\t\t},\n\t\tin_app: {\n\t\t\ticon: <Bell className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-purple-100 text-purple-700\",\n\t\t},\n\t\tpush: {\n\t\t\ticon: <Smartphone className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-orange-100 text-orange-700\",\n\t\t},\n\t};\n\n\tconst { icon, color } = config[channel];\n\n\treturn (\n\t\t<Badge\n\t\t\tvariant=\"secondary\"\n\t\t\tclassName={`flex w-fit items-center gap-1 ${color}`}\n\t\t>\n\t\t\t{icon}\n\t\t\t<span className=\"capitalize\">{channel.replace(\"_\", \"-\")}</span>\n\t\t</Badge>\n\t);\n}\n\ninterface StatusBadgeProps {\n\tstatus: \"sent\" | \"pending\" | \"failed\";\n\terrorMessage?: string | null;\n}\n\nfunction StatusBadge({ status, errorMessage }: StatusBadgeProps) {\n\tconst config = {\n\t\tsent: {\n\t\t\ticon: <CheckCircle2 className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-green-100 text-green-700 border-green-300\",\n\t\t\tlabel: \"Sent\",\n\t\t},\n\t\tpending: {\n\t\t\ticon: <Clock className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-yellow-100 text-yellow-700 border-yellow-300\",\n\t\t\tlabel: \"Pending\",\n\t\t},\n\t\tfailed: {\n\t\t\ticon: <XCircle className=\"h-3 w-3\" />,\n\t\t\tcolor: \"bg-red-100 text-red-700 border-red-300\",\n\t\t\tlabel: \"Failed\",\n\t\t},\n\t};\n\n\tconst { icon, color, label } = config[status];\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t<Badge\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tclassName={`flex w-fit items-center gap-1 ${color}`}\n\t\t\t>\n\t\t\t\t{icon}\n\t\t\t\t<span>{label}</span>\n\t\t\t</Badge>\n\t\t\t{errorMessage && (\n\t\t\t\t<p\n\t\t\t\t\tclassName=\"max-w-xs truncate text-xs text-red-600\"\n\t\t\t\t\ttitle={errorMessage}\n\t\t\t\t>\n\t\t\t\t\t{errorMessage}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport {\n\tAlertTriangle,\n\tBell,\n\tCheckCircle2,\n\tExternalLink,\n\tEye,\n\tMail,\n\tMessageSquare,\n\tSend,\n\tSmartphone,\n\tXCircle,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\nimport type {\n\tNotificationChannel,\n\tNotificationDefinition,\n} from \"../notification-registry\";\nimport { EmailPreviewModal } from \"./email-preview-modal\";\nimport { NotificationTestDialog } from \"./notification-test-dialog\";\n\ninterface NotificationTestCardProps {\n\tnotification: NotificationDefinition;\n\tactiveChannel: NotificationChannel | \"all\";\n}\n\nexport function NotificationTestCard({\n\tnotification,\n\tactiveChannel,\n}: NotificationTestCardProps) {\n\tconst [showEmailPreview, setShowEmailPreview] = useState(false);\n\tconst [showTestDialog, setShowTestDialog] = useState(false);\n\tconst [selectedChannel, setSelectedChannel] =\n\t\tuseState<NotificationChannel | null>(null);\n\n\t// Determine which channels to show based on active filter\n\tconst visibleChannels: NotificationChannel[] =\n\t\tactiveChannel === \"all\"\n\t\t\t? ([\"email\", \"sms\", \"in_app\", \"push\"] as NotificationChannel[]).filter(\n\t\t\t\t\t(ch) => notification.channels[ch] !== undefined,\n\t\t\t\t)\n\t\t\t: notification.channels[activeChannel]\n\t\t\t\t? [activeChannel]\n\t\t\t\t: [];\n\n\tconst handleTestClick = (channel: NotificationChannel) => {\n\t\tsetSelectedChannel(channel);\n\t\tsetShowTestDialog(true);\n\t};\n\n\tconst handlePreviewClick = () => {\n\t\tif (notification.channels.email) {\n\t\t\tsetShowEmailPreview(true);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Card className=\"transition-shadow hover:shadow-md\">\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex items-start justify-between\">\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<CardTitle className=\"text-lg\">{notification.name}</CardTitle>\n\t\t\t\t\t\t\t\t<CategoryBadge category={notification.category} />\n\t\t\t\t\t\t\t\t<PriorityBadge priority={notification.priority} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<CardDescription className=\"mt-1\">\n\t\t\t\t\t\t\t\t{notification.description}\n\t\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t{/* Channel Implementation Status */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm font-medium\">\n\t\t\t\t\t\t\tAvailable Channels:\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t{visibleChannels.map((channel) => {\n\t\t\t\t\t\t\t\tconst channelData = notification.channels[channel]!;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ChannelStatusBadge\n\t\t\t\t\t\t\t\t\t\tkey={channel}\n\t\t\t\t\t\t\t\t\t\tchannel={channel}\n\t\t\t\t\t\t\t\t\t\tstatus={channelData.status}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTestClick(channel)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t{visibleChannels.length === 0 && (\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\tNo channels available for current filter\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Implementation Details */}\n\t\t\t\t\t{visibleChannels.map((channel) => {\n\t\t\t\t\t\tconst channelData = notification.channels[channel]!;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={channel} className=\"space-y-1 border-t pt-2 text-xs\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<ChannelIcon channel={channel} className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium capitalize\">\n\t\t\t\t\t\t\t\t\t\t{channel} Implementation:\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{channelData.templatePath && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex items-center gap-1 pl-5\">\n\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-1\">\n\t\t\t\t\t\t\t\t\t\t\t{channelData.templatePath}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelData.templateComponent && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground pl-5\">\n\t\t\t\t\t\t\t\t\t\tComponent:{\" \"}\n\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-1\">\n\t\t\t\t\t\t\t\t\t\t\t{channelData.templateComponent}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelData.templateFunction && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground pl-5\">\n\t\t\t\t\t\t\t\t\t\tFunction:{\" \"}\n\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-1\">\n\t\t\t\t\t\t\t\t\t\t\t{channelData.templateFunction}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelData.triggerFunction && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground pl-5\">\n\t\t\t\t\t\t\t\t\t\tTrigger:{\" \"}\n\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-1\">\n\t\t\t\t\t\t\t\t\t\t\t{channelData.triggerFunction}()\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelData.serviceFunction && (\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground pl-5\">\n\t\t\t\t\t\t\t\t\t\tService:{\" \"}\n\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-1\">\n\t\t\t\t\t\t\t\t\t\t\t{channelData.serviceFunction}()\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t{/* Action Buttons */}\n\t\t\t\t\t<div className=\"flex gap-2 pt-2\">\n\t\t\t\t\t\t{notification.channels.email?.status === \"complete\" && (\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"outline\" onClick={handlePreviewClick}>\n\t\t\t\t\t\t\t\t<Eye className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tPreview Email\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{visibleChannels.some(\n\t\t\t\t\t\t\t(ch) => notification.channels[ch]?.status === \"complete\",\n\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst firstCompleteChannel = visibleChannels.find(\n\t\t\t\t\t\t\t\t\t\t(ch) => notification.channels[ch]?.status === \"complete\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (firstCompleteChannel)\n\t\t\t\t\t\t\t\t\t\thandleTestClick(firstCompleteChannel);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Send className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tSend Test\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Email Preview Modal */}\n\t\t\t{notification.channels.email && (\n\t\t\t\t<EmailPreviewModal\n\t\t\t\t\topen={showEmailPreview}\n\t\t\t\t\tonOpenChange={setShowEmailPreview}\n\t\t\t\t\tnotification={notification}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Test Dialog */}\n\t\t\t{selectedChannel && (\n\t\t\t\t<NotificationTestDialog\n\t\t\t\t\topen={showTestDialog}\n\t\t\t\t\tonOpenChange={setShowTestDialog}\n\t\t\t\t\tnotification={notification}\n\t\t\t\t\tchannel={selectedChannel}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nfunction CategoryBadge({\n\tcategory,\n}: {\n\tcategory: NotificationDefinition[\"category\"];\n}) {\n\tconst colors = {\n\t\tauth: \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300\",\n\t\tjob: \"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300\",\n\t\tbilling:\n\t\t\t\"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300\",\n\t\tcustomer:\n\t\t\t\"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300\",\n\t\tteam: \"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300\",\n\t\tsystem: \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300\",\n\t};\n\n\treturn (\n\t\t<Badge\n\t\t\tvariant=\"secondary\"\n\t\t\tclassName={cn(\"text-xs capitalize\", colors[category])}\n\t\t>\n\t\t\t{category}\n\t\t</Badge>\n\t);\n}\n\nfunction PriorityBadge({\n\tpriority,\n}: {\n\tpriority: NotificationDefinition[\"priority\"];\n}) {\n\tconst config = {\n\t\tlow: { color: \"bg-gray-100 text-gray-600\", label: \"Low\" },\n\t\tmedium: { color: \"bg-blue-100 text-blue-600\", label: \"Medium\" },\n\t\thigh: { color: \"bg-orange-100 text-orange-600\", label: \"High\" },\n\t\turgent: { color: \"bg-red-100 text-red-600\", label: \"Urgent\" },\n\t};\n\n\tconst { color, label } = config[priority];\n\n\treturn (\n\t\t<Badge variant=\"outline\" className={cn(\"text-xs\", color)}>\n\t\t\t{label}\n\t\t</Badge>\n\t);\n}\n\ninterface ChannelStatusBadgeProps {\n\tchannel: NotificationChannel;\n\tstatus: \"complete\" | \"partial\" | \"missing\";\n\tonClick: () => void;\n}\n\nfunction ChannelStatusBadge({\n\tchannel,\n\tstatus,\n\tonClick,\n}: ChannelStatusBadgeProps) {\n\tconst statusConfig = {\n\t\tcomplete: {\n\t\t\ticon: <CheckCircle2 className=\"h-3 w-3\" />,\n\t\t\tcolor:\n\t\t\t\t\"bg-green-100 text-green-700 border-green-300 dark:bg-green-900 dark:text-green-300\",\n\t\t},\n\t\tpartial: {\n\t\t\ticon: <AlertTriangle className=\"h-3 w-3\" />,\n\t\t\tcolor:\n\t\t\t\t\"bg-yellow-100 text-yellow-700 border-yellow-300 dark:bg-yellow-900 dark:text-yellow-300\",\n\t\t},\n\t\tmissing: {\n\t\t\ticon: <XCircle className=\"h-3 w-3\" />,\n\t\t\tcolor:\n\t\t\t\t\"bg-red-100 text-red-700 border-red-300 dark:bg-red-900 dark:text-red-300\",\n\t\t},\n\t};\n\n\tconst config = statusConfig[status];\n\n\treturn (\n\t\t<Badge\n\t\t\tvariant=\"outline\"\n\t\t\tclassName={cn(\n\t\t\t\t\"flex cursor-pointer items-center gap-1 transition-opacity hover:opacity-80\",\n\t\t\t\tconfig.color,\n\t\t\t)}\n\t\t\tonClick={status === \"complete\" ? onClick : undefined}\n\t\t>\n\t\t\t<ChannelIcon channel={channel} className=\"h-3 w-3\" />\n\t\t\t<span className=\"capitalize\">{channel.replace(\"_\", \"-\")}</span>\n\t\t\t{config.icon}\n\t\t</Badge>\n\t);\n}\n\nfunction ChannelIcon({\n\tchannel,\n\tclassName,\n}: {\n\tchannel: NotificationChannel;\n\tclassName?: string;\n}) {\n\tconst icons = {\n\t\temail: <Mail className={className} />,\n\t\tsms: <MessageSquare className={className} />,\n\t\tin_app: <Bell className={className} />,\n\t\tpush: <Smartphone className={className} />,\n\t};\n\n\treturn icons[channel] || null;\n}\n","\"use client\";\n\nimport { Check, Code, Copy, Monitor, Smartphone } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport type { NotificationDefinition } from \"../notification-registry\";\n\ninterface EmailPreviewModalProps {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tnotification: NotificationDefinition;\n}\n\nexport function EmailPreviewModal({\n\topen,\n\tonOpenChange,\n\tnotification,\n}: EmailPreviewModalProps) {\n\tconst [viewMode, setViewMode] = useState<\"desktop\" | \"mobile\">(\"desktop\");\n\tconst [copied, setCopied] = useState(false);\n\n\tconst handleCopyHtml = async () => {\n\t\t// In a real implementation, this would copy the rendered HTML\n\t\t// For now, just show the copied state\n\t\tsetCopied(true);\n\t\tsetTimeout(() => setCopied(false), 2000);\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent className=\"h-[90vh] max-w-6xl\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<span>Email Preview: {notification.name}</span>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tonClick={() => setViewMode(\"desktop\")}\n\t\t\t\t\t\t\t\tclassName={viewMode === \"desktop\" ? \"bg-muted\" : \"\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Monitor className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tDesktop\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tonClick={() => setViewMode(\"mobile\")}\n\t\t\t\t\t\t\t\tclassName={viewMode === \"mobile\" ? \"bg-muted\" : \"\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Smartphone className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tMobile\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tPreview how this email will appear to recipients\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<Tabs defaultValue=\"preview\" className=\"flex-1\">\n\t\t\t\t\t<TabsList>\n\t\t\t\t\t\t<TabsTrigger value=\"preview\">Preview</TabsTrigger>\n\t\t\t\t\t\t<TabsTrigger value=\"html\">HTML</TabsTrigger>\n\t\t\t\t\t\t<TabsTrigger value=\"test-data\">Test Data</TabsTrigger>\n\t\t\t\t\t</TabsList>\n\n\t\t\t\t\t<TabsContent value=\"preview\" className=\"h-[calc(90vh-200px)]\">\n\t\t\t\t\t\t<div className=\"bg-muted/30 flex h-full items-center justify-center rounded-lg\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={`bg-white shadow-lg ${\n\t\t\t\t\t\t\t\t\tviewMode === \"mobile\" ? \"w-[375px]\" : \"w-full max-w-3xl\"\n\t\t\t\t\t\t\t\t} h-full overflow-hidden rounded-lg border`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ScrollArea className=\"h-full\">\n\t\t\t\t\t\t\t\t\t<div className=\"p-6\">\n\t\t\t\t\t\t\t\t\t\t{/* Email Preview Placeholder */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-8 w-3/4 rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-4 w-full rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-4 w-5/6 rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-4 w-4/6 rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-primary mt-6 h-10 w-32 rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted mt-8 h-4 w-full rounded\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-muted h-4 w-2/3 rounded\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{/* Note: In actual implementation, this would render the React Email component */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-8 rounded-lg border border-blue-200 bg-blue-50 p-4\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-800\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Implementation Note:</strong> This will render\n\t\t\t\t\t\t\t\t\t\t\t\tthe actual React Email template from{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<code className=\"rounded bg-blue-100 px-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{notification.channels.email?.templatePath}\n\t\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-2 text-xs text-blue-600\">\n\t\t\t\t\t\t\t\t\t\t\t\tTest data:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{JSON.stringify(notification.testData).substring(\n\t\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t100,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t...\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TabsContent>\n\n\t\t\t\t\t<TabsContent value=\"html\" className=\"h-[calc(90vh-200px)]\">\n\t\t\t\t\t\t<div className=\"relative h-full\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tclassName=\"absolute top-2 right-2 z-10\"\n\t\t\t\t\t\t\t\tonClick={handleCopyHtml}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{copied ? (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Check className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\tCopied\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Copy className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\tCopy HTML\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<ScrollArea className=\"h-full\">\n\t\t\t\t\t\t\t\t<pre className=\"bg-muted overflow-x-auto rounded-lg p-4 text-xs\">\n\t\t\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t\t\t{`<!-- Email Template: ${notification.name} -->\n<!-- Template: ${notification.channels.email?.templatePath} -->\n<!-- Component: ${notification.channels.email?.templateComponent} -->\n\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${notification.name}</title>\n</head>\n<body>\n  <!-- Template will be rendered here -->\n  <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n    <h1>${notification.name}</h1>\n    <p>This is a preview. The actual email template will be rendered here.</p>\n\n    <!-- Test Data -->\n    ${JSON.stringify(notification.testData, null, 2)}\n  </div>\n</body>\n</html>`}\n\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TabsContent>\n\n\t\t\t\t\t<TabsContent value=\"test-data\" className=\"h-[calc(90vh-200px)]\">\n\t\t\t\t\t\t<ScrollArea className=\"h-full\">\n\t\t\t\t\t\t\t<div className=\"space-y-4 p-4\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 font-semibold\">Test Data</h3>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mb-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\tThis data will be used to populate the email template for\n\t\t\t\t\t\t\t\t\t\ttesting\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<pre className=\"bg-muted overflow-x-auto rounded-lg p-4 text-xs\">\n\t\t\t\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t\t\t\t{JSON.stringify(notification.testData, null, 2)}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 font-semibold\">Template Information</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\tTemplate Path:\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-2 py-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.channels.email?.templatePath || \"N/A\"}\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Component:</span>\n\t\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-2 py-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.channels.email?.templateComponent ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"N/A\"}\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Status:</span>\n\t\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-2 py-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.channels.email?.status || \"N/A\"}\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 font-semibold\">Email Metadata</h3>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Category:</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"capitalize\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.category}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Priority:</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"capitalize\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.priority}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\tUser Preference Key:\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<code className=\"bg-muted rounded px-2 py-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{notification.userPreferenceKey || \"None\"}\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t</TabsContent>\n\t\t\t\t</Tabs>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","\"use client\";\n\nimport { AlertCircle, CheckCircle2, Loader2, Send } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { StandardFormField } from \"@/components/ui/standard-form-field\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport type {\n\tNotificationChannel,\n\tNotificationDefinition,\n} from \"../notification-registry\";\n\ninterface NotificationTestDialogProps {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tnotification: NotificationDefinition;\n\tchannel: NotificationChannel;\n}\n\nexport function NotificationTestDialog({\n\topen,\n\tonOpenChange,\n\tnotification,\n\tchannel,\n}: NotificationTestDialogProps) {\n\tconst [recipient, setRecipient] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [result, setResult] = useState<{\n\t\tsuccess: boolean;\n\t\tmessage: string;\n\t} | null>(null);\n\n\tconst getPlaceholder = () => {\n\t\tswitch (channel) {\n\t\t\tcase \"email\":\n\t\t\t\treturn \"test@example.com\";\n\t\t\tcase \"sms\":\n\t\t\t\treturn \"+1 (555) 123-4567\";\n\t\t\tcase \"push\":\n\t\t\t\treturn \"Device ID or subscription endpoint\";\n\t\t\tcase \"in_app\":\n\t\t\t\treturn \"User ID\";\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t};\n\n\tconst getRecipientLabel = () => {\n\t\tswitch (channel) {\n\t\t\tcase \"email\":\n\t\t\t\treturn \"Email Address\";\n\t\t\tcase \"sms\":\n\t\t\t\treturn \"Phone Number\";\n\t\t\tcase \"push\":\n\t\t\t\treturn \"Device/Subscription\";\n\t\t\tcase \"in_app\":\n\t\t\t\treturn \"User ID\";\n\t\t\tdefault:\n\t\t\t\treturn \"Recipient\";\n\t\t}\n\t};\n\n\tconst handleSendTest = async () => {\n\t\tif (!recipient.trim()) {\n\t\t\tsetResult({ success: false, message: \"Please enter a recipient\" });\n\t\t\treturn;\n\t\t}\n\n\t\tsetLoading(true);\n\t\tsetResult(null);\n\n\t\ttry {\n\t\t\t// Call the test API endpoint\n\t\t\tconst response = await fetch(\"/api/notifications/test\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tnotificationId: notification.id,\n\t\t\t\t\tchannel,\n\t\t\t\t\trecipient,\n\t\t\t\t\ttestData: notification.testData,\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tconst data = await response.json();\n\n\t\t\tif (data.success) {\n\t\t\t\tsetResult({\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tmessage:\n\t\t\t\t\t\tdata.message ||\n\t\t\t\t\t\t`Test ${channel} notification sent successfully to ${recipient}`,\n\t\t\t\t});\n\n\t\t\t\t// Reset form after success\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetRecipient(\"\");\n\t\t\t\t\tsetResult(null);\n\t\t\t\t\tonOpenChange(false);\n\t\t\t\t}, 2000);\n\t\t\t} else {\n\t\t\t\tsetResult({\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\tmessage: data.error || \"Failed to send test notification\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tsetResult({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage:\n\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t: \"Failed to send test notification\",\n\t\t\t});\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent className=\"sm:max-w-md\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Send Test Notification</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tSend a test {channel} notification for &quot;{notification.name}\n\t\t\t\t\t\t&quot;\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"space-y-4 py-4\">\n\t\t\t\t\t<StandardFormField label={getRecipientLabel()} htmlFor=\"recipient\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"recipient\"\n\t\t\t\t\t\t\tplaceholder={getPlaceholder()}\n\t\t\t\t\t\t\tvalue={recipient}\n\t\t\t\t\t\t\tonChange={(e) => setRecipient(e.target.value)}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t{channel === \"email\" &&\n\t\t\t\t\t\t\t\t\"Enter an email address to receive the test notification\"}\n\t\t\t\t\t\t\t{channel === \"sms\" &&\n\t\t\t\t\t\t\t\t\"Enter a phone number in E.164 format (+1234567890)\"}\n\t\t\t\t\t\t\t{channel === \"push\" &&\n\t\t\t\t\t\t\t\t\"Enter a push subscription endpoint or device ID\"}\n\t\t\t\t\t\t\t{channel === \"in_app\" &&\n\t\t\t\t\t\t\t\t\"Enter a user ID to receive the in-app notification\"}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label>Test Data Preview</Label>\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tvalue={JSON.stringify(notification.testData, null, 2)}\n\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\tclassName=\"h-32 font-mono text-xs\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\tThis data will be used to populate the notification template\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{result && (\n\t\t\t\t\t\t<Alert variant={result.success ? \"default\" : \"destructive\"}>\n\t\t\t\t\t\t\t{result.success ? (\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<AlertCircle className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<AlertDescription>{result.message}</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tonClick={() => onOpenChange(false)}\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleSendTest}\n\t\t\t\t\t\tdisabled={loading || !recipient.trim()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\tSending...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Send className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tSend Test\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n"],"names":[],"mappings":"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"}