module.exports=[699728,a=>{"use strict";let b=(0,a.i(203431).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},97997,a=>{"use strict";var b=a.i(699728);a.s(["AlertCircle",()=>b.default])},609005,a=>{"use strict";let b=(0,a.i(203431).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["default",()=>b])},96250,a=>{"use strict";var b=a.i(609005);a.s(["CheckCircle2",()=>b.default])},382281,a=>{"use strict";var b=a.i(861467);a.i(156120);var c=a.i(82012),d=a.i(481938);function e({label:a,htmlFor:e,error:f,description:g,required:h,children:i,className:j}){return(0,b.jsxs)("div",{className:(0,d.cn)("space-y-2",j),"data-slot":"form-field",children:[a&&(0,b.jsxs)(c.Label,{htmlFor:e,className:(0,d.cn)(f&&"text-destructive"),"data-error":!!f,children:[a,h&&(0,b.jsx)("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),i,g&&!f&&(0,b.jsx)("p",{className:"text-muted-foreground text-[0.8rem] leading-relaxed",children:g}),f&&(0,b.jsx)("p",{className:"text-destructive text-[0.8rem] font-medium",role:"alert",children:f})]})}function f({children:a,cols:c=2,className:e}){return(0,b.jsx)("div",{className:(0,d.cn)("grid gap-4",{"sm:grid-cols-2":2===c,"sm:grid-cols-2 lg:grid-cols-3":3===c,"sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":4===c},e),children:a})}a.s(["StandardFormField",()=>e,"StandardFormRow",()=>f])},513700,a=>{"use strict";let b=(0,a.i(203431).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b])},198803,a=>{"use strict";var b=a.i(513700);a.s(["Loader2",()=>b.default])},839984,a=>{"use strict";a.i(156120),a.s([])},203431,325509,a=>{"use strict";var b=a.i(783281);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]]));a.s(["default",()=>f],325509);let g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],203431)},445255,a=>{"use strict";a.i(156120),a.s([])},169021,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(782161),g=a.r(753577),h=a.r(10452)},857463,a=>{"use strict";a.i(156120),a.s([])},850180,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(463652),g=a.r(331793),h=a.r(679231),i=f._(a.r(686154));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},75618,(a,b,c)=>{b.exports=a.r(850180)},83783,a=>{"use strict";let b=(0,a.i(203431).default)("image-up",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);a.s(["default",()=>b])},875926,a=>{"use strict";var b=a.i(83783);a.s(["ImageUp",()=>b.default])},292306,a=>{"use strict";var b=a.i(861467),c=a.i(97997),d=a.i(96250),e=a.i(875926),f=a.i(198803),g=a.i(75618),h=a.i(337241),i=a.i(783281),j=a.i(169021),k=(0,j.createServerReference)("4029533ce31a3cebb2d524019c510908187c0a4cad",j.callServer,void 0,j.findSourceMapURL,"completeProfile");a.i(857463);var l=a.i(161367);a.i(445255);var m=a.i(18170);a.i(839984);var n=a.i(372712),o=a.i(382281);let p=["image/jpeg","image/png","image/webp"];function q({existingName:a,existingPhone:j,existingAvatar:q,userEmail:r}){let s=(0,h.useRouter)(),[t,u]=(0,i.useState)(q),[v,w]=(0,i.useState)(!1),[x,y]=(0,i.useState)(null),[z,A]=(0,i.useState)(!1),[B,C]=(0,i.useState)(null);(0,i.useEffect)(()=>()=>{t?.startsWith("blob:")&&URL.revokeObjectURL(t)},[t]);let D=async a=>{a.preventDefault(),C(null),y(null),A(!0);try{let b=new FormData(a.currentTarget),c=await k(b);if(!c.success){C(c.error||"Unable to update your profile right now."),A(!1);return}s.push("/dashboard/welcome")}catch(a){C(a instanceof Error?a.message:"Something went wrong. Please try again."),A(!1)}};return(0,b.jsxs)("div",{className:"flex w-full max-w-lg flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.default,{alt:"Thorbis Logo",className:"size-8.5",height:34,src:"/ThorbisLogo.webp",width:34}),(0,b.jsx)("span",{className:"text-xl font-semibold",children:"Thorbis"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-1.5 text-2xl font-semibold",children:"Complete your profile"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"We need a few more details to get your account set up"})]}),B&&(0,b.jsxs)(l.Alert,{variant:"destructive",children:[(0,b.jsx)(c.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(l.AlertDescription,{children:B})]}),(0,b.jsxs)(l.Alert,{children:[(0,b.jsx)(d.CheckCircle2,{className:"h-4 w-4"}),(0,b.jsxs)(l.AlertDescription,{children:["You signed in with ",(0,b.jsx)("strong",{children:r}),". Just a few more details and you're all set!"]})]}),(0,b.jsxs)("form",{className:"space-y-6",encType:"multipart/form-data",onSubmit:D,children:[!a&&(0,b.jsx)(o.StandardFormField,{label:"Full name",htmlFor:"name",description:"This will be displayed on your profile and in communications",required:!0,children:(0,b.jsx)(n.Input,{autoComplete:"name",autoFocus:!0,disabled:z,id:"name",name:"name",placeholder:"Byron Wade",required:!0})}),!j&&(0,b.jsx)(o.StandardFormField,{label:"Mobile phone",htmlFor:"phone",description:"We'll text urgent dispatch alerts and MFA codes here. Please verify this is a number you can receive texts on.",required:!0,children:(0,b.jsx)(n.Input,{autoComplete:"tel",disabled:z,id:"phone",inputMode:"tel",name:"phone",pattern:"^[0-9+()\\\\s-]{10,}$",placeholder:"+1 (831) 555-0199",required:!0,type:"tel"})}),(0,b.jsx)(o.StandardFormField,{label:(0,b.jsxs)(b.Fragment,{children:["Profile image"," ",q&&!v&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-normal",children:"(from Google)"})]}),htmlFor:"avatar",children:(0,b.jsxs)("div",{className:"border-border/70 flex flex-col gap-4 rounded-2xl border border-dashed p-4 sm:flex-row sm:items-center",children:[(0,b.jsx)("div",{className:"border-border/80 relative size-20 shrink-0 overflow-hidden rounded-full border",children:t?(0,b.jsx)(g.default,{alt:"Avatar preview",className:"object-cover",fill:!0,sizes:"80px",src:t,unoptimized:!0}):(0,b.jsx)("div",{className:"bg-muted text-muted-foreground flex size-full items-center justify-center",children:(0,b.jsx)(e.ImageUp,{className:"h-6 w-6"})})}),(0,b.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,b.jsx)(n.Input,{accept:p.join(","),"aria-describedby":"avatar-helper",disabled:z,id:"avatar",name:"avatar",onChange:a=>{let b=a.target.files?.[0];if(y(null),!b){t?.startsWith("blob:")&&URL.revokeObjectURL(t),u(q),w(!1);return}if(!p.includes(b.type)){y("Please upload a JPG, PNG, or WebP image."),a.target.value="";return}if(b.size>5242880){y("Profile images must be smaller than 5MB."),a.target.value="";return}t?.startsWith("blob:")&&URL.revokeObjectURL(t),u(URL.createObjectURL(b)),w(!0)},type:"file"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",id:"avatar-helper",children:q&&!v?"We found your Google profile photo. Upload a different image if you'd like to change it.":"JPG, PNG, or WebP â€” up to 5MB."}),x&&(0,b.jsx)("p",{className:"text-destructive text-xs",role:"status",children:x})]})]})}),(0,b.jsx)(m.Button,{className:"w-full",disabled:z,type:"submit",children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Completing profile..."]}):"Continue to Thorbis"})]})]})}a.s(["CompleteProfileForm",()=>q],292306)}];

//# sourceMappingURL=_a99ffb49._.js.map