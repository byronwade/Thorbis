module.exports=[699707,a=>{"use strict";var b=a.i(861467),c=a.i(337241),d=a.i(783281),e=a.i(689430);function f({stats:a,children:f}){let g=(0,c.usePathname)()||"/dashboard",h=(0,e.useToolbarStatsStore)(a=>a.setStats),i=(0,e.useToolbarStatsStore)(a=>a.clearStats);return(0,d.useLayoutEffect)(()=>(a?h(g,a):i(g),()=>{i(g)}),[g,a,h,i]),(0,b.jsx)(b.Fragment,{children:f})}a.s(["ToolbarStatsProvider",()=>f])},427573,a=>{"use strict";let b=(0,a.i(203431).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);a.s(["default",()=>b])},757844,a=>{"use strict";var b=a.i(427573);a.s(["Receipt",()=>b.default])},897618,a=>{"use strict";a.i(156120),a.s([])},400355,a=>{"use strict";a.i(156120),a.s([])},761447,949729,a=>{"use strict";var b=a.i(169021),c=(0,b.createServerReference)("70ff12ee81a60340f786414d0baa7af58484dd7488",b.callServer,void 0,b.findSourceMapURL,"updateEntityTags");a.s(["updateEntityTags",()=>c],761447);var d=a.i(861467),e=a.i(638727),f=a.i(414379),g=a.i(300298),h=a.i(337241),i=a.i(783281),j=a.i(156916);a.i(400355);var k=a.i(694340);a.i(445255);var l=a.i(18170);a.i(839984);var m=a.i(372712);a.i(458393);var n=a.i(82012);a.i(297229);var o=a.i(489904);a.i(40744);var p=a.i(419573),q=a.i(382281);let r=[{name:"Red",value:"red",class:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30"},{name:"Orange",value:"orange",class:"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900/30"},{name:"Amber",value:"amber",class:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-900/30"},{name:"Yellow",value:"yellow",class:"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-900/30"},{name:"Green",value:"green",class:"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/30"},{name:"Emerald",value:"emerald",class:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-900/30"},{name:"Teal",value:"teal",class:"bg-teal-100 text-teal-700 border-teal-200 dark:bg-teal-900/20 dark:text-teal-400 dark:border-teal-900/30"},{name:"Blue",value:"blue",class:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900/30"},{name:"Indigo",value:"indigo",class:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-900/30"},{name:"Purple",value:"purple",class:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900/30"},{name:"Pink",value:"pink",class:"bg-pink-100 text-pink-700 border-pink-200 dark:bg-pink-900/20 dark:text-pink-400 dark:border-pink-900/30"},{name:"Gray",value:"gray",class:"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-900/30"}],s=r.reduce((a,b)=>({...a,[b.value]:b.class}),{});function t({entityId:a,entityType:b,tags:c,onUpdateTags:t,readOnly:u=!1}){(0,h.useRouter)();let[v,w]=(0,i.useState)(!1),[x,y]=(0,i.useState)(""),[z,A]=(0,i.useState)("blue"),[B,C]=(0,i.useState)(!1),[D,E]=(0,i.useState)(null),F=a=>"string"==typeof a?a:a.label,G=async()=>{if(!x.trim())return void j.toast.error("Please enter a tag name");C(!0);try{let b={label:x.trim(),color:z},d=[...c,b],e=await t(a,d);e.success?(j.toast.success("Tag added"),w(!1),y(""),A("blue")):j.toast.error(e.error||"Failed to add tag")}catch(a){j.toast.error("Failed to add tag")}finally{C(!1)}},H=async b=>{try{let d=c.filter(a=>{let c=F(a),d=F(b);return c!==d}),e=await t(a,d);e.success?j.toast.success("Tag removed"):j.toast.error(e.error||"Failed to remove tag")}catch(a){j.toast.error("Failed to remove tag")}finally{E(null)}},I=r.find(a=>a.value===z);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[c.map((a,b)=>{let c=F(a),e="string"==typeof a?void 0:a.color,h=e&&s[e]?s[e]:s.blue;return(0,d.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium transition-colors ${h}`,children:[(0,d.jsx)(f.Tag,{className:"size-3"}),(0,d.jsx)("span",{children:c}),!u&&(0,d.jsx)(l.Button,{className:"ml-1 size-4 p-0 hover:bg-black/10 dark:hover:bg-white/10",onClick:()=>E(a),size:"icon",variant:"ghost",children:(0,d.jsx)(g.X,{className:"size-3"})})]},`${c}-${b}`)}),!u&&(0,d.jsxs)(o.Popover,{onOpenChange:w,open:v,children:[(0,d.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)("button",{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-1.5 rounded-full border border-dashed px-3 py-1.5 text-sm font-medium transition-colors",children:[(0,d.jsx)(e.Plus,{className:"size-3"}),(0,d.jsx)("span",{children:"Add Tag"})]})}),(0,d.jsx)(o.PopoverContent,{align:"start",className:"w-80",side:"bottom",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-semibold",children:"Create Custom Tag"}),(0,d.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Add a custom tag for this ",b]})]}),(0,d.jsx)(q.StandardFormField,{label:"Tag Name",htmlFor:"tag-label",children:(0,d.jsx)(m.Input,{id:"tag-label",onChange:a=>y(a.target.value),onKeyDown:a=>{"Enter"===a.key&&G()},placeholder:"e.g., High Priority, VIP, etc.",value:x})}),(0,d.jsx)(q.StandardFormField,{label:"Color",htmlFor:"tag-color",children:(0,d.jsxs)(p.Select,{onValueChange:A,value:z,children:[(0,d.jsx)(p.SelectTrigger,{id:"tag-color",children:(0,d.jsx)(p.SelectValue,{children:I&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:`h-4 w-4 rounded-full ${I.class}`}),(0,d.jsx)("span",{children:I.name})]})})}),(0,d.jsx)(p.SelectContent,{children:r.map(a=>(0,d.jsx)(p.SelectItem,{value:a.value,children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:`h-4 w-4 rounded-full ${a.class}`}),(0,d.jsx)("span",{children:a.name})]})},a.value))})]})}),x&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(n.Label,{children:"Preview"}),(0,d.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium ${I?.class}`,children:[(0,d.jsx)(f.Tag,{className:"size-3"}),(0,d.jsx)("span",{children:x})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(l.Button,{className:"flex-1",onClick:()=>w(!1),variant:"outline",children:"Cancel"}),(0,d.jsx)(l.Button,{className:"flex-1",disabled:B||!x.trim(),onClick:G,children:B?"Saving...":"Add Tag"})]})]})})]})]}),(0,d.jsx)(k.AlertDialog,{onOpenChange:()=>E(null),open:!!D,children:(0,d.jsxs)(k.AlertDialogContent,{children:[(0,d.jsxs)(k.AlertDialogHeader,{children:[(0,d.jsx)(k.AlertDialogTitle,{children:"Remove Tag"}),(0,d.jsxs)(k.AlertDialogDescription,{children:['Are you sure you want to remove the tag "',D?F(D):"",'"? This action cannot be undone.']})]}),(0,d.jsxs)(k.AlertDialogFooter,{children:[(0,d.jsx)(k.AlertDialogCancel,{children:"Cancel"}),(0,d.jsx)(k.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>D&&H(D),children:"Remove"})]})]})})]})}a.s(["EntityTags",()=>t],949729)},151183,a=>{"use strict";var b=a.i(783281);function c(a){(0,b.useEffect)(()=>{let b=b=>{if(!b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)return;let c=a[b.key];c&&(b.preventDefault(),c())};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[a])}a.s(["useSectionShortcuts",()=>c])},687304,a=>{"use strict";let b=(0,a.i(203431).default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);a.s(["default",()=>b])},874544,a=>{"use strict";var b=a.i(687304);a.s(["FileCheck",()=>b.default])},319168,a=>{"use strict";a.i(156120),a.s([])},856218,a=>{"use strict";var b=a.i(169021),c=(0,b.createServerReference)("40e2aa0d05076ccd3498ded44cdcc1b488052809cf",b.callServer,void 0,b.findSourceMapURL,"unlinkJobFromEstimate");a.s(["unlinkJobFromEstimate",()=>c])},247309,a=>{"use strict";let b=(0,a.i(203431).default)("link-2-off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);a.s(["default",()=>b])},10348,a=>{"use strict";var b=a.i(247309);a.s(["Link2Off",()=>b.default])}];

//# sourceMappingURL=_5476d229._.js.map