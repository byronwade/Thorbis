module.exports=[233792,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(321807),e=a.i(48199),f=a.i(263758),g=a.i(587969),h=a.i(624126),i=a.i(274956),j=a.i(187056),k=a.i(789815),l=a.i(824124),m=a.i(383413),n=a.i(898062),o=a.i(638727),p=a.i(530762),q=a.i(232553),r=a.i(127634),s=a.i(102420),t=a.i(352424),u=a.i(688014),v=a.i(320091),w=a.i(24872),x=a.i(362841),y=a.i(145679),z=a.i(337241),A=a.i(783281),B=a.i(836994),C=a.i(770735);a.i(516775);var D=a.i(560272);a.i(288007);var E=a.i(986990);a.i(445255);var F=a.i(18170);a.i(956852);var G=a.i(90125);a.i(839984);var H=a.i(372712);a.i(458393);var I=a.i(82012);a.i(146697);var J=a.i(778737),K=a.i(382281);a.i(897618);var L=a.i(709929);a.i(897346);var M=a.i(75892);a.i(476036);var N=a.i(930514),O=a.i(251048),P=a.i(792268),Q=a.i(637708),R=a.i(700760);function S({entityData:a,metrics:S}){let T=(0,z.useRouter)(),{toast:U}=(0,O.useToast)(),V=(0,z.usePathname)(),[W,X]=(0,A.useState)(a.teamMember),[Y,Z]=(0,A.useState)(!1),[$,_]=(0,A.useState)(!1),aa=(0,Q.useToolbarActionsStore)(a=>a.setActions),{teamMember:ab,user:ac,assignedJobs:ad=[],timeEntries:ae=[],certifications:af=[],activities:ag=[],attachments:ah=[],permissions:ai=[]}=a,aj=(a,b)=>{X(c=>({...c,[a]:b})),Z(!0)},ak=(0,A.useMemo)(()=>ac?.name||W?.name||ab?.name||`${ac?.email||"Unknown User"}`,[ac,W,ab]),al=(W?.status||ab?.status||"active")?.toLowerCase(),am=W?.role?.name||ab?.role?.name||W?.job_title||ab?.job_title||"Team Member",an=W?.department?.name||ab?.department?.name||null,ao=W?.joined_at??ab?.joined_at??W?.created_at??ab?.created_at??null,ap=W?.last_active_at??ab?.last_active_at??null,aq=async()=>{_(!0);try{U.success("Team member updated successfully"),Z(!1)}catch(a){U.error("Failed to update team member")}finally{_(!1)}},ar=()=>{X(ab),Z(!1)},as=[(0,b.jsxs)(E.Badge,{className:"font-mono",variant:"outline",children:["#",ab?.id?.slice(0,8).toUpperCase()||"MEMBER"]},"identifier"),(0,b.jsx)(E.Badge,{variant:(a=>{switch(a){case"active":return"default";case"invited":default:return"secondary";case"suspended":case"inactive":return"destructive"}})(al||"active"),children:"active"===al?"Active":"invited"===al?"Invited":"suspended"===al?"Suspended":"Inactive"},"status"),W?.role?.name?(0,b.jsx)(E.Badge,{style:{backgroundColor:W.role.color||void 0},variant:W.role.color?"default":"secondary",children:W.role.name},"role"):ab?.role?.name?(0,b.jsx)(E.Badge,{style:{backgroundColor:ab.role.color||void 0},variant:ab.role.color?"default":"secondary",children:ab.role.name},"role"):null,an?(0,b.jsxs)(E.Badge,{variant:"outline",children:[(0,b.jsx)(f.Building2,{className:"mr-1 h-3 w-3"})," ",an]},"department"):null].filter(Boolean),at=[{key:"assign-job",label:"Assign Job",icon:x.Wrench,onClick:()=>T.push(`/dashboard/work/new?teamMemberId=${ab.id}`)},{key:"view-schedule",label:"View Schedule",icon:g.Calendar,variant:"secondary",onClick:()=>T.push(`/dashboard/schedule?teamMemberId=${ab.id}`)},{key:"edit-permissions",label:"Edit Permissions",icon:t.Shield,variant:"outline",onClick:()=>T.push(`/dashboard/settings/team/${ab.id}#permissions`)}],au=()=>at.map(a=>{let{key:c,label:d,icon:e,onClick:f}=a,g="variant"in a?a.variant:void 0;return(0,b.jsxs)(F.Button,{onClick:f,size:"sm",variant:g??"default",children:[(0,b.jsx)(e,{className:"mr-2 h-4 w-4"}),d]},c)}),av=(0,A.useCallback)(()=>Y?(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsxs)(F.Button,{disabled:$,onClick:aq,size:"sm",children:[(0,b.jsx)(q.Save,{className:"mr-2 h-4 w-4"}),$?"Saving...":"Save Changes"]}),(0,b.jsx)(F.Button,{onClick:ar,size:"sm",variant:"outline",children:"Cancel"})]}):(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[au(),(0,b.jsx)(J.Separator,{className:"h-6",orientation:"vertical"}),(0,b.jsxs)(G.DropdownMenu,{children:[(0,b.jsx)(G.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(F.Button,{className:"h-8 w-8",size:"icon",variant:"outline",children:[(0,b.jsx)(m.MoreVertical,{className:"size-4"}),(0,b.jsx)("span",{className:"sr-only",children:"More actions"})]})}),(0,b.jsxs)(G.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,b.jsx)(G.DropdownMenuLabel,{className:"text-muted-foreground text-xs font-medium tracking-wide uppercase",children:"Actions"}),(0,b.jsx)(G.DropdownMenuSeparator,{}),(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>T.push(`/dashboard/settings/team/${ab.id}`),children:[(0,b.jsx)(w.UserCog,{className:"mr-2 size-3.5"}),"Edit Full Profile"]}),(0,b.jsx)(G.DropdownMenuSeparator,{}),(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>{},children:[(0,b.jsx)(j.Download,{className:"mr-2 size-3.5"}),"Export to CSV"]}),(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>{},children:[(0,b.jsx)(p.Printer,{className:"mr-2 size-3.5"}),"Print Profile"]}),(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>{},children:[(0,b.jsx)(s.Share2,{className:"mr-2 size-3.5"}),"Share Profile Link"]}),(0,b.jsx)(G.DropdownMenuSeparator,{}),(0,b.jsxs)(G.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>{},children:[(0,b.jsx)(c.Archive,{className:"mr-2 size-3.5"}),"Archive Member"]})]})]})]}),[Y,$,aq,ar,au,T,ab.id]);(0,A.useEffect)(()=>{V&&aa(V,av())},[V,aa,av]);let aw=[{label:"Active Jobs",icon:(0,b.jsx)(x.Wrench,{className:"h-3.5 w-3.5"}),value:S?.activeJobs??0,helperText:"Currently assigned"},{label:"Total Jobs",icon:(0,b.jsx)(u.TrendingUp,{className:"h-3.5 w-3.5"}),value:S?.totalJobs??ad.length,helperText:"All time"},{label:"Hours Worked",icon:(0,b.jsx)(h.Clock,{className:"h-3.5 w-3.5"}),value:`${Math.floor(S?.totalHours??0)}h`},{label:"Certifications",icon:(0,b.jsx)(d.Award,{className:"h-3.5 w-3.5"}),value:S?.activeCertifications??af.length,helperText:"Active"}],ax=(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(e.Briefcase,{className:"h-4 w-4"}),am]}),ao?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"h-4 w-4"}),"Joined ",(0,P.formatDate)(ao,"short")]})]}):null,ap?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,b.jsxs)("span",{className:"text-muted-foreground inline-flex items-center gap-1",children:[(0,b.jsx)(h.Clock,{className:"h-4 w-4"}),"Active ",(0,P.formatDate)(ap,"relative")]})]}):null]}),ay=ak.split(" ").map(a=>a?.[0]).filter(Boolean).join("").slice(0,2).toUpperCase(),az={title:ak,subtitle:ax,badges:as,metadata:aw,leadingVisual:(0,b.jsxs)(D.Avatar,{className:"h-12 w-12",children:[(0,b.jsx)(D.AvatarImage,{alt:ak,src:ac?.avatar??void 0}),(0,b.jsx)(D.AvatarFallback,{children:ay||"TM"})]})},aA=[{key:"email",icon:k.Mail,label:"Email",value:ac?.email??"Not provided",href:ac?.email?`mailto:${ac.email}`:void 0},{key:"phone",icon:n.Phone,label:"Phone",value:ab?.phone??ac?.phone??"Not provided",href:ab?.phone?`tel:${ab.phone}`:void 0},{key:"role",icon:e.Briefcase,label:"Role",value:am},{key:"department",icon:f.Building2,label:"Department",value:an??"Not assigned"}],aB=[{key:"active-jobs",icon:x.Wrench,label:"Active Jobs",value:S?.activeJobs??0},{key:"completed-jobs",icon:u.TrendingUp,label:"Completed",value:S?.completedJobs??0},{key:"hours",icon:h.Clock,label:"Hours Worked",value:`${Math.floor(S?.totalHours??0)}h`},{key:"certifications",icon:d.Award,label:"Certifications",value:`${S?.activeCertifications??0}/${S?.totalCertifications??0}`}],aC=(0,b.jsx)(C.DetailPageSurface,{padding:"lg",variant:"muted",children:(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)(I.Label,{className:"text-muted-foreground text-xs font-medium uppercase",children:"Display Name"}),(0,b.jsx)(H.Input,{className:(0,R.cn)("border-border/40 bg-background focus-visible:ring-primary/50 h-12 rounded-lg border px-4 text-xl font-semibold shadow-none focus-visible:ring-2 sm:text-2xl"),onChange:a=>aj("name",a.target.value),placeholder:"Enter member name...",value:ak}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Update how this team member appears across Thorbis. Changes are saved when you select Save changes."})]}),(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:aA.map(({key:a,icon:c,label:d,value:e,href:f})=>(0,b.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:d}),f?(0,b.jsx)("a",{className:"text-sm font-semibold hover:underline",href:f,children:e}):(0,b.jsx)("span",{className:"text-sm font-semibold",children:e})]})]})},a))}),(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:aB.map(({key:a,icon:c,label:d,value:e})=>(0,b.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:d}),(0,b.jsx)("span",{className:"text-sm font-semibold",children:e})]})]})},a))})]})}),aD=(0,A.useMemo)(()=>[{id:"personal-info",title:"Personal Information",icon:(0,b.jsx)(v.User,{className:"size-4"}),defaultOpen:!0,content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(K.StandardFormField,{label:"Email",htmlFor:"email",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(H.Input,{id:"email",readOnly:!0,type:"email",value:ac?.email||""}),ac?.email&&(0,b.jsx)(F.Button,{asChild:!0,size:"icon",variant:"outline",children:(0,b.jsx)("a",{href:`mailto:${ac.email}`,children:(0,b.jsx)(k.Mail,{className:"size-4"})})})]})}),(0,b.jsx)(K.StandardFormField,{label:"Phone",htmlFor:"phone",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(H.Input,{id:"phone",onChange:a=>aj("phone",a.target.value),type:"tel",value:W.phone||""}),W.phone&&(0,b.jsx)(F.Button,{asChild:!0,size:"icon",variant:"outline",children:(0,b.jsx)("a",{href:`tel:${W.phone}`,children:(0,b.jsx)(n.Phone,{className:"size-4"})})})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(K.StandardFormField,{label:"Job Title",htmlFor:"job_title",children:(0,b.jsx)(H.Input,{id:"job_title",onChange:a=>aj("job_title",a.target.value),value:W.job_title||""})}),(0,b.jsx)(K.StandardFormField,{label:"Notes",htmlFor:"notes",children:(0,b.jsx)(M.Textarea,{id:"notes",onChange:a=>aj("notes",a.target.value),placeholder:"Internal notes about this team member",rows:3,value:W.notes||""})})]})]})})})},{id:"emergency-contact",title:"Emergency Contact",icon:(0,b.jsx)(n.Phone,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(K.StandardFormRow,{cols:3,children:[(0,b.jsx)(K.StandardFormField,{label:"Contact Name",htmlFor:"emergency_contact_name",children:(0,b.jsx)(H.Input,{id:"emergency_contact_name",onChange:a=>aj("emergency_contact_name",a.target.value),placeholder:"Full name",value:W.emergency_contact_name||""})}),(0,b.jsx)(K.StandardFormField,{label:"Contact Phone",htmlFor:"emergency_contact_phone",children:(0,b.jsx)(H.Input,{id:"emergency_contact_phone",onChange:a=>aj("emergency_contact_phone",a.target.value),placeholder:"(555) 123-4567",type:"tel",value:W.emergency_contact_phone||""})}),(0,b.jsx)(K.StandardFormField,{label:"Relationship",htmlFor:"emergency_contact_relationship",children:(0,b.jsx)(H.Input,{id:"emergency_contact_relationship",onChange:a=>aj("emergency_contact_relationship",a.target.value),placeholder:"Spouse, Parent, etc.",value:W.emergency_contact_relationship||""})})]})})})},{id:"employment-details",title:"Employment Details",icon:(0,b.jsx)(e.Briefcase,{className:"size-4"}),defaultOpen:!1,content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Employee ID",htmlFor:"employee_id",children:(0,b.jsx)(H.Input,{id:"employee_id",onChange:a=>aj("employee_id",a.target.value),placeholder:"EMP-001",value:W.employee_id||""})}),(0,b.jsx)(K.StandardFormField,{label:"Hire Date",htmlFor:"hire_date",children:(0,b.jsx)(H.Input,{id:"hire_date",onChange:a=>aj("hire_date",a.target.value),type:"date",value:W.hire_date||""})})]}),(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Employment Type",htmlFor:"employment_type",children:(0,b.jsx)(H.Input,{id:"employment_type",onChange:a=>aj("employment_type",a.target.value),placeholder:"Full Time, Part Time, Contractor",value:W.employment_type||""})}),(0,b.jsx)(K.StandardFormField,{label:"Work Location",htmlFor:"work_location",children:(0,b.jsx)(H.Input,{id:"work_location",onChange:a=>aj("work_location",a.target.value),placeholder:"Office, Field, Remote",value:W.work_location||""})})]}),(0,b.jsx)(K.StandardFormField,{label:"Work Schedule",htmlFor:"work_schedule",children:(0,b.jsx)(M.Textarea,{id:"work_schedule",onChange:a=>aj("work_schedule",a.target.value),placeholder:"Mon-Fri 8am-5pm, etc.",rows:2,value:W.work_schedule||""})})]})})},{id:"compensation",title:"Compensation",icon:(0,b.jsx)(i.DollarSign,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Pay Type",htmlFor:"pay_type",children:(0,b.jsx)(H.Input,{id:"pay_type",onChange:a=>aj("pay_type",a.target.value),placeholder:"Hourly, Salary, Commission",value:W.pay_type||""})}),(0,b.jsx)(K.StandardFormField,{label:"Hourly Rate",htmlFor:"hourly_rate",children:(0,b.jsx)(H.Input,{id:"hourly_rate",onChange:a=>aj("hourly_rate",a.target.value),placeholder:"25.00",type:"number",step:"0.01",value:W.hourly_rate||""})})]}),(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Annual Salary",htmlFor:"annual_salary",children:(0,b.jsx)(H.Input,{id:"annual_salary",onChange:a=>aj("annual_salary",a.target.value),placeholder:"50000.00",type:"number",step:"0.01",value:W.annual_salary||""})}),(0,b.jsx)(K.StandardFormField,{label:"Commission Rate (%)",htmlFor:"commission_rate",children:(0,b.jsx)(H.Input,{id:"commission_rate",onChange:a=>aj("commission_rate",a.target.value),placeholder:"5.00",type:"number",step:"0.01",value:W.commission_rate||""})})]}),(0,b.jsx)(K.StandardFormField,{label:"Overtime Eligible",htmlFor:"overtime_eligible",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{id:"overtime_eligible",type:"checkbox",checked:W.overtime_eligible??!0,onChange:a=>aj("overtime_eligible",a.target.checked),className:"h-4 w-4"}),(0,b.jsx)(I.Label,{htmlFor:"overtime_eligible",children:"Employee is eligible for overtime pay"})]})}),(0,b.jsxs)(K.StandardFormField,{label:"Commission Structure (JSON)",htmlFor:"commission_structure",children:[(0,b.jsx)(M.Textarea,{id:"commission_structure",onChange:a=>aj("commission_structure",a.target.value),placeholder:'{"tiers": [{"min": 0, "max": 10000, "rate": 5}]}',rows:3,value:W.commission_structure?JSON.stringify(W.commission_structure,null,2):""}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Advanced commission structure in JSON format"})]})]})})},{id:"address",title:"Address",icon:(0,b.jsx)(l.MapPin,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(K.StandardFormField,{label:"Street Address",htmlFor:"street_address",children:(0,b.jsx)(H.Input,{id:"street_address",onChange:a=>aj("street_address",a.target.value),placeholder:"123 Main St",value:W.street_address||""})}),(0,b.jsxs)(K.StandardFormRow,{cols:3,children:[(0,b.jsx)(K.StandardFormField,{label:"City",htmlFor:"city",children:(0,b.jsx)(H.Input,{id:"city",onChange:a=>aj("city",a.target.value),placeholder:"San Francisco",value:W.city||""})}),(0,b.jsx)(K.StandardFormField,{label:"State",htmlFor:"state",children:(0,b.jsx)(H.Input,{id:"state",onChange:a=>aj("state",a.target.value),placeholder:"CA",value:W.state||""})}),(0,b.jsx)(K.StandardFormField,{label:"Zip Code",htmlFor:"postal_code",children:(0,b.jsx)(H.Input,{id:"postal_code",onChange:a=>aj("postal_code",a.target.value),placeholder:"94102",value:W.postal_code||""})})]}),(0,b.jsx)(K.StandardFormField,{label:"Country",htmlFor:"country",children:(0,b.jsx)(H.Input,{id:"country",onChange:a=>aj("country",a.target.value),placeholder:"US",value:W.country||"US"})})]})})},{id:"work-preferences",title:"Work Preferences",icon:(0,b.jsx)(r.Settings,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(K.StandardFormField,{label:"Skills",htmlFor:"skills",children:[(0,b.jsx)(M.Textarea,{id:"skills",onChange:a=>aj("skills",a.target.value.split(",").map(a=>a.trim())),placeholder:"HVAC, Plumbing, Electrical (comma separated)",rows:2,value:Array.isArray(W.skills)?W.skills.join(", "):""}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Enter skills separated by commas"})]}),(0,b.jsxs)(K.StandardFormField,{label:"Service Areas",htmlFor:"service_areas",children:[(0,b.jsx)(M.Textarea,{id:"service_areas",onChange:a=>aj("service_areas",a.target.value.split(",").map(a=>a.trim())),placeholder:"San Francisco, Oakland, Berkeley (comma separated)",rows:2,value:Array.isArray(W.service_areas)?W.service_areas.join(", "):""}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Enter service areas separated by commas"})]}),(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Max Weekly Hours",htmlFor:"max_weekly_hours",children:(0,b.jsx)(H.Input,{id:"max_weekly_hours",onChange:a=>aj("max_weekly_hours",a.target.value),placeholder:"40",type:"number",value:W.max_weekly_hours||""})}),(0,b.jsx)(K.StandardFormField,{label:"Preferred Job Types",htmlFor:"preferred_job_types",children:(0,b.jsx)(H.Input,{id:"preferred_job_types",onChange:a=>aj("preferred_job_types",a.target.value.split(",").map(a=>a.trim())),placeholder:"Repair, Maintenance, Installation",value:Array.isArray(W.preferred_job_types)?W.preferred_job_types.join(", "):""})})]}),(0,b.jsxs)(K.StandardFormField,{label:"Availability Schedule (JSON)",htmlFor:"availability_schedule",children:[(0,b.jsx)(M.Textarea,{id:"availability_schedule",onChange:a=>aj("availability_schedule",a.target.value),placeholder:'{"monday": {"start": "08:00", "end": "17:00"}}',rows:4,value:W.availability_schedule?JSON.stringify(W.availability_schedule,null,2):""}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Weekly availability in JSON format"})]})]})})},{id:"performance-tracking",title:"Performance Tracking",icon:(0,b.jsx)(u.TrendingUp,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(K.StandardFormRow,{cols:2,children:[(0,b.jsx)(K.StandardFormField,{label:"Last Review Date",htmlFor:"last_review_date",children:(0,b.jsx)(H.Input,{id:"last_review_date",onChange:a=>aj("last_review_date",a.target.value),type:"date",value:W.last_review_date||""})}),(0,b.jsx)(K.StandardFormField,{label:"Next Review Date",htmlFor:"next_review_date",children:(0,b.jsx)(H.Input,{id:"next_review_date",onChange:a=>aj("next_review_date",a.target.value),type:"date",value:W.next_review_date||""})})]}),(0,b.jsxs)(K.StandardFormField,{label:"Performance Notes",htmlFor:"performance_notes",children:[(0,b.jsx)(M.Textarea,{id:"performance_notes",onChange:a=>aj("performance_notes",a.target.value),placeholder:"Internal performance notes and feedback...",rows:6,value:W.performance_notes||""}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Private notes for manager use only"})]})]})})},{id:"certifications",title:"Skills & Certifications",icon:(0,b.jsx)(d.Award,{className:"size-4"}),count:af.length,actions:(0,b.jsxs)(F.Button,{onClick:()=>{},size:"sm",variant:"outline",children:[(0,b.jsx)(o.Plus,{className:"mr-2 h-4 w-4"})," Add Certification"]}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:af.length>0?(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:af.map(a=>(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,b.jsx)(d.Award,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.issuing_organization||"Certification"})]})]}),(0,b.jsxs)("div",{className:"mt-3 space-y-1 text-sm",children:[a.issue_date&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Issued: ",(0,P.formatDate)(a.issue_date,"short")]}),a.expiry_date&&(0,b.jsxs)("p",{className:(0,R.cn)("text-muted-foreground",new Date(a.expiry_date)<new Date&&"text-destructive"),children:[new Date(a.expiry_date)<new Date?"Expired":"Expires",": ",(0,P.formatDate)(a.expiry_date,"short")]}),a.credential_id&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:["ID: ",a.credential_id]})]})]},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-6 text-center",children:[(0,b.jsx)(d.Award,{className:"text-muted-foreground h-6 w-6"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No certifications on record for this team member yet."})]})})},{id:"assigned-jobs",title:"Assigned Jobs",icon:(0,b.jsx)(x.Wrench,{className:"size-4"}),count:ad.length,actions:(0,b.jsxs)(F.Button,{onClick:()=>T.push(`/dashboard/work/new?teamMemberId=${ab.id}`),size:"sm",variant:"outline",children:[(0,b.jsx)(o.Plus,{className:"mr-2 h-4 w-4"})," Assign Job"]}),content:(0,b.jsxs)(N.UnifiedAccordionContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Jobs currently assigned to this team member."}),ad.length>0?(0,b.jsxs)(L.Table,{children:[(0,b.jsx)(L.TableHeader,{children:(0,b.jsxs)(L.TableRow,{children:[(0,b.jsx)(L.TableHead,{children:"Job #"}),(0,b.jsx)(L.TableHead,{children:"Title"}),(0,b.jsx)(L.TableHead,{children:"Customer"}),(0,b.jsx)(L.TableHead,{children:"Status"}),(0,b.jsx)(L.TableHead,{children:"Scheduled"}),(0,b.jsx)(L.TableHead,{children:"Actions"})]})}),(0,b.jsx)(L.TableBody,{children:ad.map(a=>{let c=a.job;if(!c)return null;let d=c.customer?.display_name||c.customer?.company_name||[c.customer?.first_name,c.customer?.last_name].filter(Boolean).join(" ")||"Unknown Customer";return(0,b.jsxs)(L.TableRow,{children:[(0,b.jsxs)(L.TableCell,{className:"font-mono",children:["#",c.job_number]}),(0,b.jsx)(L.TableCell,{children:c.title||"Untitled Job"}),(0,b.jsx)(L.TableCell,{children:d}),(0,b.jsx)(L.TableCell,{children:(0,b.jsx)(E.Badge,{variant:"outline",children:c.status})}),(0,b.jsx)(L.TableCell,{className:"text-muted-foreground text-sm",children:c.scheduled_start?(0,P.formatDate)(c.scheduled_start,"short"):"Not scheduled"}),(0,b.jsx)(L.TableCell,{children:(0,b.jsx)(F.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(y.default,{href:`/dashboard/work/${c.id}`,children:"View"})})})]},a.id)})})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,b.jsx)(x.Wrench,{className:"text-muted-foreground/50 mb-3 size-12"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"No jobs currently assigned"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Assign jobs to track this member's work"})]})]})},{id:"time-entries",title:"Time Entries",icon:(0,b.jsx)(h.Clock,{className:"size-4"}),count:ae.length,content:(0,b.jsxs)(N.UnifiedAccordionContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Recent time entries and clock in/out history."}),ae.length>0?(0,b.jsxs)(L.Table,{children:[(0,b.jsx)(L.TableHeader,{children:(0,b.jsxs)(L.TableRow,{children:[(0,b.jsx)(L.TableHead,{children:"Date"}),(0,b.jsx)(L.TableHead,{children:"Job"}),(0,b.jsx)(L.TableHead,{children:"Clock In"}),(0,b.jsx)(L.TableHead,{children:"Clock Out"}),(0,b.jsx)(L.TableHead,{children:"Hours"})]})}),(0,b.jsx)(L.TableBody,{children:ae.slice(0,20).map(a=>(0,b.jsxs)(L.TableRow,{children:[(0,b.jsx)(L.TableCell,{children:(0,P.formatDate)(a.clock_in,"short")}),(0,b.jsx)(L.TableCell,{children:a.job?(0,b.jsxs)(y.default,{className:"text-primary hover:underline",href:`/dashboard/work/${a.job.id}`,children:["#",a.job.job_number||"Unknown"]}):"No job"}),(0,b.jsx)(L.TableCell,{children:new Date(a.clock_in).toLocaleTimeString()}),(0,b.jsx)(L.TableCell,{children:a.clock_out?new Date(a.clock_out).toLocaleTimeString():(0,b.jsx)(E.Badge,{variant:"secondary",children:"In progress"})}),(0,b.jsx)(L.TableCell,{children:a.total_hours?`${a.total_hours.toFixed(2)}h`:"—"})]},a.id))})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,b.jsx)(h.Clock,{className:"text-muted-foreground/50 mb-3 size-12"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"No time entries recorded"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Time entries will appear here when work begins"})]})]})},{id:"performance",title:"Performance Metrics",icon:(0,b.jsx)(u.TrendingUp,{className:"size-4"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,b.jsx)(x.Wrench,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Jobs Completed"}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold",children:S?.completedJobs??0})]})]})}),(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,b.jsx)(h.Clock,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Hours"}),(0,b.jsxs)("p",{className:"mt-1 text-2xl font-bold",children:[Math.floor(S?.totalHours??0),"h"]})]})]})}),(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,b.jsx)(u.TrendingUp,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Active Jobs"}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold",children:S?.activeJobs??0})]})]})})]})})},{id:"permissions",title:"Permissions & Access",icon:(0,b.jsx)(t.Shield,{className:"size-4"}),count:ai?.length??0,actions:(0,b.jsx)(F.Button,{onClick:()=>T.push(`/dashboard/settings/team/${ab.id}`),size:"sm",variant:"outline",children:"Edit Permissions"}),content:(0,b.jsx)(N.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Permissions are managed at the role level. This team member has the ",(0,b.jsx)("strong",{children:am})," role",an?(0,b.jsxs)(b.Fragment,{children:[" ","and is assigned to the ",(0,b.jsx)("strong",{children:an})," ","department"]}):"","."]}),ai&&ai.length>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("p",{className:"mb-2 text-sm font-medium",children:["Role Permissions (",ai.length,"):"]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[ai.slice(0,10).map(a=>(0,b.jsx)(E.Badge,{variant:"secondary",children:a.permission_name||a.name||"Permission"},a.id)),ai.length>10&&(0,b.jsxs)(E.Badge,{variant:"outline",children:["+",ai.length-10," more"]})]})]})]})})}],[ac,W,ab,aj,af,ad,ae,ai,S,am,an,T]),aE=(0,A.useMemo)(()=>{let a=[];if(ad.length>0){let b=ad[0]?.job;b&&a.push({id:`job-${b.id}`,type:"job",title:b.title||`Job #${b.job_number}`,subtitle:b.status,href:`/dashboard/work/${b.id}`,badge:b.status?{label:b.status,variant:"outline"}:void 0})}return ac?.email&&a.push({id:`user-${ab.id}`,type:"contact",title:"Primary Email",subtitle:ac.email,href:`mailto:${ac.email}`}),a},[ad,ab.id,ac?.email]);return(0,b.jsx)(B.DetailPageContentLayout,{activities:ag,attachments:ah,beforeContent:aC,customSections:aD,defaultOpenSection:"personal-info",enableReordering:!0,header:az,notes:[],relatedItems:aE,showStandardSections:{notes:!1},storageKey:"team-member-details"})}a.s(["TeamMemberPageContent",()=>S])}];

//# sourceMappingURL=apps_web_src_components_team_team-member-page-content_tsx_a648e86c._.js.map