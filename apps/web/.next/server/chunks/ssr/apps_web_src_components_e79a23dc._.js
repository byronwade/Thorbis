module.exports=[380934,a=>{"use strict";a.i(156120),a.s([])},136196,a=>{"use strict";var b=a.i(861467),c=a.i(97997),d=a.i(359974),e=a.i(638446),f=a.i(541087),g=a.i(624126),h=a.i(274956),i=a.i(128952),j=a.i(127634),k=a.i(339632),l=a.i(774776),m=a.i(362841),n=a.i(145679),o=a.i(783281),p=a.i(478990),q=a.i(169021),r=(0,q.createServerReference)("40b9eadf2dd83c8e7eb22bfad34e05dff7e61cf30b",q.callServer,void 0,q.findSourceMapURL,"getNotifications"),s=a.i(871774),t=a.i(380524);a.i(288007);var u=a.i(986990);a.i(445255);var v=a.i(18170);a.i(380934);var w=a.i(347421),x=a.i(903599),y=a.i(132440);let z={message:i.MessageSquare,alert:c.AlertCircle,payment:h.DollarSign,job:m.Wrench,team:l.UserPlus,system:j.Settings},A={message:"text-primary",alert:"text-warning",payment:"text-success",job:"text-accent-foreground",team:"text-cyan-500",system:"text-muted-foreground"},B={low:"bg-muted text-foreground dark:bg-foreground dark:text-muted-foreground",medium:"bg-primary text-primary dark:bg-primary dark:text-primary",high:"bg-warning text-warning dark:bg-warning dark:text-warning",urgent:"bg-destructive text-destructive dark:bg-destructive dark:text-destructive"};function C(){let[a,c]=(0,o.useState)(!1),[h,i]=(0,o.useState)("all"),[j,l]=(0,o.useState)("all"),m=(0,x.useNotificationsStore)(a=>a.notifications),q=(0,x.useNotificationsStore)(a=>a.setNotifications),C=(0,x.useNotificationsStore)(a=>a.optimisticMarkAsRead),D=(0,x.useNotificationsStore)(a=>a.optimisticMarkAllAsRead),E=(0,x.useNotificationsStore)(a=>a.optimisticDelete),F=(0,x.useNotificationsStore)(a=>a.subscribe),G=(0,x.useNotificationsStore)(a=>a.unsubscribe);(0,o.useEffect)(()=>{async function b(){try{let a=(0,y.createClient)();if(!a)return;let{data:{user:b}}=await a.auth.getUser();if(!b)return;let d=await r({limit:100});d.success&&d.data&&q(d.data),await F(b.id),c(!0)}catch(a){}}return a||b(),()=>{G()}},[a,q,F,G]);let H=async a=>{C(a);let b=await (0,t.markAsRead)(a);b.success||console.error("Failed to mark notification as read:",b.error)},I=async()=>{D();let a=await (0,s.markAllAsRead)();a.success||console.error("Failed to mark all notifications as read:",a.error)},J=async a=>{E(a);let b=await (0,p.deleteNotification)(a);b.success||console.error("Failed to delete notification:",b.error)},K=m.filter(a=>("all"===h||a.type===h)&&("unread"!==j||!a.read)&&("read"!==j||!!a.read)),L=m.filter(a=>!a.read).length;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(w.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(v.Button,{onClick:()=>l("all"),size:"sm",variant:"all"===j?"default":"outline",children:"All"}),(0,b.jsxs)(v.Button,{onClick:()=>l("unread"),size:"sm",variant:"unread"===j?"default":"outline",children:["Unread (",L,")"]}),(0,b.jsx)(v.Button,{onClick:()=>l("read"),size:"sm",variant:"read"===j?"default":"outline",children:"Read"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:L>0&&(0,b.jsxs)(v.Button,{onClick:I,size:"sm",variant:"outline",children:[(0,b.jsx)(f.CheckCheck,{className:"mr-2 size-4"}),"Mark All Read"]})})]}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,b.jsx)(v.Button,{onClick:()=>i("all"),size:"sm",variant:"all"===h?"default":"ghost",children:"All Types"}),["message","alert","payment","job","team","system"].map(a=>{let c=z[a];return(0,b.jsxs)(v.Button,{onClick:()=>i(a),size:"sm",variant:h===a?"default":"ghost",children:[(0,b.jsx)(c,{className:"mr-2 size-3"}),a.charAt(0).toUpperCase()+a.slice(1)]},a)})]})]}),0===K.length?(0,b.jsx)(w.Card,{className:"p-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,b.jsx)(d.Bell,{className:"text-muted-foreground/30 mb-4 size-16"}),(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"No notifications"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"unread"===j?"You're all caught up! No unread notifications.":"all"!==h?`No ${h} notifications found.`:"You don't have any notifications yet."})]})}):(0,b.jsx)("div",{className:"space-y-2",children:K.map(a=>{var c;let d,f,h,i,j=z[a.type];return(0,b.jsx)(w.Card,{className:`p-4 transition-colors ${a.read?"bg-background":"bg-primary/5"}`,children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:`mt-1 shrink-0 ${A[a.type]}`,children:(0,b.jsx)(j,{className:"size-5"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-base font-semibold",children:a.title}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:a.message})]}),(0,b.jsx)(u.Badge,{className:B[a.priority],variant:"outline",children:a.priority})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[(0,b.jsx)(g.Clock,{className:"size-3"}),(c=new Date(a.created_at),f=Math.floor((d=new Date().getTime()-c.getTime())/6e4),h=Math.floor(d/36e5),i=Math.floor(d/864e5),f<1?"Just now":f<60?`${f}m ago`:h<24?`${h}h ago`:i<7?`${i}d ago`:c.toLocaleDateString())]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.action_url&&(0,b.jsx)(n.default,{href:a.action_url,children:(0,b.jsx)(v.Button,{onClick:()=>H(a.id),size:"sm",variant:"ghost",children:a.action_label||"View"})}),!a.read&&(0,b.jsx)(v.Button,{onClick:()=>H(a.id),size:"sm",title:"Mark as read",variant:"ghost",children:(0,b.jsx)(e.Check,{className:"size-4"})}),(0,b.jsx)(v.Button,{className:"hover:text-destructive",onClick:()=>J(a.id),size:"sm",title:"Delete",variant:"ghost",children:(0,b.jsx)(k.Trash2,{className:"size-4"})})]})]})]})]})},a.id)})})]})}a.s(["NotificationsList",()=>C],136196)}];

//# sourceMappingURL=apps_web_src_components_e79a23dc._.js.map