{"version":3,"sources":["../../../../../../apps/web/src/components/work/appointments/dynamic-back-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { ArrowLeft } from \"lucide-react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\n/**\n * Dynamic Back Button\n *\n * Goes back to the referring page (e.g., job details) or falls back to appointments list\n * Shows job number when navigating back to a specific job\n */\nexport function DynamicBackButton() {\n\tconst router = useRouter();\n\tconst searchParams = useSearchParams();\n\tconst jobId = searchParams.get(\"jobId\");\n\tconst [jobNumber, setJobNumber] = useState<string | null>(null);\n\n\t// Fetch job number from localStorage cache if available\n\tuseEffect(() => {\n\t\tif (jobId) {\n\t\t\t// Try to get from localStorage first (cached from job detail page)\n\t\t\tconst cachedJob = localStorage.getItem(`job_${jobId}`);\n\t\t\tif (cachedJob) {\n\t\t\t\ttry {\n\t\t\t\t\tconst job = JSON.parse(cachedJob);\n\t\t\t\t\tsetJobNumber(job.job_number);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// If parsing fails, ignore\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [jobId]);\n\n\tconst handleBack = () => {\n\t\t// If we have a jobId, go back to that job\n\t\tif (jobId) {\n\t\t\trouter.push(`/dashboard/work/${jobId}`);\n\t\t} else {\n\t\t\t// Otherwise go back in history or to appointments list\n\t\t\tif (window.history.length > 1) {\n\t\t\t\trouter.back();\n\t\t\t} else {\n\t\t\t\trouter.push(\"/dashboard/work/appointments\");\n\t\t\t}\n\t\t}\n\t};\n\n\t// Determine button text\n\tconst buttonText = jobNumber ? `Job #${jobNumber}` : jobId ? \"Job\" : \"Back\";\n\n\treturn (\n\t\t<Button\n\t\t\tvariant=\"outline\"\n\t\t\tsize=\"sm\"\n\t\t\tonClick={handleBack}\n\t\t\tclassName=\"h-8 gap-1.5\"\n\t\t>\n\t\t\t<ArrowLeft className=\"size-4\" />\n\t\t\t{buttonText}\n\t\t</Button>\n\t);\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAQO,SAAS,IACf,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,EADe,AACP,CADO,EAAA,EAAA,eAAA,AAAe,IACT,GAAG,CAAC,SACzB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG1D,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACT,GAAI,EAAO,CAEV,IAAM,EAAY,aAAa,OAAO,CAAC,CAAC,IAAI,EAAE,EAAA,CAAO,EACrD,GAAI,EACH,GAAI,CACH,IAAM,CAFO,CAED,KAAK,KAAK,CAAC,GACvB,EAAa,EAAI,UAAU,CAC5B,CAAE,MAAO,EAAG,CAEZ,CAEF,CACD,EAAG,CAAC,EAAM,EAiBV,IAAM,EAAa,EAAY,CAAC,KAAK,EAAE,EAAA,CAAW,CAAG,EAAQ,MAAQ,OAErE,MACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACN,QAAQ,UACR,KAAK,KACL,QArBiB,CAqBR,IAnBN,EACH,EAAO,GADG,CACC,CAAC,CAAC,gBAAgB,EAAE,EAAA,CAAO,EAGlC,OAAO,OAAO,CAAC,MAAM,CAAG,EAC3B,CAD8B,CACvB,IAAI,GAEX,EAAO,IAAI,CAAC,+BAGf,EAUE,UAAU,wBAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,WACpB,IAGJ"}