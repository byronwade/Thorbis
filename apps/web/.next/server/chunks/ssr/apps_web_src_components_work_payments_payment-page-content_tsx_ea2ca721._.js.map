{"version":3,"sources":["../../../../../../apps/web/src/components/work/payments/payment-page-content.tsx"],"sourcesContent":["/**\n * Payment Page Content\n *\n * Comprehensive payment details with collapsible sections\n * Matches job and customer detail page patterns\n */\n\n\"use client\";\n\nimport {\n\tBuilding2,\n\tCalendar,\n\tCreditCard,\n\tDollarSign,\n\tFileText,\n\tReceipt,\n\tRefreshCw,\n\tUser,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useMemo } from \"react\";\nimport { DetailPageContentLayout } from \"@/components/layout/detail-page-content-layout\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tUnifiedAccordionContent,\n\ttype UnifiedAccordionSection,\n} from \"@/components/ui/unified-accordion\";\n\nexport type PaymentData = {\n\tpayment: any;\n\tcustomer?: any;\n\tinvoice?: any;\n\tjob?: any;\n\tpaymentPlanSchedule?: any; // NEW\n\tfinancingProvider?: any; // NEW\n\tnotes?: any[];\n\tactivities?: any[];\n\tattachments?: any[];\n};\n\nexport type PaymentPageContentProps = {\n\tentityData: PaymentData;\n};\n\nfunction formatCurrency(cents: number | null | undefined): string {\n\tif (cents === null || cents === undefined) {\n\t\treturn \"$0.00\";\n\t}\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t}).format(cents / 100);\n}\n\nfunction getPaymentMethodLabel(method: string): string {\n\tconst labels: Record<string, string> = {\n\t\tcash: \"Cash\",\n\t\tcheck: \"Check\",\n\t\tcredit_card: \"Credit Card\",\n\t\tdebit_card: \"Debit Card\",\n\t\tach: \"ACH\",\n\t\twire: \"Wire Transfer\",\n\t\tvenmo: \"Venmo\",\n\t\tpaypal: \"PayPal\",\n\t\tother: \"Other\",\n\t};\n\treturn labels[method] || method;\n}\n\nfunction getStatusBadge(status: string, key?: string) {\n\tconst variants: Record<string, { className: string; label: string }> = {\n\t\tpending: {\n\t\t\tclassName: \"bg-warning text-warning dark:bg-warning/20 dark:text-warning\",\n\t\t\tlabel: \"Pending\",\n\t\t},\n\t\tprocessing: {\n\t\t\tclassName: \"bg-primary text-primary dark:bg-primary/20 dark:text-primary\",\n\t\t\tlabel: \"Processing\",\n\t\t},\n\t\tcompleted: {\n\t\t\tclassName: \"bg-success text-white\",\n\t\t\tlabel: \"Completed\",\n\t\t},\n\t\tfailed: {\n\t\t\tclassName: \"bg-destructive text-white\",\n\t\t\tlabel: \"Failed\",\n\t\t},\n\t\trefunded: {\n\t\t\tclassName: \"bg-warning text-white\",\n\t\t\tlabel: \"Refunded\",\n\t\t},\n\t\tpartially_refunded: {\n\t\t\tclassName: \"bg-warning text-warning dark:bg-warning/20 dark:text-warning\",\n\t\t\tlabel: \"Partially Refunded\",\n\t\t},\n\t\tcancelled: {\n\t\t\tclassName: \"bg-secondary0 text-white\",\n\t\t\tlabel: \"Cancelled\",\n\t\t},\n\t};\n\n\tconst config = variants[status] || {\n\t\tclassName: \"bg-muted text-foreground\",\n\t\tlabel: status,\n\t};\n\n\treturn (\n\t\t<Badge className={config.className} key={key} variant=\"outline\">\n\t\t\t{config.label}\n\t\t</Badge>\n\t);\n}\n\nexport function PaymentPageContent({ entityData }: PaymentPageContentProps) {\n\tconst {\n\t\tpayment,\n\t\tcustomer,\n\t\tinvoice,\n\t\tjob,\n\t\tpaymentPlanSchedule, // NEW\n\t\tfinancingProvider, // NEW\n\t\tnotes = [],\n\t\tactivities = [],\n\t\tattachments = [],\n\t} = entityData;\n\n\tconst headerBadges = [\n\t\tgetStatusBadge(payment.status || \"pending\", \"status\"),\n\t\t<Badge key=\"method\" variant=\"outline\">\n\t\t\t{getPaymentMethodLabel(payment.payment_method || \"other\")}\n\t\t</Badge>,\n\t];\n\n\tconst customHeader = (\n\t\t<div className=\"w-full px-2 sm:px-0\">\n\t\t\t<div className=\"bg-muted/50 rounded-md shadow-sm\">\n\t\t\t\t<div className=\"flex flex-col gap-4 p-4 sm:p-6\">\n\t\t\t\t\t<div className=\"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between\">\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t\t\t{headerBadges}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-2xl font-semibold sm:text-3xl\">\n\t\t\t\t\t\t\t\t\tPayment {payment.payment_number || payment.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm sm:text-base\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(payment.amount)}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{customer && (\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-3\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors\"\n\t\t\t\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<User className=\"size-4\" />\n\t\t\t\t\t\t\t\t{customer.display_name ||\n\t\t\t\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\t\"Unknown Customer\"}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst customSections = useMemo<UnifiedAccordionSection[]>(() => {\n\t\tconst sections: UnifiedAccordionSection[] = [\n\t\t\t{\n\t\t\t\tid: \"payment-details\",\n\t\t\t\ttitle: \"Payment Details\",\n\t\t\t\ticon: <CreditCard className=\"size-4\" />,\n\t\t\t\tdefaultOpen: true,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Payment Number</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={payment.payment_number || payment.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Amount</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={formatCurrency(payment.amount)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Payment Method</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={getPaymentMethodLabel(\n\t\t\t\t\t\t\t\t\t\tpayment.payment_method || \"other\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Status</Label>\n\t\t\t\t\t\t\t\t<div>{getStatusBadge(payment.status || \"pending\")}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{payment.processed_at && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Processed At</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(payment.processed_at).toLocaleString()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.completed_at && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Completed At</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(payment.completed_at).toLocaleString()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.reference_number && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Reference Number</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={payment.reference_number} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.check_number && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Check Number</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={payment.check_number} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.card_last4 && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Card</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={`${payment.card_brand || \"Card\"} •••• ${payment.card_last4}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t];\n\n\t\tif (payment.processor_name || payment.processor_transaction_id) {\n\t\t\tsections.push({\n\t\t\t\tid: \"processor-info\",\n\t\t\t\ttitle: \"Processor Information\",\n\t\t\t\ticon: <Building2 className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t{payment.processor_name && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Processor</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={payment.processor_name} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.processor_transaction_id && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Transaction ID</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={payment.processor_transaction_id} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.processor_fee !== null &&\n\t\t\t\t\t\t\t\tpayment.processor_fee !== undefined && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label>Processor Fee</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\tvalue={formatCurrency(payment.processor_fee)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.net_amount !== null &&\n\t\t\t\t\t\t\t\tpayment.net_amount !== undefined && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label>Net Amount</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\tvalue={formatCurrency(payment.net_amount)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (payment.refunded_amount > 0) {\n\t\t\tsections.push({\n\t\t\t\tid: \"refunds\",\n\t\t\t\ttitle: \"Refunds\",\n\t\t\t\ticon: <RefreshCw className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Refunded Amount</Label>\n\t\t\t\t\t\t\t\t<p className=\"text-sm font-semibold\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(payment.refunded_amount)}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{payment.refund_reason && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Refund Reason</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">{payment.refund_reason}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{payment.refunded_at && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Refunded At</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t{new Date(payment.refunded_at).toLocaleString()}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (customer) {\n\t\t\tsections.push({\n\t\t\t\tid: \"customer-details\",\n\t\t\t\ttitle: \"Customer Details\",\n\t\t\t\ticon: <User className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n\t\t\t\t\t\t\t<div className=\"grid flex-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Name</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t{customer.display_name ||\n\t\t\t\t\t\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\t\t\t\"Unknown\"}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Email</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">{customer.email || \"N/A\"}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Phone</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">{customer.phone || \"N/A\"}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t<Link href={`/dashboard/customers/${customer.id}`}>\n\t\t\t\t\t\t\t\t\tView Full Profile\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (invoice) {\n\t\t\tsections.push({\n\t\t\t\tid: \"invoice-details\",\n\t\t\t\ttitle: \"Related Invoice\",\n\t\t\t\ticon: <Receipt className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n\t\t\t\t\t\t\t<div className=\"grid flex-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Invoice Number</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{invoice.invoice_number || invoice.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Invoice Amount</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(invoice.total_amount)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Status</Label>\n\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{invoice.status || \"N/A\"}</Badge>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/invoices/${invoice.id}`}>\n\t\t\t\t\t\t\t\t\tView Invoice\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (job) {\n\t\t\tsections.push({\n\t\t\t\tid: \"job-details\",\n\t\t\t\ttitle: \"Related Job\",\n\t\t\t\ticon: <FileText className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n\t\t\t\t\t\t\t<div className=\"grid flex-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Job Number</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{job.job_number || job.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Title</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">{job.title || \"N/A\"}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/${job.id}`}>View Job</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// NEW: Payment Plan Schedule Section\n\t\tif (paymentPlanSchedule) {\n\t\t\tconst plan = Array.isArray(paymentPlanSchedule.payment_plan)\n\t\t\t\t? paymentPlanSchedule.payment_plan[0]\n\t\t\t\t: paymentPlanSchedule.payment_plan;\n\n\t\t\tsections.push({\n\t\t\t\tid: \"payment-plan\",\n\t\t\t\ttitle: \"Payment Plan\",\n\t\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t<div className=\"bg-card rounded-lg border p-4\">\n\t\t\t\t\t\t\t\t<Label className=\"mb-2 block text-xs\">Plan Details</Label>\n\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tPlan Name:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{plan?.name || \"Payment Plan\"}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tTotal Amount:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(plan?.total_amount)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tTotal Payments:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{plan?.number_of_payments || 0}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tThis Payment:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t#{paymentPlanSchedule.installment_number} of{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{plan?.number_of_payments}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\tDue Date:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{paymentPlanSchedule.due_date\n\t\t\t\t\t\t\t\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpaymentPlanSchedule.due_date,\n\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()\n\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{plan?.invoice && (\n\t\t\t\t\t\t\t\t<Button asChild className=\"w-full\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/invoices/${plan.invoice.id}`}>\n\t\t\t\t\t\t\t\t\t\tView Related Invoice #{plan.invoice.invoice_number}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// NEW: Financing Provider Section\n\t\tif (financingProvider) {\n\t\t\tsections.push({\n\t\t\t\tid: \"financing\",\n\t\t\t\ttitle: \"Financing Provider\",\n\t\t\t\ticon: <DollarSign className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"bg-card rounded-lg border p-4\">\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Provider Name</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{financingProvider.name}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Type</Label>\n\t\t\t\t\t\t\t\t\t<Badge className=\"capitalize\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t{financingProvider.provider_type}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{financingProvider.contact_email && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Contact Email</Label>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary block text-sm hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\thref={`mailto:${financingProvider.contact_email}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{financingProvider.contact_email}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{financingProvider.contact_phone && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Contact Phone</Label>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary block text-sm hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\thref={`tel:${financingProvider.contact_phone}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{financingProvider.contact_phone}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\treturn sections;\n\t}, [payment, customer, invoice, job, paymentPlanSchedule, financingProvider]);\n\n\tconst relatedItems = useMemo(() => {\n\t\tconst items: any[] = [];\n\n\t\tif (customer) {\n\t\t\titems.push({\n\t\t\t\tid: `customer-${customer.id}`,\n\t\t\t\ttype: \"customer\",\n\t\t\t\ttitle:\n\t\t\t\t\tcustomer.display_name ||\n\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\"Unknown Customer\",\n\t\t\t\tsubtitle: customer.email || customer.phone || undefined,\n\t\t\t\thref: `/dashboard/customers/${customer.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (invoice) {\n\t\t\titems.push({\n\t\t\t\tid: `invoice-${invoice.id}`,\n\t\t\t\ttype: \"invoice\",\n\t\t\t\ttitle: `Invoice #${invoice.invoice_number || invoice.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: formatCurrency(invoice.total_amount),\n\t\t\t\thref: `/dashboard/work/invoices/${invoice.id}`,\n\t\t\t\tbadge: invoice.status\n\t\t\t\t\t? { label: invoice.status, variant: \"outline\" as const }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\tif (job) {\n\t\t\titems.push({\n\t\t\t\tid: `job-${job.id}`,\n\t\t\t\ttype: \"job\",\n\t\t\t\ttitle: job.title || `Job #${job.job_number || job.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: job.status,\n\t\t\t\thref: `/dashboard/work/${job.id}`,\n\t\t\t\tbadge: job.status\n\t\t\t\t\t? { label: job.status, variant: \"outline\" as const }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [customer, invoice, job]);\n\n\treturn (\n\t\t<DetailPageContentLayout\n\t\t\tactivities={activities}\n\t\t\tattachments={attachments}\n\t\t\tcustomHeader={customHeader}\n\t\t\tcustomSections={customSections}\n\t\t\tdefaultOpenSection=\"payment-details\"\n\t\t\tnotes={notes}\n\t\t\trelatedItems={relatedItems}\n\t\t\tshowStandardSections={{\n\t\t\t\tactivities: true,\n\t\t\t\tnotes: true,\n\t\t\t\tattachments: true,\n\t\t\t\trelatedItems: true,\n\t\t\t}}\n\t\t/>\n\t);\n}\n"],"names":[],"mappings":"wCAKC,IAAA,EAAA,EAAA,CAAA,CAAA,QAID,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAUA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAqBA,SAAS,EAAe,CAAgC,SACvD,MAAI,EACI,QADM,AAGP,IAAI,IAHW,CAGN,SAHgB,GAGJ,CAAC,OAHc,CAGL,CACrC,MAAO,WACP,SAAU,KACX,GAAG,MAAM,CAAC,EAAQ,IACnB,CAEA,SAAS,EAAsB,CAAc,EAY5C,MAAO,CAXgC,CACtC,KAAM,OACN,MAAO,QACP,YAAa,cACb,WAAY,aACZ,IAAK,MACL,KAAM,gBACN,MAAO,QACP,OAAQ,SACR,MAAO,QACR,CACa,CAAC,EAAO,EAAI,CAC1B,CAEA,SAAS,EAAe,CAAc,CAAE,CAAY,EAgCnD,IAAM,EAAS,AA/BwD,CACtE,QAAS,CACR,UAAW,+DACX,MAAO,SACR,EACA,WAAY,CACX,UAAW,+DACX,MAAO,YACR,EACA,UAAW,CACV,UAAW,wBACX,MAAO,WACR,EACA,OAAQ,CACP,UAAW,4BACX,MAAO,QACR,EACA,SAAU,CACT,UAAW,wBACX,MAAO,UACR,EACA,mBAAoB,CACnB,UAAW,+DACX,MAAO,oBACR,EACA,UAAW,CACV,UAAW,2BACX,MAAO,WACR,CACD,CAEuB,CAAC,EAAO,EAAI,CAClC,UAAW,2BACX,MAAO,CACR,EAEA,MACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,EAAO,SAAS,CAAY,QAAQ,mBACpD,EAAO,KAAK,EAD2B,EAI3C,CAEO,SAAS,EAAmB,CAAE,YAAU,CAA2B,EACzE,GAAM,SACL,CAAO,UACP,CAAQ,CACR,SAAO,KACP,CAAG,qBACH,CAAmB,mBACnB,CAAiB,OACjB,EAAQ,EAAE,YACV,EAAa,EAAE,aACf,EAAc,EAAE,CAChB,CAAG,EAEE,EAAe,CACpB,EAAe,EAAQ,MAAM,EAAI,UAAW,UAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAc,QAAQ,mBAC1B,EAAsB,EAAQ,cAAc,EAAI,UADvC,UAGX,CAEK,EACL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6EACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,IAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACd,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+CAAqC,WACzC,EAAQ,cAAc,EAAI,EAAQ,EAAE,CAAC,KAAK,CAAC,EAAG,MAExD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDACX,EAAe,EAAQ,MAAM,YAMjC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACJ,UAAU,+KACV,KAAM,CAAC,qBAAqB,EAAE,EAAS,EAAE,CAAA,CAAE,WAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,WACf,EAAS,YAAY,EACrB,CAAA,EAAG,EAAS,UAAU,EAAI,GAAG,CAAC,EAAE,EAAS,SAAS,EAAI,GAAA,CAAI,CAAC,IAAI,IAC/D,+BASF,EAAiB,CAAA,EAAA,EAAA,OAAA,AAAO,EAA4B,KACzD,IAAM,EAAsC,CAC3C,CACC,GAAI,kBACJ,MAAO,kBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,WAC5B,aAAa,EACb,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,mBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,EAAQ,cAAc,EAAI,EAAQ,EAAE,CAAC,KAAK,CAAC,EAAG,QAGvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,CAAA,CAAA,EAAC,MAAO,EAAe,EAAQ,MAAM,OAErD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,mBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,EACN,EAAQ,cAAc,EAAI,cAI7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAe,EAAQ,MAAM,EAAI,gBAEvC,EAAQ,YAAY,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,iBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,IAAI,KAAK,EAAQ,YAAY,EAAE,cAAc,QAItD,EAAQ,YAAY,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,iBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,IAAI,KAAK,EAAQ,YAAY,EAAE,cAAc,QAItD,EAAQ,gBAAgB,EACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,qBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,CAAA,CAAA,EAAC,MAAO,EAAQ,gBAAgB,MAGhD,EAAQ,YAAY,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,iBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,CAAA,CAAA,EAAC,MAAO,EAAQ,YAAY,MAG5C,EAAQ,UAAU,EAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,SACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,CAAA,EAAG,EAAQ,UAAU,EAAI,OAAO,MAAM,EAAE,EAAQ,UAAU,CAAA,CAAE,UAO1E,EACA,CA0LD,IAxLI,EAAQ,cAAc,EAAI,EAAQ,wBAAA,AAAwB,EAAE,CAC/D,EAAS,IAAI,CAAC,CACb,GAAI,iBACJ,MAAO,wBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,WAC3B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,EAAQ,cAAc,EACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,cACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,CAAA,CAAA,EAAC,MAAO,EAAQ,cAAc,MAG9C,EAAQ,wBAAwB,EAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,mBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,CAAA,CAAA,EAAC,MAAO,EAAQ,wBAAwB,MAG9B,OAA1B,EAAQ,aAAa,OACK,IAA1B,EAAQ,aAAa,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,kBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,EAAe,EAAQ,aAAa,OAIvB,OAAvB,EAAQ,UAAU,OACK,IAAvB,EAAQ,UAAU,EACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,eACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACL,QAAQ,CAAA,CAAA,EACR,MAAO,EAAe,EAAQ,UAAU,WAOhD,GAGG,EAAQ,eAAe,CAAG,GAAG,AAChC,EAAS,IAAI,CAAC,CACb,GAAI,UACJ,MAAO,UACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,WAC3B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,oBACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACX,EAAe,EAAQ,eAAe,OAGxC,EAAQ,aAAa,EACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,kBACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAQ,aAAa,MAG9C,EAAQ,WAAW,EACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,gBACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBACX,IAAI,KAAK,EAAQ,WAAW,EAAE,cAAc,YAOpD,GAGG,GACH,EAAS,IAAI,CADA,AACC,CACb,GAAI,mBACJ,MAAO,mBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,WACtB,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,SACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBACX,EAAS,YAAY,EACrB,CAAA,EAAG,EAAS,UAAU,EAAI,GAAG,CAAC,EAAE,EAAS,SAAS,EAAI,GAAA,CAAI,CAAC,IAAI,IAC/D,eAGH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,UACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAS,KAAK,EAAI,WAE3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,UACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAS,KAAK,EAAI,cAG5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,KAAK,KAAK,QAAQ,iBACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,qBAAqB,EAAE,EAAS,EAAE,CAAA,CAAE,UAAE,4BAOxD,GAGG,GACH,EAAS,IADG,AACC,CAAC,CACb,GAAI,kBACJ,MAAO,kBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,WACzB,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,mBACP,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oBAAU,IACpB,EAAQ,cAAc,EAAI,EAAQ,EAAE,CAAC,KAAK,CAAC,EAAG,SAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,mBACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBACX,EAAe,EAAQ,YAAY,OAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAW,EAAQ,MAAM,EAAI,cAG9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,KAAK,KAAK,QAAQ,iBACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,yBAAyB,EAAE,EAAQ,EAAE,CAAA,CAAE,UAAE,uBAO3D,GAGG,GACH,EADQ,AACC,IAAI,CAAC,CACb,GAAI,cACJ,MAAO,cACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,WAC1B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,eACP,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oBAAU,IACpB,EAAI,UAAU,EAAI,EAAI,EAAE,CAAC,KAAK,CAAC,EAAG,SAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,UACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAI,KAAK,EAAI,cAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,KAAK,KAAK,QAAQ,iBACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,gBAAgB,EAAE,EAAI,EAAE,CAAA,CAAE,UAAE,mBAK9C,GAIG,EAAqB,CACxB,IAAM,EAAO,MAAM,OAAO,CAAC,EAAoB,YAAY,EACxD,EAAoB,YAAY,CAAC,EAAE,CACnC,EAAoB,YAAY,CAEnC,EAAS,IAAI,CAAC,CACb,GAAI,eACJ,MAAO,eACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,WAC1B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,8BAAqB,iBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,eAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BACd,GAAM,MAAQ,oBAGjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,kBAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BACd,EAAe,GAAM,mBAGxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,oBAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BACd,GAAM,oBAAsB,OAG/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,kBAGhD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,gCAAsB,IACnC,EAAoB,kBAAkB,CAAC,MAAI,IAC5C,GAAM,yBAGT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,cAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BACd,EAAoB,QAAQ,CAC1B,IAAI,KACJ,EAAoB,QAAQ,EAC3B,kBAAkB,GACnB,eAKN,GAAM,SACN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,UAAU,SAAS,QAAQ,mBAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,yBAAyB,EAAE,EAAK,OAAO,CAAC,EAAE,CAAA,CAAE,WAAE,yBACnC,EAAK,OAAO,CAAC,cAAc,UAOzD,EACD,CAqDA,OAlDI,GACH,EAAS,IAAI,CAAC,CACb,GAAI,KAFiB,OAGrB,MAAO,qBACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,WAC5B,QACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,UACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,mBAAU,kBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BACX,EAAkB,IAAI,MAGzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,mBAAU,SAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,aAAa,QAAQ,mBACpC,EAAkB,aAAa,MAGjC,EAAkB,aAAa,EAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,mBAAU,kBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACA,UAAU,6CACV,KAAM,CAAC,OAAO,EAAE,EAAkB,aAAa,CAAA,CAAE,UAEhD,EAAkB,aAAa,MAIlC,EAAkB,aAAa,EAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,mBAAU,kBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACA,UAAU,6CACV,KAAM,CAAC,IAAI,EAAE,EAAkB,aAAa,CAAA,CAAE,UAE7C,EAAkB,aAAa,YAQxC,GAGM,CACR,EAAG,CAAC,EAAS,EAAU,EAAS,EAAK,EAAqB,EAAkB,EAEtE,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC5B,IAAM,EAAe,EAAE,CAyCvB,OAvCI,GACH,EAAM,IAAI,CAAC,AADE,CAEZ,GAAI,CAAC,SAAS,EAAE,EAAS,EAAE,CAAA,CAAE,CAC7B,KAAM,WACN,MACC,EAAS,YAAY,EACrB,CAAA,EAAG,EAAS,UAAU,EAAI,GAAG,CAAC,EAAE,EAAS,SAAS,EAAI,GAAA,CAAI,CAAC,IAAI,IAC/D,mBACD,SAAU,EAAS,KAAK,EAAI,EAAS,KAAK,OAAI,EAC9C,KAAM,CAAC,qBAAqB,EAAE,EAAS,EAAE,CAAA,CAAE,AAC5C,GAGG,GACH,EAAM,IADM,AACF,CAAC,CACV,GAAI,CAAC,QAAQ,EAAE,EAAQ,EAAE,CAAA,CAAE,CAC3B,KAAM,UACN,MAAO,CAAC,SAAS,EAAE,EAAQ,cAAc,EAAI,EAAQ,EAAE,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CACrE,SAAU,EAAe,EAAQ,YAAY,EAC7C,KAAM,CAAC,yBAAyB,EAAE,EAAQ,EAAE,CAAA,CAAE,CAC9C,MAAO,EAAQ,MAAM,CAClB,CAAE,MAAO,EAAQ,MAAM,CAAE,QAAS,SAAmB,OACrD,CACJ,GAGG,GACH,EADQ,AACF,IAAI,CAAC,CACV,GAAI,CAAC,IAAI,EAAE,EAAI,EAAE,CAAA,CAAE,CACnB,KAAM,MACN,MAAO,EAAI,KAAK,EAAI,CAAC,KAAK,EAAE,EAAI,UAAU,EAAI,EAAI,EAAE,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CAClE,SAAU,EAAI,MAAM,CACpB,KAAM,CAAC,gBAAgB,EAAE,EAAI,EAAE,CAAA,CAAE,CACjC,MAAO,EAAI,MAAM,CACd,CAAE,MAAO,EAAI,MAAM,CAAE,QAAS,SAAmB,OACjD,CACJ,GAGM,CACR,EAAG,CAAC,EAAU,EAAS,EAAI,EAE3B,MACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,uBAAuB,CAAA,CACvB,WAAY,EACZ,YAAa,EACb,aAAc,EACd,eAAgB,EAChB,mBAAmB,kBACnB,MAAO,EACP,aAAc,EACd,qBAAsB,CACrB,YAAY,EACZ,OAAO,EACP,aAAa,EACb,cAAc,CACf,GAGH"}