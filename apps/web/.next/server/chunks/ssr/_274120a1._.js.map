{"version":3,"sources":["../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/arrow-up.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/paperclip.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/camera.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/message-square-text.ts","../../../../../../node_modules/.pnpm/lucide-react%400.552.0_react%4019.2.0/node_modules/lucide-react/src/icons/smile.ts","../../../../../../apps/web/src/components/communication/teams-page-client.tsx","../../../../../../apps/web/src/actions/data%3A9caa44%20%3Ctext/javascript%3E","../../../../../../apps/web/src/actions/data%3A6ed6a2%20%3Ctext/javascript%3E","../../../../../../apps/web/src/actions/data%3Aa8cbf1%20%3Ctext/javascript%3E"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm5 12 7-7 7 7', key: 'hav0vg' }],\n  ['path', { d: 'M12 19V5', key: 'x0mq9r' }],\n];\n\n/**\n * @component @name ArrowUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSAxMiA3LTcgNyA3IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOVY1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUp = createLucideIcon('arrow-up', __iconNode);\n\nexport default ArrowUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551',\n      key: '1miecu',\n    },\n  ],\n];\n\n/**\n * @component @name Paperclip\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgNi04LjQxNCA4LjU4NmEyIDIgMCAwIDAgMi44MjkgMi44MjlsOC40MTQtOC41ODZhNCA0IDAgMSAwLTUuNjU3LTUuNjU3bC04LjM3OSA4LjU1MWE2IDYgMCAxIDAgOC40ODUgOC40ODVsOC4zNzktOC41NTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/paperclip\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Paperclip = createLucideIcon('paperclip', __iconNode);\n\nexport default Paperclip;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z',\n      key: '18u6gg',\n    },\n  ],\n  ['circle', { cx: '12', cy: '13', r: '3', key: '1vg3eu' }],\n];\n\n/**\n * @component @name Camera\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMuOTk3IDRhMiAyIDAgMCAxIDEuNzYgMS4wNWwuNDg2LjlBMiAyIDAgMCAwIDE4LjAwMyA3SDIwYTIgMiAwIDAgMSAyIDJ2OWEyIDIgMCAwIDEtMiAySDRhMiAyIDAgMCAxLTItMlY5YTIgMiAwIDAgMSAyLTJoMS45OTdhMiAyIDAgMCAwIDEuNzU5LTEuMDQ4bC40ODktLjkwNEEyIDIgMCAwIDEgMTAuMDA0IDR6IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTMiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/camera\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Camera = createLucideIcon('camera', __iconNode);\n\nexport default Camera;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z',\n      key: '18887p',\n    },\n  ],\n  ['path', { d: 'M7 11h10', key: '1twpyw' }],\n  ['path', { d: 'M7 15h6', key: 'd9of3u' }],\n  ['path', { d: 'M7 7h8', key: 'af5zfr' }],\n];\n\n/**\n * @component @name MessageSquareText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTdhMiAyIDAgMCAxLTIgMkg2LjgyOGEyIDIgMCAwIDAtMS40MTQuNTg2bC0yLjIwMiAyLjIwMkEuNzEuNzEgMCAwIDEgMiAyMS4yODZWNWEyIDIgMCAwIDEgMi0yaDE2YTIgMiAwIDAgMSAyIDJ6IiAvPgogIDxwYXRoIGQ9Ik03IDExaDEwIiAvPgogIDxwYXRoIGQ9Ik03IDE1aDYiIC8+CiAgPHBhdGggZD0iTTcgN2g4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/message-square-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquareText = createLucideIcon('message-square-text', __iconNode);\n\nexport default MessageSquareText;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 14s1.5 2 4 2 4-2 4-2', key: '1y1vjs' }],\n  ['line', { x1: '9', x2: '9.01', y1: '9', y2: '9', key: 'yxxnd0' }],\n  ['line', { x1: '15', x2: '15.01', y1: '9', y2: '9', key: '1p4y9e' }],\n];\n\n/**\n * @component @name Smile\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxNHMxLjUgMiA0IDIgNC0yIDQtMiIgLz4KICA8bGluZSB4MT0iOSIgeDI9IjkuMDEiIHkxPSI5IiB5Mj0iOSIgLz4KICA8bGluZSB4MT0iMTUiIHgyPSIxNS4wMSIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/smile\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Smile = createLucideIcon('smile', __iconNode);\n\nexport default Smile;\n","/**\n * Teams Communication Page\n * \n * Slack-style Teams interface with channels sidebar and chat\n * Route: /dashboard/communication/teams?channel=general\n * \n * Shows channels in sidebar, chat interface on the right\n */\n\n\"use client\";\n\nimport { SmsMessageInput } from \"@/components/communication/sms-message-input\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { cn } from \"@/lib/utils\";\nimport { useSidebar } from \"@/components/ui/sidebar\";\nimport type { TeamChannel } from \"@/lib/queries/teams\";\nimport {\n    Hash,\n    Loader2,\n    MessageSquare,\n    MoreHorizontal,\n    PanelLeft,\n    Paperclip,\n    RefreshCw,\n    Search,\n    X,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport type { CompanySms } from \"@/actions/sms-actions\";\nimport { getTeamChannelMessagesAction, sendTeamChannelMessageAction, markTeamChannelAsReadAction } from \"@/actions/teams-actions\";\n\ntype ChannelMessage = CompanySms & {\n    sent_by_user?: {\n        id: string;\n        name: string | null;\n        avatar: string | null;\n    } | null;\n};\n\nconst DEFAULT_CHANNELS = [\n    { id: \"general\", name: \"General\", type: \"public\" as const },\n    { id: \"sales\", name: \"Sales\", type: \"public\" as const },\n    { id: \"support\", name: \"Support\", type: \"public\" as const },\n    { id: \"technicians\", name: \"Technicians\", type: \"public\" as const },\n    { id: \"management\", name: \"Management\", type: \"private\" as const },\n];\n\ntype TeamsPageClientProps = {\n    initialChannels: TeamChannel[];\n    initialChannelId: string | null;\n};\n\nexport function TeamsPageClient({ initialChannels, initialChannelId }: TeamsPageClientProps) {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const channelId = searchParams.get(\"channel\") || initialChannelId || \"general\";\n    const { toggleSidebar } = useSidebar();\n\n    // Use database channels if available, otherwise fallback to DEFAULT_CHANNELS\n    const channels = initialChannels.length > 0 ? initialChannels : DEFAULT_CHANNELS;\n    const currentChannel = channels.find(c => c.id === channelId) || channels[0];\n\n    const [messages, setMessages] = useState<ChannelMessage[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [refreshing, setRefreshing] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [messageInput, setMessageInput] = useState(\"\");\n    const [sendingMessage, setSendingMessage] = useState(false);\n    const [attachments, setAttachments] = useState<File[]>([]);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [searchInput, setSearchInput] = useState(\"\");\n    const conversationScrollRef = useRef<HTMLDivElement>(null);\n    const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n    // Fetch channel messages\n    const fetchMessages = useCallback(async (showRefreshing = false) => {\n        if (showRefreshing) {\n            setRefreshing(true);\n        } else {\n            setLoading(true);\n        }\n        setError(null);\n        \n        try {\n            const result = await getTeamChannelMessagesAction({\n                channel: channelId,\n                limit: 100,\n                offset: 0,\n            });\n            \n            if (result.success && result.messages) {\n                setMessages(result.messages);\n                \n                // Mark all unread messages in channel as read\n                const unreadMessages = result.messages.filter(msg => !msg.read_at && msg.direction === \"inbound\");\n                if (unreadMessages.length > 0) {\n                    // Optimistically update UI\n                    setMessages(prev => prev.map(msg => \n                        !msg.read_at && msg.direction === \"inbound\" \n                            ? { ...msg, read_at: new Date().toISOString() }\n                            : msg\n                    ));\n                    \n                    // Update database\n                    markTeamChannelAsReadAction(channelId)\n                        .then((result) => {\n                            if (result.success) {\n                                // Refresh messages to get updated read_at from database\n                                setTimeout(() => {\n                                    fetchMessages(false);\n                                }, 500);\n                            }\n                        })\n                        .catch(() => {\n                            // Error marking as read - fail silently\n                        });\n                }\n            } else {\n                setError(result.error || \"Failed to load messages\");\n            }\n        } catch (err) {\n            setError(err instanceof Error ? err.message : \"Unknown error\");\n        } finally {\n            setLoading(false);\n            setRefreshing(false);\n        }\n    }, [channelId]);\n\n    // Auto-scroll to bottom when messages change\n    useEffect(() => {\n        if (conversationScrollRef.current) {\n            conversationScrollRef.current.scrollTop = conversationScrollRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    // Fetch messages on channel change (but not on initial mount)\n    const isInitialMount = useRef(true);\n    useEffect(() => {\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n            return;\n        }\n        fetchMessages();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [channelId]);\n\n    // Search debounce\n    useEffect(() => {\n        if (searchTimeoutRef.current) {\n            clearTimeout(searchTimeoutRef.current);\n        }\n        \n        searchTimeoutRef.current = setTimeout(() => {\n            setSearchQuery(searchInput);\n            if (searchInput) {\n                fetchMessages();\n            }\n        }, 300);\n        \n        return () => {\n            if (searchTimeoutRef.current) {\n                clearTimeout(searchTimeoutRef.current);\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchInput]);\n\n    const handleRefresh = useCallback(() => {\n        fetchMessages(true);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [channelId]);\n\n    const handleSendMessage = useCallback(async () => {\n        if ((!messageInput.trim() && attachments.length === 0) || sendingMessage) return;\n\n        setSendingMessage(true);\n        try {\n            // Upload attachments first\n            let attachmentData: Array<{ type: \"image\" | \"file\"; filename: string; url?: string }> = [];\n            if (attachments.length > 0) {\n                const { uploadSmsAttachments } = await import(\"@/actions/sms-actions\");\n                const uploadResult = await uploadSmsAttachments(attachments);\n                \n                if (!uploadResult.success || !uploadResult.urls) {\n                    toast.error(uploadResult.error || \"Failed to upload attachments\");\n                    setSendingMessage(false);\n                    return;\n                }\n                \n                attachmentData = attachments.map((f, idx) => ({\n                    type: (f.type.startsWith(\"image/\") ? \"image\" : \"file\") as \"image\" | \"file\",\n                    filename: f.name,\n                    url: uploadResult.urls?.[idx],\n                }));\n            }\n\n            const result = await sendTeamChannelMessageAction({\n                channel: channelId,\n                text: messageInput.trim(),\n                attachments: attachmentData,\n            });\n\n            if (result.success) {\n                setMessageInput(\"\");\n                setAttachments([]);\n                toast.success(\"Message sent\");\n                // Refresh messages\n                fetchMessages(true);\n            } else {\n                toast.error(result.error || \"Failed to send message\");\n            }\n        } catch (err) {\n            toast.error(\"Failed to send message\", {\n                description: err instanceof Error ? err.message : \"Unknown error\"\n            });\n        } finally {\n            setSendingMessage(false);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [messageInput, attachments, channelId, sendingMessage]);\n\n    const handleAttachFiles = useCallback((files: File[]) => {\n        setAttachments((prev) => [...prev, ...files]);\n    }, []);\n\n    const formatMessageTime = (dateString: string) => {\n        const messageDate = new Date(dateString);\n        const now = new Date();\n        const diffMs = now.getTime() - messageDate.getTime();\n        const diffMins = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n\n        if (diffMins < 1) return \"Just now\";\n        if (diffMins < 60) return `${diffMins}m ago`;\n        if (diffHours < 24) return `${diffHours}h ago`;\n        if (diffDays < 7) return `${diffDays}d ago`;\n        \n        return messageDate.toLocaleDateString('en-US', {\n            month: 'short',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit'\n        });\n    };\n\n\n    return (\n        <div className=\"flex h-full w-full flex-col overflow-hidden bg-sidebar\">\n            {/* Chat Area - Full Width */}\n            <div className=\"bg-card mb-1 rounded-tl-2xl shadow-sm lg:h-full flex flex-col min-w-0 flex-1 overflow-hidden\">\n                    {/* Channel Header */}\n                    <div className=\"sticky top-0 z-10 flex items-center justify-between gap-2 p-3 border-b border-border bg-card\">\n                        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"h-8 w-8 p-0 shrink-0\"\n                                onClick={toggleSidebar}\n                                title=\"Toggle sidebar\"\n                            >\n                                <PanelLeft className=\"h-4 w-4\" />\n                            </Button>\n                            <div className=\"relative flex-1 max-w-md\">\n                                <Input\n                                    type=\"search\"\n                                    placeholder=\"Search messages...\"\n                                    value={searchInput}\n                                    onChange={(e) => setSearchInput(e.target.value)}\n                                    className=\"h-8 pl-9 pr-8\"\n                                />\n                                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                                {searchInput && (\n                                    <button\n                                        onClick={() => setSearchInput(\"\")}\n                                        className=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                                    >\n                                        <X className=\"h-3 w-3\" />\n                                    </button>\n                                )}\n                            </div>\n                            <div className=\"flex items-center gap-2 shrink-0 ml-2\">\n                                <Hash className=\"h-5 w-5 text-muted-foreground\" />\n                                <h1 className=\"font-semibold text-base\">{currentChannel.name}</h1>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={handleRefresh}\n                                disabled={refreshing}\n                                className=\"h-8 w-8 p-0\"\n                                title=\"Refresh\"\n                            >\n                                <RefreshCw className={`h-4 w-4 text-muted-foreground ${refreshing ? 'animate-spin' : ''}`} />\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\" title=\"More options\">\n                                <MoreHorizontal className=\"h-4 w-4 text-muted-foreground\" />\n                            </Button>\n                        </div>\n                    </div>\n\n                    {/* Messages Area */}\n                    <div \n                        ref={conversationScrollRef}\n                        className=\"flex-1 overflow-y-auto bg-gradient-to-b from-background to-muted/20 px-4 py-4\"\n                    >\n                        {loading ? (\n                            <div className=\"flex items-center justify-center h-full\">\n                                <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n                            </div>\n                        ) : error ? (\n                            <div className=\"flex items-center justify-center h-full\">\n                                <div className=\"text-center\">\n                                    <p className=\"text-sm text-destructive mb-2 font-medium\">{error}</p>\n                                    <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => fetchMessages()}\n                                    >\n                                        Try Again\n                                    </Button>\n                                </div>\n                            </div>\n                        ) : messages.length === 0 ? (\n                            <div className=\"flex items-center justify-center h-full\">\n                                <div className=\"text-center\">\n                                    <MessageSquare className=\"h-12 w-12 text-muted-foreground opacity-50 mx-auto mb-2\" />\n                                    <p className=\"text-sm text-muted-foreground\">No messages yet</p>\n                                    <p className=\"text-xs text-muted-foreground mt-1\">Start the conversation!</p>\n                                </div>\n                            </div>\n                        ) : (\n                            <div className=\"space-y-2\">\n                                {messages.map((msg, index) => {\n                                    const isOutbound = msg.direction === \"outbound\";\n                                    const showTime = index === 0 || \n                                        new Date(msg.created_at).getTime() - new Date(messages[index - 1].created_at).getTime() > 5 * 60 * 1000; // 5 minutes\n                                    \n                                    return (\n                                        <div key={msg.id} className=\"flex flex-col\">\n                                            {showTime && (\n                                                <div className=\"flex justify-center my-2\">\n                                                    <span className=\"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full\">\n                                                        {formatMessageTime(msg.created_at)}\n                                                    </span>\n                                                </div>\n                                            )}\n                                            <div className={cn(\n                                                \"flex gap-3\",\n                                                isOutbound ? \"justify-end\" : \"justify-start\"\n                                            )}>\n                                                {/* Avatar for inbound messages */}\n                                                {!isOutbound && msg.sent_by_user && (\n                                                    <Avatar className=\"h-8 w-8 shrink-0\">\n                                                        <AvatarFallback>\n                                                            {msg.sent_by_user.name?.[0]?.toUpperCase() || \"U\"}\n                                                        </AvatarFallback>\n                                                    </Avatar>\n                                                )}\n                                                \n                                                <div className={cn(\n                                                    \"max-w-[75%] rounded-2xl px-4 py-2 shadow-sm\",\n                                                    isOutbound\n                                                        ? \"bg-primary text-primary-foreground rounded-tr-sm\"\n                                                        : \"bg-muted text-foreground rounded-tl-sm\"\n                                                )}>\n                                                    {/* Show sender name for inbound */}\n                                                    {!isOutbound && msg.sent_by_user && (\n                                                        <div className=\"text-xs font-medium mb-1 opacity-80\">\n                                                            {msg.sent_by_user.name || \"Unknown\"}\n                                                        </div>\n                                                    )}\n                                                    \n                                                    {/* Show attachments if present */}\n                                                    {msg.provider_metadata && typeof msg.provider_metadata === 'object' && 'attachments' in msg.provider_metadata && Array.isArray(msg.provider_metadata.attachments) && msg.provider_metadata.attachments.length > 0 && (\n                                                        <div className={cn(\"mb-2 space-y-2\", msg.body ? \"\" : \"\")}>\n                                                            {msg.provider_metadata.attachments.map((att: any, attIdx: number) => {\n                                                                const isImage = att.type === 'image' || (att.url && /\\.(jpg|jpeg|png|gif|webp)$/i.test(att.url));\n                                                                return (\n                                                                    <div key={attIdx} className=\"rounded-lg overflow-hidden\">\n                                                                        {isImage ? (\n                                                                            <img\n                                                                                src={att.url}\n                                                                                alt={att.filename || \"Image\"}\n                                                                                className=\"max-w-full max-h-64 object-contain rounded-lg\"\n                                                                                loading=\"lazy\"\n                                                                            />\n                                                                        ) : (\n                                                                            <a\n                                                                                href={att.url}\n                                                                                target=\"_blank\"\n                                                                                rel=\"noopener noreferrer\"\n                                                                                className={cn(\n                                                                                    \"flex items-center gap-2 p-2 rounded-lg hover:opacity-80 transition-opacity\",\n                                                                                    isOutbound ? \"bg-primary-foreground/20\" : \"bg-background/20\"\n                                                                                )}\n                                                                            >\n                                                                                <Paperclip className=\"h-4 w-4\" />\n                                                                                <span className=\"text-xs truncate\">{att.filename || \"Attachment\"}</span>\n                                                                            </a>\n                                                                        )}\n                                                                    </div>\n                                                                );\n                                                            })}\n                                                        </div>\n                                                    )}\n                                                    \n                                                    {msg.body && (\n                                                        <p className=\"text-sm whitespace-pre-wrap break-words\">\n                                                            {msg.body}\n                                                        </p>\n                                                    )}\n                                                    \n                                                    {!msg.body && (!msg.provider_metadata || typeof msg.provider_metadata !== 'object' || !('attachments' in msg.provider_metadata) || !Array.isArray(msg.provider_metadata.attachments) || msg.provider_metadata.attachments.length === 0) && (\n                                                        <p className=\"text-sm opacity-70 italic\">No message content</p>\n                                                    )}\n                                                    \n                                                    <span className={cn(\n                                                        \"text-xs opacity-70 mt-1 block\",\n                                                        isOutbound ? \"text-right\" : \"text-left\"\n                                                    )}>\n                                                        {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Message Input */}\n                    <SmsMessageInput\n                        value={messageInput}\n                        onChange={setMessageInput}\n                        onSend={handleSendMessage}\n                        onAttach={handleAttachFiles}\n                        sending={sendingMessage}\n                        disabled={false}\n                        placeholder={`Message #${currentChannel.name.toLowerCase()}`}\n                    />\n                </div>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"407cdb4f27b0a3c9f049dfd3b6d0861b01b26a0e85\":\"getTeamChannelMessagesAction\"},\"apps/web/src/actions/teams-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getTeamChannelMessagesAction=/*#__PURE__*/createServerReference(\"407cdb4f27b0a3c9f049dfd3b6d0861b01b26a0e85\",callServer,void 0,findSourceMapURL,\"getTeamChannelMessagesAction\");","/* __next_internal_action_entry_do_not_use__ [{\"40d31525c81948d6fd1432186542094856234a3c66\":\"sendTeamChannelMessageAction\"},\"apps/web/src/actions/teams-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var sendTeamChannelMessageAction=/*#__PURE__*/createServerReference(\"40d31525c81948d6fd1432186542094856234a3c66\",callServer,void 0,findSourceMapURL,\"sendTeamChannelMessageAction\");","/* __next_internal_action_entry_do_not_use__ [{\"40581e668b6daea6cb7c47a00911750a07df65b573\":\"markTeamChannelAsReadAction\"},\"apps/web/src/actions/teams-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var markTeamChannelAsReadAction=/*#__PURE__*/createServerReference(\"40581e668b6daea6cb7c47a00911750a07df65b573\",callServer,void 0,findSourceMapURL,\"markTeamChannelAsReadAction\");"],"names":[],"mappings":"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"}