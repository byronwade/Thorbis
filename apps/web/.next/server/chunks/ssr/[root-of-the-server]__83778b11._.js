module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},836823,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(742210);a.n(d("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/client/app-dir/link.js <module evaluation>"))},380181,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(742210);a.n(d("[project]/node_modules/.pnpm/next@16.0.4_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/client/app-dir/link.js"))},646139,a=>{"use strict";a.i(836823);var b=a.i(380181);a.n(b)},8868,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return i},useLinkStatus:function(){return h.useLinkStatus}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(254508),g=a.r(504348),h=f._(a.r(646139));function i(a){let b=a.legacyBehavior,c="string"==typeof a.children||"number"==typeof a.children||"string"==typeof a.children?.type,d=a.children?.type?.$$typeof===Symbol.for("react.client.reference");return!b||c||d||(a.children?.type?.$$typeof===Symbol.for("react.lazy")?console.error("Using a Lazy Component as a direct child of `<Link legacyBehavior>` from a Server Component is not supported. If you need legacyBehavior, wrap your Lazy Component in a Client Component that renders the Link's `<a>` tag."):console.error("Using a Server Component as a direct child of `<Link legacyBehavior>` is not supported. If you need legacyBehavior, wrap your Server Component in a Client Component that renders the Link's `<a>` tag.")),(0,g.jsx)(h.default,{...a})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},543474,a=>{"use strict";var b=a.i(429969);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],543474)},174010,a=>{"use strict";a.i(730154),a.s([])},150644,a=>{"use strict";a.i(730154),a.s([])},835475,a=>{"use strict";let b=(0,a.i(543474).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],835475)},465807,a=>{"use strict";let b=(0,a.i(543474).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],465807)},262820,a=>{"use strict";a.i(883385),a.s([])},778541,a=>{"use strict";let b=(0,a.i(543474).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],778541)},832728,a=>{"use strict";function b(a){let{progress:b,completedAt:c}=a;if(c)return!0;if(!b||"object"!=typeof b)return!1;if(!0===b.onboardingCompleted)return!0;let d=b.completedSteps;return!!(Array.isArray(d)&&d.includes("complete"))}a.s(["isOnboardingComplete",()=>b])},844321,a=>{"use strict";var b=a.i(504348),c=a.i(465807),d=a.i(835475),e=a.i(778541);a.i(150644);var f=a.i(236028);a.i(174010);var g=a.i(705991);a.i(467361);var h=a.i(445074);a.i(262820);var i=a.i(883385),j=a.i(832728),k=a.i(136874);async function l(){let a=await (0,i.getCurrentUser)(),l=await (0,h.getActiveCompanyId)(),m=await (0,k.createClient)(),n={hasUser:!!a,hasActiveCompanyId:!!l,teamMemberResult:null,companyResult:null,subscriptionActive:!1,onboardingFinished:!1,isCompanyOnboardingComplete:!1};if(l&&m){let[b,c]=await Promise.all([m.from("company_memberships").select("company_id").eq("user_id",a?.id||"").eq("company_id",l).eq("status","active").maybeSingle(),m.from("companies").select("stripe_subscription_status, onboarding_progress, onboarding_completed_at").eq("id",l).maybeSingle()]);n.teamMemberResult=b,n.companyResult=c;let d=b.data,e=c.data,f=e?.stripe_subscription_status;n.subscriptionActive="active"===f||"trialing"===f;let g=e?.onboarding_progress||null;n.onboardingFinished=(0,j.isOnboardingComplete)({progress:g,completedAt:e?.onboarding_completed_at??null}),n.isCompanyOnboardingComplete=!!d&&n.subscriptionActive&&n.onboardingFinished}let o=({passed:a})=>a?(0,b.jsx)(d.CheckCircle2,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):(0,b.jsx)(e.XCircle,{className:"h-5 w-5 text-red-600 dark:text-red-400"});return(0,b.jsxs)("div",{className:"container max-w-4xl py-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Auth Flow Debug"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Dashboard Access Check"}),(0,b.jsx)(g.CardDescription,{children:"Simulating DashboardAuthWrapper logic from line 22-84"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"flex items-center gap-3 text-lg font-semibold",children:n.isCompanyOnboardingComplete?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.CheckCircle2,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),(0,b.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"Should allow dashboard access"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.AlertCircle,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"}),(0,b.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Should redirect to /dashboard/welcome"})]})})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Step-by-Step Checks"}),(0,b.jsx)(g.CardDescription,{children:"Each condition in DashboardAuthWrapper"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:n.hasUser}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 1: User authenticated"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Line 24: const user = await getCurrentUser()"}),n.hasUser&&(0,b.jsxs)(f.Badge,{variant:"secondary",className:"mt-2",children:["User ID: ",a?.id]})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:n.hasActiveCompanyId}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 2: Active company ID exists"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Line 42: const activeCompanyId = await getActiveCompanyId()"}),n.hasActiveCompanyId&&(0,b.jsx)(f.Badge,{variant:"secondary",className:"mt-2",children:l})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:!!n.teamMemberResult?.data}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 3: User is team member"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Lines 48-55: Query company_memberships"}),n.teamMemberResult&&(0,b.jsx)("pre",{className:"mt-2 text-xs bg-background p-2 rounded",children:JSON.stringify(n.teamMemberResult,null,2)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:!!n.companyResult?.data}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 4: Company data fetched"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Lines 57-64: Query companies table"}),n.companyResult&&(0,b.jsx)("pre",{className:"mt-2 text-xs bg-background p-2 rounded",children:JSON.stringify(n.companyResult,null,2)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:n.subscriptionActive}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 5: Subscription active"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:'Lines 69-71: subscriptionStatus === "active" || "trialing"'}),(0,b.jsx)(f.Badge,{variant:n.subscriptionActive?"default":"destructive",className:"mt-2",children:n.companyResult?.data?.stripe_subscription_status||"unknown"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md",children:[(0,b.jsx)(o,{passed:n.onboardingFinished}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Step 6: Onboarding finished"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Lines 72-77: isOnboardingComplete()"}),(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,b.jsxs)(f.Badge,{variant:"secondary",children:["completed_at:"," ",n.companyResult?.data?.onboarding_completed_at||"null"]}),(0,b.jsxs)(f.Badge,{variant:"secondary",children:["progress:"," ",JSON.stringify(n.companyResult?.data?.onboarding_progress||{})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-md border-2 border-primary",children:[(0,b.jsx)(o,{passed:n.isCompanyOnboardingComplete}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Final: isCompanyOnboardingComplete"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Line 82-83: !!teamMember && subscriptionActive && onboardingFinished"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(f.Badge,{variant:n.isCompanyOnboardingComplete?"default":"destructive",children:n.isCompanyOnboardingComplete?"PASS":"FAIL"})})]})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Verdict"})}),(0,b.jsx)(g.CardContent,{children:n.isCompanyOnboardingComplete?(0,b.jsxs)("div",{className:"text-green-600 dark:text-green-400",children:[(0,b.jsx)("p",{className:"font-semibold text-lg mb-2",children:"✅ You should have access to /dashboard"}),(0,b.jsx)("p",{className:"text-sm",children:"All checks passed. DashboardAuthWrapper will NOT redirect you to /dashboard/welcome."})]}):(0,b.jsxs)("div",{className:"text-yellow-600 dark:text-yellow-400",children:[(0,b.jsx)("p",{className:"font-semibold text-lg mb-2",children:"⚠️ You will be redirected to /dashboard/welcome"}),(0,b.jsx)("p",{className:"text-sm",children:"One or more checks failed. DashboardAuthWrapper will redirect you to complete onboarding."})]})})]})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__83778b11._.js.map