module.exports=[925100,a=>{"use strict";var b=a.i(742210);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call MainChartCard() from the server but MainChartCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx <module evaluation>","MainChartCard"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call MetricCard() from the server but MetricCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx <module evaluation>","MetricCard"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call SmallChartCard() from the server but SmallChartCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx <module evaluation>","SmallChartCard"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call generateMockData() from the server but generateMockData is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx <module evaluation>","generateMockData");a.s(["MainChartCard",0,c,"MetricCard",0,d,"SmallChartCard",0,e,"generateMockData",0,f])},344318,a=>{"use strict";var b=a.i(742210);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call MainChartCard() from the server but MainChartCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx","MainChartCard"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call MetricCard() from the server but MetricCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx","MetricCard"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call SmallChartCard() from the server but SmallChartCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx","SmallChartCard"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call generateMockData() from the server but generateMockData is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/analytics/analytics-dashboard.tsx","generateMockData");a.s(["MainChartCard",0,c,"MetricCard",0,d,"SmallChartCard",0,e,"generateMockData",0,f])},647472,a=>{"use strict";a.i(925100);var b=a.i(344318);a.n(b)},844185,a=>{"use strict";var b=a.i(504348),c=a.i(429969),d=a.i(837061);a.i(467361);var e=a.i(445074),f=a.i(54214),g=a.i(647472);a.i(150644);var h=a.i(236028);a.i(359436);var i=a.i(674451),j=a.i(981395),k=a.i(736983),l=a.i(574060),m=a.i(646620);function n(a){return a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString()}async function o(){var a;let c,j,k=await (0,e.getActiveCompanyId)();if(!k)return(0,b.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Please select a company to view analytics"})});let[l,o,r]=await Promise.all([(0,d.getCommunicationStatsAction)(90),(0,f.getRecentCommunications)(k,5),(0,f.getActiveThreads)(k,5)]);if(!l.success||!l.data)return(0,b.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Unable to load analytics data"})});let s=l.data,t=s.dailyStats.map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:a.emails+a.sms+a.calls})),u=s.inboundOutboundTrend.map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:a.Inbound,value2:a.Outbound})),v=s.responseTimeData.map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.round(a.avgResponseTime),value2:Math.round(a.avgResponseTime)}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold tracking-tight md:text-4xl",children:"Communications Analytics"}),(0,b.jsxs)(h.Badge,{className:"text-primary gap-1",variant:"outline",children:[(0,b.jsx)(m.Wifi,{className:"size-3.5"}),"Live"]})]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm md:text-base",children:"Insights into your team's communication performance."})]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-xs md:text-sm",children:[(0,b.jsx)("span",{children:"Last updated"}),(0,b.jsx)(i.Separator,{className:"h-4",orientation:"vertical"}),(0,b.jsx)("span",{children:"Just now"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1",children:(0,b.jsx)(g.MainChartCard,{title:"Total Communications",data:t})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(g.SmallChartCard,{title:"Inbound vs Outbound",data:u,type:"line",dataKey:"value",category:"comms",color:"#8b5cf6"}),(0,b.jsx)(g.SmallChartCard,{title:"Response Times",data:v,type:"bar",dataKey:"value2",category:"response",color:"#f43f5e"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,b.jsx)(g.MetricCard,{label:"Total Sent",value:n(s.totalOutbound),change:(s.totalOutbound,0),verified:!0}),(0,b.jsx)(g.MetricCard,{label:"Total Received",value:n(s.totalInbound),change:0,changeLabel:"inbound messages"}),(0,b.jsx)(g.MetricCard,{label:"Response Rate",value:`${Math.round(s.responseRate)}%`,change:s.responseRate>=80?5:-5,changeLabel:s.responseRate>=80?"good":"needs improvement"}),(0,b.jsx)(g.MetricCard,{label:"Avg Response Time",value:function(a){if(a<1)return"< 1m";if(a<60)return`${Math.round(a)}m`;let b=Math.floor(a/60),c=Math.round(a%60);return c>0?`${b}h ${c}m`:`${b}h`}(s.avgResponseTime),change:s.avgResponseTime<=30?10:-10,changeLabel:s.avgResponseTime<=30?"fast":"could be faster"}),(0,b.jsx)(g.MetricCard,{label:"Unread Messages",value:s.totalUnread.toString(),change:s.totalUnread>10?-10:0,changeLabel:"need attention"}),(0,b.jsx)(g.MetricCard,{label:"Total Emails",value:n(s.totalEmails),change:0,changeLabel:"email threads"}),(0,b.jsx)(g.MetricCard,{label:"Total SMS",value:n(s.totalSms),change:0,changeLabel:"text messages"}),(0,b.jsx)(g.MetricCard,{label:"Avg Call Duration",value:(c=Math.floor((a=s.avgCallDuration)/60),j=Math.round(a%60),`${c}m ${j}s`),change:0,changeLabel:"per call"}),(0,b.jsx)(g.MetricCard,{label:"Total Calls",value:n(s.totalCalls),change:0,changeLabel:"phone calls"}),(0,b.jsx)(g.MetricCard,{label:"Read Rate",value:`${Math.round(s.readRate)}%`,subValue:"",change:5*(s.readRate>=90),changeLabel:"messages read"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(p,{communications:o}),(0,b.jsx)(q,{threads:r})]})]})}function p({communications:a}){let c=a.length>0?a:[{id:"1",type:"email",direction:"inbound",sender:"No recent communications",subject:"Start sending messages to see them here",time:"",status:"info"}];return(0,b.jsxs)("div",{className:"bg-card/50 border-border/50 backdrop-blur-sm rounded-xl border overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-border/50 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Recent Communications"}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 border-0",children:a.length>0?"Live Feed":"No Data"})]}),(0,b.jsx)("div",{className:"p-0",children:(0,b.jsx)("div",{className:"divide-y divide-border/50",children:c.map(a=>(0,b.jsxs)("div",{className:"p-4 hover:bg-muted/30 transition-colors flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-xs font-medium ${"email"===a.type?"bg-blue-500/10 text-blue-500":"phone"===a.type?"bg-green-500/10 text-green-500":"bg-orange-500/10 text-orange-500"}`,children:"email"===a.type?(0,b.jsx)(j.Mail,{className:"h-4 w-4"}):"phone"===a.type?(0,b.jsx)(l.Phone,{className:"h-4 w-4"}):(0,b.jsx)(k.MessageSquare,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.sender}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.subject})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[a.status&&"info"!==a.status&&(0,b.jsx)(h.Badge,{variant:"outline",className:"text-[10px] h-5 px-1.5 uppercase tracking-wider mb-1",children:a.status}),a.time&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.time})]})]},a.id))})})]})}function q({threads:a}){let c=a.length>0?a:[{id:"1",customer:"No active threads",lastMessage:"Start conversations to see them here",time:"",unread:0}],d=a.filter(a=>a.unread>0).length;return(0,b.jsxs)("div",{className:"bg-card/50 border-border/50 backdrop-blur-sm rounded-xl border overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-border/50 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Active Threads"}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"bg-pink-500/10 text-pink-500 hover:bg-pink-500/20 border-0",children:a.length>0?`${d} Unread`:"No Data"})]}),(0,b.jsx)("div",{className:"p-0",children:(0,b.jsx)("div",{className:"divide-y divide-border/50",children:c.map(a=>(0,b.jsxs)("div",{className:"p-4 hover:bg-muted/30 transition-colors flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-medium text-primary",children:a.customer.split(" ").map(a=>a[0]).join("").substring(0,2)}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.customer}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:a.lastMessage})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.unread>0&&(0,b.jsx)("div",{className:"h-5 w-5 rounded-full bg-blue-500 text-white flex items-center justify-center text-[10px] font-bold",children:a.unread}),a.time&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.time})]})]},a.id))})})]})}function r(){return(0,b.jsxs)("div",{className:"relative space-y-10 py-8 md:py-12",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"bg-muted h-9 w-32 animate-pulse rounded-full"})}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"bg-muted size-24 animate-pulse rounded-full"})}),(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-3 text-center",children:[(0,b.jsx)("div",{className:"bg-muted mx-auto h-12 w-96 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted mx-auto h-6 w-full max-w-2xl animate-pulse rounded"})]})]})}function s(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(r,{}),children:(0,b.jsx)(o,{})})}a.s(["default",()=>s],844185)}];

//# sourceMappingURL=apps_web_src_1065fedc._.js.map