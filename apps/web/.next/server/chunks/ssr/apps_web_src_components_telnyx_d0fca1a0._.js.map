{"version":3,"sources":["../../../../../../apps/web/src/components/telnyx/business-hours-editor.tsx","../../../../../../apps/web/src/components/telnyx/call-routing-rule-actions.tsx"],"sourcesContent":["/**\n * Business Hours Visual Calendar Editor\n *\n * Interactive calendar editor for configuring business hours:\n * - Weekly schedule view with visual time blocks\n * - Multiple time ranges per day (e.g., lunch breaks)\n * - Copy hours across days\n * - Timezone support\n * - Holiday exceptions\n * - Quick presets (9-5, 24/7, etc.)\n */\n\n\"use client\";\n\nimport {\n\tAlertCircle,\n\tCheckCircle2,\n\tClock,\n\tCopy,\n\tGlobe,\n\tPlus,\n\tTrash2,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { StandardFormField } from \"@/components/ui/standard-form-field\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { cn } from \"@/lib/utils\";\n\n// Time range for a single day\ntype TimeRange = {\n\tid: string;\n\tstartTime: string; // HH:MM format\n\tendTime: string; // HH:MM format\n};\n\n// Day schedule\ntype DaySchedule = {\n\tdayOfWeek: number; // 0 = Sunday, 1 = Monday, etc.\n\tdayName: string;\n\tisOpen: boolean;\n\ttimeRanges: TimeRange[];\n};\n\n// Full business hours configuration\ntype BusinessHours = {\n\ttimezone: string;\n\tschedule: DaySchedule[];\n};\n\n// Time options for select (15-minute increments)\nconst timeOptions = Array.from({ length: 96 }, (_, i) => {\n\tconst hours = Math.floor(i / 4);\n\tconst minutes = (i % 4) * 15;\n\tconst time = `${hours.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}`;\n\tconst hour12 = hours % 12 || 12;\n\tconst ampm = hours < 12 ? \"AM\" : \"PM\";\n\treturn {\n\t\tvalue: time,\n\t\tlabel: `${hour12}:${minutes.toString().padStart(2, \"0\")} ${ampm}`,\n\t};\n});\n\n// Common timezones\nconst commonTimezones = [\n\t{ value: \"America/New_York\", label: \"Eastern Time (ET)\" },\n\t{ value: \"America/Chicago\", label: \"Central Time (CT)\" },\n\t{ value: \"America/Denver\", label: \"Mountain Time (MT)\" },\n\t{ value: \"America/Los_Angeles\", label: \"Pacific Time (PT)\" },\n\t{ value: \"America/Anchorage\", label: \"Alaska Time (AKT)\" },\n\t{ value: \"Pacific/Honolulu\", label: \"Hawaii Time (HT)\" },\n];\n\n// Quick presets\nconst presets = [\n\t{\n\t\tname: \"Standard (9 AM - 5 PM)\",\n\t\thours: { start: \"09:00\", end: \"17:00\" },\n\t},\n\t{\n\t\tname: \"Extended (8 AM - 6 PM)\",\n\t\thours: { start: \"08:00\", end: \"18:00\" },\n\t},\n\t{\n\t\tname: \"Early Bird (7 AM - 3 PM)\",\n\t\thours: { start: \"07:00\", end: \"15:00\" },\n\t},\n\t{\n\t\tname: \"24/7\",\n\t\thours: { start: \"00:00\", end: \"23:59\" },\n\t},\n];\n\n// Initialize default schedule\nconst defaultSchedule: DaySchedule[] = [\n\t{ dayOfWeek: 0, dayName: \"Sunday\", isOpen: false, timeRanges: [] },\n\t{\n\t\tdayOfWeek: 1,\n\t\tdayName: \"Monday\",\n\t\tisOpen: true,\n\t\ttimeRanges: [{ id: \"1\", startTime: \"09:00\", endTime: \"17:00\" }],\n\t},\n\t{\n\t\tdayOfWeek: 2,\n\t\tdayName: \"Tuesday\",\n\t\tisOpen: true,\n\t\ttimeRanges: [{ id: \"2\", startTime: \"09:00\", endTime: \"17:00\" }],\n\t},\n\t{\n\t\tdayOfWeek: 3,\n\t\tdayName: \"Wednesday\",\n\t\tisOpen: true,\n\t\ttimeRanges: [{ id: \"3\", startTime: \"09:00\", endTime: \"17:00\" }],\n\t},\n\t{\n\t\tdayOfWeek: 4,\n\t\tdayName: \"Thursday\",\n\t\tisOpen: true,\n\t\ttimeRanges: [{ id: \"4\", startTime: \"09:00\", endTime: \"17:00\" }],\n\t},\n\t{\n\t\tdayOfWeek: 5,\n\t\tdayName: \"Friday\",\n\t\tisOpen: true,\n\t\ttimeRanges: [{ id: \"5\", startTime: \"09:00\", endTime: \"17:00\" }],\n\t},\n\t{ dayOfWeek: 6, dayName: \"Saturday\", isOpen: false, timeRanges: [] },\n];\n\nexport function BusinessHoursEditor() {\n\tconst [businessHours, setBusinessHours] = useState<BusinessHours>({\n\t\ttimezone: \"America/Los_Angeles\",\n\t\tschedule: defaultSchedule,\n\t});\n\n\tconst [copiedDay, setCopiedDay] = useState<DaySchedule | null>(null);\n\n\t// Toggle day open/closed\n\tconst toggleDay = (dayOfWeek: number) => {\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek === dayOfWeek\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\tisOpen: !day.isOpen,\n\t\t\t\t\t\t\ttimeRanges: day.isOpen\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\t\t\t\t\t\t\t\tstartTime: \"09:00\",\n\t\t\t\t\t\t\t\t\t\t\tendTime: \"17:00\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Add time range to a day\n\tconst addTimeRange = (dayOfWeek: number) => {\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek === dayOfWeek\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\ttimeRanges: [\n\t\t\t\t\t\t\t\t...day.timeRanges,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\t\t\t\t\t\tstartTime: \"09:00\",\n\t\t\t\t\t\t\t\t\tendTime: \"17:00\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Remove time range from a day\n\tconst removeTimeRange = (dayOfWeek: number, rangeId: string) => {\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek === dayOfWeek\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\ttimeRanges: day.timeRanges.filter(\n\t\t\t\t\t\t\t\t(range) => range.id !== rangeId,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Update time range\n\tconst updateTimeRange = (\n\t\tdayOfWeek: number,\n\t\trangeId: string,\n\t\tfield: \"startTime\" | \"endTime\",\n\t\tvalue: string,\n\t) => {\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek === dayOfWeek\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\ttimeRanges: day.timeRanges.map((range) =>\n\t\t\t\t\t\t\t\trange.id === rangeId ? { ...range, [field]: value } : range,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Copy day schedule\n\tconst copyDay = (day: DaySchedule) => {\n\t\tsetCopiedDay(day);\n\t};\n\n\t// Paste day schedule\n\tconst pasteDay = (targetDayOfWeek: number) => {\n\t\tif (!copiedDay) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek === targetDayOfWeek\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\tisOpen: copiedDay.isOpen,\n\t\t\t\t\t\t\ttimeRanges: copiedDay.timeRanges.map((range) => ({\n\t\t\t\t\t\t\t\t...range,\n\t\t\t\t\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Apply preset to all weekdays\n\tconst applyPresetToWeekdays = (preset: { start: string; end: string }) => {\n\t\tsetBusinessHours((prev) => ({\n\t\t\t...prev,\n\t\t\tschedule: prev.schedule.map((day) =>\n\t\t\t\tday.dayOfWeek >= 1 && day.dayOfWeek <= 5\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...day,\n\t\t\t\t\t\t\tisOpen: true,\n\t\t\t\t\t\t\ttimeRanges: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\t\t\t\t\t\tstartTime: preset.start,\n\t\t\t\t\t\t\t\t\tendTime: preset.end,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}\n\t\t\t\t\t: day,\n\t\t\t),\n\t\t}));\n\t};\n\n\t// Validate time ranges (start < end)\n\tconst validateTimeRange = (range: TimeRange): boolean =>\n\t\trange.startTime < range.endTime;\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Header Controls */}\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Clock className=\"size-5\" />\n\t\t\t\t\t\tBusiness Hours\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\tConfigure when your business is available to receive calls\n\t\t\t\t\t</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{/* Timezone Selection */}\n\t\t\t\t\t<StandardFormField label=\"Timezone\" htmlFor=\"timezone\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t<Globe className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tSelect your business timezone\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\t\t\t\tsetBusinessHours((prev) => ({ ...prev, timezone: value }))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={businessHours.timezone}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"timezone\">\n\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{commonTimezones.map((tz) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={tz.value} value={tz.value}>\n\t\t\t\t\t\t\t\t\t\t{tz.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t{/* Quick Presets */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label>Quick Presets (Apply to Weekdays)</Label>\n\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t{presets.map((preset) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tkey={preset.name}\n\t\t\t\t\t\t\t\t\tonClick={() => applyPresetToWeekdays(preset.hours)}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{preset.name}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Weekly Schedule */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t{businessHours.schedule.map((day) => (\n\t\t\t\t\t<DayScheduleCard\n\t\t\t\t\t\tcanPaste={copiedDay !== null}\n\t\t\t\t\t\tday={day}\n\t\t\t\t\t\tkey={day.dayOfWeek}\n\t\t\t\t\t\tonAddTimeRange={() => addTimeRange(day.dayOfWeek)}\n\t\t\t\t\t\tonCopy={() => copyDay(day)}\n\t\t\t\t\t\tonPaste={() => pasteDay(day.dayOfWeek)}\n\t\t\t\t\t\tonRemoveTimeRange={(rangeId) =>\n\t\t\t\t\t\t\tremoveTimeRange(day.dayOfWeek, rangeId)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonToggle={() => toggleDay(day.dayOfWeek)}\n\t\t\t\t\t\tonUpdateTimeRange={(rangeId, field, value) =>\n\t\t\t\t\t\t\tupdateTimeRange(day.dayOfWeek, rangeId, field, value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalidateTimeRange={validateTimeRange}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{/* Summary */}\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"text-base\">Schedule Summary</CardTitle>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t\t{businessHours.schedule\n\t\t\t\t\t\t\t.filter((day) => day.isOpen)\n\t\t\t\t\t\t\t.map((day) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between\"\n\t\t\t\t\t\t\t\t\tkey={day.dayOfWeek}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{day.dayName}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{day.timeRanges\n\t\t\t\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(range) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${formatTime(range.startTime)} - ${formatTime(range.endTime)}`,\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t{businessHours.schedule.every((day) => !day.isOpen) && (\n\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<AlertCircle className=\"size-4\" />\n\t\t\t\t\t\t\t\tNo business hours configured\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Save Button */}\n\t\t\t<div className=\"flex justify-end gap-3\">\n\t\t\t\t<Button variant=\"outline\">Cancel</Button>\n\t\t\t\t<Button>\n\t\t\t\t\t<CheckCircle2 className=\"mr-2 size-4\" />\n\t\t\t\t\tSave Business Hours\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction DayScheduleCard({\n\tday,\n\tonToggle,\n\tonAddTimeRange,\n\tonRemoveTimeRange,\n\tonUpdateTimeRange,\n\tonCopy,\n\tonPaste,\n\tcanPaste,\n\tvalidateTimeRange,\n}: {\n\tday: DaySchedule;\n\tonToggle: () => void;\n\tonAddTimeRange: () => void;\n\tonRemoveTimeRange: (rangeId: string) => void;\n\tonUpdateTimeRange: (\n\t\trangeId: string,\n\t\tfield: \"startTime\" | \"endTime\",\n\t\tvalue: string,\n\t) => void;\n\tonCopy: () => void;\n\tonPaste: () => void;\n\tcanPaste: boolean;\n\tvalidateTimeRange: (range: TimeRange) => boolean;\n}) {\n\treturn (\n\t\t<Card className={cn(!day.isOpen && \"opacity-60\")}>\n\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<Switch checked={day.isOpen} onCheckedChange={onToggle} />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle className=\"text-base\">{day.dayName}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription className=\"text-xs\">\n\t\t\t\t\t\t\t\t{day.isOpen ? (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{day.timeRanges.length} time{\" \"}\n\t\t\t\t\t\t\t\t\t\t{day.timeRanges.length === 1 ? \"range\" : \"ranges\"}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\"Closed\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={!day.isOpen}\n\t\t\t\t\t\t\tonClick={onCopy}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Copy className=\"size-3\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={!canPaste}\n\t\t\t\t\t\t\tonClick={onPaste}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPaste\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\n\t\t\t{day.isOpen && (\n\t\t\t\t<CardContent className=\"space-y-3\">\n\t\t\t\t\t{/* Time Ranges */}\n\t\t\t\t\t{day.timeRanges.map((range, _index) => {\n\t\t\t\t\t\tconst isValid = validateTimeRange(range);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\" key={range.id}>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-1 items-center gap-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\t\t\t\t\t\t\t\tonUpdateTimeRange(range.id, \"startTime\", value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={range.startTime}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\"h-9\", !isValid && \"border-destructive\")}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t{timeOptions.map((time) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={time.value} value={time.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{time.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">to</span>\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(value) =>\n\t\t\t\t\t\t\t\t\t\t\t\tonUpdateTimeRange(range.id, \"endTime\", value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={range.endTime}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\"h-9\", !isValid && \"border-destructive\")}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t{timeOptions.map((time) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={time.value} value={time.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{time.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{day.timeRanges.length > 1 && (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"size-9\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => onRemoveTimeRange(range.id)}\n\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t{/* Add Time Range Button */}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tonClick={onAddTimeRange}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 size-3\" />\n\t\t\t\t\t\tAdd Time Range (e.g., Lunch Break)\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{/* Validation Warning */}\n\t\t\t\t\t{day.timeRanges.some((range) => !validateTimeRange(range)) && (\n\t\t\t\t\t\t<div className=\"text-destructive flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t<AlertCircle className=\"size-4\" />\n\t\t\t\t\t\t\tEnd time must be after start time\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t)}\n\t\t</Card>\n\t);\n}\n\n// Helper function to format time in 12-hour format\nfunction formatTime(time: string): string {\n\tconst [hours, minutes] = time.split(\":\").map(Number);\n\tconst hour12 = hours % 12 || 12;\n\tconst ampm = hours < 12 ? \"AM\" : \"PM\";\n\treturn `${hour12}:${minutes.toString().padStart(2, \"0\")} ${ampm}`;\n}\n","/**\n * Call Routing Rule Actions - Client Component\n *\n * Client-side features:\n * - Interactive dropdowns and dialogs\n * - Optimistic updates with Zustand\n * - Real-time status toggling\n * - Delete confirmations\n */\n\n\"use client\";\n\nimport {\n\tArrowDown,\n\tArrowUp,\n\tCopy,\n\tEdit,\n\tMoreVertical,\n\tPower,\n\tTrash2,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport {\n\tdeleteCallRoutingRule,\n\ttoggleCallRoutingRule,\n\tupdateCallRoutingRule,\n} from \"@/actions/telnyx\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype CallRoutingRuleActionsProps = {\n\trule: any;\n};\n\nexport function CallRoutingRuleActions({ rule }: CallRoutingRuleActionsProps) {\n\tconst router = useRouter();\n\tconst { toast } = useToast();\n\tconst [isDeleting, setIsDeleting] = useState(false);\n\tconst [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\tconst [isToggling, setIsToggling] = useState(false);\n\n\tconst handleToggleActive = async () => {\n\t\tsetIsToggling(true);\n\t\tconst result = await toggleCallRoutingRule(rule.id, !rule.is_active);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\n\t\t\t\t`Rule ${rule.is_active ? \"deactivated\" : \"activated\"} successfully`,\n\t\t\t);\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to update rule status\");\n\t\t}\n\n\t\tsetIsToggling(false);\n\t};\n\n\tconst handleDelete = async () => {\n\t\tsetIsDeleting(true);\n\n\t\t// Get current user (in a real app, you'd get this from auth)\n\t\tconst userId = \"current-user-id\"; // TODO: Get from auth context\n\n\t\tconst result = await deleteCallRoutingRule(rule.id, userId);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Routing rule deleted successfully\");\n\t\t\tsetShowDeleteDialog(false);\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to delete routing rule\");\n\t\t}\n\n\t\tsetIsDeleting(false);\n\t};\n\n\tconst handleIncreasePriority = async () => {\n\t\tconst result = await updateCallRoutingRule({\n\t\t\truleId: rule.id,\n\t\t\tpriority: (rule.priority || 0) + 1,\n\t\t});\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Priority increased\");\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to update priority\");\n\t\t}\n\t};\n\n\tconst handleDecreasePriority = async () => {\n\t\tconst result = await updateCallRoutingRule({\n\t\t\truleId: rule.id,\n\t\t\tpriority: Math.max(0, (rule.priority || 0) - 1),\n\t\t});\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Priority decreased\");\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to update priority\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t<Switch\n\t\t\t\t\taria-label=\"Toggle rule active status\"\n\t\t\t\t\tchecked={rule.is_active}\n\t\t\t\t\tdisabled={isToggling}\n\t\t\t\t\tonCheckedChange={handleToggleActive}\n\t\t\t\t/>\n\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t<Button size=\"icon\" variant=\"ghost\">\n\t\t\t\t\t\t\t<MoreVertical className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t<span className=\"sr-only\">Open menu</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\trouter.push(\n\t\t\t\t\t\t\t\t\t`/dashboard/settings/communications/call-routing/${rule.id}`,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Edit className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tEdit Rule\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tdisabled={isToggling}\n\t\t\t\t\t\t\tonClick={handleToggleActive}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Power className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t{rule.is_active ? \"Deactivate\" : \"Activate\"}\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t<DropdownMenuItem onClick={handleIncreasePriority}>\n\t\t\t\t\t\t\t<ArrowUp className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tIncrease Priority\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem onClick={handleDecreasePriority}>\n\t\t\t\t\t\t\t<ArrowDown className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tDecrease Priority\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tonClick={() => toast.success(\"Duplicate rule functionality\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Copy className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tDuplicate\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tclassName=\"text-destructive focus:text-destructive\"\n\t\t\t\t\t\t\tonClick={() => setShowDeleteDialog(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Trash2 className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\t\t\t</div>\n\n\t\t\t<Dialog onOpenChange={setShowDeleteDialog} open={showDeleteDialog}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Delete Routing Rule</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tAre you sure you want to delete \"{rule.name}\"? This action cannot\n\t\t\t\t\t\t\tbe undone. Calls will no longer be routed using this rule.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isDeleting}\n\t\t\t\t\t\t\tonClick={() => setShowDeleteDialog(false)}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isDeleting}\n\t\t\t\t\t\t\tonClick={handleDelete}\n\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isDeleting ? \"Deleting...\" : \"Delete Rule\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}