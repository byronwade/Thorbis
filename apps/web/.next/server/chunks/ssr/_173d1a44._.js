module.exports=[166190,a=>{"use strict";let b=(0,a.i(203431).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["default",()=>b])},824124,a=>{"use strict";var b=a.i(166190);a.s(["MapPin",()=>b.default])},112932,a=>{"use strict";function b(a,b){if(!a)return b||"Unknown Customer";if(a.display_name)return a.display_name;let c=a.first_name?.trim(),d=a.last_name?.trim();return c&&d?`${c} ${d}`:c||d||(a.company_name?a.company_name:a.email?a.email:b||"Unknown Customer")}function c(a){if(!a)return"?";let c=b(a).split(/\s+/).filter(Boolean);return c.length>=2?(c[0][0]+c[1][0]).toUpperCase():1===c.length&&c[0].length>=2?c[0].slice(0,2).toUpperCase():1===c.length?c[0][0].toUpperCase():"?"}a.s(["getCustomerDisplayName",()=>b,"getCustomerInitials",()=>c])},708402,a=>{"use strict";a.i(156120),a.s([])},232702,a=>{"use strict";let b=(0,a.i(203431).default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);a.s(["default",()=>b])},858781,a=>{"use strict";var b=a.i(232702);a.s(["ChevronsUpDown",()=>b.default])},6774,a=>{"use strict";var b=a.i(207958);a.s(["CalendarIcon",()=>b.default])},432308,a=>{"use strict";let b=(0,a.i(203431).default)("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);a.s(["default",()=>b])},995004,766291,a=>{"use strict";var b=a.i(169021),c=(0,b.createServerReference)("40f01c38bcd0dedd8819f5121a098e2ffd43eb6e19",b.callServer,void 0,b.findSourceMapURL,"createAppointment");a.s(["createAppointment",()=>c],995004);var d=a.i(861467),e=a.i(578256);a.i(516775);var f=a.i(560272);a.i(445255);var g=a.i(18170);a.i(421695);var h=a.i(736786);a.i(297229);var i=a.i(489904);a.i(413309);var j=a.i(54210),k=a.i(700760),l=a.i(112932),m=a.i(263758),n=a.i(638446),o=a.i(858781),p=a.i(198803),q=a.i(789815),r=a.i(898062),s=a.i(638727),t=a.i(50900),u=a.i(320091),v=a.i(783281);function w({value:a,onChange:b,placeholder:c="Search for customer...",className:w,showRecent:x=!0,recentCustomers:y=[],showCreateNew:z=!0,onCreateNew:A,disabled:B=!1,label:C,error:D=!1,errorMessage:E}){let[F,G]=(0,v.useState)(!1),[H,I]=(0,v.useState)(""),[J,K]=(0,v.useState)([]),[L,M]=(0,v.useState)(!1),[N,O]=(0,v.useState)(null);(0,v.useEffect)(()=>{if(H.trim().length<2){K([]),M(!1);return}M(!0);let a=setTimeout(async()=>{try{let a=await (0,e.searchCustomers)(H,{limit:10});if(a.success&&a.data){let b=Array.isArray(a.data)?a.data:[a.data];K(b)}else K([])}catch(a){console.error("Customer search error:",a),K([])}finally{M(!1)}},300);return()=>clearTimeout(a)},[H]);let P=(0,v.useCallback)(a=>{O(a),b(a.id,a),G(!1),I("")},[b]),Q=(0,v.useCallback)(()=>{O(null),b(null,null),I("")},[b]),R=N?(0,l.getCustomerDisplayName)(N):c,S=(0,v.useMemo)(()=>{let a=new Map;return J.forEach(b=>a.set(b.id,b)),H.trim().length<2&&x&&y.forEach(b=>a.set(b.id,b)),Array.from(a.values())},[J,y,H,x]),T=({customer:b})=>{let c=(0,l.getCustomerDisplayName)(b),e=(0,l.getCustomerInitials)(b),g=a===b.id;return(0,d.jsxs)(h.CommandItem,{value:b.id,onSelect:()=>P(b),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer",children:[(0,d.jsx)(f.Avatar,{className:"h-8 w-8 shrink-0",children:(0,d.jsx)(f.AvatarFallback,{className:"text-xs font-semibold",children:e})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-sm truncate",children:c}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[b.email&&(0,d.jsxs)("span",{className:"flex items-center gap-1 truncate",children:[(0,d.jsx)(q.Mail,{className:"h-3 w-3 shrink-0"}),b.email]}),b.phone&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(r.Phone,{className:"h-3 w-3 shrink-0"}),b.phone]})]}),b.company_name&&(0,d.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-0.5",children:[(0,d.jsx)(m.Building2,{className:"h-3 w-3 shrink-0"}),b.company_name]})]}),g&&(0,d.jsx)(n.Check,{className:"h-4 w-4 text-primary shrink-0"})]},b.id)};return(0,d.jsxs)("div",{className:(0,k.cn)("flex flex-col gap-1.5",w),children:[C&&(0,d.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:C}),(0,d.jsxs)(i.Popover,{open:F,onOpenChange:G,children:[(0,d.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",role:"combobox","aria-expanded":F,disabled:B,className:(0,k.cn)("w-full justify-between",!N&&"text-muted-foreground",D&&"border-destructive focus-visible:ring-destructive"),children:[(0,d.jsx)("span",{className:"flex items-center gap-2 truncate",children:N?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.User,{className:"h-4 w-4 shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:R})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.Search,{className:"h-4 w-4 shrink-0"}),(0,d.jsx)("span",{children:c})]})}),(0,d.jsx)(o.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,d.jsx)(i.PopoverContent,{className:"w-[400px] p-0",align:"start",children:(0,d.jsxs)(h.Command,{shouldFilter:!1,children:[(0,d.jsx)(h.CommandInput,{placeholder:"Search customers...",value:H,onValueChange:I}),(0,d.jsx)(h.CommandList,{children:L?(0,d.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,d.jsx)(p.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):(0,d.jsxs)(d.Fragment,{children:[S.length>0?(0,d.jsx)(h.CommandGroup,{heading:H.trim().length>=2?"Search Results":x&&y.length>0?"Recent Customers":"All Customers",children:(0,d.jsx)(j.ScrollArea,{className:"max-h-[300px]",children:S.map(a=>(0,d.jsx)(T,{customer:a},a.id))})}):H.trim().length>=2?(0,d.jsx)(h.CommandEmpty,{children:"No customers found."}):x&&0===y.length?(0,d.jsx)(h.CommandEmpty,{children:"Start typing to search for customers..."}):null,z&&A&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.CommandSeparator,{}),(0,d.jsx)(h.CommandGroup,{children:(0,d.jsxs)(h.CommandItem,{onSelect:()=>{G(!1),A()},className:"flex items-center gap-2 px-3 py-2.5 cursor-pointer text-primary",children:[(0,d.jsx)(s.Plus,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"font-medium",children:"Create New Customer"})]})})]})]})}),N&&!B&&(0,d.jsx)("div",{className:"border-t p-2",children:(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:Q,className:"w-full text-muted-foreground hover:text-destructive",children:"Clear Selection"})})]})})]}),D&&E&&(0,d.jsx)("p",{className:"text-sm text-destructive",children:E})]})}a.s(["CustomerAutocomplete",()=>w],766291)}];

//# sourceMappingURL=_173d1a44._.js.map