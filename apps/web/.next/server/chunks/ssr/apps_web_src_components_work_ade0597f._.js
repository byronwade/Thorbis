module.exports=[826111,a=>{"use strict";var b=a.i(861467),c=a.i(565308),d=a.i(60222),e=a.i(101482),f=a.i(145679);a.i(288007);var g=a.i(986990);a.i(445255);var h=a.i(18170),i=a.i(425809),j=a.i(700760);let k=[{id:"draft",name:"Draft",accentColor:"#6B7280"},{id:"sent",name:"Sent",accentColor:"#2563EB"},{id:"viewed",name:"Viewed",accentColor:"#9333EA"},{id:"signed",name:"Signed",accentColor:"#22C55E"},{id:"rejected",name:"Rejected",accentColor:"#EF4444"},{id:"expired",name:"Expired",accentColor:"#F97316"}],l=new Map(k.map(a=>[a.id,a.name]));function m({contracts:a}){return(0,b.jsx)(i.EntityKanban,{columns:k,data:a,entityName:"contracts",mapToKanbanItem:a=>({id:a.id,columnId:a.status,entity:a,contract:a}),renderCard:a=>(0,b.jsx)(n,{item:{...a,contract:a.entity}}),renderDragOverlay:a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,b.jsx)(n,{item:{...a,contract:a.entity}})}),updateEntityStatus:(a,b)=>({...a,status:b})})}function n({item:a}){let{contract:i,columnId:k}=a;return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:i.contractNumber}),(0,b.jsx)("h3",{className:"text-foreground text-sm leading-snug font-semibold",children:i.title}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(g.Badge,{className:(0,j.cn)("text-xs","rejected"===k&&"bg-destructive/10 text-destructive","signed"===k&&"bg-primary/10 text-primary"),variant:"signed"===k?"secondary":"rejected"===k?"destructive":"outline",children:l.get(k)??k}),(0,b.jsx)(g.Badge,{className:"text-xs",variant:"outline",children:i.contractType})]})]})}),(0,b.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Users,{className:"text-primary size-4"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:i.customer})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.CalendarDays,{className:"text-primary size-4"}),(0,b.jsxs)("span",{children:[i.date," â†’ ",i.validUntil]})]}),(0,b.jsxs)("p",{children:["Signer:"," ",(0,b.jsx)("span",{className:"text-foreground font-medium",children:i.signerName??"Unassigned"})]})]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-xs",children:[(0,b.jsxs)("span",{children:["Status: ",l.get(k)]}),(0,b.jsx)(h.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,b.jsxs)(f.default,{href:`/dashboard/work/contracts/${i.id}`,children:["View",(0,b.jsx)(c.ArrowUpRight,{className:"size-3.5"})]})})]})]})}a.s(["ContractsKanban",()=>m])},267871,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(187056),e=a.i(854729),f=a.i(430243),g=a.i(94436),h=a.i(638727),i=a.i(739044),j=a.i(145679),k=a.i(783281);a.i(400355);var l=a.i(694340);a.i(445255);var m=a.i(18170);a.i(956852);var n=a.i(90125),o=a.i(380340),p=a.i(493667),q=a.i(169021),r=(0,q.createServerReference)("40801de9f07a4e8d8a8588c620f484e4e252c231ca",q.callServer,void 0,q.findSourceMapURL,"archiveContract"),s=a.i(563432),t=a.i(156916);function u({contracts:a,itemsPerPage:q=50,currentPage:u=1,totalCount:v}){let w=(0,s.useArchiveStore)(a=>a.filters.contracts),[x,y]=(0,k.useState)(!1),[z,A]=(0,k.useState)(!1),[B,C]=(0,k.useState)(null),[D,E]=(0,k.useState)(new Set),F=a.filter(a=>{let b=!!(a.archived_at||a.deleted_at);return"active"===w?!b:"archived"!==w||b}),G=[{key:"contractNumber",header:"Contract #",width:"w-36",shrink:!0,sortable:!0,hideable:!1,render:a=>(0,b.jsx)(j.default,{className:"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline",href:`/dashboard/work/contracts/${a.id}`,onClick:a=>a.stopPropagation(),children:a.contractNumber})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,sortable:!0,hideable:!1,render:a=>(0,b.jsx)("div",{className:"min-w-0",children:(0,b.jsx)("div",{className:"truncate leading-tight font-medium",children:a.customer})})},{key:"title",header:"Title",width:"flex-1",sortable:!0,hideable:!1,render:a=>(0,b.jsx)(j.default,{className:"block min-w-0",href:`/dashboard/work/contracts/${a.id}`,onClick:a=>a.stopPropagation(),children:(0,b.jsx)("div",{className:"truncate text-sm leading-tight font-medium hover:underline",children:a.title})})},{key:"contractType",header:"Type",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:a=>(0,b.jsx)(p.ContractTypeBadge,{type:a.contractType})},{key:"signerName",header:"Signer",width:"w-40",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm leading-tight",children:a.signerName||(0,b.jsx)("span",{className:"text-muted-foreground",children:"Not assigned"})})},{key:"date",header:"Created",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm leading-tight tabular-nums",children:a.date})},{key:"validUntil",header:"Valid Until",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm leading-tight tabular-nums",children:a.validUntil})},{key:"status",header:"Status",width:"w-28",shrink:!0,sortable:!0,hideable:!1,render:a=>(0,b.jsx)(p.ContractStatusBadge,{status:a.status})},{key:"actions",header:"",width:"w-10",shrink:!0,sortable:!1,hideable:!1,render:a=>(0,b.jsx)("div",{"data-no-row-click":!0,children:(0,b.jsxs)(n.DropdownMenu,{children:[(0,b.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(m.Button,{size:"icon",variant:"ghost",children:(0,b.jsx)(g.MoreHorizontal,{className:"size-4"})})}),(0,b.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(n.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(n.DropdownMenuSeparator,{}),(0,b.jsxs)(n.DropdownMenuItem,{children:[(0,b.jsx)(e.Eye,{className:"mr-2 size-4"}),"View Contract"]}),"draft"===a.status&&(0,b.jsxs)(n.DropdownMenuItem,{children:[(0,b.jsx)(i.Send,{className:"mr-2 size-4"}),"Send for Signature"]}),(0,b.jsxs)(n.DropdownMenuItem,{children:[(0,b.jsx)(d.Download,{className:"mr-2 size-4"}),"Download PDF"]}),(0,b.jsx)(n.DropdownMenuSeparator,{}),(0,b.jsxs)(n.DropdownMenuItem,{className:"text-destructive",onClick:()=>{C(a.id),y(!0)},children:[(0,b.jsx)(c.Archive,{className:"mr-2 size-4"}),"Archive Contract"]})]})]})})}],H=[{label:"Send",icon:(0,b.jsx)(i.Send,{className:"h-4 w-4"}),onClick:a=>{t.toast.info(`Send functionality for ${a.size} contract${a.size>1?"s":""} coming soon`)}},{label:"Export",icon:(0,b.jsx)(d.Download,{className:"h-4 w-4"}),onClick:b=>{let c=new Blob([["Contract #,Customer,Title,Type,Signer,Created,Valid Until,Status",...a.filter(a=>b.has(a.id)).map(a=>[a.contractNumber,`"${a.customer}"`,`"${a.title}"`,a.contractType,a.signerName||"",a.date,a.validUntil,a.status].join(","))].join("\n")],{type:"text/csv"}),d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`contracts-export-${new Date().toISOString().split("T")[0]}.csv`,e.click(),URL.revokeObjectURL(d),t.toast.success(`Exported ${b.size} contract${b.size>1?"s":""}`)}},{label:"Archive Selected",icon:(0,b.jsx)(c.Archive,{className:"h-4 w-4"}),onClick:async a=>{E(a),A(!0)},variant:"destructive"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.FullWidthDataTable,{bulkActions:H,columns:G,data:F,emptyAction:(0,b.jsxs)(m.Button,{onClick:()=>window.location.href="/dashboard/work/contracts/new",size:"sm",children:[(0,b.jsx)(h.Plus,{className:"mr-2 size-4"}),"Create Contract"]}),emptyIcon:(0,b.jsx)(f.FileSignature,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No contracts found",enableSelection:!0,entity:"contracts",getHighlightClass:()=>"bg-success/30 dark:bg-success/10",getItemId:a=>a.id,isArchived:a=>!!(a.archived_at||a.deleted_at),isHighlighted:a=>"signed"===a.status,itemsPerPage:q,currentPageFromServer:u,serverPagination:!0,onRefresh:()=>window.location.reload(),onRowClick:a=>window.location.href=`/dashboard/work/contracts/${a.id}`,searchFilter:(a,b)=>{let c=b.toLowerCase();return a.contractNumber.toLowerCase().includes(c)||a.customer.toLowerCase().includes(c)||a.title.toLowerCase().includes(c)||a.status.toLowerCase().includes(c)||a.contractType.toLowerCase().includes(c)||(a.signerName?.toLowerCase().includes(c)??!1)},searchPlaceholder:"Search contracts by number, customer, title, or status...",showArchived:"active"!==w,showRefresh:!1,totalCount:v??F.length}),(0,b.jsx)(l.AlertDialog,{onOpenChange:y,open:x,children:(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsx)(l.AlertDialogTitle,{children:"Archive Contract?"}),(0,b.jsx)(l.AlertDialogDescription,{children:"This contract will be archived and can be restored within 90 days. After 90 days, it will be permanently deleted."})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(l.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{B&&window.location.reload()},children:"Archive"})]})]})}),(0,b.jsx)(l.AlertDialog,{onOpenChange:A,open:z,children:(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsxs)(l.AlertDialogTitle,{children:["Archive ",D.size," Contract(s)?"]}),(0,b.jsx)(l.AlertDialogDescription,{children:"These contracts will be archived and can be restored within 90 days. After 90 days, they will be permanently deleted."})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(l.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{let a=0,b=0;for(let c of D){let d=await r(c);d.success?a++:(b++,console.error(`Failed to archive contract ${c}:`,d.error))}a>0&&t.toast.success(`Archived ${a} contract${a>1?"s":""}`),b>0&&t.toast.error(`Failed to archive ${b} contract${b>1?"s":""}`),window.location.reload()},children:"Archive All"})]})]})})]})}a.s(["ContractsTable",()=>u],267871)}];

//# sourceMappingURL=apps_web_src_components_work_ade0597f._.js.map