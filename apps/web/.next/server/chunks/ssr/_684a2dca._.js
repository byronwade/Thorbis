module.exports=[857463,a=>{"use strict";a.i(156120),a.s([])},861122,a=>{"use strict";let b=(0,a.i(203431).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["default",()=>b])},90083,a=>{"use strict";var b=a.i(861122);a.s(["ArrowRight",()=>b.default])},21368,a=>{"use strict";a.i(156120),a.s([])},614159,a=>{"use strict";let b=(0,a.i(203431).default)("test-tube-diagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);a.s(["default",()=>b])},269978,a=>{"use strict";var b=a.i(861467),c=a.i(805034),d=a.i(90083),e=a.i(96250),f=a.i(984270),g=a.i(933232),h=a.i(198803),i=a.i(789815),j=a.i(127634),k=a.i(352424),l=a.i(614159),l=l,m=a.i(101482),n=a.i(783281),o=a.i(156916);a.i(857463);var p=a.i(161367);a.i(288007);var q=a.i(986990);a.i(445255);var r=a.i(18170);a.i(380934);var s=a.i(347421);a.i(21368);var t=a.i(341903);a.i(839984);var u=a.i(372712);a.i(458393);var v=a.i(82012);a.i(146697);var w=a.i(778737),x=a.i(700760);let y=[{number:1,title:"Connect Google Workspace",description:"Authorize access to your Gmail account",icon:i.Mail},{number:2,title:"Select Email Addresses",description:"Choose which workspace emails to sync",icon:g.Inbox},{number:3,title:"Assign Permissions",description:"Set up team access to email categories",icon:k.Shield},{number:4,title:"Test Connection",description:"Verify everything is working",icon:l.default}],z=[{id:"support",name:"Support",description:"Customer support and help requests",placeholder:"support@yourcompany.com"},{id:"sales",name:"Sales",description:"Sales inquiries and leads",placeholder:"sales@yourcompany.com"},{id:"billing",name:"Billing",description:"Invoices and payment-related emails",placeholder:"billing@yourcompany.com"},{id:"general",name:"General",description:"General company emails",placeholder:"info@yourcompany.com"}];function A({companyId:a,onComplete:A}){let[B,C]=(0,n.useState)(1),[D,E]=(0,n.useState)(!1),[F,G]=(0,n.useState)(!1),[H,I]=(0,n.useState)(""),[J,K]=(0,n.useState)({}),L=async()=>{E(!0);try{let b=process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID,c=`${window.location.origin}/api/auth/gmail/callback`,d=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${b}&redirect_uri=${c}&response_type=code&scope=https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send&access_type=offline&prompt=consent&state=${a}`;window.location.href=d}catch(a){console.error("OAuth connection failed:",a),o.toast.error("Failed to connect to Google Workspace"),E(!1)}},M=async()=>{E(!0);try{let b=await fetch("/api/gmail/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:a})}),c=await b.json();c.success?(o.toast.success("Connection test successful!"),A&&A()):o.toast.error(c.error||"Connection test failed")}catch(a){console.error("Connection test failed:",a),o.toast.error("Failed to test connection")}finally{E(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:y.map((a,c)=>{let d=a.icon,f=B===a.number,g=B>a.number;return(0,b.jsxs)("div",{className:"flex items-center flex-1",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,b.jsx)("div",{className:(0,x.cn)("h-10 w-10 rounded-full flex items-center justify-center transition-all",f&&"bg-primary text-primary-foreground",g&&"bg-green-500 text-white",!f&&!g&&"bg-muted text-muted-foreground"),children:g?(0,b.jsx)(e.CheckCircle2,{className:"h-5 w-5"}):(0,b.jsx)(d,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:(0,x.cn)("text-sm font-medium",f&&"text-primary",g&&"text-green-600",!f&&!g&&"text-muted-foreground"),children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground hidden sm:block",children:a.description})]})]}),c<y.length-1&&(0,b.jsx)(w.Separator,{className:(0,x.cn)("flex-1 max-w-24",g&&"bg-green-500",!g&&"bg-muted")})]},a.number)})}),(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{children:[(0,b.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[React.createElement(y[B-1].icon,{className:"h-5 w-5"}),y[B-1].title]}),(0,b.jsx)(s.CardDescription,{children:y[B-1].description})]}),(0,b.jsxs)(s.CardContent,{className:"min-h-[400px]",children:[1===B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(p.Alert,{children:[(0,b.jsx)(j.Settings,{className:"h-4 w-4"}),(0,b.jsx)(p.AlertTitle,{children:"Before you begin"}),(0,b.jsx)(p.AlertDescription,{children:(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm mt-2",children:[(0,b.jsx)("li",{children:"You need admin access to your Google Workspace account"}),(0,b.jsx)("li",{children:"Make sure you're signed into the correct Google account"}),(0,b.jsx)("li",{children:"We'll request read and send permissions for Gmail"}),(0,b.jsx)("li",{children:"You can revoke access at any time"})]})})]}),F?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-green-500/10 flex items-center justify-center",children:(0,b.jsx)(e.CheckCircle2,{className:"h-8 w-8 text-green-600"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"font-semibold text-lg",children:"Connected Successfully!"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:H})]}),(0,b.jsxs)(q.Badge,{variant:"secondary",className:"gap-1",children:[(0,b.jsx)(e.CheckCircle2,{className:"h-3 w-3"}),"Google Workspace Connected"]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"text-center max-w-md",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Connect Your Google Workspace"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click the button below to authorize Stratos to access your Gmail account. You'll be redirected to Google's secure login page."})]}),(0,b.jsxs)(r.Button,{size:"lg",onClick:L,disabled:D,children:[D&&(0,b.jsx)(h.Loader2,{className:"h-5 w-5 mr-2 animate-spin"}),(0,b.jsx)(i.Mail,{className:"h-5 w-5 mr-2"}),"Connect Google Workspace"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(k.Shield,{className:"h-4 w-4"}),"Secured by Google OAuth 2.0"]})]})]}),2===B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(p.Alert,{children:[(0,b.jsx)(g.Inbox,{className:"h-4 w-4"}),(0,b.jsx)(p.AlertTitle,{children:"Configure Email Categories"}),(0,b.jsx)(p.AlertDescription,{children:"Enter the Gmail addresses for each category. These will be synced to your company inbox and accessible to assigned team members."})]}),(0,b.jsx)("div",{className:"space-y-4",children:z.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(t.Checkbox,{id:a.id,checked:!!J[a.id],onCheckedChange:b=>{if(b)K({...J,[a.id]:""});else{let b={...J};delete b[a.id],K(b)}}}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:a.id,className:"cursor-pointer",children:[(0,b.jsx)("span",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-normal",children:a.description})]}),void 0!==J[a.id]&&(0,b.jsx)(u.Input,{placeholder:a.placeholder,value:J[a.id]||"",onChange:b=>K({...J,[a.id]:b.target.value}),className:"mt-2"})]})]}),a.id!==z[z.length-1].id&&(0,b.jsx)(w.Separator,{className:"mt-4"})]},a.id))})]}),3===B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(p.Alert,{children:[(0,b.jsx)(m.Users,{className:"h-4 w-4"}),(0,b.jsx)(p.AlertTitle,{children:"Team Access (Optional)"}),(0,b.jsx)(p.AlertDescription,{children:"Configure which team members can access each email category. You can skip this step and configure permissions later in team settings."})]}),(0,b.jsxs)("div",{className:"text-center p-8",children:[(0,b.jsx)(m.Users,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Team permission management will be available after setup is complete."}),(0,b.jsx)(r.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsxs)("a",{href:"/dashboard/settings/team/email-permissions",children:[(0,b.jsx)(f.ExternalLink,{className:"h-4 w-4 mr-2"}),"Learn About Email Permissions"]})})]})]}),4===B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(p.Alert,{children:[(0,b.jsx)(l.default,{className:"h-4 w-4"}),(0,b.jsx)(p.AlertTitle,{children:"Test Your Gmail Connection"}),(0,b.jsx)(p.AlertDescription,{children:"We'll verify that we can successfully connect to your Gmail account and sync emails."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)(s.CardTitle,{className:"text-sm",children:"Connected Account"})}),(0,b.jsx)(s.CardContent,{children:(0,b.jsx)("p",{className:"font-mono text-sm",children:H||"Not connected"})})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)(s.CardTitle,{className:"text-sm",children:"Email Categories"})}),(0,b.jsx)(s.CardContent,{children:(0,b.jsxs)("p",{className:"text-sm",children:[Object.keys(J).length," categories configured"]})})]})]}),(0,b.jsx)("div",{className:"flex flex-col items-center justify-center p-8",children:(0,b.jsxs)(r.Button,{size:"lg",onClick:M,disabled:D,children:[D&&(0,b.jsx)(h.Loader2,{className:"h-5 w-5 mr-2 animate-spin"}),(0,b.jsx)(l.default,{className:"h-5 w-5 mr-2"}),"Test Connection Now"]})})]})]})]}),(0,b.jsxs)(s.CardFooter,{className:"flex justify-between",children:[(0,b.jsxs)(r.Button,{variant:"outline",onClick:()=>{B>1&&C(B-1)},disabled:1===B||D,children:[(0,b.jsx)(c.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),B<4?(0,b.jsxs)(r.Button,{onClick:()=>{B<4&&C(B+1)},disabled:!(()=>{switch(B){case 1:return F&&H.length>0;case 2:return Object.values(J).some(a=>a&&a.length>0);case 3:case 4:return!0;default:return!1}})()||D,children:["Next",(0,b.jsx)(d.ArrowRight,{className:"h-4 w-4 ml-2"})]}):(0,b.jsxs)(r.Button,{onClick:()=>A?.(),disabled:D,children:[(0,b.jsx)(e.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Complete Setup"]})]})]})]})}a.s(["GmailSetupWizard",()=>A],269978)}];

//# sourceMappingURL=_684a2dca._.js.map