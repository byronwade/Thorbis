module.exports=[475372,a=>{"use strict";var b=a.i(861467),c=a.i(97997),d=a.i(638446),e=a.i(253520),f=a.i(125987),g=a.i(4229),h=a.i(198803),i=a.i(246840),j=a.i(232553),k=a.i(783281);a.i(256564);var l=a.i(169021),m=(0,l.createServerReference)("00de3102bcf53f94acb0f00e56c7bd35a1acd59238",l.callServer,void 0,l.findSourceMapURL,"getAccountingSettings"),n=(0,l.createServerReference)("4085e79fd52be6219cd22ec55d9b5cffea3b536016",l.callServer,void 0,l.findSourceMapURL,"updateAccountingSettings");a.i(288007);var o=a.i(986990);a.i(445255);var p=a.i(18170);a.i(380934);var q=a.i(347421);a.i(839984);var r=a.i(372712);a.i(458393);var s=a.i(82012);a.i(40744);var t=a.i(419573);a.i(146697);var u=a.i(778737),v=a.i(382281);a.i(650756);var w=a.i(560450);a.i(928414);var x=a.i(745250),y=a.i(251048);function z(){let{toast:a}=(0,y.useToast)(),[l,z]=(0,k.useTransition)(),[A,B]=(0,k.useState)(!0),[C,D]=(0,k.useState)(!1),[E,F]=(0,k.useState)(null),[G,H]=(0,k.useState)({provider:"none",provider_enabled:!1,auto_sync_enabled:!1,sync_frequency:"daily",sync_invoices:!0,sync_payments:!0,sync_expenses:!0,sync_customers:!0}),[I,J]=(0,k.useState)({provider:"none",providerEnabled:!1,apiKey:"",apiSecret:"",autoSyncEnabled:!1,syncFrequency:"daily",incomeAccount:"",expenseAccount:"",assetAccount:"",liabilityAccount:"",syncInvoices:!0,syncPayments:!0,syncExpenses:!0,syncCustomers:!0}),[K,L]=(0,k.useState)({provider:"none",providerEnabled:!1,apiKey:"",apiSecret:"",autoSyncEnabled:!1,syncFrequency:"daily",incomeAccount:"",expenseAccount:"",assetAccount:"",liabilityAccount:"",syncInvoices:!0,syncPayments:!0,syncExpenses:!0,syncCustomers:!0}),M=(0,k.useMemo)(()=>JSON.stringify(K)!==JSON.stringify(I),[K,I]);return((0,k.useEffect)(()=>{!async function(){B(!0);try{let a=await m();if(a.success&&a.data){H(a.data);let b={provider:a.data.provider||"none",providerEnabled:a.data.provider_enabled,apiKey:"",apiSecret:"",autoSyncEnabled:a.data.auto_sync_enabled,syncFrequency:a.data.sync_frequency,incomeAccount:a.data.income_account||"",expenseAccount:a.data.expense_account||"",assetAccount:a.data.asset_account||"",liabilityAccount:a.data.liability_account||"",syncInvoices:a.data.sync_invoices,syncPayments:a.data.sync_payments,syncExpenses:a.data.sync_expenses,syncCustomers:a.data.sync_customers};L(b),J(b),a.data.provider_enabled&&F("connected")}}catch{a.error("Failed to load accounting settings")}finally{B(!1)}}()},[a]),A)?(0,b.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"text-muted-foreground size-8 animate-spin"})}):(0,b.jsxs)("div",{className:"space-y-8 py-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Accounting Integration"}),(0,b.jsxs)(x.Tooltip,{children:[(0,b.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("button",{type:"button",children:(0,b.jsx)(f.HelpCircle,{className:"text-muted-foreground h-3.5 w-3.5"})})}),(0,b.jsx)(x.TooltipContent,{className:"max-w-xs",children:(0,b.jsx)("p",{className:"text-sm",children:"Connect your accounting software for seamless financial data sync. Supports QuickBooks, Xero, Sage, and FreshBooks."})})]})]}),M&&(0,b.jsx)(o.Badge,{className:"bg-warning hover:bg-warning",children:"Unsaved Changes"})]}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"Connect your accounting software for seamless financial data sync"})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.RefreshCw,{className:"text-primary size-5"}),"Provider Configuration"]}),(0,b.jsx)(q.CardDescription,{children:"Select and configure your accounting provider"})]}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[(0,b.jsx)(v.StandardFormField,{label:"Accounting Provider",htmlFor:"provider",children:(0,b.jsxs)(t.Select,{onValueChange:a=>L({...K,provider:a}),value:K.provider,children:[(0,b.jsx)(t.SelectTrigger,{id:"provider",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"none",children:"None"}),(0,b.jsx)(t.SelectItem,{value:"quickbooks",children:"QuickBooks Online"}),(0,b.jsx)(t.SelectItem,{value:"xero",children:"Xero"}),(0,b.jsx)(t.SelectItem,{value:"sage",children:"Sage Intacct"}),(0,b.jsx)(t.SelectItem,{value:"freshbooks",children:"FreshBooks"}),(0,b.jsx)(t.SelectItem,{value:"manual",children:"Manual Entry"})]})]})}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["connected"===E&&(0,b.jsxs)("div",{className:"text-success flex items-center gap-2 text-sm",children:[(0,b.jsx)(e.CheckCircle,{className:"size-4"}),(0,b.jsx)("span",{children:"Connected"})]}),"disconnected"===E&&(0,b.jsxs)("div",{className:"text-destructive flex items-center gap-2 text-sm",children:[(0,b.jsx)(c.AlertCircle,{className:"size-4"}),(0,b.jsx)("span",{children:"Not Connected"})]})]})})]}),"none"!==K.provider&&"manual"!==K.provider&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"API Credentials"}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)(v.StandardFormField,{label:"API Key / Client ID",htmlFor:"apiKey",children:(0,b.jsx)(r.Input,{id:"apiKey",onChange:a=>L({...K,apiKey:a.target.value}),placeholder:"Enter your API key",type:"password",value:K.apiKey})}),(0,b.jsx)(v.StandardFormField,{label:"API Secret / Client Secret",htmlFor:"apiSecret",children:(0,b.jsx)(r.Input,{id:"apiSecret",onChange:a=>L({...K,apiSecret:a.target.value}),placeholder:"Enter your API secret",type:"password",value:K.apiSecret})})]}),(0,b.jsx)(p.Button,{disabled:C||!K.apiKey||!K.apiSecret,onClick:()=>{D(!0),setTimeout(()=>{D(!1),K.apiKey&&K.apiSecret?(F("connected"),a.success(`Successfully connected to ${K.provider}`)):(F("disconnected"),a.error("Please provide valid API credentials"))},2e3)},variant:"outline",children:C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 size-4 animate-spin"}),"Testing Connection..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Link2,{className:"mr-2 size-4"}),"Test Connection"]})})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Enable Provider"}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Activate integration with ",K.provider]})]}),(0,b.jsx)(w.Switch,{checked:K.providerEnabled,onCheckedChange:a=>L({...K,providerEnabled:a})})]})]})]})]}),K.providerEnabled&&"none"!==K.provider&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.RefreshCw,{className:"text-primary size-5"}),"Sync Settings"]}),(0,b.jsx)(q.CardDescription,{children:"Configure automatic data synchronization"})]}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Auto Sync"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Automatically sync data on schedule"})]}),(0,b.jsx)(w.Switch,{checked:K.autoSyncEnabled,onCheckedChange:a=>L({...K,autoSyncEnabled:a})})]}),K.autoSyncEnabled&&(0,b.jsx)(v.StandardFormField,{label:"Sync Frequency",htmlFor:"syncFrequency",children:(0,b.jsxs)(t.Select,{onValueChange:a=>L({...K,syncFrequency:a}),value:K.syncFrequency,children:[(0,b.jsx)(t.SelectTrigger,{id:"syncFrequency",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"realtime",children:"Real-time"}),(0,b.jsx)(t.SelectItem,{value:"hourly",children:"Hourly"}),(0,b.jsx)(t.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(t.SelectItem,{value:"weekly",children:"Weekly"}),(0,b.jsx)(t.SelectItem,{value:"manual",children:"Manual Only"})]})]})}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Data Sync Options"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Sync Invoices"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync invoice data to accounting system"})]}),(0,b.jsx)(w.Switch,{checked:K.syncInvoices,onCheckedChange:a=>L({...K,syncInvoices:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Sync Payments"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync payment transactions"})]}),(0,b.jsx)(w.Switch,{checked:K.syncPayments,onCheckedChange:a=>L({...K,syncPayments:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Sync Expenses"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync expense records"})]}),(0,b.jsx)(w.Switch,{checked:K.syncExpenses,onCheckedChange:a=>L({...K,syncExpenses:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(s.Label,{children:"Sync Customers"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync customer information"})]}),(0,b.jsx)(w.Switch,{checked:K.syncCustomers,onCheckedChange:a=>L({...K,syncCustomers:a})})]})]})]})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.RefreshCw,{className:"text-primary size-5"}),"Account Mapping"]}),(0,b.jsx)(q.CardDescription,{children:"Map Thorbis accounts to your accounting chart of accounts"})]}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsx)(v.StandardFormField,{label:"Income Account",htmlFor:"incomeAccount",children:(0,b.jsx)(r.Input,{id:"incomeAccount",onChange:a=>L({...K,incomeAccount:a.target.value}),placeholder:"e.g., 4000 - Service Revenue",value:K.incomeAccount})}),(0,b.jsx)(v.StandardFormField,{label:"Expense Account",htmlFor:"expenseAccount",children:(0,b.jsx)(r.Input,{id:"expenseAccount",onChange:a=>L({...K,expenseAccount:a.target.value}),placeholder:"e.g., 5000 - Operating Expenses",value:K.expenseAccount})}),(0,b.jsx)(v.StandardFormField,{label:"Asset Account",htmlFor:"assetAccount",children:(0,b.jsx)(r.Input,{id:"assetAccount",onChange:a=>L({...K,assetAccount:a.target.value}),placeholder:"e.g., 1200 - Accounts Receivable",value:K.assetAccount})}),(0,b.jsx)(v.StandardFormField,{label:"Liability Account",htmlFor:"liabilityAccount",children:(0,b.jsx)(r.Input,{id:"liabilityAccount",onChange:a=>L({...K,liabilityAccount:a.target.value}),placeholder:"e.g., 2000 - Accounts Payable",value:K.liabilityAccount})})]})]})]}),(0,b.jsx)(q.Card,{className:"border-primary/50 bg-primary/5",children:(0,b.jsxs)(q.CardContent,{className:"flex items-start gap-3 pt-6",children:[(0,b.jsx)(i.RefreshCw,{className:"text-primary mt-0.5 h-5 w-5 shrink-0"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-primary dark:text-primary text-sm font-medium",children:"Accounting Integration Benefits"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Connecting your accounting software enables automatic financial data sync, reduces manual data entry, ensures accuracy across systems, and provides real-time financial reporting. Your credentials are encrypted and securely stored."})]})]})})]}),(0,b.jsx)("div",{className:"bg-card sticky bottom-0 z-10 rounded-xl border p-6 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:M?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-warning dark:bg-warning/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,b.jsx)("div",{className:"bg-warning h-2 w-2 animate-pulse rounded-full"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Unsaved Changes"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Save your changes or discard them"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-success dark:bg-success/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,b.jsx)(d.Check,{className:"text-success dark:text-success h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"All Changes Saved"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:G.last_sync_at?`Last synced: ${new Date(G.last_sync_at).toLocaleString()}`:"Your settings are up to date"})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(p.Button,{disabled:l,onClick:()=>{L(I)},variant:"outline",children:"Cancel"}),(0,b.jsx)(p.Button,{disabled:l||!M,onClick:()=>{z(async()=>{let b=new FormData;b.append("provider",K.provider),b.append("providerEnabled",K.providerEnabled.toString()),K.apiKey&&b.append("apiKey",K.apiKey),K.apiSecret&&b.append("apiSecret",K.apiSecret),b.append("autoSyncEnabled",K.autoSyncEnabled.toString()),b.append("syncFrequency",K.syncFrequency),K.incomeAccount&&b.append("incomeAccount",K.incomeAccount),K.expenseAccount&&b.append("expenseAccount",K.expenseAccount),K.assetAccount&&b.append("assetAccount",K.assetAccount),K.liabilityAccount&&b.append("liabilityAccount",K.liabilityAccount),b.append("syncInvoices",K.syncInvoices.toString()),b.append("syncPayments",K.syncPayments.toString()),b.append("syncExpenses",K.syncExpenses.toString()),b.append("syncCustomers",K.syncCustomers.toString());let c=await n(b);c.success?(a.success("Accounting settings updated successfully"),J(K)):a.error(c.error||"Failed to update accounting settings")})},children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 size-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Save,{className:"mr-2 size-4"}),"Save Settings"]})})]})]})})]})}a.s(["AccountingSettingsClient",()=>z],475372)}];

//# sourceMappingURL=apps_web_src_components_settings_finance_accounting-settings-client_tsx_9d829d99._.js.map