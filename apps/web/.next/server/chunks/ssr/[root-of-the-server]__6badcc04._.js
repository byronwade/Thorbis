module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},148233,a=>{a.n(a.i(424946))},659256,a=>{a.n(a.i(679010))},972651,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ToolbarActionsProvider() from the server but ToolbarActionsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/toolbar-actions-provider.tsx <module evaluation>","ToolbarActionsProvider");a.s(["ToolbarActionsProvider",0,b])},288666,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ToolbarActionsProvider() from the server but ToolbarActionsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/toolbar-actions-provider.tsx","ToolbarActionsProvider");a.s(["ToolbarActionsProvider",0,b])},358829,a=>{"use strict";a.i(972651);var b=a.i(288666);a.n(b)},595871,a=>{"use strict";var b=a.i(429969);a.i(467361);var c=a.i(445074),d=a.i(933427);let e=`
  id,
  equipment_number,
  name,
  classification,
  type,
  manufacturer,
  model,
  serial_number,
  status,
  condition,
  install_date,
  last_service_date,
  next_service_due,
  location,
  archived_at,
  deleted_at,
  customer:customers!equipment_customer_id_customers_id_fk (
    display_name,
    first_name,
    last_name
  ),
  property:properties!equipment_property_id_properties_id_fk (
    address,
    city,
    state
  )
`;async function f(a,b=50,g){let h=g??await (0,c.getActiveCompanyId)();if(!h)return{equipment:[],totalCount:0};let i=await (0,d.createServiceSupabaseClient)();if(!i)throw Error("Supabase client not configured");let j=(Math.max(a,1)-1)*b,{data:k,error:l,count:m}=await i.from("equipment").select(e,{count:"exact"}).eq("company_id",h).order("created_at",{ascending:!1}).range(j,j+b-1);if(l)throw Error(`Failed to load equipment: ${l.message}`);return{equipment:k??[],totalCount:m??0}}let g=(0,b.cache)(async(a,b)=>{let c=await (0,d.createServiceSupabaseClient)();if(!c)throw Error("Supabase client not configured");let{data:e,error:f}=await c.rpc("get_equipment_complete",{p_equipment_id:a,p_company_id:b});return f?(console.error("Error fetching equipment:",f),null):e?.[0]?.equipment_data||null});a.s(["EQUIPMENT_PAGE_SIZE",0,50,"getEquipmentComplete",0,g,"getEquipmentPageData",()=>f])},860112,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentPageContent() from the server but EquipmentPageContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment/equipment-page-content.tsx <module evaluation>","EquipmentPageContent");a.s(["EquipmentPageContent",0,b])},356072,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentPageContent() from the server but EquipmentPageContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment/equipment-page-content.tsx","EquipmentPageContent");a.s(["EquipmentPageContent",0,b])},612807,a=>{"use strict";a.i(860112);var b=a.i(356072);a.n(b)},188422,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentDetailToolbarActions() from the server but EquipmentDetailToolbarActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-detail-toolbar-actions.tsx <module evaluation>","EquipmentDetailToolbarActions");a.s(["EquipmentDetailToolbarActions",0,b])},766664,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EquipmentDetailToolbarActions() from the server but EquipmentDetailToolbarActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/equipment-detail-toolbar-actions.tsx","EquipmentDetailToolbarActions");a.s(["EquipmentDetailToolbarActions",0,b])},528972,a=>{"use strict";a.i(188422);var b=a.i(766664);a.n(b)},673600,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(358829),f=a.i(612807),g=a.i(528972),h=a.i(595871),i=a.i(136874);async function j({equipmentId:c}){let j=await (0,i.createClient)();if(!j)return(0,d.notFound)();let{data:{user:k},error:l}=await j.auth.getUser();if(l||!k)return(0,d.notFound)();let{getActiveCompanyId:m}=await a.A(37652),n=await m();if(!n)return(0,d.notFound)();let{data:o,error:p}=await j.from("company_memberships").select("company_id").eq("user_id",k.id).eq("company_id",n).eq("status","active").maybeSingle();if(p&&"PGRST116"!==p.code&&Object.keys(p).length>0||!o)return(0,d.notFound)();let q=await (0,h.getEquipmentComplete)(c,o.company_id),r=q?null:{code:"PGRST116"};if(r)return"PGRST116"===r.code?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsxs)("div",{className:"border-border bg-card max-w-md rounded-lg border p-8 text-center shadow-lg",children:[(0,b.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Equipment Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 text-sm",children:"This equipment doesn't exist or has been deleted."}),(0,b.jsx)("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium",href:"/dashboard/work/equipment",children:"Back to Equipment"})]})}):"42501"===r.code?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsxs)("div",{className:"border-border bg-card max-w-md rounded-lg border p-8 text-center shadow-lg",children:[(0,b.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Wrong Company"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-2 text-sm",children:"This equipment belongs to a different company."}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 text-sm",children:"If you need to access this equipment, please switch to the correct company using the company selector in the header."}),(0,b.jsx)("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium",href:"/dashboard/work/equipment",children:"Back to Equipment"})]})}):(0,d.notFound)();if(!q)return(0,d.notFound)();let[{data:s},{data:t},{data:u},{data:v},{data:w},{data:x},{data:y},{data:z},{data:A},{data:B}]=await Promise.all([q.customer_id?j.from("customers").select("*").eq("id",q.customer_id).maybeSingle():Promise.resolve({data:null}),q.property_id?j.from("properties").select("*").eq("id",q.property_id).maybeSingle():Promise.resolve({data:null}),q.maintenance_plan_id?j.from("maintenance_plans").select("*").eq("id",q.maintenance_plan_id).maybeSingle():Promise.resolve({data:null}),q.install_job_id?j.from("jobs").select("*").eq("id",q.install_job_id).maybeSingle():Promise.resolve({data:null}),q.last_service_job_id?j.from("jobs").select("*").eq("id",q.last_service_job_id).maybeSingle():Promise.resolve({data:null}),j.from("appointments").select(`
        *,
        job:jobs!job_id(id, job_number, title)
      `).eq("equipment_id",c).gte("scheduled_start",new Date().toISOString()).is("deleted_at",null).order("scheduled_start",{ascending:!0}).limit(5),j.from("jobs").select("*").eq("equipment_id",c).eq("status","completed").is("deleted_at",null).order("completed_at",{ascending:!1}).limit(10),j.from("equipment_notes").select("*").eq("equipment_id",c).is("deleted_at",null).order("created_at",{ascending:!1}).limit(20),j.from("equipment_activities").select("*").eq("equipment_id",c).order("created_at",{ascending:!1}).limit(20),j.from("equipment_attachments").select("*").eq("equipment_id",c).is("deleted_at",null).order("created_at",{ascending:!1}).limit(10)]);return(0,b.jsx)(e.ToolbarActionsProvider,{actions:(0,b.jsx)(g.EquipmentDetailToolbarActions,{}),children:(0,b.jsx)(f.EquipmentPageContent,{entityData:{equipment:q,customer:s||void 0,property:t||void 0,servicePlan:u||void 0,installJob:v||void 0,lastServiceJob:w||void 0,upcomingMaintenance:x||[],serviceHistory:y||[],notes:z||[],activities:A||[],attachments:B||[]}})})}function k(){return(0,b.jsxs)("div",{className:"flex h-full flex-col gap-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-muted h-8 w-64 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-4 w-48 animate-pulse rounded"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"bg-muted h-10 w-24 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-10 w-24 animate-pulse rounded"})]})]}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"border-border bg-card rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted mt-2 h-8 w-16 animate-pulse rounded"})]},a))}),(0,b.jsx)("div",{className:"bg-muted h-32 animate-pulse rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsx)("div",{className:"bg-muted h-64 animate-pulse rounded-lg"}),(0,b.jsx)("div",{className:"bg-muted h-64 animate-pulse rounded-lg"})]})]})}async function l({params:a}){let{id:b}=await a;return{title:"Equipment Details"}}async function m({params:a}){let{id:d}=await a;return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(k,{}),children:(0,b.jsx)(j,{equipmentId:d})})}a.s(["default",()=>m,"generateMetadata",()=>l],673600)},37652,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_auth_company-context_ts_732d588b._.js"].map(b=>a.l(b))).then(()=>b(480513)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6badcc04._.js.map