module.exports=[769080,a=>{"use strict";var b=a.i(861467),c=a.i(263758),d=a.i(587969),e=a.i(527936),f=a.i(274956),g=a.i(319895),h=a.i(757844),i=a.i(246840),j=a.i(320091),k=a.i(145679),l=a.i(783281),m=a.i(836994);a.i(288007);var n=a.i(986990);a.i(445255);var o=a.i(18170);a.i(839984);var p=a.i(372712);a.i(458393);var q=a.i(82012);a.i(476036);var r=a.i(930514);function s(a){return null==a?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a/100)}function t(a){return({cash:"Cash",check:"Check",credit_card:"Credit Card",debit_card:"Debit Card",ach:"ACH",wire:"Wire Transfer",venmo:"Venmo",paypal:"PayPal",other:"Other"})[a]||a}function u(a,c){let d={pending:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Pending"},processing:{className:"bg-primary text-primary dark:bg-primary/20 dark:text-primary",label:"Processing"},completed:{className:"bg-success text-white",label:"Completed"},failed:{className:"bg-destructive text-white",label:"Failed"},refunded:{className:"bg-warning text-white",label:"Refunded"},partially_refunded:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Partially Refunded"},cancelled:{className:"bg-secondary0 text-white",label:"Cancelled"}}[a]||{className:"bg-muted text-foreground",label:a};return(0,b.jsx)(n.Badge,{className:d.className,variant:"outline",children:d.label},c)}function v({entityData:a}){let{payment:v,customer:w,invoice:x,job:y,paymentPlanSchedule:z,financingProvider:A,notes:B=[],activities:C=[],attachments:D=[]}=a,E=[u(v.status||"pending","status"),(0,b.jsx)(n.Badge,{variant:"outline",children:t(v.payment_method||"other")},"method")],F=(0,b.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,b.jsx)("div",{className:"bg-muted/50 rounded-md shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:p-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:E}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("h1",{className:"text-2xl font-semibold sm:text-3xl",children:["Payment ",v.payment_number||v.id.slice(0,8)]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:s(v.amount)})]})]})}),w&&(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,b.jsxs)(k.default,{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors",href:`/dashboard/customers/${w.id}`,children:[(0,b.jsx)(j.User,{className:"size-4"}),w.display_name||`${w.first_name||""} ${w.last_name||""}`.trim()||"Unknown Customer"]})})]})})}),G=(0,l.useMemo)(()=>{let a=[{id:"payment-details",title:"Payment Details",icon:(0,b.jsx)(e.CreditCard,{className:"size-4"}),defaultOpen:!0,content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Payment Number"}),(0,b.jsx)(p.Input,{readOnly:!0,value:v.payment_number||v.id.slice(0,8)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Amount"}),(0,b.jsx)(p.Input,{readOnly:!0,value:s(v.amount)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Payment Method"}),(0,b.jsx)(p.Input,{readOnly:!0,value:t(v.payment_method||"other")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Status"}),(0,b.jsx)("div",{children:u(v.status||"pending")})]}),v.processed_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Processed At"}),(0,b.jsx)(p.Input,{readOnly:!0,value:new Date(v.processed_at).toLocaleString()})]}),v.completed_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Completed At"}),(0,b.jsx)(p.Input,{readOnly:!0,value:new Date(v.completed_at).toLocaleString()})]}),v.reference_number&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Reference Number"}),(0,b.jsx)(p.Input,{readOnly:!0,value:v.reference_number})]}),v.check_number&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Check Number"}),(0,b.jsx)(p.Input,{readOnly:!0,value:v.check_number})]}),v.card_last4&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Card"}),(0,b.jsx)(p.Input,{readOnly:!0,value:`${v.card_brand||"Card"} •••• ${v.card_last4}`})]})]})})}];if((v.processor_name||v.processor_transaction_id)&&a.push({id:"processor-info",title:"Processor Information",icon:(0,b.jsx)(c.Building2,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[v.processor_name&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Processor"}),(0,b.jsx)(p.Input,{readOnly:!0,value:v.processor_name})]}),v.processor_transaction_id&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Transaction ID"}),(0,b.jsx)(p.Input,{readOnly:!0,value:v.processor_transaction_id})]}),null!==v.processor_fee&&void 0!==v.processor_fee&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Processor Fee"}),(0,b.jsx)(p.Input,{readOnly:!0,value:s(v.processor_fee)})]}),null!==v.net_amount&&void 0!==v.net_amount&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Net Amount"}),(0,b.jsx)(p.Input,{readOnly:!0,value:s(v.net_amount)})]})]})})}),v.refunded_amount>0&&a.push({id:"refunds",title:"Refunds",icon:(0,b.jsx)(i.RefreshCw,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Refunded Amount"}),(0,b.jsx)("p",{className:"text-sm font-semibold",children:s(v.refunded_amount)})]}),v.refund_reason&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Refund Reason"}),(0,b.jsx)("p",{className:"text-sm",children:v.refund_reason})]}),v.refunded_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Refunded At"}),(0,b.jsx)("p",{className:"text-sm",children:new Date(v.refunded_at).toLocaleString()})]})]})})}),w&&a.push({id:"customer-details",title:"Customer Details",icon:(0,b.jsx)(j.User,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Name"}),(0,b.jsx)("p",{className:"text-sm",children:w.display_name||`${w.first_name||""} ${w.last_name||""}`.trim()||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Email"}),(0,b.jsx)("p",{className:"text-sm",children:w.email||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Phone"}),(0,b.jsx)("p",{className:"text-sm",children:w.phone||"N/A"})]})]}),(0,b.jsx)(o.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(k.default,{href:`/dashboard/customers/${w.id}`,children:"View Full Profile"})})]})})}),x&&a.push({id:"invoice-details",title:"Related Invoice",icon:(0,b.jsx)(h.Receipt,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Invoice Number"}),(0,b.jsxs)("p",{className:"text-sm",children:["#",x.invoice_number||x.id.slice(0,8)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Invoice Amount"}),(0,b.jsx)("p",{className:"text-sm",children:s(x.total_amount)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Status"}),(0,b.jsx)(n.Badge,{variant:"outline",children:x.status||"N/A"})]})]}),(0,b.jsx)(o.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(k.default,{href:`/dashboard/work/invoices/${x.id}`,children:"View Invoice"})})]})})}),y&&a.push({id:"job-details",title:"Related Job",icon:(0,b.jsx)(g.FileText,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Job Number"}),(0,b.jsxs)("p",{className:"text-sm",children:["#",y.job_number||y.id.slice(0,8)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Title"}),(0,b.jsx)("p",{className:"text-sm",children:y.title||"N/A"})]})]}),(0,b.jsx)(o.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(k.default,{href:`/dashboard/work/${y.id}`,children:"View Job"})})]})})}),z){let c=Array.isArray(z.payment_plan)?z.payment_plan[0]:z.payment_plan;a.push({id:"payment-plan",title:"Payment Plan",icon:(0,b.jsx)(d.Calendar,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-card rounded-lg border p-4",children:[(0,b.jsx)(q.Label,{className:"mb-2 block text-xs",children:"Plan Details"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"Plan Name:"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:c?.name||"Payment Plan"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"Total Amount:"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:s(c?.total_amount)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"Total Payments:"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:c?.number_of_payments||0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"This Payment:"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:["#",z.installment_number," of"," ",c?.number_of_payments]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"Due Date:"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:z.due_date?new Date(z.due_date).toLocaleDateString():"-"})]})]})]}),c?.invoice&&(0,b.jsx)(o.Button,{asChild:!0,className:"w-full",variant:"outline",children:(0,b.jsxs)(k.default,{href:`/dashboard/work/invoices/${c.invoice.id}`,children:["View Related Invoice #",c.invoice.invoice_number]})})]})})})}return A&&a.push({id:"financing",title:"Financing Provider",icon:(0,b.jsx)(f.DollarSign,{className:"size-4"}),content:(0,b.jsx)(r.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{className:"text-xs",children:"Provider Name"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:A.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{className:"text-xs",children:"Type"}),(0,b.jsx)(n.Badge,{className:"capitalize",variant:"outline",children:A.provider_type})]}),A.contact_email&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{className:"text-xs",children:"Contact Email"}),(0,b.jsx)("a",{className:"text-primary block text-sm hover:underline",href:`mailto:${A.contact_email}`,children:A.contact_email})]}),A.contact_phone&&(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{className:"text-xs",children:"Contact Phone"}),(0,b.jsx)("a",{className:"text-primary block text-sm hover:underline",href:`tel:${A.contact_phone}`,children:A.contact_phone})]})]})})})}),a},[v,w,x,y,z,A]),H=(0,l.useMemo)(()=>{let a=[];return w&&a.push({id:`customer-${w.id}`,type:"customer",title:w.display_name||`${w.first_name||""} ${w.last_name||""}`.trim()||"Unknown Customer",subtitle:w.email||w.phone||void 0,href:`/dashboard/customers/${w.id}`}),x&&a.push({id:`invoice-${x.id}`,type:"invoice",title:`Invoice #${x.invoice_number||x.id.slice(0,8)}`,subtitle:s(x.total_amount),href:`/dashboard/work/invoices/${x.id}`,badge:x.status?{label:x.status,variant:"outline"}:void 0}),y&&a.push({id:`job-${y.id}`,type:"job",title:y.title||`Job #${y.job_number||y.id.slice(0,8)}`,subtitle:y.status,href:`/dashboard/work/${y.id}`,badge:y.status?{label:y.status,variant:"outline"}:void 0}),a},[w,x,y]);return(0,b.jsx)(m.DetailPageContentLayout,{activities:C,attachments:D,customHeader:F,customSections:G,defaultOpenSection:"payment-details",notes:B,relatedItems:H,showStandardSections:{activities:!0,notes:!0,attachments:!0,relatedItems:!0}})}a.s(["PaymentPageContent",()=>v])}];

//# sourceMappingURL=apps_web_src_components_work_payments_payment-page-content_tsx_ea2ca721._.js.map