module.exports=[251048,a=>{"use strict";var b=a.i(156916);function c(){return{toast:{success:(a,c)=>b.toast.success(a,{duration:3e3,...c}),error:(a,c)=>b.toast.error(a,{duration:5e3,...c}),loading:(a,c)=>b.toast.loading(a,c),info:(a,c)=>b.toast.info(a,{duration:3e3,...c}),warning:(a,c)=>b.toast.warning(a,{duration:4e3,...c}),promise:(a,c)=>b.toast.promise(a,c),dismiss:a=>{b.toast.dismiss(a)},fromActionResult:a=>{a.success?b.toast.success(a.message||"Operation completed successfully"):b.toast.error(a.error||"Operation failed")}}}}a.s(["useToast",()=>c])},861392,a=>{"use strict";let b=(0,a.i(203431).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["default",()=>b])},854729,a=>{"use strict";var b=a.i(861392);a.s(["Eye",()=>b.default])},203431,325509,a=>{"use strict";var b=a.i(783281);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]]));a.s(["default",()=>f],325509);let g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],203431)},445255,a=>{"use strict";a.i(156120),a.s([])},380934,a=>{"use strict";a.i(156120),a.s([])},699728,a=>{"use strict";let b=(0,a.i(203431).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},97997,a=>{"use strict";var b=a.i(699728);a.s(["AlertCircle",()=>b.default])},213482,a=>{"use strict";let b=(0,a.i(203431).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["default",()=>b])},320091,a=>{"use strict";var b=a.i(213482);a.s(["User",()=>b.default])},513700,a=>{"use strict";let b=(0,a.i(203431).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b])},198803,a=>{"use strict";var b=a.i(513700);a.s(["Loader2",()=>b.default])},169021,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(782161),g=a.r(753577),h=a.r(10452)},839984,a=>{"use strict";a.i(156120),a.s([])},857463,a=>{"use strict";a.i(156120),a.s([])},162447,a=>{"use strict";let b=(0,a.i(203431).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["default",()=>b])},253520,a=>{"use strict";var b=a.i(162447);a.s(["CheckCircle",()=>b.default])},604181,a=>{"use strict";let b=(0,a.i(203431).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["default",()=>b])},723507,a=>{"use strict";var b=a.i(604181);a.s(["EyeOff",()=>b.default])},96444,519857,a=>{"use strict";var b=a.i(702214);let c=(a,c,d)=>{if(a&&"reportValidity"in a){let e=(0,b.get)(d,c);a.setCustomValidity(e&&e.message||""),a.reportValidity()}},d=(a,b)=>{for(let d in b.fields){let e=b.fields[d];e&&e.ref&&"reportValidity"in e.ref?c(e.ref,d,a):e&&e.refs&&e.refs.forEach(b=>c(b,d,a))}},e=(a,c)=>{c.shouldUseNativeValidation&&d(a,c);let e={};for(let d in a){let g=(0,b.get)(c.fields,d),h=Object.assign(a[d]||{},{ref:g&&g.ref});if(f(c.names||Object.keys(a),d)){let a=Object.assign({},(0,b.get)(e,d));(0,b.set)(a,"root",h),(0,b.set)(e,d,a)}else(0,b.set)(e,d,h)}return e},f=(a,b)=>{let c=g(b);return a.some(a=>g(a).match(`^${c}\\.\\d+`))};function g(a){return a.replace(/\]|\[/g,"")}var h=a.i(828134),i=a.i(753922);function j(a,b){try{var c=a()}catch(a){return b(a)}return c&&c.then?c.then(void 0,b):c}function k(a,c,f){if(void 0===f&&(f={}),"_def"in a&&"object"==typeof a._def&&"typeName"in a._def)return function(g,h,i){try{return Promise.resolve(j(function(){return Promise.resolve(a["sync"===f.mode?"parse":"parseAsync"](g,c)).then(function(a){return i.shouldUseNativeValidation&&d({},i),{errors:{},values:f.raw?Object.assign({},g):a}})},function(a){if(Array.isArray(null==a?void 0:a.issues))return{values:{},errors:e(function(a,c){for(var d={};a.length;){var e=a[0],f=e.code,g=e.message,h=e.path.join(".");if(!d[h])if("unionErrors"in e){var i=e.unionErrors[0].errors[0];d[h]={message:i.message,type:i.code}}else d[h]={message:g,type:f};if("unionErrors"in e&&e.unionErrors.forEach(function(b){return b.errors.forEach(function(b){return a.push(b)})}),c){var j=d[h].types,k=j&&j[e.code];d[h]=(0,b.appendErrors)(h,c,d,f,k?[].concat(k,e.message):e.message)}a.shift()}return d}(a.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw a}))}catch(a){return Promise.reject(a)}};if("_zod"in a&&"object"==typeof a._zod)return function(g,k,l){try{return Promise.resolve(j(function(){return Promise.resolve(("sync"===f.mode?i.parse:i.parseAsync)(a,g,c)).then(function(a){return l.shouldUseNativeValidation&&d({},l),{errors:{},values:f.raw?Object.assign({},g):a}})},function(a){if(a instanceof h.$ZodError)return{values:{},errors:e(function(a,c){for(var d={};a.length;){var e=a[0],f=e.code,g=e.message,h=e.path.join(".");if(!d[h])if("invalid_union"===e.code&&e.errors.length>0){var i=e.errors[0][0];d[h]={message:i.message,type:i.code}}else d[h]={message:g,type:f};if("invalid_union"===e.code&&e.errors.forEach(function(b){return b.forEach(function(b){return a.push(b)})}),c){var j=d[h].types,k=j&&j[e.code];d[h]=(0,b.appendErrors)(h,c,d,f,k?[].concat(k,e.message):e.message)}a.shift()}return d}(a.issues,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw a}))}catch(a){return Promise.reject(a)}};throw Error("Invalid input: not a Zod schema")}a.s(["zodResolver",()=>k],96444),a.i(156120),a.s([],519857)},137281,a=>{"use strict";var b=a.i(861467),c=a.i(96444),d=a.i(97997),e=a.i(253520),f=a.i(854729),g=a.i(723507),h=a.i(198803),i=a.i(320091),j=a.i(337241),k=a.i(783281),l=a.i(702214),m=a.i(562991),n=a.i(169021),o=(0,n.createServerReference)("40b17c6e2f31505c0fb75484ff7f8b005e7bcf1c97",n.callServer,void 0,n.findSourceMapURL,"acceptTeamInvitation");a.i(857463);var p=a.i(161367);a.i(445255);var q=a.i(18170);a.i(380934);var r=a.i(347421);a.i(519857);var s=a.i(565838);a.i(839984);var t=a.i(372712),u=a.i(251048);let v=m.z.object({firstName:m.z.string().min(1,"First name is required"),lastName:m.z.string().min(1,"Last name is required"),email:m.z.string().email("Invalid email address"),phone:m.z.string().optional(),password:m.z.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:m.z.string().min(1,"Please confirm your password"),photo:m.z.instanceof(File).optional()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function w(){let a=(0,j.useRouter)(),m=(0,j.useSearchParams)(),{toast:n}=(0,u.useToast)(),[w,x]=(0,k.useState)(!0),[y,z]=(0,k.useState)(!1),[A,B]=(0,k.useState)(!1),[C,D]=(0,k.useState)(!1),[E,F]=(0,k.useState)(!1),[G,H]=(0,k.useState)(null),[I,J]=(0,k.useState)(null),[K,L]=(0,k.useState)(null),M=(0,l.useForm)({resolver:(0,c.zodResolver)(v),defaultValues:{firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}}),N=m?.get("token");(0,k.useEffect)(()=>{!async function(){if(!N){H("No invitation token provided"),x(!1);return}try{let a=await fetch(`/api/verify-invitation?token=${encodeURIComponent(N)}`);if(!a.ok)throw Error("Failed to verify invitation");let b=await a.json();if(!b.valid){H(b.error||"Invalid invitation token"),x(!1);return}J(b.invitation),F(!0),M.setValue("email",b.invitation.email),M.setValue("firstName",b.invitation.firstName),M.setValue("lastName",b.invitation.lastName),b.invitation.phone&&M.setValue("phone",b.invitation.phone)}catch(a){H("Failed to verify invitation. Please try again.")}finally{x(!1)}}()},[N,M]);let O=async b=>{if(!N)return void n.error("No invitation token provided");z(!0);try{let c=new FormData;c.append("token",N),c.append("firstName",b.firstName),c.append("lastName",b.lastName),c.append("email",b.email),c.append("phone",b.phone||""),c.append("password",b.password),b.photo&&c.append("photo",b.photo);let d=await o(c);d.success?(n.success("Invitation accepted! Logging you in..."),setTimeout(()=>{a.push("/dashboard")},1500)):n.error(d.error||"Failed to accept invitation")}catch(a){n.error("An unexpected error occurred. Please try again.")}finally{z(!1)}};return w?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,b.jsx)(r.Card,{className:"w-full max-w-md",children:(0,b.jsxs)(r.CardContent,{className:"flex flex-col items-center gap-4 pt-6",children:[(0,b.jsx)(h.Loader2,{className:"text-primary size-8 animate-spin"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Verifying invitation..."})]})})}):!E||G?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,b.jsxs)(r.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(r.CardHeader,{children:[(0,b.jsx)(r.CardTitle,{className:"text-center",children:"Invalid Invitation"}),(0,b.jsx)(r.CardDescription,{className:"text-center",children:"This invitation link is invalid or has expired"})]}),(0,b.jsxs)(r.CardContent,{children:[(0,b.jsxs)(p.Alert,{variant:"destructive",children:[(0,b.jsx)(d.AlertCircle,{className:"size-4"}),(0,b.jsx)(p.AlertDescription,{children:G||"The invitation token is invalid"})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-2 text-center text-sm",children:[(0,b.jsx)("p",{children:"If you believe this is an error, please contact the person who invited you."}),(0,b.jsx)(q.Button,{className:"mt-4 w-full",onClick:()=>a.push("/login"),variant:"outline",children:"Go to Login"})]})]})]})}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4 dark:bg-gray-900",children:(0,b.jsxs)(r.Card,{className:"w-full max-w-2xl",children:[(0,b.jsxs)(r.CardHeader,{children:[(0,b.jsx)(r.CardTitle,{children:"Accept Team Invitation"}),(0,b.jsxs)(r.CardDescription,{children:["You've been invited to join"," ",(0,b.jsx)("strong",{children:I?.companyName})," as a"," ",(0,b.jsx)("strong",{children:I?.role})]})]}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)(s.Form,{...M,children:(0,b.jsxs)("form",{className:"space-y-6",onSubmit:M.handleSubmit(O),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[K?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{alt:"Profile preview",className:"size-20 rounded-full border object-cover",src:K}),(0,b.jsx)(q.Button,{className:"absolute -top-1 -right-1 size-6 rounded-full p-0",onClick:()=>{M.setValue("photo",void 0),L(null)},size:"icon",type:"button",variant:"destructive",children:"×"})]}):(0,b.jsx)("div",{className:"flex size-20 items-center justify-center rounded-full border border-dashed",children:(0,b.jsx)(i.User,{className:"text-muted-foreground size-8"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(t.Input,{accept:"image/*",className:"cursor-pointer",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>5242880)return void n.error("Photo size must be less than 5MB");M.setValue("photo",b);let a=new FileReader;a.onloadend=()=>{L(a.result)},a.readAsDataURL(b)}},type:"file"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Profile photo (optional, max 5MB)"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(s.FormField,{control:M.control,name:"firstName",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"First Name *"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsx)(t.Input,{placeholder:"John",...a})}),(0,b.jsx)(s.FormMessage,{})]})}),(0,b.jsx)(s.FormField,{control:M.control,name:"lastName",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"Last Name *"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsx)(t.Input,{placeholder:"Doe",...a})}),(0,b.jsx)(s.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(s.FormField,{control:M.control,name:"email",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"Email *"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsx)(t.Input,{disabled:!0,placeholder:"john@example.com",type:"email",...a})}),(0,b.jsx)(s.FormDescription,{children:"This email cannot be changed"}),(0,b.jsx)(s.FormMessage,{})]})}),(0,b.jsx)(s.FormField,{control:M.control,name:"phone",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"Phone (Optional)"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsx)(t.Input,{placeholder:"+1 (555) 123-4567",type:"tel",...a})}),(0,b.jsx)(s.FormMessage,{})]})})]}),(0,b.jsx)(s.FormField,{control:M.control,name:"password",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"Password *"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(t.Input,{placeholder:"••••••••",type:A?"text":"password",...a}),(0,b.jsx)(q.Button,{className:"absolute top-0 right-0 h-full px-3",onClick:()=>B(!A),size:"sm",type:"button",variant:"ghost",children:A?(0,b.jsx)(g.EyeOff,{className:"size-4"}):(0,b.jsx)(f.Eye,{className:"size-4"})})]})}),(0,b.jsx)(s.FormDescription,{children:"At least 8 characters with uppercase, lowercase, and a number"}),(0,b.jsx)(s.FormMessage,{})]})}),(0,b.jsx)(s.FormField,{control:M.control,name:"confirmPassword",render:({field:a})=>(0,b.jsxs)(s.FormItem,{children:[(0,b.jsx)(s.FormLabel,{children:"Confirm Password *"}),(0,b.jsx)(s.FormControl,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(t.Input,{placeholder:"••••••••",type:C?"text":"password",...a}),(0,b.jsx)(q.Button,{className:"absolute top-0 right-0 h-full px-3",onClick:()=>D(!C),size:"sm",type:"button",variant:"ghost",children:C?(0,b.jsx)(g.EyeOff,{className:"size-4"}):(0,b.jsx)(f.Eye,{className:"size-4"})})]})}),(0,b.jsx)(s.FormMessage,{})]})}),(0,b.jsx)(q.Button,{className:"w-full",disabled:y,type:"submit",children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 size-4 animate-spin"}),"Creating Account..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.CheckCircle,{className:"mr-2 size-4"}),"Accept Invitation & Create Account"]})})]})})})]})})}function x(){return(0,b.jsx)(k.Suspense,{fallback:(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,b.jsx)(r.Card,{className:"w-full max-w-md",children:(0,b.jsxs)(r.CardContent,{className:"flex flex-col items-center gap-4 pt-6",children:[(0,b.jsx)(h.Loader2,{className:"text-primary size-8 animate-spin"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})})}),children:(0,b.jsx)(w,{})})}a.s(["default",()=>x],137281)}];

//# sourceMappingURL=_77f714f6._.js.map