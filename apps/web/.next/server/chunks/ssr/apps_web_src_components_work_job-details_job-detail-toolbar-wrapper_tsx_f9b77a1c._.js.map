{"version":3,"sources":["../../../../../../apps/web/src/components/work/job-details/job-detail-toolbar-wrapper.tsx","../../../../../../apps/web/src/components/work/job-details/job-detail-toolbar.tsx","../../../../../../apps/web/src/components/work/job-details/tags/tag-manager-dialog.tsx","../../../../../../apps/web/src/actions/data%3A6c7c6c%20%3Ctext/javascript%3E","../../../../../../apps/web/src/actions/data%3A9afc76%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/work/job-details/tags/tag-badge.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Job Detail Toolbar Wrapper - Client Component\n *\n * Fetches job data and passes to JobDetailToolbar\n * This allows the layout config to remain static while getting dynamic data\n */\n\nimport { useParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { JobDetailToolbar } from \"./job-detail-toolbar\";\n\nexport function JobDetailToolbarWrapper() {\n\tconst params = useParams();\n\tconst jobId = params?.id as string;\n\tconst [jobData, setJobData] = useState<any>(null);\n\n\tuseEffect(() => {\n\t\t// Fetch job data when component mounts\n\t\tasync function fetchJobData() {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(`/api/jobs/${jobId}/toolbar-data`);\n\t\t\t\tif (response.ok) {\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tsetJobData(data);\n\t\t\t\t}\n\t\t\t} catch (_error) {}\n\t\t}\n\n\t\tif (jobId) {\n\t\t\tfetchJobData();\n\t\t}\n\t}, [jobId]);\n\n\treturn (\n\t\t<JobDetailToolbar\n\t\t\tcustomer={jobData?.customer}\n\t\t\tinvoices={jobData?.invoices || []}\n\t\t\tjob={jobData?.job}\n\t\t\tjobMaterials={jobData?.jobMaterials || []}\n\t\t\tmetrics={jobData?.metrics}\n\t\t\tpayments={jobData?.payments || []}\n\t\t\tteamAssignments={jobData?.teamAssignments || []}\n\t\t\ttimeEntries={jobData?.timeEntries || []}\n\t\t/>\n\t);\n}\n","\"use client\";\n\n/**\n * Job Detail Toolbar - AppToolbar Actions\n *\n * Displays in AppToolbar for job detail pages:\n * - Status update dropdown (inline)\n * - Quick actions (Invoice, Estimate, Clone)\n * - Ellipsis menu with Statistics, Export, Archive\n *\n * Design: Clean, compact, no button groups, outline variant\n */\n\nimport {\n\tArchive,\n\tBarChart3,\n\tCalendar,\n\tCopy,\n\tCreditCard,\n\tDownload,\n\tFileText,\n\tMail,\n\tMessageSquare,\n\tMoreVertical,\n\tPhone,\n\tPrinter,\n\tReceipt,\n\tShare2,\n\tTags,\n} from \"lucide-react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { archiveJob, updateJobStatus } from \"@/actions/jobs\";\nimport { StatusUpdateDropdown } from \"@/components/work/shared/quick-actions/status-update-dropdown\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useDialerStore } from \"@/lib/stores/dialer-store\";\nimport { JobStatisticsSheet } from \"./job-statistics-sheet\";\nimport { TagManagerDialog } from \"./tags/tag-manager-dialog\";\n\ntype JobDetailToolbarProps = {\n\tjob?: any;\n\tcustomer?: any;\n\tmetrics?: any;\n\ttimeEntries?: any[];\n\tteamAssignments?: any[];\n\tinvoices?: any[];\n\tpayments?: any[];\n\tjobMaterials?: any[];\n};\n\nexport function JobDetailToolbar({\n\tjob,\n\tcustomer,\n\tmetrics,\n\ttimeEntries = [],\n\tteamAssignments = [],\n\tinvoices = [],\n\tpayments = [],\n\tjobMaterials = [],\n}: JobDetailToolbarProps) {\n\tconst pathname = usePathname();\n\tconst router = useRouter();\n\tconst { toast } = useToast();\n\tconst openDialer = useDialerStore((state) => state.openDialer);\n\tconst jobId = pathname?.split(\"/\").pop();\n\tconst [isArchiveDialogOpen, setIsArchiveDialogOpen] = useState(false);\n\tconst [isArchiving, setIsArchiving] = useState(false);\n\tconst [isStatisticsOpen, setIsStatisticsOpen] = useState(false);\n\tconst [isTagDialogOpen, setIsTagDialogOpen] = useState(false);\n\n\t// Calculate tag count\n\tconst customerTags = (customer?.tags as string[]) || [];\n\tconst jobTags =\n\t\t((job?.metadata?.tags || job?.custom_fields?.tags) as string[]) || [];\n\tconst tagCount = customerTags.length + jobTags.length;\n\n\t// Helper to get customer name\n\tconst getCustomerName = (cust: any) => {\n\t\treturn (\n\t\t\tcust?.display_name ||\n\t\t\t`${cust?.first_name || \"\"} ${cust?.last_name || \"\"}`.trim()\n\t\t);\n\t};\n\n\tconst handleArchive = async () => {\n\t\tif (!jobId) {\n\t\t\ttoast.error(\"Job ID not found\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsArchiving(true);\n\t\ttry {\n\t\t\tconst result = await archiveJob(jobId);\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Job archived successfully\");\n\t\t\t\tsetIsArchiveDialogOpen(false);\n\t\t\t\trouter.push(\"/dashboard/work\");\n\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t} else {\n\t\t\t\ttoast.error(result.error || \"Failed to archive job\");\n\t\t\t}\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to archive job\");\n\t\t} finally {\n\t\t\tsetIsArchiving(false);\n\t\t}\n\t};\n\n\tconst handleCall = () => {\n\t\tif (customer?.phone) {\n\t\t\t// Open the WebRTC dialer dropdown in app header with customer info pre-filled\n\t\t\topenDialer(customer.phone, customer.id, getCustomerName(customer));\n\t\t} else {\n\t\t\ttoast.error(\"No phone number available\");\n\t\t}\n\t};\n\n\tconst handleText = () => {\n\t\tif (customer?.phone) {\n\t\t\trouter.push(\n\t\t\t\t`/dashboard/communication/messages?phone=${customer.phone}&customerId=${customer.id}`,\n\t\t\t);\n\t\t} else {\n\t\t\ttoast.error(\"No phone number available\");\n\t\t}\n\t};\n\n\tconst handleEmail = () => {\n\t\tif (customer?.email) {\n\t\t\trouter.push(\n\t\t\t\t`/dashboard/communication?email=${customer.email}&customerId=${customer.id}`,\n\t\t\t);\n\t\t} else {\n\t\t\ttoast.error(\"No email address available\");\n\t\t}\n\t};\n\n\tconst handleExport = () => {\n\t\t// Export job details to CSV\n\t\tconst csvData = [\n\t\t\t[\"Field\", \"Value\"],\n\t\t\t[\"Job Number\", job?.job_number || \"\"],\n\t\t\t[\"Title\", job?.title || \"\"],\n\t\t\t[\"Status\", job?.status || \"\"],\n\t\t\t[\"Customer\", customer?.display_name || \"\"],\n\t\t\t[\"Phone\", customer?.phone || \"\"],\n\t\t\t[\"Email\", customer?.email || \"\"],\n\t\t\t[\n\t\t\t\t\"Created\",\n\t\t\t\tjob?.created_at ? new Date(job.created_at).toLocaleDateString() : \"\",\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"Total Revenue\",\n\t\t\t\tmetrics?.totalRevenue ? `$${metrics.totalRevenue.toFixed(2)}` : \"$0.00\",\n\t\t\t],\n\t\t];\n\n\t\tconst csv = csvData\n\t\t\t.map((row) => row.map((cell) => `\"${cell}\"`).join(\",\"))\n\t\t\t.join(\"\\n\");\n\t\tconst blob = new Blob([csv], { type: \"text/csv\" });\n\t\tconst url = window.URL.createObjectURL(blob);\n\t\tconst a = document.createElement(\"a\");\n\t\ta.href = url;\n\t\ta.download = `job-${job?.job_number || jobId}.csv`;\n\t\ta.click();\n\t\twindow.URL.revokeObjectURL(url);\n\t\ttoast.success(\"Job exported to CSV\");\n\t};\n\n\tconst handlePrint = () => {\n\t\twindow.print();\n\t\ttoast.success(\"Opening print dialog...\");\n\t};\n\n\t/**\n\t * Handle job status update via server action\n\t */\n\tconst handleStatusChange = async (\n\t\tentityId: string,\n\t\tnewStatus: string\n\t): Promise<{ success: boolean; error?: string }> => {\n\t\ttry {\n\t\t\tconst result = await updateJobStatus(entityId, newStatus);\n\t\t\treturn {\n\t\t\t\tsuccess: result.success,\n\t\t\t\terror: result.error,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Job status update error:\", error);\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terror: error instanceof Error ? error.message : \"Failed to update status\",\n\t\t\t};\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t{/* Status Update Dropdown - First Position */}\n\t\t\t\t{job?.status && jobId && (\n\t\t\t\t\t<StatusUpdateDropdown\n\t\t\t\t\t\tcurrentStatus={job.status}\n\t\t\t\t\t\tentityId={jobId}\n\t\t\t\t\t\tentityType=\"job\"\n\t\t\t\t\t\tonStatusChange={handleStatusChange}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{/* Primary Actions */}\n\t\t\t\t<TooltipProvider>\n\t\t\t\t\t{/* Schedule Appointment */}\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a href={`/dashboard/work/appointments/new?jobId=${jobId}`}>\n\t\t\t\t\t\t\t\t\t<Calendar />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Schedule</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Schedule appointment</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t{/* Contact Dropdown */}\n\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<Phone />\n\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Contact</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t<DropdownMenuContent align=\"start\">\n\t\t\t\t\t\t\t<DropdownMenuLabel>Contact Customer</DropdownMenuLabel>\n\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\tdisabled={!customer?.phone}\n\t\t\t\t\t\t\t\tonClick={handleCall}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Phone className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\t\t{customer?.phone ? `Call ${customer.phone}` : \"No phone number\"}\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\tdisabled={!customer?.phone}\n\t\t\t\t\t\t\t\tonClick={handleText}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MessageSquare className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\t\t{customer?.phone ? \"Send text message\" : \"No phone number\"}\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\tdisabled={!customer?.email}\n\t\t\t\t\t\t\t\tonClick={handleEmail}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Mail className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\t\t{customer?.email\n\t\t\t\t\t\t\t\t\t? `Email ${customer.email}`\n\t\t\t\t\t\t\t\t\t: \"No email address\"}\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t</DropdownMenu>\n\n\t\t\t\t\t{/* Payment */}\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a href={`/dashboard/work/payments/new?jobId=${jobId}`}>\n\t\t\t\t\t\t\t\t\t<CreditCard />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Payment</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Collect payment</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t{/* Invoice */}\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a href={`/dashboard/work/invoices/new?jobId=${jobId}`}>\n\t\t\t\t\t\t\t\t\t<Receipt />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Invoice</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Create invoice</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t{/* Estimate */}\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a href={`/dashboard/work/estimates/new?jobId=${jobId}`}>\n\t\t\t\t\t\t\t\t\t<FileText />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Estimate</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Create estimate</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</TooltipProvider>\n\n\t\t\t\t{/* Actions Dropdown */}\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t<MoreVertical />\n\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Actions</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-56\">\n\t\t\t\t\t\t{/* Statistics */}\n\t\t\t\t\t\t{job && metrics && (\n\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setIsStatisticsOpen(true)}>\n\t\t\t\t\t\t\t\t<BarChart3 className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\t\tView Statistics\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Tags */}\n\t\t\t\t\t\t<DropdownMenuItem onClick={() => setIsTagDialogOpen(true)}>\n\t\t\t\t\t\t\t<Tags className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tManage Tags\n\t\t\t\t\t\t\t{tagCount > 0 && (\n\t\t\t\t\t\t\t\t<Badge className=\"ml-auto h-5 px-1.5\" variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t{tagCount}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t{/* Clone */}\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\trouter.push(`/dashboard/work/new?cloneFrom=${jobId}`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Copy className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tClone Job\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t{/* Export */}\n\t\t\t\t\t\t<DropdownMenuItem onClick={handleExport}>\n\t\t\t\t\t\t\t<Download className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tExport to CSV\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t{/* Print */}\n\t\t\t\t\t\t<DropdownMenuItem onClick={handlePrint}>\n\t\t\t\t\t\t\t<Printer className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tPrint Details\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t{/* Share */}\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(window.location.href);\n\t\t\t\t\t\t\t\ttoast.success(\"Job link copied to clipboard\");\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Share2 className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tShare Link\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t{/* Archive */}\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tclassName=\"text-destructive\"\n\t\t\t\t\t\t\tonClick={() => setIsArchiveDialogOpen(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Archive className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tArchive Job\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\t\t\t</div>\n\n\t\t\t{/* Archive Confirmation Dialog */}\n\t\t\t<Dialog onOpenChange={setIsArchiveDialogOpen} open={isArchiveDialogOpen}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Archive Job</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tAre you sure you want to archive this job? Archived jobs can be\n\t\t\t\t\t\t\trestored within 90 days. Completed or invoiced jobs cannot be\n\t\t\t\t\t\t\tarchived.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isArchiving}\n\t\t\t\t\t\t\tonClick={() => setIsArchiveDialogOpen(false)}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isArchiving}\n\t\t\t\t\t\t\tonClick={handleArchive}\n\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isArchiving ? \"Archiving...\" : \"Archive Job\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t{/* Statistics Sheet */}\n\t\t\t{job && metrics && (\n\t\t\t\t<JobStatisticsSheet\n\t\t\t\t\tinvoices={invoices}\n\t\t\t\t\tjob={job}\n\t\t\t\t\tjobMaterials={jobMaterials}\n\t\t\t\t\tmetrics={metrics}\n\t\t\t\t\tonOpenChange={setIsStatisticsOpen}\n\t\t\t\t\topen={isStatisticsOpen}\n\t\t\t\t\tpayments={payments}\n\t\t\t\t\tteamAssignments={teamAssignments}\n\t\t\t\t\ttimeEntries={timeEntries}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Tag Manager Dialog */}\n\t\t\t<TagManagerDialog\n\t\t\t\tcustomerId={customer?.id}\n\t\t\t\tcustomerTags={customerTags}\n\t\t\t\tjobId={job?.id}\n\t\t\t\tjobTags={jobTags}\n\t\t\t\tonOpenChange={setIsTagDialogOpen}\n\t\t\t\tonUpdate={() => {\n\t\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t\t}}\n\t\t\t\topen={isTagDialogOpen}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * Tag Manager Dialog\n * Allows adding/editing/removing tags for customers and jobs\n */\n\n\"use client\";\n\nimport { Plus, Tag } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { updateCustomerTags, updateJobTags } from \"@/actions/job-tags\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { TagBadge } from \"./tag-badge\";\n\ntype TagManagerDialogProps = {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tcustomerId?: string;\n\tjobId?: string;\n\tcustomerTags?: string[];\n\tjobTags?: string[];\n\tonUpdate?: () => void;\n};\n\n// Common tags for quick-add\nconst COMMON_CUSTOMER_TAGS = [\n\t\"DNS - Do Not Service\",\n\t\"Family Friend\",\n\t\"10% Discount\",\n\t\"VIP Customer\",\n\t\"Payment Plan\",\n\t\"Requires Appointment\",\n];\n\nconst COMMON_JOB_TAGS = [\n\t\"Warranty Work\",\n\t\"Follow-up Required\",\n\t\"Emergency\",\n\t\"Inspection Needed\",\n\t\"Parts on Order\",\n\t\"Callback Scheduled\",\n];\n\nexport function TagManagerDialog({\n\topen,\n\tonOpenChange,\n\tcustomerId,\n\tjobId,\n\tcustomerTags = [],\n\tjobTags = [],\n\tonUpdate,\n}: TagManagerDialogProps) {\n\tconst [localCustomerTags, setLocalCustomerTags] =\n\t\tuseState<string[]>(customerTags);\n\tconst [localJobTags, setLocalJobTags] = useState<string[]>(jobTags);\n\tconst [newCustomerTag, setNewCustomerTag] = useState(\"\");\n\tconst [newJobTag, setNewJobTag] = useState(\"\");\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tconst handleAddCustomerTag = (tag: string) => {\n\t\tif (tag && !localCustomerTags.includes(tag)) {\n\t\t\tsetLocalCustomerTags([...localCustomerTags, tag]);\n\t\t}\n\t\tsetNewCustomerTag(\"\");\n\t};\n\n\tconst handleAddJobTag = (tag: string) => {\n\t\tif (tag && !localJobTags.includes(tag)) {\n\t\t\tsetLocalJobTags([...localJobTags, tag]);\n\t\t}\n\t\tsetNewJobTag(\"\");\n\t};\n\n\tconst handleRemoveCustomerTag = (tag: string) => {\n\t\tsetLocalCustomerTags(localCustomerTags.filter((t) => t !== tag));\n\t};\n\n\tconst handleRemoveJobTag = (tag: string) => {\n\t\tsetLocalJobTags(localJobTags.filter((t) => t !== tag));\n\t};\n\n\tconst handleSave = async () => {\n\t\tsetIsSaving(true);\n\t\ttry {\n\t\t\tconst promises = [];\n\n\t\t\tif (\n\t\t\t\tcustomerId &&\n\t\t\t\tJSON.stringify(localCustomerTags) !== JSON.stringify(customerTags)\n\t\t\t) {\n\t\t\t\tpromises.push(updateCustomerTags(customerId, localCustomerTags));\n\t\t\t}\n\n\t\t\tif (jobId && JSON.stringify(localJobTags) !== JSON.stringify(jobTags)) {\n\t\t\t\tpromises.push(updateJobTags(jobId, localJobTags));\n\t\t\t}\n\n\t\t\tconst results = await Promise.all(promises);\n\n\t\t\tif (results.every((r) => r.success)) {\n\t\t\t\ttoast.success(\"Tags updated successfully\");\n\t\t\t\tonUpdate?.();\n\t\t\t\tonOpenChange(false);\n\t\t\t} else {\n\t\t\t\tconst error = results.find((r) => !r.success)?.error;\n\t\t\t\ttoast.error(error || \"Failed to update tags\");\n\t\t\t}\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to update tags\");\n\t\t} finally {\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog onOpenChange={onOpenChange} open={open}>\n\t\t\t<DialogContent className=\"max-h-[90vh] max-w-2xl overflow-y-auto\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Manage Tags</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tAdd tags to organize and categorize this customer and job\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t{/* Customer Tags Section */}\n\t\t\t\t\t{customerId && (\n\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<Tag className=\"size-4 text-blue-600\" />\n\t\t\t\t\t\t\t\t<h3 className=\"text-sm font-semibold\">Customer Tags</h3>\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t(Apply to all jobs for this customer)\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Current Customer Tags */}\n\t\t\t\t\t\t\t{localCustomerTags.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t{localCustomerTags.map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<TagBadge\n\t\t\t\t\t\t\t\t\t\t\tkey={tag}\n\t\t\t\t\t\t\t\t\t\t\tonRemove={() => handleRemoveCustomerTag(tag)}\n\t\t\t\t\t\t\t\t\t\t\tshowRemove\n\t\t\t\t\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"customer\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Quick-add Common Tags */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Quick Add</Label>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t{COMMON_CUSTOMER_TAGS.filter(\n\t\t\t\t\t\t\t\t\t\t(tag) => !localCustomerTags.includes(tag),\n\t\t\t\t\t\t\t\t\t).map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 gap-1 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\tkey={tag}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleAddCustomerTag(tag)}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Plus className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Custom Customer Tag Input */}\n\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewCustomerTag(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\t\thandleAddCustomerTag(newCustomerTag);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add custom customer tag...\"\n\t\t\t\t\t\t\t\t\tvalue={newCustomerTag}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={() => handleAddCustomerTag(newCustomerTag)}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{customerId && jobId && <Separator />}\n\n\t\t\t\t\t{/* Job Tags Section */}\n\t\t\t\t\t{jobId && (\n\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<Tag className=\"size-4 text-purple-600\" />\n\t\t\t\t\t\t\t\t<h3 className=\"text-sm font-semibold\">Job Tags</h3>\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t(Apply to this job only)\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Current Job Tags */}\n\t\t\t\t\t\t\t{localJobTags.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t{localJobTags.map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<TagBadge\n\t\t\t\t\t\t\t\t\t\t\tkey={tag}\n\t\t\t\t\t\t\t\t\t\t\tonRemove={() => handleRemoveJobTag(tag)}\n\t\t\t\t\t\t\t\t\t\t\tshowRemove\n\t\t\t\t\t\t\t\t\t\t\ttag={tag}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"job\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Quick-add Common Tags */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-xs\">Quick Add</Label>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t{COMMON_JOB_TAGS.filter(\n\t\t\t\t\t\t\t\t\t\t(tag) => !localJobTags.includes(tag),\n\t\t\t\t\t\t\t\t\t).map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 gap-1 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\tkey={tag}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleAddJobTag(tag)}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Plus className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Custom Job Tag Input */}\n\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewJobTag(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\t\thandleAddJobTag(newJobTag);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add custom job tag...\"\n\t\t\t\t\t\t\t\t\tvalue={newJobTag}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={() => handleAddJobTag(newJobTag)}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button onClick={() => onOpenChange(false)} variant=\"outline\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button disabled={isSaving} onClick={handleSave}>\n\t\t\t\t\t\t{isSaving ? \"Saving...\" : \"Save Changes\"}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"6092a86a8f4d8e43fd3ca6d88d91e39f4114ccef7c\":\"updateCustomerTags\"},\"apps/web/src/actions/job-tags.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateCustomerTags=/*#__PURE__*/createServerReference(\"6092a86a8f4d8e43fd3ca6d88d91e39f4114ccef7c\",callServer,void 0,findSourceMapURL,\"updateCustomerTags\");","/* __next_internal_action_entry_do_not_use__ [{\"6056db4426045b4bf2dc38f10eea7d68780b38ba19\":\"updateJobTags\"},\"apps/web/src/actions/job-tags.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateJobTags=/*#__PURE__*/createServerReference(\"6056db4426045b4bf2dc38f10eea7d68780b38ba19\",callServer,void 0,findSourceMapURL,\"updateJobTags\");","/**\n * Tag Badge Component\n * Display individual tag pills with visual distinction and custom colors\n */\n\n\"use client\";\n\nimport { Tag, X } from \"lucide-react\";\nimport type { TagWithColor } from \"@/actions/job-tags\";\nimport { Button } from \"@/components/ui/button\";\n\ntype TagBadgeProps = {\n\ttag: string | TagWithColor;\n\ttype: \"customer\" | \"job\";\n\tonRemove?: () => void;\n\tshowRemove?: boolean;\n};\n\nconst COLOR_CLASSES: Record<string, string> = {\n\tred: \"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30\",\n\torange:\n\t\t\"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900/30\",\n\tamber:\n\t\t\"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-900/30\",\n\tyellow:\n\t\t\"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-900/30\",\n\tgreen:\n\t\t\"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/30\",\n\temerald:\n\t\t\"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-900/30\",\n\tteal: \"bg-teal-100 text-teal-700 border-teal-200 dark:bg-teal-900/20 dark:text-teal-400 dark:border-teal-900/30\",\n\tblue: \"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900/30\",\n\tindigo:\n\t\t\"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-900/30\",\n\tpurple:\n\t\t\"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900/30\",\n\tpink: \"bg-pink-100 text-pink-700 border-pink-200 dark:bg-pink-900/20 dark:text-pink-400 dark:border-pink-900/30\",\n\tgray: \"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-900/30\",\n};\n\nexport function TagBadge({\n\ttag,\n\ttype,\n\tonRemove,\n\tshowRemove = false,\n}: TagBadgeProps) {\n\t// Handle both string tags (legacy) and object tags (with color)\n\tconst tagLabel = typeof tag === \"string\" ? tag : tag.label;\n\tconst tagColor = typeof tag === \"string\" ? undefined : tag.color;\n\n\t// Get color class - use custom color if provided, otherwise fall back to type-based default\n\tconst colorClass =\n\t\ttagColor && COLOR_CLASSES[tagColor]\n\t\t\t? COLOR_CLASSES[tagColor]\n\t\t\t: type === \"customer\"\n\t\t\t\t? COLOR_CLASSES.blue\n\t\t\t\t: COLOR_CLASSES.purple;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium transition-colors ${colorClass}`}\n\t\t>\n\t\t\t<Tag className=\"size-3\" />\n\t\t\t<span>{tagLabel}</span>\n\t\t\t{showRemove && onRemove && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"size-4 p-0 hover:bg-transparent\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tonRemove();\n\t\t\t\t\t}}\n\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t>\n\t\t\t\t\t<X className=\"size-3\" />\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}