{"version":3,"sources":["../../../../../../apps/web/src/components/ui/skeleton.tsx","../../../../../../apps/web/src/components/telnyx/phone-numbers-list.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/components/telnyx/phone-numbers-toolbar.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/src/app/%28dashboard%29/dashboard/settings/communications/phone-numbers/page.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PhoneNumbersList = registerClientReference(\n    function() { throw new Error(\"Attempted to call PhoneNumbersList() from the server but PhoneNumbersList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/telnyx/phone-numbers-list.tsx\",\n    \"PhoneNumbersList\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PhoneNumbersToolbar = registerClientReference(\n    function() { throw new Error(\"Attempted to call PhoneNumbersToolbar() from the server but PhoneNumbersToolbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/telnyx/phone-numbers-toolbar.tsx\",\n    \"PhoneNumbersToolbar\",\n);\n","/**\n * Phone Numbers Management Page\n *\n * Comprehensive phone number management:\n * - List all company phone numbers\n * - Search and purchase new numbers\n * - Port existing numbers (8-step wizard)\n * - Configure routing and features\n * - View usage metrics and costs\n */\n\nimport { Suspense } from \"react\";\nimport { AppToolbar } from \"@/components/layout/app-toolbar\";\nimport {\n\ttype PhoneNumberRecord,\n\tPhoneNumbersList,\n} from \"@/components/telnyx/phone-numbers-list\";\nimport { PhoneNumbersToolbar } from \"@/components/telnyx/phone-numbers-toolbar\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { requireActiveCompany } from \"@/lib/auth/company-context\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nexport const metadata = {\n\ttitle: \"Phone Numbers | Communications Settings\",\n\tdescription:\n\t\t\"Manage your company phone numbers, purchase new numbers, and port existing ones\",\n};\n\nexport default async function PhoneNumbersPage() {\n\tconst companyId = await requireActiveCompany();\n\tconst supabase = await createClient();\n\n\tif (!supabase) {\n\t\treturn null;\n\t}\n\n\tconst { data: phoneNumbersRaw = [] } = await supabase\n\t\t.from(\"phone_numbers\")\n\t\t.select(\n\t\t\t`\n        id,\n        phone_number,\n        formatted_number,\n        area_code,\n        number_type,\n        status,\n        features,\n        incoming_calls_count,\n        outgoing_calls_count,\n        sms_sent_count,\n        sms_received_count,\n        monthly_cost,\n        voicemail_enabled,\n        created_at,\n        metadata,\n        porting_request_id\n      `,\n\t\t)\n\t\t.eq(\"company_id\", companyId)\n\t\t.is(\"deleted_at\", null)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tconst phoneNumbers = (phoneNumbersRaw ?? []).map(mapPhoneNumberRow);\n\n\treturn (\n\t\t<div className=\"flex h-full flex-col\">\n\t\t\t{/* Page Header */}\n\t\t\t<AppToolbar config={{ show: true, title: \"Phone Numbers\" }} />\n\n\t\t\t{/* Secondary Toolbar with Actions */}\n\t\t\t<Suspense fallback={<Skeleton className=\"h-16 w-full\" />}>\n\t\t\t\t<PhoneNumbersToolbar companyId={companyId} />\n\t\t\t</Suspense>\n\n\t\t\t{/* Phone Numbers List */}\n\t\t\t<div className=\"flex-1 overflow-auto\">\n\t\t\t\t<Suspense fallback={<PhoneNumbersListSkeleton />}>\n\t\t\t\t\t<PhoneNumbersList numbers={phoneNumbers} />\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction PhoneNumbersListSkeleton() {\n\treturn (\n\t\t<div className=\"space-y-4 p-6\">\n\t\t\t{[...new Array(5)].map((_, i) => (\n\t\t\t\t<Skeleton className=\"h-20 w-full\" key={i} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nfunction mapPhoneNumberRow(row: any): PhoneNumberRecord {\n\treturn {\n\t\tid: row.id,\n\t\tphoneNumber: row.phone_number,\n\t\tformattedNumber:\n\t\t\trow.formatted_number || formatDisplayPhoneNumber(row.phone_number ?? \"\"),\n\t\tareaCode: row.area_code,\n\t\tnumberType: row.number_type,\n\t\tstatus: row.status,\n\t\tfeatures: Array.isArray(row.features) ? row.features : [],\n\t\tincomingCallsCount: row.incoming_calls_count ?? 0,\n\t\toutgoingCallsCount: row.outgoing_calls_count ?? 0,\n\t\tsmsSentCount: row.sms_sent_count ?? 0,\n\t\tsmsReceivedCount: row.sms_received_count ?? 0,\n\t\tmonthlyCost: row.monthly_cost,\n\t\troutingRule: row.metadata?.routing_rule ?? null,\n\t\tvoicemailEnabled: row.voicemail_enabled,\n\t\tcreatedAt: row.created_at,\n\t\tportingStatus: row.metadata?.porting_status ?? null,\n\t\tportingEta: row.metadata?.porting_eta ?? null,\n\t\tmetadata: row.metadata ?? null,\n\t};\n}\n\nfunction formatDisplayPhoneNumber(phoneNumber: string): string {\n\tconst digits = phoneNumber.replace(/\\D/g, \"\");\n\tif (digits.length === 11 && digits.startsWith(\"1\")) {\n\t\treturn `+1 (${digits.slice(1, 4)}) ${digits.slice(4, 7)}-${digits.slice(7)}`;\n\t}\n\tif (digits.length === 10) {\n\t\treturn `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;\n\t}\n\treturn phoneNumber || \"Unknown\";\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2]}