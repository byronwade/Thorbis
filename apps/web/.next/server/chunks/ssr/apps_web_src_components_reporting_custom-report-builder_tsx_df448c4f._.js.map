{"version":3,"sources":["../../../../../../apps/web/src/components/reporting/custom-report-builder.tsx","../../../../../../apps/web/src/lib/queries/data-sources.ts"],"sourcesContent":["\"use client\";\n\n/**\n * Custom Report Builder - Step-by-Step Wizard\n *\n * Redesigned with:\n * - Clear stepper navigation (not confusing tabs)\n * - Prominent Back/Next buttons\n * - Minimal borders (matches app UI)\n * - Visual progress indicator\n */\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport {\n\tHoverCard,\n\tHoverCardContent,\n\tHoverCardTrigger,\n} from \"@/components/ui/hover-card\";\nimport {\n\tDatabase,\n\tTable2,\n\tColumns3,\n\tFilter,\n\tBarChart3,\n\tLineChart,\n\tPieChart,\n\tTrendingUp,\n\tPlus,\n\tTrash2,\n\tHelpCircle,\n\tChevronDown,\n\tChevronLeft,\n\tChevronRight,\n\tSave,\n\tEye,\n\tSparkles,\n\tCalculator,\n\tClock,\n\tDollarSign,\n\tPercent,\n\tHash,\n\tCalendar,\n\tToggleLeft,\n\tStar,\n\tCheckCircle2,\n\tLayers,\n\tReceipt,\n\tCreditCard,\n\tBriefcase,\n\tFileText,\n\tUsers,\n\tUserCheck,\n\tCheck,\n} from \"lucide-react\";\nimport {\n\tDATA_SOURCES,\n\tDATA_SOURCES_MAP,\n\ttype DataSource,\n\ttype DataSourceField,\n\ttype AggregationType,\n\ttype FilterOperator,\n} from \"@/lib/queries/data-sources\";\nimport { SidebarTrigger } from \"@/components/ui/sidebar\";\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\ninterface SelectedField {\n\tid: string;\n\tsourceId: string;\n\tfieldId: string;\n\talias?: string;\n\taggregation?: AggregationType;\n}\n\ninterface ReportFilter {\n\tid: string;\n\tsourceId: string;\n\tfieldId: string;\n\toperator: FilterOperator;\n\tvalue: string;\n\tvalue2?: string;\n}\n\ninterface ReportConfig {\n\tname: string;\n\tdescription: string;\n\tprimarySource: string;\n\tselectedFields: SelectedField[];\n\tfilters: ReportFilter[];\n\tchartType: string;\n\tlimit: number;\n}\n\ntype WizardStep = \"source\" | \"fields\" | \"filters\" | \"visualization\" | \"save\";\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nconst STEPS: { id: WizardStep; title: string; shortTitle: string }[] = [\n\t{ id: \"source\", title: \"Choose Data Source\", shortTitle: \"Source\" },\n\t{ id: \"fields\", title: \"Select Fields\", shortTitle: \"Fields\" },\n\t{ id: \"filters\", title: \"Add Filters\", shortTitle: \"Filters\" },\n\t{ id: \"visualization\", title: \"Choose Chart\", shortTitle: \"Chart\" },\n\t{ id: \"save\", title: \"Name & Save\", shortTitle: \"Save\" },\n];\n\nconst FILTER_OPERATORS: { value: FilterOperator; label: string }[] = [\n\t{ value: \"equals\", label: \"Equals\" },\n\t{ value: \"not_equals\", label: \"Not Equals\" },\n\t{ value: \"greater_than\", label: \"Greater Than\" },\n\t{ value: \"less_than\", label: \"Less Than\" },\n\t{ value: \"between\", label: \"Between\" },\n\t{ value: \"contains\", label: \"Contains\" },\n\t{ value: \"is_null\", label: \"Is Empty\" },\n\t{ value: \"is_not_null\", label: \"Has Value\" },\n];\n\nconst CHART_OPTIONS = [\n\t{ value: \"table\", label: \"Table\", icon: Table2, description: \"Raw data in rows and columns\" },\n\t{ value: \"bar\", label: \"Bar Chart\", icon: BarChart3, description: \"Compare values across categories\" },\n\t{ value: \"line\", label: \"Line Chart\", icon: LineChart, description: \"Show trends over time\" },\n\t{ value: \"pie\", label: \"Pie Chart\", icon: PieChart, description: \"Show proportions of a whole\" },\n\t{ value: \"area\", label: \"Area Chart\", icon: TrendingUp, description: \"Cumulative data over time\" },\n];\n\nconst SOURCE_ICONS: Record<string, React.ElementType> = {\n\tinvoices: Receipt,\n\tpayments: CreditCard,\n\tjobs: Briefcase,\n\testimates: FileText,\n\tcustomers: Users,\n\tteam_members: UserCheck,\n};\n\nconst FIELD_TYPE_ICONS: Record<string, React.ElementType> = {\n\tcurrency: DollarSign,\n\tpercentage: Percent,\n\tnumber: Hash,\n\tdate: Calendar,\n\tboolean: ToggleLeft,\n\trating: Star,\n\tstring: Columns3,\n\tduration: Clock,\n};\n\n// =============================================================================\n// HELPER COMPONENTS\n// =============================================================================\n\nfunction FieldTypeIcon({ type }: { type: DataSourceField[\"type\"] }) {\n\tconst Icon = FIELD_TYPE_ICONS[type] || Columns3;\n\treturn <Icon className=\"h-3.5 w-3.5\" />;\n}\n\n// =============================================================================\n// STEP COMPONENTS\n// =============================================================================\n\nfunction StepDataSource({\n\tselectedSource,\n\tonSelect,\n}: {\n\tselectedSource: string | null;\n\tonSelect: (sourceId: string) => void;\n}) {\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-lg font-semibold\">What data do you want to analyze?</h2>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tChoose a data source to get started. This determines what fields are available.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t{DATA_SOURCES.map((source) => {\n\t\t\t\t\tconst Icon = SOURCE_ICONS[source.id] || Database;\n\t\t\t\t\tconst isSelected = selectedSource === source.id;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={source.id}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={() => onSelect(source.id)}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"group relative flex flex-col items-center gap-3 rounded-xl p-6 text-center transition-all\",\n\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-2 ring-primary\"\n\t\t\t\t\t\t\t\t\t: \"bg-muted/30 hover:bg-muted/50\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isSelected && (\n\t\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className={cn(\n\t\t\t\t\t\t\t\t\"flex h-14 w-14 items-center justify-center rounded-full transition-colors\",\n\t\t\t\t\t\t\t\tisSelected ? \"bg-primary text-primary-foreground\" : \"bg-muted group-hover:bg-muted/80\"\n\t\t\t\t\t\t\t)}>\n\t\t\t\t\t\t\t\t<Icon className=\"h-7 w-7\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-semibold\">{source.name}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground line-clamp-2\">{source.description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Badge variant=\"secondary\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t{source.fields.length} fields\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction StepFields({\n\tsource,\n\tselectedFields,\n\tonToggleField,\n}: {\n\tsource: DataSource;\n\tselectedFields: SelectedField[];\n\tonToggleField: (field: DataSourceField) => void;\n}) {\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\n\n\tconst metrics = source.fields.filter((f) => f.category === \"metric\");\n\tconst dimensions = source.fields.filter((f) => f.category === \"dimension\" || f.category === \"attribute\");\n\n\tconst filteredMetrics = metrics.filter((f) =>\n\t\tf.name.toLowerCase().includes(searchTerm.toLowerCase())\n\t);\n\tconst filteredDimensions = dimensions.filter((f) =>\n\t\tf.name.toLowerCase().includes(searchTerm.toLowerCase())\n\t);\n\n\tconst isFieldSelected = (fieldId: string) =>\n\t\tselectedFields.some((sf) => sf.fieldId === fieldId);\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-lg font-semibold\">What data do you want to see?</h2>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tSelect the fields to include in your report. Click to toggle.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<Input\n\t\t\t\tplaceholder=\"Search fields...\"\n\t\t\t\tvalue={searchTerm}\n\t\t\t\tonChange={(e) => setSearchTerm(e.target.value)}\n\t\t\t\tclassName=\"max-w-md\"\n\t\t\t/>\n\n\t\t\t<div className=\"grid gap-6 lg:grid-cols-2\">\n\t\t\t\t{/* Metrics */}\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Calculator className=\"h-4 w-4 text-blue-500\" />\n\t\t\t\t\t\t<span className=\"font-medium\">Metrics</span>\n\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">(Numbers you can sum, average, etc.)</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-1.5 max-h-[300px] overflow-y-auto pr-2\">\n\t\t\t\t\t\t{filteredMetrics.map((field) => {\n\t\t\t\t\t\t\tconst selected = isFieldSelected(field.id);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={field.id}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => onToggleField(field)}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"w-full flex items-center gap-3 rounded-lg p-3 text-left transition-all\",\n\t\t\t\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-1 ring-primary/30\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted/30 hover:bg-muted/50\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-8 w-8 items-center justify-center rounded-lg transition-colors\",\n\t\t\t\t\t\t\t\t\t\tselected ? \"bg-primary text-primary-foreground\" : \"bg-muted\"\n\t\t\t\t\t\t\t\t\t)}>\n\t\t\t\t\t\t\t\t\t\t<FieldTypeIcon type={field.type} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium truncate\">{field.name}</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground truncate\">{field.description}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{selected && <Check className=\"h-4 w-4 text-primary flex-shrink-0\" />}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Dimensions */}\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Layers className=\"h-4 w-4 text-purple-500\" />\n\t\t\t\t\t\t<span className=\"font-medium\">Dimensions</span>\n\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">(Categories to group by)</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-1.5 max-h-[300px] overflow-y-auto pr-2\">\n\t\t\t\t\t\t{filteredDimensions.map((field) => {\n\t\t\t\t\t\t\tconst selected = isFieldSelected(field.id);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={field.id}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => onToggleField(field)}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"w-full flex items-center gap-3 rounded-lg p-3 text-left transition-all\",\n\t\t\t\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-1 ring-primary/30\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted/30 hover:bg-muted/50\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-8 w-8 items-center justify-center rounded-lg transition-colors\",\n\t\t\t\t\t\t\t\t\t\tselected ? \"bg-primary text-primary-foreground\" : \"bg-muted\"\n\t\t\t\t\t\t\t\t\t)}>\n\t\t\t\t\t\t\t\t\t\t<FieldTypeIcon type={field.type} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium truncate\">{field.name}</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground truncate\">{field.description}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{selected && <Check className=\"h-4 w-4 text-primary flex-shrink-0\" />}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{selectedFields.length > 0 && (\n\t\t\t\t<div className=\"rounded-xl bg-muted/30 p-4\">\n\t\t\t\t\t<div className=\"flex items-center justify-between mb-3\">\n\t\t\t\t\t\t<span className=\"text-sm font-medium\">{selectedFields.length} fields selected</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t{selectedFields.map((sf) => {\n\t\t\t\t\t\t\tconst field = source.fields.find((f) => f.id === sf.fieldId);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Badge key={sf.id} variant=\"secondary\" className=\"gap-1.5 py-1.5\">\n\t\t\t\t\t\t\t\t\t{field?.name}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction StepFilters({\n\tsource,\n\tfilters,\n\tonAddFilter,\n\tonUpdateFilter,\n\tonRemoveFilter,\n}: {\n\tsource: DataSource;\n\tfilters: ReportFilter[];\n\tonAddFilter: () => void;\n\tonUpdateFilter: (id: string, updates: Partial<ReportFilter>) => void;\n\tonRemoveFilter: (id: string) => void;\n}) {\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-lg font-semibold\">Filter your data (optional)</h2>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tAdd conditions to narrow down your results. Skip this step if you want all data.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{filters.length === 0 ? (\n\t\t\t\t<div className=\"rounded-xl bg-muted/30 p-8 text-center\">\n\t\t\t\t\t<Filter className=\"h-10 w-10 mx-auto mb-3 text-muted-foreground\" />\n\t\t\t\t\t<p className=\"font-medium mb-1\">No filters yet</p>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground mb-4\">\n\t\t\t\t\t\tYour report will include all data. Add filters to focus on specific records.\n\t\t\t\t\t</p>\n\t\t\t\t\t<Button variant=\"outline\" onClick={onAddFilter}>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tAdd Filter\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t{filters.map((filter, index) => (\n\t\t\t\t\t\t<div key={filter.id} className=\"flex items-center gap-3 rounded-xl bg-muted/30 p-4\">\n\t\t\t\t\t\t\t{index > 0 && (\n\t\t\t\t\t\t\t\t<Badge variant=\"secondary\" className=\"text-xs\">AND</Badge>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={filter.fieldId}\n\t\t\t\t\t\t\t\tonValueChange={(v) => onUpdateFilter(filter.id, { fieldId: v })}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-[180px]\">\n\t\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select field\" />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{source.fields.map((f) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={f.id} value={f.id}>\n\t\t\t\t\t\t\t\t\t\t\t{f.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={filter.operator}\n\t\t\t\t\t\t\t\tonValueChange={(v) => onUpdateFilter(filter.id, { operator: v as FilterOperator })}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-[150px]\">\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{FILTER_OPERATORS.map((op) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={op.value} value={op.value}>\n\t\t\t\t\t\t\t\t\t\t\t{op.label}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\n\t\t\t\t\t\t\t{filter.operator !== \"is_null\" && filter.operator !== \"is_not_null\" && (\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Value\"\n\t\t\t\t\t\t\t\t\tvalue={filter.value}\n\t\t\t\t\t\t\t\t\tonChange={(e) => onUpdateFilter(filter.id, { value: e.target.value })}\n\t\t\t\t\t\t\t\t\tclassName=\"w-[150px]\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tclassName=\"h-9 w-9 text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\tonClick={() => onRemoveFilter(filter.id)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\n\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={onAddFilter}>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tAdd Another Filter\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction StepVisualization({\n\tchartType,\n\tonSelect,\n}: {\n\tchartType: string;\n\tonSelect: (type: string) => void;\n}) {\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-lg font-semibold\">How should your data look?</h2>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tChoose a visualization that best represents your data.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t{CHART_OPTIONS.map((option) => {\n\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\tconst isSelected = chartType === option.value;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={option.value}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={() => onSelect(option.value)}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"group relative flex flex-col items-center gap-3 rounded-xl p-6 text-center transition-all\",\n\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-2 ring-primary\"\n\t\t\t\t\t\t\t\t\t: \"bg-muted/30 hover:bg-muted/50\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isSelected && (\n\t\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className={cn(\n\t\t\t\t\t\t\t\t\"flex h-14 w-14 items-center justify-center rounded-full transition-colors\",\n\t\t\t\t\t\t\t\tisSelected ? \"bg-primary text-primary-foreground\" : \"bg-muted group-hover:bg-muted/80\"\n\t\t\t\t\t\t\t)}>\n\t\t\t\t\t\t\t\t<Icon className=\"h-7 w-7\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-semibold\">{option.label}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">{option.description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction StepSave({\n\tconfig,\n\tselectedSource,\n\tonUpdateConfig,\n}: {\n\tconfig: ReportConfig;\n\tselectedSource: DataSource | null;\n\tonUpdateConfig: (updates: Partial<ReportConfig>) => void;\n}) {\n\treturn (\n\t\t<div className=\"space-y-6 max-w-xl\">\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-lg font-semibold\">Name your report</h2>\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tGive your report a descriptive name so you can find it later.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<Label htmlFor=\"name\">Report Name *</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\tplaceholder=\"e.g., Monthly Revenue by Customer\"\n\t\t\t\t\t\tvalue={config.name}\n\t\t\t\t\t\tonChange={(e) => onUpdateConfig({ name: e.target.value })}\n\t\t\t\t\t\tclassName=\"text-lg\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<Label htmlFor=\"description\">Description (optional)</Label>\n\t\t\t\t\t<Textarea\n\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\tplaceholder=\"What does this report show?\"\n\t\t\t\t\t\tvalue={config.description}\n\t\t\t\t\t\tonChange={(e) => onUpdateConfig({ description: e.target.value })}\n\t\t\t\t\t\trows={3}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Summary */}\n\t\t\t<div className=\"rounded-xl bg-muted/30 p-5 space-y-3\">\n\t\t\t\t<h4 className=\"font-semibold flex items-center gap-2\">\n\t\t\t\t\t<Sparkles className=\"h-4 w-4\" />\n\t\t\t\t\tReport Summary\n\t\t\t\t</h4>\n\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Data Source</span>\n\t\t\t\t\t\t<span className=\"font-medium\">{selectedSource?.name || \"—\"}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Fields</span>\n\t\t\t\t\t\t<span className=\"font-medium\">{config.selectedFields.length} selected</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Filters</span>\n\t\t\t\t\t\t<span className=\"font-medium\">{config.filters.length || \"None\"}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Visualization</span>\n\t\t\t\t\t\t<span className=\"font-medium capitalize\">{config.chartType}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport function CustomReportBuilder() {\n\tconst router = useRouter();\n\n\tconst [currentStep, setCurrentStep] = useState<WizardStep>(\"source\");\n\tconst [config, setConfig] = useState<ReportConfig>({\n\t\tname: \"\",\n\t\tdescription: \"\",\n\t\tprimarySource: \"\",\n\t\tselectedFields: [],\n\t\tfilters: [],\n\t\tchartType: \"table\",\n\t\tlimit: 100,\n\t});\n\n\tconst currentStepIndex = STEPS.findIndex((s) => s.id === currentStep);\n\tconst progress = ((currentStepIndex + 1) / STEPS.length) * 100;\n\tconst selectedSource = config.primarySource ? DATA_SOURCES_MAP[config.primarySource] : null;\n\n\t// Navigation validation\n\tconst canProceed = useMemo(() => {\n\t\tswitch (currentStep) {\n\t\t\tcase \"source\":\n\t\t\t\treturn !!config.primarySource;\n\t\t\tcase \"fields\":\n\t\t\t\treturn config.selectedFields.length > 0;\n\t\t\tcase \"filters\":\n\t\t\t\treturn true; // Filters are optional\n\t\t\tcase \"visualization\":\n\t\t\t\treturn !!config.chartType;\n\t\t\tcase \"save\":\n\t\t\t\treturn config.name.trim().length > 0;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}, [currentStep, config]);\n\n\tconst goNext = () => {\n\t\tconst nextIndex = currentStepIndex + 1;\n\t\tif (nextIndex < STEPS.length) {\n\t\t\tsetCurrentStep(STEPS[nextIndex].id);\n\t\t}\n\t};\n\n\tconst goBack = () => {\n\t\tconst prevIndex = currentStepIndex - 1;\n\t\tif (prevIndex >= 0) {\n\t\t\tsetCurrentStep(STEPS[prevIndex].id);\n\t\t}\n\t};\n\n\t// Handlers\n\tconst handleSourceSelect = useCallback((sourceId: string) => {\n\t\tsetConfig((prev) => ({\n\t\t\t...prev,\n\t\t\tprimarySource: sourceId,\n\t\t\tselectedFields: [],\n\t\t\tfilters: [],\n\t\t}));\n\t}, []);\n\n\tconst handleToggleField = useCallback((field: DataSourceField) => {\n\t\tsetConfig((prev) => {\n\t\t\tconst exists = prev.selectedFields.some((sf) => sf.fieldId === field.id);\n\t\t\tif (exists) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\tselectedFields: prev.selectedFields.filter((sf) => sf.fieldId !== field.id),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\tselectedFields: [\n\t\t\t\t\t...prev.selectedFields,\n\t\t\t\t\t{\n\t\t\t\t\t\tid: `${field.id}-${Date.now()}`,\n\t\t\t\t\t\tsourceId: prev.primarySource,\n\t\t\t\t\t\tfieldId: field.id,\n\t\t\t\t\t\taggregation: field.aggregations?.[0],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t});\n\t}, []);\n\n\tconst handleAddFilter = useCallback(() => {\n\t\tif (!selectedSource) return;\n\t\tconst firstField = selectedSource.fields[0];\n\t\tsetConfig((prev) => ({\n\t\t\t...prev,\n\t\t\tfilters: [\n\t\t\t\t...prev.filters,\n\t\t\t\t{\n\t\t\t\t\tid: `filter-${Date.now()}`,\n\t\t\t\t\tsourceId: prev.primarySource,\n\t\t\t\t\tfieldId: firstField.id,\n\t\t\t\t\toperator: \"equals\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t},\n\t\t\t],\n\t\t}));\n\t}, [selectedSource]);\n\n\tconst handleUpdateFilter = useCallback((id: string, updates: Partial<ReportFilter>) => {\n\t\tsetConfig((prev) => ({\n\t\t\t...prev,\n\t\t\tfilters: prev.filters.map((f) => (f.id === id ? { ...f, ...updates } : f)),\n\t\t}));\n\t}, []);\n\n\tconst handleRemoveFilter = useCallback((id: string) => {\n\t\tsetConfig((prev) => ({\n\t\t\t...prev,\n\t\t\tfilters: prev.filters.filter((f) => f.id !== id),\n\t\t}));\n\t}, []);\n\n\tconst handleSave = () => {\n\t\t// TODO: Save to database\n\t\tconsole.log(\"Saving report:\", config);\n\t\trouter.push(\"/dashboard/reporting\");\n\t};\n\n\treturn (\n\t\t<TooltipProvider delayDuration={200}>\n\t\t\t<div className=\"flex h-full flex-col\">\n\t\t\t\t{/* Header with Progress */}\n\t\t\t\t<div className=\"bg-background/80 backdrop-blur-xl sticky top-0 z-40 px-6 py-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-4 mb-4\">\n\t\t\t\t\t\t<SidebarTrigger className=\"-ml-1\" />\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Create Custom Report</h1>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tStep {currentStepIndex + 1} of {STEPS.length}: {STEPS[currentStepIndex].title}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={() => router.push(\"/dashboard/reporting\")}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Progress Bar */}\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Progress value={progress} className=\"h-1.5\" />\n\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t{STEPS.map((step, index) => {\n\t\t\t\t\t\t\t\tconst isActive = index === currentStepIndex;\n\t\t\t\t\t\t\t\tconst isCompleted = index < currentStepIndex;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={step.id}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t// Only allow going back to completed steps\n\t\t\t\t\t\t\t\t\t\t\tif (index < currentStepIndex) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentStep(step.id);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={index > currentStepIndex}\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"text-xs transition-colors\",\n\t\t\t\t\t\t\t\t\t\t\tisActive && \"text-primary font-semibold\",\n\t\t\t\t\t\t\t\t\t\t\tisCompleted && \"text-primary cursor-pointer hover:underline\",\n\t\t\t\t\t\t\t\t\t\t\t!isActive && !isCompleted && \"text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span className=\"hidden sm:inline\">{step.shortTitle}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"sm:hidden\">{index + 1}</span>\n\t\t\t\t\t\t\t\t\t\t{isCompleted && <Check className=\"inline h-3 w-3 ml-1\" />}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Step Content */}\n\t\t\t\t<div className=\"flex-1 overflow-y-auto\">\n\t\t\t\t\t<div className=\"p-6 max-w-5xl mx-auto\">\n\t\t\t\t\t\t{currentStep === \"source\" && (\n\t\t\t\t\t\t\t<StepDataSource\n\t\t\t\t\t\t\t\tselectedSource={config.primarySource}\n\t\t\t\t\t\t\t\tonSelect={handleSourceSelect}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentStep === \"fields\" && selectedSource && (\n\t\t\t\t\t\t\t<StepFields\n\t\t\t\t\t\t\t\tsource={selectedSource}\n\t\t\t\t\t\t\t\tselectedFields={config.selectedFields}\n\t\t\t\t\t\t\t\tonToggleField={handleToggleField}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentStep === \"filters\" && selectedSource && (\n\t\t\t\t\t\t\t<StepFilters\n\t\t\t\t\t\t\t\tsource={selectedSource}\n\t\t\t\t\t\t\t\tfilters={config.filters}\n\t\t\t\t\t\t\t\tonAddFilter={handleAddFilter}\n\t\t\t\t\t\t\t\tonUpdateFilter={handleUpdateFilter}\n\t\t\t\t\t\t\t\tonRemoveFilter={handleRemoveFilter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentStep === \"visualization\" && (\n\t\t\t\t\t\t\t<StepVisualization\n\t\t\t\t\t\t\t\tchartType={config.chartType}\n\t\t\t\t\t\t\t\tonSelect={(type) => setConfig((prev) => ({ ...prev, chartType: type }))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentStep === \"save\" && (\n\t\t\t\t\t\t\t<StepSave\n\t\t\t\t\t\t\t\tconfig={config}\n\t\t\t\t\t\t\t\tselectedSource={selectedSource}\n\t\t\t\t\t\t\t\tonUpdateConfig={(updates) => setConfig((prev) => ({ ...prev, ...updates }))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Footer Navigation */}\n\t\t\t\t<div className=\"bg-background/80 backdrop-blur-xl sticky bottom-0 z-40 px-6 py-4\">\n\t\t\t\t\t<div className=\"flex items-center justify-between max-w-5xl mx-auto\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tonClick={goBack}\n\t\t\t\t\t\t\tdisabled={currentStepIndex === 0}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ChevronLeft className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t\t\t\t{currentStep === \"save\" ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Button variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t<Eye className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\tPreview\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button onClick={handleSave} disabled={!canProceed}>\n\t\t\t\t\t\t\t\t\t\t<Save className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\tSave Report\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Button onClick={goNext} disabled={!canProceed}>\n\t\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"ml-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</TooltipProvider>\n\t);\n}\n","/**\n * Data Source Definitions for Custom Reporting\n *\n * Complete database schema documentation with detailed tooltips,\n * metric explanations, and relationship mappings.\n */\n\n// =============================================================================\n// DATA SOURCE TYPES\n// =============================================================================\n\nexport interface DataSourceField {\n\tid: string;\n\tname: string;\n\tdbColumn: string;\n\ttype: \"string\" | \"number\" | \"currency\" | \"percentage\" | \"date\" | \"boolean\" | \"duration\" | \"rating\";\n\tdescription: string;\n\ttooltip: string;\n\tformula?: string;\n\taggregations?: AggregationType[];\n\tformat?: string;\n\tcategory: \"dimension\" | \"metric\" | \"attribute\";\n\tbusinessImpact?: \"high\" | \"medium\" | \"low\";\n\trelatedFields?: string[];\n}\n\nexport interface DataSource {\n\tid: string;\n\tname: string;\n\tdbTable: string;\n\tdescription: string;\n\ttooltip: string;\n\ticon: string;\n\tcolor: string;\n\tcategory: DataSourceCategory;\n\tfields: DataSourceField[];\n\trelationships: DataSourceRelationship[];\n\tcommonFilters: CommonFilter[];\n\tsampleQueries: SampleQuery[];\n}\n\nexport interface DataSourceRelationship {\n\ttargetSource: string;\n\ttype: \"one-to-one\" | \"one-to-many\" | \"many-to-many\";\n\tforeignKey: string;\n\tdescription: string;\n}\n\nexport interface CommonFilter {\n\tid: string;\n\tname: string;\n\tfield: string;\n\toperator: FilterOperator;\n\tdescription: string;\n}\n\nexport interface SampleQuery {\n\tname: string;\n\tdescription: string;\n\tmetrics: string[];\n\tdimensions: string[];\n\tfilters?: string[];\n}\n\nexport type DataSourceCategory = \"financial\" | \"operations\" | \"customers\" | \"team\" | \"inventory\" | \"communications\";\nexport type AggregationType = \"sum\" | \"avg\" | \"count\" | \"min\" | \"max\" | \"median\" | \"stddev\";\nexport type FilterOperator = \"equals\" | \"not_equals\" | \"greater_than\" | \"less_than\" | \"between\" | \"contains\" | \"starts_with\" | \"in\" | \"is_null\" | \"is_not_null\";\n\n// =============================================================================\n// FINANCIAL DATA SOURCES\n// =============================================================================\n\nexport const invoicesDataSource: DataSource = {\n\tid: \"invoices\",\n\tname: \"Invoices\",\n\tdbTable: \"invoices\",\n\tdescription: \"All customer invoices including draft, sent, paid, and overdue\",\n\ttooltip: \"Track billing performance, payment collection, and revenue recognition. Invoices are the primary source for revenue metrics and cash flow analysis.\",\n\ticon: \"Receipt\",\n\tcolor: \"emerald\",\n\tcategory: \"financial\",\n\tfields: [\n\t\t{\n\t\t\tid: \"total_amount\",\n\t\t\tname: \"Total Amount\",\n\t\t\tdbColumn: \"total\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Invoice total including all line items, taxes, and fees\",\n\t\t\ttooltip: \"The complete invoice amount before any payments or credits. This is the gross revenue expected from the invoice. Use this for revenue forecasting and sales performance tracking.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"subtotal\",\n\t\t\tname: \"Subtotal\",\n\t\t\tdbColumn: \"subtotal\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Sum of line items before taxes and discounts\",\n\t\t\ttooltip: \"The base price of all services and products before any modifications. Useful for understanding true service value separate from taxes and adjustments.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"tax_amount\",\n\t\t\tname: \"Tax Amount\",\n\t\t\tdbColumn: \"tax_amount\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total taxes applied to the invoice\",\n\t\t\ttooltip: \"All applicable taxes (sales tax, VAT, etc.). Track this for tax reporting and compliance. High tax amounts may indicate certain service types or geographic regions.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"discount_amount\",\n\t\t\tname: \"Discount Amount\",\n\t\t\tdbColumn: \"discount_amount\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total discounts applied\",\n\t\t\ttooltip: \"All discounts given on this invoice. Monitor discount trends to ensure profitability. Excessive discounting may indicate pricing issues or sales concerns.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t\trelatedFields: [\"discount_percent\", \"discount_reason\"],\n\t\t},\n\t\t{\n\t\t\tid: \"amount_paid\",\n\t\t\tname: \"Amount Paid\",\n\t\t\tdbColumn: \"amount_paid\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total payments received against this invoice\",\n\t\t\ttooltip: \"Actual cash collected. The difference between total and amount_paid is your outstanding receivable. Critical for cash flow management.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"balance_due\",\n\t\t\tname: \"Balance Due\",\n\t\t\tdbColumn: \"balance_due\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Remaining amount to be collected\",\n\t\t\ttooltip: \"Outstanding balance = Total - Amount Paid. High balances indicate collection issues. Track by age to prioritize collection efforts.\",\n\t\t\tformula: \"total - amount_paid\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"status\",\n\t\t\tname: \"Status\",\n\t\t\tdbColumn: \"status\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Current invoice status\",\n\t\t\ttooltip: \"Invoice lifecycle stage: draft (not sent), sent (awaiting payment), partial (some payment received), paid (fully collected), overdue (past due date), void (cancelled). Use for pipeline analysis.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"invoice_date\",\n\t\t\tname: \"Invoice Date\",\n\t\t\tdbColumn: \"invoice_date\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"Date the invoice was created\",\n\t\t\ttooltip: \"When the invoice was generated. Use for revenue recognition timing, seasonal analysis, and billing cycle optimization.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"due_date\",\n\t\t\tname: \"Due Date\",\n\t\t\tdbColumn: \"due_date\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"Payment due date\",\n\t\t\ttooltip: \"When payment is expected. Calculate days_overdue as today - due_date for aging analysis. Longer payment terms may affect cash flow.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"paid_date\",\n\t\t\tname: \"Paid Date\",\n\t\t\tdbColumn: \"paid_date\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"Date payment was received\",\n\t\t\ttooltip: \"When the invoice was fully paid. Use paid_date - invoice_date to calculate Days Sales Outstanding (DSO). Faster payment = better cash flow.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"days_to_pay\",\n\t\t\tname: \"Days to Pay\",\n\t\t\tdbColumn: \"days_to_pay\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Number of days from invoice to payment\",\n\t\t\ttooltip: \"Measures payment speed. Lower is better. Industry average is 30-45 days. High values may indicate customer cash flow issues or billing disputes.\",\n\t\t\taggregations: [\"avg\", \"median\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"payment_method\",\n\t\t\tname: \"Payment Method\",\n\t\t\tdbColumn: \"payment_method\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"How the invoice was paid\",\n\t\t\ttooltip: \"Card, ACH, check, cash, financing. Different methods have different processing costs and timing. Cards: fast but ~3% fees. ACH: slower but cheaper. Checks: slowest, risk of bounce.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"customers\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Invoices belong to customers\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"jobs\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"job_id\",\n\t\t\tdescription: \"Invoices are generated from jobs\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"payments\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"invoice_id\",\n\t\t\tdescription: \"Invoices can have multiple payments\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"status_open\",\n\t\t\tname: \"Open Invoices\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"in\",\n\t\t\tdescription: \"Invoices awaiting payment (sent, partial, overdue)\",\n\t\t},\n\t\t{\n\t\t\tid: \"status_paid\",\n\t\t\tname: \"Paid Invoices\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Fully paid invoices only\",\n\t\t},\n\t\t{\n\t\t\tid: \"overdue\",\n\t\t\tname: \"Overdue\",\n\t\t\tfield: \"due_date\",\n\t\t\toperator: \"less_than\",\n\t\t\tdescription: \"Past due date and not fully paid\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Monthly Revenue\",\n\t\t\tdescription: \"Total invoiced revenue by month\",\n\t\t\tmetrics: [\"total_amount\"],\n\t\t\tdimensions: [\"invoice_date\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Collection Rate\",\n\t\t\tdescription: \"Percentage of invoices paid on time\",\n\t\t\tmetrics: [\"amount_paid\", \"total_amount\"],\n\t\t\tdimensions: [\"status\"],\n\t\t},\n\t],\n};\n\nexport const paymentsDataSource: DataSource = {\n\tid: \"payments\",\n\tname: \"Payments\",\n\tdbTable: \"payments\",\n\tdescription: \"All payment transactions received\",\n\ttooltip: \"Track cash inflows, payment methods, and transaction success rates. Essential for cash flow management and reconciliation.\",\n\ticon: \"CreditCard\",\n\tcolor: \"green\",\n\tcategory: \"financial\",\n\tfields: [\n\t\t{\n\t\t\tid: \"amount\",\n\t\t\tname: \"Amount\",\n\t\t\tdbColumn: \"amount\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Payment amount received\",\n\t\t\ttooltip: \"The actual cash received. Note: This is stored in cents (multiply display by 100 for database queries). Track by payment method to optimize processing costs.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"min\", \"max\", \"count\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"payment_method\",\n\t\t\tname: \"Payment Method\",\n\t\t\tdbColumn: \"payment_method\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"How payment was made\",\n\t\t\ttooltip: \"Credit card, debit card, ACH, check, cash, or financing. Each has different costs: Cards ~2.9%, ACH ~0.5%, Check/Cash ~0%. Optimize mix to reduce fees.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"status\",\n\t\t\tname: \"Status\",\n\t\t\tdbColumn: \"status\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Transaction status\",\n\t\t\ttooltip: \"pending (processing), succeeded (confirmed), failed (declined), refunded (returned to customer). Monitor failed rates to identify card/bank issues.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"processing_fee\",\n\t\t\tname: \"Processing Fee\",\n\t\t\tdbColumn: \"processing_fee\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Payment processor fees\",\n\t\t\ttooltip: \"Fees charged by payment processors (Stripe, Square, etc.). Track this to understand true net revenue. Typically 2.9% + $0.30 for cards.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"net_amount\",\n\t\t\tname: \"Net Amount\",\n\t\t\tdbColumn: \"net_amount\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Amount after fees\",\n\t\t\ttooltip: \"What you actually receive after processor fees. Net Amount = Amount - Processing Fee. This is your true cash intake.\",\n\t\t\tformula: \"amount - processing_fee\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"payment_date\",\n\t\t\tname: \"Payment Date\",\n\t\t\tdbColumn: \"payment_date\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When payment was received\",\n\t\t\ttooltip: \"Transaction timestamp. Note: Cards process instantly but settle in 2-3 days. ACH takes 3-5 business days. Use for cash flow forecasting.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"refund_amount\",\n\t\t\tname: \"Refund Amount\",\n\t\t\tdbColumn: \"refund_amount\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Amount refunded to customer\",\n\t\t\ttooltip: \"Money returned. High refund rates may indicate quality issues or customer dissatisfaction. Monitor refund reasons to identify patterns.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"invoices\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"invoice_id\",\n\t\t\tdescription: \"Payments apply to invoices\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"customers\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Payments come from customers\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"successful\",\n\t\t\tname: \"Successful Payments\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Only confirmed payments\",\n\t\t},\n\t\t{\n\t\t\tid: \"refunded\",\n\t\t\tname: \"Refunded\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Payments that were refunded\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Daily Cash Flow\",\n\t\t\tdescription: \"Net payments by day\",\n\t\t\tmetrics: [\"net_amount\"],\n\t\t\tdimensions: [\"payment_date\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Payment Method Mix\",\n\t\t\tdescription: \"Revenue breakdown by payment type\",\n\t\t\tmetrics: [\"amount\"],\n\t\t\tdimensions: [\"payment_method\"],\n\t\t},\n\t],\n};\n\n// =============================================================================\n// OPERATIONS DATA SOURCES\n// =============================================================================\n\nexport const jobsDataSource: DataSource = {\n\tid: \"jobs\",\n\tname: \"Jobs\",\n\tdbTable: \"jobs\",\n\tdescription: \"Service jobs and work orders\",\n\ttooltip: \"The core operational unit. Jobs track all service work from scheduling to completion. Critical for operational efficiency, resource utilization, and revenue generation.\",\n\ticon: \"Briefcase\",\n\tcolor: \"blue\",\n\tcategory: \"operations\",\n\tfields: [\n\t\t{\n\t\t\tid: \"status\",\n\t\t\tname: \"Status\",\n\t\t\tdbColumn: \"status\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Current job status\",\n\t\t\ttooltip: \"Job lifecycle: draft → scheduled → in_progress → completed → invoiced. Track status transitions for operational efficiency. Jobs stuck in one status may indicate process issues.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"job_type\",\n\t\t\tname: \"Job Type\",\n\t\t\tdbColumn: \"job_type\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Category of service\",\n\t\t\ttooltip: \"Service category (repair, maintenance, installation, inspection, emergency). Different types have different margins and resource requirements. Track profitability by type.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"priority\",\n\t\t\tname: \"Priority\",\n\t\t\tdbColumn: \"priority\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Job urgency level\",\n\t\t\ttooltip: \"low, normal, high, emergency. Higher priority jobs often command premium pricing. Track priority distribution to optimize scheduling and staffing.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"total_amount\",\n\t\t\tname: \"Total Amount\",\n\t\t\tdbColumn: \"total\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total job revenue\",\n\t\t\ttooltip: \"Complete job value including labor, parts, and fees. This is potential revenue - actual collection depends on invoicing and payment. Track vs. estimates for accuracy.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"labor_cost\",\n\t\t\tname: \"Labor Cost\",\n\t\t\tdbColumn: \"labor_cost\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Cost of technician time\",\n\t\t\ttooltip: \"Total labor expense = hours × hourly rate. Compare to labor_revenue to understand labor margin. Target 50-60% labor margin for healthy profitability.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"parts_cost\",\n\t\t\tname: \"Parts Cost\",\n\t\t\tdbColumn: \"parts_cost\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Cost of materials used\",\n\t\t\ttooltip: \"Inventory and parts expense. Track markup (parts_revenue / parts_cost) to ensure healthy margins. Industry standard is 40-100% markup on parts.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"gross_profit\",\n\t\t\tname: \"Gross Profit\",\n\t\t\tdbColumn: \"gross_profit\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Revenue minus direct costs\",\n\t\t\ttooltip: \"Gross Profit = Total - Labor Cost - Parts Cost. This is your contribution margin before overhead. Target 40-50% gross margin for sustainable business.\",\n\t\t\tformula: \"total - labor_cost - parts_cost\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"gross_margin\",\n\t\t\tname: \"Gross Margin %\",\n\t\t\tdbColumn: \"gross_margin_percent\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Profit as percentage of revenue\",\n\t\t\ttooltip: \"Gross Margin = (Gross Profit / Total) × 100. Higher is better. Below 30% may indicate pricing or cost issues. Track by job type to identify profitable services.\",\n\t\t\tformula: \"(gross_profit / total) * 100\",\n\t\t\taggregations: [\"avg\", \"median\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"scheduled_start\",\n\t\t\tname: \"Scheduled Start\",\n\t\t\tdbColumn: \"scheduled_start\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When job is scheduled to begin\",\n\t\t\ttooltip: \"Planned start time. Compare to actual_start for schedule adherence. Large gaps indicate dispatch inefficiency or customer-caused delays.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"actual_start\",\n\t\t\tname: \"Actual Start\",\n\t\t\tdbColumn: \"actual_start\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When job actually started\",\n\t\t\ttooltip: \"Real start time. Actual vs Scheduled variance measures operational efficiency. Target < 15 min variance for good customer experience.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"completed_at\",\n\t\t\tname: \"Completed At\",\n\t\t\tdbColumn: \"completed_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When job was finished\",\n\t\t\ttooltip: \"Completion timestamp. Use for cycle time analysis (completed_at - created_at) and productivity tracking (jobs per day).\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"duration_hours\",\n\t\t\tname: \"Duration (Hours)\",\n\t\t\tdbColumn: \"duration_hours\",\n\t\t\ttype: \"duration\",\n\t\t\tdescription: \"Total time spent on job\",\n\t\t\ttooltip: \"Actual hours worked. Compare to estimated_hours for accuracy. Consistently over-running estimates indicates poor scoping or training needs.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"median\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"estimated_hours\",\n\t\t\tname: \"Estimated Hours\",\n\t\t\tdbColumn: \"estimated_hours\",\n\t\t\ttype: \"duration\",\n\t\t\tdescription: \"Planned job duration\",\n\t\t\ttooltip: \"Expected hours at scheduling. Accuracy affects scheduling density and customer expectations. Track by job type to improve future estimates.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"first_time_fix\",\n\t\t\tname: \"First Time Fix\",\n\t\t\tdbColumn: \"first_time_fix\",\n\t\t\ttype: \"boolean\",\n\t\t\tdescription: \"Was job completed on first visit?\",\n\t\t\ttooltip: \"TRUE if resolved without return visit. Industry benchmark is 85-90% FTF rate. Low rates indicate parts availability, diagnosis, or training issues. Huge impact on profitability.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"callback_required\",\n\t\t\tname: \"Callback Required\",\n\t\t\tdbColumn: \"callback_required\",\n\t\t\ttype: \"boolean\",\n\t\t\tdescription: \"Did job require a return visit?\",\n\t\t\ttooltip: \"TRUE if technician had to return. Callbacks are expensive - typically cost 2x the original job. Track by technician and job type to identify issues.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"customer_rating\",\n\t\t\tname: \"Customer Rating\",\n\t\t\tdbColumn: \"customer_rating\",\n\t\t\ttype: \"rating\",\n\t\t\tdescription: \"Customer satisfaction score\",\n\t\t\ttooltip: \"1-5 star rating from customer. Average should be 4.5+. Below 4.0 indicates service issues. Low ratings correlate with churn - address immediately.\",\n\t\t\taggregations: [\"avg\", \"count\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"lead_source\",\n\t\t\tname: \"Lead Source\",\n\t\t\tdbColumn: \"source\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"How customer found you\",\n\t\t\ttooltip: \"Marketing attribution: referral, google, facebook, repeat, etc. Track revenue by source to optimize marketing spend. Referrals typically have highest conversion and LTV.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"customers\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Jobs are performed for customers\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"team_members\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"assigned_to\",\n\t\t\tdescription: \"Jobs are assigned to technicians\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"invoices\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"job_id\",\n\t\t\tdescription: \"Jobs generate invoices\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"estimates\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"job_id\",\n\t\t\tdescription: \"Jobs may have estimates\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"equipment\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"equipment_id\",\n\t\t\tdescription: \"Jobs service equipment\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"completed\",\n\t\t\tname: \"Completed Jobs\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Only finished jobs\",\n\t\t},\n\t\t{\n\t\t\tid: \"in_progress\",\n\t\t\tname: \"In Progress\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Currently active jobs\",\n\t\t},\n\t\t{\n\t\t\tid: \"emergency\",\n\t\t\tname: \"Emergency Jobs\",\n\t\t\tfield: \"priority\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"High priority emergency calls\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Revenue by Job Type\",\n\t\t\tdescription: \"Total revenue broken down by service category\",\n\t\t\tmetrics: [\"total_amount\", \"gross_profit\"],\n\t\t\tdimensions: [\"job_type\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Technician Productivity\",\n\t\t\tdescription: \"Jobs completed and revenue per technician\",\n\t\t\tmetrics: [\"total_amount\", \"duration_hours\"],\n\t\t\tdimensions: [\"assigned_to\"],\n\t\t},\n\t\t{\n\t\t\tname: \"First Time Fix Rate\",\n\t\t\tdescription: \"Percentage of jobs completed on first visit\",\n\t\t\tmetrics: [\"first_time_fix\"],\n\t\t\tdimensions: [\"job_type\", \"assigned_to\"],\n\t\t},\n\t],\n};\n\nexport const estimatesDataSource: DataSource = {\n\tid: \"estimates\",\n\tname: \"Estimates\",\n\tdbTable: \"estimates\",\n\tdescription: \"Quotes and proposals sent to customers\",\n\ttooltip: \"Track your sales pipeline. Estimates represent potential revenue. Monitor conversion rates, average values, and time-to-close to optimize your sales process.\",\n\ticon: \"FileText\",\n\tcolor: \"amber\",\n\tcategory: \"operations\",\n\tfields: [\n\t\t{\n\t\t\tid: \"total_amount\",\n\t\t\tname: \"Total Amount\",\n\t\t\tdbColumn: \"total\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Estimate total value\",\n\t\t\ttooltip: \"Proposed job value. This is your potential revenue pipeline. Track total estimates value to forecast future revenue. Compare to actual job values to measure estimate accuracy.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"status\",\n\t\t\tname: \"Status\",\n\t\t\tdbColumn: \"status\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Estimate lifecycle stage\",\n\t\t\ttooltip: \"draft (not sent), sent (awaiting response), viewed (customer opened), accepted (converted to job), declined (lost), expired (past valid date). Pipeline stage for forecasting.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"conversion_probability\",\n\t\t\tname: \"Conversion Probability\",\n\t\t\tdbColumn: \"conversion_probability\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Likelihood of winning this estimate\",\n\t\t\ttooltip: \"AI-predicted win probability based on historical data. Use for weighted pipeline forecasting: Expected Revenue = Total × Probability. Higher values indicate better qualified opportunities.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"created_at\",\n\t\t\tname: \"Created At\",\n\t\t\tdbColumn: \"created_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When estimate was created\",\n\t\t\ttooltip: \"Creation timestamp. Track estimate volume over time. Sudden drops may indicate lead generation issues. Spikes may strain your capacity to follow up.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"sent_at\",\n\t\t\tname: \"Sent At\",\n\t\t\tdbColumn: \"sent_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When estimate was sent to customer\",\n\t\t\ttooltip: \"Delivery timestamp. Time from creation to send should be < 24 hours for best conversion. Delays hurt win rates.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"viewed_at\",\n\t\t\tname: \"Viewed At\",\n\t\t\tdbColumn: \"viewed_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When customer first viewed\",\n\t\t\ttooltip: \"Customer engagement signal. Quick views indicate interest. No view after 48 hours suggests the estimate may be in spam or customer is not engaged.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"accepted_at\",\n\t\t\tname: \"Accepted At\",\n\t\t\tdbColumn: \"accepted_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When estimate was approved\",\n\t\t\ttooltip: \"Conversion timestamp. Days from sent to accepted is your sales cycle length. Shorter cycles = healthier pipeline. Long cycles may need follow-up automation.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"expiry_date\",\n\t\t\tname: \"Expiry Date\",\n\t\t\tdbColumn: \"valid_until\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"When estimate expires\",\n\t\t\ttooltip: \"Deadline for customer decision. Expired estimates should be followed up or closed. Short validity (7-14 days) creates urgency. Long validity (30+ days) may delay decisions.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"days_to_convert\",\n\t\t\tname: \"Days to Convert\",\n\t\t\tdbColumn: \"days_to_convert\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Time from sent to accepted\",\n\t\t\ttooltip: \"Sales cycle length. Industry average is 7-14 days. Longer cycles tie up resources and reduce forecast accuracy. Track by estimate size - larger deals typically take longer.\",\n\t\t\taggregations: [\"avg\", \"median\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"follow_up_count\",\n\t\t\tname: \"Follow-up Count\",\n\t\t\tdbColumn: \"follow_up_count\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Number of follow-up attempts\",\n\t\t\ttooltip: \"How many times you've followed up. Sweet spot is 2-5 follow-ups. Zero follow-ups hurt conversion. Too many (10+) wastes resources on unqualified leads.\",\n\t\t\taggregations: [\"avg\", \"sum\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"decline_reason\",\n\t\t\tname: \"Decline Reason\",\n\t\t\tdbColumn: \"decline_reason\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Why estimate was rejected\",\n\t\t\ttooltip: \"Categories: price (too expensive), timing (not ready), competitor (chose another), diy (doing themselves), other. Track to identify patterns and improve win rate.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"customers\",\n\t\t\ttype: \"many-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Estimates are for customers\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"jobs\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"estimate_id\",\n\t\t\tdescription: \"Accepted estimates become jobs\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"pending\",\n\t\t\tname: \"Pending Response\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"in\",\n\t\t\tdescription: \"Estimates awaiting customer decision\",\n\t\t},\n\t\t{\n\t\t\tid: \"won\",\n\t\t\tname: \"Won Estimates\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Converted to jobs\",\n\t\t},\n\t\t{\n\t\t\tid: \"lost\",\n\t\t\tname: \"Lost Estimates\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Declined or expired\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Conversion Funnel\",\n\t\t\tdescription: \"Estimates by stage with conversion rates\",\n\t\t\tmetrics: [\"total_amount\"],\n\t\t\tdimensions: [\"status\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Win/Loss Analysis\",\n\t\t\tdescription: \"Declined estimates by reason\",\n\t\t\tmetrics: [\"total_amount\"],\n\t\t\tdimensions: [\"decline_reason\"],\n\t\t\tfilters: [\"lost\"],\n\t\t},\n\t],\n};\n\n// =============================================================================\n// CUSTOMER DATA SOURCES\n// =============================================================================\n\nexport const customersDataSource: DataSource = {\n\tid: \"customers\",\n\tname: \"Customers\",\n\tdbTable: \"customers\",\n\tdescription: \"All customer records and profiles\",\n\ttooltip: \"Your customer base is your most valuable asset. Track customer health, lifetime value, and engagement to maximize retention and growth.\",\n\ticon: \"Users\",\n\tcolor: \"purple\",\n\tcategory: \"customers\",\n\tfields: [\n\t\t{\n\t\t\tid: \"lifetime_value\",\n\t\t\tname: \"Lifetime Value\",\n\t\t\tdbColumn: \"lifetime_value\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total revenue from this customer\",\n\t\t\ttooltip: \"All-time revenue generated. LTV = Sum of all invoices paid. High LTV customers deserve VIP treatment. Track LTV growth over time to measure customer development success.\",\n\t\t\taggregations: [\"sum\", \"avg\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"total_revenue\",\n\t\t\tname: \"Total Revenue\",\n\t\t\tdbColumn: \"total_revenue\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Sum of all customer invoices\",\n\t\t\ttooltip: \"Total billed amount. May differ from lifetime_value due to outstanding balances or refunds. Use for revenue analysis.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"outstanding_balance\",\n\t\t\tname: \"Outstanding Balance\",\n\t\t\tdbColumn: \"outstanding_balance\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Amount currently owed\",\n\t\t\ttooltip: \"Unpaid invoice total. High balances may indicate payment issues. Consider before offering new services. Important for credit management.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"total_jobs\",\n\t\t\tname: \"Total Jobs\",\n\t\t\tdbColumn: \"total_jobs\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Number of completed jobs\",\n\t\t\ttooltip: \"Service frequency indicator. More jobs = more engaged customer. Zero jobs after estimate may indicate lost opportunity.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"average_job_value\",\n\t\t\tname: \"Average Job Value\",\n\t\t\tdbColumn: \"average_job_value\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Mean revenue per job\",\n\t\t\ttooltip: \"Average ticket size. Track over time - declining AJV may indicate downselling or competition. Rising AJV suggests successful upselling.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"customer_segment\",\n\t\t\tname: \"Segment\",\n\t\t\tdbColumn: \"customer_segment\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Customer classification\",\n\t\t\ttooltip: \"Behavioral segment: new (< 90 days), active (recent service), loyal (multiple services), at_risk (overdue for service), dormant (no activity 1+ year), churned (lost), vip (top 10% LTV).\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"health_score\",\n\t\t\tname: \"Health Score\",\n\t\t\tdbColumn: \"health_score\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Customer engagement score (0-100)\",\n\t\t\ttooltip: \"Composite score based on: recency (last service), frequency (job count), monetary (LTV), satisfaction (ratings), and balance (payment behavior). Above 70 = healthy, below 40 = at risk.\",\n\t\t\taggregations: [\"avg\", \"min\", \"max\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"churn_risk\",\n\t\t\tname: \"Churn Risk\",\n\t\t\tdbColumn: \"churn_risk\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Likelihood of losing customer\",\n\t\t\ttooltip: \"AI-predicted risk: low (< 20%), medium (20-50%), high (> 50%), churned (lost). Prioritize retention efforts on high-risk valuable customers.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"last_job_date\",\n\t\t\tname: \"Last Service Date\",\n\t\t\tdbColumn: \"last_job_date\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"Most recent service\",\n\t\t\ttooltip: \"Recency indicator. Customers with no service in 12+ months are dormant. Schedule proactive outreach based on typical service intervals.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"created_at\",\n\t\t\tname: \"Customer Since\",\n\t\t\tdbColumn: \"created_at\",\n\t\t\ttype: \"date\",\n\t\t\tdescription: \"Account creation date\",\n\t\t\ttooltip: \"Customer tenure. Longer tenure typically means higher LTV. Track new customer acquisition rate monthly.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"source\",\n\t\t\tname: \"Acquisition Source\",\n\t\t\tdbColumn: \"source\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"How customer found you\",\n\t\t\ttooltip: \"Lead source: referral, google, facebook, yelp, repeat, direct, etc. Track LTV by source to optimize marketing spend. Referrals typically have 25-50% higher LTV.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"type\",\n\t\t\tname: \"Customer Type\",\n\t\t\tdbColumn: \"type\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Residential or commercial\",\n\t\t\ttooltip: \"Business classification. Commercial customers typically have higher AJV but longer payment cycles. Residential is higher volume, faster payment.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"average_satisfaction\",\n\t\t\tname: \"Average Satisfaction\",\n\t\t\tdbColumn: \"average_satisfaction_rating\",\n\t\t\ttype: \"rating\",\n\t\t\tdescription: \"Mean customer rating\",\n\t\t\ttooltip: \"Average of all job ratings. Below 4.0 indicates relationship issues. Track trend over time - declining satisfaction predicts churn.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"nps_score\",\n\t\t\tname: \"NPS Score\",\n\t\t\tdbColumn: \"nps_score\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Net Promoter Score\",\n\t\t\ttooltip: \"Would they recommend you? -100 to +100 scale. Promoters (9-10), Passives (7-8), Detractors (0-6). Score > 50 is excellent. Industry average is 30-40.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"equipment_count\",\n\t\t\tname: \"Equipment Count\",\n\t\t\tdbColumn: \"equipment_count\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Number of units on file\",\n\t\t\ttooltip: \"More equipment = more service opportunities. Cross-sell maintenance plans. Equipment data enables proactive outreach when units age out.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"active_contract_value\",\n\t\t\tname: \"Contract Value\",\n\t\t\tdbColumn: \"active_contract_value\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Value of active service agreements\",\n\t\t\ttooltip: \"Recurring revenue from this customer. Contract customers have 3-5x higher retention. Track contract penetration to grow recurring revenue.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"jobs\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Customers have many jobs\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"invoices\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Customers receive invoices\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"properties\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Customers have properties\",\n\t\t},\n\t\t{\n\t\t\ttargetSource: \"equipment\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"customer_id\",\n\t\t\tdescription: \"Customers own equipment\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"active\",\n\t\t\tname: \"Active Customers\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Currently active accounts\",\n\t\t},\n\t\t{\n\t\t\tid: \"at_risk\",\n\t\t\tname: \"At Risk\",\n\t\t\tfield: \"churn_risk\",\n\t\t\toperator: \"in\",\n\t\t\tdescription: \"High churn risk customers\",\n\t\t},\n\t\t{\n\t\t\tid: \"vip\",\n\t\t\tname: \"VIP Customers\",\n\t\t\tfield: \"customer_segment\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Top tier customers\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Customer Segmentation\",\n\t\t\tdescription: \"Customer count and LTV by segment\",\n\t\t\tmetrics: [\"lifetime_value\"],\n\t\t\tdimensions: [\"customer_segment\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Acquisition Analysis\",\n\t\t\tdescription: \"New customers and LTV by source\",\n\t\t\tmetrics: [\"lifetime_value\", \"total_jobs\"],\n\t\t\tdimensions: [\"source\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Churn Risk Report\",\n\t\t\tdescription: \"At-risk customers sorted by value\",\n\t\t\tmetrics: [\"lifetime_value\", \"health_score\"],\n\t\t\tdimensions: [\"churn_risk\"],\n\t\t\tfilters: [\"at_risk\"],\n\t\t},\n\t],\n};\n\n// =============================================================================\n// TEAM DATA SOURCES\n// =============================================================================\n\nexport const teamMembersDataSource: DataSource = {\n\tid: \"team_members\",\n\tname: \"Team Members\",\n\tdbTable: \"team_members\",\n\tdescription: \"Employees and their performance metrics\",\n\ttooltip: \"Track technician productivity, efficiency, and quality. Team performance directly impacts profitability and customer satisfaction.\",\n\ticon: \"UserCheck\",\n\tcolor: \"indigo\",\n\tcategory: \"team\",\n\tfields: [\n\t\t{\n\t\t\tid: \"name\",\n\t\t\tname: \"Name\",\n\t\t\tdbColumn: \"display_name\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Team member name\",\n\t\t\ttooltip: \"Full name for display. Use for grouping and reporting.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"low\",\n\t\t},\n\t\t{\n\t\t\tid: \"role\",\n\t\t\tname: \"Role\",\n\t\t\tdbColumn: \"role\",\n\t\t\ttype: \"string\",\n\t\t\tdescription: \"Job title/position\",\n\t\t\ttooltip: \"Position: technician, senior_tech, lead, manager, admin. Different roles have different metrics expectations. Compare within role groups.\",\n\t\t\tcategory: \"dimension\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"hourly_rate\",\n\t\t\tname: \"Hourly Rate\",\n\t\t\tdbColumn: \"hourly_rate\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Pay rate per hour\",\n\t\t\ttooltip: \"Labor cost basis. Use to calculate job costs and margins. Higher rates should correlate with higher productivity or specialized skills.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"billable_rate\",\n\t\t\tname: \"Billable Rate\",\n\t\t\tdbColumn: \"billable_rate\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Rate charged to customers\",\n\t\t\ttooltip: \"What you charge for this tech's time. Billable Rate / Hourly Rate = Labor Margin. Target 2-3x multiplier for healthy margins.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"utilization_rate\",\n\t\t\tname: \"Utilization Rate\",\n\t\t\tdbColumn: \"utilization_rate\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Percentage of time on billable work\",\n\t\t\ttooltip: \"Billable Hours / Available Hours × 100. Target 70-80%. Below 60% indicates scheduling issues or training needs. Above 90% risks burnout.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"jobs_completed\",\n\t\t\tname: \"Jobs Completed\",\n\t\t\tdbColumn: \"jobs_completed_count\",\n\t\t\ttype: \"number\",\n\t\t\tdescription: \"Number of jobs finished\",\n\t\t\ttooltip: \"Productivity measure. Track weekly/monthly trends. Sudden drops may indicate issues. Compare to team average and historical performance.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"revenue_generated\",\n\t\t\tname: \"Revenue Generated\",\n\t\t\tdbColumn: \"revenue_generated\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Total revenue from assigned jobs\",\n\t\t\ttooltip: \"Value of work completed. Revenue per tech varies by experience, job mix, and territory. Use for commission calculations and performance reviews.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"average_job_value\",\n\t\t\tname: \"Average Job Value\",\n\t\t\tdbColumn: \"average_job_value\",\n\t\t\ttype: \"currency\",\n\t\t\tdescription: \"Mean revenue per job\",\n\t\t\ttooltip: \"Revenue / Jobs Completed. Higher values indicate upselling success. Compare across team to identify training opportunities.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"first_time_fix_rate\",\n\t\t\tname: \"First Time Fix Rate\",\n\t\t\tdbColumn: \"first_time_fix_rate\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Jobs completed on first visit\",\n\t\t\ttooltip: \"Quality indicator. Target 85-90%. Below 75% needs investigation - could be training, parts availability, or dispatch issues. Huge impact on profitability.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"callback_rate\",\n\t\t\tname: \"Callback Rate\",\n\t\t\tdbColumn: \"callback_rate\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Jobs requiring return visit\",\n\t\t\ttooltip: \"Inverse of FTF. Target < 15%. High callback rates are expensive (2x cost) and damage customer satisfaction. Identify root causes.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"average_rating\",\n\t\t\tname: \"Average Rating\",\n\t\t\tdbColumn: \"average_rating\",\n\t\t\ttype: \"rating\",\n\t\t\tdescription: \"Mean customer satisfaction score\",\n\t\t\ttooltip: \"Customer ratings 1-5. Target 4.5+. Below 4.0 requires immediate attention. Ratings impact customer retention and referrals.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t\t{\n\t\t\tid: \"avg_job_duration\",\n\t\t\tname: \"Avg Job Duration\",\n\t\t\tdbColumn: \"average_job_duration\",\n\t\t\ttype: \"duration\",\n\t\t\tdescription: \"Average time per job\",\n\t\t\ttooltip: \"Mean hours per job. Lower is more efficient IF quality is maintained. Compare by job type - some naturally take longer. Track trend over time.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"on_time_arrival_rate\",\n\t\t\tname: \"On-Time Arrival\",\n\t\t\tdbColumn: \"on_time_arrival_rate\",\n\t\t\ttype: \"percentage\",\n\t\t\tdescription: \"Percentage arriving within window\",\n\t\t\ttooltip: \"Punctuality measure. Target 90%+. Late arrivals hurt customer satisfaction. May indicate routing issues, poor time estimation, or traffic problems.\",\n\t\t\taggregations: [\"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"medium\",\n\t\t},\n\t\t{\n\t\t\tid: \"overtime_hours\",\n\t\t\tname: \"Overtime Hours\",\n\t\t\tdbColumn: \"overtime_hours\",\n\t\t\ttype: \"duration\",\n\t\t\tdescription: \"Hours worked over 40/week\",\n\t\t\ttooltip: \"OT is 1.5x cost. Some OT is healthy (high demand), excessive OT (15%+ of hours) indicates understaffing or poor scheduling.\",\n\t\t\taggregations: [\"sum\", \"avg\"],\n\t\t\tcategory: \"metric\",\n\t\t\tbusinessImpact: \"high\",\n\t\t},\n\t],\n\trelationships: [\n\t\t{\n\t\t\ttargetSource: \"jobs\",\n\t\t\ttype: \"one-to-many\",\n\t\t\tforeignKey: \"assigned_to\",\n\t\t\tdescription: \"Team members are assigned jobs\",\n\t\t},\n\t],\n\tcommonFilters: [\n\t\t{\n\t\t\tid: \"technicians\",\n\t\t\tname: \"Technicians Only\",\n\t\t\tfield: \"role\",\n\t\t\toperator: \"in\",\n\t\t\tdescription: \"Field service technicians\",\n\t\t},\n\t\t{\n\t\t\tid: \"active\",\n\t\t\tname: \"Active Employees\",\n\t\t\tfield: \"status\",\n\t\t\toperator: \"equals\",\n\t\t\tdescription: \"Currently employed\",\n\t\t},\n\t],\n\tsampleQueries: [\n\t\t{\n\t\t\tname: \"Productivity Leaderboard\",\n\t\t\tdescription: \"Revenue and jobs by technician\",\n\t\t\tmetrics: [\"revenue_generated\", \"jobs_completed\"],\n\t\t\tdimensions: [\"name\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Quality Metrics\",\n\t\t\tdescription: \"FTF rate and ratings by technician\",\n\t\t\tmetrics: [\"first_time_fix_rate\", \"average_rating\"],\n\t\t\tdimensions: [\"name\"],\n\t\t},\n\t\t{\n\t\t\tname: \"Efficiency Analysis\",\n\t\t\tdescription: \"Utilization and average job duration\",\n\t\t\tmetrics: [\"utilization_rate\", \"avg_job_duration\"],\n\t\t\tdimensions: [\"name\", \"role\"],\n\t\t},\n\t],\n};\n\n// =============================================================================\n// EXPORT ALL DATA SOURCES\n// =============================================================================\n\nexport const DATA_SOURCES: DataSource[] = [\n\tinvoicesDataSource,\n\tpaymentsDataSource,\n\tjobsDataSource,\n\testimatesDataSource,\n\tcustomersDataSource,\n\tteamMembersDataSource,\n];\n\nexport const DATA_SOURCES_MAP: Record<string, DataSource> = {\n\tinvoices: invoicesDataSource,\n\tpayments: paymentsDataSource,\n\tjobs: jobsDataSource,\n\testimates: estimatesDataSource,\n\tcustomers: customersDataSource,\n\tteam_members: teamMembersDataSource,\n};\n\n// Helper to get field by ID across all sources\nexport function getFieldById(fieldId: string): DataSourceField | undefined {\n\tfor (const source of DATA_SOURCES) {\n\t\tconst field = source.fields.find((f) => f.id === fieldId);\n\t\tif (field) return field;\n\t}\n\treturn undefined;\n}\n\n// Helper to get all fields for a category\nexport function getFieldsByCategory(category: DataSourceCategory): DataSourceField[] {\n\treturn DATA_SOURCES.filter((s) => s.category === category).flatMap((s) => s.fields);\n}\n"],"names":[],"mappings":"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"}