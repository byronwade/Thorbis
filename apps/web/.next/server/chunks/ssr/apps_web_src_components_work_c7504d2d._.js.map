{"version":3,"sources":["../../../../../../apps/web/src/components/work/teams-kanban.tsx","../../../../../../apps/web/src/components/work/teams-table.tsx"],"sourcesContent":["\"use client\";\n\nimport { ArrowUpRight, Building2, Shield, User } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { EntityKanban } from \"@/components/ui/entity-kanban\";\nimport type { KanbanItemBase } from \"@/components/ui/shadcn-io/kanban\";\nimport type { TeamMember } from \"@/components/work/teams-table\";\n\ntype TeamMemberStatus = \"active\" | \"invited\" | \"suspended\";\n\ntype TeamsKanbanItem = KanbanItemBase & {\n\tmember: TeamMember;\n};\n\nconst TEAM_COLUMNS: Array<{\n\tid: TeamMemberStatus;\n\tname: string;\n\taccentColor: string;\n}> = [\n\t{ id: \"active\", name: \"Active\", accentColor: \"#22C55E\" },\n\t{ id: \"invited\", name: \"Invited\", accentColor: \"#F59E0B\" },\n\t{ id: \"suspended\", name: \"Suspended\", accentColor: \"#EF4444\" },\n];\n\nconst _columnLabel = new Map(\n\tTEAM_COLUMNS.map((column) => [column.id, column.name]),\n);\n\nfunction getInitials(name: string) {\n\treturn name\n\t\t.split(\" \")\n\t\t.map((n) => n[0])\n\t\t.join(\"\")\n\t\t.toUpperCase();\n}\n\nfunction MemberCard({ item }: { item: TeamsKanbanItem }) {\n\tconst { member } = item;\n\n\treturn (\n\t\t<div className=\"border-border/70 bg-background rounded-xl border p-4 shadow-sm transition-shadow hover:shadow-md\">\n\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t<Avatar className=\"h-10 w-10\">\n\t\t\t\t\t<AvatarImage src={member.avatar} />\n\t\t\t\t\t<AvatarFallback className=\"text-xs\">\n\t\t\t\t\t\t{getInitials(member.name)}\n\t\t\t\t\t</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t<div className=\"flex items-start justify-between gap-2\">\n\t\t\t\t\t\t<div className=\"min-w-0\">\n\t\t\t\t\t\t\t<p className=\"truncate text-sm font-medium\">{member.name}</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground truncate text-xs\">\n\t\t\t\t\t\t\t\t{member.email}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Link href={`/dashboard/work/team/${member.id}`}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"h-6 w-6\"\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowUpRight className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">View member</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{member.jobTitle && (\n\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">\n\t\t\t\t\t\t\t{member.jobTitle}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<div className=\"mt-3 flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t{member.roleName && (\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tclassName=\"text-xs\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: member.roleColor || \"#6b7280\",\n\t\t\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Shield className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t{member.roleName}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{member.departmentName && (\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tclassName=\"text-xs\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: member.departmentColor || \"#6b7280\",\n\t\t\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Building2 className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t{member.departmentName}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"text-muted-foreground mt-2 flex items-center gap-2 text-xs\">\n\t\t\t\t\t\t<User className=\"h-3 w-3\" />\n\t\t\t\t\t\t<span>Joined {member.joinedDate}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function TeamsKanban({ members }: { members: TeamMember[] }) {\n\treturn (\n\t\t<EntityKanban<TeamMember, TeamMemberStatus>\n\t\t\tcolumns={TEAM_COLUMNS}\n\t\t\tdata={members}\n\t\t\tentityName=\"members\"\n\t\t\tmapToKanbanItem={(member) => ({\n\t\t\t\tid: member.id,\n\t\t\t\tcolumnId: member.status,\n\t\t\t\tentity: member,\n\t\t\t\tmember,\n\t\t\t})}\n\t\t\trenderCard={(item) => (\n\t\t\t\t<MemberCard\n\t\t\t\t\titem={{ ...item, member: item.entity } as TeamsKanbanItem}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\trenderDragOverlay={(item) => (\n\t\t\t\t<div className=\"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg\">\n\t\t\t\t\t<MemberCard\n\t\t\t\t\t\titem={{ ...item, member: item.entity } as TeamsKanbanItem}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\tupdateEntityStatus={(member, newStatus) => ({\n\t\t\t\t...member,\n\t\t\t\tstatus: newStatus,\n\t\t\t})}\n\t\t/>\n\t);\n}\n","\"use client\";\n\n/**\n * TeamsTable Component\n * Full-width table for displaying team members using standard FullWidthDataTable\n *\n * Features:\n * - Consistent with all other work page tables\n * - Row selection with bulk actions\n * - Status and role badges\n * - Sortable columns\n * - Archive filtering with visual styling\n * - Archived items greyed out and hidden by default\n */\n\nimport { Archive, ArchiveRestore, Eye, Mail, Users, UserX } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n\tarchiveTeamMember,\n\trestoreTeamMember,\n\tsuspendTeamMember,\n} from \"@/actions/team\";\nimport {\n\tAlertDialog,\n\tAlertDialogAction,\n\tAlertDialogCancel,\n\tAlertDialogContent,\n\tAlertDialogDescription,\n\tAlertDialogFooter,\n\tAlertDialogHeader,\n\tAlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { ArchiveFilterSelect } from \"@/components/ui/archive-filter-select\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype BulkAction,\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport { RowActionsDropdown } from \"@/components/ui/row-actions-dropdown\";\nimport { useArchiveStore } from \"@/lib/stores/archive-store\";\nimport {\n\ttype ArchiveFilter,\n\tfilterByArchiveStatus,\n\tgetArchivedRowClassName,\n\tisItemArchived,\n} from \"@/lib/utils/archive\";\n\ntype UserStatus = \"active\" | \"invited\" | \"suspended\";\n\nexport type TeamMember = {\n\tid: string;\n\tname: string;\n\temail: string;\n\troleId: string;\n\troleName: string;\n\troleColor?: string;\n\tdepartmentId?: string;\n\tdepartmentName?: string;\n\tdepartmentColor?: string;\n\tstatus: UserStatus;\n\tavatar?: string;\n\tjobTitle?: string;\n\tphone?: string;\n\tjoinedDate: string;\n\tlastActive: string;\n\tarchived_at?: string | null;\n};\n\ntype TeamsTableProps = {\n\tteamMembers: TeamMember[];\n\titemsPerPage?: number;\n\ttotalCount?: number;\n\tcurrentPage?: number;\n\tinitialSearchQuery?: string;\n\tshowRefresh?: boolean;\n\tinitialArchiveFilter?: ArchiveFilter;\n};\n\nexport function TeamsTable({\n\tteamMembers,\n\titemsPerPage = 50,\n\ttotalCount,\n\tcurrentPage = 1,\n\tinitialSearchQuery = \"\",\n\tshowRefresh = false,\n\tinitialArchiveFilter = \"active\",\n}: TeamsTableProps) {\n\tconst router = useRouter();\n\tconst [_isLoading, setIsLoading] = useState(false);\n\tconst [isSuspendDialogOpen, setIsSuspendDialogOpen] = useState(false);\n\tconst [isArchiveDialogOpen, setIsArchiveDialogOpen] = useState(false);\n\tconst [itemToSuspend, setItemToSuspend] = useState<string | null>(null);\n\tconst [itemToArchive, setItemToArchive] = useState<string | null>(null);\n\n\t// Archive filter from store\n\tconst archiveFilter = useArchiveStore((state) => state.filters.team_members);\n\tconst setArchiveFilterStore = useArchiveStore((state) => state.setFilter);\n\tconst lastSyncedArchiveFilter = useRef<ArchiveFilter | null>(null);\n\n\tuseEffect(() => {\n\t\tif (!initialArchiveFilter) {\n\t\t\treturn;\n\t\t}\n\t\tif (lastSyncedArchiveFilter.current === initialArchiveFilter) {\n\t\t\treturn;\n\t\t}\n\t\tlastSyncedArchiveFilter.current = initialArchiveFilter;\n\t\tsetArchiveFilterStore(\"team_members\", initialArchiveFilter);\n\t}, [initialArchiveFilter, setArchiveFilterStore]);\n\n\t// Filter data based on archive status\n\tconst filteredTeamMembers = useMemo(\n\t\t() => filterByArchiveStatus(teamMembers, archiveFilter),\n\t\t[teamMembers, archiveFilter],\n\t);\n\n\tconst handleArchiveFilterChange = useCallback(\n\t\t(newFilter: ArchiveFilter) => {\n\t\t\tif (typeof window === \"undefined\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst params = new URLSearchParams(window.location.search);\n\t\t\tif (newFilter === \"active\") {\n\t\t\t\tparams.delete(\"filter\");\n\t\t\t} else {\n\t\t\t\tparams.set(\"filter\", newFilter);\n\t\t\t}\n\t\t\tparams.delete(\"page\");\n\t\t\tconst queryString = params.toString();\n\t\t\trouter.push(queryString ? `?${queryString}` : \"?\", { scroll: false });\n\t\t},\n\t\t[router],\n\t);\n\n\t// Calculate counts for filter dropdown\n\tconst activeCount = useMemo(\n\t\t() => teamMembers.filter((m) => !isItemArchived(m.archived_at)).length,\n\t\t[teamMembers],\n\t);\n\tconst archivedCount = useMemo(\n\t\t() => teamMembers.filter((m) => isItemArchived(m.archived_at)).length,\n\t\t[teamMembers],\n\t);\n\n\t// Helper functions\n\tconst getInitials = (name: string) =>\n\t\tname\n\t\t\t.split(\" \")\n\t\t\t.map((n) => n[0])\n\t\t\t.join(\"\")\n\t\t\t.toUpperCase();\n\n\tconst handleSuspendMember = async (memberId: string) => {\n\t\tsetIsLoading(true);\n\t\tconst result = await suspendTeamMember(memberId);\n\t\tsetIsLoading(false);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Team member suspended successfully\");\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to suspend team member\");\n\t\t}\n\t};\n\n\tconst handleArchiveMember = async (memberId: string) => {\n\t\tsetIsLoading(true);\n\t\tconst result = await archiveTeamMember(memberId);\n\t\tsetIsLoading(false);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Team member archived successfully\");\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to archive team member\");\n\t\t}\n\t};\n\n\tconst handleRestoreMember = async (memberId: string) => {\n\t\tsetIsLoading(true);\n\t\tconst result = await restoreTeamMember(memberId);\n\t\tsetIsLoading(false);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(\"Team member restored successfully\");\n\t\t\t// Server Action handles revalidation automatically\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to restore team member\");\n\t\t}\n\t};\n\n\tconst getStatusBadgeVariant = (\n\t\tstatus: UserStatus,\n\t): \"default\" | \"secondary\" | \"outline\" => {\n\t\tswitch (status) {\n\t\t\tcase \"active\":\n\t\t\t\treturn \"default\";\n\t\t\tcase \"invited\":\n\t\t\t\treturn \"secondary\";\n\t\t\tcase \"suspended\":\n\t\t\t\treturn \"outline\";\n\t\t}\n\t};\n\n\tconst getStatusLabel = (status: UserStatus): string => {\n\t\tswitch (status) {\n\t\t\tcase \"active\":\n\t\t\t\treturn \"Active\";\n\t\t\tcase \"invited\":\n\t\t\t\treturn \"Invited\";\n\t\t\tcase \"suspended\":\n\t\t\t\treturn \"Suspended\";\n\t\t}\n\t};\n\n\t// Define columns\n\tconst columns: ColumnDef<TeamMember>[] = [\n\t\t{\n\t\t\tkey: \"member\",\n\t\t\theader: \"Member\",\n\t\t\tsortable: true,\n\t\t\trender: (member) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"flex items-center gap-3\"\n\t\t\t\t\thref={`/dashboard/work/team/${member.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t<Avatar className=\"size-8\">\n\t\t\t\t\t\t<AvatarImage alt={member.name} src={member.avatar} />\n\t\t\t\t\t\t<AvatarFallback>{getInitials(member.name)}</AvatarFallback>\n\t\t\t\t\t</Avatar>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"text-sm leading-tight font-medium hover:underline\">\n\t\t\t\t\t\t\t{member.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"text-muted-foreground text-xs leading-tight\">\n\t\t\t\t\t\t\t{member.email}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t),\n\t\t\twidth: \"flex-1\",\n\t\t},\n\t\t{\n\t\t\tkey: \"role\",\n\t\t\theader: \"Role\",\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Role essential for team management\n\t\t\trender: (member) => (\n\t\t\t\t<Badge\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: member.roleColor || undefined,\n\t\t\t\t\t}}\n\t\t\t\t\tvariant={member.roleColor ? \"default\" : \"secondary\"}\n\t\t\t\t>\n\t\t\t\t\t{member.roleName}\n\t\t\t\t</Badge>\n\t\t\t),\n\t\t\twidth: \"w-32\",\n\t\t\thideOnMobile: true,\n\t\t},\n\t\t{\n\t\t\tkey: \"department\",\n\t\t\theader: \"Department\",\n\t\t\tsortable: true,\n\t\t\thideable: true,\n\t\t\trender: (member) => {\n\t\t\t\tif (!member.departmentName) {\n\t\t\t\t\treturn <span className=\"text-muted-foreground\">—</span>;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundColor: member.departmentColor || undefined,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvariant={member.departmentColor ? \"default\" : \"outline\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t{member.departmentName}\n\t\t\t\t\t</Badge>\n\t\t\t\t);\n\t\t\t},\n\t\t\twidth: \"w-32\",\n\t\t\thideOnMobile: true,\n\t\t},\n\t\t{\n\t\t\tkey: \"jobTitle\",\n\t\t\theader: \"Job Title\",\n\t\t\tsortable: true,\n\t\t\thideable: true,\n\t\t\trender: (member) =>\n\t\t\t\tmember.jobTitle || <span className=\"text-muted-foreground\">—</span>,\n\t\t\twidth: \"w-40\",\n\t\t\thideOnMobile: true,\n\t\t},\n\t\t{\n\t\t\tkey: \"status\",\n\t\t\theader: \"Status\",\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Status essential for team management\n\t\t\trender: (member) => {\n\t\t\t\tconst isArchived = isItemArchived(member.archived_at);\n\n\t\t\t\tif (isArchived) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t\t\t\t<Badge className=\"border-warning text-warning\" variant=\"outline\">\n\t\t\t\t\t\t\t\tArchived\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tclassName=\"text-xs\"\n\t\t\t\t\t\t\t\tvariant={getStatusBadgeVariant(member.status)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{getStatusLabel(member.status)}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<Badge variant={getStatusBadgeVariant(member.status)}>\n\t\t\t\t\t\t{getStatusLabel(member.status)}\n\t\t\t\t\t</Badge>\n\t\t\t\t);\n\t\t\t},\n\t\t\twidth: \"w-28\",\n\t\t},\n\t\t{\n\t\t\tkey: \"lastActive\",\n\t\t\theader: \"Last Active\",\n\t\t\thideable: true,\n\t\t\trender: (member) => (\n\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t{member.lastActive}\n\t\t\t\t</span>\n\t\t\t),\n\t\t\twidth: \"w-32\",\n\t\t\thideOnMobile: true,\n\t\t},\n\t\t{\n\t\t\tkey: \"actions\",\n\t\t\theader: \"\",\n\t\t\trender: (member) => {\n\t\t\t\tconst isArchived = isItemArchived(member.archived_at);\n\n\t\t\t\treturn (\n\t\t\t\t\t<RowActionsDropdown\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"View Details\",\n\t\t\t\t\t\t\t\ticon: Eye,\n\t\t\t\t\t\t\t\thref: `/dashboard/work/team/${member.id}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...(isArchived\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"Restore\",\n\t\t\t\t\t\t\t\t\t\t\ticon: ArchiveRestore,\n\t\t\t\t\t\t\t\t\t\t\tvariant: \"default\" as const,\n\t\t\t\t\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => handleRestoreMember(member.id),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"Send Email\",\n\t\t\t\t\t\t\t\t\t\t\ticon: Mail,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = `mailto:${member.email}`;\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"Suspend\",\n\t\t\t\t\t\t\t\t\t\t\ticon: UserX,\n\t\t\t\t\t\t\t\t\t\t\tvariant: \"destructive\" as const,\n\t\t\t\t\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetItemToSuspend(member.id);\n\t\t\t\t\t\t\t\t\t\t\t\tsetIsSuspendDialogOpen(true);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"Archive\",\n\t\t\t\t\t\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\t\t\t\t\t\tvariant: \"destructive\" as const,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetItemToArchive(member.id);\n\t\t\t\t\t\t\t\t\t\t\t\tsetIsArchiveDialogOpen(true);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t},\n\t\t\twidth: \"w-12\",\n\t\t\tshrink: true,\n\t\t},\n\t];\n\n\t// Define bulk actions based on archive filter\n\tconst bulkActions: BulkAction[] = useMemo(() => {\n\t\tconst isViewingArchived = archiveFilter === \"archived\";\n\n\t\tif (isViewingArchived) {\n\t\t\t// Only show restore for archived items\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Restore\",\n\t\t\t\t\ticon: <ArchiveRestore className=\"size-4\" />,\n\t\t\t\t\tvariant: \"default\",\n\t\t\t\t\tonClick: async (selectedIds) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!confirm(\n\t\t\t\t\t\t\t\t`Are you sure you want to restore ${selectedIds.size} team member(s)?`,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\t\tlet successCount = 0;\n\t\t\t\t\t\tlet failCount = 0;\n\n\t\t\t\t\t\tfor (const memberId of selectedIds) {\n\t\t\t\t\t\t\tconst result = await restoreTeamMember(memberId);\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\tsuccessCount++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfailCount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetIsLoading(false);\n\n\t\t\t\t\t\tif (successCount > 0) {\n\t\t\t\t\t\t\ttoast.success(\n\t\t\t\t\t\t\t\t`${successCount} team member(s) restored successfully`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (failCount > 0) {\n\t\t\t\t\t\t\ttoast.error(`Failed to restore ${failCount} team member(s)`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\t// Default actions for active items\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: \"Send Email\",\n\t\t\t\ticon: <Mail className=\"size-4\" />,\n\t\t\t\tvariant: \"default\",\n\t\t\t\tonClick: (selectedIds) => {\n\t\t\t\t\tconst selectedMembers = filteredTeamMembers.filter((m) =>\n\t\t\t\t\t\tselectedIds.has(m.id),\n\t\t\t\t\t);\n\t\t\t\t\tconst emails = selectedMembers.map((m) => m.email).join(\",\");\n\t\t\t\t\twindow.location.href = `mailto:${emails}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Suspend\",\n\t\t\t\ticon: <UserX className=\"size-4\" />,\n\t\t\t\tvariant: \"destructive\",\n\t\t\t\tonClick: async (selectedIds) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!confirm(\n\t\t\t\t\t\t\t`Are you sure you want to suspend ${selectedIds.size} team member(s)?`,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\tlet successCount = 0;\n\t\t\t\t\tlet failCount = 0;\n\n\t\t\t\t\tfor (const memberId of selectedIds) {\n\t\t\t\t\t\tconst result = await suspendTeamMember(memberId);\n\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\tsuccessCount++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfailCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsetIsLoading(false);\n\n\t\t\t\t\tif (successCount > 0) {\n\t\t\t\t\t\ttoast.success(\n\t\t\t\t\t\t\t`${successCount} team member(s) suspended successfully`,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (failCount > 0) {\n\t\t\t\t\t\ttoast.error(`Failed to suspend ${failCount} team member(s)`);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Archive\",\n\t\t\t\ticon: <Archive className=\"size-4\" />,\n\t\t\t\tvariant: \"destructive\",\n\t\t\t\tonClick: async (selectedIds) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!confirm(\n\t\t\t\t\t\t\t`Are you sure you want to archive ${selectedIds.size} team member(s)?`,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\tlet successCount = 0;\n\t\t\t\t\tlet failCount = 0;\n\n\t\t\t\t\tfor (const memberId of selectedIds) {\n\t\t\t\t\t\tconst result = await archiveTeamMember(memberId);\n\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\tsuccessCount++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfailCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsetIsLoading(false);\n\n\t\t\t\t\tif (successCount > 0) {\n\t\t\t\t\t\ttoast.success(\n\t\t\t\t\t\t\t`${successCount} team member(s) archived successfully`,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (failCount > 0) {\n\t\t\t\t\t\ttoast.error(`Failed to archive ${failCount} team member(s)`);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t}, [archiveFilter, filteredTeamMembers, router]);\n\n\tconst handleInviteMember = () => {\n\t\twindow.location.href = \"/dashboard/work/team/invite\";\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FullWidthDataTable\n\t\t\t\tbulkActions={bulkActions}\n\t\t\t\tcolumns={columns}\n\t\t\t\tcurrentPageFromServer={currentPage}\n\t\t\t\tdata={filteredTeamMembers}\n\t\t\t\temptyAction={\n\t\t\t\t\t<Button onClick={handleInviteMember} size=\"sm\">\n\t\t\t\t\t\tInvite Team Member\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\temptyIcon={<Users className=\"text-muted-foreground size-8\" />}\n\t\t\t\temptyMessage={\n\t\t\t\t\tarchiveFilter === \"archived\"\n\t\t\t\t\t\t? \"No archived team members\"\n\t\t\t\t\t\t: \"No team members yet\"\n\t\t\t\t}\n\t\t\t\tenableSelection={true}\n\t\t\t\tgetItemId={(member) => member.id}\n\t\t\t\tgetRowClassName={(member) =>\n\t\t\t\t\tgetArchivedRowClassName(isItemArchived(member.archived_at))\n\t\t\t\t}\n\t\t\t\tinitialSearchQuery={initialSearchQuery}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\tserverPagination\n\t\t\t\tonRefresh={() => router.refresh()}\n\t\t\t\tonRowClick={(member) => {\n\t\t\t\t\twindow.location.href = `/dashboard/work/team/${member.id}`;\n\t\t\t\t}}\n\t\t\t\tsearchPlaceholder=\"Search by name, email, role, or department...\"\n\t\t\t\tserverSearch\n\t\t\t\tsearchParamKey=\"search\"\n\t\t\t\tshowArchived={archiveFilter !== \"active\"}\n\t\t\t\tshowRefresh={showRefresh}\n\t\t\t\ttotalCount={totalCount ?? filteredTeamMembers.length}\n\t\t\t\ttoolbarActions={\n\t\t\t\t\t<ArchiveFilterSelect\n\t\t\t\t\t\tactiveCount={activeCount}\n\t\t\t\t\t\tarchivedCount={archivedCount}\n\t\t\t\t\t\tentity=\"team_members\"\n\t\t\t\t\t\tonFilterChange={handleArchiveFilterChange}\n\t\t\t\t\t\ttotalCount={teamMembers.length}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t{/* Suspend Single Member Dialog */}\n\t\t\t<AlertDialog\n\t\t\t\tonOpenChange={setIsSuspendDialogOpen}\n\t\t\t\topen={isSuspendDialogOpen}\n\t\t\t>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>Suspend Team Member?</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis team member will be suspended and will not be able to access\n\t\t\t\t\t\t\tthe system until reactivated.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tif (itemToSuspend) {\n\t\t\t\t\t\t\t\t\tawait handleSuspendMember(itemToSuspend);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSuspend\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\n\t\t\t{/* Archive Single Member Dialog */}\n\t\t\t<AlertDialog\n\t\t\t\tonOpenChange={setIsArchiveDialogOpen}\n\t\t\t\topen={isArchiveDialogOpen}\n\t\t\t>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>Archive Team Member?</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis team member will be archived and can be restored later.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tif (itemToArchive) {\n\t\t\t\t\t\t\t\t\tawait handleArchiveMember(itemToArchive);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}