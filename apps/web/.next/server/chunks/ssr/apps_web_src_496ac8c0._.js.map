{"version":3,"sources":["../../../../../../apps/web/src/actions/settings/index.ts","../../../../../../apps/web/src/components/settings/po-system-toggle.tsx","../../../../../../apps/web/src/actions/settings/data%3A9185dd%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/settings/settings-search.tsx","../../../../../../apps/web/src/components/settings/settings-quick-actions.tsx"],"sourcesContent":["/**\n * Settings Actions Index\n *\n * Central export point for all settings-related server actions\n */\n\n// Communications Settings\nexport {\n\t\n\t\n\tgetPhoneSettings,\n\tgetSmsSettings,\n\t\n\t\n\tupdatePhoneSettings,\n\tupdateSmsSettings,\n} from \"./communications\";\n\n// Customer Settings\n;\n// Finance Settings\nexport {\n\t\n\t\n\tgetAccountingSettings,\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\tupdateAccountingSettings,\n\t\n\t\n\t\n\t\n\t\n\t\n} from \"./finance\";\n// Misc Settings (Tags, Checklists, Lead Sources, Import/Export)\n;\n// Payroll Settings\n;\n// Procurement / Feature Toggles\nexport { togglePurchaseOrderSystem } from \"./procurement\";\n// Profile/User Settings\n;\n// Schedule Settings\n;\n// Work Settings\n;\n","\"use client\";\n\nimport { formatDistanceToNow } from \"date-fns\";\nimport { Package } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport { togglePurchaseOrderSystem } from \"@/actions/settings\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { trackCustomEvent } from \"@/lib/analytics/client\";\n\ntype POSystemToggleProps = {\n\tenabled: boolean;\n\tlastEnabledAt?: string | null;\n};\n\nexport function POSystemToggle({\n\tenabled,\n\tlastEnabledAt,\n}: POSystemToggleProps) {\n\tconst [isEnabled, setIsEnabled] = useState(enabled);\n\tconst [isPending, startTransition] = useTransition();\n\n\tconst handleToggle = (nextValue: boolean) => {\n\t\tsetIsEnabled(nextValue);\n\t\tstartTransition(async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await togglePurchaseOrderSystem(nextValue);\n\t\t\t\tsetIsEnabled(result.enabled);\n\t\t\t\ttrackCustomEvent(\"settings.po_system_toggle\", {\n\t\t\t\t\tenabled: result.enabled,\n\t\t\t\t});\n\t\t\t\ttoast.success(\n\t\t\t\t\tresult.enabled\n\t\t\t\t\t\t? \"Purchase orders enabled\"\n\t\t\t\t\t\t: \"Purchase orders disabled\",\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tsetIsEnabled(!nextValue);\n\t\t\t\tconst message =\n\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t: \"Unable to update purchase orders\";\n\t\t\t\ttoast.error(message);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst lastUpdatedLabel = lastEnabledAt\n\t\t? formatDistanceToNow(new Date(lastEnabledAt), { addSuffix: true })\n\t\t: \"Never enabled\";\n\n\treturn (\n\t\t<Card className=\"border-dashed\">\n\t\t\t<CardHeader>\n\t\t\t\t<div className=\"flex flex-wrap items-center justify-between gap-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<div className=\"bg-muted flex size-10 items-center justify-center rounded-lg\">\n\t\t\t\t\t\t\t<Package className=\"size-5\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle className=\"text-base\">Purchase Order System</CardTitle>\n\t\t\t\t\t\t\t<CardDescription className=\"text-sm\">\n\t\t\t\t\t\t\t\tSync vendor POs with finance + inventory in one step\n\t\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t{isEnabled ? \"Enabled\" : \"Disabled\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={isEnabled}\n\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t\tonCheckedChange={handleToggle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<CardContent className=\"flex flex-wrap items-center justify-between gap-4 pt-0\">\n\t\t\t\t<div className=\"text-muted-foreground text-sm\">\n\t\t\t\t\tLast changed: <span className=\"font-medium\">{lastUpdatedLabel}</span>\n\t\t\t\t</div>\n\t\t\t\t{isEnabled && (\n\t\t\t\t\t<Button asChild disabled={isPending} variant=\"outline\">\n\t\t\t\t\t\t<Link href=\"/dashboard/work/purchase-orders\">\n\t\t\t\t\t\t\tManage purchase orders\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4067b6669c7c325c51f280de40c6216de747c34554\":\"togglePurchaseOrderSystem\"},\"apps/web/src/actions/settings/procurement.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var togglePurchaseOrderSystem=/*#__PURE__*/createServerReference(\"4067b6669c7c325c51f280de40c6216de747c34554\",callServer,void 0,findSourceMapURL,\"togglePurchaseOrderSystem\");","\"use client\";\n\n/**\n * Settings Search - Client Component Island\n *\n * Small client component for search functionality.\n * Extracted from settings page to allow main page to be server component.\n *\n * Performance:\n * - Only ~2KB of client-side JavaScript\n * - Uses URL params for search state (shareable URLs)\n * - Main page can be server component\n */\n\nimport { Search } from \"lucide-react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { Input } from \"@/components/ui/input\";\n\nexport function SettingsSearch() {\n\tconst router = useRouter();\n\tconst searchParams = useSearchParams();\n\tconst currentSearch = searchParams?.get(\"q\") || \"\";\n\n\tconst handleSearchChange = (value: string) => {\n\t\tconst params = new URLSearchParams(searchParams?.toString());\n\t\tif (value) {\n\t\t\tparams.set(\"q\", value);\n\t\t} else {\n\t\t\tparams.delete(\"q\");\n\t\t}\n\t\trouter.push(`/dashboard/settings?${params.toString()}`);\n\t};\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<Search className=\"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2\" />\n\t\t\t<Input\n\t\t\t\tclassName=\"pl-9\"\n\t\t\t\tonChange={(e) => handleSearchChange(e.target.value)}\n\t\t\t\tplaceholder=\"Search settings...\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tvalue={currentSearch}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { buttonVariants } from \"@/components/ui/button\";\nimport { trackCustomEvent } from \"@/lib/analytics/client\";\nimport type { SettingsQuickAction } from \"@/lib/settings/overview-data\";\nimport { cn } from \"@/lib/utils\";\n\ntype SettingsQuickActionsProps = {\n\tactions: SettingsQuickAction[];\n\tsection: string;\n};\n\nexport function SettingsQuickActions({\n\tactions,\n\tsection,\n}: SettingsQuickActionsProps) {\n\tif (!actions.length) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t{actions.map((action) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\tbuttonVariants({\n\t\t\t\t\t\t\tvariant: action.variant ?? \"default\",\n\t\t\t\t\t\t\tsize: \"sm\",\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t\"group justify-between\",\n\t\t\t\t\t)}\n\t\t\t\t\thref={action.href}\n\t\t\t\t\tkey={action.key}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\ttrackCustomEvent(\"settings.quick_action\", {\n\t\t\t\t\t\t\taction: action.analyticsEvent ?? action.key,\n\t\t\t\t\t\t\tsection,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{action.label}\n\t\t\t\t\t<span className=\"text-muted-foreground ml-2 transition-transform group-hover:translate-x-0.5\">\n\t\t\t\t\t\tâ†—\n\t\t\t\t\t</span>\n\t\t\t\t</Link>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}