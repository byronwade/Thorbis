module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},468729,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx <module evaluation>","WorkDataView");a.s(["WorkDataView",0,b])},750692,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx","WorkDataView");a.s(["WorkDataView",0,b])},310669,a=>{"use strict";a.i(468729);var b=a.i(750692);a.n(b)},182597,a=>{a.n(a.i(545317))},285555,a=>{a.n(a.i(41484))},196428,a=>{"use strict";var b=a.i(429969);a.i(467361);var c=a.i(445074),d=a.i(933427);let e=`
  id,
  estimate_number,
  title,
  status,
  total_amount,
  created_at,
  valid_until,
  archived_at,
  deleted_at,
  customers!estimates_customer_id_customers_id_fk (
    display_name,
    first_name,
    last_name
  )
`;async function f(a,b=50){let g=await (0,c.getActiveCompanyId)();if(!g)return{estimates:[],totalCount:0};let h=await (0,d.createServiceSupabaseClient)();if(!h)throw Error("Supabase client not configured");let i=(Math.max(a,1)-1)*b,{data:j,error:k,count:l}=await h.from("estimates").select(e,{count:"exact"}).eq("company_id",g).order("created_at",{ascending:!1}).range(i,i+b-1);if(k)throw Error(`Failed to load estimates: ${k.message}`);return{estimates:j??[],totalCount:l??0}}let g=(0,b.cache)(async(a,b)=>{let c=await (0,d.createServiceSupabaseClient)();if(!c)throw Error("Supabase client not configured");let{data:e,error:f}=await c.rpc("get_estimate_complete",{p_estimate_id:a,p_company_id:b});return f?(console.error("Error fetching estimate:",f),null):e?.[0]?.estimate_data||null});a.s(["ESTIMATES_PAGE_SIZE",0,50,"getEstimateComplete",0,g,"getEstimatesPageData",()=>f])},999711,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EstimatesKanban() from the server but EstimatesKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/estimates-kanban.tsx <module evaluation>","EstimatesKanban");a.s(["EstimatesKanban",0,b])},820527,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EstimatesKanban() from the server but EstimatesKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/estimates-kanban.tsx","EstimatesKanban");a.s(["EstimatesKanban",0,b])},486624,a=>{"use strict";a.i(999711);var b=a.i(820527);a.n(b)},654463,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EstimatesTable() from the server but EstimatesTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/estimates-table.tsx <module evaluation>","EstimatesTable");a.s(["EstimatesTable",0,b])},172331,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call EstimatesTable() from the server but EstimatesTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/estimates-table.tsx","EstimatesTable");a.s(["EstimatesTable",0,b])},429272,a=>{"use strict";a.i(654463);var b=a.i(172331);a.n(b)},176172,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(486624),f=a.i(429272),g=a.i(310669);a.i(467361);var h=a.i(445074),i=a.i(196428);async function j({searchParams:a}){if(!await (0,h.getActiveCompanyId)())return(0,d.notFound)();let c=Number(a?.page)||1,{estimates:j,totalCount:k}=await (0,i.getEstimatesPageData)(c,i.ESTIMATES_PAGE_SIZE);if(!j)return(0,d.notFound)();let l=j.map(a=>{let b=Array.isArray(a.customers)?a.customers[0]:a.customers;return{id:a.id,estimateNumber:a.estimate_number,customer:b?.display_name||`${b?.first_name||""} ${b?.last_name||""}`.trim()||"Unknown Customer",project:a.title,date:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),validUntil:a.valid_until?new Date(a.valid_until).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",amount:a.total_amount||0,status:a.status,archived_at:a.archived_at,deleted_at:a.deleted_at}});return(0,b.jsx)(g.WorkDataView,{kanban:(0,b.jsx)(e.EstimatesKanban,{estimates:l}),section:"estimates",table:(0,b.jsx)(f.EstimatesTable,{estimates:l,itemsPerPage:i.ESTIMATES_PAGE_SIZE,totalCount:k,currentPage:c})})}a.i(250202);var k=a.i(709027);function l(){return(0,b.jsx)(k.DataTableListSkeleton,{})}async function m({searchParams:a}){let d=await a;return(0,b.jsx)("div",{className:"flex h-full flex-col",children:(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(l,{}),children:(0,b.jsx)(j,{searchParams:d})})})})}a.s(["default",()=>m],176172)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__eb6a40c4._.js.map