module.exports=[311487,a=>{"use strict";async function b(a,b,c,d){let{data:e,error:f}=await a.rpc("has_role",{user_uuid:b,required_role:c,company_uuid:d});return!f&&!0===e}async function c(a,b,c){let{data:d,error:e}=await a.rpc("get_user_role",{user_uuid:b,company_uuid:c});return e?null:d}async function d(a,b,c,d){let{data:e,error:f}=await a.rpc("has_permission",{user_uuid:b,permission_key:c,company_uuid:d});return!f&&!0===e}async function e(a,b,c){let{data:d,error:e}=await a.rpc("is_company_owner",{user_uuid:b,company_uuid:c});return!e&&!0===d}a.s(["getUserRole",()=>c,"hasPermission",()=>d,"hasRole",()=>b,"isCompanyOwner",()=>e])},997053,a=>{"use strict";a.i(311487),a.s([])},288344,a=>{"use strict";var b=a.i(780195);a.i(218188);var c=a.i(146057);a.i(467361);var d=a.i(445074);a.i(997053);var e=a.i(311487),f=a.i(974406),g=a.i(136874),h=a.i(395731);async function i(){return(0,f.withErrorHandling)(async()=>{let a=await (0,g.createClient)();if(!a)throw Error("Database connection not available");let{data:{user:b}}=await a.auth.getUser();if(!b)throw Error("Not authenticated");let c=await (0,d.getActiveCompanyId)();if(!c)throw Error("No active company");return await (0,e.getUserRole)(a,b.id,c)})}async function j(a){return(0,f.withErrorHandling)(async()=>{let b=await (0,g.createClient)();if(!b)throw Error("Database connection not available");let c=await (0,d.getActiveCompanyId)();if(!c)throw Error("No active company");let{data:e,error:f}=await b.from("company_memberships").select("user_id, role").eq("id",a).eq("company_id",c).single();if(f||!e)throw Error("Team member not found");let{data:h}=await b.from("companies").select("owner_id").eq("id",c).single();return h&&h.owner_id===e.user_id?{canDelete:!1,reason:"Cannot delete company owner. Transfer ownership first before removing this team member."}:{canDelete:!0}})}c.z.object({teamMemberId:c.z.string().uuid(),newRole:c.z.enum(["owner","admin","manager","dispatcher","technician","csr"]),reason:c.z.string().optional()}),c.z.object({teamMemberId:c.z.string().uuid(),permissions:c.z.record(c.z.string(),c.z.boolean())}),(0,h.ensureServerEntryExports)([i,j]),(0,b.registerServerReference)(i,"001f005176797ef23488068124fb9a744915a477de",null),(0,b.registerServerReference)(j,"406f6624261c6dd1a908026fa1408a3f6d507b6e7d",null),a.s(["canDeleteTeamMember",()=>j,"getCurrentUserRole",()=>i])},254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},93077,a=>{"use strict";var b=a.i(288344),c=a.i(336176);a.s([],262892),a.i(262892),a.s(["001f005176797ef23488068124fb9a744915a477de",()=>b.getCurrentUserRole,"406f6624261c6dd1a908026fa1408a3f6d507b6e7d",()=>b.canDeleteTeamMember,"40d050abdabe2ee7293436c505c5f27b4408a2f27c",()=>c.sendTextMessage],93077)},858982,a=>{a.v(a=>Promise.resolve().then(()=>a(857782)))},44464,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_telnyx_messaging-profile-fetcher_ts_96489c1c._.js"].map(b=>a.l(b))).then(()=>b(124096)))},115593,a=>{a.v(a=>Promise.resolve().then(()=>a(111732)))},408788,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_assemblyai_client_ts_839fcaee._.js"].map(b=>a.l(b))).then(()=>b(703513)))},37652,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_auth_company-context_ts_732d588b._.js"].map(b=>a.l(b))).then(()=>b(480513)))},141196,a=>{a.v(b=>Promise.all(["server/chunks/ssr/_2dbcdf27._.js","server/chunks/ssr/apps_web_1975324d._.js","server/chunks/ssr/[root-of-the-server]__582fec95._.js","server/chunks/ssr/_77268b50._.js","server/chunks/ssr/apps_web_src_lib_email_388c15fd._.js","server/chunks/ssr/node_modules__pnpm_f300cd57._.js","server/chunks/ssr/node_modules__pnpm_f6ce1303._.js"].map(b=>a.l(b))).then(()=>b(970552)))},877662,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__19a3dae2._.js"].map(b=>a.l(b))).then(()=>b(546081)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__46e55298._.js.map