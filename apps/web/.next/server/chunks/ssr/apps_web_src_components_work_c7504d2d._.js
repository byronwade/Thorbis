module.exports=[971753,a=>{"use strict";var b=a.i(861467),c=a.i(565308),d=a.i(263758),e=a.i(352424),f=a.i(320091),g=a.i(145679);a.i(516775);var h=a.i(560272);a.i(288007);var i=a.i(986990);a.i(445255);var j=a.i(18170),k=a.i(425809);let l=[{id:"active",name:"Active",accentColor:"#22C55E"},{id:"invited",name:"Invited",accentColor:"#F59E0B"},{id:"suspended",name:"Suspended",accentColor:"#EF4444"}];function m({item:a}){let{member:k}=a;return(0,b.jsx)("div",{className:"border-border/70 bg-background rounded-xl border p-4 shadow-sm transition-shadow hover:shadow-md",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)(h.Avatar,{className:"h-10 w-10",children:[(0,b.jsx)(h.AvatarImage,{src:k.avatar}),(0,b.jsx)(h.AvatarFallback,{className:"text-xs",children:k.name.split(" ").map(a=>a[0]).join("").toUpperCase()})]}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"truncate text-sm font-medium",children:k.name}),(0,b.jsx)("p",{className:"text-muted-foreground truncate text-xs",children:k.email})]}),(0,b.jsx)(g.default,{href:`/dashboard/work/team/${k.id}`,children:(0,b.jsxs)(j.Button,{className:"h-6 w-6",size:"icon",type:"button",variant:"ghost",children:[(0,b.jsx)(c.ArrowUpRight,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"sr-only",children:"View member"})]})})]}),k.jobTitle&&(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:k.jobTitle}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[k.roleName&&(0,b.jsxs)(i.Badge,{className:"text-xs",style:{backgroundColor:k.roleColor||"#6b7280",color:"white"},variant:"secondary",children:[(0,b.jsx)(e.Shield,{className:"mr-1 h-3 w-3"}),k.roleName]}),k.departmentName&&(0,b.jsxs)(i.Badge,{className:"text-xs",style:{backgroundColor:k.departmentColor||"#6b7280",color:"white"},variant:"outline",children:[(0,b.jsx)(d.Building2,{className:"mr-1 h-3 w-3"}),k.departmentName]})]}),(0,b.jsxs)("div",{className:"text-muted-foreground mt-2 flex items-center gap-2 text-xs",children:[(0,b.jsx)(f.User,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Joined ",k.joinedDate]})]})]})]})})}function n({members:a}){return(0,b.jsx)(k.EntityKanban,{columns:l,data:a,entityName:"members",mapToKanbanItem:a=>({id:a.id,columnId:a.status,entity:a,member:a}),renderCard:a=>(0,b.jsx)(m,{item:{...a,member:a.entity}}),renderDragOverlay:a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,b.jsx)(m,{item:{...a,member:a.entity}})}),updateEntityStatus:(a,b)=>({...a,status:b})})}l.map(a=>[a.id,a.name]),a.s(["TeamsKanban",()=>n])},536174,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(805044),d=d,e=a.i(854729),f=a.i(789815),g=a.i(101482),h=a.i(860442),i=a.i(145679),j=a.i(337241),k=a.i(783281),l=a.i(156916),m=a.i(449446),n=a.i(660308),o=a.i(181512);a.i(400355);var p=a.i(694340),q=a.i(40980);a.i(516775);var r=a.i(560272);a.i(288007);var s=a.i(986990);a.i(445255);var t=a.i(18170),u=a.i(380340);a.i(696137);var v=a.i(736096),w=a.i(563432),x=a.i(924047);function y({teamMembers:a,itemsPerPage:y=50,totalCount:z,currentPage:A=1,initialSearchQuery:B="",showRefresh:C=!1,initialArchiveFilter:D="active"}){let E=(0,j.useRouter)(),[F,G]=(0,k.useState)(!1),[H,I]=(0,k.useState)(!1),[J,K]=(0,k.useState)(!1),[L,M]=(0,k.useState)(null),[N,O]=(0,k.useState)(null),P=(0,w.useArchiveStore)(a=>a.filters.team_members),Q=(0,w.useArchiveStore)(a=>a.setFilter),R=(0,k.useRef)(null);(0,k.useEffect)(()=>{D&&R.current!==D&&(R.current=D,Q("team_members",D))},[D,Q]);let S=(0,k.useMemo)(()=>(0,x.filterByArchiveStatus)(a,P),[a,P]),T=(0,k.useCallback)(a=>{},[E]),U=(0,k.useMemo)(()=>a.filter(a=>!(0,x.isItemArchived)(a.archived_at)).length,[a]),V=(0,k.useMemo)(()=>a.filter(a=>(0,x.isItemArchived)(a.archived_at)).length,[a]),W=async a=>{G(!0);let b=await (0,o.suspendTeamMember)(a);G(!1),b.success?l.toast.success("Team member suspended successfully"):l.toast.error(b.error||"Failed to suspend team member")},X=async a=>{G(!0);let b=await (0,m.archiveTeamMember)(a);G(!1),b.success?l.toast.success("Team member archived successfully"):l.toast.error(b.error||"Failed to archive team member")},Y=async a=>{G(!0);let b=await (0,n.restoreTeamMember)(a);G(!1),b.success?l.toast.success("Team member restored successfully"):l.toast.error(b.error||"Failed to restore team member")},Z=a=>{switch(a){case"active":return"default";case"invited":return"secondary";case"suspended":return"outline"}},$=a=>{switch(a){case"active":return"Active";case"invited":return"Invited";case"suspended":return"Suspended"}},_=[{key:"member",header:"Member",sortable:!0,render:a=>(0,b.jsxs)(i.default,{className:"flex items-center gap-3",href:`/dashboard/work/team/${a.id}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)(r.Avatar,{className:"size-8",children:[(0,b.jsx)(r.AvatarImage,{alt:a.name,src:a.avatar}),(0,b.jsx)(r.AvatarFallback,{children:a.name.split(" ").map(a=>a[0]).join("").toUpperCase()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm leading-tight font-medium hover:underline",children:a.name}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs leading-tight",children:a.email})]})]}),width:"flex-1"},{key:"role",header:"Role",sortable:!0,hideable:!1,render:a=>(0,b.jsx)(s.Badge,{style:{backgroundColor:a.roleColor||void 0},variant:a.roleColor?"default":"secondary",children:a.roleName}),width:"w-32",hideOnMobile:!0},{key:"department",header:"Department",sortable:!0,hideable:!0,render:a=>a.departmentName?(0,b.jsx)(s.Badge,{style:{backgroundColor:a.departmentColor||void 0},variant:a.departmentColor?"default":"outline",children:a.departmentName}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"}),width:"w-32",hideOnMobile:!0},{key:"jobTitle",header:"Job Title",sortable:!0,hideable:!0,render:a=>a.jobTitle||(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"}),width:"w-40",hideOnMobile:!0},{key:"status",header:"Status",sortable:!0,hideable:!1,render:a=>(0,x.isItemArchived)(a.archived_at)?(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(s.Badge,{className:"border-warning text-warning",variant:"outline",children:"Archived"}),(0,b.jsx)(s.Badge,{className:"text-xs",variant:Z(a.status),children:$(a.status)})]}):(0,b.jsx)(s.Badge,{variant:Z(a.status),children:$(a.status)}),width:"w-28"},{key:"lastActive",header:"Last Active",hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:a.lastActive}),width:"w-32",hideOnMobile:!0},{key:"actions",header:"",render:a=>{let g=(0,x.isItemArchived)(a.archived_at);return(0,b.jsx)(v.RowActionsDropdown,{actions:[{label:"View Details",icon:e.Eye,href:`/dashboard/work/team/${a.id}`},...g?[{label:"Restore",icon:d.default,variant:"default",separatorBefore:!0,onClick:()=>Y(a.id)}]:[{label:"Send Email",icon:f.Mail,onClick:()=>{window.location.href=`mailto:${a.email}`}},{label:"Suspend",icon:h.UserX,variant:"destructive",separatorBefore:!0,onClick:()=>{M(a.id),I(!0)}},{label:"Archive",icon:c.Archive,variant:"destructive",onClick:()=>{O(a.id),K(!0)}}]]})},width:"w-12",shrink:!0}],aa=(0,k.useMemo)(()=>"archived"===P?[{label:"Restore",icon:(0,b.jsx)(d.default,{className:"size-4"}),variant:"default",onClick:async a=>{if(!confirm(`Are you sure you want to restore ${a.size} team member(s)?`))return;G(!0);let b=0,c=0;for(let d of a)(await (0,n.restoreTeamMember)(d)).success?b++:c++;G(!1),b>0&&l.toast.success(`${b} team member(s) restored successfully`),c>0&&l.toast.error(`Failed to restore ${c} team member(s)`)}}]:[{label:"Send Email",icon:(0,b.jsx)(f.Mail,{className:"size-4"}),variant:"default",onClick:a=>{let b=S.filter(b=>a.has(b.id)).map(a=>a.email).join(",");window.location.href=`mailto:${b}`}},{label:"Suspend",icon:(0,b.jsx)(h.UserX,{className:"size-4"}),variant:"destructive",onClick:async a=>{if(!confirm(`Are you sure you want to suspend ${a.size} team member(s)?`))return;G(!0);let b=0,c=0;for(let d of a)(await (0,o.suspendTeamMember)(d)).success?b++:c++;G(!1),b>0&&l.toast.success(`${b} team member(s) suspended successfully`),c>0&&l.toast.error(`Failed to suspend ${c} team member(s)`)}},{label:"Archive",icon:(0,b.jsx)(c.Archive,{className:"size-4"}),variant:"destructive",onClick:async a=>{if(!confirm(`Are you sure you want to archive ${a.size} team member(s)?`))return;G(!0);let b=0,c=0;for(let d of a)(await (0,m.archiveTeamMember)(d)).success?b++:c++;G(!1),b>0&&l.toast.success(`${b} team member(s) archived successfully`),c>0&&l.toast.error(`Failed to archive ${c} team member(s)`)}}],[P,S,E]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.FullWidthDataTable,{bulkActions:aa,columns:_,currentPageFromServer:A,data:S,emptyAction:(0,b.jsx)(t.Button,{onClick:()=>{window.location.href="/dashboard/work/team/invite"},size:"sm",children:"Invite Team Member"}),emptyIcon:(0,b.jsx)(g.Users,{className:"text-muted-foreground size-8"}),emptyMessage:"archived"===P?"No archived team members":"No team members yet",enableSelection:!0,getItemId:a=>a.id,getRowClassName:a=>(0,x.getArchivedRowClassName)((0,x.isItemArchived)(a.archived_at)),initialSearchQuery:B,itemsPerPage:y,serverPagination:!0,onRefresh:()=>E.refresh(),onRowClick:a=>{window.location.href=`/dashboard/work/team/${a.id}`},searchPlaceholder:"Search by name, email, role, or department...",serverSearch:!0,searchParamKey:"search",showArchived:"active"!==P,showRefresh:C,totalCount:z??S.length,toolbarActions:(0,b.jsx)(q.ArchiveFilterSelect,{activeCount:U,archivedCount:V,entity:"team_members",onFilterChange:T,totalCount:a.length})}),(0,b.jsx)(p.AlertDialog,{onOpenChange:I,open:H,children:(0,b.jsxs)(p.AlertDialogContent,{children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{children:"Suspend Team Member?"}),(0,b.jsx)(p.AlertDialogDescription,{children:"This team member will be suspended and will not be able to access the system until reactivated."})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(p.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{L&&await W(L)},children:"Suspend"})]})]})}),(0,b.jsx)(p.AlertDialog,{onOpenChange:K,open:J,children:(0,b.jsxs)(p.AlertDialogContent,{children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{children:"Archive Team Member?"}),(0,b.jsx)(p.AlertDialogDescription,{children:"This team member will be archived and can be restored later."})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(p.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{N&&await X(N)},children:"Archive"})]})]})})]})}a.s(["TeamsTable",()=>y],536174)}];

//# sourceMappingURL=apps_web_src_components_work_c7504d2d._.js.map