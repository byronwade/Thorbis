module.exports=[118385,a=>{"use strict";var b=a.i(861467),c=a.i(916680),d=a.i(587969),e=a.i(683970),e=e,f=a.i(396859),g=a.i(824124),h=a.i(949747),i=a.i(966183),j=a.i(976803),k=a.i(320091),l=a.i(362841),m=a.i(145679),n=a.i(337241),o=a.i(783281),p=a.i(761447),q=a.i(836994),r=a.i(770735),s=a.i(949729);a.i(288007);var t=a.i(986990);a.i(445255);var u=a.i(18170);a.i(839984);var v=a.i(372712);a.i(458393);var w=a.i(82012);a.i(476036);var x=a.i(930514),y=a.i(151183);let z={equipment:"Equipment",tool:"Tool",vehicle:"Vehicle"};function A(a){return a?a.toString().replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,a=>a.toUpperCase()):"N/A"}function B(a){if(!a)return"N/A";let b=new Date(a);return Number.isNaN(b.getTime())?"N/A":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function C(a,b){if(null==a||Number.isNaN(a))return"N/A";let c=a.toLocaleString("en-US");return b?`${c} ${b}`:c}function D(a){if(!a)return null;let b=new Date(a);return Number.isNaN(b.getTime())?null:Math.round((b.getTime()-Date.now())/864e5)}function E({entityData:a}){var E,F;let G,H,{equipment:I,customer:J,property:K,servicePlan:L,installJob:M,lastServiceJob:N,upcomingMaintenance:O=[],serviceHistory:P=[],notes:Q=[],activities:R=[],attachments:S=[]}=a,[T,U]=(0,o.useState)(!1),V=(0,n.useRouter)();(0,o.useEffect)(()=>{U(!0)},[]);let W=(0,o.useMemo)(()=>I?.equipment_tags?I.equipment_tags.map(a=>({id:a.id,name:a.name,slug:a.slug,color:a.color,category:a.category,icon:a.icon})):[],[I?.equipment_tags]),X=(0,o.useMemo)(()=>({1:()=>{let a=document.querySelector('[data-section-id="equipment-details"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},2:()=>{let a=document.querySelector('[data-section-id="fleet-profile"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},3:()=>{let a=document.querySelector('[data-section-id="fleet-service"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},4:()=>{let a=document.querySelector('[data-section-id="installation"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},5:()=>{let a=document.querySelector('[data-section-id="last-service"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},6:()=>{let a=document.querySelector('[data-section-id="upcoming-maintenance"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},7:()=>{let a=document.querySelector('[data-section-id="warranty"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},8:()=>{let a=document.querySelector('[data-section-id="service-history"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}},9:()=>{let a=document.querySelector('[data-section-id="customer-details"]');if(a){a.scrollIntoView({behavior:"smooth",block:"start"});let b=a.querySelector("[data-accordion-trigger]");b&&"closed"===b.getAttribute("data-state")&&b.click()}}}),[]);(0,y.useSectionShortcuts)(X);let Y=I.classification??"equipment",Z=z[Y]?Y:"equipment",$=z[Z]||A(I.classification),_=A(I.type),aa=I.asset_category?A(I.asset_category):null,ab=I.asset_subcategory?A(I.asset_subcategory):null,ac="vehicle"===Z,ad="tool"===Z,ae={positive:"border-success/30 bg-success/10",warning:"border-warning/40 bg-warning/10",critical:"border-destructive/40 bg-destructive/10",info:"border-primary/30 bg-primary/10"},af=[(E=I.status||"active",G=({active:{className:"bg-success text-white",label:"Active"},inactive:{className:"bg-secondary0 text-white",label:"Inactive"},retired:{className:"bg-warning text-white",label:"Retired"},replaced:{className:"bg-primary text-white",label:"Replaced"}})[E]||{className:"bg-muted text-foreground",label:E},(0,b.jsx)(t.Badge,{className:G.className,variant:"outline",children:G.label},"status")),(F=I.condition||"good",H=({excellent:{className:"bg-success text-white",label:"Excellent"},good:{className:"bg-primary text-white",label:"Good"},fair:{className:"bg-warning text-white",label:"Fair"},poor:{className:"bg-warning text-white",label:"Poor"},needs_replacement:{className:"bg-destructive text-white",label:"Needs Replacement"}})[F]||{className:"bg-muted text-foreground",label:F},(0,b.jsx)(t.Badge,{className:H.className,variant:"outline",children:H.label},"condition")),(0,b.jsx)(t.Badge,{className:"bg-primary/10 text-primary",variant:"outline",children:$},"classification")],ag=I.equipment_number||I.asset_id||I.id?.slice(0,8).toUpperCase(),ah=I.name||`Equipment ${ag??""}`.trim(),ai=[$,"N/A"!==_&&"NA"!==_?_:null,I.manufacturer||null,I.model||null].filter(Boolean),aj=ai.length>0?ai.join(" • "):void 0,ak=[];ak.push({label:"Equipment #",icon:(0,b.jsx)(h.Package,{className:"text-muted-foreground h-3.5 w-3.5"}),value:ag??"Not assigned",helperText:$}),ak.push({label:"Status",icon:(0,b.jsx)(i.ShieldCheck,{className:"text-muted-foreground h-3.5 w-3.5"}),value:A(I.status)||"Active",helperText:A(I.condition)}),ak.push({label:"Installed",icon:(0,b.jsx)(d.Calendar,{className:"text-muted-foreground h-3.5 w-3.5"}),value:B(I.install_date),helperText:I.installed_by?`By ${I.installed_by}`:void 0}),I.serial_number&&ak.push({label:"Serial Number",icon:(0,b.jsx)(l.Wrench,{className:"text-muted-foreground h-3.5 w-3.5"}),value:I.serial_number}),J&&ak.push({label:"Customer",icon:(0,b.jsx)(k.User,{className:"text-muted-foreground h-3.5 w-3.5"}),value:(0,b.jsx)(m.default,{className:"text-foreground text-sm font-medium hover:underline",href:`/dashboard/customers/${J.id}`,children:J.display_name||`${J.first_name||""} ${J.last_name||""}`.trim()||"Unknown Customer"}),helperText:J.email||J.phone||void 0}),K&&ak.push({label:"Location",icon:(0,b.jsx)(g.MapPin,{className:"text-muted-foreground h-3.5 w-3.5"}),value:K.address||K.name||"Not assigned",helperText:`${K.city||""}, ${K.state||""} ${K.zip_code||""}`.trim()}),L&&ak.push({label:"Service Plan",icon:(0,b.jsx)(i.ShieldCheck,{className:"text-muted-foreground h-3.5 w-3.5"}),value:(0,b.jsx)(m.default,{className:"text-foreground text-sm font-medium hover:underline",href:`/dashboard/work/maintenance-plans/${L.id}`,children:L.name||`Plan ${L.plan_number||L.id.slice(0,8)}`}),helperText:L.status||void 0});let al=[];J&&al.push((0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsx)(m.default,{href:`/dashboard/customers/${J.id}`,children:"View Customer"})},"view-customer")),K&&al.push((0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsx)(m.default,{href:`/dashboard/work/properties/${K.id}`,children:"View Property"})},"view-property"));let am={title:ah,subtitle:aj,badges:af,metadata:ak,secondaryActions:al.length>0?al:void 0},an=(0,o.useMemo)(()=>{let a=[];if(ac){if("number"==typeof I.vehicle_odometer&&"number"==typeof I.vehicle_next_service_mileage){let c=I.vehicle_next_service_mileage-I.vehicle_odometer;Number.isFinite(c)&&a.push({tone:c<0?"critical":c<=500?"warning":"info",title:c<0?`Service overdue by ${C(Math.abs(c),"mi")}`:`Service due in ${C(c,"mi")}`,description:`Next service at ${C(I.vehicle_next_service_mileage,"mi")}${I.next_service_due?` • ${B(I.next_service_due)}`:""}`,icon:(0,b.jsx)(f.Gauge,{className:"size-4"})})}let d=D(I.vehicle_inspection_due);null!==d&&a.push({tone:d<0?"critical":d<=14?"warning":"info",title:d<0?`Inspection overdue by ${Math.abs(d)} days`:`Inspection due in ${d} days`,description:`Due ${B(I.vehicle_inspection_due)}`,icon:(0,b.jsx)(c.AlertTriangle,{className:"size-4"})});let g=D(I.vehicle_registration_expiration);null!==g&&a.push({tone:g<0?"critical":g<=30?"warning":"info",title:g<0?`Registration expired ${Math.abs(g)} days ago`:`Registration expires in ${g} days`,description:`Renew by ${B(I.vehicle_registration_expiration)}`,icon:(0,b.jsx)(j.Truck,{className:"size-4"})}),I.vehicle_fuel_type&&a.push({tone:"info",title:`${A(I.vehicle_fuel_type)} fuel`,description:"Fuel type captured for compliance and routing.",icon:(0,b.jsx)(e.default,{className:"size-4"})})}else if(ad){let c=D(I.tool_calibration_due);if(null!==c&&a.push({tone:c<0?"critical":c<=14?"warning":"info",title:c<0?`Calibration overdue by ${Math.abs(c)} days`:`Calibration due in ${c} days`,description:`Scheduled for ${B(I.tool_calibration_due)}`,icon:(0,b.jsx)(f.Gauge,{className:"size-4"})}),I.condition){let c="needs_replacement"===I.condition||"poor"===I.condition?"warning":"info";a.push({tone:c,title:`Condition: ${A(I.condition)}`,description:"needs_replacement"===I.condition?"Plan replacement to avoid downtime.":"Equipment ready for deployment.",icon:(0,b.jsx)(l.Wrench,{className:"size-4"})})}I.tool_serial&&a.push({tone:"info",title:`Serial ${I.tool_serial}`,description:"Tracked for warranty and service history."})}else{let c=D(I.next_service_due);if(null!==c&&a.push({tone:c<0?"critical":c<=30?"warning":"info",title:c<0?`Service overdue by ${Math.abs(c)} days`:`Service due in ${c} days`,description:`Next scheduled for ${B(I.next_service_due)}`,icon:(0,b.jsx)(f.Gauge,{className:"size-4"})}),I.is_under_warranty&&I.warranty_expiration){let c=D(I.warranty_expiration);null!==c&&a.push({tone:c<0||c<=60?"warning":"positive",title:c<0?"Warranty expired":`Warranty active (${c} days remaining)`,description:`Covers until ${B(I.warranty_expiration)}`,icon:(0,b.jsx)(i.ShieldCheck,{className:"size-4"})})}}return a},[I.condition,I.is_under_warranty,I.next_service_due,I.tool_calibration_due,I.tool_serial,I.vehicle_fuel_type,I.vehicle_inspection_due,I.vehicle_next_service_mileage,I.vehicle_odometer,I.vehicle_registration_expiration,ad,ac,I.warranty_expiration]),ao=D(I.next_service_due),ap=D(I.warranty_expiration),aq=[{key:"install",label:"Install Date",value:B(I.install_date),helperText:I.installed_by?`Installed by ${I.installed_by}`:void 0,icon:(0,b.jsx)(d.Calendar,{className:"text-muted-foreground h-4 w-4"})},{key:"last-service",label:"Last Service",value:B(I.last_service_date),helperText:I.last_service_job_id?"Linked job on record":void 0,icon:(0,b.jsx)(l.Wrench,{className:"text-muted-foreground h-4 w-4"})},{key:"next-service",label:"Next Service Due",value:B(I.next_service_due),helperText:null!==ao?ao<0?`${Math.abs(ao)} days overdue`:`Due in ${ao} days`:void 0,icon:(0,b.jsx)(f.Gauge,{className:"text-muted-foreground h-4 w-4"})},{key:"warranty",label:"Warranty",value:I.is_under_warranty?"Active":"Expired",helperText:I.warranty_expiration&&null!==ap?ap<0?`Expired ${Math.abs(ap)} days ago`:`Expires in ${ap} days`:I.warranty_expiration?`Expires ${B(I.warranty_expiration)}`:void 0,icon:(0,b.jsx)(i.ShieldCheck,{className:"text-muted-foreground h-4 w-4"})}],ar=aq.length>0?(0,b.jsx)(r.DetailPageSurface,{className:"w-full",padding:"lg",variant:"muted",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("h3",{className:"text-foreground text-base font-semibold",children:"Lifecycle Overview"}),(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:aq.map(({key:a,label:c,value:d,helperText:e,icon:f})=>(0,b.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[f,(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:c}),(0,b.jsx)("span",{className:"text-sm font-semibold",children:d}),e?(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:e}):null]})]})},a))})]})}):null,as=an.length>0?(0,b.jsx)(r.DetailPageSurface,{className:"w-full",padding:"lg",variant:"muted",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("h3",{className:"text-foreground text-base font-semibold",children:"Smart Insights"}),(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:an.map(a=>(0,b.jsx)("div",{className:`rounded-md border p-3 text-sm ${ae[a.tone]}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[a.icon&&(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5",children:a.icon}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-foreground font-medium",children:a.title}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.description})]})]})},`${a.title}-${a.description}`))})]})}):null,at=as||ar?(0,b.jsxs)("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-4",children:[as,ar]}):null,au=(0,o.useMemo)(()=>{let a=[{id:"equipment-details",title:"Equipment Details",icon:(0,b.jsx)(h.Package,{className:"size-4"}),defaultOpen:!0,content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Equipment Number"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.equipment_number||I.id.slice(0,8)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Classification"}),(0,b.jsx)(v.Input,{readOnly:!0,value:$})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Type"}),(0,b.jsx)(v.Input,{readOnly:!0,value:"N/A"!==_?_:"Unspecified"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Manufacturer"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.manufacturer||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Model"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.model||"N/A"})]}),I.serial_number&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Serial Number"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.serial_number})]}),I.model_year&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Model Year"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.model_year.toString()})]}),I.location&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Location"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.location})]}),aa&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Asset Category"}),(0,b.jsx)(v.Input,{readOnly:!0,value:aa})]}),ab&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Asset Subcategory"}),(0,b.jsx)(v.Input,{readOnly:!0,value:ab})]}),I.capacity&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Capacity"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.capacity})]}),I.efficiency&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Efficiency"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.efficiency})]}),I.fuel_type&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Fuel Type"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.fuel_type})]})]})})}];if(ac){let d="number"==typeof I.vehicle_next_service_mileage&&"number"==typeof I.vehicle_odometer?I.vehicle_next_service_mileage-I.vehicle_odometer:null;a.push({id:"fleet-profile",title:"Fleet Profile",icon:(0,b.jsx)(j.Truck,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Make"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_make||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Model"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_model||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Year"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_year?I.vehicle_year.toString():"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"VIN"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_vin||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"License / Unit"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_license_plate||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Fuel Type"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.vehicle_fuel_type?A(I.vehicle_fuel_type):"N/A"})]})]})})}),a.push({id:"fleet-service",title:"Service Metrics",icon:(0,b.jsx)(f.Gauge,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Odometer"}),(0,b.jsx)(v.Input,{readOnly:!0,value:C(I.vehicle_odometer,"mi")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Last Service Mileage"}),(0,b.jsx)(v.Input,{readOnly:!0,value:C(I.vehicle_last_service_mileage,"mi")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Next Service Mileage"}),(0,b.jsx)(v.Input,{readOnly:!0,value:C(I.vehicle_next_service_mileage,"mi")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Remaining Until Service"}),(0,b.jsx)(v.Input,{readOnly:!0,value:null===d?"N/A":d<0?`Past due by ${C(Math.abs(d),"mi")}`:C(d,"mi")})]})]})})}),a.push({id:"fleet-compliance",title:"Compliance & Renewals",icon:(0,b.jsx)(c.AlertTriangle,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Registration Expires"}),(0,b.jsx)(v.Input,{readOnly:!0,value:B(I.vehicle_registration_expiration)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Inspection Due"}),(0,b.jsx)(v.Input,{readOnly:!0,value:B(I.vehicle_inspection_due)})]})]})})})}return ad&&(a.push({id:"tool-profile",title:"Tool Profile",icon:(0,b.jsx)(l.Wrench,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Tool Serial"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.tool_serial||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Primary Use"}),(0,b.jsx)(v.Input,{readOnly:!0,value:ab||aa||"N/A"})]})]})})}),a.push({id:"tool-calibration",title:"Calibration & Warranty",icon:(0,b.jsx)(f.Gauge,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Calibration Due"}),(0,b.jsx)(v.Input,{readOnly:!0,value:B(I.tool_calibration_due)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Warranty Expires"}),(0,b.jsx)(v.Input,{readOnly:!0,value:B(I.warranty_expiration)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Condition"}),(0,b.jsx)(v.Input,{readOnly:!0,value:A(I.condition)})]})]})})})),(I.install_date||I.installed_by||M)&&a.push({id:"installation",title:"Installation",icon:(0,b.jsx)(d.Calendar,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[I.install_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Install Date"}),(0,b.jsx)(v.Input,{readOnly:!0,value:new Date(I.install_date).toLocaleDateString()})]}),I.installed_by&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Installed By"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.installed_by})]})]}),M&&(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{className:"mb-2 block",children:"Install Job"}),(0,b.jsx)("h4",{className:"text-lg font-semibold",children:M.title||`Job #${M.job_number}`}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:["#",M.job_number]}),M.completed_at&&(0,b.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:["Completed:"," ",new Date(M.completed_at).toLocaleDateString()]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(t.Badge,{variant:"outline",children:M.status})})]}),(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsx)(m.default,{href:`/dashboard/work/${M.id}`,children:"View Job"})})]})})]})})}),N&&a.push({id:"last-service",title:"Last Service",icon:(0,b.jsx)(l.Wrench,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{className:"mb-2 block",children:"Most Recent Service"}),(0,b.jsx)("h4",{className:"text-lg font-semibold",children:N.title||`Job #${N.job_number}`}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:["#",N.job_number]}),N.completed_at&&(0,b.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:["Completed:"," ",new Date(N.completed_at).toLocaleDateString()]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(t.Badge,{variant:"outline",children:N.status})})]}),(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsx)(m.default,{href:`/dashboard/work/${N.id}`,children:"View Job"})})]})})})}),O.length>0&&a.push({id:"upcoming-maintenance",title:"Upcoming Maintenance",icon:(0,b.jsx)(d.Calendar,{className:"size-4"}),count:O.length,content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:O.map(a=>(0,b.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:new Date(a.scheduled_start).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:new Date(a.scheduled_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),a.job&&(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:a.job.title||`Job #${a.job.job_number}`}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(t.Badge,{variant:"outline",children:a.status})})]}),(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsx)(m.default,{href:`/dashboard/appointments/${a.id}`,children:"View"})})]})},a.id))})})}),(I.is_under_warranty||I.warranty_expiration)&&a.push({id:"warranty",title:"Warranty",icon:(0,b.jsx)(i.ShieldCheck,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Under Warranty"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.is_under_warranty?"Yes":"No"})]}),I.warranty_expiration&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Warranty Expiration"}),(0,b.jsx)(v.Input,{readOnly:!0,value:new Date(I.warranty_expiration).toLocaleDateString()})]}),I.warranty_provider&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Warranty Provider"}),(0,b.jsx)(v.Input,{readOnly:!0,value:I.warranty_provider})]}),I.warranty_notes&&(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(w.Label,{children:"Warranty Notes"}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:I.warranty_notes})]})]})})}),P.length>0&&a.push({id:"service-history",title:"Service History",icon:(0,b.jsx)(l.Wrench,{className:"size-4"}),count:P.length,content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:P.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.service_type||"Service"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.serviced_at?new Date(a.serviced_at).toLocaleDateString():"Date unknown"})]}),a.job_id&&(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(m.default,{href:`/dashboard/work/${a.job_id}`,children:"View Job"})})]},a.id))})})}),(I.last_service_date||I.next_service_due)&&a.push({id:"maintenance-schedule",title:"Maintenance Schedule",icon:(0,b.jsx)(d.Calendar,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[I.last_service_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Last Service"}),(0,b.jsx)(v.Input,{readOnly:!0,value:new Date(I.last_service_date).toLocaleDateString()})]}),I.next_service_due&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Next Service Due"}),(0,b.jsx)(v.Input,{readOnly:!0,value:new Date(I.next_service_due).toLocaleDateString()})]}),I.service_interval_days&&(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Service Interval"}),(0,b.jsx)(v.Input,{readOnly:!0,value:`${I.service_interval_days} days`})]})]})})}),J&&a.push({id:"customer-details",title:"Customer Details",icon:(0,b.jsx)(k.User,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Name"}),(0,b.jsx)("p",{className:"text-sm",children:J.display_name||`${J.first_name||""} ${J.last_name||""}`.trim()||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Email"}),(0,b.jsx)("p",{className:"text-sm",children:J.email||"N/A"})]})]}),(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(m.default,{href:`/dashboard/customers/${J.id}`,children:"View Full Profile"})})]})})}),K&&a.push({id:"property-location",title:"Property Location",icon:(0,b.jsx)(g.MapPin,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{children:"Service Address"}),(0,b.jsxs)("p",{className:"text-sm",children:[K.address,K.address2&&`, ${K.address2}`]}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:[K.city,", ",K.state," ",K.zip_code]})]}),(0,b.jsx)(u.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${K.address}, ${K.city}, ${K.state}`)}`,rel:"noopener noreferrer",target:"_blank",children:[(0,b.jsx)(g.MapPin,{className:"mr-2 size-4"}),"Open in Google Maps"]})})]})})}),a.push({id:"tags",title:"Tags",icon:(0,b.jsx)(h.Package,{className:"size-4"}),content:(0,b.jsx)(x.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)("div",{className:"bg-muted/50 rounded-md",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 p-4",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-medium",children:"Organize equipment with tags:"}),(0,b.jsx)(s.EntityTags,{entityId:I.id,entityType:"equipment",onUpdateTags:async(a,b)=>{(await (0,p.updateEntityTags)("equipment",a,b)).success&&V.refresh()},tags:W})]})})})})}),a},[aa,ab,$,I,J,K,M,N,O,P,ad,ac,_,W,V]),av=(0,o.useMemo)(()=>{let a=[];return J&&a.push({id:`customer-${J.id}`,type:"customer",title:J.display_name||`${J.first_name||""} ${J.last_name||""}`.trim()||"Unknown Customer",subtitle:J.email||J.phone||void 0,href:`/dashboard/customers/${J.id}`}),K&&a.push({id:`property-${K.id}`,type:"property",title:K.address||K.name||"Property",subtitle:`${K.city||""}, ${K.state||""}`.trim()||void 0,href:`/dashboard/work/properties/${K.id}`}),L&&a.push({id:`service-plan-${L.id}`,type:"service_plan",title:L.name||`Plan ${L.plan_number||L.id.slice(0,8)}`,subtitle:L.status,href:`/dashboard/work/maintenance-plans/${L.id}`,badge:L.status?{label:L.status,variant:"outline"}:void 0}),a},[J,K,L]);return T?(0,b.jsx)(q.DetailPageContentLayout,{activities:R,attachments:S,beforeContent:at,className:"mx-auto w-full max-w-7xl",customSections:au,defaultOpenSection:"equipment-details",header:am,notes:Q,relatedItems:av,showStandardSections:{activities:!0,notes:!0,attachments:!0,relatedItems:!0},storageKey:"equipment-details"}):(0,b.jsx)("div",{className:"flex-1 p-6",children:"Loading..."})}a.s(["EquipmentPageContent",()=>E],118385)},419981,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(50466),e=a.i(988253),f=a.i(362841),g=a.i(337241),h=a.i(783281),i=a.i(27380),j=a.i(114692);a.i(445255);var k=a.i(18170);a.i(19256);var l=a.i(417132);a.i(146697);var m=a.i(778737);a.i(928414);var n=a.i(745250),o=a.i(251048);function p(){let a=(0,g.usePathname)(),p=(0,g.useRouter)(),{toast:q}=(0,o.useToast)(),r=a?.split("/").pop(),[s,t]=(0,h.useState)(!1),[u,v]=(0,h.useState)(!1),w=async()=>{if(!r)return void q.error("Equipment ID not found");v(!0);try{let a=await (0,i.archiveEquipment)(r);a.success?(q.success("Equipment archived successfully"),t(!1),p.push("/dashboard/work/equipment")):q.error(a.error||"Failed to archive equipment")}catch{q.error("Failed to archive equipment")}finally{v(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsxs)(n.TooltipProvider,{children:[(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(k.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:`/dashboard/work/new?equipmentId=${r}`,children:[(0,b.jsx)(f.Wrench,{}),(0,b.jsx)("span",{className:"hidden md:inline",children:"Service Job"})]})})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsx)("p",{children:"Create service job for this equipment"})})]}),(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(k.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:`/dashboard/work/equipment/${r}?tab=maintenance`,children:[(0,b.jsx)(d.ClipboardList,{}),(0,b.jsx)("span",{className:"hidden lg:inline",children:"Maintenance"})]})})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsx)("p",{children:"View maintenance log"})})]}),(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(k.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:`/dashboard/work/equipment/new?cloneFrom=${r}`,children:[(0,b.jsx)(e.Copy,{}),(0,b.jsx)("span",{className:"hidden lg:inline",children:"Copy"})]})})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsx)("p",{children:"Duplicate equipment record"})})]})]}),(0,b.jsx)(m.Separator,{className:"h-8",orientation:"vertical"}),(0,b.jsx)(j.ImportExportDropdownLazy,{dataType:"equipment"}),(0,b.jsx)(m.Separator,{className:"h-8",orientation:"vertical"}),(0,b.jsx)(n.TooltipProvider,{children:(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)(k.Button,{className:"border-destructive/40 text-destructive hover:bg-destructive/10 h-8 gap-1.5",onClick:()=>t(!0),size:"sm",variant:"outline",children:[(0,b.jsx)(c.Archive,{className:"size-3.5"}),(0,b.jsx)("span",{className:"hidden lg:inline",children:"Archive"})]})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsx)("p",{children:"Archive equipment"})})]})})]}),(0,b.jsx)(l.Dialog,{onOpenChange:t,open:s,children:(0,b.jsxs)(l.DialogContent,{children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:"Archive Equipment"}),(0,b.jsx)(l.DialogDescription,{children:"Are you sure you want to archive this equipment? Archived records can be restored within 90 days."})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(k.Button,{disabled:u,onClick:()=>t(!1),variant:"outline",children:"Cancel"}),(0,b.jsx)(k.Button,{disabled:u,onClick:w,variant:"destructive",children:u?"Archiving...":"Archive Equipment"})]})]})})]})}a.s(["EquipmentDetailToolbarActions",()=>p])}];

//# sourceMappingURL=apps_web_src_components_work_49ddb5ba._.js.map