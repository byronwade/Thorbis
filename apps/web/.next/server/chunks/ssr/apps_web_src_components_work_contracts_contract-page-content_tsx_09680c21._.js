module.exports=[927118,a=>{"use strict";var b=a.i(861467),c=a.i(587969),d=a.i(60222),e=a.i(430243),f=a.i(319895),g=a.i(645072),h=a.i(824124),i=a.i(980879),i=i,j=a.i(949747),k=a.i(739044),l=a.i(320091),m=a.i(145679),n=a.i(337241),o=a.i(783281),p=a.i(156916),q=a.i(761447),r=a.i(836994),s=a.i(949729);a.i(288007);var t=a.i(986990);a.i(476036);var u=a.i(930514);a.i(319168);var v=a.i(196935),w=a.i(151183),x=a.i(792268),y=a.i(700760);function z(a){return a?a.toString().split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):"Draft"}function A(a,b){if(!a)return b||"Unknown Customer";if(a.display_name)return a.display_name;let c=`${a.first_name||""} ${a.last_name||""}`.trim();return c||b||"Unknown Customer"}function B(a){return a&&(a.address||a.name||[a.city,a.state].filter(Boolean).join(", "))||"Property"}function C({entityData:a}){let C,E,F=(0,n.useRouter)(),{contract:I,customer:J,property:K,estimate:L,invoice:M,job:N,appointments:O=[]}=a,P=A(J,I.customerName),Q=z(I.status),R=I.status?(0,b.jsx)(t.Badge,{className:(0,y.cn)("capitalize",function(a){switch(a){case"signed":return"bg-green-500/90 text-white hover:bg-green-600";case"sent":return"bg-primary/10 text-primary";case"viewed":return"bg-accent/10 text-accent-foreground";case"rejected":return"bg-destructive/10 text-destructive";case"expired":return"bg-warning/10 text-warning";default:return"bg-muted text-foreground"}}(I.status)),variant:"outline",children:Q},"status-badge"):null,S=(C=I.contractNumber||`CON-${I.id.slice(0,8).toUpperCase()}`,E=[(0,b.jsx)(t.Badge,{variant:"outline",children:C},"contract-number")],R&&E.push(R),I.contractType&&E.push((0,b.jsx)(t.Badge,{className:"capitalize",variant:"secondary",children:I.contractType},"contract-type")),{title:I.title||C,subtitle:P,badges:E}),T=(0,o.useMemo)(()=>I?.contract_tags?I.contract_tags.map(a=>({id:a.id,name:a.name,slug:a.slug,color:a.color,category:a.category,icon:a.icon})):[],[I?.contract_tags]),U=(0,o.useMemo)(()=>({1:()=>{document.getElementById("contract-overview")?.scrollIntoView({behavior:"smooth"})},2:()=>{document.getElementById("contract-terms")?.scrollIntoView({behavior:"smooth"})},3:()=>{document.getElementById("signature")?.scrollIntoView({behavior:"smooth"})},4:()=>{document.getElementById("engagement-history")?.scrollIntoView({behavior:"smooth"})},5:()=>{document.getElementById("appointments")?.scrollIntoView({behavior:"smooth"})},9:()=>{document.getElementById("tags")?.scrollIntoView({behavior:"smooth"})}}),[]);(0,w.useSectionShortcuts)(U);let V=(0,o.useMemo)(()=>{let a=[];return a.push({key:"status",icon:g.GitBranch,label:"Status",value:Q}),a.push({key:"sent",icon:k.Send,label:"Sent At",value:I.sentAt&&""!==I.sentAt?(0,x.formatDate)(I.sentAt,{preset:"datetime"}):"Not sent"}),a.push({key:"viewed",icon:d.CalendarDays,label:"Viewed",value:I.viewedAt&&""!==I.viewedAt?(0,x.formatDate)(I.viewedAt,{preset:"datetime"}):"Not viewed"}),a.push({key:"signed",icon:e.FileSignature,label:"Signed",value:I.signedAt&&""!==I.signedAt?(0,x.formatDate)(I.signedAt,{preset:"datetime"}):"Awaiting signature"}),a},[I.sentAt,I.viewedAt,I.signedAt,Q]),W=(0,o.useMemo)(()=>{let a=[];return J?a.push({id:`customer-${J.id}`,type:"customer",title:A(J,I.customerName),subtitle:J.email||J.phone||void 0,href:`/dashboard/customers/${J.id}`}):I.customerId&&a.push({id:`customer-${I.customerId}`,type:"customer",title:I.customerName,href:`/dashboard/customers/${I.customerId}`}),K&&a.push({id:`property-${K.id}`,type:"property",title:B(K),subtitle:[K.city,K.state].filter(Boolean).join(", ")||void 0,href:`/dashboard/work/properties/${K.id}`}),N&&a.push({id:`job-${N.id}`,type:"job",title:N.title||`Job #${N.job_number||N.id.slice(0,8)}`,subtitle:N.status||void 0,href:`/dashboard/work/${N.id}`,badge:N.status?{label:z(N.status),variant:"outline"}:void 0}),L&&a.push({id:`estimate-${L.id}`,type:"estimate",title:L.title||`Estimate #${L.estimate_number||L.id.slice(0,8)}`,subtitle:L.status||void 0,href:`/dashboard/work/estimates/${L.id}`,badge:L.status?{label:z(L.status),variant:"secondary"}:void 0}),M&&a.push({id:`invoice-${M.id}`,type:"invoice",title:M.title||`Invoice #${M.invoice_number||M.id.slice(0,8)}`,subtitle:M.status||void 0,href:`/dashboard/work/invoices/${M.id}`,badge:M.status?{label:z(M.status),variant:"outline"}:void 0}),a},[I,J,L,M,N,K]),X=(0,o.useMemo)(()=>L||M?[{id:"estimate",label:"Estimate Created",status:L?"completed":"pending",date:L?.created_at||void 0,href:L?.id?`/dashboard/work/estimates/${L.id}`:void 0,description:L?.estimate_number?`#${L.estimate_number}`:void 0},{id:"contract",label:"Contract Generated",status:"completed",date:I.createdAt||void 0,href:`/dashboard/work/contracts/${I.id}`,description:"signed"===I.status?"Signed":"Pending signature"},{id:"invoice",label:"Invoice Created",status:M?"completed":"pending",date:M?.created_at||void 0,href:M?.id?`/dashboard/work/invoices/${M.id}`:void 0,description:M?.invoice_number?`#${M.invoice_number}`:void 0},{id:"payment",label:"Payment Received",status:M?.status==="paid"?"completed":M?"current":"pending",date:M?.paid_at||void 0,description:M?.paid_at?"Completed":M?`Balance: ${(0,x.formatCurrency)(M.balance_amount??0)}`:void 0}]:[],[I,L,M]),Y=(0,o.useMemo)(()=>{let a=I.contractNumber||`CON-${I.id.slice(0,8).toUpperCase()}`;return{id:"contract-overview",title:"Contract Overview",icon:(0,b.jsx)(f.FileText,{className:"size-4"}),defaultOpen:!0,content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsx)(G,{label:"Contract Number",value:`#${a}`}),(0,b.jsx)(G,{label:"Status",value:Q}),(0,b.jsx)(G,{label:"Contract Type",value:I.contractType?I.contractType:"Not specified"}),(0,b.jsx)(G,{label:"Created",value:(0,x.formatDate)(I.createdAt,{preset:"datetime"})}),(0,b.jsx)(G,{label:"Valid From",value:(0,x.formatDate)(I.validFrom,{preset:"long"})}),(0,b.jsx)(G,{label:"Valid Until",value:(0,x.formatDate)(I.validUntil,{preset:"long"})}),(0,b.jsx)(G,{label:"Customer",value:J?(0,b.jsxs)(m.default,{className:"text-primary inline-flex items-center gap-2 text-sm font-medium hover:underline",href:`/dashboard/customers/${J.id}`,children:[(0,b.jsx)(l.User,{className:"size-4"}),A(J,I.customerName)]}):I.customerName}),K&&(0,b.jsx)(G,{label:"Property",value:(0,b.jsxs)(m.default,{className:"text-primary inline-flex items-center gap-2 text-sm font-medium hover:underline",href:`/dashboard/work/properties/${K.id}`,children:[(0,b.jsx)(h.MapPin,{className:"size-4"}),B(K)]})})]})})}},[I,J,K,Q]),Z=(0,o.useMemo)(()=>({id:"contract-terms",title:"Contract Terms",icon:(0,b.jsx)(e.FileSignature,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"border-border/60 bg-muted/30 rounded-lg border p-5 text-sm leading-relaxed",children:I.content&&I.content.trim().length>0?(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:I.content}):(0,b.jsx)("p",{className:"text-muted-foreground",children:"No contract terms provided."})})})}),[I.content]),$=(0,o.useMemo)(()=>I.signerName||I.signedAt?{id:"signature",title:"Signature",icon:(0,b.jsx)(e.FileSignature,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"border-border/60 bg-muted/20 flex items-start gap-4 rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"bg-background rounded-lg p-3 shadow-sm",children:(0,b.jsx)(e.FileSignature,{className:"text-muted-foreground size-6"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:I.signerName||"Signer name not provided"}),I.signerTitle&&(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:[I.signerTitle,I.signerCompany?` at ${I.signerCompany}`:""]}),I.signerEmail&&(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:I.signerEmail}),(0,b.jsxs)("div",{className:"text-muted-foreground text-xs",children:[(0,b.jsxs)("p",{children:["Signed on"," ",(0,x.formatDate)(I.signedAt,{preset:"datetime"})]}),I.ipAddress&&(0,b.jsxs)("p",{children:["IP: ",I.ipAddress]})]})]})]})})}:null,[I.ipAddress,I.signerCompany,I.signerEmail,I.signerName,I.signerTitle,I.signedAt]),_=(0,o.useMemo)(()=>{let a=[{id:"signed",label:"Signed",value:(0,x.formatDate)(I.signedAt,{preset:"datetime"}),icon:e.FileSignature,tone:"success"},{id:"viewed",label:"Viewed",value:(0,x.formatDate)(I.viewedAt,{preset:"datetime"}),icon:d.CalendarDays,tone:"accent"},{id:"sent",label:"Sent",value:(0,x.formatDate)(I.sentAt,{preset:"datetime"}),icon:k.Send,tone:"default"},{id:"created",label:"Created",value:(0,x.formatDate)(I.createdAt,{preset:"datetime"}),icon:c.Calendar,tone:"muted"}];return{id:"engagement-history",title:"Engagement History",icon:(0,b.jsx)(g.GitBranch,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsx)(H,{event:a},a.id))})})}},[I.createdAt,I.sentAt,I.signedAt,I.viewedAt]),aa=(0,o.useMemo)(()=>0===O.length?null:{id:"appointments",title:"Recent Appointments",icon:(0,b.jsx)(c.Calendar,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:O.map(a=>(0,b.jsxs)(m.default,{className:"border-border/60 hover:bg-muted/40 flex items-center justify-between gap-3 rounded-lg border p-3 transition-colors",href:`/dashboard/appointments/${a.id}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,x.formatDate)(a.scheduled_start,{preset:"long"})}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[(0,x.formatDate)(a.scheduled_start,{preset:"time"}),a.scheduled_end?` – ${(0,x.formatDate)(a.scheduled_end,{preset:"time"})}`:""]})]}),(0,b.jsx)(t.Badge,{variant:"outline",children:z(a.status||"scheduled")})]},a.id))})})},[O]),ab=(0,o.useMemo)(()=>I.terms&&0!==I.terms.trim().length?{id:"additional-terms",title:"Additional Terms",icon:(0,b.jsx)(i.default,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:I.terms})})}:null,[I.terms]),ac=(0,o.useMemo)(()=>I.notes&&0!==I.notes.trim().length?{id:"internal-notes",title:"Internal Notes",icon:(0,b.jsx)(i.default,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)("p",{className:"text-muted-foreground text-sm whitespace-pre-wrap",children:I.notes})})}:null,[I.notes]),ad=(0,o.useMemo)(()=>({id:"tags",title:"Tags",icon:(0,b.jsx)(j.Package,{className:"size-4"}),content:(0,b.jsx)(u.UnifiedAccordionContent,{children:(0,b.jsx)(s.EntityTags,{entityId:I.id,entityType:"contract",onUpdateTags:async(a,b)=>{let c=await (0,q.updateEntityTags)("contract",a,b);c.success?F.refresh():p.toast.error(c.error||"Failed to update tags")},tags:T})})}),[I.id,T,F]),ae=(0,o.useMemo)(()=>[Y,Z,$,_,aa,ab,ac,ad].filter(Boolean),[ab,aa,_,Y,$,Z,ac,ad]),af=X.length>0;return(0,b.jsx)(r.DetailPageContentLayout,{beforeContent:af?(0,b.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,b.jsx)("div",{className:"mx-auto max-w-7xl",children:(0,b.jsx)(v.WorkflowTimeline,{stages:X})})}):void 0,customHeader:(0,b.jsx)(D,{config:S,quickInfo:V}),customSections:ae,defaultOpenSection:"contract-overview",relatedItems:W,showStandardSections:{activities:!1,notes:!1,attachments:!1,relatedItems:W.length>0},storageKey:"contract-details"})}function D({config:a,quickInfo:c}){return(0,b.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,b.jsx)("div",{className:"border-border/60 bg-card mx-auto max-w-7xl rounded-xl border shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col gap-6 p-6 md:p-8",children:[(0,b.jsx)(E,{config:a}),(0,b.jsx)(F,{items:c})]})})})}function E({config:a}){return(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[a.title?(0,b.jsx)("h1",{className:"text-2xl leading-tight font-semibold md:text-3xl",children:a.title}):null,a.subtitle?(0,b.jsx)("p",{className:"text-muted-foreground text-sm md:text-base",children:a.subtitle}):null,a.description?(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:a.description}):null]}),a.badges&&a.badges.length>0?(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:a.badges}):null]})}function F({items:a}){return 0===a.length?null:(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:a.map(a=>{let c=a.icon;return(0,b.jsxs)("div",{className:"border-border/60 bg-muted/30 flex items-start gap-3 rounded-lg border p-3",children:[(0,b.jsx)("div",{className:"bg-background rounded-md p-2 shadow-sm",children:(0,b.jsx)(c,{className:"text-muted-foreground size-4"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:a.label}),(0,b.jsx)("span",{className:"text-sm font-medium",children:a.value})]})]},a.key)})})}function G({label:a,value:c}){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:a}),(0,b.jsx)("div",{className:"text-sm font-medium",children:c})]})}function H({event:a}){if("—"===a.value)return null;let c=a.icon;return(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:(0,y.cn)("flex size-10 shrink-0 items-center justify-center rounded-full",{default:"bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary-foreground",accent:"bg-accent/10 text-accent-foreground dark:bg-accent/20 dark:text-accent-foreground",success:"bg-success/10 text-success dark:bg-success/20 dark:text-success",muted:"bg-muted text-muted-foreground"}[a.tone]),children:(0,b.jsx)(c,{className:"size-4"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.label}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.value})]})]})}a.s(["ContractPageContent",()=>C],927118)}];

//# sourceMappingURL=apps_web_src_components_work_contracts_contract-page-content_tsx_09680c21._.js.map