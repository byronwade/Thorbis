module.exports=[22036,a=>{"use strict";var b=a.i(254799);class c{config;apiUrl;constructor(a){this.config=a,this.apiUrl="production"===a.environment?"https://production.plaid.com":"development"===a.environment?"https://development.plaid.com":"https://sandbox.plaid.com"}getSupportedChannels(){return["ach"]}async processPayment(a){try{if(!a.paymentMethodId)return{success:!1,status:"failed",error:"Payment method (bank account) is required for ACH payments"};return{success:!1,status:"failed",error:"ACH processing via Plaid requires integration with ACH processor (Adyen/ProfitStars)"}}catch(a){return{success:!1,status:"failed",error:a instanceof Error?a.message:"Payment processing failed"}}}async refundPayment(a){return{success:!1,status:"failed",error:"ACH refunds must be processed through ACH processor (Adyen/ProfitStars)"}}async getPaymentStatus(a){throw Error("Payment status must be retrieved from ACH processor")}verifyWebhook(a,c){if(!c)return console.error("[Plaid] No webhook signature provided"),!1;try{let[d,e,f]=c.split(".");if(!d||!e||!f)return console.error("[Plaid] Invalid JWT format in webhook signature"),!1;let g=JSON.parse(Buffer.from(e,"base64url").toString("utf8")),h=g.iat,i=Math.floor(Date.now()/1e3);if(Math.abs(i-h)>300)return console.error("[Plaid] Webhook signature too old or from future"),!1;let j=b.default.createHash("sha256").update(a).digest("hex");if(g.request_body_sha256!==j)return console.error("[Plaid] Webhook body hash mismatch"),!1;if(this.config.webhookVerificationKey){let a=`${d}.${e}`,c=b.default.createVerify("RSA-SHA256");if(c.update(a),!c.verify(this.config.webhookVerificationKey,Buffer.from(f,"base64url")))return console.error("[Plaid] JWT signature verification failed"),!1}else console.warn("[Plaid] No webhook verification key configured - verifying body hash only");return!0}catch(a){return console.error("[Plaid] Webhook verification error:",a),!1}}async createLinkToken(a){try{let b=await fetch(`${this.apiUrl}/link/token/create`,{method:"POST",headers:{"Content-Type":"application/json","PLAID-CLIENT-ID":this.config.clientId,"PLAID-SECRET":this.config.secret},body:JSON.stringify({client_name:"Thorbis",user:{client_user_id:a},products:["auth","transactions"],country_codes:["US"],language:"en"})}),c=await b.json();if(!b.ok)return null;return{linkToken:c.link_token}}catch(a){return null}}async exchangePublicToken(a){try{let b=await fetch(`${this.apiUrl}/item/public_token/exchange`,{method:"POST",headers:{"Content-Type":"application/json","PLAID-CLIENT-ID":this.config.clientId,"PLAID-SECRET":this.config.secret},body:JSON.stringify({public_token:a})}),c=await b.json();if(!b.ok)return null;return{accessToken:c.access_token}}catch(a){return null}}}a.s(["PlaidProcessor",()=>c])}];

//# sourceMappingURL=apps_web_src_lib_payments_processors_plaid_ts_68d940a4._.js.map