module.exports=[90897,a=>{"use strict";let b=(0,a.i(203431).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["default",()=>b])},821278,a=>{"use strict";var b=a.i(90897);a.s(["Zap",()=>b.default])},129112,a=>{"use strict";a.i(156120),a.s([])},726531,a=>{"use strict";let b=(0,a.i(203431).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["default",()=>b])},349669,a=>{"use strict";var b=a.i(726531);a.s(["Filter",()=>b.default])},11226,a=>{"use strict";let b=(0,a.i(203431).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);a.s(["default",()=>b])},927760,a=>{"use strict";var b=a.i(11226);a.s(["RotateCcw",()=>b.default])},428979,a=>{"use strict";var b=a.i(699617);a.s(["Edit3",()=>b.default])},440064,a=>{"use strict";let b=(0,a.i(203431).default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);a.s(["default",()=>b])},560480,a=>{"use strict";var b=a.i(440064);a.s(["Database",()=>b.default])},805605,a=>{"use strict";var b=a.i(861467),c=a.i(783281),d=a.i(367301),e=a.i(916680),f=a.i(96250),g=a.i(766153),h=a.i(624126),i=a.i(349669),j=a.i(927760),k=a.i(352424),l=a.i(283753),m=a.i(339632),n=a.i(428979),o=a.i(638727),p=a.i(560480),q=a.i(821278);a.i(445255);var r=a.i(18170);a.i(288007);var s=a.i(986990);a.i(956852);var t=a.i(90125);a.i(19256);var u=a.i(417132);a.i(897346);var v=a.i(75892),w=a.i(700760),x=a.i(169021),y=(0,x.createServerReference)("40ab9d70d6580ff2961c19a49b16b0d79fb154a980",x.callServer,void 0,x.findSourceMapURL,"getActivityLogAction"),z=(0,x.createServerReference)("407af3536fdb297e86672e08c42b1cbcc44605b218",x.callServer,void 0,x.findSourceMapURL,"getActivityStatsAction"),A=(0,x.createServerReference)("402e94d78c610a36a4222e56d34f753c7b90de4f2a",x.callServer,void 0,x.findSourceMapURL,"previewUndoAction"),B=(0,x.createServerReference)("605b87bf15aa040b179e0be36b8187647d08cd6ade",x.callServer,void 0,x.findSourceMapURL,"undoActionAction");let C={low:{label:"Low",color:"bg-slate-500",icon:f.CheckCircle2},medium:{label:"Medium",color:"bg-blue-500",icon:h.Clock},high:{label:"High",color:"bg-amber-500",icon:e.AlertTriangle},critical:{label:"Critical",color:"bg-red-500",icon:k.Shield}},D={create:{label:"Created",icon:o.Plus},update:{label:"Updated",icon:n.Edit3},delete:{label:"Deleted",icon:m.Trash2},query:{label:"Queried",icon:p.Database},tool_call:{label:"Tool Call",icon:q.Zap}};function E(){let[a,f]=(0,c.useState)([]),[h,k]=(0,c.useState)(0),[m,n]=(0,c.useState)(null),[o,x]=(0,c.useTransition)(),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(0),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(!1),Q=(0,c.useCallback)(()=>{x(async()=>{let[a,b]=await Promise.all([y({limit:50,offset:50*I,severityFilter:E.length>0?E:void 0,actionFilter:G.length>0?G:void 0}),z()]);a.error||(f(a.entries),k(a.total)),!b.error&&b.stats&&n({totalActions:b.stats.totalActions,bySeverity:b.stats.bySeverity,criticalActionsCount:b.stats.criticalActionsCount,reversalRate:b.stats.reversalRate})})},[I,E,G]);(0,c.useEffect)(()=>{Q()},[Q]);let R=async a=>{let{preview:b}=await A(a.id);L({entry:a,preview:b}),N("")},S=async()=>{K&&(P(!0),(await B(K.entry.id,M||"User requested undo")).success&&(L(null),Q()),P(!1))};return(0,b.jsxs)("div",{className:"flex flex-col h-full p-4 space-y-4",children:[m&&(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-card",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Actions (7d)"}),(0,b.jsx)("div",{className:"text-2xl font-semibold",children:m.totalActions.toLocaleString()})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-card",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Critical Actions"}),(0,b.jsx)("div",{className:"text-2xl font-semibold text-red-500",children:m.criticalActionsCount})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-card",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Reversal Rate"}),(0,b.jsxs)("div",{className:"text-2xl font-semibold",children:[m.reversalRate.toFixed(1),"%"]})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-card",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"High Severity"}),(0,b.jsx)("div",{className:"text-2xl font-semibold text-amber-500",children:(m.bySeverity.high||0)+(m.bySeverity.critical||0)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(t.DropdownMenu,{children:[(0,b.jsx)(t.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(i.Filter,{className:"size-4"}),"Severity",E.length>0&&(0,b.jsx)(s.Badge,{variant:"secondary",className:"ml-1",children:E.length}),(0,b.jsx)(g.ChevronDown,{className:"size-3"})]})}),(0,b.jsxs)(t.DropdownMenuContent,{children:[(0,b.jsx)(t.DropdownMenuLabel,{children:"Filter by Severity"}),(0,b.jsx)(t.DropdownMenuSeparator,{}),Object.keys(C).map(a=>(0,b.jsxs)(t.DropdownMenuCheckboxItem,{checked:E.includes(a),onCheckedChange:()=>{F(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a]),J(0)},children:[(0,b.jsx)("span",{className:(0,w.cn)("size-2 rounded-full mr-2",C[a].color)}),C[a].label]},a))]})]}),(0,b.jsxs)(t.DropdownMenu,{children:[(0,b.jsx)(t.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(q.Zap,{className:"size-4"}),"Action",G.length>0&&(0,b.jsx)(s.Badge,{variant:"secondary",className:"ml-1",children:G.length}),(0,b.jsx)(g.ChevronDown,{className:"size-3"})]})}),(0,b.jsxs)(t.DropdownMenuContent,{children:[(0,b.jsx)(t.DropdownMenuLabel,{children:"Filter by Action"}),(0,b.jsx)(t.DropdownMenuSeparator,{}),Object.keys(D).map(a=>(0,b.jsx)(t.DropdownMenuCheckboxItem,{checked:G.includes(a),onCheckedChange:()=>{H(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a]),J(0)},children:D[a].label},a))]})]}),(E.length>0||G.length>0)&&(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{F([]),H([])},children:"Clear filters"}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[h.toLocaleString()," entries"]})]}),(0,b.jsx)("div",{className:"flex-1 border rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"divide-y overflow-auto h-full",children:o&&0===a.length?(0,b.jsxs)("div",{className:"flex items-center justify-center h-40 text-muted-foreground",children:[(0,b.jsx)(l.Sparkles,{className:"size-5 animate-pulse mr-2"}),"Loading activity..."]}):0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-40 text-muted-foreground",children:[(0,b.jsx)(p.Database,{className:"size-8 mb-2 opacity-40"}),(0,b.jsx)("p",{className:"text-sm",children:"No activity found"}),(0,b.jsx)("p",{className:"text-xs",children:"AI actions will appear here when performed"})]}):a.map(a=>{let c=C[a.severity]||C.low,e=D[a.action]||{label:a.action,icon:q.Zap},f=e.icon,g=c.icon;return(0,b.jsxs)("div",{className:(0,w.cn)("p-4 flex items-start gap-4 hover:bg-muted/50 transition-colors",a.reversed&&"opacity-50"),children:[(0,b.jsx)("div",{className:(0,w.cn)("size-8 rounded-full flex items-center justify-center shrink-0",c.color,"bg-opacity-20"),children:(0,b.jsx)(f,{className:(0,w.cn)("size-4",`text-${c.color.replace("bg-","")}`)})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:e.label}),(0,b.jsx)("span",{className:"text-muted-foreground",children:a.entityType}),a.entityId&&(0,b.jsxs)("code",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:[a.entityId.slice(0,8),"..."]}),a.reversed&&(0,b.jsx)(s.Badge,{variant:"outline",className:"text-xs",children:"Reversed"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(g,{className:"size-3"}),(0,b.jsx)("span",{children:c.label}),a.toolName&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Tool: ",a.toolName]})]}),a.changedFields.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Fields: ",a.changedFields.join(", ")]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,d.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),a.isReversible&&!a.reversed&&(0,b.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>R(a),className:"gap-1.5 h-7 text-xs",children:[(0,b.jsx)(j.RotateCcw,{className:"size-3"}),"Undo"]})]})]},a.id)})})}),h>50&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(r.Button,{variant:"outline",size:"sm",disabled:0===I,onClick:()=>J(a=>a-1),children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",I+1," of ",Math.ceil(h/50)]}),(0,b.jsx)(r.Button,{variant:"outline",size:"sm",disabled:(I+1)*50>=h,onClick:()=>J(a=>a+1),children:"Next"})]}),(0,b.jsx)(u.Dialog,{open:!!K,onOpenChange:a=>!a&&L(null),children:(0,b.jsxs)(u.DialogContent,{children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:"Undo AI Action"}),(0,b.jsx)(u.DialogDescription,{children:"This will restore the entity to its previous state. This action is logged."})]}),K?.preview&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-3 bg-muted rounded-lg space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Entity Type"}),(0,b.jsx)("span",{className:"font-medium",children:K.preview.entityType})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Operation"}),(0,b.jsx)("span",{className:"font-medium",children:K.preview.operation})]}),K.preview.changedFields.length>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Fields to Restore"}),(0,b.jsx)("span",{className:"font-medium",children:K.preview.changedFields.join(", ")})]})]}),!K.preview.canRevert&&(0,b.jsxs)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive",children:[(0,b.jsx)(e.AlertTriangle,{className:"size-4 inline mr-2"}),K.preview.reason||"Cannot revert this action"]}),(0,b.jsx)(v.Textarea,{placeholder:"Reason for undo (optional)",value:M,onChange:a=>N(a.target.value),rows:2})]}),(0,b.jsxs)(u.DialogFooter,{children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>L(null),children:"Cancel"}),(0,b.jsx)(r.Button,{onClick:S,disabled:O||!K?.preview?.canRevert,variant:"destructive",children:O?"Reverting...":"Confirm Undo"})]})]})})]})}a.s(["ActivityLogContent",()=>E],805605)},585840,a=>{"use strict";var b=a.i(861467);a.i(129112);var c=a.i(256003);function d(){return(0,b.jsxs)("div",{className:"flex flex-col h-full p-4 space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((a,d)=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,b.jsx)(c.Skeleton,{className:"h-4 w-20 mb-2"}),(0,b.jsx)(c.Skeleton,{className:"h-8 w-16"})]},d))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.Skeleton,{className:"h-9 w-32"}),(0,b.jsx)(c.Skeleton,{className:"h-9 w-32"}),(0,b.jsx)(c.Skeleton,{className:"h-9 w-40"})]}),(0,b.jsx)("div",{className:"border rounded-lg divide-y",children:Array.from({length:8}).map((a,d)=>(0,b.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)(c.Skeleton,{className:"size-8 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(c.Skeleton,{className:"h-4 w-48"}),(0,b.jsx)(c.Skeleton,{className:"h-3 w-32"})]}),(0,b.jsx)(c.Skeleton,{className:"h-8 w-20"})]},d))})]})}a.s(["ActivityLogSkeleton",()=>d])}];

//# sourceMappingURL=_50540cbd._.js.map