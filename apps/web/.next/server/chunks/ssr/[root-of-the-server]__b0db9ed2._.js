module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},468729,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx <module evaluation>","WorkDataView");a.s(["WorkDataView",0,b])},750692,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx","WorkDataView");a.s(["WorkDataView",0,b])},310669,a=>{"use strict";a.i(468729);var b=a.i(750692);a.n(b)},791498,a=>{a.n(a.i(140028))},271353,a=>{a.n(a.i(762034))},647767,a=>{"use strict";var b=a.i(429969);a.i(467361);var c=a.i(445074),d=a.i(933427);let e=`
  id,
  invoice_number,
  status,
  total_amount,
  paid_amount,
  balance_amount,
  created_at,
  due_date,
  archived_at,
  deleted_at,
  customers!invoices_customer_id_customers_id_fk (
    display_name,
    first_name,
    last_name
  )
`;async function f(a,b=50){let g=await (0,c.getActiveCompanyId)();if(!g)return{invoices:[],totalCount:0};let h=await (0,d.createServiceSupabaseClient)();if(!h)throw Error("Supabase client not configured");let i=(Math.max(a,1)-1)*b,{data:j,error:k,count:l}=await h.from("invoices").select(e,{count:"exact"}).eq("company_id",g).order("created_at",{ascending:!1}).range(i,i+b-1);if(k)throw Error(`Failed to load invoices: ${k.message}`);return{invoices:j??[],totalCount:l??0}}(0,b.cache)(async(a,b=50)=>{let e=await (0,c.getActiveCompanyId)();if(!e)return[];let f=await (0,d.createServiceSupabaseClient)();if(!f)throw Error("Supabase client not configured");let{data:g,error:h}=await f.rpc("get_invoices_summary",{p_company_id:e,p_statuses:a||null,p_limit:b});return h?(console.error("Error fetching invoices via RPC:",h),[]):g||[]});let g=(0,b.cache)(async(a,b)=>{let c=await (0,d.createServiceSupabaseClient)();if(!c)throw Error("Supabase client not configured");let{data:e,error:f}=await c.rpc("get_invoice_complete",{p_invoice_id:a,p_company_id:b});return f?(console.error("Error fetching invoice:",f),null):e?.[0]?.invoice_data||null});a.s(["INVOICES_PAGE_SIZE",0,50,"getInvoiceComplete",0,g,"getInvoicesPageData",()=>f])},977218,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call InvoicesKanban() from the server but InvoicesKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/invoices-kanban.tsx <module evaluation>","InvoicesKanban");a.s(["InvoicesKanban",0,b])},543679,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call InvoicesKanban() from the server but InvoicesKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/invoices-kanban.tsx","InvoicesKanban");a.s(["InvoicesKanban",0,b])},111047,a=>{"use strict";a.i(977218);var b=a.i(543679);a.n(b)},7e3,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call InvoicesTable() from the server but InvoicesTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/invoices-table.tsx <module evaluation>","InvoicesTable");a.s(["InvoicesTable",0,b])},300358,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call InvoicesTable() from the server but InvoicesTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/invoices-table.tsx","InvoicesTable");a.s(["InvoicesTable",0,b])},71359,a=>{"use strict";a.i(7e3);var b=a.i(300358);a.n(b)},786594,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(111047),f=a.i(71359),g=a.i(310669);a.i(467361);var h=a.i(445074),i=a.i(647767);async function j({searchParams:a}){await (0,h.isActiveCompanyOnboardingComplete)()||(0,d.redirect)("/dashboard"),await (0,h.getActiveCompanyId)()||(0,d.redirect)("/dashboard");let c=Number(a?.page)||1,{invoices:j,totalCount:k}=await (0,i.getInvoicesPageData)(c,i.INVOICES_PAGE_SIZE);if(!j)return(0,d.notFound)();let l=j.map(a=>{let b=Array.isArray(a.customers)?a.customers[0]:a.customers;return{id:a.id,invoiceNumber:a.invoice_number,customer:b?.display_name||`${b?.first_name||""} ${b?.last_name||""}`.trim()||"Unknown Customer",date:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),dueDate:a.due_date?new Date(a.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",amount:a.total_amount,status:(a=>{switch(a){case"draft":return"draft";case"sent":case"partial":default:return"pending";case"paid":return"paid";case"past_due":return"overdue"}})(a.status),archived_at:a.archived_at,deleted_at:a.deleted_at}});return(0,b.jsx)(g.WorkDataView,{kanban:(0,b.jsx)(e.InvoicesKanban,{invoices:l}),section:"invoices",table:(0,b.jsx)(f.InvoicesTable,{currentPage:c,enableVirtualization:!1,invoices:l,itemsPerPage:i.INVOICES_PAGE_SIZE,totalCount:k})})}a.i(250202);var k=a.i(709027);function l(){return(0,b.jsx)(k.DataTableListSkeleton,{})}async function m({searchParams:a}){let d=await a;return(0,b.jsx)("div",{className:"flex h-full flex-col",children:(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(l,{}),children:(0,b.jsx)(j,{searchParams:d})})})})}a.s(["default",()=>m],786594)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b0db9ed2._.js.map