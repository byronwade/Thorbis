{"version":3,"sources":["../../../../../../apps/web/src/components/customers/customer-page-content.tsx","../../../../../../apps/web/src/actions/data%3A07e4db%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/customers/customer-invoices-table.tsx","../../../../../../apps/web/src/actions/data%3Aaeb271%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/invoices/quick-pay-dialog.tsx","../../../../../../apps/web/src/actions/data%3A58dcbe%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/customers/payment-method-card.tsx","../../../../../../apps/web/src/components/ui/credit-card-visual.tsx","../../../../../../apps/web/src/components/customers/properties-table.tsx","../../../../../../apps/web/src/actions/data%3A512467%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/work/job-enrichment-panel.tsx","../../../../../../apps/web/src/components/work/job-details/service-location-map.tsx","../../../../../../apps/web/src/components/customers/property-risk-card.tsx"],"sourcesContent":["/**\n * Customer Page Content - Comprehensive Single Page View\n * Matches job details page structure with collapsible sections\n */\n\n\"use client\";\n\nimport type { LucideIcon } from \"lucide-react\";\nimport {\n\tAlertTriangle,\n\tArchive,\n\tBuilding2,\n\tCalendar,\n\tCreditCard,\n\tDownload,\n\tFileText,\n\tLoader2,\n\tMail,\n\tMapPin,\n\tMoreVertical,\n\tPackage,\n\tPhone,\n\tPlus,\n\tPrinter,\n\tReceipt,\n\tSave,\n\tSearch,\n\tShare2,\n\tShieldCheck,\n\tSparkles,\n\tTrendingUp,\n\tUser,\n\tUserCog,\n\tWrench,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport {\n\ttype ReactNode,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseState,\n} from \"react\";\nimport { enrichCustomerData } from \"@/actions/customer-enrichment\";\nimport { updateEntityTags } from \"@/actions/entity-tags\";\nimport { CustomerInvoicesTable } from \"@/components/customers/customer-invoices-table\";\nimport { PaymentMethodCard } from \"@/components/customers/payment-method-card\";\nimport { PropertiesTable } from \"@/components/customers/properties-table\";\nimport { PropertyRiskCard } from \"@/components/customers/property-risk-card\";\nimport {\n\tDetailPageContentLayout,\n\ttype DetailPageHeaderConfig,\n} from \"@/components/layout/detail-page-content-layout\";\nimport { DetailPageSurface } from \"@/components/layout/detail-page-shell\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tStandardFormField,\n\tStandardFormRow,\n} from \"@/components/ui/standard-form-field\";\nimport {\n\tCustomerStatusBadge,\n\tInvoiceStatusBadge,\n\tJobStatusBadge,\n} from \"@/components/ui/status-badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n\tUnifiedAccordionContent,\n\ttype UnifiedAccordionSection,\n} from \"@/components/ui/unified-accordion\";\nimport { EntityTags } from \"@/components/work/entity-tags\";\nimport { JobsTable } from \"@/components/work/jobs-table\";\nimport { useSectionShortcuts } from \"@/hooks/use-section-shortcuts\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatCurrencyFromDollars, formatDate } from \"@/lib/formatters\";\nimport { useToolbarActionsStore } from \"@/lib/stores/toolbar-actions-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype CustomerPageContentProps = {\n\tcustomerData: any;\n\tmetrics: any;\n};\n\nexport function CustomerPageContent({\n\tcustomerData,\n\tmetrics,\n}: CustomerPageContentProps) {\n\tconst router = useRouter();\n\tconst { toast } = useToast();\n\tconst pathname = usePathname();\n\tconst [localCustomer, setLocalCustomer] = useState(customerData.customer);\n\tconst [hasChanges, setHasChanges] = useState(false);\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst [isEnriching, setIsEnriching] = useState(false);\n\tconst setToolbarActions = useToolbarActionsStore((state) => state.setActions);\n\n\t// Extract data before hooks (Customer 360° view - all related entities)\n\tconst {\n\t\tcustomer,\n\t\tproperties = [],\n\t\tjobs = [],\n\t\tinvoices = [],\n\t\testimates = [], // NEW\n\t\tappointments = [], // NEW\n\t\tcontracts = [], // NEW\n\t\tpayments = [], // NEW\n\t\tmaintenancePlans = [], // NEW\n\t\tserviceAgreements = [], // NEW\n\t\tactivities = [],\n\t\tequipment = [],\n\t\tattachments = [],\n\t\tpaymentMethods = [],\n\t\tenrichmentData,\n\t} = customerData;\n\n\t// Extract customer tags from junction table (now included in RPC response)\n\tconst customerTags = useMemo(() => {\n\t\tif (!customer?.customer_tags) return [];\n\t\treturn customer.customer_tags.map((ct: any) => ({\n\t\t\tid: ct.id,\n\t\t\tname: ct.name,\n\t\t\tslug: ct.slug,\n\t\t\tcolor: ct.color,\n\t\t\tcategory: ct.category,\n\t\t\ticon: ct.icon,\n\t\t}));\n\t}, [customer?.customer_tags]);\n\n\t// Keyboard shortcuts: Ctrl+1 through Ctrl+9 to scroll and expand accordion sections\n\tconst sectionShortcuts = useMemo(\n\t\t() => ({\n\t\t\t\"1\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"customer-info\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"2\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"properties\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"3\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"jobs\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"4\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"invoices\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"5\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"equipment\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"6\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"payment-methods\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"7\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"estimates\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"8\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"appointments\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"9\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"contracts\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t}),\n\t\t[],\n\t);\n\n\tuseSectionShortcuts(sectionShortcuts);\n\n\t// Handle field changes\n\tconst handleFieldChange = (field: string, value: any) => {\n\t\tsetLocalCustomer((prev: any) => ({\n\t\t\t...prev,\n\t\t\t[field]: value,\n\t\t}));\n\t\tsetHasChanges(true);\n\t};\n\n\tconst customerStatus = (\n\t\tlocalCustomer?.status ||\n\t\tcustomer?.status ||\n\t\t\"active\"\n\t)?.toLowerCase();\n\n\tconst displayName = useMemo(() => {\n\t\tconst explicitName =\n\t\t\tlocalCustomer?.display_name ||\n\t\t\tlocalCustomer?.company_name ||\n\t\t\tcustomer?.display_name ||\n\t\t\tcustomer?.company_name;\n\n\t\tif (explicitName && explicitName.trim().length > 0) {\n\t\t\treturn explicitName.trim();\n\t\t}\n\n\t\tconst firstName = localCustomer?.first_name || customer?.first_name;\n\t\tconst lastName = localCustomer?.last_name || customer?.last_name;\n\t\tconst composed = [firstName, lastName].filter(Boolean).join(\" \").trim();\n\n\t\tif (composed.length > 0) {\n\t\t\treturn composed;\n\t\t}\n\n\t\treturn localCustomer?.email || customer?.email || \"Unnamed Customer\";\n\t}, [customer, localCustomer]);\n\n\tconst handlePrimaryNameChange = (value: string) => {\n\t\tconst trimmed = value;\n\n\t\tif (localCustomer?.company_name || customer?.company_name) {\n\t\t\thandleFieldChange(\"company_name\", trimmed);\n\t\t\treturn;\n\t\t}\n\n\t\tif (localCustomer?.display_name || customer?.display_name) {\n\t\t\thandleFieldChange(\"display_name\", trimmed);\n\t\t\treturn;\n\t\t}\n\n\t\tconst cleaned = trimmed.trim();\n\n\t\tif (!cleaned) {\n\t\t\thandleFieldChange(\"first_name\", \"\");\n\t\t\thandleFieldChange(\"last_name\", \"\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst parts = cleaned.split(/\\s+/);\n\t\tif (parts.length === 1) {\n\t\t\thandleFieldChange(\"first_name\", parts[0]);\n\t\t\thandleFieldChange(\"last_name\", \"\");\n\t\t} else {\n\t\t\thandleFieldChange(\"first_name\", parts.slice(0, -1).join(\" \"));\n\t\t\thandleFieldChange(\"last_name\", parts.at(-1));\n\t\t}\n\t};\n\n\tconst customerIdentifier = useMemo(() => {\n\t\tconst candidate =\n\t\t\tcustomer?.customer_number ??\n\t\t\tcustomer?.account_number ??\n\t\t\tcustomer?.reference_id ??\n\t\t\tcustomer?.external_id;\n\n\t\tif (candidate) {\n\t\t\treturn `#${candidate}`;\n\t\t}\n\n\t\tif (customer?.id) {\n\t\t\treturn `#${customer.id.slice(0, 8).toUpperCase()}`;\n\t\t}\n\n\t\treturn \"#CUSTOMER\";\n\t}, [customer]);\n\n\tconst primaryEmail = localCustomer?.email || customer?.email || null;\n\tconst primaryPhone =\n\t\tlocalCustomer?.phone ||\n\t\tlocalCustomer?.mobile_phone ||\n\t\tcustomer?.phone ||\n\t\tcustomer?.mobile_phone ||\n\t\tnull;\n\n\tconst primaryProperty = useMemo(() => {\n\t\tif (properties.length > 0) {\n\t\t\treturn properties[0];\n\t\t}\n\t\treturn null;\n\t}, [properties]);\n\n\tconst customerSince =\n\t\tlocalCustomer?.created_at ??\n\t\tcustomer?.created_at ??\n\t\tcustomer?.createdAt ??\n\t\tnull;\n\n\tconst outstandingBalance =\n\t\tmetrics?.outstandingBalance ??\n\t\tcustomer?.outstanding_balance ??\n\t\tcustomer?.outstandingBalance ??\n\t\t0;\n\n\tconst membershipLabel =\n\t\tlocalCustomer?.membership_tier ??\n\t\tlocalCustomer?.membership ??\n\t\tlocalCustomer?.plan ??\n\t\tcustomer?.membership_tier ??\n\t\tcustomer?.membership ??\n\t\tcustomer?.plan ??\n\t\tnull;\n\n\tconst portalEnabled =\n\t\tlocalCustomer?.portal_enabled ??\n\t\tcustomer?.portal_enabled ??\n\t\tcustomer?.portalEnabled ??\n\t\tfalse;\n\n\t// Save changes\n\tconst handleSave = async () => {\n\t\tsetIsSaving(true);\n\t\ttry {\n\t\t\t// TODO: Implement save customer action\n\t\t\ttoast.success(\"Customer updated successfully\");\n\t\t\tsetHasChanges(false);\n\t\t\t// Server Action handles revalidation automatically\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to update customer\");\n\t\t} finally {\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetLocalCustomer(customer);\n\t\tsetHasChanges(false);\n\t};\n\n\t// Enrich customer data with external APIs\n\tconst handleEnrich = async () => {\n\t\tsetIsEnriching(true);\n\t\ttry {\n\t\t\tconst result = await enrichCustomerData(customer.id);\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Customer data enriched successfully! Refreshing page...\");\n\t\t\t\t// Refresh the page to show updated data\n\t\t\t\trouter.refresh();\n\t\t\t} else {\n\t\t\t\ttoast.error(result.error || \"Failed to enrich customer data\");\n\t\t\t}\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to enrich customer data\");\n\t\t} finally {\n\t\t\tsetIsEnriching(false);\n\t\t}\n\t};\n\n\t// Helper to determine badge type based on status\n\tconst _getStatusBadge = (\n\t\tstatus: string,\n\t\tentityType: \"job\" | \"invoice\" = \"job\",\n\t) => {\n\t\tif (entityType === \"invoice\") {\n\t\t\treturn <InvoiceStatusBadge status={status} />;\n\t\t}\n\t\treturn <JobStatusBadge status={status} />;\n\t};\n\n\tconst headerBadges = [\n\t\t<Badge className=\"font-mono\" key=\"identifier\" variant=\"outline\">\n\t\t\t{customerIdentifier}\n\t\t</Badge>,\n\t\t<CustomerStatusBadge status={customerStatus || \"active\"} />,\n\t\tmembershipLabel ? (\n\t\t\t<Badge key=\"membership\" variant=\"secondary\">\n\t\t\t\t{membershipLabel}\n\t\t\t</Badge>\n\t\t) : null,\n\t\tportalEnabled ? (\n\t\t\t<Badge className=\"gap-1 text-xs\" key=\"portal\" variant=\"outline\">\n\t\t\t\t<Sparkles className=\"h-3.5 w-3.5\" /> Portal Enabled\n\t\t\t</Badge>\n\t\t) : null,\n\t].filter(Boolean);\n\n\tconst quickActionConfigs = [\n\t\t{\n\t\t\tkey: \"new-job\",\n\t\t\tlabel: \"New Job\",\n\t\t\ticon: Plus,\n\t\t\tonClick: () =>\n\t\t\t\trouter.push(`/dashboard/work/new?customerId=${customer.id}`),\n\t\t},\n\t\t{\n\t\t\tkey: \"new-invoice\",\n\t\t\tlabel: \"New Invoice\",\n\t\t\ticon: FileText,\n\t\t\tvariant: \"secondary\" as const,\n\t\t\tonClick: () =>\n\t\t\t\trouter.push(`/dashboard/work/invoices/new?customerId=${customer.id}`),\n\t\t},\n\t\t{\n\t\t\tkey: \"schedule-appointment\",\n\t\t\tlabel: \"Schedule Appointment\",\n\t\t\ticon: Calendar,\n\t\t\tvariant: \"secondary\" as const,\n\t\t\tonClick: () =>\n\t\t\t\trouter.push(`/dashboard/schedule/new?customerId=${customer.id}`),\n\t\t},\n\t\t{\n\t\t\tkey: \"add-property\",\n\t\t\tlabel: \"Add Property\",\n\t\t\ticon: Building2,\n\t\t\tvariant: \"outline\" as const,\n\t\t\tonClick: () =>\n\t\t\t\trouter.push(`/dashboard/work/properties/new?customerId=${customer.id}`),\n\t\t},\n\t] as const;\n\n\tconst renderQuickActions = () =>\n\t\tquickActionConfigs.map((config) => {\n\t\t\tconst { key, label, icon: Icon, onClick } = config;\n\t\t\tconst variant = \"variant\" in config ? config.variant : undefined;\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tkey={key}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant={variant ?? \"default\"}\n\t\t\t\t>\n\t\t\t\t\t<Icon className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t{label}\n\t\t\t\t</Button>\n\t\t\t);\n\t\t});\n\n\tconst getToolbarActions = useCallback(() => {\n\t\tif (hasChanges) {\n\t\t\treturn (\n\t\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t\t<Button disabled={isSaving} onClick={handleSave} size=\"sm\">\n\t\t\t\t\t\t<Save className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t{isSaving ? \"Saving...\" : \"Save Changes\"}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleCancel} size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t{renderQuickActions()}\n\t\t\t\t<Separator className=\"h-6\" orientation=\"vertical\" />\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t<Button className=\"h-8 w-8\" size=\"icon\" variant=\"outline\">\n\t\t\t\t\t\t\t<MoreVertical className=\"size-4\" />\n\t\t\t\t\t\t\t<span className=\"sr-only\">More actions</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-56\">\n\t\t\t\t\t\t<DropdownMenuLabel className=\"text-muted-foreground text-xs font-medium tracking-wide uppercase\">\n\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t</DropdownMenuLabel>\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\trouter.push(`/dashboard/customers/${customer.id}/edit`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserCog className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tEdit Full Profile\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tdisabled={isEnriching}\n\t\t\t\t\t\t\tonClick={handleEnrich}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isEnriching ? (\n\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 size-3.5 animate-spin\" />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Search className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{isEnriching ? \"Enriching...\" : \"Enrich Customer Data\"}\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuItem onClick={() => {}}>\n\t\t\t\t\t\t\t<Download className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tExport Customer Data\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem onClick={() => {}}>\n\t\t\t\t\t\t\t<Printer className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tPrint Customer Profile\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem onClick={() => {}}>\n\t\t\t\t\t\t\t<Share2 className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tShare Customer Link\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t<DropdownMenuItem onClick={() => {}}>\n\t\t\t\t\t\t\t<User className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tMerge with Another Customer\n\t\t\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\tclassName=\"text-destructive focus:text-destructive\"\n\t\t\t\t\t\t\tonClick={() => {}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Archive className=\"mr-2 size-3.5\" />\n\t\t\t\t\t\t\tArchive Customer\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\t\t\t</div>\n\t\t);\n\t}, [\n\t\thasChanges,\n\t\tisSaving,\n\t\tisEnriching,\n\t\thandleSave,\n\t\thandleCancel,\n\t\thandleEnrich,\n\t\trenderQuickActions,\n\t\trouter,\n\t\tcustomer.id,\n\t]);\n\n\t// Update toolbar actions when hasChanges or isSaving changes\n\tuseEffect(() => {\n\t\tif (pathname) {\n\t\t\tsetToolbarActions(pathname, getToolbarActions());\n\t\t}\n\t}, [pathname, setToolbarActions, getToolbarActions]);\n\n\tconst metadataItems: DetailPageHeaderConfig[\"metadata\"] = [\n\t\t{\n\t\t\tlabel: \"Outstanding Balance\",\n\t\t\ticon: <CreditCard className=\"h-3.5 w-3.5\" />,\n\t\t\tvalue: formatCurrencyFromDollars(outstandingBalance, { decimals: 0 }),\n\t\t\thelperText: \"Open invoices\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"Lifetime Revenue\",\n\t\t\ticon: <TrendingUp className=\"h-3.5 w-3.5\" />,\n\t\t\tvalue: formatCurrencyFromDollars(metrics?.totalRevenue ?? 0, {\n\t\t\t\tdecimals: 0,\n\t\t\t}),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Jobs\",\n\t\t\ticon: <Wrench className=\"h-3.5 w-3.5\" />,\n\t\t\tvalue: metrics?.totalJobs ?? jobs.length,\n\t\t\thelperText: \"All time\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"Properties\",\n\t\t\ticon: <Building2 className=\"h-3.5 w-3.5\" />,\n\t\t\tvalue: metrics?.totalProperties ?? properties.length,\n\t\t},\n\t];\n\n\tconst subtitleContent = (\n\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t<span className=\"inline-flex items-center gap-1\">\n\t\t\t\t<Calendar className=\"h-4 w-4\" />\n\t\t\t\t{customerSince\n\t\t\t\t\t? `Customer since ${formatDate(customerSince, \"short\")}`\n\t\t\t\t\t: \"Customer since —\"}\n\t\t\t</span>\n\t\t\t{primaryProperty ? (\n\t\t\t\t<>\n\t\t\t\t\t<span aria-hidden=\"true\">•</span>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"text-muted-foreground hover:text-foreground inline-flex items-center gap-1 transition-colors\"\n\t\t\t\t\t\thref={`/dashboard/work/properties/${primaryProperty.id}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MapPin className=\"h-4 w-4\" />\n\t\t\t\t\t\t{primaryProperty.name || primaryProperty.address}\n\t\t\t\t\t</Link>\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</div>\n\t);\n\n\tconst avatarInitials = displayName\n\t\t.split(\" \")\n\t\t.map((part: string) => part?.[0])\n\t\t.filter(Boolean)\n\t\t.join(\"\")\n\t\t.slice(0, 2)\n\t\t.toUpperCase();\n\n\tconst headerConfig: DetailPageHeaderConfig = {\n\t\ttitle: displayName,\n\t\tsubtitle: subtitleContent,\n\t\tbadges: headerBadges,\n\t\tmetadata: metadataItems,\n\t\tleadingVisual: (\n\t\t\t<Avatar className=\"h-12 w-12\">\n\t\t\t\t<AvatarImage\n\t\t\t\t\talt={displayName}\n\t\t\t\t\tsrc={customer?.avatar_url ?? undefined}\n\t\t\t\t/>\n\t\t\t\t<AvatarFallback>{avatarInitials || \"CU\"}</AvatarFallback>\n\t\t\t</Avatar>\n\t\t),\n\t};\n\n\tconst contactTileData: Array<{\n\t\tkey: string;\n\t\ticon: LucideIcon;\n\t\tlabel: string;\n\t\tvalue: ReactNode;\n\t\thref?: string;\n\t}> = [\n\t\t{\n\t\t\tkey: \"primary-email\",\n\t\t\ticon: Mail,\n\t\t\tlabel: \"Primary Email\",\n\t\t\tvalue: primaryEmail ?? \"Not provided\",\n\t\t\thref: primaryEmail ? `mailto:${primaryEmail}` : undefined,\n\t\t},\n\t\t{\n\t\t\tkey: \"primary-phone\",\n\t\t\ticon: Phone,\n\t\t\tlabel: \"Primary Phone\",\n\t\t\tvalue: primaryPhone ?? \"Not provided\",\n\t\t\thref: primaryPhone ? `tel:${primaryPhone}` : undefined,\n\t\t},\n\t\t{\n\t\t\tkey: \"portal\",\n\t\t\ticon: Sparkles,\n\t\t\tlabel: \"Portal Access\",\n\t\t\tvalue: portalEnabled ? \"Enabled\" : \"Disabled\",\n\t\t},\n\t\t{\n\t\t\tkey: \"membership\",\n\t\t\ticon: ShieldCheck,\n\t\t\tlabel: \"Membership\",\n\t\t\tvalue: membershipLabel ?? \"Standard\",\n\t\t},\n\t];\n\n\tconst metricTileData: Array<{\n\t\tkey: string;\n\t\ticon: LucideIcon;\n\t\tlabel: string;\n\t\tvalue: ReactNode;\n\t}> = [\n\t\t{\n\t\t\tkey: \"outstanding\",\n\t\t\ticon: FileText,\n\t\t\tlabel: \"Outstanding\",\n\t\t\tvalue: formatCurrencyFromDollars(outstandingBalance, { decimals: 0 }),\n\t\t},\n\t\t{\n\t\t\tkey: \"jobs\",\n\t\t\ticon: TrendingUp,\n\t\t\tlabel: \"Total Jobs\",\n\t\t\tvalue: metrics?.totalJobs ?? jobs.length,\n\t\t},\n\t\t{\n\t\t\tkey: \"properties\",\n\t\t\ticon: Building2,\n\t\t\tlabel: \"Properties\",\n\t\t\tvalue: metrics?.totalProperties ?? properties.length,\n\t\t},\n\t\t{\n\t\t\tkey: \"lifetime-revenue\",\n\t\t\ticon: Receipt,\n\t\t\tlabel: \"Lifetime Revenue\",\n\t\t\tvalue: formatCurrencyFromDollars(metrics?.totalRevenue ?? 0, {\n\t\t\t\tdecimals: 0,\n\t\t\t}),\n\t\t},\n\t];\n\n\tconst overviewSurface = (\n\t\t<DetailPageSurface padding=\"lg\" variant=\"muted\">\n\t\t\t<div className=\"flex flex-col gap-4 md:gap-6\">\n\t\t\t\t<div className=\"flex flex-col gap-3\">\n\t\t\t\t\t<Label className=\"text-muted-foreground text-xs font-medium uppercase\">\n\t\t\t\t\t\tDisplay Name\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"border-border/40 bg-background focus-visible:ring-primary/50 h-11 md:h-12 rounded-lg border px-3 md:px-4 text-lg md:text-xl font-semibold shadow-none focus-visible:ring-2 sm:text-2xl\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonChange={(e) => handlePrimaryNameChange(e.target.value)}\n\t\t\t\t\t\tplaceholder=\"Enter customer name...\"\n\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className=\"text-muted-foreground text-[0.7rem] md:text-xs\">\n\t\t\t\t\t\tUpdate how this customer appears across Thorbis. Changes are saved\n\t\t\t\t\t\twhen you select Save changes.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Contact Info - 2 columns on mobile, full grid on larger screens */}\n\t\t\t\t<div className=\"grid gap-2 md:gap-3 grid-cols-1 sm:grid-cols-2\">\n\t\t\t\t\t{contactTileData.map(({ key, icon: Icon, label, value, href }) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"border-border/40 bg-background rounded-lg border px-3 py-2.5 md:py-3\"\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 md:gap-3\">\n\t\t\t\t\t\t\t\t<Icon className=\"text-muted-foreground h-3.5 w-3.5 md:h-4 md:w-4 shrink-0\" />\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col min-w-0\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-[0.65rem] md:text-xs font-medium uppercase\">\n\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{href ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs md:text-sm font-semibold hover:underline truncate\"\n\t\t\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs md:text-sm font-semibold truncate\">\n\t\t\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Metrics - 2 columns on mobile, 4 on desktop */}\n\t\t\t\t<div className=\"grid gap-2 md:gap-3 grid-cols-2 lg:grid-cols-4\">\n\t\t\t\t\t{metricTileData.map(({ key, icon: Icon, label, value }) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"border-border/40 bg-background rounded-lg border px-3 py-2.5 md:py-3\"\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex flex-col gap-1.5 md:gap-2\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Icon className=\"text-muted-foreground h-3.5 w-3.5 md:h-4 md:w-4 shrink-0\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-[0.65rem] md:text-xs font-medium uppercase leading-none\">\n\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-sm md:text-base font-semibold truncate\">\n\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</DetailPageSurface>\n\t);\n\n\tconst customSections = useMemo<UnifiedAccordionSection[]>(() => {\n\t\tconst sections: UnifiedAccordionSection[] = [\n\t\t\t{\n\t\t\t\tid: \"customer-info\",\n\t\t\t\ttitle: \"Customer Information\",\n\t\t\t\ticon: <User className=\"size-4\" />,\n\t\t\t\tdefaultOpen: true,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t<StandardFormRow cols={2}>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<StandardFormField label=\"First Name\" htmlFor=\"first_name\">\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"first_name\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"first_name\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.first_name || \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormField label=\"Last Name\" htmlFor=\"last_name\">\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"last_name\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"last_name\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.last_name || \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Company Name\"\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"company_name\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"company_name\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"company_name\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.company_name || \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<StandardFormField label=\"Email\" htmlFor=\"email\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"email\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.email || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{customer.email && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"icon\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={`mailto:${customer.email}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormField label=\"Phone\" htmlFor=\"phone\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"phone\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.phone || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{customer.phone && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"icon\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={`tel:${customer.phone}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Mobile Phone\"\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"mobile_phone\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"mobile_phone\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"mobile_phone\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.mobile_phone || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{customer.mobile_phone && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"icon\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={`tel:${customer.mobile_phone}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</StandardFormRow>\n\n\t\t\t\t\t\t\t<StandardFormRow cols={2}>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<StandardFormField label=\"Address\" htmlFor=\"address\">\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tid=\"address\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"address\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.address || \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormRow cols={2}>\n\t\t\t\t\t\t\t\t\t\t<StandardFormField label=\"City\" htmlFor=\"city\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"city\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"city\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.city || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t\t<StandardFormField label=\"State\" htmlFor=\"state\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"state\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"state\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.state || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Postal Code\"\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"postal_code\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"postal_code\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"postal_code\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.postal_code || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t\t<StandardFormField label=\"Country\" htmlFor=\"country\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"country\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"country\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.country || \"\"}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</StandardFormField>\n\t\t\t\t\t\t\t\t\t</StandardFormRow>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tags\"\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"tags\"\n\t\t\t\t\t\t\t\t\t\tdescription=\"Comma separated tags\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"tags\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"tags\",\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value.split(\",\").map((tag) => tag.trim()),\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Comma separated tags\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={(localCustomer.tags || []).join(\", \")}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Notes\"\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"notes\"\n\t\t\t\t\t\t\t\t\t\tdescription=\"Internal notes about this customer\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tid=\"notes\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleFieldChange(\"notes\", e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Internal notes about this customer\"\n\t\t\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\t\t\tvalue={localCustomer.notes || \"\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</StandardFormField>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</StandardFormRow>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"properties\",\n\t\t\t\ttitle: \"Properties\",\n\t\t\t\ticon: <Building2 className=\"size-4\" />,\n\t\t\t\tcount: properties.length,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\trouter.push(\n\t\t\t\t\t\t\t\t`/dashboard/work/properties/new?customerId=${customer.id}`,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> Add Property\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tManage service locations for this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<PropertiesTable\n\t\t\t\t\t\t\tcustomerId={customer.id}\n\t\t\t\t\t\t\titemsPerPage={10}\n\t\t\t\t\t\t\tproperties={properties}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// Property Risk Assessment - uses ATTOM, FEMA Flood, and Crime data APIs\n\t\t\t{\n\t\t\t\tid: \"property-risk\",\n\t\t\t\ttitle: \"Property Risk Assessment\",\n\t\t\t\ticon: <AlertTriangle className=\"size-4\" />,\n\t\t\t\tcount: properties.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tRisk analysis for service properties using flood, crime, and property data.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{properties.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"space-y-4 p-4\">\n\t\t\t\t\t\t\t\t{properties.slice(0, 3).map((property: any) => (\n\t\t\t\t\t\t\t\t\t<PropertyRiskCard\n\t\t\t\t\t\t\t\t\t\tkey={property.id}\n\t\t\t\t\t\t\t\t\t\tpropertyId={property.id}\n\t\t\t\t\t\t\t\t\t\tpropertyName={property.name}\n\t\t\t\t\t\t\t\t\t\taddress={{\n\t\t\t\t\t\t\t\t\t\t\tstreet: property.address || property.street,\n\t\t\t\t\t\t\t\t\t\t\tcity: property.city,\n\t\t\t\t\t\t\t\t\t\t\tstate: property.state,\n\t\t\t\t\t\t\t\t\t\t\tpostal_code: property.postal_code || property.zip,\n\t\t\t\t\t\t\t\t\t\t\tlat: property.latitude,\n\t\t\t\t\t\t\t\t\t\t\tlng: property.longitude,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{properties.length > 3 && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-center text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tShowing top 3 properties.{\" \"}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'[data-section-id=\"properties\"]',\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tif (element) {\n\t\t\t\t\t\t\t\t\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\" });\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tView all {properties.length} properties\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<AlertTriangle className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tAdd properties to see risk assessments.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"jobs\",\n\t\t\t\ttitle: \"Jobs\",\n\t\t\t\ticon: <Wrench className=\"size-4\" />,\n\t\t\t\tcount: jobs.length,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\trouter.push(`/dashboard/work/new?customerId=${customer.id}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> New Job\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tRecent jobs associated with this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<JobsTable itemsPerPage={10} jobs={jobs} />\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"invoices\",\n\t\t\t\ttitle: \"Invoices\",\n\t\t\t\ticon: <Receipt className=\"size-4\" />,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\trouter.push(\n\t\t\t\t\t\t\t\t`/dashboard/work/invoices/new?customerId=${customer.id}`,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> New Invoice\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tBilling history and outstanding invoices.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<CustomerInvoicesTable\n\t\t\t\t\t\t\tinvoices={invoices || []}\n\t\t\t\t\t\t\tonUpdate={() => {\n\t\t\t\t\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"equipment\",\n\t\t\t\ttitle: \"Equipment\",\n\t\t\t\ticon: <Package className=\"size-4\" />,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button onClick={() => {}} size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> Add Equipment\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t{equipment.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t{equipment.map((item: any) => (\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-lg border p-4\" key={item.id}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-primary/10 rounded-md p-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Wrench className=\"text-primary h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{item.name}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.type || item.category || \"Equipment\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 space-y-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{item.serial_number && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tSerial: {item.serial_number}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{item.manufacturer && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.manufacturer}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{item.install_date && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Calendar className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tInstalled {formatDate(item.install_date, \"short\")}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center rounded-lg border border-dashed p-6 text-center\">\n\t\t\t\t\t\t\t\t<Package className=\"text-muted-foreground h-6 w-6\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo equipment on record for this customer yet.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"payment-methods\",\n\t\t\t\ttitle: \"Payment Methods\",\n\t\t\t\ticon: <CreditCard className=\"size-4\" />,\n\t\t\t\tcount: paymentMethods.length,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button onClick={() => {}} size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> Add Payment Method\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t{paymentMethods.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t\t\t\t\t{paymentMethods.map((method: any) => {\n\t\t\t\t\t\t\t\t\t// Determine payment method type\n\t\t\t\t\t\t\t\t\tconst type =\n\t\t\t\t\t\t\t\t\t\tmethod.type === \"ach\" || method.type === \"bank\"\n\t\t\t\t\t\t\t\t\t\t\t? method.type\n\t\t\t\t\t\t\t\t\t\t\t: \"card\";\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<PaymentMethodCard\n\t\t\t\t\t\t\t\t\t\t\taccount_type={method.account_type}\n\t\t\t\t\t\t\t\t\t\t\tbank_name={method.bank_name}\n\t\t\t\t\t\t\t\t\t\t\tcard_brand={method.brand || method.card_brand}\n\t\t\t\t\t\t\t\t\t\t\tcard_exp_month={method.exp_month || method.card_exp_month}\n\t\t\t\t\t\t\t\t\t\t\tcard_exp_year={method.exp_year || method.card_exp_year}\n\t\t\t\t\t\t\t\t\t\t\tcard_last4={\n\t\t\t\t\t\t\t\t\t\t\t\tmethod.last4 ||\n\t\t\t\t\t\t\t\t\t\t\t\tmethod.card_last_four ||\n\t\t\t\t\t\t\t\t\t\t\t\tmethod.card_last4\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcardholder_name={method.cardholder_name || method.name}\n\t\t\t\t\t\t\t\t\t\t\tid={method.id}\n\t\t\t\t\t\t\t\t\t\t\tis_default={method.is_default}\n\t\t\t\t\t\t\t\t\t\t\tis_verified={method.is_verified}\n\t\t\t\t\t\t\t\t\t\t\tkey={method.id}\n\t\t\t\t\t\t\t\t\t\t\tnickname={method.nickname}\n\t\t\t\t\t\t\t\t\t\t\tonRemove={() => {}}\n\t\t\t\t\t\t\t\t\t\t\tonSetDefault={() => {}}\n\t\t\t\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"bg-muted/30 flex flex-col items-center justify-center rounded-lg border border-dashed py-12 text-center\">\n\t\t\t\t\t\t\t\t<CreditCard className=\"text-muted-foreground/50 mb-3 size-12\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tNo payment methods on file\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">\n\t\t\t\t\t\t\t\t\tAdd a card or bank account for quick invoicing\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Estimates Section\n\t\t\t{\n\t\t\t\tid: \"estimates\",\n\t\t\t\ttitle: \"Estimates\",\n\t\t\t\ticon: <FileText className=\"size-4\" />,\n\t\t\t\tcount: estimates.length,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\trouter.push(\n\t\t\t\t\t\t\t\t`/dashboard/work/estimates/new?customerId=${customer.id}`,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> New Estimate\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tEstimates and quotes provided to this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{estimates.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tEstimate #\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tTotal\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{estimates.map((estimate: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/30 border-b\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={estimate.id}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t#{estimate.estimate_number || estimate.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(estimate.created_at, \"short\")}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrencyFromDollars(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\testimate.total_amount / 100,\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{estimate.status || \"draft\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/estimates/${estimate.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<FileText className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo estimates for this customer yet.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Appointments Section\n\t\t\t{\n\t\t\t\tid: \"appointments\",\n\t\t\t\ttitle: \"Appointments\",\n\t\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\t\tcount: appointments.length,\n\t\t\t\tactions: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\trouter.push(`/dashboard/schedule?customerId=${customer.id}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" /> Schedule Appointment\n\t\t\t\t\t</Button>\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tScheduled appointments and service visits for this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{appointments.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tDate & Time\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tType\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tProperty\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tJob\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{appointments.map((appointment: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/30 border-b\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={appointment.id}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{new Date(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappointment.scheduled_start,\n\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{appointment.type || \"Service\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{appointment.property?.name ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappointment.property?.address ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{appointment.job?.job_number\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `#${appointment.job.job_number}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{appointment.status || \"scheduled\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/appointments/${appointment.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<Calendar className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo appointments scheduled for this customer.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Contracts Section\n\t\t\t{\n\t\t\t\tid: \"contracts\",\n\t\t\t\ttitle: \"Contracts\",\n\t\t\t\ticon: <FileText className=\"size-4\" />,\n\t\t\t\tcount: contracts.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tService contracts and agreements signed by this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{contracts.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tContract #\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tRelated To\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{contracts.map((contract: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/30 border-b\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={contract.id}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t#{contract.contract_number || contract.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(contract.created_at, \"short\")}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{contract.job\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `Job #${contract.job.job_number}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: contract.estimate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `Est #${contract.estimate.estimate_number}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: contract.invoice\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `Inv #${contract.invoice.invoice_number}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{contract.status || \"draft\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/contracts/${contract.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<FileText className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo contracts for this customer.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Payments Section\n\t\t\t{\n\t\t\t\tid: \"payments\",\n\t\t\t\ttitle: \"Payments\",\n\t\t\t\ticon: <CreditCard className=\"size-4\" />,\n\t\t\t\tcount: payments.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tPayment history and transactions from this customer.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{payments.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tPayment #\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tAmount\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tMethod\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tInvoice\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{payments.map((payment: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/30 border-b\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={payment.id}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t#{payment.payment_number || payment.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(payment.created_at, \"short\")}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrencyFromDollars(payment.amount / 100)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm capitalize\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.payment_method?.replace(\"_\", \" \") || \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.invoice\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `#${payment.invoice.invoice_number}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayment.status === \"completed\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"default\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/payments/${payment.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<CreditCard className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo payment history for this customer.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Maintenance Plans Section\n\t\t\t{\n\t\t\t\tid: \"maintenance-plans\",\n\t\t\t\ttitle: \"Maintenance Plans\",\n\t\t\t\ticon: <ShieldCheck className=\"size-4\" />,\n\t\t\t\tcount: maintenancePlans.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tRecurring maintenance plans for this customer's equipment.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{maintenancePlans.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tPlan Name\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tProperty\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tFrequency\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{maintenancePlans.map((plan: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"hover:bg-muted/30 border-b\" key={plan.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{plan.name || `Plan ${plan.id.slice(0, 8)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{plan.property?.name || plan.property?.address || \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm capitalize\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{plan.frequency || \"Monthly\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{plan.status || \"active\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/maintenance-plans/${plan.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<ShieldCheck className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo maintenance plans for this customer.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t\t// NEW: Service Agreements Section\n\t\t\t{\n\t\t\t\tid: \"service-agreements\",\n\t\t\t\ttitle: \"Service Agreements\",\n\t\t\t\ticon: <FileText className=\"size-4\" />,\n\t\t\t\tcount: serviceAgreements.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\t\t\tLong-term service agreements and ongoing contracts.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{serviceAgreements.length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tAgreement #\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tProperty\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStart Date\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tEnd Date\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t{serviceAgreements.map((agreement: any) => (\n\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/30 border-b\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={agreement.id}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t#{agreement.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{agreement.property?.name ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tagreement.property?.address ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{agreement.start_date\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? formatDate(agreement.start_date, \"short\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{agreement.end_date\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? formatDate(agreement.end_date, \"short\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"-\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{agreement.status || \"active\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/service-agreements/${agreement.id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center p-12 text-center\">\n\t\t\t\t\t\t\t\t<FileText className=\"text-muted-foreground h-8 w-8\" />\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t\t\tNo service agreements for this customer.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t];\n\n\t\treturn sections;\n\t}, [\n\t\tcustomer.id,\n\t\tcustomer.email,\n\t\tcustomer.mobile_phone,\n\t\tcustomer.phone,\n\t\tequipment,\n\t\testimates,\n\t\tappointments,\n\t\tcontracts,\n\t\tpayments,\n\t\tmaintenancePlans,\n\t\tserviceAgreements,\n\t\thandleFieldChange,\n\t\tjobs,\n\t\tlocalCustomer,\n\t\tpaymentMethods,\n\t\tproperties,\n\t\trouter,\n\t\tinvoices,\n\t]);\n\n\tconst relatedItems = useMemo(() => {\n\t\tconst items: any[] = [];\n\n\t\tif (primaryProperty) {\n\t\t\titems.push({\n\t\t\t\tid: `property-${primaryProperty.id}`,\n\t\t\t\ttype: \"property\",\n\t\t\t\ttitle: primaryProperty.name || primaryProperty.address,\n\t\t\t\tsubtitle: `${primaryProperty.city || \"\"}, ${primaryProperty.state || \"\"}`,\n\t\t\t\thref: `/dashboard/work/properties/${primaryProperty.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (jobs.length > 0) {\n\t\t\tconst recentJob = jobs[0];\n\t\t\titems.push({\n\t\t\t\tid: `job-${recentJob.id}`,\n\t\t\t\ttype: \"job\",\n\t\t\t\ttitle: recentJob.title || `Job #${recentJob.job_number}`,\n\t\t\t\tsubtitle: recentJob.status,\n\t\t\t\thref: `/dashboard/work/${recentJob.id}`,\n\t\t\t\tbadge: recentJob.status\n\t\t\t\t\t? { label: recentJob.status, variant: \"outline\" as const }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [jobs, primaryProperty]);\n\n\t// Custom header with tags\n\tconst customHeader = (\n\t\t<div className=\"w-full px-2 sm:px-0\">\n\t\t\t<div className=\"bg-muted/50 mx-auto max-w-7xl rounded-md shadow-sm\">\n\t\t\t\t<div className=\"flex flex-col gap-3 p-4 sm:p-6\">\n\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-medium\">\n\t\t\t\t\t\tTags:\n\t\t\t\t\t</span>\n\t\t\t\t\t<EntityTags\n\t\t\t\t\t\tentityId={customer.id}\n\t\t\t\t\t\tentityType=\"customer\"\n\t\t\t\t\t\tonUpdateTags={async (id, tags) => {\n\t\t\t\t\t\t\tconst result = await updateEntityTags(\"customer\", id, tags);\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\trouter.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttags={customerTags}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<DetailPageContentLayout\n\t\t\tactivities={activities}\n\t\t\tattachments={attachments}\n\t\t\tbeforeContent={overviewSurface}\n\t\t\tcustomHeader={customHeader}\n\t\t\tcustomSections={customSections}\n\t\t\tdefaultOpenSection=\"customer-info\"\n\t\t\tenableReordering={true}\n\t\t\theader={headerConfig}\n\t\t\tnotes={[]}\n\t\t\trelatedItems={relatedItems}\n\t\t\tshowStandardSections={{\n\t\t\t\tnotes: false,\n\t\t\t}}\n\t\t\tstorageKey=\"customer-details\"\n\t\t/>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"6074ac9b86ba3e59f527c3660150a2dc9f6fab579f\":\"enrichCustomerData\"},\"apps/web/src/actions/customer-enrichment.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var enrichCustomerData=/*#__PURE__*/createServerReference(\"6074ac9b86ba3e59f527c3660150a2dc9f6fab579f\",callServer,void 0,findSourceMapURL,\"enrichCustomerData\");","\"use client\";\n\n/**\n * Customer Invoices Table with Quick Actions\n *\n * Displays invoices for a customer with action buttons:\n * - Quick Pay (one-click payment)\n * - Send Invoice (email)\n * - Send Estimate (email)\n *\n * Uses FullWidthDatatable for consistency\n */\n\nimport { CreditCard, FileText, Mail, MoreHorizontal } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useMemo, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n\tsendEstimateEmail,\n\tsendInvoiceEmail,\n} from \"@/actions/invoice-communications\";\nimport { QuickPayDialog } from \"@/components/invoices/quick-pay-dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport { TablePresets } from \"@/lib/datatable/table-presets\";\n\ntype CustomerInvoicesTableProps = {\n\tinvoices: any[];\n\tonUpdate?: () => void;\n};\n\nexport function CustomerInvoicesTable({\n\tinvoices,\n\tonUpdate,\n}: CustomerInvoicesTableProps) {\n\tconst [quickPayInvoice, setQuickPayInvoice] = useState<any>(null);\n\tconst [isSending, setIsSending] = useState<string | null>(null);\n\n\tconst formatCurrency = (cents: number) =>\n\t\tnew Intl.NumberFormat(\"en-US\", {\n\t\t\tstyle: \"currency\",\n\t\t\tcurrency: \"USD\",\n\t\t\tminimumFractionDigits: 0,\n\t\t\tmaximumFractionDigits: 0,\n\t\t}).format(cents / 100);\n\n\tconst handleSendInvoice = async (invoiceId: string) => {\n\t\tsetIsSending(invoiceId);\n\t\tconst result = await sendInvoiceEmail(invoiceId);\n\t\tsetIsSending(null);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(result.message || \"Invoice sent successfully\");\n\t\t\tonUpdate?.();\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to send invoice\");\n\t\t}\n\t};\n\n\tconst handleSendEstimate = async (invoiceId: string) => {\n\t\tsetIsSending(invoiceId);\n\t\tconst result = await sendEstimateEmail(invoiceId);\n\t\tsetIsSending(null);\n\n\t\tif (result.success) {\n\t\t\ttoast.success(result.message || \"Estimate sent successfully\");\n\t\t\tonUpdate?.();\n\t\t} else {\n\t\t\ttoast.error(result.error || \"Failed to send estimate\");\n\t\t}\n\t};\n\n\tconst getStatusBadge = (status: string) => {\n\t\tconst variants: Record<string, any> = {\n\t\t\tpaid: \"default\",\n\t\t\tpending: \"secondary\",\n\t\t\tdraft: \"outline\",\n\t\t\toverdue: \"destructive\",\n\t\t};\n\n\t\treturn (\n\t\t\t<Badge className=\"text-xs\" variant={variants[status] || \"outline\"}>\n\t\t\t\t{status}\n\t\t\t</Badge>\n\t\t);\n\t};\n\n\tconst columns: ColumnDef<any>[] = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tkey: \"invoice_number\",\n\t\t\t\theader: \"Invoice #\",\n\t\t\t\twidth: \"w-32\",\n\t\t\t\tshrink: true,\n\t\t\t\trender: (invoice) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"text-foreground text-xs leading-tight font-medium hover:underline\"\n\t\t\t\t\t\thref={`/dashboard/work/invoices/${invoice.id}`}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{invoice.invoice_number}\n\t\t\t\t\t</Link>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: \"title\",\n\t\t\t\theader: \"Title\",\n\t\t\t\trender: (invoice) => (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"text-foreground text-xs leading-tight font-medium hover:underline\"\n\t\t\t\t\t\thref={`/dashboard/work/invoices/${invoice.id}`}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{invoice.title || \"—\"}\n\t\t\t\t\t</Link>\n\t\t\t\t),\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tkey: \"status\",\n\t\t\t\theader: \"Status\",\n\t\t\t\twidth: \"w-24\",\n\t\t\t\tshrink: true,\n\t\t\t\trender: (invoice) => getStatusBadge(invoice.status),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: \"total_amount\",\n\t\t\t\theader: \"Amount\",\n\t\t\t\twidth: \"w-32\",\n\t\t\t\tshrink: true,\n\t\t\t\talign: \"right\",\n\t\t\t\trender: (invoice) => (\n\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t{formatCurrency(invoice.total_amount)}\n\t\t\t\t\t</span>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: \"balance_amount\",\n\t\t\t\theader: \"Balance\",\n\t\t\t\twidth: \"w-32\",\n\t\t\t\tshrink: true,\n\t\t\t\talign: \"right\",\n\t\t\t\trender: (invoice) =>\n\t\t\t\t\tinvoice.balance_amount > 0 ? (\n\t\t\t\t\t\t<span className=\"text-destructive font-medium\">\n\t\t\t\t\t\t\t{formatCurrency(invoice.balance_amount)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">Paid</span>\n\t\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: \"due_date\",\n\t\t\t\theader: \"Due Date\",\n\t\t\t\twidth: \"w-28\",\n\t\t\t\tshrink: true,\n\t\t\t\thideOnMobile: true,\n\t\t\t\trender: (invoice) => (\n\t\t\t\t\t<span className=\"text-xs\">\n\t\t\t\t\t\t{invoice.due_date\n\t\t\t\t\t\t\t? new Date(invoice.due_date).toLocaleDateString()\n\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t</span>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: \"actions\",\n\t\t\t\theader: \"\",\n\t\t\t\twidth: \"w-12\",\n\t\t\t\tshrink: true,\n\t\t\t\talign: \"right\",\n\t\t\t\trender: (invoice) => {\n\t\t\t\t\tconst canPay =\n\t\t\t\t\t\tinvoice.status !== \"paid\" && invoice.balance_amount > 0;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t<Button className=\"size-8 p-0\" size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t\t<MoreHorizontal className=\"size-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-48\">\n\t\t\t\t\t\t\t\t{canPay && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setQuickPayInvoice(invoice)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<CreditCard className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\t\t\t\tQuick Pay\n\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\n\t\t\t\t\t\t\t\t\tdisabled={isSending === invoice.id}\n\t\t\t\t\t\t\t\t\tonClick={() => handleSendInvoice(invoice.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Mail className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\t\tSend Invoice\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\n\t\t\t\t\t\t\t\t\tdisabled={isSending === invoice.id}\n\t\t\t\t\t\t\t\t\tonClick={() => handleSendEstimate(invoice.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileText className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\t\tSend as Estimate\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\t[\n\t\t\tisSending,\n\t\t\tformatCurrency,\n\t\t\tgetStatusBadge,\n\t\t\thandleSendEstimate,\n\t\t\thandleSendInvoice,\n\t\t],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{quickPayInvoice && (\n\t\t\t\t<QuickPayDialog\n\t\t\t\t\tamount={quickPayInvoice.balance_amount}\n\t\t\t\t\tinvoiceId={quickPayInvoice.id}\n\t\t\t\t\tinvoiceNumber={quickPayInvoice.invoice_number}\n\t\t\t\t\tonOpenChange={(open) => !open && setQuickPayInvoice(null)}\n\t\t\t\t\tonSuccess={() => {\n\t\t\t\t\t\tsetQuickPayInvoice(null);\n\t\t\t\t\t\tonUpdate?.();\n\t\t\t\t\t}}\n\t\t\t\t\topen={!!quickPayInvoice}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<FullWidthDataTable\n\t\t\t\t{...TablePresets.fullList()}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={invoices}\n\t\t\t\temptyIcon={<FileText className=\"text-muted-foreground/50 size-12\" />}\n\t\t\t\temptyMessage=\"No invoices found\"\n\t\t\t\tgetItemId={(invoice) => invoice.id}\n\t\t\t\tsearchFilter={(invoice, query) => {\n\t\t\t\t\tconst searchLower = query.toLowerCase();\n\t\t\t\t\treturn (\n\t\t\t\t\t\tinvoice.invoice_number?.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tinvoice.title?.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tinvoice.status?.toLowerCase().includes(searchLower)\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tsearchPlaceholder=\"Search invoices...\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4069e8d996a7214b2480b418853178572436d781ec\":\"sendEstimateEmail\"},\"apps/web/src/actions/invoice-communications.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var sendEstimateEmail=/*#__PURE__*/createServerReference(\"4069e8d996a7214b2480b418853178572436d781ec\",callServer,void 0,findSourceMapURL,\"sendEstimateEmail\");","\"use client\";\n\n/**\n * Quick Pay Dialog\n *\n * Simple payment dialog for quick payments from customer page:\n * - Shows invoice amount and default payment method\n * - One-click confirmation\n * - No card selection (uses default)\n * - Fast UX for routine payments\n */\n\nimport {\n\tAlertCircle,\n\tAlertTriangle,\n\tCheck,\n\tCreditCard,\n\tLoader2,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { processInvoicePayment } from \"@/actions/invoice-payments\";\nimport { getPaymentMethods } from \"@/actions/payment-methods\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\n\ntype QuickPayDialogProps = {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\tinvoiceId: string;\n\tinvoiceNumber: string;\n\tamount: number;\n\tonSuccess?: () => void;\n};\n\nexport function QuickPayDialog({\n\topen,\n\tonOpenChange,\n\tinvoiceId,\n\tinvoiceNumber,\n\tamount,\n\tonSuccess,\n}: QuickPayDialogProps) {\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [isProcessing, setIsProcessing] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [success, setSuccess] = useState(false);\n\tconst [defaultPaymentMethod, setDefaultPaymentMethod] = useState<any>(null);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tloadDefaultPaymentMethod();\n\t\t}\n\t}, [open, loadDefaultPaymentMethod]);\n\n\tconst loadDefaultPaymentMethod = async () => {\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\n\t\tconst result = await getPaymentMethods();\n\n\t\tif (!(result.success && result.paymentMethods)) {\n\t\t\tsetError(result.error || \"Failed to load payment methods\");\n\t\t\tsetIsLoading(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultPM =\n\t\t\tresult.paymentMethods.find((pm: any) => pm.is_default) ??\n\t\t\tresult.paymentMethods[0];\n\n\t\tif (defaultPM) {\n\t\t\t// Normalize shape for this component\n\t\t\tsetDefaultPaymentMethod({\n\t\t\t\tid: defaultPM.id,\n\t\t\t\tcard_brand: defaultPM.brand,\n\t\t\t\tcard_last4: defaultPM.last4,\n\t\t\t\tcard_exp_month: defaultPM.exp_month,\n\t\t\t\tcard_exp_year: defaultPM.exp_year,\n\t\t\t\tnickname: defaultPM.display_name,\n\t\t\t\tis_default: defaultPM.is_default,\n\t\t\t});\n\t\t} else {\n\t\t\tsetError(\"No payment methods found. Please add a payment method first.\");\n\t\t}\n\n\t\tsetIsLoading(false);\n\t};\n\n\tconst formatCurrency = (cents: number) =>\n\t\tnew Intl.NumberFormat(\"en-US\", {\n\t\t\tstyle: \"currency\",\n\t\t\tcurrency: \"USD\",\n\t\t}).format(cents / 100);\n\n\tconst handleConfirmPayment = async () => {\n\t\tif (!defaultPaymentMethod) {\n\t\t\tsetError(\"No payment method available\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsProcessing(true);\n\t\tsetError(null);\n\n\t\tconst result = await processInvoicePayment({\n\t\t\tinvoiceId,\n\t\t\tpaymentMethodId: defaultPaymentMethod.id,\n\t\t\tchannel: \"online\",\n\t\t});\n\n\t\tsetIsProcessing(false);\n\n\t\tif (result.success) {\n\t\t\tsetSuccess(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tonSuccess?.();\n\t\t\t\tonOpenChange(false);\n\t\t\t\tsetSuccess(false);\n\t\t\t}, 1500);\n\t\t} else {\n\t\t\tsetError(result.error || \"Payment failed\");\n\t\t}\n\t};\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Dialog onOpenChange={onOpenChange} open={open}>\n\t\t\t\t<DialogContent className=\"sm:max-w-[450px]\">\n\t\t\t\t\t<div className=\"flex items-center justify-center py-8\">\n\t\t\t\t\t\t<Loader2 className=\"text-muted-foreground size-8 animate-spin\" />\n\t\t\t\t\t</div>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n\n\tif (success) {\n\t\treturn (\n\t\t\t<Dialog onOpenChange={onOpenChange} open={open}>\n\t\t\t\t<DialogContent className=\"sm:max-w-[450px]\">\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Payment Successful</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-8\">\n\t\t\t\t\t\t<div className=\"bg-success/10 mb-4 flex size-16 items-center justify-center rounded-full\">\n\t\t\t\t\t\t\t<Check className=\"text-success size-8\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className=\"mb-2 text-lg font-semibold\">Payment Successful!</h3>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-center text-sm\">\n\t\t\t\t\t\t\t{formatCurrency(amount)} paid for invoice {invoiceNumber}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Dialog onOpenChange={onOpenChange} open={open}>\n\t\t\t<DialogContent className=\"sm:max-w-[450px]\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Confirm Payment</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tQuick payment for {invoiceNumber}\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{/* Payment Summary */}\n\t\t\t\t\t<div className=\"bg-muted/30 rounded-lg border p-4\">\n\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t<span className=\"text-sm\">Amount to Pay:</span>\n\t\t\t\t\t\t\t<span className=\"text-xl font-bold\">\n\t\t\t\t\t\t\t\t{formatCurrency(amount)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Payment Method */}\n\t\t\t\t\t{defaultPaymentMethod ? (\n\t\t\t\t\t\t<div className=\"rounded-lg border p-4\">\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground mb-2 text-xs\">\n\t\t\t\t\t\t\t\tPayment Method:\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t<span className=\"text-2xl\">💳</span>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{defaultPaymentMethod.card_brand.toUpperCase()} ••••{\" \"}\n\t\t\t\t\t\t\t\t\t\t{defaultPaymentMethod.card_last4}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\tExpires{\" \"}\n\t\t\t\t\t\t\t\t\t\t{String(defaultPaymentMethod.card_exp_month).padStart(\n\t\t\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\t\t\t\"0\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/{defaultPaymentMethod.card_exp_year}\n\t\t\t\t\t\t\t\t\t\t{defaultPaymentMethod.nickname &&\n\t\t\t\t\t\t\t\t\t\t\t` • ${defaultPaymentMethod.nickname}`}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{defaultPaymentMethod.is_default && (\n\t\t\t\t\t\t\t\t\t<Badge className=\"ml-auto text-xs\" variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\tDefault\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Alert variant=\"destructive\">\n\t\t\t\t\t\t\t<AlertTriangle className=\"size-4\" />\n\t\t\t\t\t\t\t<AlertDescription>\n\t\t\t\t\t\t\t\tNo payment method available. Please add a payment method in the\n\t\t\t\t\t\t\t\tBilling Information section.\n\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Confirmation Message */}\n\t\t\t\t\t<Alert>\n\t\t\t\t\t\t<AlertCircle className=\"size-4\" />\n\t\t\t\t\t\t<AlertDescription className=\"text-sm\">\n\t\t\t\t\t\t\tThis will charge {formatCurrency(amount)} to your{\" \"}\n\t\t\t\t\t\t\t{defaultPaymentMethod?.card_brand.toUpperCase()} card ending in{\" \"}\n\t\t\t\t\t\t\t{defaultPaymentMethod?.card_last4}.\n\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t</Alert>\n\n\t\t\t\t\t{/* Error Alert */}\n\t\t\t\t\t{error && (\n\t\t\t\t\t\t<Alert variant=\"destructive\">\n\t\t\t\t\t\t\t<AlertCircle className=\"size-4\" />\n\t\t\t\t\t\t\t<AlertDescription>{error}</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={isProcessing}\n\t\t\t\t\t\tonClick={() => onOpenChange(false)}\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={isProcessing || !defaultPaymentMethod}\n\t\t\t\t\t\tonClick={handleConfirmPayment}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isProcessing ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 size-4 animate-spin\" />\n\t\t\t\t\t\t\t\tProcessing...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<CreditCard className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\tConfirm & Pay\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"00db2d425f768105ca3d41ca73bb8fcbc84fb77a91\":\"getPaymentMethods\"},\"apps/web/src/actions/payment-methods.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getPaymentMethods=/*#__PURE__*/createServerReference(\"00db2d425f768105ca3d41ca73bb8fcbc84fb77a91\",callServer,void 0,findSourceMapURL,\"getPaymentMethods\");","\"use client\";\n\n/**\n * Payment Method Card Component\n *\n * Beautiful interactive payment method displays with:\n * - Visual credit card with brand-specific styling\n * - ACH/Bank account visualization\n * - Action buttons for set default and remove\n * - Hover effects and transitions\n */\n\nimport { Trash2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { CreditCardVisual } from \"@/components/ui/credit-card-visual\";\n\ntype PaymentMethodCardProps = {\n\tid: string;\n\ttype?: \"card\" | \"ach\" | \"bank\";\n\tcard_brand?: string;\n\tcard_last4: string;\n\tcard_exp_month?: number;\n\tcard_exp_year?: number;\n\tcardholder_name?: string;\n\tbank_name?: string;\n\taccount_type?: \"checking\" | \"savings\";\n\tis_default?: boolean;\n\tnickname?: string;\n\tis_verified?: boolean;\n\tonSetDefault?: () => void;\n\tonRemove?: () => void;\n\tdisabled?: boolean;\n};\n\nexport function PaymentMethodCard({\n\tid,\n\ttype = \"card\",\n\tcard_brand,\n\tcard_last4,\n\tcard_exp_month,\n\tcard_exp_year,\n\tcardholder_name,\n\tbank_name,\n\taccount_type,\n\tis_default,\n\tnickname,\n\tis_verified,\n\tonSetDefault,\n\tonRemove,\n\tdisabled = false,\n}: PaymentMethodCardProps) {\n\treturn (\n\t\t<div className=\"group relative\">\n\t\t\t{/* Visual Card/Bank Display */}\n\t\t\t<CreditCardVisual\n\t\t\t\taccountType={account_type}\n\t\t\t\tbankName={bank_name}\n\t\t\t\tbrand={card_brand}\n\t\t\t\tcardholderName={cardholder_name}\n\t\t\t\texpMonth={card_exp_month}\n\t\t\t\texpYear={card_exp_year}\n\t\t\t\tisDefault={is_default}\n\t\t\t\tisVerified={is_verified}\n\t\t\t\tlast4={card_last4}\n\t\t\t\tnickname={nickname}\n\t\t\t\ttype={type}\n\t\t\t/>\n\n\t\t\t{/* Action Buttons - Show on Hover */}\n\t\t\t<div className=\"mt-3 flex items-center justify-between gap-2 opacity-0 transition-opacity group-hover:opacity-100\">\n\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t{!is_default && onSetDefault && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"h-8 text-xs\"\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tonSetDefault();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSet as Default\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{onRemove && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"text-destructive hover:bg-destructive hover:text-destructive-foreground h-8\"\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tconfirm(`Remove this ${type === \"card\" ? \"card\" : \"account\"}?`)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Trash2 className=\"mr-1.5 size-3.5\" />\n\t\t\t\t\t\tRemove\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n","\"use client\";\n\n/**\n * PropertiesTable Component\n * Full-width datatable for displaying customer properties\n *\n * Features:\n * - Search, sort, filter\n * - Property type badges\n * - Market value display\n * - **Interactive hover maps** - Hover over row to see property location\n * - Compact rows for scalability (100+ properties)\n */\n\nimport {\n\tArchive,\n\tBuilding2,\n\tExternalLink,\n\tFactory,\n\tHome,\n\tPlus,\n\tSparkles,\n\tUserX,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { archiveProperty } from \"@/actions/properties\";\nimport {\n\tAlertDialog,\n\tAlertDialogAction,\n\tAlertDialogCancel,\n\tAlertDialogContent,\n\tAlertDialogDescription,\n\tAlertDialogFooter,\n\tAlertDialogHeader,\n\tAlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype BulkAction,\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport {\n\tSheet,\n\tSheetContent,\n\tSheetDescription,\n\tSheetHeader,\n\tSheetTitle,\n\tSheetTrigger,\n} from \"@/components/ui/sheet\";\nimport { JobEnrichmentPanel } from \"@/components/work/job-enrichment-panel\";\nimport { TablePresets } from \"@/lib/datatable/table-presets\";\nimport { formatCurrency } from \"@/lib/formatters\";\nimport { useArchiveStore } from \"@/lib/stores/archive-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype Property = {\n\tid: string;\n\tname?: string;\n\taddress: string;\n\taddress2?: string;\n\tcity: string;\n\tstate: string;\n\tzip_code: string;\n\ttype?: string;\n\tsquare_footage?: number;\n\tyear_built?: number;\n\tcustomer_id: string;\n\tarchived_at?: string | null;\n\tdeleted_at?: string | null;\n\tenrichment?: {\n\t\tdetails?: {\n\t\t\tsquareFootage?: number;\n\t\t\tbedrooms?: number;\n\t\t\tbathrooms?: number;\n\t\t\tlotSizeSquareFeet?: number;\n\t\t};\n\t\townership?: {\n\t\t\tmarketValue?: number;\n\t\t};\n\t\ttaxes?: {\n\t\t\tannualAmount?: number;\n\t\t};\n\t};\n\toperationalIntelligence?: any; // Job enrichment data (weather, building, location, etc.)\n};\n\ntype PropertiesTableProps = {\n\tproperties: Property[];\n\titemsPerPage?: number;\n\tcustomerId?: string;\n};\n\nfunction getPropertyIcon(type?: string) {\n\tswitch (type) {\n\t\tcase \"commercial\":\n\t\t\treturn Building2;\n\t\tcase \"industrial\":\n\t\t\treturn Factory;\n\t\tdefault:\n\t\t\treturn Home;\n\t}\n}\n\nfunction getPropertyBadge(type?: string) {\n\tconst variants: Record<string, string> = {\n\t\tresidential: \"bg-success text-success dark:bg-success dark:text-success\",\n\t\tcommercial: \"bg-primary text-primary dark:bg-primary dark:text-primary\",\n\t\tindustrial:\n\t\t\t\"bg-accent text-accent-foreground dark:bg-accent dark:text-accent-foreground\",\n\t};\n\n\treturn (\n\t\t<Badge\n\t\t\tclassName={cn(\n\t\t\t\t\"text-xs\",\n\t\t\t\tvariants[type || \"residential\"] || variants.residential,\n\t\t\t)}\n\t\t>\n\t\t\t{type ? type.charAt(0).toUpperCase() + type.slice(1) : \"Residential\"}\n\t\t</Badge>\n\t);\n}\n\nexport function PropertiesTable({\n\tproperties,\n\titemsPerPage = 10,\n\tcustomerId,\n}: PropertiesTableProps) {\n\tconst router = useRouter();\n\t// Archive filter state\n\tconst archiveFilter = useArchiveStore((state) => state.filters.properties);\n\n\t// Filter properties based on archive status\n\tconst filteredProperties = properties.filter((property) => {\n\t\tconst isArchived = Boolean(property.archived_at || property.deleted_at);\n\t\tif (archiveFilter === \"active\") {\n\t\t\treturn !isArchived;\n\t\t}\n\t\tif (archiveFilter === \"archived\") {\n\t\t\treturn isArchived;\n\t\t}\n\t\treturn true; // \"all\"\n\t});\n\n\tconst [hoveredProperty, setHoveredProperty] = useState<Property | null>(null);\n\tconst [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });\n\tconst [isBulkArchiveOpen, setIsBulkArchiveOpen] = useState(false);\n\tconst [selectedItemIds, setSelectedItemIds] = useState<Set<string>>(\n\t\tnew Set(),\n\t);\n\n\tconst handleMouseEnter = (property: Property, event: React.MouseEvent) => {\n\t\tsetHoveredProperty(property);\n\t\tsetMousePosition({ x: event.clientX, y: event.clientY });\n\t};\n\n\tconst handleMouseMove = (event: React.MouseEvent) => {\n\t\tsetMousePosition({ x: event.clientX, y: event.clientY });\n\t};\n\n\tconst handleMouseLeave = () => {\n\t\tsetHoveredProperty(null);\n\t};\n\n\t// Bulk actions for selected properties\n\tconst bulkActions: BulkAction[] = [\n\t\t{\n\t\t\tlabel: \"Archive Properties\",\n\t\t\ticon: <Archive className=\"size-4\" />,\n\t\t\tvariant: \"destructive\",\n\t\t\tonClick: (selectedIds) => {\n\t\t\t\tsetSelectedItemIds(selectedIds);\n\t\t\t\tsetIsBulkArchiveOpen(true);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Move to Another Customer\",\n\t\t\ticon: <UserX className=\"size-4\" />,\n\t\t\tvariant: \"ghost\",\n\t\t\tonClick: async (selectedIds) => {\n\t\t\t\t// TODO: Implement move dialog\n\t\t\t\talert(\n\t\t\t\t\t`Move ${selectedIds.size} properties to another customer (coming soon)`,\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t];\n\n\tconst columns: ColumnDef<Property>[] = [\n\t\t{\n\t\t\tkey: \"address\",\n\t\t\theader: \"Address\",\n\t\t\twidth: \"flex-1\",\n\t\t\tsortable: true,\n\t\t\trender: (property) => {\n\t\t\t\tconst Icon = getPropertyIcon(property.type);\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"flex min-w-0 items-center gap-2\"\n\t\t\t\t\t\tonMouseEnter={(e) => handleMouseEnter(property, e)}\n\t\t\t\t\t\tonMouseLeave={handleMouseLeave}\n\t\t\t\t\t\tonMouseMove={handleMouseMove}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon className=\"text-muted-foreground size-4 shrink-0\" />\n\t\t\t\t\t\t<div className=\"min-w-0\">\n\t\t\t\t\t\t\t<p className=\"truncate leading-tight font-medium\">\n\t\t\t\t\t\t\t\t{property.name || property.address}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground truncate text-xs leading-tight\">\n\t\t\t\t\t\t\t\t{property.city}, {property.state} {property.zip_code}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tkey: \"type\",\n\t\t\theader: \"Type\",\n\t\t\tsortable: true,\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\trender: (property) => getPropertyBadge(property.type),\n\t\t},\n\t\t{\n\t\t\tkey: \"size\",\n\t\t\theader: \"Size\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\tsortable: true,\n\t\t\talign: \"right\",\n\t\t\trender: (property) => {\n\t\t\t\tconst sqFt =\n\t\t\t\t\tproperty.square_footage ||\n\t\t\t\t\tproperty.enrichment?.details?.squareFootage;\n\t\t\t\tconst beds = property.enrichment?.details?.bedrooms;\n\t\t\t\tconst baths = property.enrichment?.details?.bathrooms;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"text-xs\">\n\t\t\t\t\t\t<p className=\"font-medium\">{sqFt ? sqFt.toLocaleString() : \"—\"}</p>\n\t\t\t\t\t\t{beds && baths && (\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t{beds}bd / {baths}ba\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!sqFt && property.year_built && (\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\tBuilt {property.year_built}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tkey: \"value\",\n\t\t\theader: \"Value\",\n\t\t\twidth: \"w-36\",\n\t\t\tshrink: true,\n\t\t\tsortable: true,\n\t\t\talign: \"right\",\n\t\t\thideOnMobile: true,\n\t\t\trender: (property) => {\n\t\t\t\tconst value = property.enrichment?.ownership?.marketValue;\n\t\t\t\tconst tax = property.enrichment?.taxes?.annualAmount;\n\n\t\t\t\t// Show any available value data\n\t\t\t\tconst displayValue = value;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"text-xs\">\n\t\t\t\t\t\t{displayValue ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p className=\"text-success dark:text-success font-semibold\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(displayValue)}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{tax && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\tTax: {formatCurrency(tax)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">No data</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tkey: \"actions\",\n\t\t\theader: \"\",\n\t\t\twidth: \"w-36\",\n\t\t\tshrink: true,\n\t\t\talign: \"right\",\n\t\t\trender: (property) => (\n\t\t\t\t<div className=\"flex items-center justify-end gap-1\">\n\t\t\t\t\t{/* Operational Intelligence Button */}\n\t\t\t\t\t{property.operationalIntelligence && (\n\t\t\t\t\t\t<Sheet>\n\t\t\t\t\t\t\t<SheetTrigger asChild>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"h-7 gap-1 px-2 text-xs\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Sparkles className=\"size-3\" />\n\t\t\t\t\t\t\t\t\tIntel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</SheetTrigger>\n\t\t\t\t\t\t\t<SheetContent className=\"w-full overflow-y-auto sm:max-w-2xl\">\n\t\t\t\t\t\t\t\t<SheetHeader>\n\t\t\t\t\t\t\t\t\t<SheetTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Sparkles className=\"text-primary size-5\" />\n\t\t\t\t\t\t\t\t\t\tOperational Intelligence\n\t\t\t\t\t\t\t\t\t</SheetTitle>\n\t\t\t\t\t\t\t\t\t<SheetDescription>\n\t\t\t\t\t\t\t\t\t\tLive data for {property.address}, {property.city}\n\t\t\t\t\t\t\t\t\t</SheetDescription>\n\t\t\t\t\t\t\t\t</SheetHeader>\n\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t<JobEnrichmentPanel\n\t\t\t\t\t\t\t\t\t\tenrichmentData={property.operationalIntelligence}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</SheetContent>\n\t\t\t\t\t\t</Sheet>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* View Link */}\n\t\t\t\t\t<Link\n\t\t\t\t\t\tclassName=\"text-primary inline-flex items-center gap-1 text-xs hover:underline\"\n\t\t\t\t\t\thref={`/dashboard/customers/${property.customer_id}#property-${property.id}`}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t>\n\t\t\t\t\t\tView\n\t\t\t\t\t\t<ExternalLink className=\"size-3\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t),\n\t\t},\n\t];\n\n\t// Search filter\n\tconst searchFilter = (property: Property, query: string) => {\n\t\tconst searchStr = query.toLowerCase();\n\t\treturn (\n\t\t\t(property.name?.toLowerCase() || \"\").includes(searchStr) ||\n\t\t\tproperty.address.toLowerCase().includes(searchStr) ||\n\t\t\tproperty.city.toLowerCase().includes(searchStr) ||\n\t\t\tproperty.state.toLowerCase().includes(searchStr) ||\n\t\t\tproperty.zip_code.toLowerCase().includes(searchStr) ||\n\t\t\t(property.type?.toLowerCase() || \"\").includes(searchStr)\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FullWidthDataTable\n\t\t\t\t{...TablePresets.fullList()}\n\t\t\t\tbulkActions={bulkActions}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={filteredProperties}\n\t\t\t\temptyAction={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t(window.location.href = `/dashboard/work/properties/new?customerId=${customerId || properties[0]?.customer_id || \"\"}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 size-4\" />\n\t\t\t\t\t\tAdd Property\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\temptyIcon={<Building2 className=\"text-muted-foreground h-8 w-8\" />}\n\t\t\t\temptyMessage=\"No properties found\"\n\t\t\t\tentity=\"properties\"\n\t\t\t\tgetItemId={(property) => property.id}\n\t\t\t\tisArchived={(property) =>\n\t\t\t\t\tBoolean(property.archived_at || property.deleted_at)\n\t\t\t\t}\n\t\t\t\tsearchFilter={searchFilter}\n\t\t\t\tsearchPlaceholder=\"Search properties...\"\n\t\t\t\tshowArchived={archiveFilter !== \"active\"}\n\t\t\t\tshowRefresh={false}\n\t\t\t/>\n\n\t\t\t{/* Floating Map on Hover */}\n\t\t\t{hoveredProperty && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"border-primary bg-background pointer-events-none fixed z-50 overflow-hidden rounded-lg border-2 shadow-2xl\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tleft: mousePosition.x + 20,\n\t\t\t\t\t\ttop: mousePosition.y - 150,\n\t\t\t\t\t\twidth: \"400px\",\n\t\t\t\t\t\theight: \"300px\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\tsrc={`https://www.google.com/maps/embed/v1/place?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || \"AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8\"}&q=${encodeURIComponent(\n\t\t\t\t\t\t\thoveredProperty.address +\n\t\t\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\t\t\thoveredProperty.city +\n\t\t\t\t\t\t\t\t\", \" +\n\t\t\t\t\t\t\t\thoveredProperty.state +\n\t\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t\thoveredProperty.zip_code,\n\t\t\t\t\t\t)}&zoom=14`}\n\t\t\t\t\t\tstyle={{ border: 0 }}\n\t\t\t\t\t\ttitle={`Map of ${hoveredProperty.address}`}\n\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"bg-background/95 absolute right-0 bottom-0 left-0 border-t p-2 backdrop-blur\">\n\t\t\t\t\t\t<p className=\"truncate text-xs font-medium\">\n\t\t\t\t\t\t\t{hoveredProperty.address}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-muted-foreground truncate text-xs\">\n\t\t\t\t\t\t\t{hoveredProperty.city}, {hoveredProperty.state}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Bulk Archive Dialog */}\n\t\t\t<AlertDialog onOpenChange={setIsBulkArchiveOpen} open={isBulkArchiveOpen}>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>\n\t\t\t\t\t\t\tArchive {selectedItemIds.size}{\" \"}\n\t\t\t\t\t\t\t{selectedItemIds.size === 1 ? \"Property\" : \"Properties\"}?\n\t\t\t\t\t\t</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\t{selectedItemIds.size}{\" \"}\n\t\t\t\t\t\t\t{selectedItemIds.size === 1 ? \"property\" : \"properties\"} will be\n\t\t\t\t\t\t\tarchived and can be restored within 90 days.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tconst propertyIds = Array.from(selectedItemIds);\n\t\t\t\t\t\t\t\tlet archived = 0;\n\t\t\t\t\t\t\t\tfor (const propertyId of propertyIds) {\n\t\t\t\t\t\t\t\t\tconst result = await archiveProperty(propertyId as string);\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\tarchived++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (archived > 0) {\n\t\t\t\t\t\t\t\t\trouter.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\t\t</>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"40d2939671184b1ed6c39199b3b3fddc82959500a8\":\"archiveProperty\"},\"apps/web/src/actions/properties.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var archiveProperty=/*#__PURE__*/createServerReference(\"40d2939671184b1ed6c39199b3b3fddc82959500a8\",callServer,void 0,findSourceMapURL,\"archiveProperty\");","/**\n * Job Enrichment Panel - Clean shadcn UI Design\n *\n * Displays operational intelligence with minimal, functional design\n */\n\n\"use client\";\n\nimport {\n\tAlertTriangle,\n\tBuilding2,\n\tCamera,\n\tClock,\n\tCloudRain,\n\tDroplets,\n\tExternalLink,\n\tGlobe,\n\tInfo,\n\tMapPin,\n\tNavigation,\n\tPhone,\n\tStar,\n\tStore,\n\tThermometer,\n\tTrendingUp,\n} from \"lucide-react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { ServiceLocationMap } from \"@/components/work/job-details/service-location-map\";\n\ntype EnrichmentData = {\n\tenrichmentStatus?: string;\n\trecommendations: {\n\t\tshouldReschedule: boolean;\n\t\trescheduleReason?: string;\n\t\tupsellOpportunities: string[];\n\t\tsafetyWarnings: string[];\n\t};\n\tpropertyData?: {\n\t\taddress: {\n\t\t\tfull: string;\n\t\t\tstreet: string;\n\t\t\tcity: string;\n\t\t\tstate: string;\n\t\t\tzipCode: string;\n\t\t};\n\t\tcharacteristics?: {\n\t\t\tpropertyType?: string;\n\t\t\tyearBuilt?: number;\n\t\t\tsquareFeet?: number;\n\t\t\tbedrooms?: number;\n\t\t\tbathrooms?: number;\n\t\t\tlotSize?: number;\n\t\t\tfeatures?: string[];\n\t\t};\n\t\tassessment?: {\n\t\t\tassessedValue?: number;\n\t\t\ttaxYear?: number;\n\t\t\tannualTax?: number;\n\t\t};\n\t\tmarket?: {\n\t\t\tlastSoldPrice?: number;\n\t\t\tlastSoldDate?: string;\n\t\t\tpricePerSqFt?: number;\n\t\t};\n\t\tdataSource: string;\n\t};\n\tbuildingData?: {\n\t\tfootprint?: {\n\t\t\tarea?: number;\n\t\t\tperimeter?: number;\n\t\t};\n\t\tbuildingType?: string;\n\t\theight?: number;\n\t\tlevels?: number;\n\t\troofShape?: string;\n\t\troofMaterial?: string;\n\t\twallMaterial?: string;\n\t\tconstructionDate?: string;\n\t\taddressFromOSM?: {\n\t\t\thouseNumber?: string;\n\t\t\tstreet?: string;\n\t\t\tcity?: string;\n\t\t\tstate?: string;\n\t\t\tpostcode?: string;\n\t\t};\n\t\tdataSource: string;\n\t};\n\tweather?: {\n\t\thasActiveAlerts?: boolean;\n\t\talerts?: Array<{\n\t\t\tevent: string;\n\t\t\tseverity: string;\n\t\t\theadline: string;\n\t\t\tdescription: string;\n\t\t}>;\n\t\tforecast?: {\n\t\t\tperiods?: Array<{\n\t\t\t\tname: string;\n\t\t\t\ttemperature: number;\n\t\t\t\ttemperatureUnit: string;\n\t\t\t\twindSpeed: string;\n\t\t\t\tshortForecast: string;\n\t\t\t\tdetailedForecast: string;\n\t\t\t}>;\n\t\t};\n\t};\n\twaterQuality?: {\n\t\thardness: number;\n\t\tclassification: string;\n\t\trecommendations: {\n\t\t\tshouldOfferSoftener: boolean;\n\t\t\treason: string;\n\t\t};\n\t};\n\tlocationIntelligence?: {\n\t\tcounty?: {\n\t\t\tcountyName: string;\n\t\t\tcountyFips?: string;\n\t\t\tstateFips?: string;\n\t\t\tstateCode?: string;\n\t\t\tblockFips?: string;\n\t\t};\n\t\tfloodZone?: {\n\t\t\tzone: string;\n\t\t\triskLevel: string;\n\t\t\tdescription: string;\n\t\t};\n\t};\n\tnearbySuppliers?: Array<{\n\t\tname: string;\n\t\tdistance: number;\n\t\tlat: number;\n\t\tlon: number;\n\t}>;\n\tstreetView?: {\n\t\tmainView: string;\n\t\talternateViews?: string[];\n\t\theading?: number;\n\t\tpitch?: number;\n\t\tfov?: number;\n\t\tavailable: boolean;\n\t\tdataSource: string;\n\t};\n\tgooglePlaces?: {\n\t\tplaces: Array<{\n\t\t\tname: string;\n\t\t\tplaceId: string;\n\t\t\trating?: number;\n\t\t\tuserRatingsTotal?: number;\n\t\t\tvicinity: string;\n\t\t\tdistance: number;\n\t\t\tlat: number;\n\t\t\tlon: number;\n\t\t\ttypes?: string[];\n\t\t\topenNow?: boolean;\n\t\t\tbusinessStatus?: string;\n\t\t\tpriceLevel?: number;\n\t\t\tphotoUrl?: string;\n\t\t\tphoneNumber?: string;\n\t\t\twebsite?: string;\n\t\t}>;\n\t\ttotalResults: number;\n\t\tdataSource: string;\n\t};\n\ttimeZone?: {\n\t\ttimeZoneId: string;\n\t\ttimeZoneName: string;\n\t\trawOffset: number;\n\t\tdstOffset: number;\n\t\ttotalOffset: number;\n\t\ttotalOffsetHours: number;\n\t\tisDST: boolean;\n\t\tdataSource: string;\n\t};\n\tsources?: string[];\n\tlocation?: {\n\t\taddress?: string;\n\t\tlat?: number;\n\t\tlon?: number;\n\t};\n};\n\ntype JobEnrichmentPanelProps = {\n\tenrichmentData: EnrichmentData | null;\n\tonRefresh?: () => void;\n};\n\nconst MAX_SUPPLIERS = 3;\nconst M_TO_KM = 1000;\nconst SQ_M_TO_SQ_FT = 10.764;\nconst M_TO_FT = 3.281;\nconst CENTS_TO_DOLLARS = 100;\nconst URL_KEY_LENGTH = 30;\n\n// Data source tooltips\nconst getSourceTooltip = (source: string): string => {\n\tconst tooltips: Record<string, string> = {\n\t\tnominatim:\n\t\t\t\"OpenStreetMap Nominatim - Free geocoding service for address lookup\",\n\t\tnone: \"No data sources available - check API configurations\",\n\t\tnws: \"National Weather Service - Free weather forecasts and alerts\",\n\t\tfcc: \"FCC Census Block API - Free location and county information\",\n\t\tfema: \"FEMA NFHL - Free flood zone and risk data\",\n\t\toverpass: \"OpenStreetMap Overpass API - Free nearby points of interest\",\n\t\t\"usgs-elevation\": \"USGS Elevation API - Free terrain elevation data\",\n\t\t\"osm-walkability\":\n\t\t\t\"OpenStreetMap - Calculated walkability score based on amenities\",\n\t\t\"osm-schools\": \"OpenStreetMap - Nearby schools and education facilities\",\n\t\t\"google-places\":\n\t\t\t\"Google Places API - Business info with reviews and ratings\",\n\t\t\"google-streetview\":\n\t\t\t\"Google Street View - Property photos from street level\",\n\t\t\"google-timezone\": \"Google Time Zone API - Automatic timezone detection\",\n\t\tcensus: \"US Census Bureau - Demographics and population statistics\",\n\t\tairnow: \"AirNow EPA - Air quality index and pollutant data\",\n\t\tusgs: \"USGS Water Services - Water quality and hardness data\",\n\t\tosm: \"OpenStreetMap - Building footprints and characteristics\",\n\t\trentcast: \"RentCast API - Property details, taxes, and market data\",\n\t\tattom: \"Attom Data - Comprehensive property information\",\n\t};\n\treturn (\n\t\ttooltips[source.toLowerCase()] || `${source} - Data enrichment service`\n\t);\n};\n\n// biome-ignore lint: Display component with many conditional sections\nexport function JobEnrichmentPanel({\n\tenrichmentData,\n}: JobEnrichmentPanelProps) {\n\tif (!enrichmentData) {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<CardContent className=\"flex items-center justify-center py-8\">\n\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\tNo operational intelligence available\n\t\t\t\t\t</p>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t);\n\t}\n\n\tif (enrichmentData.enrichmentStatus === \"failed\") {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<CardContent className=\"py-6\">\n\t\t\t\t\t<Alert variant=\"destructive\">\n\t\t\t\t\t\t<AlertTriangle className=\"h-4 w-4\" />\n\t\t\t\t\t\t<AlertDescription>\n\t\t\t\t\t\t\tFailed to load operational intelligence. Please try again.\n\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t</Alert>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t);\n\t}\n\n\tconst {\n\t\tpropertyData,\n\t\tbuildingData,\n\t\tweather,\n\t\twaterQuality,\n\t\tlocationIntelligence,\n\t\tnearbySuppliers,\n\t\tstreetView,\n\t\tgooglePlaces,\n\t\ttimeZone,\n\t\trecommendations,\n\t} = enrichmentData;\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Alerts Section */}\n\t\t\t{(recommendations.shouldReschedule ||\n\t\t\t\tweather?.hasActiveAlerts ||\n\t\t\t\trecommendations.upsellOpportunities.length > 0) && (\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t{/* Reschedule Alert */}\n\t\t\t\t\t{recommendations.shouldReschedule && (\n\t\t\t\t\t\t<Alert variant=\"destructive\">\n\t\t\t\t\t\t\t<AlertTriangle className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t<AlertDescription className=\"font-medium\">\n\t\t\t\t\t\t\t\t{recommendations.rescheduleReason}\n\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Weather Alert */}\n\t\t\t\t\t{weather?.hasActiveAlerts && weather.alerts?.[0] && (\n\t\t\t\t\t\t<Alert>\n\t\t\t\t\t\t\t<CloudRain className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t<AlertDescription>\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">{weather.alerts[0].event}: </span>\n\t\t\t\t\t\t\t\t{weather.alerts[0].headline}\n\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Upsell Opportunity */}\n\t\t\t\t\t{recommendations.upsellOpportunities.length > 0 && (\n\t\t\t\t\t\t<Alert className=\"border-emerald-200 bg-emerald-50 dark:border-emerald-900 dark:bg-emerald-950\">\n\t\t\t\t\t\t\t<TrendingUp className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n\t\t\t\t\t\t\t<AlertDescription className=\"text-emerald-900 dark:text-emerald-100\">\n\t\t\t\t\t\t\t\t{recommendations.upsellOpportunities[0]}\n\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Map */}\n\t\t\t{enrichmentData.location && (\n\t\t\t\t<ServiceLocationMap\n\t\t\t\t\taddress={{\n\t\t\t\t\t\tstreet: enrichmentData.location.address?.split(\",\")[0] || \"\",\n\t\t\t\t\t\tcity: enrichmentData.location.address?.split(\",\")[1]?.trim() || \"\",\n\t\t\t\t\t\tstate:\n\t\t\t\t\t\t\tenrichmentData.location.address\n\t\t\t\t\t\t\t\t?.split(\",\")[2]\n\t\t\t\t\t\t\t\t?.trim()\n\t\t\t\t\t\t\t\t.split(\" \")[0] || \"\",\n\t\t\t\t\t\tzipCode:\n\t\t\t\t\t\t\tenrichmentData.location.address\n\t\t\t\t\t\t\t\t?.split(\",\")[2]\n\t\t\t\t\t\t\t\t?.trim()\n\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t\t.join(\" \") || \"\",\n\t\t\t\t\t\tfull: enrichmentData.location.address || \"\",\n\t\t\t\t\t}}\n\t\t\t\t\tlat={enrichmentData.location.lat || 0}\n\t\t\t\t\tlon={enrichmentData.location.lon || 0}\n\t\t\t\t\tnearbySuppliers={nearbySuppliers}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Data Cards */}\n\t\t\t<div className=\"grid gap-4 sm:grid-cols-2\">\n\t\t\t\t{/* Weather */}\n\t\t\t\t{weather?.forecast?.periods?.[0] && (\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<Thermometer className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\tWeather\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent className=\"space-y-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-baseline gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-3xl font-semibold\">\n\t\t\t\t\t\t\t\t\t{weather.forecast.periods[0].temperature}°\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t{weather.forecast.periods[0].windSpeed}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm leading-relaxed\">\n\t\t\t\t\t\t\t\t{weather.forecast.periods[0].detailedForecast}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\n\t\t\t\t{/* Property */}\n\t\t\t\t{propertyData &&\n\t\t\t\t\t(propertyData.characteristics?.yearBuilt ||\n\t\t\t\t\t\tpropertyData.characteristics?.squareFeet ||\n\t\t\t\t\t\tpropertyData.assessment?.assessedValue ||\n\t\t\t\t\t\tpropertyData.market?.lastSoldPrice) && (\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t<Building2 className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\t\tProperty\n\t\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t\t<CardContent className=\"space-y-2\">\n\t\t\t\t\t\t\t\t{propertyData.characteristics?.squareFeet && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Size</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{propertyData.characteristics.squareFeet.toLocaleString()}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\tsq ft\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{propertyData.characteristics?.yearBuilt && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Built</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{propertyData.characteristics.yearBuilt}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{propertyData.assessment?.assessedValue && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Assessed</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t$\n\t\t\t\t\t\t\t\t\t\t\t{(\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyData.assessment.assessedValue / CENTS_TO_DOLLARS\n\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{propertyData.market?.lastSoldPrice && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Last Sold</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t$\n\t\t\t\t\t\t\t\t\t\t\t{(\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyData.market.lastSoldPrice / CENTS_TO_DOLLARS\n\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)}\n\n\t\t\t\t{/* Building (OSM) */}\n\t\t\t\t{buildingData &&\n\t\t\t\t\t(buildingData.footprint?.area ||\n\t\t\t\t\t\tbuildingData.height ||\n\t\t\t\t\t\tbuildingData.levels ||\n\t\t\t\t\t\tbuildingData.buildingType) && (\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t<Building2 className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\t\tBuilding\n\t\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t\t<CardContent className=\"space-y-2\">\n\t\t\t\t\t\t\t\t{buildingData.buildingType && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Type</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{buildingData.buildingType}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{buildingData.footprint?.area && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Footprint</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{Math.round(\n\t\t\t\t\t\t\t\t\t\t\t\tbuildingData.footprint.area * SQ_M_TO_SQ_FT,\n\t\t\t\t\t\t\t\t\t\t\t).toLocaleString()}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\tsq ft\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{buildingData.height && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Height</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{Math.round(buildingData.height * M_TO_FT)} ft\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{buildingData.levels && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Floors</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{buildingData.levels}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)}\n\n\t\t\t\t{/* Water Quality */}\n\t\t\t\t{waterQuality && (\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<Droplets className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\tWater Quality\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent className=\"space-y-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-sm\">Hardness</span>\n\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{waterQuality.classification}</Badge>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{waterQuality.recommendations.shouldOfferSoftener && (\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm leading-relaxed\">\n\t\t\t\t\t\t\t\t\t{waterQuality.recommendations.reason}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\n\t\t\t\t{/* Location */}\n\t\t\t\t{locationIntelligence?.county?.countyName && (\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<MapPin className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\tLocation\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent className=\"space-y-2\">\n\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">County</span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t{locationIntelligence.county.countyName}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{locationIntelligence.floodZone && (\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Flood Zone</span>\n\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\t\t\tlocationIntelligence.floodZone.riskLevel === \"high\"\n\t\t\t\t\t\t\t\t\t\t\t\t? \"destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"secondary\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{locationIntelligence.floodZone.zone}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\n\t\t\t\t{/* Time Zone */}\n\t\t\t\t{timeZone && (\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<Clock className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\tTime Zone\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Zone</span>\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{timeZone.timeZoneName}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Offset</span>\n\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\tUTC{timeZone.totalOffsetHours >= 0 ? \"+\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t{timeZone.totalOffsetHours}\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{timeZone.isDST && (\n\t\t\t\t\t\t\t\t\t<Badge className=\"text-xs\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\tDaylight Saving Time\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\n\t\t\t\t{/* Nearby Suppliers (OSM Fallback) */}\n\t\t\t\t{!googlePlaces && nearbySuppliers && nearbySuppliers.length > 0 && (\n\t\t\t\t\t<Card className=\"sm:col-span-2\">\n\t\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<Store className=\"text-muted-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t\tNearby Suppliers\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t{nearbySuppliers.slice(0, MAX_SUPPLIERS).map((supplier) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between\"\n\t\t\t\t\t\t\t\t\t\tkey={`${supplier.name}-${supplier.lat}-${supplier.lon}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"truncate text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t{supplier.name}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{supplier.distance\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `${(supplier.distance / M_TO_KM).toFixed(1)} km`\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/dir/?api=1&destination=${supplier.lat},${supplier.lon}`}\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Navigation className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Street View Photos */}\n\t\t\t{streetView?.available && streetView.mainView && (\n\t\t\t\t<>\n\t\t\t\t\t<Separator />\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-base\">\n\t\t\t\t\t\t\t\t<Camera className=\"text-primary h-5 w-5\" />\n\t\t\t\t\t\t\t\tProperty Street View\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Main View */}\n\t\t\t\t\t\t\t<div className=\"overflow-hidden rounded-lg border\">\n\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/useAltText: Google Street View external API image */}\n\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/noSvgWithoutTitle: External API image */}\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"Property street view\"\n\t\t\t\t\t\t\t\t\tclassName=\"h-auto w-full\"\n\t\t\t\t\t\t\t\t\theight=\"400\"\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\tsrc={streetView.mainView}\n\t\t\t\t\t\t\t\t\twidth=\"600\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Alternate Views */}\n\t\t\t\t\t\t\t{streetView.alternateViews &&\n\t\t\t\t\t\t\t\tstreetView.alternateViews.length > 0 && (\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-2\">\n\t\t\t\t\t\t\t\t\t\t{streetView.alternateViews.map((view) => (\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"overflow-hidden rounded-md border\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`view-${view.substring(0, URL_KEY_LENGTH)}`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/useAltText: Google Street View external API image */}\n\t\t\t\t\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/noSvgWithoutTitle: External API image */}\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"Property from alternate angle\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-auto w-full\"\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"400\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={view}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"600\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\tStreet view images provided by Google Maps\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{/* Google Places - Nearby Suppliers with Reviews */}\n\t\t\t{googlePlaces && googlePlaces.places.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<Separator />\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t\t<CardTitle className=\"flex items-center justify-between text-base\">\n\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Store className=\"text-primary h-5 w-5\" />\n\t\t\t\t\t\t\t\t\tNearby Suppliers\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t{googlePlaces.totalResults} found\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t{googlePlaces.places.slice(0, MAX_SUPPLIERS).map((place) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex gap-4 rounded-lg border p-4\"\n\t\t\t\t\t\t\t\t\t\tkey={place.placeId}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/* Photo */}\n\t\t\t\t\t\t\t\t\t\t{place.photoUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"h-20 w-20 flex-shrink-0 overflow-hidden rounded-md\">\n\t\t\t\t\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/useAltText: Google Places external API photo */}\n\t\t\t\t\t\t\t\t\t\t\t\t{/* biome-ignore lint/a11y/noSvgWithoutTitle: External API image */}\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={place.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-full w-full object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"80\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={place.photoUrl}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"80\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t{/* Info */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1 space-y-2\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"truncate text-sm font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{place.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground truncate text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{place.vicinity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(place.distance / M_TO_KM).toFixed(1)} km\n\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Rating */}\n\t\t\t\t\t\t\t\t\t\t\t{place.rating && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"text-warning h-3 w-3 fill-yellow-400\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{place.rating.toFixed(1)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{place.userRatingsTotal && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({place.userRatingsTotal.toLocaleString()}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treviews)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{place.openNow !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={place.openNow ? \"default\" : \"secondary\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{place.openNow ? \"Open\" : \"Closed\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/dir/?api=1&destination=${place.lat},${place.lon}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Navigation className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDirections\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t{place.phoneNumber && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={`tel:${place.phoneNumber}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCall\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{place.website && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={place.website}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Globe className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tWebsite\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/place/?q=place_id:${place.placeId}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tView on Maps\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{/* Data Sources */}\n\t\t\t{enrichmentData.sources && enrichmentData.sources.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<Separator />\n\t\t\t\t\t<TooltipProvider>\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\tData sources:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{enrichmentData.sources.map((source) => (\n\t\t\t\t\t\t\t\t<Tooltip key={source}>\n\t\t\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t<Badge className=\"cursor-help\" variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t{source.toUpperCase()}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t\t\t\t<p className=\"max-w-xs text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{getSourceTooltip(source)}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TooltipProvider>\n\t\t\t\t\t{/* RentCast Reminder - Only show if API key is truly not configured */}\n\t\t\t\t\t{enrichmentData.sources.includes(\"none\") &&\n\t\t\t\t\t\t!enrichmentData.propertyData && (\n\t\t\t\t\t\t\t<Alert>\n\t\t\t\t\t\t\t\t<Info className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t<AlertDescription className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t<strong>Tip:</strong> Add a RentCast API key for property\n\t\t\t\t\t\t\t\t\tdetails (50 free requests/month)\n\t\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t)}\n\t\t\t\t\t{/* Property data not available for this location */}\n\t\t\t\t\t{enrichmentData.sources.includes(\"none\") &&\n\t\t\t\t\t\tenrichmentData.propertyData && (\n\t\t\t\t\t\t\t<Alert variant=\"default\">\n\t\t\t\t\t\t\t\t<Info className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t<AlertDescription className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t<strong>Note:</strong> Property data not available for this\n\t\t\t\t\t\t\t\t\trural location in RentCast database\n\t\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Google Services Info */}\n\t\t\t\t\t{enrichmentData.sources.some((s) =>\n\t\t\t\t\t\t[\"google-streetview\", \"google-places\", \"google-timezone\"].includes(\n\t\t\t\t\t\t\ts,\n\t\t\t\t\t\t),\n\t\t\t\t\t) &&\n\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\tconst googleFeatures = [];\n\t\t\t\t\t\t\tif (streetView?.available) {\n\t\t\t\t\t\t\t\tgoogleFeatures.push(\"Street View photos\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (googlePlaces?.places?.length) {\n\t\t\t\t\t\t\t\tgoogleFeatures.push(\"supplier details\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (timeZone) {\n\t\t\t\t\t\t\t\tgoogleFeatures.push(\"timezone data\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (googleFeatures.length === 0) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Alert className=\"border-success bg-success dark:border-success dark:bg-success\">\n\t\t\t\t\t\t\t\t\t<Camera className=\"text-success dark:text-success h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t<AlertDescription className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t<strong>Google Maps:</strong> {googleFeatures.join(\", \")}{\" \"}\n\t\t\t\t\t\t\t\t\t\tavailable (100% FREE - 25k+ requests/month)\n\t\t\t\t\t\t\t\t\t</AlertDescription>\n\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})()}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport { MapPin, Maximize2, Store } from \"lucide-react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ntype Supplier = {\n\tname: string;\n\tdistance: number;\n\tlat: number;\n\tlon: number;\n};\n\ntype ServiceLocationMapProps = {\n\taddress: {\n\t\tstreet: string;\n\t\tcity: string;\n\t\tstate: string;\n\t\tzipCode: string;\n\t\tfull: string;\n\t};\n\tlat: number;\n\tlon: number;\n\tnearbySuppliers?: Supplier[];\n};\n\n// Global state for Google Maps script loading\nlet isMapScriptLoaded = false;\nlet isMapScriptLoading = false;\nconst mapLoadCallbacks: (() => void)[] = [];\n\nfunction loadGoogleMapsScript(apiKey: string): Promise<void> {\n\treturn new Promise((resolve, reject) => {\n\t\tif (isMapScriptLoaded || window.google?.maps) {\n\t\t\tisMapScriptLoaded = true;\n\t\t\tresolve();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isMapScriptLoading) {\n\t\t\tmapLoadCallbacks.push(resolve);\n\t\t\treturn;\n\t\t}\n\n\t\tconst existingScript = document.querySelector(\n\t\t\t'script[src*=\"maps.googleapis.com\"]',\n\t\t);\n\n\t\tif (existingScript) {\n\t\t\tisMapScriptLoading = true;\n\t\t\texistingScript.addEventListener(\"load\", () => {\n\t\t\t\tisMapScriptLoaded = true;\n\t\t\t\tisMapScriptLoading = false;\n\t\t\t\tresolve();\n\t\t\t\tmapLoadCallbacks.forEach((cb) => cb());\n\t\t\t\tmapLoadCallbacks.length = 0;\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tisMapScriptLoading = true;\n\t\tconst script = document.createElement(\"script\");\n\t\tscript.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=marker`;\n\t\tscript.async = true;\n\t\tscript.defer = true;\n\n\t\tscript.onload = () => {\n\t\t\tisMapScriptLoaded = true;\n\t\t\tisMapScriptLoading = false;\n\t\t\tresolve();\n\t\t\tmapLoadCallbacks.forEach((cb) => cb());\n\t\t\tmapLoadCallbacks.length = 0;\n\t\t};\n\n\t\tscript.onerror = () => {\n\t\t\tisMapScriptLoading = false;\n\t\t\treject(new Error(\"Failed to load Google Maps\"));\n\t\t};\n\n\t\tdocument.head.appendChild(script);\n\t});\n}\n\nexport function ServiceLocationMap({\n\taddress,\n\tlat,\n\tlon,\n\tnearbySuppliers = [],\n}: ServiceLocationMapProps) {\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst compactMapRef = useRef<HTMLDivElement>(null);\n\tconst expandedMapRef = useRef<HTMLDivElement>(null);\n\tconst compactMapInstance = useRef<google.maps.Map | null>(null);\n\tconst expandedMapInstance = useRef<google.maps.Map | null>(null);\n\n\tconst apiKey = process.env.NEXT_PUBLIC_GOOGLE_PLACES_API_KEY;\n\n\t// Initialize compact map\n\tuseEffect(() => {\n\t\tif (!apiKey) {\n\t\t\tsetError(\"Google Maps API key not configured\");\n\t\t\tsetIsLoading(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if already initialized\n\t\tif (compactMapInstance.current) {\n\t\t\tsetIsLoading(false);\n\t\t\treturn;\n\t\t}\n\n\t\tlet isMounted = true;\n\t\tlet timeoutId: NodeJS.Timeout | null = null;\n\t\tconst MAX_RETRIES = 50; // 5 seconds max (50 * 100ms)\n\t\tlet retryCount = 0;\n\n\t\tconst attemptInit = () => {\n\t\t\tif (!isMounted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!compactMapRef.current) {\n\t\t\t\tretryCount++;\n\t\t\t\tif (retryCount >= MAX_RETRIES) {\n\t\t\t\t\tsetError(\"Failed to initialize map\");\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttimeoutId = setTimeout(attemptInit, 100);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tloadGoogleMapsScript(apiKey)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (!isMounted) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (compactMapRef.current && !compactMapInstance.current) {\n\t\t\t\t\t\tinitMap(compactMapRef.current, false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((_err) => {\n\t\t\t\t\tif (!isMounted) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetError(\"Failed to load Google Maps\");\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tif (!isMounted) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t};\n\n\t\tattemptInit();\n\n\t\t// Cleanup function\n\t\treturn () => {\n\t\t\tisMounted = false;\n\t\t\tif (timeoutId) {\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t}\n\t\t};\n\t}, [apiKey, initMap]);\n\n\t// Initialize expanded map when dialog opens\n\tuseEffect(() => {\n\t\tif (isExpanded && expandedMapRef.current && !expandedMapInstance.current) {\n\t\t\tinitMap(expandedMapRef.current, true);\n\t\t}\n\t}, [isExpanded, initMap]);\n\n\tconst initMap = (container: HTMLDivElement, isExpanded: boolean) => {\n\t\tif (!window.google?.maps) {\n\t\t\treturn;\n\t\t}\n\t\tconst map = new google.maps.Map(container, {\n\t\t\tcenter: { lat, lng: lon },\n\t\t\tzoom: isExpanded ? 13 : 12,\n\t\t\tmapTypeControl: false,\n\t\t\tstreetViewControl: false,\n\t\t\tfullscreenControl: isExpanded,\n\t\t});\n\n\t\t// Add job location marker (red)\n\t\tnew google.maps.Marker({\n\t\t\tposition: { lat, lng: lon },\n\t\t\tmap,\n\t\t\ttitle: address.full,\n\t\t\ticon: {\n\t\t\t\tpath: google.maps.SymbolPath.CIRCLE,\n\t\t\t\tscale: 8,\n\t\t\t\tfillColor: \"#ef4444\",\n\t\t\t\tfillOpacity: 1,\n\t\t\t\tstrokeColor: \"#f3f7fd\",\n\t\t\t\tstrokeWeight: 2,\n\t\t\t},\n\t\t\tlabel: {\n\t\t\t\ttext: \"📍\",\n\t\t\t\tfontSize: \"18px\",\n\t\t\t},\n\t\t});\n\n\t\t// Add supplier markers (blue)\n\t\tconst bounds = new google.maps.LatLngBounds();\n\t\tbounds.extend({ lat, lng: lon });\n\n\t\tfor (const supplier of nearbySuppliers) {\n\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\tposition: { lat: supplier.lat, lng: supplier.lon },\n\t\t\t\tmap,\n\t\t\t\ttitle: supplier.name,\n\t\t\t\ticon: {\n\t\t\t\t\tpath: google.maps.SymbolPath.CIRCLE,\n\t\t\t\t\tscale: 6,\n\t\t\t\t\tfillColor: \"#3b82f6\",\n\t\t\t\t\tfillOpacity: 0.8,\n\t\t\t\t\tstrokeColor: \"#f3f7fd\",\n\t\t\t\t\tstrokeWeight: 2,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Info window for suppliers\n\t\t\tconst infoWindow = new google.maps.InfoWindow({\n\t\t\t\tcontent: `\n          <div style=\"padding: 8px;\">\n            <div style=\"font-weight: 600; margin-bottom: 4px;\">${supplier.name}</div>\n            <div style=\"font-size: 12px; color: #666;\">\n              ${(supplier.distance / 1000).toFixed(1)} km away\n            </div>\n          </div>\n        `,\n\t\t\t});\n\n\t\t\tmarker.addListener(\"click\", () => {\n\t\t\t\tinfoWindow.open(map, marker);\n\t\t\t});\n\n\t\t\tbounds.extend({ lat: supplier.lat, lng: supplier.lon });\n\t\t}\n\n\t\t// Fit map to show all markers\n\t\tif (nearbySuppliers.length > 0) {\n\t\t\tmap.fitBounds(bounds);\n\t\t}\n\n\t\tif (isExpanded) {\n\t\t\texpandedMapInstance.current = map;\n\t\t} else {\n\t\t\tcompactMapInstance.current = map;\n\t\t}\n\t};\n\n\tif (error) {\n\t\treturn (\n\t\t\t<div className=\"border-muted text-muted-foreground flex items-center gap-2 rounded-lg border p-4 text-sm\">\n\t\t\t\t<MapPin className=\"h-4 w-4\" />\n\t\t\t\t<span>Map unavailable: {error}</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{/* Compact Map Card */}\n\t\t\t<div className=\"group bg-card relative overflow-hidden rounded-lg border\">\n\t\t\t\t{/* Map Container */}\n\t\t\t\t<div className=\"relative h-[180px] w-full\">\n\t\t\t\t\t<div className=\"h-full w-full\" ref={compactMapRef} />\n\t\t\t\t\t{isLoading && <Skeleton className=\"absolute inset-0 h-full w-full\" />}\n\n\t\t\t\t\t{/* Overlay Info */}\n\t\t\t\t\t<div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/60 to-transparent p-3\">\n\t\t\t\t\t\t<div className=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<MapPin className=\"h-4 w-4 text-white\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-semibold text-white\">\n\t\t\t\t\t\t\t\t\t\tService Location\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{nearbySuppliers.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-primary/80 h-5 text-[10px] text-white\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Store className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t{nearbySuppliers.length} suppliers\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-white/90\">{address.street}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-white/80\">\n\t\t\t\t\t\t\t\t\t{address.city}, {address.state} {address.zipCode}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"bg-card/90 hover:bg-card h-8 w-8\"\n\t\t\t\t\t\t\t\tonClick={() => setIsExpanded(true)}\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Maximize2 className=\"text-foreground h-4 w-4\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Expanded Map Dialog */}\n\t\t\t<Dialog onOpenChange={setIsExpanded} open={isExpanded}>\n\t\t\t\t<DialogContent className=\"max-w-4xl p-0\">\n\t\t\t\t\t<DialogHeader className=\"border-b p-4\">\n\t\t\t\t\t\t<DialogTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<MapPin className=\"text-primary h-5 w-5\" />\n\t\t\t\t\t\t\tService Location Map\n\t\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t\t<div className=\"text-muted-foreground mt-2 text-sm\">\n\t\t\t\t\t\t\t<p className=\"text-foreground font-medium\">{address.street}</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{address.city}, {address.state} {address.zipCode}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DialogHeader>\n\n\t\t\t\t\t{/* Map */}\n\t\t\t\t\t<div className=\"h-[600px] w-full\" ref={expandedMapRef} />\n\n\t\t\t\t\t{/* Legend */}\n\t\t\t\t\t<div className=\"border-t p-4\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-6 text-sm\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<div className=\"bg-destructive flex h-6 w-6 items-center justify-center rounded-full\">\n\t\t\t\t\t\t\t\t\t<MapPin className=\"h-4 w-4 text-white\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span>Service Location</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{nearbySuppliers.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<div className=\"bg-primary flex h-6 w-6 items-center justify-center rounded-full\">\n\t\t\t\t\t\t\t\t\t\t<Store className=\"h-4 w-4 text-white\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span>Nearby Suppliers ({nearbySuppliers.length})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</>\n\t);\n}\n","\"use client\";\n\nimport {\n\tAlertTriangle,\n\tBuilding2,\n\tCloudRain,\n\tDollarSign,\n\tDroplets,\n\tHome,\n\tInfo,\n\tLoader2,\n\tMapPin,\n\tRefreshCw,\n\tShield,\n\tShieldAlert,\n\tShieldCheck,\n\tThermometer,\n\tTrendingUp,\n} from \"lucide-react\";\nimport { memo, useCallback, useEffect, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\ntype PropertyAddress = {\n\tstreet?: string;\n\tcity?: string;\n\tstate?: string;\n\tpostal_code?: string;\n\tlat?: number;\n\tlng?: number;\n};\n\ntype PropertyRiskCardProps = {\n\tpropertyId: string;\n\tpropertyName?: string;\n\taddress: PropertyAddress;\n\tclassName?: string;\n\tcompact?: boolean;\n};\n\ntype FloodData = {\n\tzone?: string;\n\tzoneDescription?: string;\n\triskLevel?: \"minimal\" | \"low\" | \"moderate\" | \"high\" | \"very-high\";\n\tsfhaStatus?: boolean;\n\tpanelNumber?: string;\n\tcommunityName?: string;\n};\n\ntype CrimeData = {\n\tviolentCrimeRate?: number;\n\tpropertyCrimeRate?: number;\n\tsafetyScore?: number; // 0-100\n\tcomparedToNational?: \"below\" | \"average\" | \"above\";\n\tequipmentTheftRisk?: \"low\" | \"moderate\" | \"high\";\n};\n\ntype PropertyData = {\n\tyearBuilt?: number;\n\tsquareFeet?: number;\n\tbedrooms?: number;\n\tbathrooms?: number;\n\tpropertyType?: string;\n\testimatedValue?: number;\n\tlastSalePrice?: number;\n\tlastSaleDate?: string;\n\tlotSize?: number;\n\theatingType?: string;\n\tcoolingType?: string;\n};\n\ntype RiskAssessment = {\n\tflood: FloodData | null;\n\tcrime: CrimeData | null;\n\tproperty: PropertyData | null;\n\tisLoading: boolean;\n\terror: string | null;\n\tlastFetched: Date | null;\n};\n\nfunction getRiskColor(level: string | undefined): string {\n\tswitch (level) {\n\t\tcase \"minimal\":\n\t\tcase \"low\":\n\t\t\treturn \"text-green-600 bg-green-100 dark:bg-green-900/30\";\n\t\tcase \"moderate\":\n\t\tcase \"average\":\n\t\t\treturn \"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30\";\n\t\tcase \"high\":\n\t\tcase \"above\":\n\t\t\treturn \"text-orange-600 bg-orange-100 dark:bg-orange-900/30\";\n\t\tcase \"very-high\":\n\t\t\treturn \"text-red-600 bg-red-100 dark:bg-red-900/30\";\n\t\tdefault:\n\t\t\treturn \"text-muted-foreground bg-muted\";\n\t}\n}\n\nfunction getRiskIcon(level: string | undefined) {\n\tswitch (level) {\n\t\tcase \"minimal\":\n\t\tcase \"low\":\n\t\t\treturn <ShieldCheck className=\"size-4 text-green-600\" />;\n\t\tcase \"moderate\":\n\t\tcase \"average\":\n\t\t\treturn <Shield className=\"size-4 text-yellow-600\" />;\n\t\tcase \"high\":\n\t\tcase \"above\":\n\t\tcase \"very-high\":\n\t\t\treturn <ShieldAlert className=\"size-4 text-red-600\" />;\n\t\tdefault:\n\t\t\treturn <Shield className=\"size-4 text-muted-foreground\" />;\n\t}\n}\n\nfunction formatCurrency(value: number | undefined): string {\n\tif (!value) return \"N/A\";\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t\tminimumFractionDigits: 0,\n\t\tmaximumFractionDigits: 0,\n\t}).format(value);\n}\n\nfunction RiskSkeleton() {\n\treturn (\n\t\t<div className=\"space-y-3\">\n\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t<Skeleton className=\"size-8 rounded-full\" />\n\t\t\t\t<Skeleton className=\"h-4 w-24\" />\n\t\t\t</div>\n\t\t\t<Skeleton className=\"h-3 w-full\" />\n\t\t\t<Skeleton className=\"h-3 w-3/4\" />\n\t\t</div>\n\t);\n}\n\nexport const PropertyRiskCard = memo(function PropertyRiskCard({\n\tpropertyId,\n\tpropertyName,\n\taddress,\n\tclassName,\n\tcompact = false,\n}: PropertyRiskCardProps) {\n\tconst [assessment, setAssessment] = useState<RiskAssessment>({\n\t\tflood: null,\n\t\tcrime: null,\n\t\tproperty: null,\n\t\tisLoading: true,\n\t\terror: null,\n\t\tlastFetched: null,\n\t});\n\n\tconst fullAddress = [address.street, address.city, address.state]\n\t\t.filter(Boolean)\n\t\t.join(\", \");\n\n\tconst fetchRiskData = useCallback(async () => {\n\t\tif (!fullAddress || fullAddress.length < 5) {\n\t\t\tsetAssessment((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisLoading: false,\n\t\t\t\terror: \"Invalid address\",\n\t\t\t}));\n\t\t\treturn;\n\t\t}\n\n\t\tsetAssessment((prev) => ({ ...prev, isLoading: true, error: null }));\n\n\t\ttry {\n\t\t\t// Fetch all risk data in parallel\n\t\t\tconst [floodRes, crimeRes, propertyRes] = await Promise.allSettled([\n\t\t\t\t// Flood data\n\t\t\t\tfetch(\n\t\t\t\t\t`/api/risk/flood?${new URLSearchParams({\n\t\t\t\t\t\taddress: fullAddress,\n\t\t\t\t\t\taction: \"property-data\",\n\t\t\t\t\t})}`,\n\t\t\t\t).then((r) => (r.ok ? r.json() : null)),\n\n\t\t\t\t// Crime data\n\t\t\t\taddress.state\n\t\t\t\t\t? fetch(\n\t\t\t\t\t\t\t`/api/risk/crime?${new URLSearchParams({\n\t\t\t\t\t\t\t\tstate: address.state,\n\t\t\t\t\t\t\t\taction: \"safety-report\",\n\t\t\t\t\t\t\t\tlocation: fullAddress,\n\t\t\t\t\t\t\t})}`,\n\t\t\t\t\t\t).then((r) => (r.ok ? r.json() : null))\n\t\t\t\t\t: Promise.resolve(null),\n\n\t\t\t\t// Property data (ATTOM)\n\t\t\t\taddress.street && address.city && address.state\n\t\t\t\t\t? fetch(\n\t\t\t\t\t\t\t`/api/property/attom?${new URLSearchParams({\n\t\t\t\t\t\t\t\taddress: address.street,\n\t\t\t\t\t\t\t\tlocality: address.city,\n\t\t\t\t\t\t\t\tstate: address.state,\n\t\t\t\t\t\t\t\tpostal: address.postal_code || \"\",\n\t\t\t\t\t\t\t\taction: \"service-report\",\n\t\t\t\t\t\t\t})}`,\n\t\t\t\t\t\t).then((r) => (r.ok ? r.json() : null))\n\t\t\t\t\t: Promise.resolve(null),\n\t\t\t]);\n\n\t\t\tconst floodData =\n\t\t\t\tfloodRes.status === \"fulfilled\" ? floodRes.value : null;\n\t\t\tconst crimeData =\n\t\t\t\tcrimeRes.status === \"fulfilled\" ? crimeRes.value : null;\n\t\t\tconst propertyData =\n\t\t\t\tpropertyRes.status === \"fulfilled\" ? propertyRes.value : null;\n\n\t\t\tsetAssessment({\n\t\t\t\tflood: floodData\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tzone: floodData.floodZone || floodData.zone,\n\t\t\t\t\t\t\tzoneDescription:\n\t\t\t\t\t\t\t\tfloodData.zoneDescription || floodData.description,\n\t\t\t\t\t\t\triskLevel: floodData.riskLevel || mapFloodZoneToRisk(floodData.zone),\n\t\t\t\t\t\t\tsfhaStatus: floodData.sfhaStatus || floodData.inSfha,\n\t\t\t\t\t\t\tpanelNumber: floodData.panelNumber,\n\t\t\t\t\t\t\tcommunityName: floodData.communityName,\n\t\t\t\t\t\t}\n\t\t\t\t\t: null,\n\t\t\t\tcrime: crimeData\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tviolentCrimeRate: crimeData.violentCrimeRate,\n\t\t\t\t\t\t\tpropertyCrimeRate: crimeData.propertyCrimeRate,\n\t\t\t\t\t\t\tsafetyScore: crimeData.safetyScore,\n\t\t\t\t\t\t\tcomparedToNational: crimeData.comparedToNational,\n\t\t\t\t\t\t\tequipmentTheftRisk: crimeData.equipmentTheftRisk,\n\t\t\t\t\t\t}\n\t\t\t\t\t: null,\n\t\t\t\tproperty: propertyData\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tyearBuilt: propertyData.yearBuilt,\n\t\t\t\t\t\t\tsquareFeet: propertyData.squareFeet || propertyData.livingArea,\n\t\t\t\t\t\t\tbedrooms: propertyData.bedrooms,\n\t\t\t\t\t\t\tbathrooms: propertyData.bathrooms,\n\t\t\t\t\t\t\tpropertyType: propertyData.propertyType,\n\t\t\t\t\t\t\testimatedValue:\n\t\t\t\t\t\t\t\tpropertyData.estimatedValue || propertyData.avm?.value,\n\t\t\t\t\t\t\tlastSalePrice: propertyData.lastSalePrice,\n\t\t\t\t\t\t\tlastSaleDate: propertyData.lastSaleDate,\n\t\t\t\t\t\t\tlotSize: propertyData.lotSize,\n\t\t\t\t\t\t\theatingType: propertyData.heatingType,\n\t\t\t\t\t\t\tcoolingType: propertyData.coolingType,\n\t\t\t\t\t\t}\n\t\t\t\t\t: null,\n\t\t\t\tisLoading: false,\n\t\t\t\terror: null,\n\t\t\t\tlastFetched: new Date(),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error fetching risk data:\", error);\n\t\t\tsetAssessment((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisLoading: false,\n\t\t\t\terror: \"Failed to fetch risk data\",\n\t\t\t}));\n\t\t}\n\t}, [fullAddress, address.street, address.city, address.state, address.postal_code]);\n\n\tuseEffect(() => {\n\t\tfetchRiskData();\n\t}, [fetchRiskData]);\n\n\t// Map FEMA flood zone codes to risk levels\n\tfunction mapFloodZoneToRisk(\n\t\tzone: string | undefined,\n\t): FloodData[\"riskLevel\"] {\n\t\tif (!zone) return undefined;\n\t\tconst zoneUpper = zone.toUpperCase();\n\t\tif (zoneUpper.startsWith(\"X\") || zoneUpper === \"C\" || zoneUpper === \"B\") {\n\t\t\treturn \"minimal\";\n\t\t}\n\t\tif (zoneUpper.startsWith(\"A\") || zoneUpper.startsWith(\"V\")) {\n\t\t\treturn \"high\";\n\t\t}\n\t\tif (zoneUpper.startsWith(\"D\")) {\n\t\t\treturn \"moderate\";\n\t\t}\n\t\treturn \"low\";\n\t}\n\n\tconst { flood, crime, property, isLoading, error } = assessment;\n\n\t// Calculate overall risk score\n\tconst overallRisk = (() => {\n\t\tlet score = 0;\n\t\tlet factors = 0;\n\n\t\tif (flood?.riskLevel) {\n\t\t\tfactors++;\n\t\t\tswitch (flood.riskLevel) {\n\t\t\t\tcase \"minimal\":\n\t\t\t\t\tscore += 10;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"low\":\n\t\t\t\t\tscore += 30;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"moderate\":\n\t\t\t\t\tscore += 50;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"high\":\n\t\t\t\t\tscore += 75;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"very-high\":\n\t\t\t\t\tscore += 100;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (crime?.safetyScore !== undefined) {\n\t\t\tfactors++;\n\t\t\tscore += 100 - crime.safetyScore; // Invert: higher safety = lower risk\n\t\t}\n\n\t\treturn factors > 0 ? Math.round(score / factors) : null;\n\t})();\n\n\tif (compact) {\n\t\treturn (\n\t\t\t<TooltipProvider>\n\t\t\t\t<Tooltip>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"flex items-center gap-2 rounded-md border px-3 py-2\",\n\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t\t<Loader2 className=\"size-4 animate-spin\" />\n\t\t\t\t\t\t\t) : overallRisk !== null ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{getRiskIcon(\n\t\t\t\t\t\t\t\t\t\toverallRisk < 25\n\t\t\t\t\t\t\t\t\t\t\t? \"low\"\n\t\t\t\t\t\t\t\t\t\t\t: overallRisk < 50\n\t\t\t\t\t\t\t\t\t\t\t\t? \"moderate\"\n\t\t\t\t\t\t\t\t\t\t\t\t: overallRisk < 75\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"high\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"very-high\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\tRisk Score: {overallRisk}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Info className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tNo risk data\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t<div className=\"space-y-1 text-xs\">\n\t\t\t\t\t\t\t{flood && (\n\t\t\t\t\t\t\t\t<p>Flood Zone: {flood.zone || \"Unknown\"}</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{crime?.safetyScore !== undefined && (\n\t\t\t\t\t\t\t\t<p>Safety Score: {crime.safetyScore}/100</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{property?.estimatedValue && (\n\t\t\t\t\t\t\t\t<p>Est. Value: {formatCurrency(property.estimatedValue)}</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TooltipContent>\n\t\t\t\t</Tooltip>\n\t\t\t</TooltipProvider>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Card className={cn(\"overflow-hidden\", className)}>\n\t\t\t<CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<Home className=\"size-5 text-primary\" />\n\t\t\t\t\t<CardTitle className=\"text-base font-semibold\">\n\t\t\t\t\t\t{propertyName || \"Property Risk Assessment\"}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={fetchRiskData}\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t>\n\t\t\t\t\t<RefreshCw className={cn(\"size-4\", isLoading && \"animate-spin\")} />\n\t\t\t\t</Button>\n\t\t\t</CardHeader>\n\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t{/* Address */}\n\t\t\t\t<div className=\"flex items-start gap-2 text-sm text-muted-foreground\">\n\t\t\t\t\t<MapPin className=\"size-4 mt-0.5 shrink-0\" />\n\t\t\t\t\t<span>{fullAddress}</span>\n\t\t\t\t</div>\n\n\t\t\t\t{error && (\n\t\t\t\t\t<div className=\"rounded-md bg-destructive/10 px-3 py-2 text-sm text-destructive\">\n\t\t\t\t\t\t{error}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-3\">\n\t\t\t\t\t\t<RiskSkeleton />\n\t\t\t\t\t\t<RiskSkeleton />\n\t\t\t\t\t\t<RiskSkeleton />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-3\">\n\t\t\t\t\t\t{/* Flood Risk */}\n\t\t\t\t\t\t<div className=\"space-y-2 rounded-lg border p-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<div className=\"rounded-full bg-blue-100 p-1.5 dark:bg-blue-900/30\">\n\t\t\t\t\t\t\t\t\t<Droplets className=\"size-4 text-blue-600\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">Flood Risk</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{flood ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\t\tgetRiskColor(flood.riskLevel),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tZone {flood.zone || \"N/A\"}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t{getRiskIcon(flood.riskLevel)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{flood.zoneDescription ||\n\t\t\t\t\t\t\t\t\t\t\t(flood.sfhaStatus\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Special Flood Hazard Area\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Outside flood hazard area\")}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tNo flood data available\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Safety Score */}\n\t\t\t\t\t\t<div className=\"space-y-2 rounded-lg border p-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<div className=\"rounded-full bg-purple-100 p-1.5 dark:bg-purple-900/30\">\n\t\t\t\t\t\t\t\t\t<Shield className=\"size-4 text-purple-600\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">Area Safety</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{crime ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t{crime.safetyScore !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-2 flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={crime.safetyScore}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{crime.safetyScore}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{crime.comparedToNational === \"below\"\n\t\t\t\t\t\t\t\t\t\t\t? \"Below national average crime\"\n\t\t\t\t\t\t\t\t\t\t\t: crime.comparedToNational === \"above\"\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Above national average crime\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Average crime levels\"}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{crime.equipmentTheftRisk && (\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\t\tcrime.equipmentTheftRisk === \"low\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-green-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: crime.equipmentTheftRisk === \"high\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-red-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-yellow-600\",\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tEquipment theft: {crime.equipmentTheftRisk}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tNo safety data available\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Property Info */}\n\t\t\t\t\t\t<div className=\"space-y-2 rounded-lg border p-3\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<div className=\"rounded-full bg-green-100 p-1.5 dark:bg-green-900/30\">\n\t\t\t\t\t\t\t\t\t<Building2 className=\"size-4 text-green-600\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">Property Details</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{property ? (\n\t\t\t\t\t\t\t\t<div className=\"space-y-1.5\">\n\t\t\t\t\t\t\t\t\t{property.estimatedValue && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Est. Value</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(property.estimatedValue)}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{property.yearBuilt && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Built</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{property.yearBuilt}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{property.squareFeet && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Sq Ft</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{property.squareFeet.toLocaleString()}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-1 pt-1\">\n\t\t\t\t\t\t\t\t\t\t{property.heatingType && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"text-xs\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Thermometer className=\"mr-1 size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t{property.heatingType}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{property.coolingType && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"text-xs\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CloudRain className=\"mr-1 size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t{property.coolingType}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tNo property data available\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Service Recommendations based on risk data */}\n\t\t\t\t{!isLoading && (flood || crime || property) && (\n\t\t\t\t\t<div className=\"rounded-lg bg-muted/50 p-3\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t<AlertTriangle className=\"size-4 text-amber-500\" />\n\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\tService Considerations\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul className=\"space-y-1 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t{flood?.sfhaStatus && (\n\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t<Droplets className=\"size-3 text-blue-500\" />\n\t\t\t\t\t\t\t\t\tConsider flood-resistant equipment placement\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{crime?.equipmentTheftRisk === \"high\" && (\n\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t<ShieldAlert className=\"size-3 text-red-500\" />\n\t\t\t\t\t\t\t\t\tSecure equipment and materials on-site\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{property?.yearBuilt && property.yearBuilt < 1980 && (\n\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t<Home className=\"size-3 text-amber-500\" />\n\t\t\t\t\t\t\t\t\tOlder home - check for outdated systems\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{property?.estimatedValue && property.estimatedValue > 500000 && (\n\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t<DollarSign className=\"size-3 text-green-500\" />\n\t\t\t\t\t\t\t\t\tHigh-value property - premium service recommended\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n});\n"],"names":[],"mappings":"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"}