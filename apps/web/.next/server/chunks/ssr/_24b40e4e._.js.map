{"version":3,"sources":["../../../../../../apps/web/src/components/layout/section-layout.tsx","../../../../../../apps/web/src/components/layout/communication-section-layout.tsx"],"sourcesContent":["import type { CSSProperties, ReactNode } from \"react\";\nimport { InvoiceOptionsSidebar } from \"@/components/invoices/invoice-options-sidebar\";\nimport { AppSidebar } from \"@/components/layout/app-sidebar\";\nimport { AppToolbar } from \"@/components/layout/app-toolbar\";\nimport { PriceBookSidebar } from \"@/components/pricebook/pricebook-sidebar\";\nimport { SidebarInset, SidebarProvider } from \"@/components/ui/sidebar\";\nimport type { UnifiedLayoutConfig } from \"@/lib/layout/unified-layout-config\";\nimport { cn } from \"@/lib/utils\";\n\ntype SectionLayoutProps = {\n\tchildren: ReactNode;\n\tconfig: UnifiedLayoutConfig;\n\tpathname: string;\n};\n\nconst RIGHT_SIDEBAR_COMPONENTS = {\n\tinvoice: InvoiceOptionsSidebar,\n\tpricebook: PriceBookSidebar,\n} as const;\n\n/**\n * SectionLayout - Reusable Server Component\n *\n * Takes a layout config and renders the appropriate structure.\n * Used by section-specific layouts to avoid code duplication.\n *\n * This is a pure server component - no client JS needed.\n */\nexport function SectionLayout({\n\tchildren,\n\tconfig,\n\tpathname,\n}: SectionLayoutProps) {\n\tconst { structure, toolbar, sidebar, rightSidebar } = config;\n\n\t// Compute layout classes based on structure config\n\tconst maxWidthClass =\n\t\tstructure.maxWidth === \"full\"\n\t\t\t? \"w-full\"\n\t\t\t: `mx-auto w-full max-w-${structure.maxWidth}`;\n\n\tconst paddingMap = {\n\t\tnone: \"\",\n\t\tsm: \"p-4\",\n\t\tmd: \"p-6\",\n\t\tlg: \"p-8\",\n\t};\n\tconst paddingClass = paddingMap[structure.padding || \"none\"];\n\n\tconst gapMap = {\n\t\tnone: \"\",\n\t\tsm: \"gap-4\",\n\t\tmd: \"gap-6\",\n\t\tlg: \"gap-8\",\n\t};\n\tconst gapClass = gapMap[structure.gap || \"none\"];\n\n\tconst isFullWidth = structure.maxWidth === \"full\";\n\tconst variant = structure.variant ?? \"default\";\n\n\tconst backgroundMap: Record<string, string> = {\n\t\tdefault: \"bg-background\",\n\t\tmuted: \"bg-muted/50\",\n\t\tcard: \"bg-card\",\n\t};\n\tconst backgroundClass =\n\t\tbackgroundMap[structure.background || \"default\"] ?? backgroundMap.default;\n\n\tconst insetClassName = cn(\n\t\t\"relative w-full\",\n\t\tbackgroundClass,\n\t\tvariant === \"detail\" && \"flex flex-col gap-0\",\n\t);\n\n\tconst mainBaseClass = \"flex w-full flex-1 flex-col overflow-y-auto\";\n\tconst detailTopPadding =\n\t\t{\n\t\t\tnone: \"pt-4\",\n\t\t\tsm: \"pt-6\",\n\t\t\tmd: \"pt-8\",\n\t\t\tlg: \"pt-10\",\n\t\t}[structure.padding || \"none\"] ?? \"pt-4\";\n\n\tconst mainClassName = cn(\n\t\tmainBaseClass,\n\t\tgapClass,\n\t\tpaddingClass,\n\t\tvariant === \"detail\" && \"pb-24\",\n\t\tvariant === \"detail\" ? cn(\"px-0\", detailTopPadding) : undefined,\n\t);\n\n\tconst RightSidebarComponent =\n\t\trightSidebar?.component &&\n\t\tRIGHT_SIDEBAR_COMPONENTS[\n\t\t\trightSidebar.component as keyof typeof RIGHT_SIDEBAR_COMPONENTS\n\t\t];\n\n\treturn (\n\t\t<SidebarProvider\n\t\t\tdefaultOpen\n\t\t\tstyle={\n\t\t\t\tsidebar.customConfig?.width\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\t\"--sidebar-width\": sidebar.customConfig.width,\n\t\t\t\t\t\t} as CSSProperties)\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"fixed inset-0 top-14 flex w-full overflow-hidden\"\n\t\t\t\tdata-dashboard-layout\n\t\t\t\tdata-pathname={pathname}\n\t\t\t>\n\t\t\t\t{sidebar.show && <AppSidebar pathname={pathname} />}\n\n\t\t\t\t<SidebarInset\n\t\t\t\t\tclassName={insetClassName}\n\t\t\t\t\tdata-has-right-sidebar={rightSidebar?.show ? \"true\" : undefined}\n\t\t\t\t\tdata-layout-variant={variant}\n\t\t\t\t>\n\t\t\t\t\t{toolbar.show && (\n\t\t\t\t\t\t<AppToolbar\n\t\t\t\t\t\t\tconfig={toolbar}\n\t\t\t\t\t\t\tpathname={pathname}\n\t\t\t\t\t\t\tscope=\"layout\"\n\t\t\t\t\t\t\tshowLeftSidebar={sidebar.show}\n\t\t\t\t\t\t\tshowRightSidebar={rightSidebar?.show}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{isFullWidth ? (\n\t\t\t\t\t\t<main className={mainClassName}>{children}</main>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<main className={mainClassName}>\n\t\t\t\t\t\t\t<div className={maxWidthClass}>{children}</div>\n\t\t\t\t\t\t</main>\n\t\t\t\t\t)}\n\t\t\t\t</SidebarInset>\n\n\t\t\t\t{rightSidebar?.show && RightSidebarComponent && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"hidden\",\n\t\t\t\t\t\t\t\"border-l\",\n\t\t\t\t\t\t\t\"border-border/50\",\n\t\t\t\t\t\t\t\"bg-muted/20\",\n\t\t\t\t\t\t\t\"xl:flex\",\n\t\t\t\t\t\t\t\"xl:w-80\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RightSidebarComponent />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</SidebarProvider>\n\t);\n}\n","\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport type { ReactNode } from \"react\";\nimport { SectionLayout } from \"@/components/layout/section-layout\";\nimport type { UnifiedLayoutConfig } from \"@/lib/layout/unified-layout-config\";\n\ntype CommunicationSectionLayoutProps = {\n\tchildren: ReactNode;\n};\n\n/**\n * Communication Section Layout - Client Component\n *\n * Conditionally applies communication section layout based on current pathname.\n * Mobile routes (/mobile) bypass the SectionLayout to avoid rendering the sidebar.\n *\n * This is a client component because we need usePathname() to determine\n * which layout to apply based on the current route.\n */\nexport function CommunicationSectionLayout({\n\tchildren,\n}: CommunicationSectionLayoutProps) {\n\tconst pathname = usePathname() ?? \"\";\n\n\t// Mobile routes should NOT get the desktop layout with sidebar\n\tconst isMobileRoute = pathname.includes(\"/mobile\");\n\n\t// If it's a mobile route, just render children without layout wrapper\n\tif (isMobileRoute) {\n\t\treturn <>{children}</>;\n\t}\n\n\t// Desktop routes: use SectionLayout with sidebar\n\tconst config: UnifiedLayoutConfig = {\n\t\tstructure: {\n\t\t\tmaxWidth: \"full\",\n\t\t\tpadding: \"none\",\n\t\t\tgap: \"none\",\n\t\t\tfixedHeight: false,\n\t\t\tvariant: \"default\",\n\t\t\tbackground: \"default\",\n\t\t\tinsetPadding: \"default\",\n\t\t},\n\t\theader: {\n\t\t\tshow: true,\n\t\t},\n\t\ttoolbar: {\n\t\t\tshow: false,\n\t\t\ttitle: null,\n\t\t\tactions: null,\n\t\t},\n\t\tsidebar: {\n\t\t\tshow: true,\n\t\t\tvariant: \"communication\",\n\t\t},\n\t};\n\n\treturn (\n\t\t<SectionLayout config={config} pathname=\"/dashboard/communication\">\n\t\t\t{children}\n\t\t</SectionLayout>\n\t);\n}\n"],"names":[],"mappings":"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"}