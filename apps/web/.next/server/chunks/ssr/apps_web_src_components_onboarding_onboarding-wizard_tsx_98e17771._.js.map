{"version":3,"sources":["../../../../../../apps/web/src/components/onboarding/onboarding-wizard.tsx","../../../../../../apps/web/src/actions/data%3A1522ce%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/onboarding/info-cards/walkthrough-slide.tsx","../../../../../../apps/web/src/components/onboarding/progress-banner.tsx","../../../../../../apps/web/src/lib/onboarding/onboarding-store.ts","../../../../../../apps/web/src/components/onboarding/steps/company-step.tsx","../../../../../../apps/web/src/components/onboarding/help-tooltip.tsx","../../../../../../apps/web/src/components/onboarding/steps/complete-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/data-import-step.tsx","../../../../../../apps/web/src/components/ui/accordion.tsx","../../../../../../apps/web/src/components/onboarding/steps/email-step.tsx","../../../../../../apps/web/src/components/onboarding/status-tracking/dns-verification-tracker.tsx","../../../../../../apps/web/src/lib/onboarding/onboarding-fees.ts","../../../../../../apps/web/src/components/onboarding/steps/first-action-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/integrations-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/notifications-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/payment-collection-step.tsx","../../../../../../apps/web/src/actions/data%3Ae5d71d%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/onboarding/steps/payments-step.tsx","../../../../../../apps/web/src/components/onboarding/status-tracking/plaid-verification-tracker.tsx","../../../../../../apps/web/src/components/onboarding/steps/phone-step.tsx","../../../../../../apps/web/src/actions/data%3Ae15d4c%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/onboarding/status-tracking/porting-status-tracker.tsx","../../../../../../apps/web/src/lib/twilio/porting.ts","../../../../../../apps/web/src/components/onboarding/steps/reports-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/schedule-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/services-step.tsx","../../../../../../apps/web/src/hooks/use-ai-price-recommendation.ts","../../../../../../apps/web/src/components/ai/ai-price-recommend-button.tsx","../../../../../../apps/web/src/components/onboarding/steps/settings-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/team-step.tsx","../../../../../../apps/web/src/components/onboarding/steps/welcome-step.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Onboarding Wizard - Clean, Minimalist Design\n *\n * World-class onboarding experience across 5 phases:\n * - Phase 1: Getting Started (Welcome, Company)\n * - Phase 2: Communication (Phone, Email, Notifications)\n * - Phase 3: Business Setup (Services, Team, Payments)\n * - Phase 4: Operations (Schedule, Reports, Settings)\n * - Phase 5: Launch (First Action, Complete)\n *\n * Features:\n * - Auto-save progress with visual indicator\n * - Multi-company support with context banner\n * - Contextual help tooltips\n * - Improved skip step UX\n * - Error boundary for graceful failures\n */\n\nimport {\n\tAlertTriangle,\n\tCalendar,\n\tChevronLeft,\n\tChevronRight,\n\tLoader2,\n\tPhone,\n\tRefreshCw,\n\tRocket,\n\tWrench,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport React, {\n\tComponent,\n\ttype ErrorInfo,\n\ttype ReactNode,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseState,\n} from \"react\";\nimport { completeOnboardingWizard } from \"@/actions/onboarding\";\nimport {\n\ttype WalkthroughSlide,\n\tWalkthroughSlideshow,\n} from \"@/components/onboarding/info-cards/walkthrough-slide\";\nimport {\n\tAutoSaveIndicator,\n\tCompanyContextBanner,\n\tSkipConfirmation,\n} from \"@/components/onboarding/progress-banner\";\nimport { CompanyStep } from \"@/components/onboarding/steps/company-step\";\nimport { CompleteStep } from \"@/components/onboarding/steps/complete-step\";\nimport { DataImportStep } from \"@/components/onboarding/steps/data-import-step\";\nimport { EmailStep } from \"@/components/onboarding/steps/email-step\";\nimport { FirstActionStep } from \"@/components/onboarding/steps/first-action-step\";\nimport { IntegrationsStep } from \"@/components/onboarding/steps/integrations-step\";\nimport { NotificationsStep } from \"@/components/onboarding/steps/notifications-step\";\nimport { PaymentCollectionStep } from \"@/components/onboarding/steps/payment-collection-step\";\nimport { PaymentsStep } from \"@/components/onboarding/steps/payments-step\";\nimport { PhoneStep } from \"@/components/onboarding/steps/phone-step\";\nimport { ReportsStep } from \"@/components/onboarding/steps/reports-step\";\nimport { ScheduleStep } from \"@/components/onboarding/steps/schedule-step\";\nimport { ServicesStep } from \"@/components/onboarding/steps/services-step\";\nimport { SettingsStep } from \"@/components/onboarding/steps/settings-step\";\nimport { TeamStep } from \"@/components/onboarding/steps/team-step\";\n// Step Components\nimport { WelcomeStep } from \"@/components/onboarding/steps/welcome-step\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype OnboardingStep,\n\tSTEP_CONFIG,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\n// =============================================================================\n// ERROR BOUNDARY\n// =============================================================================\n\ninterface ErrorBoundaryState {\n\thasError: boolean;\n\terror: Error | null;\n}\n\nclass OnboardingErrorBoundary extends Component<\n\t{ children: ReactNode; onReset: () => void },\n\tErrorBoundaryState\n> {\n\tconstructor(props: { children: ReactNode; onReset: () => void }) {\n\t\tsuper(props);\n\t\tthis.state = { hasError: false, error: null };\n\t}\n\n\tstatic getDerivedStateFromError(error: Error): ErrorBoundaryState {\n\t\treturn { hasError: true, error };\n\t}\n\n\tcomponentDidCatch(error: Error, errorInfo: ErrorInfo) {\n\t\tconsole.error(\"Onboarding error:\", error, errorInfo);\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn (\n\t\t\t\t<div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n\t\t\t\t\t<div className=\"max-w-md w-full text-center space-y-4\">\n\t\t\t\t\t\t<div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-destructive/10\">\n\t\t\t\t\t\t\t<AlertTriangle className=\"h-8 w-8 text-destructive\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold\">Something went wrong</h2>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\tDon't worry - your progress has been saved. Try refreshing the\n\t\t\t\t\t\t\tpage.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div className=\"flex justify-center gap-3 pt-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({ hasError: false, error: null });\n\t\t\t\t\t\t\t\t\tthis.props.onReset();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RefreshCw className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\tTry again\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={() => window.location.reload()}>\n\t\t\t\t\t\t\t\tRefresh page\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{process.env.NODE_ENV === \"development\" && this.state.error && (\n\t\t\t\t\t\t\t<pre className=\"mt-4 text-left text-xs bg-muted p-3 rounded overflow-auto max-h-32\">\n\t\t\t\t\t\t\t\t{this.state.error.message}\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nconst STEP_ORDER: OnboardingStep[] = [\n\t\"welcome\",\n\t\"company\",\n\t\"data-import\",\n\t\"integrations\",\n\t\"phone\",\n\t\"email\",\n\t\"notifications\",\n\t\"services\",\n\t\"team\",\n\t\"payments\",\n\t\"billing\",\n\t\"schedule\",\n\t\"reports\",\n\t\"settings\",\n\t\"first-action\",\n\t\"complete\",\n];\n\nconst PHASE_LABELS: Record<number, string> = {\n\t1: \"Getting Started\",\n\t2: \"Communication\",\n\t3: \"Business Setup\",\n\t4: \"Operations\",\n\t5: \"Launch\",\n};\n\n// Phase transition walkthroughs\nconst PHASE_WALKTHROUGHS: Record<number, WalkthroughSlide[]> = {\n\t2: [\n\t\t{\n\t\t\tid: \"phase-2\",\n\t\t\ttitle: \"Time to Connect with Customers\",\n\t\t\tdescription:\n\t\t\t\t\"Great job setting up your company! Now let's configure how you'll communicate with customers.\",\n\t\t\ticon: <Phone className=\"h-8 w-8\" />,\n\t\t\tbullets: [\n\t\t\t\t\"Phone & SMS setup\",\n\t\t\t\t\"Email configuration\",\n\t\t\t\t\"Notification preferences\",\n\t\t\t],\n\t\t},\n\t],\n\t3: [\n\t\t{\n\t\t\tid: \"phase-3\",\n\t\t\ttitle: \"Building Your Business\",\n\t\t\tdescription:\n\t\t\t\t\"Communication is ready! Let's set up the core of your business - services, team, and payments.\",\n\t\t\ticon: <Wrench className=\"h-8 w-8\" />,\n\t\t\tbullets: [\n\t\t\t\t\"Service catalog & pricing\",\n\t\t\t\t\"Team invitations\",\n\t\t\t\t\"Payment processing\",\n\t\t\t],\n\t\t},\n\t],\n\t4: [\n\t\t{\n\t\t\tid: \"phase-4\",\n\t\t\ttitle: \"Optimizing Operations\",\n\t\t\tdescription:\n\t\t\t\t\"Your business core is configured! Now let's optimize how you work day-to-day.\",\n\t\t\ticon: <Calendar className=\"h-8 w-8\" />,\n\t\t\tbullets: [\"Business hours\", \"Dashboard widgets\", \"Key settings\"],\n\t\t},\n\t],\n\t5: [\n\t\t{\n\t\t\tid: \"phase-5\",\n\t\t\ttitle: \"Ready for Launch!\",\n\t\t\tdescription:\n\t\t\t\t\"Almost there! Let's do one quick action to make sure everything works perfectly.\",\n\t\t\ticon: <Rocket className=\"h-8 w-8\" />,\n\t\t\tbullets: [\"Take your first action\", \"See your dashboard\"],\n\t\t},\n\t],\n};\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\n// Skip step consequences for UX\nconst SKIP_CONSEQUENCES: Partial<Record<OnboardingStep, string[]>> = {\n\tphone: [\n\t\t\"You won't have a business phone number\",\n\t\t\"Customers can't call or text through the platform\",\n\t\t\"No SMS appointment reminders\",\n\t],\n\temail: [\n\t\t\"Emails will come from noreply@thorbis.com\",\n\t\t\"May have lower deliverability\",\n\t\t\"Less professional appearance\",\n\t],\n\tservices: [\n\t\t\"You'll need to add services manually later\",\n\t\t\"No pre-built pricing templates\",\n\t],\n\tteam: [\n\t\t\"Team members won't have access yet\",\n\t\t\"You can invite them later from Settings\",\n\t],\n\tpayments: [\"Can't accept online payments\", \"Manual payment tracking only\"],\n\tschedule: [\n\t\t\"Default business hours (9-5, Mon-Fri)\",\n\t\t\"No service area defined\",\n\t],\n};\n\nfunction OnboardingWizardInner() {\n\tconst router = useRouter();\n\tconst {\n\t\tdata,\n\t\tcurrentStep,\n\t\tsetCurrentStep,\n\t\tcompletedSteps,\n\t\tskippedSteps,\n\t\tcompleteStep,\n\t\tskipStep,\n\t\tupdateData,\n\t\tisSaving,\n\t} = useOnboardingStore();\n\n\t// Walkthrough state\n\tconst [showWalkthrough, setShowWalkthrough] = useState(false);\n\tconst [walkthroughSlides, setWalkthroughSlides] = useState<\n\t\tWalkthroughSlide[]\n\t>([]);\n\tconst [pendingNavigation, setPendingNavigation] =\n\t\tuseState<OnboardingStep | null>(null);\n\tconst [isCompleting, setIsCompleting] = useState(false);\n\tconst [completeError, setCompleteError] = useState<string | null>(null);\n\n\t// Skip confirmation state\n\tconst [showSkipConfirm, setShowSkipConfirm] = useState(false);\n\n\t// Auto-save state\n\tconst [lastSaved, setLastSaved] = useState<Date | null>(null);\n\n\t// Track saves\n\tuseEffect(() => {\n\t\tif (!isSaving) {\n\t\t\tsetLastSaved(new Date());\n\t\t}\n\t}, [isSaving, data]);\n\n\tconst currentStepIndex = STEP_ORDER.indexOf(currentStep);\n\tconst currentConfig = STEP_CONFIG[currentStep];\n\tconst currentPhase = currentConfig.phase;\n\tconst progress = ((currentStepIndex + 1) / STEP_ORDER.length) * 100;\n\tconst isLastStep = currentStep === \"complete\";\n\tconst isFirstStep = currentStep === \"welcome\";\n\n\t// Calculate time estimate\n\tconst remainingSteps = STEP_ORDER.slice(currentStepIndex);\n\tconst remainingMinutes = remainingSteps.reduce(\n\t\t(acc, step) => acc + STEP_CONFIG[step].estimatedMinutes,\n\t\t0,\n\t);\n\n\t// Check if we should show a phase walkthrough\n\tconst checkPhaseTransition = useCallback(\n\t\t(nextStep: OnboardingStep) => {\n\t\t\tconst nextConfig = STEP_CONFIG[nextStep];\n\t\t\tconst nextPhase = nextConfig.phase;\n\n\t\t\tif (nextPhase > currentPhase && PHASE_WALKTHROUGHS[nextPhase]) {\n\t\t\t\tsetWalkthroughSlides(PHASE_WALKTHROUGHS[nextPhase]);\n\t\t\t\tsetPendingNavigation(nextStep);\n\t\t\t\tsetShowWalkthrough(true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[currentPhase],\n\t);\n\n\t// Navigation validation\n\t// Development bypass - only active when NODE_ENV === \"development\"\n\t// This is automatically disabled in production builds\n\tconst isDev = process.env.NODE_ENV === \"development\";\n\tconst canProceed = useMemo(() => {\n\t\t// Bypass validation in development for easier testing\n\t\tif (isDev) return true;\n\n\t\tconst config = STEP_CONFIG[currentStep];\n\t\tif (!config.required) return true;\n\n\t\tswitch (currentStep) {\n\t\t\tcase \"welcome\":\n\t\t\t\treturn !!data.path && !!data.industry;\n\t\t\tcase \"company\":\n\t\t\t\treturn !!data.companyName;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}, [currentStep, data, isDev]);\n\n\tconst goNext = useCallback(() => {\n\t\tconst nextIndex = currentStepIndex + 1;\n\t\tif (nextIndex < STEP_ORDER.length) {\n\t\t\tcompleteStep(currentStep);\n\t\t\tconst nextStep = STEP_ORDER[nextIndex];\n\n\t\t\tif (!checkPhaseTransition(nextStep)) {\n\t\t\t\tsetCurrentStep(nextStep);\n\t\t\t}\n\t\t}\n\t}, [\n\t\tcurrentStepIndex,\n\t\tcurrentStep,\n\t\tcompleteStep,\n\t\tsetCurrentStep,\n\t\tcheckPhaseTransition,\n\t]);\n\n\tconst goBack = useCallback(() => {\n\t\tconst prevIndex = currentStepIndex - 1;\n\t\tif (prevIndex >= 0) {\n\t\t\tsetCurrentStep(STEP_ORDER[prevIndex]);\n\t\t}\n\t}, [currentStepIndex, setCurrentStep]);\n\n\t// Handle skip with confirmation for important steps\n\tconst handleSkipRequest = useCallback(() => {\n\t\tconst hasConsequences = SKIP_CONSEQUENCES[currentStep];\n\t\tif (hasConsequences && hasConsequences.length > 0) {\n\t\t\tsetShowSkipConfirm(true);\n\t\t} else {\n\t\t\t// No consequences, skip directly\n\t\t\tskipStep(currentStep);\n\t\t\tgoNext();\n\t\t}\n\t}, [currentStep, skipStep, goNext]);\n\n\tconst handleSkipConfirm = useCallback(() => {\n\t\tsetShowSkipConfirm(false);\n\t\tskipStep(currentStep);\n\t\tgoNext();\n\t}, [currentStep, skipStep, goNext]);\n\n\tconst handleWalkthroughComplete = useCallback(() => {\n\t\tsetShowWalkthrough(false);\n\t\tif (pendingNavigation) {\n\t\t\tsetCurrentStep(pendingNavigation);\n\t\t\tsetPendingNavigation(null);\n\t\t}\n\t}, [pendingNavigation, setCurrentStep]);\n\n\tconst handleComplete = useCallback(async () => {\n\t\tsetIsCompleting(true);\n\t\tsetCompleteError(null);\n\n\t\ttry {\n\t\t\tconst result = await completeOnboardingWizard({\n\t\t\t\tpath: data.path,\n\t\t\t\tindustry: data.industry,\n\t\t\t\tcompanyName: data.companyName,\n\t\t\t\tphoneSetupType: data.phoneSetupType,\n\t\t\t\temailSetupType: data.emailSetupType,\n\t\t\t\tservices: data.services,\n\t\t\t\tteamInvites: data.teamMembers,\n\t\t\t\tpaymentSetupComplete: data.paymentSetupComplete,\n\t\t\t\tcompletedSteps: completedSteps,\n\t\t\t\tskippedSteps: skippedSteps,\n\t\t\t});\n\n\t\t\tif (!result.success) {\n\t\t\t\tsetCompleteError(result.error || \"Failed to complete onboarding\");\n\t\t\t\tsetIsCompleting(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdateData({ onboardingCompleted: true });\n\t\t\trouter.push(\"/dashboard\");\n\t\t} catch (error) {\n\t\t\tsetCompleteError(\n\t\t\t\terror instanceof Error ? error.message : \"An unexpected error occurred\",\n\t\t\t);\n\t\t\tsetIsCompleting(false);\n\t\t}\n\t}, [data, completedSteps, skippedSteps, updateData, router]);\n\n\treturn (\n\t\t<>\n\t\t\t{/* Phase Transition Walkthrough */}\n\t\t\t{showWalkthrough && (\n\t\t\t\t<WalkthroughSlideshow\n\t\t\t\t\tslides={walkthroughSlides}\n\t\t\t\t\tonComplete={handleWalkthroughComplete}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Skip Confirmation Modal */}\n\t\t\t{showSkipConfirm && (\n\t\t\t\t<SkipConfirmation\n\t\t\t\t\tstepName={currentConfig.title}\n\t\t\t\t\tconsequences={SKIP_CONSEQUENCES[currentStep]}\n\t\t\t\t\tonSkip={handleSkipConfirm}\n\t\t\t\t\tonCancel={() => setShowSkipConfirm(false)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className=\"flex-1 flex flex-col\">\n\t\t\t\t{/* Progress Header - Only shown after payment collected */}\n\t\t\t\t{data.paymentMethodCollected && (\n\t\t\t\t\t<div className=\"sticky top-14 z-30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border/40\">\n\t\t\t\t\t\t<div className=\"w-full max-w-2xl mx-auto px-4 sm:px-6\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between h-12\">\n\t\t\t\t\t\t\t\t{/* Left: Step name */}\n\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground truncate\">\n\t\t\t\t\t\t\t\t\t{currentConfig.title}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t{/* Center: Progress bar */}\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 flex-1 max-w-xs mx-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1 h-1.5 bg-muted rounded-full overflow-hidden\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-full bg-primary transition-all duration-300 ease-out rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: `${progress}%` }}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground tabular-nums whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t{Math.round(progress)}%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Right: Save status */}\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t<AutoSaveIndicator\n\t\t\t\t\t\t\t\t\t\tisSaving={isSaving}\n\t\t\t\t\t\t\t\t\t\tlastSaved={lastSaved}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Main Content */}\n\t\t\t\t<main className=\"flex-1\">\n\t\t\t\t\t<div className=\"w-full max-w-2xl mx-auto px-4 sm:px-6 py-8 sm:py-12\">\n\t\t\t\t\t\t{currentStep === \"welcome\" && <WelcomeStep />}\n\t\t\t\t\t\t{currentStep === \"company\" && <CompanyStep />}\n\t\t\t\t\t\t{currentStep === \"data-import\" && <DataImportStep />}\n\t\t\t\t\t\t{currentStep === \"integrations\" && <IntegrationsStep />}\n\t\t\t\t\t\t{currentStep === \"phone\" && <PhoneStep />}\n\t\t\t\t\t\t{currentStep === \"email\" && <EmailStep />}\n\t\t\t\t\t\t{currentStep === \"notifications\" && <NotificationsStep />}\n\t\t\t\t\t\t{currentStep === \"services\" && <ServicesStep />}\n\t\t\t\t\t\t{currentStep === \"team\" && <TeamStep />}\n\t\t\t\t\t\t{currentStep === \"payments\" && <PaymentsStep />}\n\t\t\t\t\t\t{currentStep === \"billing\" && <PaymentCollectionStep />}\n\t\t\t\t\t\t{currentStep === \"schedule\" && <ScheduleStep />}\n\t\t\t\t\t\t{currentStep === \"reports\" && <ReportsStep />}\n\t\t\t\t\t\t{currentStep === \"settings\" && <SettingsStep />}\n\t\t\t\t\t\t{currentStep === \"first-action\" && <FirstActionStep />}\n\t\t\t\t\t\t{currentStep === \"complete\" && <CompleteStep />}\n\t\t\t\t\t</div>\n\t\t\t\t</main>\n\n\t\t\t\t{/* Minimal Footer Navigation */}\n\t\t\t\t<footer className=\"sticky bottom-0 z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t border-border/40\">\n\t\t\t\t\t<div className=\"w-full max-w-2xl mx-auto px-4 sm:px-6\">\n\t\t\t\t\t\t<div className=\"flex items-center justify-between h-16 gap-4\">\n\t\t\t\t\t\t\t{/* Back */}\n\t\t\t\t\t\t\t{!isFirstStep ? (\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" onClick={goBack} size=\"sm\">\n\t\t\t\t\t\t\t\t\t<ChevronLeft className=\"h-4 w-4 mr-1\" />\n\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Forward Actions */}\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t{completeError && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-destructive mr-2\">\n\t\t\t\t\t\t\t\t\t\t{completeError}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{isLastStep ? (\n\t\t\t\t\t\t\t\t\t<Button onClick={handleComplete} disabled={isCompleting}>\n\t\t\t\t\t\t\t\t\t\t{isCompleting ? (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\t\tSaving...\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\tGo to Dashboard\n\t\t\t\t\t\t\t\t\t\t\t\t<Rocket className=\"h-4 w-4 ml-2\" />\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{!STEP_CONFIG[currentStep].required && (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleSkipRequest}\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tSkip\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<Button onClick={goNext} disabled={!canProceed}>\n\t\t\t\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t\t\t\t\t<ChevronRight className=\"h-4 w-4 ml-1\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</footer>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\n// =============================================================================\n// EXPORTED COMPONENT (with error boundary)\n// =============================================================================\n\nexport function OnboardingWizard() {\n\tconst { resetOnboarding } = useOnboardingStore();\n\n\treturn (\n\t\t<OnboardingErrorBoundary onReset={() => {}}>\n\t\t\t<OnboardingWizardInner />\n\t\t</OnboardingErrorBoundary>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"40a154bfb9c925bf7972e716b4ef874c8a9952d624\":\"completeOnboardingWizard\"},\"apps/web/src/actions/onboarding.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var completeOnboardingWizard=/*#__PURE__*/createServerReference(\"40a154bfb9c925bf7972e716b4ef874c8a9952d624\",callServer,void 0,findSourceMapURL,\"completeOnboardingWizard\");","\"use client\";\n\n/**\n * Walkthrough Slide - Full-screen educational moment\n *\n * iPhone-style walkthrough slides shown between onboarding steps\n * to educate users about important concepts.\n */\n\nimport { ChevronLeft, ChevronRight, X } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface WalkthroughSlide {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n\ticon: React.ReactNode;\n\tillustration?: React.ReactNode;\n\tbullets?: string[];\n\taccentColor?: string;\n}\n\ninterface WalkthroughSlideProps {\n\tslides: WalkthroughSlide[];\n\tonComplete: () => void;\n\tonSkip?: () => void;\n}\n\nexport function WalkthroughSlideshow({\n\tslides,\n\tonComplete,\n\tonSkip,\n}: WalkthroughSlideProps) {\n\tconst [currentIndex, setCurrentIndex] = useState(0);\n\tconst currentSlide = slides[currentIndex];\n\tconst isLast = currentIndex === slides.length - 1;\n\tconst isFirst = currentIndex === 0;\n\n\tconst handleNext = () => {\n\t\tif (isLast) {\n\t\t\tonComplete();\n\t\t} else {\n\t\t\tsetCurrentIndex((prev) => prev + 1);\n\t\t}\n\t};\n\n\tconst handleBack = () => {\n\t\tif (!isFirst) {\n\t\t\tsetCurrentIndex((prev) => prev - 1);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm\">\n\t\t\t<div className=\"relative w-full max-w-lg mx-4\">\n\t\t\t\t{/* Skip button */}\n\t\t\t\t{onSkip && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={onSkip}\n\t\t\t\t\t\tclassName=\"absolute -top-12 right-0 flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSkip intro\n\t\t\t\t\t\t<X className=\"h-4 w-4\" />\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\n\t\t\t\t{/* Card */}\n\t\t\t\t<div className=\"rounded-2xl bg-card p-8 shadow-2xl\">\n\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\tcurrentSlide.accentColor || \"bg-primary/10 text-primary\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{currentSlide.icon}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Illustration (optional) */}\n\t\t\t\t\t{currentSlide.illustration && (\n\t\t\t\t\t\t<div className=\"mb-6\">{currentSlide.illustration}</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Content */}\n\t\t\t\t\t<div className=\"text-center mb-8\">\n\t\t\t\t\t\t<h2 className=\"text-2xl font-bold mb-3\">{currentSlide.title}</h2>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">{currentSlide.description}</p>\n\n\t\t\t\t\t\t{/* Bullets */}\n\t\t\t\t\t\t{currentSlide.bullets && currentSlide.bullets.length > 0 && (\n\t\t\t\t\t\t\t<ul className=\"mt-4 space-y-2 text-left\">\n\t\t\t\t\t\t\t\t{currentSlide.bullets.map((bullet, i) => (\n\t\t\t\t\t\t\t\t\t<li key={i} className=\"flex items-start gap-2 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-primary/20 text-primary text-xs flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t{i + 1}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">{bullet}</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Progress dots */}\n\t\t\t\t\t{slides.length > 1 && (\n\t\t\t\t\t\t<div className=\"flex justify-center gap-2 mb-6\">\n\t\t\t\t\t\t\t{slides.map((_, i) => (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tonClick={() => setCurrentIndex(i)}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"h-2 rounded-full transition-all\",\n\t\t\t\t\t\t\t\t\t\ti === currentIndex\n\t\t\t\t\t\t\t\t\t\t\t? \"w-6 bg-primary\"\n\t\t\t\t\t\t\t\t\t\t\t: \"w-2 bg-muted hover:bg-muted-foreground/30\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Navigation */}\n\t\t\t\t\t<div className=\"flex items-center justify-between gap-3\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tonClick={handleBack}\n\t\t\t\t\t\t\tdisabled={isFirst}\n\t\t\t\t\t\t\tclassName={cn(isFirst && \"invisible\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ChevronLeft className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button onClick={handleNext} className=\"min-w-[120px]\">\n\t\t\t\t\t\t\t{isLast ? \"Got it!\" : \"Next\"}\n\t\t\t\t\t\t\t{!isLast && <ChevronRight className=\"ml-1 h-4 w-4\" />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * Single Walkthrough Card - Inline educational component\n */\ninterface InfoCardProps {\n\ticon: React.ReactNode;\n\ttitle: string;\n\tdescription: string;\n\tbullets?: string[];\n\tvariant?: \"default\" | \"tip\" | \"warning\" | \"success\";\n\tclassName?: string;\n}\n\nexport function InfoCard({\n\ticon,\n\ttitle,\n\tdescription,\n\tbullets,\n\tvariant = \"default\",\n\tclassName,\n}: InfoCardProps) {\n\tconst variantStyles = {\n\t\tdefault: \"bg-muted/30\",\n\t\ttip: \"bg-blue-500/10 border-blue-500/20\",\n\t\twarning: \"bg-amber-500/10 border-amber-500/20\",\n\t\tsuccess: \"bg-green-500/10 border-green-500/20\",\n\t};\n\n\tconst iconStyles = {\n\t\tdefault: \"bg-muted text-muted-foreground\",\n\t\ttip: \"bg-blue-500/20 text-blue-600 dark:text-blue-400\",\n\t\twarning: \"bg-amber-500/20 text-amber-600 dark:text-amber-400\",\n\t\tsuccess: \"bg-green-500/20 text-green-600 dark:text-green-400\",\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\"rounded-xl p-4 border\", variantStyles[variant], className)}\n\t\t>\n\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-lg flex-shrink-0\",\n\t\t\t\t\t\ticonStyles[variant],\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{icon}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t<h4 className=\"font-semibold mb-1\">{title}</h4>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">{description}</p>\n\t\t\t\t\t{bullets && bullets.length > 0 && (\n\t\t\t\t\t\t<ul className=\"mt-2 space-y-1\">\n\t\t\t\t\t\t\t{bullets.map((bullet, i) => (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground flex items-start gap-2\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"text-primary mt-1\">•</span>\n\t\t\t\t\t\t\t\t\t{bullet}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * Expandable Info Section - \"Why this matters\" collapsible\n */\ninterface ExpandableInfoProps {\n\ttitle?: string;\n\tchildren: React.ReactNode;\n\tdefaultExpanded?: boolean;\n}\n\nexport function ExpandableInfo({\n\ttitle = \"Why this matters\",\n\tchildren,\n\tdefaultExpanded = false,\n}: ExpandableInfoProps) {\n\tconst [isExpanded, setIsExpanded] = useState(defaultExpanded);\n\n\treturn (\n\t\t<div className=\"rounded-xl bg-muted/30 overflow-hidden\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\n\t\t\t\tclassName=\"w-full flex items-center justify-between p-4 text-left hover:bg-muted/50 transition-colors\"\n\t\t\t>\n\t\t\t\t<span className=\"text-sm font-medium\">{title}</span>\n\t\t\t\t<ChevronRight\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"h-4 w-4 transition-transform\",\n\t\t\t\t\t\tisExpanded && \"rotate-90\",\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t{isExpanded && (\n\t\t\t\t<div className=\"px-4 pb-4 text-sm text-muted-foreground\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Progress Banner - Save indicator and progress persistence message\n *\n * Shows users that their progress is automatically saved, reducing anxiety\n * about losing data if they need to step away.\n */\n\nimport {\n\tArrowLeft,\n\tCheck,\n\tCloud,\n\tCloudOff,\n\tInfo,\n\tLoader2,\n\tX,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tSTEP_CONFIG,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ProgressBannerProps {\n\t/** Whether data is currently being saved */\n\tisSaving?: boolean;\n\t/** Last saved timestamp */\n\tlastSaved?: Date | null;\n\t/** Show the banner */\n\tshow?: boolean;\n\t/** Callback to dismiss */\n\tonDismiss?: () => void;\n\tclassName?: string;\n}\n\nexport function ProgressBanner({\n\tisSaving = false,\n\tlastSaved,\n\tshow = true,\n\tonDismiss,\n\tclassName,\n}: ProgressBannerProps) {\n\tconst [dismissed, setDismissed] = useState(false);\n\n\tif (!show || dismissed) return null;\n\n\tconst handleDismiss = () => {\n\t\tsetDismissed(true);\n\t\tonDismiss?.();\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t\"fixed bottom-24 left-1/2 -translate-x-1/2 z-50\",\n\t\t\t\t\"bg-background/95 backdrop-blur border rounded-full shadow-lg\",\n\t\t\t\t\"px-4 py-2 flex items-center gap-3\",\n\t\t\t\t\"animate-in slide-in-from-bottom-4 fade-in duration-300\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{isSaving ? (\n\t\t\t\t<>\n\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\n\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Saving...</span>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Cloud className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tProgress saved\n\t\t\t\t\t\t{lastSaved && (\n\t\t\t\t\t\t\t<span className=\"hidden sm:inline\">\n\t\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t\t· {formatTimeAgo(lastSaved)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</span>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Button\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclassName=\"h-6 w-6 -mr-1\"\n\t\t\t\tonClick={handleDismiss}\n\t\t\t>\n\t\t\t\t<X className=\"h-3.5 w-3.5\" />\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n\n/**\n * Auto-save indicator - Shows in the header\n */\ninterface AutoSaveIndicatorProps {\n\tisSaving?: boolean;\n\tlastSaved?: Date | null;\n\terror?: string | null;\n}\n\nexport function AutoSaveIndicator({\n\tisSaving = false,\n\tlastSaved,\n\terror,\n}: AutoSaveIndicatorProps) {\n\tif (error) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center gap-1.5 text-destructive\">\n\t\t\t\t<CloudOff className=\"h-3.5 w-3.5\" />\n\t\t\t\t<span className=\"text-xs\">Save failed</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (isSaving) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center gap-1.5 text-muted-foreground\">\n\t\t\t\t<Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n\t\t\t\t<span className=\"text-xs\">Saving...</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (lastSaved) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center gap-1.5 text-muted-foreground\">\n\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t<span className=\"text-xs\">Saved</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n}\n\n/**\n * Welcome Back Banner - Shows when user returns to incomplete onboarding\n */\ninterface WelcomeBackBannerProps {\n\tcompanyName?: string;\n\tcurrentStep?: string;\n\tprogress?: number;\n\tonContinue?: () => void;\n\tonStartFresh?: () => void;\n}\n\nexport function WelcomeBackBanner({\n\tcompanyName,\n\tcurrentStep,\n\tprogress = 0,\n\tonContinue,\n\tonStartFresh,\n}: WelcomeBackBannerProps) {\n\tconst stepConfig = currentStep\n\t\t? STEP_CONFIG[currentStep as keyof typeof STEP_CONFIG]\n\t\t: null;\n\n\treturn (\n\t\t<div className=\"bg-muted/30 border rounded-lg p-4 mb-6\">\n\t\t\t<div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t<h3 className=\"font-medium flex items-center gap-2\">\n\t\t\t\t\t\t<Info className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\tWelcome back{companyName ? `, ${companyName}` : \"\"}!\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tYour progress was saved. You're {progress}% through setup\n\t\t\t\t\t\t{stepConfig && ` - last on \"${stepConfig.title}\"`}.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t{onStartFresh && (\n\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" onClick={onStartFresh}>\n\t\t\t\t\t\t\tStart fresh\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{onContinue && (\n\t\t\t\t\t\t<Button size=\"sm\" onClick={onContinue}>\n\t\t\t\t\t\t\tContinue setup\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * Multi-Company Context Banner - Shows when user has multiple companies\n */\ninterface CompanyContextBannerProps {\n\t/** Current company being set up */\n\tcurrentCompanyName?: string;\n\t/** Other company user has access to */\n\tactiveCompanyName?: string;\n\t/** Callback to switch to active company */\n\tonSwitchToActive?: () => void;\n\t/** Whether this is a new company setup */\n\tisNewCompany?: boolean;\n}\n\nexport function CompanyContextBanner({\n\tcurrentCompanyName,\n\tactiveCompanyName,\n\tonSwitchToActive,\n\tisNewCompany = false,\n}: CompanyContextBannerProps) {\n\tif (!activeCompanyName || !isNewCompany) return null;\n\n\treturn (\n\t\t<div className=\"bg-amber-500/10 border border-amber-500/20 rounded-lg p-3 mb-6\">\n\t\t\t<div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n\t\t\t\t<div className=\"space-y-0.5\">\n\t\t\t\t\t<p className=\"text-sm font-medium text-amber-700 dark:text-amber-400\">\n\t\t\t\t\t\tSetting up: {currentCompanyName || \"New Company\"}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"text-xs text-amber-600/80 dark:text-amber-400/70\">\n\t\t\t\t\t\tComplete setup to access this company's dashboard\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t{onSwitchToActive && activeCompanyName && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={onSwitchToActive}\n\t\t\t\t\t\tclassName=\"border-amber-500/30 hover:bg-amber-500/10\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowLeft className=\"h-3.5 w-3.5 mr-1.5\" />\n\t\t\t\t\t\tBack to {activeCompanyName}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * Step Info Card - Shows additional context for complex steps\n */\ninterface StepInfoCardProps {\n\ttitle: string;\n\tdescription: string;\n\tbullets?: string[];\n\tvariant?: \"info\" | \"warning\" | \"success\";\n\tclassName?: string;\n}\n\nexport function StepInfoCard({\n\ttitle,\n\tdescription,\n\tbullets,\n\tvariant = \"info\",\n\tclassName,\n}: StepInfoCardProps) {\n\tconst variants = {\n\t\tinfo: \"bg-primary/5 border-primary/20 text-primary\",\n\t\twarning:\n\t\t\t\"bg-amber-500/10 border-amber-500/20 text-amber-700 dark:text-amber-400\",\n\t\tsuccess:\n\t\t\t\"bg-green-500/10 border-green-500/20 text-green-700 dark:text-green-400\",\n\t};\n\n\treturn (\n\t\t<div className={cn(\"rounded-lg border p-4\", variants[variant], className)}>\n\t\t\t<h4 className=\"font-medium text-sm mb-1\">{title}</h4>\n\t\t\t<p className=\"text-sm opacity-80 mb-2\">{description}</p>\n\t\t\t{bullets && bullets.length > 0 && (\n\t\t\t\t<ul className=\"space-y-1\">\n\t\t\t\t\t{bullets.map((bullet, i) => (\n\t\t\t\t\t\t<li key={i} className=\"text-sm opacity-70 flex items-start gap-2\">\n\t\t\t\t\t\t\t<span className=\"mt-1.5 h-1 w-1 rounded-full bg-current flex-shrink-0\" />\n\t\t\t\t\t\t\t{bullet}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n/**\n * Skip Step Confirmation - Better UX for skipping optional steps\n */\ninterface SkipConfirmationProps {\n\tstepName: string;\n\tconsequences?: string[];\n\tonSkip: () => void;\n\tonCancel: () => void;\n}\n\nexport function SkipConfirmation({\n\tstepName,\n\tconsequences = [],\n\tonSkip,\n\tonCancel,\n}: SkipConfirmationProps) {\n\treturn (\n\t\t<div className=\"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm\">\n\t\t\t<div className=\"bg-background border rounded-lg shadow-lg p-6 max-w-md mx-4\">\n\t\t\t\t<h3 className=\"font-semibold text-lg mb-2\">Skip {stepName}?</h3>\n\t\t\t\t<p className=\"text-muted-foreground text-sm mb-4\">\n\t\t\t\t\tYou can configure this later in Settings.\n\t\t\t\t</p>\n\t\t\t\t{consequences.length > 0 && (\n\t\t\t\t\t<div className=\"bg-muted/50 rounded-md p-3 mb-4\">\n\t\t\t\t\t\t<p className=\"text-sm font-medium mb-2\">If you skip this step:</p>\n\t\t\t\t\t\t<ul className=\"space-y-1\">\n\t\t\t\t\t\t\t{consequences.map((item, i) => (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground flex items-start gap-2\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"text-amber-500\">•</span>\n\t\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div className=\"flex justify-end gap-2\">\n\t\t\t\t\t<Button variant=\"outline\" onClick={onCancel}>\n\t\t\t\t\t\tGo back\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={onSkip}>\n\t\t\t\t\t\tSkip for now\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n// Helper function\nfunction formatTimeAgo(date: Date): string {\n\tconst seconds = Math.floor((new Date().getTime() - date.getTime()) / 1000);\n\n\tif (seconds < 60) return \"just now\";\n\tif (seconds < 120) return \"1 minute ago\";\n\tif (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n\tif (seconds < 7200) return \"1 hour ago\";\n\tif (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n\treturn \"yesterday\";\n}\n","/**\n * Onboarding State Management\n *\n * Zustand store for managing the entire onboarding flow.\n * Persists progress so users can resume where they left off.\n */\n\nimport { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\nexport type OnboardingPath = \"solo\" | \"small\" | \"growing\" | \"enterprise\";\n\nexport type OnboardingStep =\n\t| \"welcome\"\n\t| \"company\"\n\t| \"data-import\"\n\t| \"integrations\"\n\t| \"phone\"\n\t| \"email\"\n\t| \"notifications\"\n\t| \"services\"\n\t| \"team\"\n\t| \"payments\"\n\t| \"billing\"\n\t| \"schedule\"\n\t| \"reports\"\n\t| \"settings\"\n\t| \"first-action\"\n\t| \"complete\";\n\nexport interface TeamMemberInvite {\n\tid: string;\n\tname: string;\n\temail: string;\n\trole: \"admin\" | \"manager\" | \"technician\" | \"office\";\n}\n\nexport interface ServiceItem {\n\tid: string;\n\tname: string;\n\tprice: string;\n\tduration: string;\n\tcategory: string;\n}\n\nexport interface NotificationPreference {\n\tcategory: string;\n\tpush: boolean;\n\temail: boolean;\n\tsms: boolean;\n}\n\nexport interface OnboardingData {\n\t// Path selection\n\tpath: OnboardingPath | null;\n\tteamSize: string;\n\tindustry: string;\n\treferralSource: string; // How did you hear about us?\n\n\t// Company profile & business verification\n\t// Basic info\n\tcompanyName: string;\n\tcompanyPhone: string;\n\tcompanyEmail: string;\n\tcompanyWebsite: string;\n\tcompanyLogo: string | null;\n\ttimezone: string;\n\n\t// Business address\n\tcompanyAddress: string;\n\tcompanyCity: string;\n\tcompanyState: string;\n\tcompanyZip: string;\n\tcompanyCountry: string;\n\n\t// Mailing address (if different)\n\tmailingAddressSame: boolean;\n\tmailingAddress: string;\n\tmailingCity: string;\n\tmailingState: string;\n\tmailingZip: string;\n\tmailingCountry: string;\n\n\t// Business verification (for bank accounts, Plaid, payment processing)\n\tbusinessType:\n\t\t| \"sole_proprietor\"\n\t\t| \"llc\"\n\t\t| \"corporation\"\n\t\t| \"partnership\"\n\t\t| \"non_profit\"\n\t\t| null;\n\tein: string; // Employer Identification Number (Tax ID)\n\tstateOfIncorporation: string;\n\tdateEstablished: string;\n\tbusinessLicense: string;\n\n\t// Beneficial owner info (required for financial services compliance)\n\townerName: string;\n\townerTitle: string;\n\townerEmail: string;\n\townerPhone: string;\n\townerSSN: string; // Last 4 digits only\n\townerDOB: string;\n\townerAddress: string;\n\townerOwnershipPercent: number;\n\n\t// Additional business info (optional, for recommendations)\n\tyearsInBusiness: string;\n\tnumberOfEmployees: string;\n\tannualRevenueRange: string;\n\n\t// Phone & SMS\n\tphoneSetupType: \"new\" | \"port\" | \"skip\" | null;\n\tphoneNumber: string;\n\tsmsEnabled: boolean;\n\n\t// Number Porting (Twilio)\n\tportingStatus: string;\n\tportingCarrier: string;\n\tportingAccountNumber: string;\n\tportingPin: string;\n\tportingBillingPhone: string;\n\n\t// Email\n\temailSetupType:\n\t\t| \"platform\"\n\t\t| \"custom-domain\"\n\t\t| \"gmail\"\n\t\t| \"outlook\"\n\t\t| \"skip\"\n\t\t| null;\n\tcustomDomain: string;\n\tdnsVerified: boolean;\n\tsendgridDomainId: string | null; // SendGrid domain ID for verification tracking\n\n\t// Notifications\n\tnotifications: NotificationPreference[];\n\tquietHoursEnabled: boolean;\n\tquietHoursStart: string;\n\tquietHoursEnd: string;\n\n\t// Data Import (from competitor software)\n\tpreviousSoftware: string | null; // housecall-pro, jobber, servicetitan, etc.\n\tdataImportCompleted: Record<\n\t\tstring,\n\t\t{ recordCount: number; importedAt: string }\n\t> | null;\n\timportedCustomerCount: number;\n\timportedPriceBookCount: number;\n\timportedEquipmentCount: number;\n\timportedJobCount: number;\n\n\t// Integrations\n\tquickbooksConnected: boolean;\n\tquickbooksCompanyId: string | null;\n\tquickbooksLastSync: string | null;\n\tgoogleCalendarConnected: boolean;\n\tgoogleCalendarId: string | null;\n\n\t// Services\n\tservices: ServiceItem[];\n\tservicesImportedFrom: string | null;\n\n\t// Team\n\tteamMembers: TeamMemberInvite[];\n\tteamInvites: { email: string; name: string; role: string }[];\n\tinviteMethod: \"email\" | \"link\" | \"qr\" | null;\n\n\t// Payments\n\t// Note: Stripe is NOT used for contractor payments - only for Thorbis platform billing\n\t// Contractors use: check capture, Plaid (ACH), card processing, cash tracking\n\tpaymentSetupComplete: boolean;\n\tplaidConnected: boolean;\n\tacceptCards: boolean;\n\tacceptACH: boolean;\n\tacceptChecks: boolean;\n\tacceptCash: boolean;\n\tacceptCheckCapture: boolean;\n\tpaymentMethods: string[];\n\ttaxRate: string;\n\tpaymentTerms: string;\n\n\t// Platform Billing (Stripe for Thorbis subscription)\n\t// Tracks selections that affect billing: phone numbers, Gmail, add-ons\n\tphonePortingCount: number; // Number of phone numbers being ported ($15 one-time each)\n\tnewPhoneNumberCount: number; // Number of new phone numbers ($5 setup + $2/month each)\n\tgmailWorkspaceUsers: number; // Number of users needing Gmail Workspace ($6/user/month)\n\tprofitRhinoEnabled: boolean; // Profit Rhino financing add-on ($149/month)\n\n\t// Stripe payment collection\n\tstripeCustomerId: string | null; // Stripe Customer ID after payment method collected\n\tstripePaymentMethodId: string | null; // Stripe Payment Method ID (card/bank)\n\tpaymentMethodCollected: boolean; // Whether payment method has been saved\n\ttrialEndsAt: string | null; // ISO date string when 14-day trial ends\n\n\t// Schedule\n\tworkingDays: string[];\n\tstartTime: string;\n\tendTime: string;\n\tserviceRadius: string;\n\tserviceAreaZips: string[];\n\tbusinessHours: Record<\n\t\tstring,\n\t\t{ enabled: boolean; start: string; end: string }\n\t> | null;\n\tbufferTime: string;\n\temergencyService: boolean;\n\n\t// Reports\n\tpreferredReports: string[];\n\treportFrequency: \"daily\" | \"weekly\" | \"monthly\";\n\tdashboardWidgets: string[];\n\tscheduledReports: string[];\n\n\t// Settings\n\tautoReminders: boolean;\n\trequireJobPhotos: boolean;\n\tcustomerPortalEnabled: boolean;\n\tonlineBookingEnabled: boolean;\n\tgpsTrackingEnabled: boolean;\n\n\t// First Action\n\tfirstActionType: \"invoice\" | \"job\" | \"customer\" | null;\n\tfirstActionCompleted: boolean | string;\n\n\t// Completion\n\tonboardingCompleted: boolean;\n}\n\nexport interface OnboardingState {\n\t// Current progress\n\tcurrentStep: OnboardingStep;\n\tcompletedSteps: OnboardingStep[];\n\tskippedSteps: OnboardingStep[];\n\n\t// All data\n\tdata: OnboardingData;\n\n\t// UI state\n\tisLoading: boolean;\n\tisSaving: boolean;\n\tshowWalkthrough: boolean;\n\twalkthroughSeen: Record<string, boolean>;\n\n\t// Actions\n\tsetCurrentStep: (step: OnboardingStep) => void;\n\tcompleteStep: (step: OnboardingStep) => void;\n\tskipStep: (step: OnboardingStep) => void;\n\tupdateData: (updates: Partial<OnboardingData>) => void;\n\tsetLoading: (loading: boolean) => void;\n\tsetSaving: (saving: boolean) => void;\n\tmarkWalkthroughSeen: (id: string) => void;\n\tsetShowWalkthrough: (show: boolean) => void;\n\tresetOnboarding: () => void;\n\tgetProgress: () => number;\n\tcanProceed: () => boolean;\n}\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nexport const STEPS_ORDER: OnboardingStep[] = [\n\t\"welcome\",\n\t\"company\",\n\t\"data-import\",\n\t\"integrations\",\n\t\"phone\",\n\t\"email\",\n\t\"notifications\",\n\t\"services\",\n\t\"team\",\n\t\"payments\",\n\t\"billing\",\n\t\"schedule\",\n\t\"reports\",\n\t\"settings\",\n\t\"first-action\",\n\t\"complete\",\n];\n\nexport const STEP_CONFIG: Record<\n\tOnboardingStep,\n\t{\n\t\ttitle: string;\n\t\tshortTitle: string;\n\t\tphase: number;\n\t\trequired: boolean;\n\t\testimatedMinutes: number;\n\t}\n> = {\n\twelcome: {\n\t\ttitle: \"Welcome\",\n\t\tshortTitle: \"Start\",\n\t\tphase: 1,\n\t\trequired: true,\n\t\testimatedMinutes: 1,\n\t},\n\tcompany: {\n\t\ttitle: \"Company Details\",\n\t\tshortTitle: \"Company\",\n\t\tphase: 1,\n\t\trequired: true,\n\t\testimatedMinutes: 2,\n\t},\n\t\"data-import\": {\n\t\ttitle: \"Import Data\",\n\t\tshortTitle: \"Import\",\n\t\tphase: 1,\n\t\trequired: false,\n\t\testimatedMinutes: 5,\n\t},\n\tintegrations: {\n\t\ttitle: \"Connect Apps\",\n\t\tshortTitle: \"Apps\",\n\t\tphase: 1,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tphone: {\n\t\ttitle: \"Phone & SMS\",\n\t\tshortTitle: \"Phone\",\n\t\tphase: 2,\n\t\trequired: false,\n\t\testimatedMinutes: 3,\n\t},\n\temail: {\n\t\ttitle: \"Email Setup\",\n\t\tshortTitle: \"Email\",\n\t\tphase: 2,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tnotifications: {\n\t\ttitle: \"Notifications\",\n\t\tshortTitle: \"Alerts\",\n\t\tphase: 2,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tservices: {\n\t\ttitle: \"Services & Pricing\",\n\t\tshortTitle: \"Services\",\n\t\tphase: 3,\n\t\trequired: false,\n\t\testimatedMinutes: 3,\n\t},\n\tteam: {\n\t\ttitle: \"Team Setup\",\n\t\tshortTitle: \"Team\",\n\t\tphase: 3,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tpayments: {\n\t\ttitle: \"Payment Processing\",\n\t\tshortTitle: \"Payments\",\n\t\tphase: 3,\n\t\trequired: false,\n\t\testimatedMinutes: 3,\n\t},\n\tbilling: {\n\t\ttitle: \"Platform Subscription\",\n\t\tshortTitle: \"Billing\",\n\t\tphase: 3,\n\t\trequired: false,\n\t\testimatedMinutes: 3,\n\t},\n\tschedule: {\n\t\ttitle: \"Schedule\",\n\t\tshortTitle: \"Schedule\",\n\t\tphase: 4,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\treports: {\n\t\ttitle: \"Reports & Dashboard\",\n\t\tshortTitle: \"Reports\",\n\t\tphase: 4,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tsettings: {\n\t\ttitle: \"Important Settings\",\n\t\tshortTitle: \"Settings\",\n\t\tphase: 4,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\t\"first-action\": {\n\t\ttitle: \"Your First Action\",\n\t\tshortTitle: \"Try It\",\n\t\tphase: 5,\n\t\trequired: false,\n\t\testimatedMinutes: 2,\n\t},\n\tcomplete: {\n\t\ttitle: \"All Set!\",\n\t\tshortTitle: \"Done\",\n\t\tphase: 5,\n\t\trequired: true,\n\t\testimatedMinutes: 1,\n\t},\n};\n\nexport const INDUSTRIES = [\n\t{ value: \"hvac\", label: \"HVAC\" },\n\t{ value: \"plumbing\", label: \"Plumbing\" },\n\t{ value: \"electrical\", label: \"Electrical\" },\n\t{ value: \"roofing\", label: \"Roofing\" },\n\t{ value: \"landscaping\", label: \"Landscaping\" },\n\t{ value: \"cleaning\", label: \"Cleaning Services\" },\n\t{ value: \"pest-control\", label: \"Pest Control\" },\n\t{ value: \"appliance\", label: \"Appliance Repair\" },\n\t{ value: \"garage-door\", label: \"Garage Door\" },\n\t{ value: \"locksmith\", label: \"Locksmith\" },\n\t{ value: \"general-contractor\", label: \"General Contractor\" },\n\t{ value: \"other\", label: \"Other\" },\n];\n\nexport const COMPANY_SIZES = [\n\t{ value: \"solo\", label: \"Solo Operator\" },\n\t{ value: \"small\", label: \"Small Team\" },\n\t{ value: \"growing\", label: \"Growing Business\" },\n\t{ value: \"enterprise\", label: \"Enterprise\" },\n];\n\nexport const DEFAULT_NOTIFICATIONS: NotificationPreference[] = [\n\t{ category: \"new_booking\", push: true, email: true, sms: false },\n\t{ category: \"job_updates\", push: true, email: false, sms: false },\n\t{ category: \"payment_received\", push: true, email: true, sms: false },\n\t{ category: \"customer_messages\", push: true, email: true, sms: true },\n\t{ category: \"daily_summary\", push: false, email: true, sms: false },\n\t{ category: \"weekly_report\", push: false, email: true, sms: false },\n];\n\n// =============================================================================\n// INITIAL STATE\n// =============================================================================\n\nconst initialData: OnboardingData = {\n\tpath: null,\n\tteamSize: \"\",\n\tindustry: \"\",\n\treferralSource: \"\",\n\n\t// Basic info\n\tcompanyName: \"\",\n\tcompanyPhone: \"\",\n\tcompanyEmail: \"\",\n\tcompanyWebsite: \"\",\n\tcompanyLogo: null,\n\ttimezone:\n\t\tIntl.DateTimeFormat().resolvedOptions().timeZone || \"America/New_York\",\n\n\t// Business address\n\tcompanyAddress: \"\",\n\tcompanyCity: \"\",\n\tcompanyState: \"\",\n\tcompanyZip: \"\",\n\tcompanyCountry: \"US\",\n\n\t// Mailing address\n\tmailingAddressSame: true,\n\tmailingAddress: \"\",\n\tmailingCity: \"\",\n\tmailingState: \"\",\n\tmailingZip: \"\",\n\tmailingCountry: \"US\",\n\n\t// Business verification\n\tbusinessType: null,\n\tein: \"\",\n\tstateOfIncorporation: \"\",\n\tdateEstablished: \"\",\n\tbusinessLicense: \"\",\n\n\t// Beneficial owner info\n\townerName: \"\",\n\townerTitle: \"Owner\",\n\townerEmail: \"\",\n\townerPhone: \"\",\n\townerSSN: \"\",\n\townerDOB: \"\",\n\townerAddress: \"\",\n\townerOwnershipPercent: 100,\n\n\t// Additional business info\n\tyearsInBusiness: \"\",\n\tnumberOfEmployees: \"\",\n\tannualRevenueRange: \"\",\n\n\tphoneSetupType: null,\n\tphoneNumber: \"\",\n\tsmsEnabled: true,\n\n\t// Number Porting\n\tportingStatus: \"\",\n\tportingCarrier: \"\",\n\tportingAccountNumber: \"\",\n\tportingPin: \"\",\n\tportingBillingPhone: \"\",\n\n\temailSetupType: null,\n\tcustomDomain: \"\",\n\tdnsVerified: false,\n\tsendgridDomainId: null,\n\n\tnotifications: DEFAULT_NOTIFICATIONS,\n\tquietHoursEnabled: false,\n\tquietHoursStart: \"22:00\",\n\tquietHoursEnd: \"07:00\",\n\n\t// Data Import\n\tpreviousSoftware: null,\n\tdataImportCompleted: null,\n\timportedCustomerCount: 0,\n\timportedPriceBookCount: 0,\n\timportedEquipmentCount: 0,\n\timportedJobCount: 0,\n\n\t// Integrations\n\tquickbooksConnected: false,\n\tquickbooksCompanyId: null,\n\tquickbooksLastSync: null,\n\tgoogleCalendarConnected: false,\n\tgoogleCalendarId: null,\n\n\tservices: [],\n\tservicesImportedFrom: null,\n\n\tteamMembers: [],\n\tteamInvites: [],\n\tinviteMethod: null,\n\n\tpaymentSetupComplete: false,\n\tplaidConnected: false,\n\tacceptCards: true,\n\tacceptACH: true,\n\tacceptChecks: true,\n\tacceptCash: true,\n\tacceptCheckCapture: true,\n\tpaymentMethods: [],\n\ttaxRate: \"\",\n\tpaymentTerms: \"30\",\n\n\t// Platform Billing - Stripe selections\n\tphonePortingCount: 0,\n\tnewPhoneNumberCount: 0,\n\tgmailWorkspaceUsers: 0,\n\tprofitRhinoEnabled: false,\n\tstripeCustomerId: null,\n\tstripePaymentMethodId: null,\n\tpaymentMethodCollected: false,\n\ttrialEndsAt: null,\n\n\tworkingDays: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\"],\n\tstartTime: \"08:00\",\n\tendTime: \"17:00\",\n\tserviceRadius: \"25\",\n\tserviceAreaZips: [],\n\tbusinessHours: null,\n\tbufferTime: \"15\",\n\temergencyService: false,\n\n\tpreferredReports: [\"revenue\", \"jobs\", \"customers\"],\n\treportFrequency: \"weekly\",\n\tdashboardWidgets: [\"revenue\", \"jobs_today\", \"pending_invoices\"],\n\tscheduledReports: [],\n\n\tautoReminders: true,\n\trequireJobPhotos: true,\n\tcustomerPortalEnabled: true,\n\tonlineBookingEnabled: false,\n\tgpsTrackingEnabled: false,\n\n\tfirstActionType: null,\n\tfirstActionCompleted: false,\n\n\tonboardingCompleted: false,\n};\n\n// =============================================================================\n// STORE\n// =============================================================================\n\nexport const useOnboardingStore = create<OnboardingState>()(\n\tpersist(\n\t\t(set, get) => ({\n\t\t\tcurrentStep: \"welcome\",\n\t\t\tcompletedSteps: [],\n\t\t\tskippedSteps: [],\n\t\t\tdata: initialData,\n\t\t\tisLoading: false,\n\t\t\tisSaving: false,\n\t\t\tshowWalkthrough: true,\n\t\t\twalkthroughSeen: {},\n\n\t\t\tsetCurrentStep: (step) => set({ currentStep: step }),\n\n\t\t\tcompleteStep: (step) =>\n\t\t\t\tset((state) => ({\n\t\t\t\t\tcompletedSteps: state.completedSteps.includes(step)\n\t\t\t\t\t\t? state.completedSteps\n\t\t\t\t\t\t: [...state.completedSteps, step],\n\t\t\t\t\tskippedSteps: state.skippedSteps.filter((s) => s !== step),\n\t\t\t\t})),\n\n\t\t\tskipStep: (step) =>\n\t\t\t\tset((state) => ({\n\t\t\t\t\tskippedSteps: state.skippedSteps.includes(step)\n\t\t\t\t\t\t? state.skippedSteps\n\t\t\t\t\t\t: [...state.skippedSteps, step],\n\t\t\t\t})),\n\n\t\t\tupdateData: (updates) =>\n\t\t\t\tset((state) => ({\n\t\t\t\t\tdata: { ...state.data, ...updates },\n\t\t\t\t})),\n\n\t\t\tsetLoading: (loading) => set({ isLoading: loading }),\n\n\t\t\tsetSaving: (saving) => set({ isSaving: saving }),\n\n\t\t\tmarkWalkthroughSeen: (id) =>\n\t\t\t\tset((state) => ({\n\t\t\t\t\twalkthroughSeen: { ...state.walkthroughSeen, [id]: true },\n\t\t\t\t})),\n\n\t\t\tsetShowWalkthrough: (show) => set({ showWalkthrough: show }),\n\n\t\t\tresetOnboarding: () =>\n\t\t\t\tset({\n\t\t\t\t\tcurrentStep: \"welcome\",\n\t\t\t\t\tcompletedSteps: [],\n\t\t\t\t\tskippedSteps: [],\n\t\t\t\t\tdata: initialData,\n\t\t\t\t\twalkthroughSeen: {},\n\t\t\t\t}),\n\n\t\t\tgetProgress: () => {\n\t\t\t\tconst { completedSteps, skippedSteps } = get();\n\t\t\t\tconst totalSteps = STEPS_ORDER.length - 1; // Exclude 'complete'\n\t\t\t\tconst finishedSteps = completedSteps.length + skippedSteps.length;\n\t\t\t\treturn Math.round((finishedSteps / totalSteps) * 100);\n\t\t\t},\n\n\t\t\tcanProceed: () => {\n\t\t\t\tconst { currentStep, data } = get();\n\t\t\t\tswitch (currentStep) {\n\t\t\t\t\tcase \"welcome\":\n\t\t\t\t\t\treturn !!data.path;\n\t\t\t\t\tcase \"company\":\n\t\t\t\t\t\treturn data.companyName.trim().length > 0;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn true; // Most steps are optional\n\t\t\t\t}\n\t\t\t},\n\t\t}),\n\t\t{\n\t\t\tname: \"thorbis-onboarding\",\n\t\t\tpartialize: (state) => ({\n\t\t\t\tcurrentStep: state.currentStep,\n\t\t\t\tcompletedSteps: state.completedSteps,\n\t\t\t\tskippedSteps: state.skippedSteps,\n\t\t\t\tdata: state.data,\n\t\t\t\twalkthroughSeen: state.walkthroughSeen,\n\t\t\t}),\n\t\t},\n\t),\n);\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\nexport function getNextStep(\n\tcurrentStep: OnboardingStep,\n): OnboardingStep | null {\n\tconst currentIndex = STEPS_ORDER.indexOf(currentStep);\n\tif (currentIndex === -1 || currentIndex === STEPS_ORDER.length - 1) {\n\t\treturn null;\n\t}\n\treturn STEPS_ORDER[currentIndex + 1];\n}\n\nexport function getPreviousStep(\n\tcurrentStep: OnboardingStep,\n): OnboardingStep | null {\n\tconst currentIndex = STEPS_ORDER.indexOf(currentStep);\n\tif (currentIndex <= 0) {\n\t\treturn null;\n\t}\n\treturn STEPS_ORDER[currentIndex - 1];\n}\n\nexport function getStepIndex(step: OnboardingStep): number {\n\treturn STEPS_ORDER.indexOf(step);\n}\n\nexport function isStepComplete(\n\tstep: OnboardingStep,\n\tcompletedSteps: OnboardingStep[],\n): boolean {\n\treturn completedSteps.includes(step);\n}\n\nexport function getEstimatedTimeRemaining(currentStep: OnboardingStep): number {\n\tconst currentIndex = STEPS_ORDER.indexOf(currentStep);\n\tlet totalMinutes = 0;\n\tfor (let i = currentIndex; i < STEPS_ORDER.length; i++) {\n\t\ttotalMinutes += STEP_CONFIG[STEPS_ORDER[i]].estimatedMinutes;\n\t}\n\treturn totalMinutes;\n}\n","\"use client\";\n\n/**\n * Company Step - Comprehensive Business Profile & Verification\n *\n * Collects all information needed for:\n * - Bank account setup (Plaid, ACH)\n * - Payment processing (check capture, card processing)\n * - Identity verification and compliance\n * - Business verification for 10DLC SMS registration\n */\n\nimport {\n\tAlertTriangle,\n\tBuilding2,\n\tCalendar,\n\tDollarSign,\n\tHelpCircle,\n\tShield,\n\tUpload,\n\tUsers,\n\tX,\n} from \"lucide-react\";\nimport { useRef, useState } from \"react\";\nimport {\n\tHELP_CONTENT,\n\tHelpTooltip,\n} from \"@/components/onboarding/help-tooltip\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\nconst TIMEZONES = [\n\t{ value: \"America/New_York\", label: \"Eastern Time\" },\n\t{ value: \"America/Chicago\", label: \"Central Time\" },\n\t{ value: \"America/Denver\", label: \"Mountain Time\" },\n\t{ value: \"America/Los_Angeles\", label: \"Pacific Time\" },\n\t{ value: \"America/Anchorage\", label: \"Alaska Time\" },\n\t{ value: \"Pacific/Honolulu\", label: \"Hawaii Time\" },\n];\n\nconst US_STATES = [\n\t\"AL\",\n\t\"AK\",\n\t\"AZ\",\n\t\"AR\",\n\t\"CA\",\n\t\"CO\",\n\t\"CT\",\n\t\"DE\",\n\t\"FL\",\n\t\"GA\",\n\t\"HI\",\n\t\"ID\",\n\t\"IL\",\n\t\"IN\",\n\t\"IA\",\n\t\"KS\",\n\t\"KY\",\n\t\"LA\",\n\t\"ME\",\n\t\"MD\",\n\t\"MA\",\n\t\"MI\",\n\t\"MN\",\n\t\"MS\",\n\t\"MO\",\n\t\"MT\",\n\t\"NE\",\n\t\"NV\",\n\t\"NH\",\n\t\"NJ\",\n\t\"NM\",\n\t\"NY\",\n\t\"NC\",\n\t\"ND\",\n\t\"OH\",\n\t\"OK\",\n\t\"OR\",\n\t\"PA\",\n\t\"RI\",\n\t\"SC\",\n\t\"SD\",\n\t\"TN\",\n\t\"TX\",\n\t\"UT\",\n\t\"VT\",\n\t\"VA\",\n\t\"WA\",\n\t\"WV\",\n\t\"WI\",\n\t\"WY\",\n];\n\nconst BUSINESS_TYPES = [\n\t{\n\t\tvalue: \"sole_proprietor\",\n\t\tlabel: \"Sole Proprietor\",\n\t\tdescription: \"Individual owner\",\n\t},\n\t{ value: \"llc\", label: \"LLC\", description: \"Limited Liability Company\" },\n\t{\n\t\tvalue: \"corporation\",\n\t\tlabel: \"Corporation\",\n\t\tdescription: \"C-Corp or S-Corp\",\n\t},\n\t{\n\t\tvalue: \"partnership\",\n\t\tlabel: \"Partnership\",\n\t\tdescription: \"General or Limited Partnership\",\n\t},\n\t{\n\t\tvalue: \"non_profit\",\n\t\tlabel: \"Non-Profit\",\n\t\tdescription: \"501(c) organization\",\n\t},\n];\n\nconst EMPLOYEE_RANGES = [\n\t{ value: \"1\", label: \"Just me\" },\n\t{ value: \"2-5\", label: \"2-5 employees\" },\n\t{ value: \"6-10\", label: \"6-10 employees\" },\n\t{ value: \"11-25\", label: \"11-25 employees\" },\n\t{ value: \"26-50\", label: \"26-50 employees\" },\n\t{ value: \"51-100\", label: \"51-100 employees\" },\n\t{ value: \"100+\", label: \"100+ employees\" },\n];\n\nconst REVENUE_RANGES = [\n\t{ value: \"under-100k\", label: \"Under $100K\" },\n\t{ value: \"100k-250k\", label: \"$100K - $250K\" },\n\t{ value: \"250k-500k\", label: \"$250K - $500K\" },\n\t{ value: \"500k-1m\", label: \"$500K - $1M\" },\n\t{ value: \"1m-5m\", label: \"$1M - $5M\" },\n\t{ value: \"5m-10m\", label: \"$5M - $10M\" },\n\t{ value: \"10m+\", label: \"$10M+\" },\n\t{ value: \"prefer-not-say\", label: \"Prefer not to say\" },\n];\n\nconst YEARS_IN_BUSINESS = [\n\t{ value: \"new\", label: \"Starting a new business\" },\n\t{ value: \"under-1\", label: \"Less than 1 year\" },\n\t{ value: \"1-2\", label: \"1-2 years\" },\n\t{ value: \"3-5\", label: \"3-5 years\" },\n\t{ value: \"6-10\", label: \"6-10 years\" },\n\t{ value: \"10+\", label: \"10+ years\" },\n];\n\nexport function CompanyStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst fileInputRef = useRef<HTMLInputElement>(null);\n\tconst [dragActive, setDragActive] = useState(false);\n\n\tconst handleLogoUpload = (file: File) => {\n\t\tif (file && file.type.startsWith(\"image/\")) {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = (e) => {\n\t\t\t\tupdateData({ companyLogo: e.target?.result as string });\n\t\t\t};\n\t\t\treader.readAsDataURL(file);\n\t\t}\n\t};\n\n\tconst handleDrag = (e: React.DragEvent) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (e.type === \"dragenter\" || e.type === \"dragover\") {\n\t\t\tsetDragActive(true);\n\t\t} else if (e.type === \"dragleave\") {\n\t\t\tsetDragActive(false);\n\t\t}\n\t};\n\n\tconst handleDrop = (e: React.DragEvent) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetDragActive(false);\n\t\tif (e.dataTransfer.files && e.dataTransfer.files[0]) {\n\t\t\thandleLogoUpload(e.dataTransfer.files[0]);\n\t\t}\n\t};\n\n\t// Format EIN input (XX-XXXXXXX)\n\tconst handleEinInput = (value: string) => {\n\t\tconst cleaned = value.replace(/\\D/g, \"\");\n\t\tlet formatted = cleaned;\n\t\tif (cleaned.length > 2) {\n\t\t\tformatted = `${cleaned.slice(0, 2)}-${cleaned.slice(2, 9)}`;\n\t\t}\n\t\tupdateData({ ein: formatted });\n\t};\n\n\t// Format SSN input (last 4 digits only)\n\tconst handleSsnInput = (value: string) => {\n\t\tconst cleaned = value.replace(/\\D/g, \"\").slice(0, 4);\n\t\tupdateData({ ownerSSN: cleaned });\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Company information</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tThis information is used for identity verification, bank account\n\t\t\t\t\tsetup, and compliance.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Section 1: Basic Company Info */}\n\t\t\t<div className=\"space-y-6\">\n\t\t\t\t<div className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t<Building2 className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t<span>Business Profile</span>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Logo & Name */}\n\t\t\t\t<div className=\"flex items-start gap-6\">\n\t\t\t\t\t{/* Logo Upload */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"relative flex h-24 w-24 flex-shrink-0 items-center justify-center rounded-xl border-2 border-dashed cursor-pointer transition-colors\",\n\t\t\t\t\t\t\tdragActive\n\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t: \"border-muted-foreground/25 hover:border-muted-foreground/50\",\n\t\t\t\t\t\t\tdata.companyLogo && \"border-solid border-transparent\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonDragEnter={handleDrag}\n\t\t\t\t\t\tonDragLeave={handleDrag}\n\t\t\t\t\t\tonDragOver={handleDrag}\n\t\t\t\t\t\tonDrop={handleDrop}\n\t\t\t\t\t\tonClick={() => fileInputRef.current?.click()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={fileInputRef}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\tclassName=\"hidden\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tif (e.target.files?.[0]) {\n\t\t\t\t\t\t\t\t\thandleLogoUpload(e.target.files[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{data.companyLogo ? (\n\t\t\t\t\t\t\t<div className=\"relative w-full h-full\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={data.companyLogo}\n\t\t\t\t\t\t\t\t\talt=\"Logo\"\n\t\t\t\t\t\t\t\t\tclassName=\"h-full w-full rounded-xl object-contain bg-muted/30\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\tupdateData({ companyLogo: null });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-sm\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Upload className=\"h-6 w-6 text-muted-foreground/50\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Company Name */}\n\t\t\t\t\t<div className=\"flex-1 space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"companyName\">\n\t\t\t\t\t\t\tCompany name <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"companyName\"\n\t\t\t\t\t\t\tplaceholder=\"Acme Plumbing LLC\"\n\t\t\t\t\t\t\tvalue={data.companyName}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ companyName: e.target.value })}\n\t\t\t\t\t\t\tclassName=\"text-lg h-12\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Contact Info */}\n\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-2\">\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"companyPhone\">Phone</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"companyPhone\"\n\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\tvalue={data.companyPhone}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ companyPhone: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"companyEmail\">Email</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"companyEmail\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder=\"info@example.com\"\n\t\t\t\t\t\t\tvalue={data.companyEmail}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ companyEmail: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<Label htmlFor=\"companyWebsite\">Website (optional)</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tid=\"companyWebsite\"\n\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t\tplaceholder=\"https://acmeplumbing.com\"\n\t\t\t\t\t\tvalue={data.companyWebsite}\n\t\t\t\t\t\tonChange={(e) => updateData({ companyWebsite: e.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Section 2: Business Address */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<Label>Business Address</Label>\n\t\t\t\t<Input\n\t\t\t\t\tplaceholder=\"Street address\"\n\t\t\t\t\tvalue={data.companyAddress}\n\t\t\t\t\tonChange={(e) => updateData({ companyAddress: e.target.value })}\n\t\t\t\t/>\n\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-3\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tplaceholder=\"City\"\n\t\t\t\t\t\tvalue={data.companyCity}\n\t\t\t\t\t\tonChange={(e) => updateData({ companyCity: e.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={data.companyState}\n\t\t\t\t\t\tonValueChange={(v) => updateData({ companyState: v })}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t<SelectValue placeholder=\"State\" />\n\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t{US_STATES.map((state) => (\n\t\t\t\t\t\t\t\t<SelectItem key={state} value={state}>\n\t\t\t\t\t\t\t\t\t{state}\n\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t</Select>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tplaceholder=\"ZIP\"\n\t\t\t\t\t\tvalue={data.companyZip}\n\t\t\t\t\t\tonChange={(e) => updateData({ companyZip: e.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Section 3: Mailing Address */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tid=\"mailingAddressSame\"\n\t\t\t\t\t\tchecked={data.mailingAddressSame}\n\t\t\t\t\t\tonCheckedChange={(v) =>\n\t\t\t\t\t\t\tupdateData({ mailingAddressSame: v as boolean })\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Label htmlFor=\"mailingAddressSame\" className=\"cursor-pointer\">\n\t\t\t\t\t\tMailing address is the same as business address\n\t\t\t\t\t</Label>\n\t\t\t\t</div>\n\n\t\t\t\t{!data.mailingAddressSame && (\n\t\t\t\t\t<div className=\"space-y-4 pl-6 border-l-2 border-muted\">\n\t\t\t\t\t\t<Label>Mailing Address</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tplaceholder=\"Street address\"\n\t\t\t\t\t\t\tvalue={data.mailingAddress}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ mailingAddress: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-3\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tplaceholder=\"City\"\n\t\t\t\t\t\t\t\tvalue={data.mailingCity}\n\t\t\t\t\t\t\t\tonChange={(e) => updateData({ mailingCity: e.target.value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={data.mailingState}\n\t\t\t\t\t\t\t\tonValueChange={(v) => updateData({ mailingState: v })}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue placeholder=\"State\" />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{US_STATES.map((state) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={state} value={state}>\n\t\t\t\t\t\t\t\t\t\t\t{state}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tplaceholder=\"ZIP\"\n\t\t\t\t\t\t\t\tvalue={data.mailingZip}\n\t\t\t\t\t\t\t\tonChange={(e) => updateData({ mailingZip: e.target.value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Section 4: Business Verification */}\n\t\t\t<div className=\"space-y-6\">\n\t\t\t\t<div className=\"flex items-start gap-3 bg-amber-500/10 rounded-lg p-4\">\n\t\t\t\t\t<Shield className=\"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\tBusiness verification required\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\tThis information is needed for bank account setup, payment\n\t\t\t\t\t\t\tprocessing, and compliance. All data is encrypted and secure.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"grid gap-6 sm:grid-cols-2\">\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"businessType\">\n\t\t\t\t\t\t\tBusiness Type <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={data.businessType || undefined}\n\t\t\t\t\t\t\tonValueChange={(v) => updateData({ businessType: v as any })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"businessType\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select business type\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{BUSINESS_TYPES.map((type) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={type.value} value={type.value}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{type.label}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground ml-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t- {type.description}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ein\">\n\t\t\t\t\t\t\tEIN / Tax ID <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ein\"\n\t\t\t\t\t\t\tplaceholder=\"XX-XXXXXXX\"\n\t\t\t\t\t\t\tvalue={data.ein}\n\t\t\t\t\t\t\tonChange={(e) => handleEinInput(e.target.value)}\n\t\t\t\t\t\t\tmaxLength={10}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t9-digit Employer Identification Number\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"stateOfIncorporation\">State of Incorporation</Label>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={data.stateOfIncorporation}\n\t\t\t\t\t\t\tonValueChange={(v) => updateData({ stateOfIncorporation: v })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"stateOfIncorporation\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select state\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{US_STATES.map((state) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={state} value={state}>\n\t\t\t\t\t\t\t\t\t\t{state}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"dateEstablished\">Date Established</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"dateEstablished\"\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tvalue={data.dateEstablished}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ dateEstablished: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2 sm:col-span-2\">\n\t\t\t\t\t\t<Label htmlFor=\"businessLicense\">\n\t\t\t\t\t\t\tBusiness License Number (if applicable)\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"businessLicense\"\n\t\t\t\t\t\t\tplaceholder=\"License number\"\n\t\t\t\t\t\t\tvalue={data.businessLicense}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ businessLicense: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Section 5: Beneficial Owner Information */}\n\t\t\t<div className=\"space-y-6\">\n\t\t\t\t<div className=\"flex items-start gap-3 bg-blue-500/10 rounded-lg p-4\">\n\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\tBeneficial owner information\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\tRequired for financial compliance (FinCEN rules). This is the\n\t\t\t\t\t\t\tperson who owns or controls 25% or more of the business.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"grid gap-6 sm:grid-cols-2\">\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerName\">\n\t\t\t\t\t\t\tOwner Full Name <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerName\"\n\t\t\t\t\t\t\tplaceholder=\"John Smith\"\n\t\t\t\t\t\t\tvalue={data.ownerName}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerName: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerTitle\">Title</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerTitle\"\n\t\t\t\t\t\t\tplaceholder=\"Owner, CEO, etc.\"\n\t\t\t\t\t\t\tvalue={data.ownerTitle}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerTitle: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerEmail\">Email</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerEmail\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder=\"john@acmeplumbing.com\"\n\t\t\t\t\t\t\tvalue={data.ownerEmail}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerEmail: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerPhone\">Phone</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerPhone\"\n\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\tvalue={data.ownerPhone}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerPhone: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerDOB\">Date of Birth</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerDOB\"\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tvalue={data.ownerDOB}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerDOB: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerSSN\">Last 4 of SSN</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerSSN\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"1234\"\n\t\t\t\t\t\t\tvalue={data.ownerSSN}\n\t\t\t\t\t\t\tonChange={(e) => handleSsnInput(e.target.value)}\n\t\t\t\t\t\t\tmaxLength={4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\tLast 4 digits only for verification\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2 sm:col-span-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerAddress\">Owner Address</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerAddress\"\n\t\t\t\t\t\t\tplaceholder=\"Full address\"\n\t\t\t\t\t\t\tvalue={data.ownerAddress}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ ownerAddress: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"ownerOwnershipPercent\">Ownership %</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"ownerOwnershipPercent\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\tvalue={data.ownerOwnershipPercent}\n\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\townerOwnershipPercent: parseInt(e.target.value) || 0,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Section 6: Business Size & Experience */}\n\t\t\t<div className=\"space-y-6\">\n\t\t\t\t<div className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t<Users className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t<span>Business Size</span>\n\t\t\t\t\t<span className=\"text-muted-foreground font-normal\">(optional)</span>\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"text-sm text-muted-foreground -mt-2\">\n\t\t\t\t\tThis helps us recommend the right features and pricing for your\n\t\t\t\t\tbusiness.\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"grid gap-6 sm:grid-cols-3\">\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t<Label htmlFor=\"yearsInBusiness\">Years in business</Label>\n\t\t\t\t\t\t\t<HelpTooltip\n\t\t\t\t\t\t\t\ttooltip=\"How long have you been operating?\"\n\t\t\t\t\t\t\t\tdetails=\"This helps us understand your business maturity and recommend appropriate features. New businesses may benefit from our getting-started guides.\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={data.yearsInBusiness}\n\t\t\t\t\t\t\tonValueChange={(v) => updateData({ yearsInBusiness: v })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"yearsInBusiness\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{YEARS_IN_BUSINESS.map((option) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t<Label htmlFor=\"numberOfEmployees\">Team size</Label>\n\t\t\t\t\t\t\t<HelpTooltip\n\t\t\t\t\t\t\t\ttooltip=\"Number of people in your company\"\n\t\t\t\t\t\t\t\tdetails=\"This helps us recommend the right team management features and pricing tier for your business.\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={data.numberOfEmployees}\n\t\t\t\t\t\t\tonValueChange={(v) => updateData({ numberOfEmployees: v })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"numberOfEmployees\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{EMPLOYEE_RANGES.map((option) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t<Label htmlFor=\"annualRevenueRange\">Annual revenue</Label>\n\t\t\t\t\t\t\t<HelpTooltip\n\t\t\t\t\t\t\t\ttooltip=\"Approximate annual revenue\"\n\t\t\t\t\t\t\t\tdetails=\"This is completely optional and confidential. It helps us recommend appropriate payment processing limits and financial features.\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={data.annualRevenueRange}\n\t\t\t\t\t\t\tonValueChange={(v) => updateData({ annualRevenueRange: v })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger id=\"annualRevenueRange\">\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{REVENUE_RANGES.map((option) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Timezone */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<Label>Timezone</Label>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={data.timezone}\n\t\t\t\t\tonValueChange={(v) => updateData({ timezone: v })}\n\t\t\t\t>\n\t\t\t\t\t<SelectTrigger className=\"w-full sm:w-64\">\n\t\t\t\t\t\t<SelectValue placeholder=\"Select timezone\" />\n\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t{TIMEZONES.map((tz) => (\n\t\t\t\t\t\t\t<SelectItem key={tz.value} value={tz.value}>\n\t\t\t\t\t\t\t\t{tz.label}\n\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SelectContent>\n\t\t\t\t</Select>\n\t\t\t</div>\n\n\t\t\t{/* Security Note */}\n\t\t\t<div className=\"flex items-start gap-3 text-xs text-muted-foreground bg-muted/40 rounded-lg p-4\">\n\t\t\t\t<Shield className=\"h-4 w-4 flex-shrink-0 mt-0.5\" />\n\t\t\t\t<p>\n\t\t\t\t\tAll sensitive information is encrypted with bank-level security\n\t\t\t\t\t(AES-256) and never shared without your consent. Required for payment\n\t\t\t\t\tprocessing and compliance with FinCEN regulations.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Help Tooltip - Contextual help for onboarding fields\n *\n * Provides inline help explaining WHY data is collected, reducing confusion\n * and support requests.\n */\n\nimport { ExternalLink, HelpCircle, X } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\ninterface HelpTooltipProps {\n\t/** Short tooltip text shown on hover (desktop) or tap (mobile) */\n\ttooltip: string;\n\t/** Optional longer explanation shown in expandable popover */\n\tdetails?: string;\n\t/** Optional link to more documentation */\n\tlearnMoreUrl?: string;\n\t/** Optional link text */\n\tlearnMoreText?: string;\n\t/** Size variant */\n\tsize?: \"sm\" | \"md\";\n\t/** Additional class names */\n\tclassName?: string;\n}\n\nexport function HelpTooltip({\n\ttooltip,\n\tdetails,\n\tlearnMoreUrl,\n\tlearnMoreText = \"Learn more\",\n\tsize = \"sm\",\n\tclassName,\n}: HelpTooltipProps) {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst iconSize = size === \"sm\" ? \"h-3.5 w-3.5\" : \"h-4 w-4\";\n\n\t// Simple tooltip if no details\n\tif (!details) {\n\t\treturn (\n\t\t\t<TooltipProvider>\n\t\t\t\t<Tooltip>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"inline-flex items-center justify-center rounded-full text-muted-foreground/60 hover:text-muted-foreground transition-colors\",\n\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\taria-label=\"Help\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HelpCircle className={iconSize} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent side=\"top\" className=\"max-w-xs\">\n\t\t\t\t\t\t<p className=\"text-sm\">{tooltip}</p>\n\t\t\t\t\t</TooltipContent>\n\t\t\t\t</Tooltip>\n\t\t\t</TooltipProvider>\n\t\t);\n\t}\n\n\t// Popover with more details\n\treturn (\n\t\t<Popover open={isOpen} onOpenChange={setIsOpen}>\n\t\t\t<PopoverTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"inline-flex items-center justify-center rounded-full text-muted-foreground/60 hover:text-muted-foreground transition-colors\",\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t)}\n\t\t\t\t\taria-label=\"Help\"\n\t\t\t\t>\n\t\t\t\t\t<HelpCircle className={iconSize} />\n\t\t\t\t</button>\n\t\t\t</PopoverTrigger>\n\t\t\t<PopoverContent side=\"top\" className=\"w-80 p-0\" align=\"start\">\n\t\t\t\t<div className=\"space-y-3 p-4\">\n\t\t\t\t\t<div className=\"flex items-start justify-between gap-2\">\n\t\t\t\t\t\t<p className=\"text-sm font-medium\">{tooltip}</p>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\tclassName=\"h-6 w-6 -mr-2 -mt-1\"\n\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<X className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">{details}</p>\n\t\t\t\t\t{learnMoreUrl && (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={learnMoreUrl}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\tclassName=\"inline-flex items-center gap-1 text-sm text-primary hover:underline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{learnMoreText}\n\t\t\t\t\t\t\t<ExternalLink className=\"h-3 w-3\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t);\n}\n\n/**\n * Help Section - Expandable \"Why do we need this?\" section\n */\ninterface HelpSectionProps {\n\ttitle?: string;\n\tchildren: React.ReactNode;\n\tdefaultOpen?: boolean;\n\tclassName?: string;\n}\n\nexport function HelpSection({\n\ttitle = \"Why do we need this?\",\n\tchildren,\n\tdefaultOpen = false,\n\tclassName,\n}: HelpSectionProps) {\n\tconst [isOpen, setIsOpen] = useState(defaultOpen);\n\n\treturn (\n\t\t<div className={cn(\"rounded-lg bg-muted/30 border\", className)}>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonClick={() => setIsOpen(!isOpen)}\n\t\t\t\tclassName=\"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-muted/50 transition-colors rounded-lg\"\n\t\t\t>\n\t\t\t\t<span className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t<HelpCircle className=\"h-4 w-4\" />\n\t\t\t\t\t{title}\n\t\t\t\t</span>\n\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t{isOpen ? \"Hide\" : \"Show\"}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t{isOpen && (\n\t\t\t\t<div className=\"px-4 pb-4 pt-0\">\n\t\t\t\t\t<div className=\"text-sm text-muted-foreground space-y-2\">\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n/**\n * Field Label with Help - Label component with integrated help tooltip\n */\ninterface FieldLabelProps {\n\tlabel: string;\n\thtmlFor?: string;\n\trequired?: boolean;\n\ttooltip?: string;\n\tdetails?: string;\n\tlearnMoreUrl?: string;\n\tclassName?: string;\n}\n\nexport function FieldLabel({\n\tlabel,\n\thtmlFor,\n\trequired = false,\n\ttooltip,\n\tdetails,\n\tlearnMoreUrl,\n\tclassName,\n}: FieldLabelProps) {\n\treturn (\n\t\t<div className={cn(\"flex items-center gap-1.5\", className)}>\n\t\t\t<label\n\t\t\t\thtmlFor={htmlFor}\n\t\t\t\tclassName=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n\t\t\t>\n\t\t\t\t{label}\n\t\t\t\t{required && <span className=\"text-destructive ml-0.5\">*</span>}\n\t\t\t</label>\n\t\t\t{tooltip && (\n\t\t\t\t<HelpTooltip\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t\tdetails={details}\n\t\t\t\t\tlearnMoreUrl={learnMoreUrl}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n/**\n * Pre-built help content for common onboarding fields\n */\nexport const HELP_CONTENT = {\n\tcompanyName: {\n\t\ttooltip: \"Your legal business name\",\n\t\tdetails:\n\t\t\t\"This appears on invoices, contracts, and customer communications. Use your registered business name for consistency.\",\n\t},\n\tein: {\n\t\ttooltip: \"Employer Identification Number (Tax ID)\",\n\t\tdetails:\n\t\t\t\"Required for payment processing and tax compliance. If you're a sole proprietor without an EIN, you can use your SSN.\",\n\t\tlearnMoreUrl:\n\t\t\t\"https://www.irs.gov/businesses/small-businesses-self-employed/apply-for-an-employer-identification-number-ein-online\",\n\t},\n\tbusinessType: {\n\t\ttooltip: \"Your legal business structure\",\n\t\tdetails:\n\t\t\t\"This affects how we set up payment processing and compliance features. Choose the structure you registered with your state.\",\n\t},\n\townerSSN: {\n\t\ttooltip: \"Last 4 digits of owner's SSN\",\n\t\tdetails:\n\t\t\t\"Required by financial regulations (KYC) to verify business ownership. We only store the last 4 digits and use bank-level encryption.\",\n\t},\n\tphonePorting: {\n\t\ttooltip: \"Keep your existing business number\",\n\t\tdetails:\n\t\t\t\"Phone porting transfers your existing number to our platform. This typically takes 7-14 business days. Your current service continues until the port completes.\",\n\t\tlearnMoreUrl: \"/kb/phone-porting\",\n\t},\n\tcustomDomain: {\n\t\ttooltip: \"Send emails from your own domain\",\n\t\tdetails:\n\t\t\t\"Using a custom domain (e.g., noreply@yourbusiness.com) improves deliverability and looks more professional. Requires DNS configuration.\",\n\t},\n\tserviceRadius: {\n\t\ttooltip: \"How far you'll travel for jobs\",\n\t\tdetails:\n\t\t\t\"This helps us calculate travel time estimates and filter customer requests by location. You can adjust this anytime in settings.\",\n\t},\n\ttaxRate: {\n\t\ttooltip: \"Your default sales tax rate\",\n\t\tdetails:\n\t\t\t\"Applied automatically to invoices. You can override this per invoice if needed for different jurisdictions.\",\n\t},\n\tgpsTracking: {\n\t\ttooltip: \"Track technician locations\",\n\t\tdetails:\n\t\t\t\"Enables real-time location tracking for dispatching efficiency and customer ETAs. Technicians must consent, and you can disable this anytime.\",\n\t},\n\tcustomerPortal: {\n\t\ttooltip: \"Self-service portal for customers\",\n\t\tdetails:\n\t\t\t\"Lets customers view their job history, pay invoices, and schedule appointments online. Reduces phone calls and improves customer experience.\",\n\t},\n} as const;\n","\"use client\";\n\n/**\n * Complete Step - Onboarding Celebration & Summary\n */\n\nimport confetti from \"canvas-confetti\";\nimport {\n\tArrowRight,\n\tBarChart3,\n\tBookOpen,\n\tCalendar,\n\tCheckCircle2,\n\tDollarSign,\n\tHeadphones,\n\tMail,\n\tMessageSquare,\n\tPartyPopper,\n\tPhone,\n\tRocket,\n\tSettings,\n\tSparkles,\n\tStar,\n\tUsers,\n\tVideo,\n} from \"lucide-react\";\nimport { useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tINDUSTRIES,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\nconst QUICK_LINKS = [\n\t{\n\t\ttitle: \"Dashboard\",\n\t\tdescription: \"View your business at a glance\",\n\t\ticon: BarChart3,\n\t\thref: \"/dashboard\",\n\t\tprimary: true,\n\t},\n\t{\n\t\ttitle: \"Add Customer\",\n\t\tdescription: \"Start building your database\",\n\t\ticon: Users,\n\t\thref: \"/dashboard/customers/new\",\n\t},\n\t{\n\t\ttitle: \"Schedule Job\",\n\t\tdescription: \"Put something on the calendar\",\n\t\ticon: Calendar,\n\t\thref: \"/dashboard/schedule\",\n\t},\n\t{\n\t\ttitle: \"Create Estimate\",\n\t\tdescription: \"Send a professional quote\",\n\t\ticon: DollarSign,\n\t\thref: \"/dashboard/work/estimates/new\",\n\t},\n];\n\nconst RESOURCES = [\n\t{\n\t\ttitle: \"Help Center\",\n\t\tdescription: \"Guides and tutorials\",\n\t\ticon: BookOpen,\n\t\thref: \"/help\",\n\t},\n\t{\n\t\ttitle: \"Video Training\",\n\t\tdescription: \"Learn at your own pace\",\n\t\ticon: Video,\n\t\thref: \"/training\",\n\t},\n\t{\n\t\ttitle: \"Live Chat\",\n\t\tdescription: \"Get help from our team\",\n\t\ticon: MessageSquare,\n\t\taction: \"chat\",\n\t},\n\t{\n\t\ttitle: \"Call Support\",\n\t\tdescription: \"Talk to a human\",\n\t\ticon: Headphones,\n\t\thref: \"tel:+18005551234\",\n\t},\n];\n\nexport function CompleteStep() {\n\tconst { data } = useOnboardingStore();\n\n\t// Trigger confetti celebration on mount\n\tuseEffect(() => {\n\t\tconst triggerConfetti = () => {\n\t\t\tconst duration = 3000;\n\t\t\tconst animationEnd = Date.now() + duration;\n\t\t\tconst defaults = {\n\t\t\t\tstartVelocity: 30,\n\t\t\t\tspread: 360,\n\t\t\t\tticks: 60,\n\t\t\t\tzIndex: 10000,\n\t\t\t\tcolors: [\n\t\t\t\t\t\"#26ccff\",\n\t\t\t\t\t\"#a25afd\",\n\t\t\t\t\t\"#ff5e7e\",\n\t\t\t\t\t\"#88ff5a\",\n\t\t\t\t\t\"#fcff42\",\n\t\t\t\t\t\"#ffa62d\",\n\t\t\t\t\t\"#ff36ff\",\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tfunction randomInRange(min: number, max: number) {\n\t\t\t\treturn Math.random() * (max - min) + min;\n\t\t\t}\n\n\t\t\tconfetti({ ...defaults, particleCount: 100, origin: { x: 0.5, y: 0.5 } });\n\n\t\t\tconst interval = setInterval(() => {\n\t\t\t\tconst timeLeft = animationEnd - Date.now();\n\t\t\t\tif (timeLeft <= 0) return clearInterval(interval);\n\n\t\t\t\tconst particleCount = 50 * (timeLeft / duration);\n\t\t\t\tconfetti({\n\t\t\t\t\t...defaults,\n\t\t\t\t\tparticleCount,\n\t\t\t\t\torigin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },\n\t\t\t\t});\n\t\t\t\tconfetti({\n\t\t\t\t\t...defaults,\n\t\t\t\t\tparticleCount,\n\t\t\t\t\torigin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },\n\t\t\t\t});\n\t\t\t}, 250);\n\n\t\t\tsetTimeout(() => clearInterval(interval), duration);\n\t\t};\n\n\t\tconst timer = setTimeout(triggerConfetti, 100);\n\t\treturn () => clearTimeout(timer);\n\t}, []);\n\n\t// Calculate what was set up\n\tconst setupSummary = {\n\t\tcompany: !!data.companyName,\n\t\tprofile: !!data.userName,\n\t\tphone: data.phoneSetupType !== \"skip\",\n\t\temail: data.emailSetupType !== \"skip\",\n\t\tnotifications: (data.notifications?.length ?? 0) > 0,\n\t\tservices: (data.services?.length ?? 0) > 0,\n\t\tteam: (data.teamInvites?.length ?? 0) > 0,\n\t\tpayments: data.stripeConnected || (data.paymentMethods?.length ?? 0) > 0,\n\t\tschedule: !!data.businessHours,\n\t\treports: (data.dashboardWidgets?.length ?? 0) > 0,\n\t};\n\n\tconst completedCount = Object.values(setupSummary).filter(Boolean).length;\n\tconst totalCount = Object.keys(setupSummary).length;\n\tconst completionPercent = Math.round((completedCount / totalCount) * 100);\n\tconst industryLabel = INDUSTRIES.find(\n\t\t(i) => i.value === data.industry,\n\t)?.label;\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Celebration Header */}\n\t\t\t<div className=\"flex flex-col items-center gap-4 py-4\">\n\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t<div className=\"flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-primary to-primary/50\">\n\t\t\t\t\t\t<PartyPopper className=\"h-10 w-10 text-primary-foreground\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"absolute -top-1 -right-1 flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white\">\n\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">You're all set!</h2>\n\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t{data.companyName || \"Your business\"} is ready to rock.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Progress */}\n\t\t\t\t<div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n\t\t\t\t\t<span className=\"font-medium text-foreground\">\n\t\t\t\t\t\t{completionPercent}%\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tconfigured • {completedCount} of {totalCount} areas\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Setup Summary */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<span className=\"font-medium\">Setup Summary</span>\n\t\t\t\t<div className=\"grid gap-2 sm:grid-cols-2\">\n\t\t\t\t\t{[\n\t\t\t\t\t\t{ key: \"company\", label: \"Company Profile\", icon: Settings },\n\t\t\t\t\t\t{ key: \"profile\", label: \"User Profile\", icon: Users },\n\t\t\t\t\t\t{ key: \"phone\", label: \"Phone & SMS\", icon: Phone },\n\t\t\t\t\t\t{ key: \"email\", label: \"Email Settings\", icon: Mail },\n\t\t\t\t\t\t{ key: \"services\", label: \"Service Catalog\", icon: DollarSign },\n\t\t\t\t\t\t{ key: \"schedule\", label: \"Business Hours\", icon: Calendar },\n\t\t\t\t\t\t{ key: \"payments\", label: \"Payment Methods\", icon: DollarSign },\n\t\t\t\t\t\t{ key: \"reports\", label: \"Dashboard\", icon: BarChart3 },\n\t\t\t\t\t].map((item) => {\n\t\t\t\t\t\tconst Icon = item.icon;\n\t\t\t\t\t\tconst completed =\n\t\t\t\t\t\t\tsetupSummary[item.key as keyof typeof setupSummary];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex items-center gap-3 rounded-lg p-3\",\n\t\t\t\t\t\t\t\t\tcompleted ? \"bg-green-500/10\" : \"bg-muted/40\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{completed ? (\n\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"text-sm\",\n\t\t\t\t\t\t\t\t\t\tcompleted ? \"font-medium\" : \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Stats */}\n\t\t\t\t{((data.services?.length ?? 0) > 0 || industryLabel) && (\n\t\t\t\t\t<div className=\"flex gap-6 text-sm text-muted-foreground pt-2\">\n\t\t\t\t\t\t{(data.services?.length ?? 0) > 0 && (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t{data.services?.length}\n\t\t\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\t\t\tservices\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(data.teamInvites?.length ?? 0) > 0 && (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t{data.teamInvites?.length}\n\t\t\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\t\t\tteam invited\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{industryLabel && <span>{industryLabel}</span>}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Quick Actions */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<span className=\"font-medium\">Get Started</span>\n\t\t\t\t<div className=\"grid gap-2 sm:grid-cols-2\">\n\t\t\t\t\t{QUICK_LINKS.map((link) => {\n\t\t\t\t\t\tconst Icon = link.icon;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={link.title}\n\t\t\t\t\t\t\t\thref={link.href}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex items-center gap-3 rounded-lg p-3 transition-colors\",\n\t\t\t\t\t\t\t\t\tlink.primary\n\t\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground hover:bg-primary/90\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">{link.title}</p>\n\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\tlink.primary\n\t\t\t\t\t\t\t\t\t\t\t\t? \"text-primary-foreground/80\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{link.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ArrowRight className=\"h-4 w-4 flex-shrink-0\" />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Support Resources */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<span className=\"font-medium\">Need Help?</span>\n\t\t\t\t<div className=\"grid gap-2 sm:grid-cols-2\">\n\t\t\t\t\t{RESOURCES.map((resource) => {\n\t\t\t\t\t\tconst Icon = resource.icon;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={resource.title}\n\t\t\t\t\t\t\t\thref={resource.href || \"#\"}\n\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\tresource.action === \"chat\"\n\t\t\t\t\t\t\t\t\t\t? (e) => e.preventDefault()\n\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-3 rounded-lg bg-muted/40 p-3 hover:bg-muted/60 transition-colors\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{resource.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{resource.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Pro Tips */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<Sparkles className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t<span className=\"font-medium\">Pro Tips</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{[\n\t\t\t\t\t\t\"Download the mobile app to manage jobs on the go\",\n\t\t\t\t\t\t\"Import existing customers via CSV (Settings → Import)\",\n\t\t\t\t\t\t\"Customize your estimate and invoice templates\",\n\t\t\t\t\t\t\"Connect QuickBooks or Google Calendar\",\n\t\t\t\t\t].map((tip, i) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName=\"flex items-start gap-2 text-sm text-muted-foreground\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Star className=\"h-4 w-4 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t<span>{tip}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Final CTA */}\n\t\t\t<div>\n\t\t\t\t<Button asChild className=\"w-full\">\n\t\t\t\t\t<a href=\"/dashboard\">\n\t\t\t\t\t\t<Rocket className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tGo to Dashboard\n\t\t\t\t\t</a>\n\t\t\t\t</Button>\n\t\t\t\t<p className=\"text-xs text-muted-foreground text-center mt-3\">\n\t\t\t\t\tAccess setup anytime from Settings → Onboarding\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Data Import Step - Import from Previous Software\n *\n * Based on competitor research (Housecall Pro, FieldPulse, ServiceTitan):\n * - Software migration selector with competitor-specific templates\n * - Customer data import (CSV/Excel)\n * - Price book/service catalog import\n * - Job history import (optional)\n * - Equipment/asset import\n *\n * Key insight: This dramatically reduces onboarding friction and\n * support calls - competitors offer dedicated data teams for this.\n */\n\nimport {\n\tAlertCircle,\n\tArrowRight,\n\tCalendar,\n\tCheckCircle2,\n\tClock,\n\tDollarSign,\n\tDownload,\n\tExternalLink,\n\tFileSpreadsheet,\n\tHelpCircle,\n\tPhone,\n\tSparkles,\n\tUpload,\n\tUsers,\n\tWrench,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport {\n\tAccordion,\n\tAccordionContent,\n\tAccordionItem,\n\tAccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\n// Competitor software options with export guides\nconst PREVIOUS_SOFTWARE = [\n\t{\n\t\tvalue: \"none\",\n\t\tlabel: \"Starting Fresh\",\n\t\tdescription: \"I don't have existing data to import\",\n\t\ticon: Sparkles,\n\t},\n\t{\n\t\tvalue: \"housecall-pro\",\n\t\tlabel: \"Housecall Pro\",\n\t\tdescription: \"Export via Settings > Data Export\",\n\t\texportGuide: \"https://help.housecallpro.com/en/articles/export-data\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\", \"price-book\"],\n\t},\n\t{\n\t\tvalue: \"jobber\",\n\t\tlabel: \"Jobber\",\n\t\tdescription: \"Export via Reports > Export Data\",\n\t\texportGuide: \"https://help.getjobber.com/hc/en-us/articles/export\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\", \"quotes\"],\n\t},\n\t{\n\t\tvalue: \"servicetitan\",\n\t\tlabel: \"ServiceTitan\",\n\t\tdescription: \"Contact support for data export\",\n\t\texportGuide: \"https://help.servicetitan.com/data-export\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\", \"price-book\", \"equipment\"],\n\t},\n\t{\n\t\tvalue: \"fieldedge\",\n\t\tlabel: \"FieldEdge\",\n\t\tdescription: \"Export via Admin > Data Management\",\n\t\texportGuide: \"https://help.fieldedge.com/export\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\"],\n\t},\n\t{\n\t\tvalue: \"workiz\",\n\t\tlabel: \"Workiz\",\n\t\tdescription: \"Export via Settings > Data Export\",\n\t\texportGuide: \"https://help.workiz.com/en/articles/export\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\", \"price-book\"],\n\t},\n\t{\n\t\tvalue: \"servicem8\",\n\t\tlabel: \"ServiceM8\",\n\t\tdescription: \"Export via Settings > Account > Export\",\n\t\texportGuide: \"https://support.servicem8.com/hc/export\",\n\t\ttemplates: [\"customers\", \"jobs\", \"invoices\"],\n\t},\n\t{\n\t\tvalue: \"quickbooks\",\n\t\tlabel: \"QuickBooks\",\n\t\tdescription: \"Export customer list and items\",\n\t\texportGuide: \"https://quickbooks.intuit.com/learn-support/export\",\n\t\ttemplates: [\"customers\", \"invoices\", \"price-book\"],\n\t},\n\t{\n\t\tvalue: \"spreadsheet\",\n\t\tlabel: \"Spreadsheets (Excel/Google Sheets)\",\n\t\tdescription: \"I have data in spreadsheets\",\n\t\ttemplates: [\"customers\", \"price-book\", \"equipment\"],\n\t},\n\t{\n\t\tvalue: \"other\",\n\t\tlabel: \"Other Software\",\n\t\tdescription: \"Another field service software\",\n\t\ttemplates: [\"customers\", \"price-book\"],\n\t},\n];\n\n// Import types with descriptions\nconst IMPORT_TYPES = [\n\t{\n\t\tid: \"customers\",\n\t\tlabel: \"Customer Data\",\n\t\tdescription:\n\t\t\t\"Names, addresses, phone numbers, emails, service history notes\",\n\t\ticon: Users,\n\t\tfields: [\n\t\t\t\"name\",\n\t\t\t\"email\",\n\t\t\t\"phone\",\n\t\t\t\"address\",\n\t\t\t\"city\",\n\t\t\t\"state\",\n\t\t\t\"zip\",\n\t\t\t\"notes\",\n\t\t],\n\t\tpriority: \"high\",\n\t\testimatedTime: \"2-5 min\",\n\t},\n\t{\n\t\tid: \"price-book\",\n\t\tlabel: \"Price Book / Services\",\n\t\tdescription: \"Your service catalog with pricing, labor rates, materials\",\n\t\ticon: DollarSign,\n\t\tfields: [\"service_name\", \"description\", \"price\", \"duration\", \"category\"],\n\t\tpriority: \"high\",\n\t\testimatedTime: \"2-5 min\",\n\t},\n\t{\n\t\tid: \"equipment\",\n\t\tlabel: \"Equipment / Assets\",\n\t\tdescription:\n\t\t\t\"Installed equipment at customer locations (HVAC units, water heaters, etc.)\",\n\t\ticon: Wrench,\n\t\tfields: [\"type\", \"brand\", \"model\", \"serial\", \"install_date\", \"customer_id\"],\n\t\tpriority: \"medium\",\n\t\testimatedTime: \"3-10 min\",\n\t},\n\t{\n\t\tid: \"jobs\",\n\t\tlabel: \"Job History\",\n\t\tdescription:\n\t\t\t\"Past jobs, service records, and notes (optional but valuable)\",\n\t\ticon: Calendar,\n\t\tfields: [\"customer\", \"date\", \"service\", \"technician\", \"notes\", \"amount\"],\n\t\tpriority: \"low\",\n\t\testimatedTime: \"5-15 min\",\n\t},\n];\n\n// Template download links (these would be real files)\nconst TEMPLATE_URLS: Record<string, string> = {\n\tcustomers: \"/templates/customer-import-template.xlsx\",\n\t\"price-book\": \"/templates/pricebook-import-template.xlsx\",\n\tequipment: \"/templates/equipment-import-template.xlsx\",\n\tjobs: \"/templates/job-history-import-template.xlsx\",\n};\n\ninterface ImportStatus {\n\ttype: string;\n\tstatus: \"pending\" | \"uploading\" | \"processing\" | \"complete\" | \"error\";\n\tprogress: number;\n\trecordCount?: number;\n\terrorMessage?: string;\n}\n\nexport function DataImportStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [importStatuses, setImportStatuses] = useState<\n\t\tRecord<string, ImportStatus>\n\t>({});\n\tconst [showExportGuide, setShowExportGuide] = useState(false);\n\n\tconst selectedSoftware = PREVIOUS_SOFTWARE.find(\n\t\t(s) => s.value === data.previousSoftware,\n\t);\n\tconst availableTemplates = selectedSoftware?.templates || [];\n\n\t// Handle software selection\n\tconst handleSoftwareSelect = (value: string) => {\n\t\tupdateData({ previousSoftware: value });\n\t\tsetShowExportGuide(value !== \"none\" && value !== \"spreadsheet\");\n\t};\n\n\t// Simulate file upload (in production, this would call an API)\n\tconst handleFileUpload = async (importType: string, file: File) => {\n\t\tsetImportStatuses((prev) => ({\n\t\t\t...prev,\n\t\t\t[importType]: { type: importType, status: \"uploading\", progress: 0 },\n\t\t}));\n\n\t\t// Simulate upload progress\n\t\tfor (let i = 0; i <= 100; i += 10) {\n\t\t\tawait new Promise((r) => setTimeout(r, 200));\n\t\t\tsetImportStatuses((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\t[importType]: { ...prev[importType], progress: i },\n\t\t\t}));\n\t\t}\n\n\t\t// Simulate processing\n\t\tsetImportStatuses((prev) => ({\n\t\t\t...prev,\n\t\t\t[importType]: {\n\t\t\t\t...prev[importType],\n\t\t\t\tstatus: \"processing\",\n\t\t\t\tprogress: 100,\n\t\t\t},\n\t\t}));\n\n\t\tawait new Promise((r) => setTimeout(r, 1500));\n\n\t\t// Complete with mock record count\n\t\tconst mockRecordCount = Math.floor(Math.random() * 200) + 20;\n\t\tsetImportStatuses((prev) => ({\n\t\t\t...prev,\n\t\t\t[importType]: {\n\t\t\t\t...prev[importType],\n\t\t\t\tstatus: \"complete\",\n\t\t\t\trecordCount: mockRecordCount,\n\t\t\t},\n\t\t}));\n\n\t\t// Update store with import status\n\t\tupdateData({\n\t\t\tdataImportCompleted: {\n\t\t\t\t...(data.dataImportCompleted || {}),\n\t\t\t\t[importType]: {\n\t\t\t\t\trecordCount: mockRecordCount,\n\t\t\t\t\timportedAt: new Date().toISOString(),\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t};\n\n\t// File input handler\n\tconst handleFileChange =\n\t\t(importType: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst file = e.target.files?.[0];\n\t\t\tif (file) {\n\t\t\t\thandleFileUpload(importType, file);\n\t\t\t}\n\t\t};\n\n\tconst completedImports = Object.values(importStatuses).filter(\n\t\t(s) => s.status === \"complete\",\n\t).length;\n\n\treturn (\n\t\t<div className=\"space-y-8\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"text-center space-y-3\">\n\t\t\t\t<h1 className=\"text-3xl font-semibold tracking-tight\">\n\t\t\t\t\tImport Your Existing Data\n\t\t\t\t</h1>\n\t\t\t\t<p className=\"text-muted-foreground text-lg max-w-lg mx-auto\">\n\t\t\t\t\tBring your customers, price book, and equipment with you. Don't start\n\t\t\t\t\tfrom scratch.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Previous Software Selection */}\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"text-lg flex items-center gap-2\">\n\t\t\t\t\t\t<FileSpreadsheet className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\tWhere is your data coming from?\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\tSelect your previous software and we'll provide export instructions\n\t\t\t\t\t\tand templates.\n\t\t\t\t\t</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={data.previousSoftware || \"\"}\n\t\t\t\t\t\tonValueChange={handleSoftwareSelect}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SelectTrigger className=\"w-full\">\n\t\t\t\t\t\t\t<SelectValue placeholder=\"Select your previous software...\" />\n\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t{PREVIOUS_SOFTWARE.map((software) => {\n\t\t\t\t\t\t\t\tconst Icon = software.icon || FileSpreadsheet;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<SelectItem key={software.value} value={software.value}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t<span>{software.label}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t</Select>\n\n\t\t\t\t\t{/* Export Guide for selected software */}\n\t\t\t\t\t{selectedSoftware &&\n\t\t\t\t\t\tselectedSoftware.value !== \"none\" &&\n\t\t\t\t\t\tselectedSoftware.exportGuide && (\n\t\t\t\t\t\t\t<div className=\"p-4 rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"p-2 rounded-full bg-blue-100 dark:bg-blue-900\">\n\t\t\t\t\t\t\t\t\t\t<HelpCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-blue-900 dark:text-blue-100\">\n\t\t\t\t\t\t\t\t\t\t\tHow to export from {selectedSoftware.label}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-700 dark:text-blue-300\">\n\t\t\t\t\t\t\t\t\t\t\t{selectedSoftware.description}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-auto p-0 text-blue-600\"\n\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={selectedSoftware.exportGuide}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tView export guide\n\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink className=\"ml-1 h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Starting fresh message */}\n\t\t\t\t\t{data.previousSoftware === \"none\" && (\n\t\t\t\t\t\t<div className=\"p-4 rounded-lg bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800\">\n\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5\" />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-green-900 dark:text-green-100\">\n\t\t\t\t\t\t\t\t\t\tGreat! Starting fresh\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300\">\n\t\t\t\t\t\t\t\t\t\tNo worries - you can add customers and services manually, or\n\t\t\t\t\t\t\t\t\t\timport data later from Settings &gt; Data Import.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Import Options - Only show if not starting fresh */}\n\t\t\t{data.previousSoftware && data.previousSoftware !== \"none\" && (\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<h2 className=\"text-lg font-medium\">Choose what to import</h2>\n\t\t\t\t\t\t{completedImports > 0 && (\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tclassName=\"bg-green-100 text-green-800\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{completedImports} import{completedImports !== 1 && \"s\"}{\" \"}\n\t\t\t\t\t\t\t\tcomplete\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"grid gap-4\">\n\t\t\t\t\t\t{IMPORT_TYPES.map((importType) => {\n\t\t\t\t\t\t\tconst Icon = importType.icon;\n\t\t\t\t\t\t\tconst isAvailable = availableTemplates.includes(importType.id);\n\t\t\t\t\t\t\tconst status = importStatuses[importType.id];\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\tkey={importType.id}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"transition-all\",\n\t\t\t\t\t\t\t\t\t\t!isAvailable && \"opacity-50\",\n\t\t\t\t\t\t\t\t\t\tstatus?.status === \"complete\" &&\n\t\t\t\t\t\t\t\t\t\t\t\"border-green-500 bg-green-50/50 dark:bg-green-950/20\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CardContent className=\"p-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"p-2 rounded-lg\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tstatus?.status === \"complete\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 dark:bg-green-900\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{status?.status === \"complete\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"font-medium\">{importType.label}</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\timportType.priority === \"high\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"border-orange-300 text-orange-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: importType.priority === \"medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"border-blue-300 text-blue-700\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300 text-gray-600\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{importType.priority === \"high\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Recommended\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Optional\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{importType.description}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Upload progress */}\n\t\t\t\t\t\t\t\t\t\t\t\t{status && status.status !== \"complete\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 space-y-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Progress value={status.progress} className=\"h-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{status.status === \"uploading\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `Uploading... ${status.progress}%`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Processing your data...\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Success message */}\n\t\t\t\t\t\t\t\t\t\t\t\t{status?.status === \"complete\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 flex items-center gap-2 text-sm text-green-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{status.recordCount} records imported successfully\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Download template */}\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!isAvailable}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={TEMPLATE_URLS[importType.id]} download>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Download className=\"h-3.5 w-3.5 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Upload file */}\n\t\t\t\t\t\t\t\t\t\t\t\t{isAvailable && status?.status !== \"complete\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taccept=\".csv,.xlsx,.xls\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleFileChange(importType.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus?.status === \"uploading\" ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus?.status === \"processing\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus?.status === \"uploading\" ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus?.status === \"processing\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Upload className=\"h-3.5 w-3.5 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tUpload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{/* Field reference */}\n\t\t\t\t\t\t\t\t\t\t<Accordion type=\"single\" collapsible className=\"mt-3\">\n\t\t\t\t\t\t\t\t\t\t\t<AccordionItem value=\"fields\" className=\"border-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<AccordionTrigger className=\"text-xs text-muted-foreground py-2 hover:no-underline\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tView expected fields\n\t\t\t\t\t\t\t\t\t\t\t\t</AccordionTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t<AccordionContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-1.5 pt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{importType.fields.map((field) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs font-mono\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</AccordionContent>\n\t\t\t\t\t\t\t\t\t\t\t</AccordionItem>\n\t\t\t\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Need Help CTA */}\n\t\t\t<Card className=\"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20\">\n\t\t\t\t<CardContent className=\"p-6\">\n\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t<div className=\"p-3 rounded-full bg-primary/10\">\n\t\t\t\t\t\t\t<Phone className=\"h-6 w-6 text-primary\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<h3 className=\"font-semibold\">Need help migrating your data?</h3>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tOur team can help you export and import your data from any\n\t\t\t\t\t\t\t\tsystem. Schedule a free 30-minute data migration call.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button variant=\"outline\">\n\t\t\t\t\t\t\tSchedule Call\n\t\t\t\t\t\t\t<ArrowRight className=\"ml-2 h-4 w-4\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Time estimate */}\n\t\t\t<div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n\t\t\t\t<Clock className=\"h-4 w-4\" />\n\t\t\t\t<span>\n\t\t\t\t\t{data.previousSoftware === \"none\"\n\t\t\t\t\t\t? \"You can skip this step and import data later\"\n\t\t\t\t\t\t: \"Most imports complete in under 5 minutes\"}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n","\"use client\";\n\n/**\n * Email Setup Step - Domain Verification Flow\n *\n * Options:\n * 1. Platform Domain (instant) - Send from {company}.mail.stratos.app\n * 2. Custom Domain (requires DNS) - Send from yourcompany.com\n * 3. Gmail/Outlook OAuth - Use existing provider\n * 4. Skip - Use platform domain later\n */\n\nimport {\n\tAlertTriangle,\n\tCheck,\n\tCheckCircle2,\n\tClock,\n\tCopy,\n\tExternalLink,\n\tGlobe,\n\tLoader2,\n\tMail,\n\tShield,\n\tSkipForward,\n\tZap,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { DNSVerificationTracker } from \"@/components/onboarding/status-tracking/dns-verification-tracker\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tformatCurrency,\n\tGMAIL_WORKSPACE_PER_USER_FEE,\n} from \"@/lib/onboarding/onboarding-fees\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype EmailSetupOption =\n\t| \"platform\"\n\t| \"custom-domain\"\n\t| \"gmail\"\n\t| \"outlook\"\n\t| \"skip\";\n\nconst SETUP_OPTIONS: {\n\tid: EmailSetupOption;\n\ttitle: string;\n\tsubtitle: string;\n\ticon: React.ElementType;\n\tbadge?: string;\n\tpricing?: string;\n}[] = [\n\t{\n\t\tid: \"platform\",\n\t\ttitle: \"Quick Setup\",\n\t\tsubtitle: \"Ready instantly, no DNS needed\",\n\t\ticon: Zap,\n\t\tbadge: \"Recommended\",\n\t},\n\t{\n\t\tid: \"custom-domain\",\n\t\ttitle: \"Custom Domain\",\n\t\tsubtitle: \"Send from yourcompany.com\",\n\t\ticon: Globe,\n\t},\n\t{\n\t\tid: \"gmail\",\n\t\ttitle: \"Connect Gmail\",\n\t\tsubtitle: \"Google Workspace sync\",\n\t\ticon: Mail,\n\t\tpricing: `${formatCurrency(GMAIL_WORKSPACE_PER_USER_FEE)}/user/month`,\n\t},\n\t{\n\t\tid: \"outlook\",\n\t\ttitle: \"Connect Outlook\",\n\t\tsubtitle: \"Microsoft 365 sync\",\n\t\ticon: Mail,\n\t},\n\t{\n\t\tid: \"skip\",\n\t\ttitle: \"Set up later\",\n\t\tsubtitle: \"Configure in Settings\",\n\t\ticon: SkipForward,\n\t},\n];\n\n// Blocked domains that can't be used\nconst BLOCKED_DOMAINS = [\n\t\"gmail.com\",\n\t\"yahoo.com\",\n\t\"hotmail.com\",\n\t\"outlook.com\",\n\t\"live.com\",\n\t\"aol.com\",\n\t\"icloud.com\",\n\t\"protonmail.com\",\n\t\"mail.com\",\n];\n\nexport function EmailStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [domainInput, setDomainInput] = useState(data.customDomain || \"\");\n\tconst [domainError, setDomainError] = useState<string | null>(null);\n\tconst [isValidating, setIsValidating] = useState(false);\n\tconst [copied, setCopied] = useState<string | null>(null);\n\n\t// Generate company slug for platform domain\n\tconst companySlug =\n\t\tdata.companyName\n\t\t\t?.toLowerCase()\n\t\t\t.replace(/[^a-z0-9]/g, \"-\")\n\t\t\t.replace(/-+/g, \"-\")\n\t\t\t.replace(/^-|-$/g, \"\") || \"yourcompany\";\n\n\tconst platformEmail = `notifications@${companySlug}.mail.stratos.app`;\n\n\tconst validateDomain = (domain: string): boolean => {\n\t\tsetDomainError(null);\n\n\t\tif (!domain) {\n\t\t\tsetDomainError(\"Domain is required\");\n\t\t\treturn false;\n\t\t}\n\n\t\t// Normalize\n\t\tconst normalized = domain\n\t\t\t.toLowerCase()\n\t\t\t.trim()\n\t\t\t.replace(/^https?:\\/\\//, \"\")\n\t\t\t.replace(/^www\\./, \"\");\n\n\t\t// Check format\n\t\tconst domainRegex =\n\t\t\t/^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*\\.[a-z]{2,}$/;\n\t\tif (!domainRegex.test(normalized)) {\n\t\t\tsetDomainError(\"Invalid domain format. Example: yourcompany.com\");\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check blocked domains\n\t\tif (\n\t\t\tBLOCKED_DOMAINS.some(\n\t\t\t\t(blocked) =>\n\t\t\t\t\tnormalized === blocked || normalized.endsWith(`.${blocked}`),\n\t\t\t)\n\t\t) {\n\t\t\tsetDomainError(\n\t\t\t\t\"Public email domains (Gmail, Yahoo, etc.) cannot be used. Please enter your company's domain.\",\n\t\t\t);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tconst handleDomainSubmit = async () => {\n\t\tconst normalized = domainInput\n\t\t\t.toLowerCase()\n\t\t\t.trim()\n\t\t\t.replace(/^https?:\\/\\//, \"\")\n\t\t\t.replace(/^www\\./, \"\");\n\n\t\tif (!validateDomain(normalized)) return;\n\n\t\tsetIsValidating(true);\n\n\t\t// Simulate API call to create domain in Resend\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1000));\n\n\t\tupdateData({\n\t\t\tcustomDomain: normalized,\n\t\t\tdnsVerified: false,\n\t\t\temailSetupType: \"custom-domain\",\n\t\t});\n\t\tsetIsValidating(false);\n\t};\n\n\tconst handleCopy = async (text: string, id: string) => {\n\t\tawait navigator.clipboard.writeText(text);\n\t\tsetCopied(id);\n\t\tsetTimeout(() => setCopied(null), 2000);\n\t};\n\n\t// Mock DNS records (these would come from Resend API in production)\n\tconst dnsRecords = data.customDomain\n\t\t? [\n\t\t\t\t{\n\t\t\t\t\tid: \"spf\",\n\t\t\t\t\ttype: \"TXT\",\n\t\t\t\t\tname: data.customDomain,\n\t\t\t\t\tvalue: \"v=spf1 include:amazonses.com ~all\",\n\t\t\t\t\tpurpose: \"SPF - Authorizes sending\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"dkim1\",\n\t\t\t\t\ttype: \"CNAME\",\n\t\t\t\t\tname: `resend._domainkey.${data.customDomain}`,\n\t\t\t\t\tvalue: \"resend.domainkey.resend.dev\",\n\t\t\t\t\tpurpose: \"DKIM - Email signing\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"dmarc\",\n\t\t\t\t\ttype: \"TXT\",\n\t\t\t\t\tname: `_dmarc.${data.customDomain}`,\n\t\t\t\t\tvalue: \"v=DMARC1; p=none;\",\n\t\t\t\t\tpurpose: \"DMARC - Policy\",\n\t\t\t\t},\n\t\t\t]\n\t\t: [];\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Email setup</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tChoose how invoices and notifications are sent to customers.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Why email setup matters */}\n\t\t\t{!data.emailSetupType && (\n\t\t\t\t<div className=\"rounded-lg border bg-primary/5 p-4\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Shield className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Why does this matter?</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tEmails from your own domain (e.g., yourcompany.com) have better\n\t\t\t\t\t\t\t\tdeliverability and look more professional than generic\n\t\t\t\t\t\t\t\taddresses. Customers are more likely to open emails from a\n\t\t\t\t\t\t\t\tfamiliar sender.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Setup Options */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"grid gap-3\">\n\t\t\t\t\t{SETUP_OPTIONS.map((option) => {\n\t\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\t\tconst isSelected = data.emailSetupType === option.id;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tupdateData({ emailSetupType: option.id });\n\t\t\t\t\t\t\t\t\tif (option.id !== \"custom-domain\") {\n\t\t\t\t\t\t\t\t\t\tsetDomainError(null);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Reset Gmail user count if switching away from Gmail\n\t\t\t\t\t\t\t\t\tif (option.id !== \"gmail\") {\n\t\t\t\t\t\t\t\t\t\tupdateData({ gmailWorkspaceUsers: 0 });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex items-center gap-4 rounded-lg p-4 text-left transition-all\",\n\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-2 ring-primary\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{option.badge && (\n\t\t\t\t\t\t\t\t\t<span className=\"absolute top-2 right-2 text-[10px] font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t{option.badge}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isSelected && !option.badge && (\n\t\t\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full flex-shrink-0\",\n\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{option.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{option.subtitle}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{option.pricing && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-primary mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t{option.pricing}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Platform Domain - Instant Setup */}\n\t\t\t{data.emailSetupType === \"platform\" && (\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 space-y-3\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t\t<span className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\t\tReady to use immediately\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tEmails will be sent from:\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<code className=\"block text-sm bg-background/50 p-3 rounded font-mono\">\n\t\t\t\t\t\t\t{platformEmail}\n\t\t\t\t\t\t</code>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"replyToEmail\">Reply-To Email (optional)</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"replyToEmail\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder=\"you@yourcompany.com\"\n\t\t\t\t\t\t\tvalue={data.companyEmail}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ companyEmail: e.target.value })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\tCustomer replies go to this address. You can upgrade to a custom\n\t\t\t\t\t\t\tdomain anytime.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Custom Domain Configuration */}\n\t\t\t{data.emailSetupType === \"custom-domain\" && (\n\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t{/* Domain Input */}\n\t\t\t\t\t{!data.customDomain ? (\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Time estimate warning */}\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20\">\n\t\t\t\t\t\t\t\t<Clock className=\"h-4 w-4 text-amber-600 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-amber-700 dark:text-amber-400\">\n\t\t\t\t\t\t\t\t\tDNS verification takes <strong>15 minutes to 48 hours</strong>{\" \"}\n\t\t\t\t\t\t\t\t\tdepending on your provider. You can continue setup and verify\n\t\t\t\t\t\t\t\t\tlater.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label htmlFor=\"customDomain\">Your Domain</Label>\n\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tid=\"customDomain\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"yourcompany.com\"\n\t\t\t\t\t\t\t\t\t\tvalue={domainInput}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tsetDomainInput(e.target.value);\n\t\t\t\t\t\t\t\t\t\t\tsetDomainError(null);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName={domainError ? \"border-destructive\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleDomainSubmit}\n\t\t\t\t\t\t\t\t\t\tdisabled={!domainInput || isValidating}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{isValidating ? (\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\"Verify\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{domainError && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-destructive flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<AlertTriangle className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t{domainError}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tEnter the domain you own (not Gmail, Yahoo, etc.)\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* DNS Setup Guide */}\n\t\t\t\t\t\t\t<div className=\"rounded-lg border bg-muted/30\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full flex items-center justify-between p-4 text-left\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst content = e.currentTarget\n\t\t\t\t\t\t\t\t\t\t\t.nextElementSibling as HTMLElement;\n\t\t\t\t\t\t\t\t\t\tif (content) {\n\t\t\t\t\t\t\t\t\t\t\tcontent.classList.toggle(\"hidden\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\tHow to add DNS records\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tShow guide\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div className=\"hidden px-4 pb-4\">\n\t\t\t\t\t\t\t\t\t<ol className=\"space-y-3 text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t<li className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-primary/10 text-xs font-medium text-primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tLog in to your domain provider\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCommon providers: GoDaddy, Namecheap, Cloudflare,\n\t\t\t\t\t\t\t\t\t\t\t\t\tGoogle Domains\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-primary/10 text-xs font-medium text-primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tFind DNS settings\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\tLook for \"DNS\", \"DNS Management\", or \"Name Servers\"\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-primary/10 text-xs font-medium text-primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tAdd the records we provide\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCopy each record exactly as shown (TXT and CNAME\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypes)\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li className=\"flex gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-primary/10 text-xs font-medium text-primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tWait for propagation\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\tChanges can take 15 minutes to 48 hours to take effect\n\t\t\t\t\t\t\t\t\t\t\t\t\tworldwide\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t\t\t<div className=\"mt-4 p-3 bg-background rounded\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tNeed help? Contact support with your domain provider name\n\t\t\t\t\t\t\t\t\t\t\tand we'll guide you through the process.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex items-start gap-3 text-sm text-muted-foreground bg-muted/40 rounded-lg p-4\">\n\t\t\t\t\t\t\t\t<Shield className=\"h-5 w-5 flex-shrink-0 text-primary mt-0.5\" />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\t\tDomain verification required\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tYou'll need to add DNS records to prove you own this domain.\n\t\t\t\t\t\t\t\t\t\tThis ensures only you can send emails from it.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t/* DNS Verification Tracker */\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{data.customDomain}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tVerifying DNS records\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tupdateData({ customDomain: \"\", dnsVerified: false })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tChange\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<DNSVerificationTracker\n\t\t\t\t\t\t\t\tdomain={data.customDomain}\n\t\t\t\t\t\t\t\trecords={dnsRecords}\n\t\t\t\t\t\t\t\tonVerificationComplete={() => {\n\t\t\t\t\t\t\t\t\tupdateData({ dnsVerified: true });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* OAuth Options */}\n\t\t\t{(data.emailSetupType === \"gmail\" ||\n\t\t\t\tdata.emailSetupType === \"outlook\") && (\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-4 space-y-3\">\n\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\tConnect your{\" \"}\n\t\t\t\t\t\t\t{data.emailSetupType === \"gmail\"\n\t\t\t\t\t\t\t\t? \"Google Workspace\"\n\t\t\t\t\t\t\t\t: \"Microsoft 365\"}{\" \"}\n\t\t\t\t\t\t\taccount to send emails directly from your business email.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t<Shield className=\"h-4 w-4\" />\n\t\t\t\t\t\t\tWe use OAuth - we never see your password\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Gmail User Count */}\n\t\t\t\t\t{data.emailSetupType === \"gmail\" && (\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"gmailUserCount\">\n\t\t\t\t\t\t\t\tNumber of users needing Gmail access\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"gmailUserCount\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tplaceholder=\"e.g., 5\"\n\t\t\t\t\t\t\t\tvalue={data.gmailWorkspaceUsers || \"\"}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst count = parseInt(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\tupdateData({ gmailWorkspaceUsers: count });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"w-[150px]\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t{data.gmailWorkspaceUsers > 0\n\t\t\t\t\t\t\t\t\t? `Monthly cost: ${formatCurrency(data.gmailWorkspaceUsers * GMAIL_WORKSPACE_PER_USER_FEE)}`\n\t\t\t\t\t\t\t\t\t: \"Enter number of users who need Gmail Workspace access\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Button className=\"w-full\">\n\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tConnect {data.emailSetupType === \"gmail\" ? \"Google\" : \"Microsoft\"}{\" \"}\n\t\t\t\t\t\tAccount\n\t\t\t\t\t</Button>\n\t\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t\tRequires{\" \"}\n\t\t\t\t\t\t{data.emailSetupType === \"gmail\"\n\t\t\t\t\t\t\t? \"Google Workspace\"\n\t\t\t\t\t\t\t: \"Microsoft 365\"}{\" \"}\n\t\t\t\t\t\tadmin access\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Skip Note */}\n\t\t\t{data.emailSetupType === \"skip\" && (\n\t\t\t\t<div className=\"flex items-start gap-3 text-sm text-muted-foreground bg-muted/40 rounded-lg p-4\">\n\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 flex-shrink-0 text-amber-500\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium text-foreground\">Using default sender</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tEmails will be sent from our platform domain. You can configure a\n\t\t\t\t\t\t\tcustom domain later in Settings → Email.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * DNS Verification Tracker\n *\n * Comprehensive tracking for DNS verification (can take up to 48 hours)\n * - Polls DNS every 60 seconds to check verification\n * - Shows which records are verified\n * - Educational content on DNS propagation\n * - Troubleshooting help\n * - Provider-specific instructions\n */\n\nimport {\n\tAlertCircle,\n\tCheck,\n\tCheckCircle2,\n\tClock,\n\tCopy,\n\tExternalLink,\n\tGlobe,\n\tInfo,\n\tLoader2,\n\tRefreshCw,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface DNSRecord {\n\tid: string;\n\ttype: string;\n\tname: string;\n\tvalue: string;\n\tpurpose: string;\n\tverified?: boolean;\n}\n\ninterface DNSVerificationTrackerProps {\n\tdomain: string;\n\trecords: DNSRecord[];\n\tonVerificationComplete?: () => void;\n}\n\nexport function DNSVerificationTracker({\n\tdomain,\n\trecords: initialRecords,\n\tonVerificationComplete,\n}: DNSVerificationTrackerProps) {\n\tconst [records, setRecords] = useState(initialRecords);\n\tconst [copied, setCopied] = useState<string | null>(null);\n\tconst [isChecking, setIsChecking] = useState(false);\n\tconst [lastChecked, setLastChecked] = useState<Date | null>(null);\n\tconst [timeElapsed, setTimeElapsed] = useState(0);\n\tconst [isPolling, setIsPolling] = useState(true);\n\n\tconst verifiedCount = records.filter((r) => r.verified).length;\n\tconst allVerified = verifiedCount === records.length;\n\n\t// Poll DNS every 60 seconds\n\tuseEffect(() => {\n\t\tif (!isPolling || allVerified) return;\n\n\t\tconst checkDNS = async () => {\n\t\t\tsetIsChecking(true);\n\t\t\ttry {\n\t\t\t\t// Call server action to verify DNS\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`/api/email/verify-dns?domain=${encodeURIComponent(domain)}`,\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tif (data.success && data.records) {\n\t\t\t\t\tsetRecords((prev) =>\n\t\t\t\t\t\tprev.map((record) => {\n\t\t\t\t\t\t\tconst verified = data.records.find(\n\t\t\t\t\t\t\t\t(r: any) => r.id === record.id,\n\t\t\t\t\t\t\t)?.verified;\n\t\t\t\t\t\t\treturn { ...record, verified };\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t\tsetLastChecked(new Date());\n\n\t\t\t\t\t// Stop polling if all verified\n\t\t\t\t\tif (data.allVerified) {\n\t\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\t\tonVerificationComplete?.();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"DNS check failed:\", err);\n\t\t\t} finally {\n\t\t\t\tsetIsChecking(false);\n\t\t\t}\n\t\t};\n\n\t\t// Initial check\n\t\tcheckDNS();\n\n\t\t// Check every 60 seconds\n\t\tconst interval = setInterval(checkDNS, 60000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [domain, isPolling, allVerified, onVerificationComplete]);\n\n\t// Track time elapsed\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => {\n\t\t\tsetTimeElapsed((t) => t + 1);\n\t\t}, 60000); // Update every minute\n\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\tconst handleCopy = async (text: string, id: string) => {\n\t\tawait navigator.clipboard.writeText(text);\n\t\tsetCopied(id);\n\t\tsetTimeout(() => setCopied(null), 2000);\n\t};\n\n\tconst handleManualCheck = async () => {\n\t\tsetIsChecking(true);\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/email/verify-dns?domain=${encodeURIComponent(domain)}`,\n\t\t\t);\n\t\t\tconst data = await response.json();\n\n\t\t\tif (data.success && data.records) {\n\t\t\t\tsetRecords((prev) =>\n\t\t\t\t\tprev.map((record) => {\n\t\t\t\t\t\tconst verified = data.records.find(\n\t\t\t\t\t\t\t(r: any) => r.id === record.id,\n\t\t\t\t\t\t)?.verified;\n\t\t\t\t\t\treturn { ...record, verified };\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tsetLastChecked(new Date());\n\n\t\t\t\tif (data.allVerified) {\n\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\tonVerificationComplete?.();\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Manual DNS check failed:\", err);\n\t\t} finally {\n\t\t\tsetIsChecking(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Status Header */}\n\t\t\t<div className=\"rounded-lg bg-muted/40 p-6 space-y-4\">\n\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t{allVerified ? (\n\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-green-500/10\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-6 w-6 text-green-500\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-amber-500/10 animate-pulse\">\n\t\t\t\t\t\t\t<Clock className=\"h-6 w-6 text-amber-500\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">\n\t\t\t\t\t\t\t{allVerified ? \"DNS Verified!\" : \"Waiting for DNS Propagation\"}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t{allVerified\n\t\t\t\t\t\t\t\t? `Your domain ${domain} is ready to send emails`\n\t\t\t\t\t\t\t\t: `${verifiedCount} of ${records.length} records verified`}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{lastChecked && (\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-2\">\n\t\t\t\t\t\t\t\tLast checked: {lastChecked.toLocaleTimeString()}\n\t\t\t\t\t\t\t\t{isPolling && !allVerified && \" • Checking every 60 seconds...\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Progress Bar */}\n\t\t\t\t{!allVerified && (\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"h-full bg-primary transition-all duration-500\"\n\t\t\t\t\t\t\t\tstyle={{ width: `${(verifiedCount / records.length) * 100}%` }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t\t\t{Math.round((verifiedCount / records.length) * 100)}% complete\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Manual Check Button */}\n\t\t\t{!allVerified && (\n\t\t\t\t<Button\n\t\t\t\t\tonClick={handleManualCheck}\n\t\t\t\t\tdisabled={isChecking}\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t>\n\t\t\t\t\t{isChecking ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\tChecking DNS...\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<RefreshCw className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tCheck Now\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Button>\n\t\t\t)}\n\n\t\t\t{/* DNS Records */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<h4 className=\"text-sm font-medium\">DNS Records</h4>\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{records.map((record) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={record.id}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"rounded-lg p-4 space-y-3 transition-colors\",\n\t\t\t\t\t\t\t\trecord.verified\n\t\t\t\t\t\t\t\t\t? \"bg-green-500/10 ring-1 ring-green-500/20\"\n\t\t\t\t\t\t\t\t\t: \"bg-muted/40\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t{record.verified ? (\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-5 w-5 text-amber-500\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{record.type} - {record.purpose}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tclassName=\"h-7 px-2\"\n\t\t\t\t\t\t\t\t\tonClick={() => handleCopy(record.value, record.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{copied === record.id ? (\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"text-xs space-y-1 font-mono\">\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-1\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Name:</span>\n\t\t\t\t\t\t\t\t\t<code className=\"bg-background px-2 py-1 rounded break-all\">\n\t\t\t\t\t\t\t\t\t\t{record.name}\n\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-1\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Value:</span>\n\t\t\t\t\t\t\t\t\t<code className=\"bg-background px-2 py-1 rounded break-all\">\n\t\t\t\t\t\t\t\t\t\t{record.value}\n\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{record.verified && (\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-400 font-medium\">\n\t\t\t\t\t\t\t\t\t✓ Verified successfully\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Timeline Info */}\n\t\t\t{!allVerified && (\n\t\t\t\t<div className=\"rounded-lg bg-blue-500/10 p-4 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Globe className=\"h-5 w-5 text-blue-500\" />\n\t\t\t\t\t\t<span className=\"font-medium\">DNS Propagation Timeline</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-2 text-sm text-muted-foreground\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong>5 minutes:</strong> Most records verify this quickly if\n\t\t\t\t\t\t\tconfigured correctly\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong>1-2 hours:</strong> Common propagation time for slower DNS\n\t\t\t\t\t\t\tproviders\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong>Up to 48 hours:</strong> Maximum time in rare cases\n\t\t\t\t\t\t\t(usually much faster)\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t{timeElapsed > 0 && (\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\tTime elapsed: {timeElapsed} minute{timeElapsed !== 1 ? \"s\" : \"\"}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Instructions */}\n\t\t\t{!allVerified && (\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<h4 className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t<Info className=\"h-4 w-4\" />\n\t\t\t\t\t\tHow to Add DNS Records\n\t\t\t\t\t</h4>\n\n\t\t\t\t\t<div className=\"space-y-3 text-sm text-muted-foreground\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">1</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tLog into your domain registrar or DNS provider (where you bought{\" \"}\n\t\t\t\t\t\t\t\t{domain})\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">2</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>Find the DNS settings, DNS management, or Zone file section</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">3</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tAdd each record above exactly as shown (copy/paste the values)\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">4</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tSave your changes and wait. We'll automatically detect when\n\t\t\t\t\t\t\t\trecords are live.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Provider-Specific Help */}\n\t\t\t{!allVerified && (\n\t\t\t\t<div className=\"rounded-lg border border-muted p-4 space-y-3\">\n\t\t\t\t\t<p className=\"text-sm font-medium\">Need help finding DNS settings?</p>\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-2\">\n\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" className=\"justify-start\">\n\t\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-3 w-3\" />\n\t\t\t\t\t\t\tGoDaddy\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" className=\"justify-start\">\n\t\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-3 w-3\" />\n\t\t\t\t\t\t\tNamecheap\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" className=\"justify-start\">\n\t\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-3 w-3\" />\n\t\t\t\t\t\t\tCloudflare\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" className=\"justify-start\">\n\t\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-3 w-3\" />\n\t\t\t\t\t\t\tGoogle Domains\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Troubleshooting */}\n\t\t\t{!allVerified && timeElapsed > 30 && (\n\t\t\t\t<div className=\"rounded-lg bg-amber-500/10 p-4 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\tTaking longer than expected?\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ul className=\"text-sm text-muted-foreground mt-2 space-y-1 list-disc ml-4\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tDouble-check that you copied the values exactly (no extra\n\t\t\t\t\t\t\t\t\tspaces)\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tMake sure you selected the correct record type (TXT vs CNAME)\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tSome providers need you to use @ instead of the full domain\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tTry refreshing your DNS provider's page and checking if\n\t\t\t\t\t\t\t\t\trecords saved\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Success Message */}\n\t\t\t{allVerified && (\n\t\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 space-y-2\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t<span className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\tDomain verified successfully!\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tYou can now send emails from {domain}. All notifications and\n\t\t\t\t\t\tinvoices will use this domain.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/**\n * Onboarding Fees & Pricing Configuration\n *\n * Defines all fees, add-on pricing, and cost calculations for the onboarding flow.\n * Used to calculate upfront costs and monthly recurring charges based on\n * contractor selections during onboarding.\n *\n * Pricing Structure:\n * - Phone Porting: $15 one-time per number\n * - New Phone Number: $5 one-time + $2/month per number\n * - Gmail Workspace: $6/user/month (Google Workspace passthrough)\n * - Profit Rhino: $149/month (flat rate add-on)\n * - Base Platform: $200/month (existing)\n *\n * Payment Flow:\n * 1. Collect payment method during onboarding\n * 2. Start 14-day free trial\n * 3. Charge upfront fees immediately (porting + new number setup)\n * 4. Charge monthly fees at end of trial (recurring charges)\n *\n * @see /docs/billing/ONBOARDING_PAYMENT_FLOW.md\n */\n\n// =============================================================================\n// ONE-TIME FEES\n// =============================================================================\n\n/**\n * Phone number porting fee (per number)\n * One-time charge when contractor ports existing phone number from another carrier\n */\nexport const PHONE_PORTING_FEE = 15.0;\n\n/**\n * New phone number setup fee (per number)\n * One-time charge when contractor gets a new phone number from Twilio\n */\nexport const PHONE_NEW_NUMBER_SETUP_FEE = 5.0;\n\n// =============================================================================\n// MONTHLY RECURRING FEES\n// =============================================================================\n\n/**\n * Base platform fee (per company)\n * Includes: CRM, scheduling, unlimited users, base communication features\n */\nexport const BASE_PLATFORM_FEE = 200.0;\n\n/**\n * New phone number monthly fee (per number)\n * Recurring charge for each phone number provisioned through Twilio\n */\nexport const PHONE_NEW_NUMBER_MONTHLY_FEE = 2.0;\n\n/**\n * Gmail Workspace fee (per user per month)\n * Passthrough of Google Workspace Business Starter cost ($6/user/month)\n * Includes: Gmail, Google Drive (30GB), Calendar, Meet\n */\nexport const GMAIL_WORKSPACE_PER_USER_FEE = 6.0;\n\n/**\n * Profit Rhino flat rate pricing add-on (per month)\n * Customer financing platform with prebuilt price books\n * Includes: Flat rate price book, quarterly updates, financing options\n *\n * @see https://profitrhino.com/\n */\nexport const PROFIT_RHINO_MONTHLY_FEE = 149.0;\n\n// =============================================================================\n// STRIPE PRICE ID MAPPINGS\n// =============================================================================\n\n/**\n * Stripe Price IDs for onboarding charges\n * These must match the price IDs created in Stripe Dashboard\n *\n * To create these prices:\n * 1. Go to Stripe Dashboard → Products\n * 2. Create products for each item below\n * 3. Create prices (one-time or recurring as noted)\n * 4. Copy price IDs and set in environment variables\n * 5. Update this mapping\n *\n * @see /docs/billing/STRIPE_SETUP.md\n */\nexport const STRIPE_PRICE_IDS = {\n\t// One-time charges\n\tPHONE_PORTING: process.env.STRIPE_PRICE_ID_PHONE_PORTING || \"\",\n\tPHONE_NEW_NUMBER_SETUP:\n\t\tprocess.env.STRIPE_PRICE_ID_PHONE_NEW_NUMBER_SETUP || \"\",\n\n\t// Monthly recurring charges\n\tBASE_PLAN: process.env.STRIPE_PRICE_ID_BASE_PLAN || \"\",\n\tPHONE_NEW_NUMBER_MONTHLY:\n\t\tprocess.env.STRIPE_PRICE_ID_PHONE_NEW_NUMBER_MONTHLY || \"\",\n\tGMAIL_WORKSPACE_PER_USER:\n\t\tprocess.env.STRIPE_PRICE_ID_GMAIL_WORKSPACE_PER_USER || \"\",\n\tPROFIT_RHINO: process.env.STRIPE_PRICE_ID_PROFIT_RHINO || \"\",\n} as const;\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\n/**\n * Onboarding selections that affect billing\n */\nexport interface OnboardingBillingSelections {\n\t/** Number of phone numbers being ported from another carrier */\n\tphonePortingCount: number;\n\n\t/** Number of new phone numbers being purchased */\n\tnewPhoneNumberCount: number;\n\n\t/** Number of users who need Gmail Workspace access */\n\tgmailWorkspaceUsers: number;\n\n\t/** Whether Profit Rhino financing add-on is enabled */\n\tprofitRhinoEnabled: boolean;\n}\n\n/**\n * Calculated costs breakdown\n */\nexport interface OnboardingCostBreakdown {\n\t/** One-time upfront charges (charged immediately) */\n\toneTime: {\n\t\tphonePorting: number;\n\t\tphoneSetup: number;\n\t\ttotal: number;\n\t};\n\n\t/** Monthly recurring charges (charged after 14-day trial) */\n\tmonthly: {\n\t\tbasePlatform: number;\n\t\tphoneNumbers: number;\n\t\tgmailWorkspace: number;\n\t\tprofitRhino: number;\n\t\ttotal: number;\n\t};\n\n\t/** Grand total of first month (upfront + monthly after trial) */\n\tfirstMonthTotal: number;\n}\n\n/**\n * Stripe subscription items for onboarding\n */\nexport interface StripeSubscriptionItem {\n\tprice: string; // Stripe price ID\n\tquantity?: number; // For per-user or per-number charges\n}\n\n// =============================================================================\n// COST CALCULATION FUNCTIONS\n// =============================================================================\n\n/**\n * Calculate all onboarding costs based on contractor selections\n *\n * @param selections - Contractor's choices during onboarding\n * @returns Detailed cost breakdown\n *\n * @example\n * const selections = {\n *   phonePortingCount: 1,\n *   newPhoneNumberCount: 1,\n *   gmailWorkspaceUsers: 5,\n *   profitRhinoEnabled: true\n * };\n *\n * const costs = calculateOnboardingCosts(selections);\n * console.log(costs.oneTime.total); // $20 ($15 porting + $5 setup)\n * console.log(costs.monthly.total); // $381 ($200 + $2 + $30 + $149)\n */\nexport function calculateOnboardingCosts(\n\tselections: OnboardingBillingSelections,\n): OnboardingCostBreakdown {\n\t// Calculate one-time charges\n\tconst phonePortingCost = selections.phonePortingCount * PHONE_PORTING_FEE;\n\tconst phoneSetupCost =\n\t\tselections.newPhoneNumberCount * PHONE_NEW_NUMBER_SETUP_FEE;\n\tconst oneTimeTotal = phonePortingCost + phoneSetupCost;\n\n\t// Calculate monthly recurring charges\n\tconst basePlatformCost = BASE_PLATFORM_FEE;\n\tconst phoneNumbersMonthlyCost =\n\t\tselections.newPhoneNumberCount * PHONE_NEW_NUMBER_MONTHLY_FEE;\n\tconst gmailWorkspaceCost =\n\t\tselections.gmailWorkspaceUsers * GMAIL_WORKSPACE_PER_USER_FEE;\n\tconst profitRhinoCost = selections.profitRhinoEnabled\n\t\t? PROFIT_RHINO_MONTHLY_FEE\n\t\t: 0;\n\tconst monthlyTotal =\n\t\tbasePlatformCost +\n\t\tphoneNumbersMonthlyCost +\n\t\tgmailWorkspaceCost +\n\t\tprofitRhinoCost;\n\n\t// Grand total for first month (upfront + first month after trial)\n\tconst firstMonthTotal = oneTimeTotal + monthlyTotal;\n\n\treturn {\n\t\toneTime: {\n\t\t\tphonePorting: phonePortingCost,\n\t\t\tphoneSetup: phoneSetupCost,\n\t\t\ttotal: oneTimeTotal,\n\t\t},\n\t\tmonthly: {\n\t\t\tbasePlatform: basePlatformCost,\n\t\t\tphoneNumbers: phoneNumbersMonthlyCost,\n\t\t\tgmailWorkspace: gmailWorkspaceCost,\n\t\t\tprofitRhino: profitRhinoCost,\n\t\t\ttotal: monthlyTotal,\n\t\t},\n\t\tfirstMonthTotal,\n\t};\n}\n\n/**\n * Build Stripe subscription items array for onboarding checkout\n *\n * Creates the subscription items array needed for Stripe Checkout Session\n * or Subscription creation, including base plan and all selected add-ons.\n *\n * @param selections - Contractor's onboarding selections\n * @returns Array of Stripe subscription items\n *\n * @example\n * const selections = {\n *   phonePortingCount: 0,\n *   newPhoneNumberCount: 2,\n *   gmailWorkspaceUsers: 5,\n *   profitRhinoEnabled: true\n * };\n *\n * const items = buildStripeSubscriptionItems(selections);\n * // Returns:\n * // [\n * //   { price: 'price_base_plan', quantity: 1 },\n * //   { price: 'price_phone_monthly', quantity: 2 },\n * //   { price: 'price_gmail_per_user', quantity: 5 },\n * //   { price: 'price_profit_rhino', quantity: 1 }\n * // ]\n */\nexport function buildStripeSubscriptionItems(\n\tselections: OnboardingBillingSelections,\n): StripeSubscriptionItem[] {\n\tconst items: StripeSubscriptionItem[] = [];\n\n\t// Base platform (always included)\n\titems.push({\n\t\tprice: STRIPE_PRICE_IDS.BASE_PLAN,\n\t\tquantity: 1,\n\t});\n\n\t// New phone numbers (monthly recurring)\n\tif (selections.newPhoneNumberCount > 0) {\n\t\titems.push({\n\t\t\tprice: STRIPE_PRICE_IDS.PHONE_NEW_NUMBER_MONTHLY,\n\t\t\tquantity: selections.newPhoneNumberCount,\n\t\t});\n\t}\n\n\t// Gmail Workspace users\n\tif (selections.gmailWorkspaceUsers > 0) {\n\t\titems.push({\n\t\t\tprice: STRIPE_PRICE_IDS.GMAIL_WORKSPACE_PER_USER,\n\t\t\tquantity: selections.gmailWorkspaceUsers,\n\t\t});\n\t}\n\n\t// Profit Rhino add-on\n\tif (selections.profitRhinoEnabled) {\n\t\titems.push({\n\t\t\tprice: STRIPE_PRICE_IDS.PROFIT_RHINO,\n\t\t\tquantity: 1,\n\t\t});\n\t}\n\n\treturn items;\n}\n\n/**\n * Build Stripe line items for one-time charges\n *\n * Creates line items array for one-time charges (porting, setup fees)\n * that should be invoiced immediately, separate from the subscription.\n *\n * @param selections - Contractor's onboarding selections\n * @returns Array of Stripe line items for one-time charges\n *\n * @example\n * const selections = {\n *   phonePortingCount: 1,\n *   newPhoneNumberCount: 1,\n *   gmailWorkspaceUsers: 0,\n *   profitRhinoEnabled: false\n * };\n *\n * const lineItems = buildOneTimeChargesLineItems(selections);\n * // Returns:\n * // [\n * //   { price: 'price_porting', quantity: 1 },\n * //   { price: 'price_phone_setup', quantity: 1 }\n * // ]\n */\nexport function buildOneTimeChargesLineItems(\n\tselections: OnboardingBillingSelections,\n): StripeSubscriptionItem[] {\n\tconst lineItems: StripeSubscriptionItem[] = [];\n\n\t// Phone porting fees\n\tif (selections.phonePortingCount > 0) {\n\t\tlineItems.push({\n\t\t\tprice: STRIPE_PRICE_IDS.PHONE_PORTING,\n\t\t\tquantity: selections.phonePortingCount,\n\t\t});\n\t}\n\n\t// New phone number setup fees\n\tif (selections.newPhoneNumberCount > 0) {\n\t\tlineItems.push({\n\t\t\tprice: STRIPE_PRICE_IDS.PHONE_NEW_NUMBER_SETUP,\n\t\t\tquantity: selections.newPhoneNumberCount,\n\t\t});\n\t}\n\n\treturn lineItems;\n}\n\n/**\n * Format cost as USD currency string\n *\n * @param amount - Amount in dollars\n * @returns Formatted string (e.g., \"$123.45\")\n *\n * @example\n * formatCurrency(123.45); // \"$123.45\"\n * formatCurrency(0); // \"$0.00\"\n * formatCurrency(1234.5); // \"$1,234.50\"\n */\nexport function formatCurrency(amount: number): string {\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t\tminimumFractionDigits: 2,\n\t\tmaximumFractionDigits: 2,\n\t}).format(amount);\n}\n\n/**\n * Validate that all required Stripe price IDs are configured\n *\n * Checks environment variables to ensure all necessary Stripe prices\n * are set before attempting to create checkout sessions.\n *\n * @returns Object with validation result and missing price IDs\n *\n * @example\n * const validation = validateStripePriceIds();\n * if (!validation.isValid) {\n *   console.error('Missing price IDs:', validation.missing);\n * }\n */\nexport function validateStripePriceIds(): {\n\tisValid: boolean;\n\tmissing: string[];\n} {\n\tconst missing: string[] = [];\n\n\tif (!STRIPE_PRICE_IDS.PHONE_PORTING)\n\t\tmissing.push(\"STRIPE_PRICE_ID_PHONE_PORTING\");\n\tif (!STRIPE_PRICE_IDS.PHONE_NEW_NUMBER_SETUP)\n\t\tmissing.push(\"STRIPE_PRICE_ID_PHONE_NEW_NUMBER_SETUP\");\n\tif (!STRIPE_PRICE_IDS.BASE_PLAN) missing.push(\"STRIPE_PRICE_ID_BASE_PLAN\");\n\tif (!STRIPE_PRICE_IDS.PHONE_NEW_NUMBER_MONTHLY)\n\t\tmissing.push(\"STRIPE_PRICE_ID_PHONE_NEW_NUMBER_MONTHLY\");\n\tif (!STRIPE_PRICE_IDS.GMAIL_WORKSPACE_PER_USER)\n\t\tmissing.push(\"STRIPE_PRICE_ID_GMAIL_WORKSPACE_PER_USER\");\n\tif (!STRIPE_PRICE_IDS.PROFIT_RHINO)\n\t\tmissing.push(\"STRIPE_PRICE_ID_PROFIT_RHINO\");\n\n\treturn {\n\t\tisValid: missing.length === 0,\n\t\tmissing,\n\t};\n}\n","\"use client\";\n\n/**\n * First Action Step - Guided First Task\n */\n\nimport {\n\tArrowRight,\n\tCalendar,\n\tCheckCircle2,\n\tClock,\n\tFileText,\n\tMail,\n\tMapPin,\n\tPhone,\n\tPlus,\n\tSkipForward,\n\tTrophy,\n\tUsers,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype FirstAction = \"customer\" | \"job\" | \"estimate\" | \"skip\";\n\nconst ACTION_OPTIONS: {\n\tid: FirstAction;\n\ttitle: string;\n\tdescription: string;\n\ticon: React.ElementType;\n\ttime: string;\n}[] = [\n\t{\n\t\tid: \"customer\",\n\t\ttitle: \"Add Your First Customer\",\n\t\tdescription: \"Start building your customer database\",\n\t\ticon: Users,\n\t\ttime: \"2 min\",\n\t},\n\t{\n\t\tid: \"job\",\n\t\ttitle: \"Schedule a Job\",\n\t\tdescription: \"Put something on the calendar\",\n\t\ticon: Calendar,\n\t\ttime: \"3 min\",\n\t},\n\t{\n\t\tid: \"estimate\",\n\t\ttitle: \"Create an Estimate\",\n\t\tdescription: \"Send a professional quote\",\n\t\ticon: FileText,\n\t\ttime: \"5 min\",\n\t},\n\t{\n\t\tid: \"skip\",\n\t\ttitle: \"I'll Explore on My Own\",\n\t\tdescription: \"Jump straight to the dashboard\",\n\t\ticon: SkipForward,\n\t\ttime: \"Instant\",\n\t},\n];\n\ninterface CustomerData {\n\tfirstName: string;\n\tlastName: string;\n\temail: string;\n\tphone: string;\n\taddress: string;\n}\n\nexport function FirstActionStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [selectedAction, setSelectedAction] = useState<FirstAction | null>(\n\t\tnull,\n\t);\n\tconst [customerData, setCustomerData] = useState<CustomerData>({\n\t\tfirstName: \"\",\n\t\tlastName: \"\",\n\t\temail: \"\",\n\t\tphone: \"\",\n\t\taddress: \"\",\n\t});\n\tconst [saving, setSaving] = useState(false);\n\tconst [completed, setCompleted] = useState(false);\n\n\tconst handleActionSelect = (action: FirstAction) => {\n\t\tsetSelectedAction(action);\n\t\tif (action === \"skip\") {\n\t\t\tupdateData({ firstActionCompleted: \"skip\" });\n\t\t}\n\t};\n\n\tconst handleCustomerChange = (field: keyof CustomerData, value: string) => {\n\t\tsetCustomerData((prev) => ({ ...prev, [field]: value }));\n\t};\n\n\tconst saveCustomer = async () => {\n\t\tsetSaving(true);\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\t\tsetCompleted(true);\n\t\tupdateData({ firstActionCompleted: \"customer\" });\n\t\tsetSaving(false);\n\t};\n\n\t// If action is completed, show success\n\tif (completed) {\n\t\treturn (\n\t\t\t<div className=\"space-y-10\">\n\t\t\t\t<div className=\"flex flex-col items-center gap-4 py-8\">\n\t\t\t\t\t<div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-green-500/10\">\n\t\t\t\t\t\t<Trophy className=\"h-8 w-8 text-green-500\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">First customer added!</h2>\n\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t{customerData.firstName} {customerData.lastName} is now in your\n\t\t\t\t\t\t\tsystem.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<span className=\"font-medium\">What you can do now:</span>\n\t\t\t\t\t{[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: `Schedule a job for ${customerData.firstName}`,\n\t\t\t\t\t\t\tdesc: \"Put an appointment on the calendar\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ title: \"Create an estimate\", desc: \"Send a professional quote\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Add property details\",\n\t\t\t\t\t\t\tdesc: \"Equipment, notes, and history\",\n\t\t\t\t\t\t},\n\t\t\t\t\t].map((item, i) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName=\"flex items-start gap-3 rounded-lg bg-muted/40 p-3\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">{item.title}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">{item.desc}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"text-sm text-muted-foreground text-center\">\n\t\t\t\t\tComplete the final step to see your personalized dashboard.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Show customer form if that action is selected\n\tif (selectedAction === \"customer\") {\n\t\treturn (\n\t\t\t<div className=\"space-y-10\">\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setSelectedAction(null)}\n\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t>\n\t\t\t\t\t\t← Back to options\n\t\t\t\t\t</button>\n\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">Add your first customer</h2>\n\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\tEnter a real customer or create a test one. You can edit this later.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-2\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"firstName\">First Name *</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"firstName\"\n\t\t\t\t\t\t\t\tplaceholder=\"John\"\n\t\t\t\t\t\t\t\tvalue={customerData.firstName}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\thandleCustomerChange(\"firstName\", e.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"lastName\">Last Name *</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"lastName\"\n\t\t\t\t\t\t\t\tplaceholder=\"Smith\"\n\t\t\t\t\t\t\t\tvalue={customerData.lastName}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\thandleCustomerChange(\"lastName\", e.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"email\">Email</Label>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n\t\t\t\t\t\t\t\tvalue={customerData.email}\n\t\t\t\t\t\t\t\tonChange={(e) => handleCustomerChange(\"email\", e.target.value)}\n\t\t\t\t\t\t\t\tclassName=\"pl-10\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"phone\">Phone</Label>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\t\tvalue={customerData.phone}\n\t\t\t\t\t\t\t\tonChange={(e) => handleCustomerChange(\"phone\", e.target.value)}\n\t\t\t\t\t\t\t\tclassName=\"pl-10\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"address\">Service Address</Label>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<MapPin className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"address\"\n\t\t\t\t\t\t\t\tplaceholder=\"123 Main St, City, State 12345\"\n\t\t\t\t\t\t\t\tvalue={customerData.address}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\thandleCustomerChange(\"address\", e.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"pl-10\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Button\n\t\t\t\t\tonClick={saveCustomer}\n\t\t\t\t\tdisabled={!customerData.firstName || !customerData.lastName || saving}\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t>\n\t\t\t\t\t{saving ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Clock className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\tSaving...\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Plus className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tAdd Customer\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Show action selection\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Take your first action</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tThe best way to learn is by doing. What would you like to do first?\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Action Options */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t{ACTION_OPTIONS.map((action) => {\n\t\t\t\t\tconst Icon = action.icon;\n\t\t\t\t\tconst isSkip = action.id === \"skip\";\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={() => handleActionSelect(action.id)}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"w-full flex items-center gap-4 rounded-lg p-4 text-left transition-colors\",\n\t\t\t\t\t\t\t\t\"bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\tisSkip && \"opacity-70\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" />\n\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">{action.title}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{action.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{action.time}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<ArrowRight className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t{/* Encouragement */}\n\t\t\t<p className=\"text-sm text-muted-foreground text-center\">\n\t\t\t\tWe recommend starting with \"Add Your First Customer\".\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Integrations Step - Connect External Apps\n *\n * Based on competitor research (FieldPulse, Housecall Pro):\n * - QuickBooks integration during onboarding (FieldPulse highlight)\n * - Google Calendar sync for scheduling\n * - Reduces setup friction by connecting early\n *\n * Key insight: FieldPulse offers \"QuickBooks cleanup\" as premium feature\n * because existing QuickBooks data can be messy. We highlight this benefit.\n */\n\nimport {\n\tAlertCircle,\n\tArrowRight,\n\tCalendar,\n\tCheckCircle2,\n\tClock,\n\tDollarSign,\n\tExternalLink,\n\tFileText,\n\tRefreshCw,\n\tSparkles,\n\tUsers,\n\tZap,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCard,\n\tCardContent,\n\tCardDescription,\n\tCardHeader,\n\tCardTitle,\n} from \"@/components/ui/card\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\n// Integration options\nconst INTEGRATIONS = [\n\t{\n\t\tid: \"quickbooks\",\n\t\tname: \"QuickBooks\",\n\t\tdescription: \"Sync invoices, payments, and customer data automatically\",\n\t\tlogo: \"/integrations/quickbooks-logo.svg\",\n\t\tpopular: true,\n\t\tbenefits: [\n\t\t\t\"Invoices sync automatically to QuickBooks\",\n\t\t\t\"Customer data stays in sync\",\n\t\t\t\"Payment reconciliation made easy\",\n\t\t\t\"No more double data entry\",\n\t\t],\n\t\tfields: [\"Invoices\", \"Payments\", \"Customers\", \"Products/Services\"],\n\t\tsetupTime: \"2 minutes\",\n\t\tcategory: \"accounting\",\n\t},\n\t{\n\t\tid: \"google-calendar\",\n\t\tname: \"Google Calendar\",\n\t\tdescription: \"Sync job schedules to your Google Calendar\",\n\t\tlogo: \"/integrations/google-calendar-logo.svg\",\n\t\tpopular: true,\n\t\tbenefits: [\n\t\t\t\"See all jobs on your Google Calendar\",\n\t\t\t\"Technicians get schedule updates\",\n\t\t\t\"Prevent double-booking\",\n\t\t\t\"Works with mobile devices\",\n\t\t],\n\t\tfields: [\"Jobs\", \"Appointments\", \"Schedules\"],\n\t\tsetupTime: \"1 minute\",\n\t\tcategory: \"calendar\",\n\t},\n\t{\n\t\tid: \"stripe\",\n\t\tname: \"Stripe\",\n\t\tdescription: \"Accept credit card payments from customers\",\n\t\tlogo: \"/integrations/stripe-logo.svg\",\n\t\tpopular: false,\n\t\tbenefits: [\n\t\t\t\"Accept all major credit cards\",\n\t\t\t\"Secure payment processing\",\n\t\t\t\"Automatic payment receipts\",\n\t\t\t\"ACH bank transfers\",\n\t\t],\n\t\tfields: [\"Payments\", \"Invoices\"],\n\t\tsetupTime: \"5 minutes\",\n\t\tcategory: \"payments\",\n\t\tnote: \"Set up in Payments step\",\n\t},\n];\n\n// Integration sync info cards\nconst SYNC_BENEFITS = [\n\t{\n\t\ticon: DollarSign,\n\t\ttitle: \"Save 5+ hours/week\",\n\t\tdescription: \"No more manually entering data in multiple systems\",\n\t},\n\t{\n\t\ticon: RefreshCw,\n\t\ttitle: \"Real-time sync\",\n\t\tdescription: \"Data updates automatically across all connected apps\",\n\t},\n\t{\n\t\ticon: AlertCircle,\n\t\ttitle: \"Reduce errors\",\n\t\tdescription: \"Eliminate typos and missed entries from manual data entry\",\n\t},\n];\n\nexport function IntegrationsStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [connectingId, setConnectingId] = useState<string | null>(null);\n\n\t// Simulate OAuth connection (in production, this would redirect to OAuth flow)\n\tconst handleConnect = async (integrationId: string) => {\n\t\tsetConnectingId(integrationId);\n\n\t\t// Simulate OAuth flow\n\t\tawait new Promise((r) => setTimeout(r, 2000));\n\n\t\tif (integrationId === \"quickbooks\") {\n\t\t\tupdateData({\n\t\t\t\tquickbooksConnected: true,\n\t\t\t\tquickbooksCompanyId: \"qb_demo_12345\",\n\t\t\t\tquickbooksLastSync: new Date().toISOString(),\n\t\t\t});\n\t\t} else if (integrationId === \"google-calendar\") {\n\t\t\tupdateData({\n\t\t\t\tgoogleCalendarConnected: true,\n\t\t\t\tgoogleCalendarId: \"primary\",\n\t\t\t});\n\t\t}\n\n\t\tsetConnectingId(null);\n\t};\n\n\tconst handleDisconnect = (integrationId: string) => {\n\t\tif (integrationId === \"quickbooks\") {\n\t\t\tupdateData({\n\t\t\t\tquickbooksConnected: false,\n\t\t\t\tquickbooksCompanyId: null,\n\t\t\t\tquickbooksLastSync: null,\n\t\t\t});\n\t\t} else if (integrationId === \"google-calendar\") {\n\t\t\tupdateData({\n\t\t\t\tgoogleCalendarConnected: false,\n\t\t\t\tgoogleCalendarId: null,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst isConnected = (integrationId: string) => {\n\t\tif (integrationId === \"quickbooks\") return data.quickbooksConnected;\n\t\tif (integrationId === \"google-calendar\")\n\t\t\treturn data.googleCalendarConnected;\n\t\treturn false;\n\t};\n\n\tconst connectedCount = [\n\t\tdata.quickbooksConnected,\n\t\tdata.googleCalendarConnected,\n\t].filter(Boolean).length;\n\n\treturn (\n\t\t<div className=\"space-y-8\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"text-center space-y-3\">\n\t\t\t\t<h1 className=\"text-3xl font-semibold tracking-tight\">\n\t\t\t\t\tConnect Your Apps\n\t\t\t\t</h1>\n\t\t\t\t<p className=\"text-muted-foreground text-lg max-w-lg mx-auto\">\n\t\t\t\t\tLink the tools you already use. Everything stays in sync\n\t\t\t\t\tautomatically.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Benefits bar */}\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n\t\t\t\t{SYNC_BENEFITS.map((benefit) => {\n\t\t\t\t\tconst Icon = benefit.icon;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={benefit.title}\n\t\t\t\t\t\t\tclassName=\"flex items-center gap-3 p-3 rounded-lg bg-muted/40\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"p-2 rounded-full bg-primary/10\">\n\t\t\t\t\t\t\t\t<Icon className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">{benefit.title}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{benefit.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t{/* Integration Cards */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<h2 className=\"text-lg font-medium\">Available Integrations</h2>\n\t\t\t\t\t{connectedCount > 0 && (\n\t\t\t\t\t\t<Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">\n\t\t\t\t\t\t\t{connectedCount} connected\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"grid gap-4\">\n\t\t\t\t\t{INTEGRATIONS.map((integration) => {\n\t\t\t\t\t\tconst connected = isConnected(integration.id);\n\t\t\t\t\t\tconst isConnecting = connectingId === integration.id;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={integration.id}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"transition-all\",\n\t\t\t\t\t\t\t\t\tconnected &&\n\t\t\t\t\t\t\t\t\t\t\"border-green-500 bg-green-50/50 dark:bg-green-950/20\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CardContent className=\"p-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t\t\t\t\t\t{/* Logo placeholder */}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"w-12 h-12 rounded-lg flex items-center justify-center\",\n\t\t\t\t\t\t\t\t\t\t\t\tconnected\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 dark:bg-green-900\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{connected ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-6 w-6 text-green-600\" />\n\t\t\t\t\t\t\t\t\t\t\t) : integration.id === \"quickbooks\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<FileText className=\"h-6 w-6 text-green-700\" />\n\t\t\t\t\t\t\t\t\t\t\t) : integration.id === \"google-calendar\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Calendar className=\"h-6 w-6 text-blue-600\" />\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<DollarSign className=\"h-6 w-6 text-purple-600\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"font-semibold\">{integration.name}</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{integration.popular && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tPopular\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{connected && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-100 text-green-800 border-green-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tConnected\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t{integration.description}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Benefits list */}\n\t\t\t\t\t\t\t\t\t\t\t{!connected && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 grid grid-cols-2 gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{integration.benefits\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 4)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((benefit, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2 text-sm text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-3.5 w-3.5 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{benefit}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Synced fields */}\n\t\t\t\t\t\t\t\t\t\t\t{connected && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-3 flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSyncing:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{integration.fields.map((field) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Note for deferred integrations */}\n\t\t\t\t\t\t\t\t\t\t\t{integration.note && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-2 flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{integration.note}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{/* Action button */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t{integration.note ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\t\tLater\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t) : connected ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDisconnect(integration.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDisconnect\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3 w-3 inline mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tJust now\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleConnect(integration.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isConnecting}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isConnecting ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RefreshCw className=\"h-3.5 w-3.5 mr-1 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tConnecting...\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tConnect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ArrowRight className=\"h-3.5 w-3.5 ml-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* QuickBooks specific tip */}\n\t\t\t{!data.quickbooksConnected && (\n\t\t\t\t<Card className=\"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 border-green-200 dark:border-green-800\">\n\t\t\t\t\t<CardContent className=\"p-6\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t\t\t<div className=\"p-3 rounded-full bg-green-100 dark:bg-green-900\">\n\t\t\t\t\t\t\t\t<Sparkles className=\"h-6 w-6 text-green-600\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<h3 className=\"font-semibold text-green-900 dark:text-green-100\">\n\t\t\t\t\t\t\t\t\tWhy connect QuickBooks now?\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 mt-1\">\n\t\t\t\t\t\t\t\t\tConnecting early means all your Thorbis invoices and payments\n\t\t\t\t\t\t\t\t\twill automatically appear in QuickBooks from day one. No\n\t\t\t\t\t\t\t\t\tcatch-up needed later.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<ul className=\"mt-3 space-y-1\">\n\t\t\t\t\t\t\t\t\t<li className=\"text-sm text-green-700 dark:text-green-300 flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tImport existing customers from QuickBooks\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"text-sm text-green-700 dark:text-green-300 flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tSync products/services to your price book\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"text-sm text-green-700 dark:text-green-300 flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tAutomatic payment reconciliation\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t)}\n\n\t\t\t{/* Skip message */}\n\t\t\t<div className=\"text-center text-sm text-muted-foreground\">\n\t\t\t\t<p>\n\t\t\t\t\tDon't use any of these apps? No problem - you can skip this step and\n\t\t\t\t\tconnect integrations later from{\" \"}\n\t\t\t\t\t<span className=\"font-medium\">Settings &gt; Integrations</span>.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Notifications Step - Alert Preferences\n */\n\nimport {\n\tBarChart3,\n\tBell,\n\tBriefcase,\n\tCalendar,\n\tDollarSign,\n\tMail,\n\tMessageSquare,\n\tMoon,\n\tSmartphone,\n\tUsers,\n} from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\n\nconst NOTIFICATION_CATEGORIES = [\n\t{\n\t\tid: \"new_booking\",\n\t\ttitle: \"New Bookings\",\n\t\tdescription: \"When a customer books a service\",\n\t\ticon: Calendar,\n\t\trecommended: { push: true, email: true, sms: false },\n\t},\n\t{\n\t\tid: \"job_updates\",\n\t\ttitle: \"Job Updates\",\n\t\tdescription: \"Status changes, completions\",\n\t\ticon: Briefcase,\n\t\trecommended: { push: true, email: false, sms: false },\n\t},\n\t{\n\t\tid: \"payment_received\",\n\t\ttitle: \"Payments Received\",\n\t\tdescription: \"When customers pay invoices\",\n\t\ticon: DollarSign,\n\t\trecommended: { push: true, email: true, sms: false },\n\t},\n\t{\n\t\tid: \"customer_messages\",\n\t\ttitle: \"Customer Messages\",\n\t\tdescription: \"Emails, texts from customers\",\n\t\ticon: Users,\n\t\trecommended: { push: true, email: true, sms: true },\n\t},\n\t{\n\t\tid: \"daily_summary\",\n\t\ttitle: \"Daily Summary\",\n\t\tdescription: \"Overview of the day\",\n\t\ticon: BarChart3,\n\t\trecommended: { push: false, email: true, sms: false },\n\t},\n];\n\nexport function NotificationsStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\n\tconst updateNotification = (\n\t\tcategoryId: string,\n\t\tchannel: \"push\" | \"email\" | \"sms\",\n\t\tenabled: boolean,\n\t) => {\n\t\tconst updated = data.notifications.map((n) =>\n\t\t\tn.category === categoryId ? { ...n, [channel]: enabled } : n,\n\t\t);\n\t\tupdateData({ notifications: updated });\n\t};\n\n\tconst getNotificationSetting = (categoryId: string) => {\n\t\treturn (\n\t\t\tdata.notifications.find((n) => n.category === categoryId) || {\n\t\t\t\tcategory: categoryId,\n\t\t\t\tpush: false,\n\t\t\t\temail: false,\n\t\t\t\tsms: false,\n\t\t\t}\n\t\t);\n\t};\n\n\tconst setAllToRecommended = () => {\n\t\tconst recommended = NOTIFICATION_CATEGORIES.map((cat) => ({\n\t\t\tcategory: cat.id,\n\t\t\t...cat.recommended,\n\t\t}));\n\t\tupdateData({ notifications: recommended });\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Notification preferences</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tChoose how you want to stay informed. You can change these anytime.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Quick Actions */}\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<Bell className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tOptimized for most field service businesses\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tonClick={setAllToRecommended}\n\t\t\t\t\tclassName=\"text-sm font-medium text-primary hover:underline\"\n\t\t\t\t>\n\t\t\t\t\tUse recommended\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t{/* Notification Grid */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t{/* Header Row */}\n\t\t\t\t<div className=\"flex items-center gap-4 px-4 text-xs font-medium text-muted-foreground\">\n\t\t\t\t\t<div className=\"flex-1\" />\n\t\t\t\t\t<div className=\"w-14 text-center\">\n\t\t\t\t\t\t<Smartphone className=\"h-4 w-4 mx-auto mb-1\" />\n\t\t\t\t\t\tPush\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-14 text-center\">\n\t\t\t\t\t\t<Mail className=\"h-4 w-4 mx-auto mb-1\" />\n\t\t\t\t\t\tEmail\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-14 text-center\">\n\t\t\t\t\t\t<MessageSquare className=\"h-4 w-4 mx-auto mb-1\" />\n\t\t\t\t\t\tSMS\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Category Rows */}\n\t\t\t\t{NOTIFICATION_CATEGORIES.map((category) => {\n\t\t\t\t\tconst Icon = category.icon;\n\t\t\t\t\tconst settings = getNotificationSetting(category.id);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={category.id}\n\t\t\t\t\t\t\tclassName=\"flex items-center gap-4 rounded-lg bg-muted/40 p-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" />\n\t\t\t\t\t\t\t\t<div className=\"min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{category.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground truncate\">\n\t\t\t\t\t\t\t\t\t\t{category.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"w-14 flex justify-center\">\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={settings.push}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) =>\n\t\t\t\t\t\t\t\t\t\tupdateNotification(category.id, \"push\", v)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"w-14 flex justify-center\">\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={settings.email}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) =>\n\t\t\t\t\t\t\t\t\t\tupdateNotification(category.id, \"email\", v)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"w-14 flex justify-center\">\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={settings.sms}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) =>\n\t\t\t\t\t\t\t\t\t\tupdateNotification(category.id, \"sms\", v)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdisabled={!data.smsEnabled}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t{/* SMS Disabled Notice */}\n\t\t\t{!data.smsEnabled && (\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tSMS notifications require phone setup. Go back to enable.\n\t\t\t\t</p>\n\t\t\t)}\n\n\t\t\t{/* Quiet Hours */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<Moon className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium\">Quiet Hours</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tPause non-urgent notifications\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tchecked={data.quietHoursEnabled}\n\t\t\t\t\t\tonCheckedChange={(v) => updateData({ quietHoursEnabled: v })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{data.quietHoursEnabled && (\n\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"time\"\n\t\t\t\t\t\t\tvalue={data.quietHoursStart}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ quietHoursStart: e.target.value })}\n\t\t\t\t\t\t\tclassName=\"w-[120px]\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">to</span>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"time\"\n\t\t\t\t\t\t\tvalue={data.quietHoursEnd}\n\t\t\t\t\t\t\tonChange={(e) => updateData({ quietHoursEnd: e.target.value })}\n\t\t\t\t\t\t\tclassName=\"w-[120px]\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Payment Collection Step - Platform Billing Setup\n *\n * Collects payment method for Thorbis platform subscription.\n * Displays itemized cost breakdown and initiates Stripe Checkout.\n *\n * Key Features:\n * - Itemized cost breakdown (one-time + monthly)\n * - 14-day free trial notice\n * - Stripe Checkout integration (card + ACH)\n * - Real-time cost calculation from store selections\n */\n\nimport {\n\tAlertCircle,\n\tBuilding2,\n\tCalendar,\n\tCheck,\n\tCreditCard,\n\tInfo,\n\tLoader2,\n\tShield,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { createOnboardingCheckoutSession } from \"@/actions/onboarding-billing\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tcalculateOnboardingCosts,\n\tformatCurrency,\n} from \"@/lib/onboarding/onboarding-fees\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype PaymentMethod = \"card\" | \"ach\";\n\nexport function PaymentCollectionStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [selectedMethod, setSelectedMethod] = useState<PaymentMethod>(\"card\");\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\n\t// Calculate costs based on current selections\n\tconst costs = calculateOnboardingCosts({\n\t\tphonePortingCount: data.phonePortingCount || 0,\n\t\tnewPhoneNumberCount: data.newPhoneNumberCount || 0,\n\t\tgmailWorkspaceUsers: data.gmailWorkspaceUsers || 0,\n\t\tprofitRhinoEnabled: data.profitRhinoEnabled || false,\n\t});\n\n\tconst handleCheckout = async () => {\n\t\tsetIsSubmitting(true);\n\t\tsetError(null);\n\n\t\ttry {\n\t\t\t// Get company and team member IDs from auth session\n\t\t\t// NOTE: These should be retrieved from auth context/session\n\t\t\t// For now, using placeholder values - will be updated when integrated\n\t\t\tconst companyId = data.companyId || \"\"; // From auth session\n\t\t\tconst teamMemberId = data.teamMemberId || \"\"; // From auth session\n\n\t\t\tif (!companyId || !teamMemberId) {\n\t\t\t\tsetError(\"Missing company or user information. Please log in again.\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Build success/cancel URLs\n\t\t\tconst baseUrl = window.location.origin;\n\t\t\tconst successUrl = `${baseUrl}/onboarding/payment/success?session_id={CHECKOUT_SESSION_ID}&company_id=${companyId}`;\n\t\t\tconst cancelUrl = `${baseUrl}/onboarding/payment/cancel`;\n\n\t\t\t// Create Stripe Checkout session\n\t\t\tconst result = await createOnboardingCheckoutSession({\n\t\t\t\tcompanyId,\n\t\t\t\tteamMemberId,\n\t\t\t\tselections: {\n\t\t\t\t\tphonePortingCount: data.phonePortingCount || 0,\n\t\t\t\t\tnewPhoneNumberCount: data.newPhoneNumberCount || 0,\n\t\t\t\t\tgmailWorkspaceUsers: data.gmailWorkspaceUsers || 0,\n\t\t\t\t\tprofitRhinoEnabled: data.profitRhinoEnabled || false,\n\t\t\t\t},\n\t\t\t\tsuccessUrl,\n\t\t\t\tcancelUrl,\n\t\t\t});\n\n\t\t\tif (result.success && result.checkoutUrl) {\n\t\t\t\t// Redirect to Stripe Checkout\n\t\t\t\twindow.location.href = result.checkoutUrl;\n\t\t\t} else {\n\t\t\t\tsetError(result.error || \"Failed to create checkout session\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetError(err instanceof Error ? err.message : \"Failed to start checkout\");\n\t\t} finally {\n\t\t\tsetIsSubmitting(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-8\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Payment setup</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tStart your 14-day free trial. Your card won't be charged until the\n\t\t\t\t\ttrial ends.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Cost Breakdown Card */}\n\t\t\t<Card className=\"p-6 space-y-6\">\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<h3 className=\"font-semibold\">Your subscription</h3>\n\n\t\t\t\t\t{/* One-time charges */}\n\t\t\t\t\t{costs.oneTime.total > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tOne-time setup fees\n\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t{costs.oneTime.phonePorting > 0 && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\tPhone number porting ({data.phonePortingCount}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{data.phonePortingCount === 1 ? \"number\" : \"numbers\"})\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(costs.oneTime.phonePorting)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{costs.oneTime.phoneSetup > 0 && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\tNew phone number setup ({data.newPhoneNumberCount}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{data.newPhoneNumberCount === 1 ? \"number\" : \"numbers\"})\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(costs.oneTime.phoneSetup)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm font-semibold pt-2 border-t\">\n\t\t\t\t\t\t\t\t\t<span>One-time total</span>\n\t\t\t\t\t\t\t\t\t<span>{formatCurrency(costs.oneTime.total)}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Monthly recurring charges */}\n\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t<p className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\t\tMonthly subscription\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t<span>Base platform</span>\n\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t{formatCurrency(costs.monthly.basePlatform)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{costs.monthly.phoneNumbers > 0 && (\n\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tPhone numbers ({data.newPhoneNumberCount}{\" \"}\n\t\t\t\t\t\t\t\t\t{data.newPhoneNumberCount === 1 ? \"number\" : \"numbers\"})\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(costs.monthly.phoneNumbers)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{costs.monthly.gmailWorkspace > 0 && (\n\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tGmail Workspace ({data.gmailWorkspaceUsers}{\" \"}\n\t\t\t\t\t\t\t\t\t{data.gmailWorkspaceUsers === 1 ? \"user\" : \"users\"})\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(costs.monthly.gmailWorkspace)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{costs.monthly.profitRhino > 0 && (\n\t\t\t\t\t\t\t<div className=\"flex justify-between text-sm\">\n\t\t\t\t\t\t\t\t<span>Profit Rhino financing add-on</span>\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t{formatCurrency(costs.monthly.profitRhino)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<div className=\"flex justify-between text-sm font-semibold pt-2 border-t\">\n\t\t\t\t\t\t\t<span>Monthly total</span>\n\t\t\t\t\t\t\t<span>{formatCurrency(costs.monthly.total)}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Separator />\n\n\t\t\t\t\t{/* Grand total */}\n\t\t\t\t\t<div className=\"flex justify-between text-lg font-bold\">\n\t\t\t\t\t\t<span>Total due after trial</span>\n\t\t\t\t\t\t<span>{formatCurrency(costs.firstMonthTotal)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Card>\n\n\t\t\t{/* Trial Notice */}\n\t\t\t<div className=\"flex items-start gap-3 bg-blue-500/10 text-blue-700 dark:text-blue-400 rounded-lg p-4\">\n\t\t\t\t<Calendar className=\"h-5 w-5 flex-shrink-0 mt-0.5\" />\n\t\t\t\t<div className=\"text-sm space-y-1\">\n\t\t\t\t\t<p className=\"font-medium\">14-day free trial</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tYour payment method will be saved but not charged until{\" \"}\n\t\t\t\t\t\t<span className=\"font-semibold\">\n\t\t\t\t\t\t\t{new Date(\n\t\t\t\t\t\t\t\tDate.now() + 14 * 24 * 60 * 60 * 1000,\n\t\t\t\t\t\t\t).toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\t\t\tmonth: \"long\",\n\t\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t. Cancel anytime before then at no charge.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Payment Method Selection */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<label className=\"text-sm font-medium\">Choose payment method</label>\n\n\t\t\t\t<div className=\"grid gap-3\">\n\t\t\t\t\t{/* Credit/Debit Card */}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setSelectedMethod(\"card\")}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"relative flex items-center gap-4 rounded-lg border-2 p-4 text-left transition-all\",\n\t\t\t\t\t\t\tselectedMethod === \"card\"\n\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t: \"border-transparent bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectedMethod === \"card\" && (\n\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\t\tselectedMethod === \"card\"\n\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CreditCard className=\"h-5 w-5\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium\">Credit or debit card</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tVisa, Mastercard, Amex, Discover\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{/* ACH Bank Transfer */}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setSelectedMethod(\"ach\")}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"relative flex items-center gap-4 rounded-lg border-2 p-4 text-left transition-all\",\n\t\t\t\t\t\t\tselectedMethod === \"ach\"\n\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t: \"border-transparent bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectedMethod === \"ach\" && (\n\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\t\tselectedMethod === \"ach\"\n\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Building2 className=\"h-5 w-5\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium\">Bank account (ACH)</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tDirect debit from your bank\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Security Notice */}\n\t\t\t<div className=\"flex items-start gap-3 text-sm text-muted-foreground bg-muted/40 rounded-lg p-4\">\n\t\t\t\t<Shield className=\"h-5 w-5 flex-shrink-0 text-primary mt-0.5\" />\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\tSecure payment processing\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tPowered by Stripe. Your payment information is encrypted and never\n\t\t\t\t\t\tstored on our servers. PCI DSS Level 1 certified.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Error Display */}\n\t\t\t{error && (\n\t\t\t\t<div className=\"flex items-start gap-3 bg-destructive/10 rounded-lg p-4\">\n\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t<p className=\"font-medium text-destructive\">{error}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Checkout Button */}\n\t\t\t<Button\n\t\t\t\tsize=\"lg\"\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tonClick={handleCheckout}\n\t\t\t\tdisabled={isSubmitting}\n\t\t\t>\n\t\t\t\t{isSubmitting ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n\t\t\t\t\t\tStarting checkout...\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\tContinue to secure checkout\n\t\t\t\t\t\t<Shield className=\"ml-2 h-5 w-5\" />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Button>\n\n\t\t\t{/* Info Note */}\n\t\t\t<div className=\"flex items-start gap-2 text-xs text-muted-foreground\">\n\t\t\t\t<Info className=\"h-4 w-4 flex-shrink-0 mt-0.5\" />\n\t\t\t\t<p>\n\t\t\t\t\tBy continuing, you agree to our Terms of Service and Privacy Policy.\n\t\t\t\t\tYou can cancel your subscription anytime from Settings → Billing.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4025d06a5ad7d48f0e6c120cd0313cad85d6366fc7\":\"createOnboardingCheckoutSession\"},\"apps/web/src/actions/onboarding-billing.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var createOnboardingCheckoutSession=/*#__PURE__*/createServerReference(\"4025d06a5ad7d48f0e6c120cd0313cad85d6366fc7\",callServer,void 0,findSourceMapURL,\"createOnboardingCheckoutSession\");","\"use client\";\n\n/**\n * Payments Step - Complete Payment Setup\n *\n * Two distinct sections:\n * 1. WHERE PAYMENTS GO - Connect your bank account (where money is deposited)\n * 2. HOW TO ACCEPT PAYMENTS - Enable payment methods (how customers pay)\n *\n * Note: Stripe is ONLY for Thorbis platform billing, not customer payments.\n */\n\nimport {\n\tAlertTriangle,\n\tArrowRight,\n\tBanknote,\n\tBuilding2,\n\tCamera,\n\tCheckCircle2,\n\tCreditCard,\n\tInfo,\n\tLandmark,\n\tLoader2,\n\tPercent,\n\tShield,\n\tSmartphone,\n\tZap,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { PlaidVerificationTracker } from \"@/components/onboarding/status-tracking/plaid-verification-tracker\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype PaymentMethod = \"check-capture\" | \"ach\" | \"cards\" | \"cash\" | \"financing\";\n\nconst PAYMENT_METHODS: {\n\tid: PaymentMethod;\n\ttitle: string;\n\tdescription: string;\n\ticon: React.ElementType;\n\tfees?: string;\n\tbadge?: string;\n\trecommended?: boolean;\n}[] = [\n\t{\n\t\tid: \"check-capture\",\n\t\ttitle: \"Mobile Check Capture\",\n\t\tdescription: \"Snap photos of checks, instant deposit\",\n\t\ticon: Camera,\n\t\tbadge: \"Popular\",\n\t\trecommended: true,\n\t},\n\t{\n\t\tid: \"ach\",\n\t\ttitle: \"Bank Transfers (ACH)\",\n\t\tdescription: \"Direct bank-to-bank via Plaid\",\n\t\ticon: Building2,\n\t\tfees: \"0.8% (max $5)\",\n\t},\n\t{\n\t\tid: \"cards\",\n\t\ttitle: \"Credit & Debit Cards\",\n\t\tdescription: \"Visa, Mastercard, Amex, Discover\",\n\t\ticon: CreditCard,\n\t\tfees: \"2.9% + 30¢\",\n\t},\n\t{\n\t\tid: \"cash\",\n\t\ttitle: \"Cash Payments\",\n\t\tdescription: \"Track field cash collections\",\n\t\ticon: Banknote,\n\t},\n\t{\n\t\tid: \"financing\",\n\t\ttitle: \"Customer Financing\",\n\t\tdescription: \"Payment plans for large jobs\",\n\t\ticon: Percent,\n\t},\n];\n\nexport function PaymentsStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [connectingPlaid, setConnectingPlaid] = useState(false);\n\tconst [connectingBank, setConnectingBank] = useState(false);\n\tconst [plaidInitiated, setPlaidInitiated] = useState(false);\n\tconst [plaidItemId, setPlaidItemId] = useState<string | undefined>(undefined);\n\n\tconst bankConnected = data.plaidConnected || false;\n\tconst [showBankForm, setShowBankForm] = useState(\n\t\t!bankConnected && !plaidInitiated,\n\t);\n\n\tconst togglePaymentMethod = (method: PaymentMethod, enabled: boolean) => {\n\t\tconst current = data.paymentMethods || [];\n\t\tconst updated = enabled\n\t\t\t? [...current, method]\n\t\t\t: current.filter((m) => m !== method);\n\t\tupdateData({ paymentMethods: updated });\n\t};\n\n\tconst isMethodEnabled = (method: PaymentMethod) => {\n\t\treturn (data.paymentMethods || []).includes(method);\n\t};\n\n\tconst connectBankAccount = async () => {\n\t\tsetConnectingBank(true);\n\n\t\t// In production, this would:\n\t\t// 1. Call createPlaidLinkToken() action\n\t\t// 2. Open Plaid Link UI\n\t\t// 3. User selects bank and logs in\n\t\t// 4. Get public token from Plaid\n\t\t// 5. Call exchangePlaidToken() action\n\t\t// 6. Store access token and fetch accounts\n\n\t\t// For now, simulate the connection process\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\n\t\t// Mock Plaid item ID (would come from real Plaid API)\n\t\tconst mockItemId = `item_${Date.now()}`;\n\t\tsetPlaidItemId(mockItemId);\n\t\tsetPlaidInitiated(true);\n\t\tsetConnectingBank(false);\n\n\t\t// Don't set plaidConnected yet - let the tracker do that\n\t\t// after it verifies the accounts\n\t};\n\n\tconst connectPlaidForACH = async () => {\n\t\tsetConnectingPlaid(true);\n\t\t// Simulate Plaid connection for ACH verification\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\t\ttogglePaymentMethod(\"ach\", true);\n\t\tupdateData({ acceptACH: true });\n\t\tsetConnectingPlaid(false);\n\t};\n\n\tconst enableQuickSetup = () => {\n\t\t// Auto-enable recommended payment methods\n\t\tupdateData({\n\t\t\tpaymentMethods: [\"check-capture\", \"ach\", \"cards\", \"cash\"],\n\t\t\tacceptCards: true,\n\t\t\tacceptACH: true,\n\t\t\tacceptChecks: true,\n\t\t\tacceptCash: true,\n\t\t});\n\t};\n\n\tconst enabledCount = (data.paymentMethods || []).length;\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Payment Setup</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tConnect your bank account and choose how you want to accept payments.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* SECTION 1: WHERE PAYMENTS GO */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10\">\n\t\t\t\t\t\t<span className=\"text-sm font-medium text-primary\">1</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">Where payments go</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tConnect your business bank account to receive deposits\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Bank Connection Status */}\n\t\t\t\t{!bankConnected && !plaidInitiated ? (\n\t\t\t\t\t<div className=\"rounded-lg border-2 border-dashed border-muted-foreground/20 p-6 space-y-4\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 flex-shrink-0\">\n\t\t\t\t\t\t\t\t<Landmark className=\"h-6 w-6 text-primary\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-medium\">Connect your bank account</h4>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\tAll customer payments will be deposited here. We use Plaid for\n\t\t\t\t\t\t\t\t\tsecure bank connections.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{showBankForm && (\n\t\t\t\t\t\t\t<div className=\"space-y-4 pt-2\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3 text-sm bg-amber-500/10 rounded-lg p-3\">\n\t\t\t\t\t\t\t\t\t<Info className=\"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tThis is your business receiving account - NOT for platform\n\t\t\t\t\t\t\t\t\t\tbilling. All payments from customers will be deposited here.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={connectBankAccount}\n\t\t\t\t\t\t\t\t\tdisabled={connectingBank}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{connectingBank ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\tConnecting to Plaid...\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Shield className=\"mr-2 h-5 w-5\" />\n\t\t\t\t\t\t\t\t\t\t\tConnect Bank Account via Plaid\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-center text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tPlaid uses bank-level security. Your login credentials are\n\t\t\t\t\t\t\t\t\tnever stored.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t) : plaidInitiated && !bankConnected ? (\n\t\t\t\t\t/* Show Plaid Verification Tracker */\n\t\t\t\t\t<div className=\"rounded-lg border-2 border-primary/20 p-6\">\n\t\t\t\t\t\t<PlaidVerificationTracker\n\t\t\t\t\t\t\tcompanyId={data.companyId || \"\"}\n\t\t\t\t\t\t\tplaidItemId={plaidItemId}\n\t\t\t\t\t\t\tonVerificationComplete={(accounts) => {\n\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\tplaidConnected: true,\n\t\t\t\t\t\t\t\t\tpaymentSetupComplete: true,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 space-y-3\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\t\t\tBank account connected\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\tPayments will be deposited to your connected bank account\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Payout Schedule Info */}\n\t\t\t\t\t\t<div className=\"flex items-start gap-3 text-sm bg-muted/40 rounded-lg p-3\">\n\t\t\t\t\t\t\t<Zap className=\"h-4 w-4 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">Automatic daily deposits</p>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tFunds are deposited every business day. You can change this in\n\t\t\t\t\t\t\t\t\tSettings.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetShowBankForm(true);\n\t\t\t\t\t\t\t\tsetPlaidInitiated(false);\n\t\t\t\t\t\t\t\tupdateData({ plaidConnected: false });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tChange bank account\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Warning if bank not connected but trying to enable methods */}\n\t\t\t{!bankConnected && enabledCount > 0 && (\n\t\t\t\t<div className=\"flex items-start gap-3 text-sm bg-amber-500/10 rounded-lg p-4\">\n\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium text-foreground\">Bank account required</p>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\tConnect your bank account above before enabling payment methods.\n\t\t\t\t\t\t\tPayments need somewhere to go.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* SECTION 2: HOW TO ACCEPT PAYMENTS */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10\">\n\t\t\t\t\t\t<span className=\"text-sm font-medium text-primary\">2</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">How to accept payments</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tChoose how customers can pay you\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Quick Setup Option */}\n\t\t\t\t{enabledCount === 0 && (\n\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={enableQuickSetup}\n\t\t\t\t\t\t\tdisabled={!bankConnected}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tclassName=\"w-full justify-between\"\n\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t<Zap className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\t\t\t<div className=\"text-left\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">Quick Setup (Recommended)</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tEnable all popular payment methods\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ArrowRight className=\"h-4 w-4\" />\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 flex items-center\">\n\t\t\t\t\t\t\t\t<span className=\"w-full border-t\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"relative flex justify-center text-xs uppercase\">\n\t\t\t\t\t\t\t\t<span className=\"bg-background px-2 text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tOr customize\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Payment Methods List */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{enabledCount > 0 && (\n\t\t\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\n\t\t\t\t\t\t\t<span className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\t{enabledCount} method{enabledCount !== 1 ? \"s\" : \"\"} enabled\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{enabledCount < PAYMENT_METHODS.length && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tonClick={enableQuickSetup}\n\t\t\t\t\t\t\t\t\tdisabled={!bankConnected}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tEnable all\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{PAYMENT_METHODS.map((method) => {\n\t\t\t\t\t\tconst Icon = method.icon;\n\t\t\t\t\t\tconst enabled = isMethodEnabled(method.id);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={method.id}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex items-center gap-4 rounded-lg p-4 transition-colors\",\n\t\t\t\t\t\t\t\t\tenabled\n\t\t\t\t\t\t\t\t\t\t? \"bg-primary/10 ring-1 ring-primary/20\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-muted/40\",\n\t\t\t\t\t\t\t\t\t!bankConnected && \"opacity-50\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full flex-shrink-0\",\n\t\t\t\t\t\t\t\t\t\tenabled ? \"bg-primary text-primary-foreground\" : \"bg-muted\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{method.title}</p>\n\t\t\t\t\t\t\t\t\t\t{method.badge && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-[10px] font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t{method.badge}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{method.description}\n\t\t\t\t\t\t\t\t\t\t{method.fees && ` • ${method.fees}`}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={enabled}\n\t\t\t\t\t\t\t\t\tdisabled={!bankConnected}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) => {\n\t\t\t\t\t\t\t\t\t\ttogglePaymentMethod(method.id, v);\n\t\t\t\t\t\t\t\t\t\tif (v && !data.paymentSetupComplete) {\n\t\t\t\t\t\t\t\t\t\t\tupdateData({ paymentSetupComplete: true });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t{/* ACH Plaid Verification */}\n\t\t\t\t{isMethodEnabled(\"ach\") && bankConnected && (\n\t\t\t\t\t<div className=\"space-y-3 mt-6\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3 text-sm bg-muted/40 rounded-lg p-4\">\n\t\t\t\t\t\t\t<Building2 className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\tACH bank verification\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tUse Plaid to instantly verify customer bank accounts for ACH\n\t\t\t\t\t\t\t\t\ttransfers. This prevents bounced payments and fraud.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={connectPlaidForACH}\n\t\t\t\t\t\t\tdisabled={connectingPlaid}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{connectingPlaid ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\tConnecting...\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Shield className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\tEnable ACH Verification\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Check Capture Info */}\n\t\t\t\t{isMethodEnabled(\"check-capture\") && (\n\t\t\t\t\t<div className=\"flex items-start gap-3 text-sm bg-muted/40 rounded-lg p-4 mt-4\">\n\t\t\t\t\t\t<Smartphone className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\tMobile check capture ready\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\tYour team can snap photos of checks in the field for instant\n\t\t\t\t\t\t\t\tdeposit to your connected bank.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Summary Footer */}\n\t\t\t{bankConnected && enabledCount > 0 && (\n\t\t\t\t<div className=\"rounded-lg bg-primary/5 p-4 space-y-2\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-primary\" />\n\t\t\t\t\t\t<span className=\"font-medium\">Payment setup complete</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tYou're ready to accept payments. Funds will be deposited daily to\n\t\t\t\t\t\tyour connected bank account.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Info Note */}\n\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\tProcessing fees are paid by your business. You can adjust all settings\n\t\t\t\tanytime from Settings → Payments.\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Plaid Verification Tracker\n *\n * Comprehensive tracking for Plaid bank account verification (instant to few minutes)\n * - Polls API every 15 seconds for verification status\n * - Shows which accounts were connected\n * - Displays verification status for each account\n * - Educational content on what Plaid accesses\n * - Troubleshooting help if connection fails\n */\n\nimport {\n\tAlertCircle,\n\tAlertTriangle,\n\tBuilding2,\n\tCheckCircle2,\n\tClock,\n\tDollarSign,\n\tExternalLink,\n\tInfo,\n\tLoader2,\n\tRefreshCw,\n\tShield,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface BankAccount {\n\tid: string;\n\tname: string;\n\tmask: string; // Last 4 digits\n\ttype: string; // checking, savings, etc.\n\tsubtype: string;\n\tverified: boolean;\n\tverificationStatus?: \"pending\" | \"verified\" | \"failed\";\n}\n\ninterface PlaidVerificationTrackerProps {\n\tcompanyId: string;\n\tplaidItemId?: string; // After token exchange\n\tonVerificationComplete?: (accounts: BankAccount[]) => void;\n}\n\ntype VerificationStatus = \"connecting\" | \"verifying\" | \"verified\" | \"failed\";\n\nexport function PlaidVerificationTracker({\n\tcompanyId,\n\tplaidItemId,\n\tonVerificationComplete,\n}: PlaidVerificationTrackerProps) {\n\tconst [status, setStatus] = useState<VerificationStatus>(\"connecting\");\n\tconst [accounts, setAccounts] = useState<BankAccount[]>([]);\n\tconst [lastChecked, setLastChecked] = useState<Date | null>(null);\n\tconst [isPolling, setIsPolling] = useState(true);\n\tconst [isChecking, setIsChecking] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [timeElapsed, setTimeElapsed] = useState(0);\n\n\tconst verifiedCount = accounts.filter((a) => a.verified).length;\n\tconst allVerified = accounts.length > 0 && verifiedCount === accounts.length;\n\n\t// Poll API every 15 seconds for verification status\n\tuseEffect(() => {\n\t\tif (!isPolling || allVerified || status === \"failed\") return;\n\n\t\tconst checkStatus = async () => {\n\t\t\tsetIsChecking(true);\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`/api/payments/plaid-status?companyId=${encodeURIComponent(companyId)}` +\n\t\t\t\t\t\t(plaidItemId ? `&itemId=${encodeURIComponent(plaidItemId)}` : \"\"),\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tif (data.success && data.accounts) {\n\t\t\t\t\tsetAccounts(data.accounts);\n\t\t\t\t\tsetStatus(data.status || \"verifying\");\n\t\t\t\t\tsetLastChecked(new Date());\n\n\t\t\t\t\t// Stop polling if all verified or failed\n\t\t\t\t\tif (data.allVerified) {\n\t\t\t\t\t\tsetStatus(\"verified\");\n\t\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\t\tonVerificationComplete?.(data.accounts);\n\t\t\t\t\t} else if (data.status === \"failed\") {\n\t\t\t\t\t\tsetStatus(\"failed\");\n\t\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\t\tsetError(data.error || \"Verification failed\");\n\t\t\t\t\t}\n\t\t\t\t} else if (!data.success) {\n\t\t\t\t\tsetError(data.error || \"Failed to check verification status\");\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"Plaid verification check failed:\", err);\n\t\t\t\tsetError(\"Unable to check status. We'll keep trying...\");\n\t\t\t} finally {\n\t\t\t\tsetIsChecking(false);\n\t\t\t}\n\t\t};\n\n\t\t// Initial check\n\t\tcheckStatus();\n\n\t\t// Poll every 15 seconds\n\t\tconst interval = setInterval(checkStatus, 15000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [\n\t\tcompanyId,\n\t\tplaidItemId,\n\t\tisPolling,\n\t\tallVerified,\n\t\tstatus,\n\t\tonVerificationComplete,\n\t]);\n\n\t// Track time elapsed\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => {\n\t\t\tsetTimeElapsed((t) => t + 1);\n\t\t}, 1000); // Update every second\n\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\tconst handleManualCheck = async () => {\n\t\tsetIsChecking(true);\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t`/api/payments/plaid-status?companyId=${encodeURIComponent(companyId)}` +\n\t\t\t\t\t(plaidItemId ? `&itemId=${encodeURIComponent(plaidItemId)}` : \"\"),\n\t\t\t);\n\t\t\tconst data = await response.json();\n\n\t\t\tif (data.success && data.accounts) {\n\t\t\t\tsetAccounts(data.accounts);\n\t\t\t\tsetStatus(data.status || \"verifying\");\n\t\t\t\tsetLastChecked(new Date());\n\n\t\t\t\tif (data.allVerified) {\n\t\t\t\t\tsetStatus(\"verified\");\n\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\tonVerificationComplete?.(data.accounts);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Manual check failed:\", err);\n\t\t} finally {\n\t\t\tsetIsChecking(false);\n\t\t}\n\t};\n\n\tconst getStatusInfo = () => {\n\t\tswitch (status) {\n\t\t\tcase \"connecting\":\n\t\t\t\treturn {\n\t\t\t\t\ticon: Clock,\n\t\t\t\t\ticonClass: \"text-blue-500\",\n\t\t\t\t\tbgClass: \"bg-blue-500/10\",\n\t\t\t\t\ttitle: \"Connecting to Bank\",\n\t\t\t\t\tdescription: \"Establishing secure connection with your bank...\",\n\t\t\t\t};\n\t\t\tcase \"verifying\":\n\t\t\t\treturn {\n\t\t\t\t\ticon: Loader2,\n\t\t\t\t\ticonClass: \"text-amber-500 animate-spin\",\n\t\t\t\t\tbgClass: \"bg-amber-500/10\",\n\t\t\t\t\ttitle: \"Verifying Accounts\",\n\t\t\t\t\tdescription: `${verifiedCount} of ${accounts.length} accounts verified`,\n\t\t\t\t};\n\t\t\tcase \"verified\":\n\t\t\t\treturn {\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t\ticonClass: \"text-green-500\",\n\t\t\t\t\tbgClass: \"bg-green-500/10\",\n\t\t\t\t\ttitle: \"Bank Connected!\",\n\t\t\t\t\tdescription: `${accounts.length} account${accounts.length !== 1 ? \"s\" : \"\"} verified and ready`,\n\t\t\t\t};\n\t\t\tcase \"failed\":\n\t\t\t\treturn {\n\t\t\t\t\ticon: AlertCircle,\n\t\t\t\t\ticonClass: \"text-destructive\",\n\t\t\t\t\tbgClass: \"bg-destructive/10\",\n\t\t\t\t\ttitle: \"Connection Failed\",\n\t\t\t\t\tdescription: error || \"Unable to verify bank connection\",\n\t\t\t\t};\n\t\t}\n\t};\n\n\tconst statusInfo = getStatusInfo();\n\tconst StatusIcon = statusInfo.icon;\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Status Header */}\n\t\t\t<div className=\"rounded-lg bg-muted/40 p-6 space-y-4\">\n\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex h-12 w-12 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\tstatusInfo.bgClass,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StatusIcon className={cn(\"h-6 w-6\", statusInfo.iconClass)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">{statusInfo.title}</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t{statusInfo.description}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{lastChecked && (\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-2\">\n\t\t\t\t\t\t\t\tLast checked: {lastChecked.toLocaleTimeString()}\n\t\t\t\t\t\t\t\t{isPolling &&\n\t\t\t\t\t\t\t\t\tstatus !== \"failed\" &&\n\t\t\t\t\t\t\t\t\t\" • Checking every 15 seconds...\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{timeElapsed > 0 && status === \"connecting\" && (\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\tTime elapsed: {Math.floor(timeElapsed / 60)}:\n\t\t\t\t\t\t\t\t{(timeElapsed % 60).toString().padStart(2, \"0\")}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Progress Bar */}\n\t\t\t\t{accounts.length > 0 &&\n\t\t\t\t\tstatus !== \"verified\" &&\n\t\t\t\t\tstatus !== \"failed\" && (\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"h-full bg-primary transition-all duration-500\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\twidth: `${(verifiedCount / accounts.length) * 100}%`,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t\t\t\t{Math.round((verifiedCount / accounts.length) * 100)}% complete\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Manual Check Button */}\n\t\t\t{status !== \"verified\" && status !== \"failed\" && accounts.length > 0 && (\n\t\t\t\t<Button\n\t\t\t\t\tonClick={handleManualCheck}\n\t\t\t\t\tdisabled={isChecking}\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t>\n\t\t\t\t\t{isChecking ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\tChecking Status...\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<RefreshCw className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tCheck Now\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Button>\n\t\t\t)}\n\n\t\t\t{/* Connected Accounts */}\n\t\t\t{accounts.length > 0 && (\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<h4 className=\"text-sm font-medium\">Connected Accounts</h4>\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t{accounts.map((account) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={account.id}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"rounded-lg p-4 space-y-2 transition-colors\",\n\t\t\t\t\t\t\t\t\taccount.verified\n\t\t\t\t\t\t\t\t\t\t? \"bg-green-500/10 ring-1 ring-green-500/20\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-muted/40\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"flex h-8 w-8 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\t\t\t\t\t\taccount.verified ? \"bg-green-500/20\" : \"bg-muted\",\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Building2\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"h-4 w-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\taccount.verified\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"text-green-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{account.name}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t{account.type} •••• {account.mask}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{account.verified ? (\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"h-5 w-5 text-amber-500 animate-spin\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{account.verified && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-400 font-medium\">\n\t\t\t\t\t\t\t\t\t\t✓ Verified and ready for payments\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{account.verificationStatus === \"failed\" && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-destructive font-medium\">\n\t\t\t\t\t\t\t\t\t\t✗ Verification failed - Please reconnect\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* What Plaid Accesses */}\n\t\t\t{status !== \"failed\" && (\n\t\t\t\t<div className=\"rounded-lg bg-blue-500/10 p-4 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Shield className=\"h-5 w-5 text-blue-500\" />\n\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\tWhat information does Plaid access?\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-2 text-sm text-muted-foreground\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">Account details:</strong>{\" \"}\n\t\t\t\t\t\t\tAccount name, type, and last 4 digits\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">Balance:</strong> Current\n\t\t\t\t\t\t\tavailable balance (for verification)\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">\n\t\t\t\t\t\t\t\tRouting/Account numbers:\n\t\t\t\t\t\t\t</strong>{\" \"}\n\t\t\t\t\t\t\tFor setting up ACH payments\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-xs mt-2\">\n\t\t\t\t\t\t\tPlaid uses bank-level encryption and never stores your login\n\t\t\t\t\t\t\tcredentials. We cannot access your account without your\n\t\t\t\t\t\t\tpermission.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* What Happens Next */}\n\t\t\t{status === \"verifying\" && (\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<h4 className=\"text-sm font-medium\">What's happening now?</h4>\n\t\t\t\t\t<div className=\"space-y-3 text-sm text-muted-foreground\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">1</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tPlaid is securely connecting to your bank to verify account\n\t\t\t\t\t\t\t\townership\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">2</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tConfirming account details and retrieving routing/account\n\t\t\t\t\t\t\t\tnumbers\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">3</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tSetting up secure ACH payment capabilities for deposits and\n\t\t\t\t\t\t\t\ttransfers\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Success Message */}\n\t\t\t{status === \"verified\" && (\n\t\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 space-y-2\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t<span className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\tBank successfully connected!\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tYour bank account{accounts.length > 1 ? \"s are\" : \" is\"} verified\n\t\t\t\t\t\tand ready. You can now:\n\t\t\t\t\t</p>\n\t\t\t\t\t<ul className=\"text-sm text-muted-foreground space-y-1 ml-6 list-disc\">\n\t\t\t\t\t\t<li>Receive customer payments via ACH</li>\n\t\t\t\t\t\t<li>Set up automatic payouts to your bank</li>\n\t\t\t\t\t\t<li>Track transaction history in real-time</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Error State */}\n\t\t\t{status === \"failed\" && (\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"rounded-lg bg-destructive/10 p-4 space-y-3\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-destructive\">\n\t\t\t\t\t\t\t\t\tConnection Failed\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t{error ||\n\t\t\t\t\t\t\t\t\t\t\"We couldn't verify your bank connection. Please try again.\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t<h4 className=\"text-sm font-medium\">Common issues:</h4>\n\t\t\t\t\t\t<ul className=\"text-sm text-muted-foreground space-y-2 ml-4 list-disc\">\n\t\t\t\t\t\t\t<li>Bank login credentials were incorrect</li>\n\t\t\t\t\t\t\t<li>Bank requires multi-factor authentication</li>\n\t\t\t\t\t\t\t<li>Account is locked or restricted</li>\n\t\t\t\t\t\t\t<li>Bank is temporarily unavailable</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Button variant=\"default\" className=\"w-full\">\n\t\t\t\t\t\t<RefreshCw className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tTry Again with Plaid\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Troubleshooting */}\n\t\t\t{timeElapsed > 120 && status === \"verifying\" && (\n\t\t\t\t<div className=\"rounded-lg bg-amber-500/10 p-4 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\tTaking longer than expected?\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ul className=\"text-sm text-muted-foreground mt-2 space-y-1 list-disc ml-4\">\n\t\t\t\t\t\t\t\t<li>Some banks take a few minutes to verify</li>\n\t\t\t\t\t\t\t\t<li>Make sure you completed the Plaid connection flow</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tCheck if you received an email from your bank to confirm the\n\t\t\t\t\t\t\t\t\tconnection\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>Try the \"Check Now\" button above to force a refresh</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Security Note */}\n\t\t\t<div className=\"rounded-lg border border-muted p-4 space-y-2\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<Info className=\"h-4 w-4\" />\n\t\t\t\t\t<p className=\"text-sm font-medium\">Your security is our priority</p>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\tPlaid uses the same security protocols as banks. Your login\n\t\t\t\t\tcredentials are encrypted and never stored by us or Plaid. You can\n\t\t\t\t\tdisconnect your bank at any time from Settings.\n\t\t\t\t</p>\n\t\t\t\t<Button variant=\"link\" size=\"sm\" className=\"h-auto p-0\">\n\t\t\t\t\t<ExternalLink className=\"mr-1 h-3 w-3\" />\n\t\t\t\t\tLearn more about Plaid security\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Phone & SMS Step - Real Number Porting\n *\n * Integrates with Twilio porting API to:\n * - Check number portability\n * - Collect current carrier info\n * - Submit real porting orders\n * - Track porting status\n */\n\nimport {\n\tAlertTriangle,\n\tArrowRightLeft,\n\tBuilding2,\n\tCheck,\n\tCheckCircle2,\n\tClock,\n\tInfo,\n\tLoader2,\n\tMessageSquare,\n\tShield,\n\tSkipForward,\n\tSmartphone,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { checkPortability } from \"@/actions/phone-porting\";\nimport { PortingStatusTracker } from \"@/components/onboarding/status-tracking/porting-status-tracker\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n\tformatCurrency,\n\tPHONE_NEW_NUMBER_MONTHLY_FEE,\n\tPHONE_NEW_NUMBER_SETUP_FEE,\n\tPHONE_PORTING_FEE,\n} from \"@/lib/onboarding/onboarding-fees\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { getEstimatedFocDate } from \"@/lib/twilio/porting\";\nimport { cn } from \"@/lib/utils\";\n\ntype PhoneSetupOption = \"new\" | \"port\" | \"skip\";\n\nconst SETUP_OPTIONS: {\n\tid: PhoneSetupOption;\n\ttitle: string;\n\tsubtitle: string;\n\ticon: React.ElementType;\n\tpricing?: string;\n}[] = [\n\t{\n\t\tid: \"new\",\n\t\ttitle: \"Get a new number\",\n\t\tsubtitle: \"Ready instantly\",\n\t\ticon: Smartphone,\n\t\tpricing: `${formatCurrency(PHONE_NEW_NUMBER_SETUP_FEE)} setup + ${formatCurrency(PHONE_NEW_NUMBER_MONTHLY_FEE)}/month`,\n\t},\n\t{\n\t\tid: \"port\",\n\t\ttitle: \"Port existing number\",\n\t\tsubtitle: \"Keep your current number\",\n\t\ticon: ArrowRightLeft,\n\t\tpricing: `${formatCurrency(PHONE_PORTING_FEE)} one-time`,\n\t},\n\t{\n\t\tid: \"skip\",\n\t\ttitle: \"Skip for now\",\n\t\tsubtitle: \"Set up later\",\n\t\ticon: SkipForward,\n\t},\n];\n\ninterface PortabilityCheck {\n\tchecked: boolean;\n\tportable: boolean | null;\n\tcarrier: string | null;\n\terror: string | null;\n}\n\nexport function PhoneStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [checking, setChecking] = useState(false);\n\tconst [portability, setPortability] = useState<PortabilityCheck>({\n\t\tchecked: false,\n\t\tportable: null,\n\t\tcarrier: null,\n\t\terror: null,\n\t});\n\n\t// Porting order details\n\tconst [currentCarrier, setCurrentCarrier] = useState(\"\");\n\tconst [accountNumber, setAccountNumber] = useState(\"\");\n\tconst [pinPassword, setPinPassword] = useState(\"\");\n\tconst [billingPhone, setBillingPhone] = useState(\"\");\n\tconst [portingSubmitted, setPortingSubmitted] = useState(false);\n\tconst [portingOrderId, setPortingOrderId] = useState<string | null>(null);\n\n\tconst estimatedFocDate = getEstimatedFocDate();\n\n\tconst handleCheckPortability = async () => {\n\t\tif (!data.phoneNumber) return;\n\n\t\tsetChecking(true);\n\t\tsetPortability({\n\t\t\tchecked: false,\n\t\t\tportable: null,\n\t\t\tcarrier: null,\n\t\t\terror: null,\n\t\t});\n\n\t\ttry {\n\t\t\tconst result = await checkPortability(data.phoneNumber);\n\n\t\t\tif (result.success) {\n\t\t\t\tsetPortability({\n\t\t\t\t\tchecked: true,\n\t\t\t\t\tportable: result.portable || false,\n\t\t\t\t\tcarrier: result.carrier || null,\n\t\t\t\t\terror: result.portable\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: \"This number cannot be ported. Please contact your current carrier.\",\n\t\t\t\t});\n\n\t\t\t\t// Pre-fill carrier name if detected\n\t\t\t\tif (result.carrier) {\n\t\t\t\t\tsetCurrentCarrier(result.carrier);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetPortability({\n\t\t\t\t\tchecked: true,\n\t\t\t\t\tportable: null,\n\t\t\t\t\tcarrier: null,\n\t\t\t\t\terror: result.error || \"Failed to check portability\",\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tsetPortability({\n\t\t\t\tchecked: true,\n\t\t\t\tportable: null,\n\t\t\t\tcarrier: null,\n\t\t\t\terror: \"Failed to check portability. Please try again.\",\n\t\t\t});\n\t\t} finally {\n\t\t\tsetChecking(false);\n\t\t}\n\t};\n\n\tconst canProceedWithPorting =\n\t\tportability.checked &&\n\t\tportability.portable &&\n\t\tdata.phoneNumber &&\n\t\tcurrentCarrier &&\n\t\taccountNumber;\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Phone & SMS</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tA dedicated business line keeps work and personal separate.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Info Card - What is phone porting? */}\n\t\t\t{!data.phoneSetupType && (\n\t\t\t\t<div className=\"rounded-lg border bg-muted/30 p-4\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"w-full flex items-center justify-between text-left\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tconst content = e.currentTarget.nextElementSibling as HTMLElement;\n\t\t\t\t\t\t\tif (content) {\n\t\t\t\t\t\t\t\tcontent.classList.toggle(\"hidden\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Info className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\tNot sure which option to choose?\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tShow comparison\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"hidden mt-4 pt-4 border-t\">\n\t\t\t\t\t\t<div className=\"grid sm:grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div className=\"space-y-2 p-3 rounded bg-background\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">Get a new number</p>\n\t\t\t\t\t\t\t\t<ul className=\"space-y-1 text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tReady in minutes\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tNo paperwork required\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tChoose your area code\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2 text-amber-600\">\n\t\t\t\t\t\t\t\t\t\t<AlertTriangle className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\tCustomers need new number\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-primary font-medium pt-2\">\n\t\t\t\t\t\t\t\t\tBest for: New businesses, side projects\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"space-y-2 p-3 rounded bg-background\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">Port existing number</p>\n\t\t\t\t\t\t\t\t<ul className=\"space-y-1 text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tKeep your current number\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tNo customer confusion\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\tOne-time fee only\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className=\"flex items-center gap-2 text-amber-600\">\n\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\tTakes 2-4 weeks\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-primary font-medium pt-2\">\n\t\t\t\t\t\t\t\t\tBest for: Established businesses\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Setup Options */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<label className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\tChoose setup method\n\t\t\t\t</label>\n\t\t\t\t<div className=\"grid gap-3\">\n\t\t\t\t\t{SETUP_OPTIONS.map((option) => {\n\t\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\t\tconst isSelected = data.phoneSetupType === option.id;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t// Update phone setup type\n\t\t\t\t\t\t\t\t\tupdateData({ phoneSetupType: option.id });\n\n\t\t\t\t\t\t\t\t\t// Update billing counts based on selection\n\t\t\t\t\t\t\t\t\tif (option.id === \"new\") {\n\t\t\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\t\t\tnewPhoneNumberCount: 1,\n\t\t\t\t\t\t\t\t\t\t\tphonePortingCount: 0,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else if (option.id === \"port\") {\n\t\t\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\t\t\tphonePortingCount: 1,\n\t\t\t\t\t\t\t\t\t\t\tnewPhoneNumberCount: 0,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\t\t\tphonePortingCount: 0,\n\t\t\t\t\t\t\t\t\t\t\tnewPhoneNumberCount: 0,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Reset portability check when changing options\n\t\t\t\t\t\t\t\t\tif (option.id !== \"port\") {\n\t\t\t\t\t\t\t\t\t\tsetPortability({\n\t\t\t\t\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\t\t\t\t\tportable: null,\n\t\t\t\t\t\t\t\t\t\t\tcarrier: null,\n\t\t\t\t\t\t\t\t\t\t\terror: null,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex items-center gap-4 rounded-lg border-2 p-4 text-left transition-all\",\n\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t\t\t: \"border-transparent bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isSelected && (\n\t\t\t\t\t\t\t\t\t<div className=\"absolute top-3 right-3\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{option.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{option.subtitle}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{option.pricing && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium text-primary mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t{option.pricing}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* New Number Configuration */}\n\t\t\t{data.phoneSetupType === \"new\" && (\n\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label htmlFor=\"areaCode\">Preferred area code</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"areaCode\"\n\t\t\t\t\t\t\tplaceholder=\"e.g., 555\"\n\t\t\t\t\t\t\tmaxLength={3}\n\t\t\t\t\t\t\tclassName=\"w-[120px]\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\tOptional. We'll match your location if not specified.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t<MessageSquare className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">Enable SMS</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tSend appointment reminders\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={data.smsEnabled}\n\t\t\t\t\t\t\tonCheckedChange={(v) => updateData({ smsEnabled: v })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Porting Configuration - With Real Twilio Integration */}\n\t\t\t{data.phoneSetupType === \"port\" && (\n\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t{/* Step 1: Enter Number & Check Portability */}\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"portNumber\">\n\t\t\t\t\t\t\t\tNumber to port <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tid=\"portNumber\"\n\t\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\t\t\tvalue={data.phoneNumber}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tupdateData({ phoneNumber: e.target.value });\n\t\t\t\t\t\t\t\t\t\t// Reset portability check when number changes\n\t\t\t\t\t\t\t\t\t\tif (portability.checked) {\n\t\t\t\t\t\t\t\t\t\t\tsetPortability({\n\t\t\t\t\t\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\t\t\t\t\t\tportable: null,\n\t\t\t\t\t\t\t\t\t\t\t\tcarrier: null,\n\t\t\t\t\t\t\t\t\t\t\t\terror: null,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\tonClick={handleCheckPortability}\n\t\t\t\t\t\t\t\t\tdisabled={!data.phoneNumber || checking}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{checking ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t\t\t\tChecking...\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\"Check\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Portability Result */}\n\t\t\t\t\t\t{portability.checked && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{portability.portable && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3 bg-green-500/10 rounded-lg p-4\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\t\t\t\t\t\tNumber is portable!\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{portability.carrier && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tCurrent carrier detected: {portability.carrier}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{portability.error && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3 bg-destructive/10 rounded-lg p-4\">\n\t\t\t\t\t\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t\t{portability.error}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Step 2: Current Carrier Info (only if portable) */}\n\t\t\t\t\t{portability.checked && portability.portable && (\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t{/* Critical Warning Banner */}\n\t\t\t\t\t\t\t<div className=\"rounded-lg border-2 border-destructive bg-destructive/5 p-5\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-destructive/10 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-destructive\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1 space-y-3\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-base font-semibold text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t\tDo Not Cancel Your Current Service\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\tCanceling your service with {portability.carrier} will\n\t\t\t\t\t\t\t\t\t\t\t\timmediately cancel the port and you will lose your phone\n\t\t\t\t\t\t\t\t\t\t\t\tnumber permanently.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tYou must keep your {portability.carrier} service active\n\t\t\t\t\t\t\t\t\t\t\tand paid until you receive confirmation that the port is\n\t\t\t\t\t\t\t\t\t\t\tcomplete.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Porting Information Card */}\n\t\t\t\t\t\t\t<div className=\"rounded-lg border bg-card p-6\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-semibold mb-4\">What to Expect</h4>\n\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Processing Time</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t2-4 weeks is standard for all carriers. This timeline is\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolled by {portability.carrier} and federal\n\t\t\t\t\t\t\t\t\t\t\t\tregulations.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Third-Party Service</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\tWe use Twilio, a professional porting service, to\n\t\t\t\t\t\t\t\t\t\t\t\tcoordinate with {portability.carrier}. Neither we nor\n\t\t\t\t\t\t\t\t\t\t\t\tTwilio can speed up the process.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">What You Need to Do</p>\n\t\t\t\t\t\t\t\t\t\t\t<ul className=\"text-sm text-muted-foreground space-y-1 ml-0 list-none\">\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t• Keep your {portability.carrier} service active\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li>• Pay your {portability.carrier} bills on time</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li>• Check email daily for updates</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t• Do not make any changes to your{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{portability.carrier} account\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Carrier Info Section */}\n\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4 className=\"font-semibold\">Carrier Information</h4>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\tProvide your current carrier details to submit the porting\n\t\t\t\t\t\t\t\t\t\torder.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"grid gap-4 sm:grid-cols-2\">\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2 sm:col-span-2\">\n\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"currentCarrier\">\n\t\t\t\t\t\t\t\t\t\t\tCurrent carrier name{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"currentCarrier\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"e.g., Verizon, AT&T, T-Mobile\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={currentCarrier}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setCurrentCarrier(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"accountNumber\">\n\t\t\t\t\t\t\t\t\t\t\tAccount number <span className=\"text-destructive\">*</span>\n\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"accountNumber\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Account number with current carrier\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={accountNumber}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAccountNumber(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"pinPassword\">PIN / Password</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"pinPassword\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"If required by carrier\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={pinPassword}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setPinPassword(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tSome carriers require a PIN\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2 sm:col-span-2\">\n\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"billingPhone\">\n\t\t\t\t\t\t\t\t\t\t\tBilling telephone number (BTN)\n\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tid=\"billingPhone\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"(555) 123-4567\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={billingPhone}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setBillingPhone(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tThe main phone number on your current carrier account\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* SMS Toggle */}\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between rounded-lg border bg-card p-4\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t<MessageSquare className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">Enable SMS</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\tActivates after porting completes\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={data.smsEnabled}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) => updateData({ smsEnabled: v })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Submit porting order OR show tracker */}\n\t\t\t\t\t\t\t{canProceedWithPorting && !portingSubmitted && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t// Save porting info\n\t\t\t\t\t\t\t\t\t\tupdateData({\n\t\t\t\t\t\t\t\t\t\t\tportingStatus: \"submitted\",\n\t\t\t\t\t\t\t\t\t\t\tportingCarrier: currentCarrier,\n\t\t\t\t\t\t\t\t\t\t\tportingAccountNumber: accountNumber,\n\t\t\t\t\t\t\t\t\t\t\tportingPin: pinPassword,\n\t\t\t\t\t\t\t\t\t\t\tportingBillingPhone: billingPhone,\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t// In production, this would call a server action to submit to Twilio\n\t\t\t\t\t\t\t\t\t\t// For now, simulate getting an order ID\n\t\t\t\t\t\t\t\t\t\tconst mockOrderId = `port_${Date.now()}`;\n\t\t\t\t\t\t\t\t\t\tsetPortingOrderId(mockOrderId);\n\t\t\t\t\t\t\t\t\t\tsetPortingSubmitted(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\tvariant=\"default\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\tSubmit porting order\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Show porting status tracker after submission */}\n\t\t\t\t\t\t\t{portingSubmitted && portingOrderId && (\n\t\t\t\t\t\t\t\t<div className=\"mt-6 space-y-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t\t\t<span>Porting order submitted successfully</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<PortingStatusTracker\n\t\t\t\t\t\t\t\t\t\tportingOrderId={portingOrderId}\n\t\t\t\t\t\t\t\t\t\tphoneNumber={data.phoneNumber}\n\t\t\t\t\t\t\t\t\t\tcarrier={currentCarrier}\n\t\t\t\t\t\t\t\t\t\testimatedFocDate={estimatedFocDate}\n\t\t\t\t\t\t\t\t\t\tonStatusChange={(status) => {\n\t\t\t\t\t\t\t\t\t\t\tupdateData({ portingStatus: status });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* SMS Note */}\n\t\t\t{data.smsEnabled && data.phoneSetupType !== \"skip\" && (\n\t\t\t\t<div className=\"flex items-start gap-3 text-sm text-muted-foreground bg-muted/40 rounded-lg p-4\">\n\t\t\t\t\t<Shield className=\"h-4 w-4 flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSMS requires business verification (10DLC). We'll guide you through\n\t\t\t\t\t\tthis after setup using the business information you provided.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4022a70e9e6fd1dc0794d334950abd1e0f4f60b121\":\"checkPortability\"},\"apps/web/src/actions/phone-porting.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var checkPortability=/*#__PURE__*/createServerReference(\"4022a70e9e6fd1dc0794d334950abd1e0f4f60b121\",callServer,void 0,findSourceMapURL,\"checkPortability\");","\"use client\";\n\n/**\n * Porting Status Tracker\n *\n * Comprehensive tracking for phone number porting (2-4 week process)\n * - Polls Twilio API every 30 seconds for status updates\n * - Shows timeline with current stage\n * - Educational content (dos and don'ts)\n * - Estimated completion date\n * - Support contact info\n */\n\nimport {\n\tAlertCircle,\n\tAlertTriangle,\n\tBuilding2,\n\tCalendar,\n\tCheckCircle,\n\tCheckCircle2,\n\tCircle,\n\tClock,\n\tExternalLink,\n\tInfo,\n\tLoader2,\n\tPhone,\n\tXCircle,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ntype PortingStatus =\n\t| \"draft\"\n\t| \"in-process\"\n\t| \"submitted\"\n\t| \"exception\"\n\t| \"foc-date-confirmed\"\n\t| \"ported\"\n\t| \"cancelled\";\n\ninterface PortingStatusTrackerProps {\n\tportingOrderId: string;\n\tphoneNumber: string;\n\tcarrier: string;\n\testimatedFocDate: string;\n\tonStatusChange?: (status: PortingStatus) => void;\n}\n\nconst STATUS_INFO: Record<\n\tPortingStatus,\n\t{\n\t\tlabel: string;\n\t\tdescription: string;\n\t\ticon: React.ElementType;\n\t\tcolor: string;\n\t}\n> = {\n\tdraft: {\n\t\tlabel: \"Draft\",\n\t\tdescription: \"Order created, not yet submitted\",\n\t\ticon: Circle,\n\t\tcolor: \"text-muted-foreground\",\n\t},\n\t\"in-process\": {\n\t\tlabel: \"Processing\",\n\t\tdescription: \"Reviewing your porting request\",\n\t\ticon: Loader2,\n\t\tcolor: \"text-blue-500\",\n\t},\n\tsubmitted: {\n\t\tlabel: \"Submitted to Carrier\",\n\t\tdescription: \"Sent to your current carrier for approval\",\n\t\ticon: Clock,\n\t\tcolor: \"text-amber-500\",\n\t},\n\texception: {\n\t\tlabel: \"Needs Attention\",\n\t\tdescription: \"Additional information required\",\n\t\ticon: AlertTriangle,\n\t\tcolor: \"text-destructive\",\n\t},\n\t\"foc-date-confirmed\": {\n\t\tlabel: \"Scheduled\",\n\t\tdescription: \"Porting date confirmed with carrier\",\n\t\ticon: Calendar,\n\t\tcolor: \"text-green-500\",\n\t},\n\tported: {\n\t\tlabel: \"Complete\",\n\t\tdescription: \"Number successfully ported!\",\n\t\ticon: CheckCircle2,\n\t\tcolor: \"text-green-500\",\n\t},\n\tcancelled: {\n\t\tlabel: \"Cancelled\",\n\t\tdescription: \"Porting order was cancelled\",\n\t\ticon: AlertCircle,\n\t\tcolor: \"text-muted-foreground\",\n\t},\n};\n\nconst TIMELINE_STAGES = [\n\t{ id: \"submitted\", label: \"Submitted\" },\n\t{ id: \"in-process\", label: \"Processing\" },\n\t{ id: \"foc-date-confirmed\", label: \"Scheduled\" },\n\t{ id: \"ported\", label: \"Complete\" },\n];\n\nexport function PortingStatusTracker({\n\tportingOrderId,\n\tphoneNumber,\n\tcarrier,\n\testimatedFocDate,\n\tonStatusChange,\n}: PortingStatusTrackerProps) {\n\tconst [currentStatus, setCurrentStatus] =\n\t\tuseState<PortingStatus>(\"submitted\");\n\tconst [lastUpdated, setLastUpdated] = useState(new Date());\n\tconst [isPolling, setIsPolling] = useState(true);\n\tconst [error, setError] = useState<string | null>(null);\n\n\t// Poll Twilio API every 30 seconds\n\tuseEffect(() => {\n\t\tif (!isPolling) return;\n\n\t\tconst pollStatus = async () => {\n\t\t\ttry {\n\t\t\t\t// Call server action to get porting status\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`/api/phone/porting-status?orderId=${portingOrderId}`,\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tif (data.success && data.status) {\n\t\t\t\t\tsetCurrentStatus(data.status as PortingStatus);\n\t\t\t\t\tsetLastUpdated(new Date());\n\t\t\t\t\tonStatusChange?.(data.status as PortingStatus);\n\n\t\t\t\t\t// Stop polling if complete or cancelled\n\t\t\t\t\tif (data.status === \"ported\" || data.status === \"cancelled\") {\n\t\t\t\t\t\tsetIsPolling(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tsetError(\"Unable to check status. We'll keep trying...\");\n\t\t\t}\n\t\t};\n\n\t\t// Initial poll\n\t\tpollStatus();\n\n\t\t// Poll every 30 seconds\n\t\tconst interval = setInterval(pollStatus, 30000);\n\n\t\treturn () => clearInterval(interval);\n\t}, [portingOrderId, isPolling, onStatusChange]);\n\n\tconst statusInfo = STATUS_INFO[currentStatus];\n\tconst StatusIcon = statusInfo.icon;\n\n\tconst getCurrentStageIndex = () => {\n\t\tconst stageOrder = [\n\t\t\t\"submitted\",\n\t\t\t\"in-process\",\n\t\t\t\"foc-date-confirmed\",\n\t\t\t\"ported\",\n\t\t];\n\t\treturn stageOrder.indexOf(currentStatus);\n\t};\n\n\tconst currentStageIndex = getCurrentStageIndex();\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Current Status Header */}\n\t\t\t<div className=\"rounded-lg bg-muted/40 p-6 space-y-4\">\n\t\t\t\t<div className=\"flex items-start gap-4\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex h-12 w-12 items-center justify-center rounded-full bg-background\",\n\t\t\t\t\t\t\tstatusInfo.icon === Loader2 && \"animate-pulse\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StatusIcon\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"h-6 w-6\",\n\t\t\t\t\t\t\t\tstatusInfo.color,\n\t\t\t\t\t\t\t\tstatusInfo.icon === Loader2 && \"animate-spin\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">{statusInfo.label}</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t{statusInfo.description}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-2\">\n\t\t\t\t\t\t\tLast updated: {lastUpdated.toLocaleTimeString()}\n\t\t\t\t\t\t\t{isPolling && \" • Checking for updates...\"}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Timeline */}\n\t\t\t\t<div className=\"flex items-center justify-between gap-2 pt-4\">\n\t\t\t\t\t{TIMELINE_STAGES.map((stage, index) => {\n\t\t\t\t\t\tconst isComplete = index < currentStageIndex;\n\t\t\t\t\t\tconst isCurrent = index === currentStageIndex;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={stage.id} className=\"flex items-center gap-2 flex-1\">\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center gap-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"flex h-8 w-8 items-center justify-center rounded-full text-xs font-medium\",\n\t\t\t\t\t\t\t\t\t\t\tisComplete && \"bg-green-500 text-white\",\n\t\t\t\t\t\t\t\t\t\t\tisCurrent &&\n\t\t\t\t\t\t\t\t\t\t\t\t\"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2\",\n\t\t\t\t\t\t\t\t\t\t\t!isComplete &&\n\t\t\t\t\t\t\t\t\t\t\t\t!isCurrent &&\n\t\t\t\t\t\t\t\t\t\t\t\t\"bg-muted text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{isComplete ? (\n\t\t\t\t\t\t\t\t\t\t\t<CheckCircle className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\tindex + 1\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-center font-medium\">\n\t\t\t\t\t\t\t\t\t\t{stage.label}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{index < TIMELINE_STAGES.length - 1 && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"h-0.5 flex-1\",\n\t\t\t\t\t\t\t\t\t\t\tisComplete ? \"bg-green-500\" : \"bg-muted\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Quick Reference */}\n\t\t\t<div className=\"rounded-lg border bg-card p-5\">\n\t\t\t\t<h4 className=\"font-semibold mb-4\">Important Information</h4>\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Clock className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Timeline</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t2-4 weeks is standard for all carriers\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Building2 className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Porting Service</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tTwilio coordinates the port with {carrier}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Info className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">Timeline Control</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t{carrier} controls the processing time - we cannot speed it up\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* CRITICAL: Do Not Cancel Service Warning */}\n\t\t\t<div className=\"rounded-lg bg-destructive/15 ring-2 ring-destructive/50 p-5 space-y-3\">\n\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t<div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-destructive flex-shrink-0\">\n\t\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-white\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<p className=\"text-base font-bold text-destructive\">\n\t\t\t\t\t\t\tCRITICAL: DO NOT Cancel Your Service!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-sm text-foreground mt-2 font-medium\">\n\t\t\t\t\t\t\tCanceling your service with {carrier} WILL CANCEL THE PORT and\n\t\t\t\t\t\t\tyou'll lose your phone number permanently!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-2\">\n\t\t\t\t\t\t\tKeep paying {carrier} and keep your service active until you\n\t\t\t\t\t\t\treceive confirmation that the port is complete. This is the #1\n\t\t\t\t\t\t\tmistake that cancels ports.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Estimated Completion & Timeline */}\n\t\t\t<div className=\"rounded-lg border bg-card p-5 space-y-4\">\n\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t<Calendar className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t<p className=\"text-sm font-medium\">Estimated Completion Date</p>\n\t\t\t\t\t\t<p className=\"text-base font-semibold mt-1\">\n\t\t\t\t\t\t\t{new Date(estimatedFocDate).toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\t\t\tweekday: \"long\",\n\t\t\t\t\t\t\t\tmonth: \"long\",\n\t\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-3 text-sm\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Clock className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\tStandard Timeline: 2-4 weeks\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tThis is the industry-standard timeline for all carriers due to\n\t\t\t\t\t\t\t\tfederal regulations and verification requirements.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Building2 className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">Third-Party Service</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tWe use Twilio, a professional porting service, to coordinate\n\t\t\t\t\t\t\t\twith {carrier}. The timeline is controlled by {carrier} and\n\t\t\t\t\t\t\t\tfederal regulations - not by us or Twilio.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Info className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-foreground\">What You Can Expect</p>\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tWe'll email you with updates throughout the process and notify\n\t\t\t\t\t\t\t\tyou immediately when the port is complete. The timeline can vary\n\t\t\t\t\t\t\t\tbased on {carrier}'s internal processes and workload. We\n\t\t\t\t\t\t\t\tappreciate your patience!\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Porting Details */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<h4 className=\"text-sm font-medium\">Porting Details</h4>\n\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Phone Number:</span>\n\t\t\t\t\t\t<span className=\"font-medium\">{phoneNumber}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Current Carrier:</span>\n\t\t\t\t\t\t<span className=\"font-medium\">{carrier}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">Order ID:</span>\n\t\t\t\t\t\t<span className=\"font-mono text-xs\">\n\t\t\t\t\t\t\t{portingOrderId.slice(0, 12)}...\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Exception Alert */}\n\t\t\t{currentStatus === \"exception\" && (\n\t\t\t\t<div className=\"rounded-lg bg-destructive/10 p-4 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-destructive\">Action Required</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tYour current carrier needs additional information to complete\n\t\t\t\t\t\t\t\tthe port. Please check your email for details or contact\n\t\t\t\t\t\t\t\tsupport.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button variant=\"destructive\" className=\"w-full\">\n\t\t\t\t\t\t<Phone className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tContact Support\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Critical Instructions */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<h4 className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t<Info className=\"h-5 w-5\" />\n\t\t\t\t\tCritical Instructions - Must Read!\n\t\t\t\t</h4>\n\n\t\t\t\t<div className=\"rounded-lg border bg-card p-5 space-y-4\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-green-500/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-foreground mb-3\">\n\t\t\t\t\t\t\t\tYou must do these:\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ul className=\"text-sm text-muted-foreground space-y-2 list-disc list-inside\">\n\t\t\t\t\t\t\t\t<li className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\tKeep your service ACTIVE with {carrier} until you receive our\n\t\t\t\t\t\t\t\t\tcompletion email - usually 2-4 weeks\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li className=\"font-medium text-foreground\">\n\t\t\t\t\t\t\t\t\tContinue paying {carrier}'s bills on time - do NOT let your\n\t\t\t\t\t\t\t\t\taccount go past due\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tKeep your account number and PIN/password accessible in case{\" \"}\n\t\t\t\t\t\t\t\t\t{carrier} contacts you for verification\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tCheck your email daily for updates from us and {carrier} -\n\t\t\t\t\t\t\t\t\tthey may request additional information\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tBe patient - this is the standard industry timeline for ALL\n\t\t\t\t\t\t\t\t\tcarriers, not just {carrier}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tContact us immediately if {carrier} reaches out about\n\t\t\t\t\t\t\t\t\tcanceling your service\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"rounded-lg border-2 border-destructive bg-destructive/5 p-5 space-y-4\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-destructive/20 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<XCircle className=\"h-5 w-5 text-destructive\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<p className=\"text-sm font-semibold text-destructive mb-3\">\n\t\t\t\t\t\t\t\tNever do these (port will fail!):\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ul className=\"text-sm text-foreground space-y-2 list-disc list-inside\">\n\t\t\t\t\t\t\t\t<li className=\"font-bold text-destructive\">\n\t\t\t\t\t\t\t\t\tDO NOT cancel, disconnect, or terminate your service with{\" \"}\n\t\t\t\t\t\t\t\t\t{carrier} - this IMMEDIATELY cancels the port and you'll lose\n\t\t\t\t\t\t\t\t\tyour number forever!\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li className=\"font-medium\">\n\t\t\t\t\t\t\t\t\tDO NOT change your account information, billing address, or\n\t\t\t\t\t\t\t\t\tPIN with {carrier} during porting\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li className=\"font-medium\">\n\t\t\t\t\t\t\t\t\tDO NOT request a new SIM card, phone number change, or plan\n\t\t\t\t\t\t\t\t\tchange from {carrier}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tDO NOT port to another carrier simultaneously - this will\n\t\t\t\t\t\t\t\t\tcause both ports to fail\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tDO NOT let your account become delinquent, past due, or\n\t\t\t\t\t\t\t\t\tsuspended with {carrier}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tDO NOT contact {carrier} asking to \"speed up\" the port - they\n\t\t\t\t\t\t\t\t\tcontrol the timeline\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"rounded-lg border bg-card p-5 space-y-3\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<Clock className=\"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5\" />\n\t\t\t\t\t\t<p className=\"text-sm font-medium text-foreground\">\n\t\t\t\t\t\t\tWhy does it take 2-4 weeks?\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tFederal regulations (FCC rules) require carriers to verify account\n\t\t\t\t\t\townership and prevent fraud. {carrier} must:\n\t\t\t\t\t</p>\n\t\t\t\t\t<ul className=\"text-sm text-muted-foreground space-y-1 list-disc list-inside ml-4\">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tVerify your account details match our porting request (1-3 days)\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>Confirm you're the authorized account holder (2-5 days)</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCheck for outstanding balances or contract obligations (1-2 days)\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tSchedule the port date (FOC) with Twilio (1-2 days notice\n\t\t\t\t\t\t\trequired)\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tComplete the actual number transfer (happens automatically on FOC\n\t\t\t\t\t\t\tdate)\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-2\">\n\t\t\t\t\t\tThis is not unique to us - ALL phone companies must follow this same\n\t\t\t\t\t\tprocess. We appreciate your patience!\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* What Happens Next */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<h4 className=\"text-sm font-semibold\">\n\t\t\t\t\tThe porting process (controlled by {carrier} and Twilio)\n\t\t\t\t</h4>\n\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\tNote: Twilio is our third-party porting service provider. Neither we\n\t\t\t\t\tnor Twilio control the timeline - {carrier} does.\n\t\t\t\t</p>\n\t\t\t\t<div className=\"space-y-3 text-sm text-muted-foreground\">\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">1</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">Submission (Day 1):</strong>{\" \"}\n\t\t\t\t\t\t\tTwilio has submitted your porting request to {carrier} via the\n\t\t\t\t\t\t\tindustry-standard LSR (Local Service Request) system. {carrier}{\" \"}\n\t\t\t\t\t\t\thas 24-48 hours to acknowledge it.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">2</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">\n\t\t\t\t\t\t\t\tVerification (1-2 weeks):\n\t\t\t\t\t\t\t</strong>{\" \"}\n\t\t\t\t\t\t\t{carrier} will verify your account details, check for outstanding\n\t\t\t\t\t\t\tbalances, and approve the port. This is entirely controlled by{\" \"}\n\t\t\t\t\t\t\t{carrier}'s internal processes - we cannot speed this up.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">3</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">\n\t\t\t\t\t\t\t\tScheduling (FOC Date):\n\t\t\t\t\t\t\t</strong>{\" \"}\n\t\t\t\t\t\t\tOnce {carrier} approves, Twilio will coordinate with them to\n\t\t\t\t\t\t\tschedule the \"Firm Order Commitment\" (FOC) date. You'll receive 24\n\t\t\t\t\t\t\thours notice before the switch.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-primary/10 flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-primary\">4</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<strong className=\"text-foreground\">Completion:</strong> On the\n\t\t\t\t\t\t\tFOC date, {carrier} will release your number and Twilio will\n\t\t\t\t\t\t\tactivate it on our platform. This happens automatically and\n\t\t\t\t\t\t\tusually takes a few minutes. You'll receive a confirmation email\n\t\t\t\t\t\t\tfrom us.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-3 mt-3\">\n\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t<strong className=\"text-foreground\">Important:</strong> We monitor\n\t\t\t\t\t\tthe port status daily and will email you immediately if {carrier}{\" \"}\n\t\t\t\t\t\trequests additional information or if there are any issues. The\n\t\t\t\t\t\tentire process is automated between Twilio and {carrier} - we cannot\n\t\t\t\t\t\tmanually intervene to speed it up.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Support */}\n\t\t\t<div className=\"rounded-lg border border-muted p-4 space-y-3\">\n\t\t\t\t<p className=\"text-sm font-medium\">Need help or have questions?</p>\n\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-2\">\n\t\t\t\t\t<Button variant=\"outline\" className=\"flex-1\">\n\t\t\t\t\t\t<Phone className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tCall Support\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"outline\" className=\"flex-1\">\n\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\tView Help Center\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t<AlertCircle className=\"inline h-3 w-3 mr-1\" />\n\t\t\t\t\t{error}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/**\n * Twilio Number Porting API\n *\n * Stub implementation - Twilio number porting requires regulatory API access.\n * See: https://www.twilio.com/docs/phone-numbers/porting\n *\n * TODO: Implement when Twilio porting access is enabled\n */\n\nexport type PortingOrderRequest = {\n\tphoneNumbers: string[];\n\tcurrentCarrierName: string;\n\tcurrentAccountNumber: string;\n\tcurrentPinPassword?: string;\n\tbusinessName: string;\n\tbusinessAddress: string;\n\tbusinessCity: string;\n\tbusinessState: string;\n\tbusinessZip: string;\n\tbusinessContactName: string;\n\tbusinessContactEmail: string;\n\tbusinessContactPhone: string;\n\trequestedFocDate?: string;\n};\n\nexport type PortingOrderResult = {\n\tsuccess: boolean;\n\tdata?: {\n\t\tid: string;\n\t\tstatus: string;\n\t\tfocDate?: string;\n\t};\n\terror?: string;\n};\n\n/**\n * Check if a phone number is portable\n *\n * TODO: Implement using Twilio Regulatory Bundle API\n */\nexport async function checkNumberPortability(\n\tphoneNumber: string\n): Promise<{ portable: boolean; reason?: string }> {\n\tconsole.warn(\"[Twilio Porting] checkNumberPortability not implemented\");\n\treturn {\n\t\tportable: false,\n\t\treason: \"Porting functionality not yet implemented for Twilio\",\n\t};\n}\n\n/**\n * Create a porting order\n *\n * TODO: Implement using Twilio Regulatory Bundle API\n */\nexport async function createPortingOrder(\n\trequest: PortingOrderRequest\n): Promise<PortingOrderResult> {\n\tconsole.warn(\"[Twilio Porting] createPortingOrder not implemented\");\n\treturn {\n\t\tsuccess: false,\n\t\terror: \"Porting functionality not yet implemented for Twilio\",\n\t};\n}\n\n/**\n * Get porting order status\n *\n * TODO: Implement using Twilio Regulatory Bundle API\n */\nexport async function getPortingOrderStatus(\n\torderId: string\n): Promise<{\n\tsuccess: boolean;\n\tdata?: {\n\t\tid: string;\n\t\tstatus: string;\n\t\tfocDate?: string;\n\t\tnumbers?: Array<{ number: string; status: string }>;\n\t};\n\terror?: string;\n}> {\n\tconsole.warn(\"[Twilio Porting] getPortingOrderStatus not implemented\");\n\treturn {\n\t\tsuccess: false,\n\t\terror: \"Porting functionality not yet implemented for Twilio\",\n\t};\n}\n\n/**\n * Get estimated FOC (Firm Order Commitment) date\n *\n * TODO: Implement using Twilio Regulatory Bundle API\n */\nexport function getEstimatedFocDate(_phoneNumbers: string[]): Date {\n\t// Default estimate: 7-10 business days from now\n\tconst now = new Date();\n\tnow.setDate(now.getDate() + 10);\n\treturn now;\n}\n","\"use client\";\n\n/**\n * Reports Step - Dashboard & Reports Preferences\n */\n\nimport {\n\tBarChart3,\n\tCalendar,\n\tCheck,\n\tClock,\n\tDollarSign,\n\tFileText,\n\tMail,\n\tPercent,\n\tStar,\n\tTarget,\n\tTrendingUp,\n\tUsers,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ReportOption {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n\ticon: React.ElementType;\n}\n\nconst DASHBOARD_WIDGETS: ReportOption[] = [\n\t{\n\t\tid: \"revenue\",\n\t\ttitle: \"Revenue Overview\",\n\t\tdescription: \"Daily, weekly, monthly\",\n\t\ticon: DollarSign,\n\t},\n\t{\n\t\tid: \"jobs_today\",\n\t\ttitle: \"Today's Jobs\",\n\t\tdescription: \"Scheduled jobs\",\n\t\ticon: Calendar,\n\t},\n\t{\n\t\tid: \"outstanding_invoices\",\n\t\ttitle: \"Outstanding Invoices\",\n\t\tdescription: \"Unpaid invoices\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"team_performance\",\n\t\ttitle: \"Team Performance\",\n\t\tdescription: \"Jobs per tech\",\n\t\ticon: Users,\n\t},\n\t{\n\t\tid: \"customer_satisfaction\",\n\t\ttitle: \"Customer Satisfaction\",\n\t\tdescription: \"Ratings & feedback\",\n\t\ticon: Star,\n\t},\n\t{\n\t\tid: \"conversion_rate\",\n\t\ttitle: \"Estimate Conversion\",\n\t\tdescription: \"Won vs lost\",\n\t\ticon: Percent,\n\t},\n];\n\nconst SCHEDULED_REPORTS = [\n\t{ id: \"daily_summary\", title: \"Daily Summary\", frequency: \"Every morning\" },\n\t{\n\t\tid: \"weekly_performance\",\n\t\ttitle: \"Weekly Performance\",\n\t\tfrequency: \"Every Monday\",\n\t},\n\t{\n\t\tid: \"monthly_financial\",\n\t\ttitle: \"Monthly Financial\",\n\t\tfrequency: \"1st of month\",\n\t},\n];\n\nexport function ReportsStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [selectedWidgets, setSelectedWidgets] = useState<string[]>(\n\t\tdata.dashboardWidgets || [\n\t\t\t\"revenue\",\n\t\t\t\"jobs_today\",\n\t\t\t\"outstanding_invoices\",\n\t\t\t\"customer_satisfaction\",\n\t\t],\n\t);\n\tconst [selectedReports, setSelectedReports] = useState<string[]>(\n\t\tdata.scheduledReports || [\"daily_summary\", \"weekly_performance\"],\n\t);\n\n\tconst toggleWidget = (widgetId: string) => {\n\t\tconst updated = selectedWidgets.includes(widgetId)\n\t\t\t? selectedWidgets.filter((w) => w !== widgetId)\n\t\t\t: [...selectedWidgets, widgetId];\n\t\tsetSelectedWidgets(updated);\n\t\tupdateData({ dashboardWidgets: updated });\n\t};\n\n\tconst toggleReport = (reportId: string) => {\n\t\tconst updated = selectedReports.includes(reportId)\n\t\t\t? selectedReports.filter((r) => r !== reportId)\n\t\t\t: [...selectedReports, reportId];\n\t\tsetSelectedReports(updated);\n\t\tupdateData({ scheduledReports: updated });\n\t};\n\n\tconst selectRecommended = () => {\n\t\tconst recommendedWidgets = [\n\t\t\t\"revenue\",\n\t\t\t\"jobs_today\",\n\t\t\t\"outstanding_invoices\",\n\t\t\t\"customer_satisfaction\",\n\t\t];\n\t\tconst recommendedReports = [\"daily_summary\", \"weekly_performance\"];\n\t\tsetSelectedWidgets(recommendedWidgets);\n\t\tsetSelectedReports(recommendedReports);\n\t\tupdateData({\n\t\t\tdashboardWidgets: recommendedWidgets,\n\t\t\tscheduledReports: recommendedReports,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Customize your dashboard</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tChoose which metrics matter most. Your dashboard will adapt to show\n\t\t\t\t\twhat you need.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Quick Action */}\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<Target className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tOptimized for most field service businesses\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tonClick={selectRecommended}\n\t\t\t\t\tclassName=\"text-sm font-medium text-primary hover:underline\"\n\t\t\t\t>\n\t\t\t\t\tUse recommended\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t{/* Dashboard Widgets */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<span className=\"font-medium\">Dashboard Widgets</span>\n\t\t\t\t<div className=\"grid gap-2 sm:grid-cols-2\">\n\t\t\t\t\t{DASHBOARD_WIDGETS.map((widget) => {\n\t\t\t\t\t\tconst Icon = widget.icon;\n\t\t\t\t\t\tconst selected = selectedWidgets.includes(widget.id);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={widget.id}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => toggleWidget(widget.id)}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex items-center gap-3 rounded-lg p-3 text-left transition-colors\",\n\t\t\t\t\t\t\t\t\tselected ? \"bg-primary/10\" : \"bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"h-5 w-5 flex-shrink-0\",\n\t\t\t\t\t\t\t\t\t\tselected ? \"text-primary\" : \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{widget.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{widget.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{selected && (\n\t\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary flex-shrink-0\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Scheduled Reports */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<Mail className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<span className=\"font-medium\">Scheduled Email Reports</span>\n\t\t\t\t</div>\n\n\t\t\t\t{SCHEDULED_REPORTS.map((report) => {\n\t\t\t\t\tconst enabled = selectedReports.includes(report.id);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={report.id}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"flex items-center gap-4 rounded-lg p-4 transition-colors\",\n\t\t\t\t\t\t\t\tenabled ? \"bg-primary/10\" : \"bg-muted/40\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">{report.title}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{report.frequency}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\tchecked={enabled}\n\t\t\t\t\t\t\t\tonCheckedChange={() => toggleReport(report.id)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t{/* Summary */}\n\t\t\t<div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n\t\t\t\t<span>{selectedWidgets.length} widgets selected</span>\n\t\t\t\t<span>{selectedReports.length} reports enabled</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Schedule Step - Business Hours & Availability\n */\n\nimport { AlertTriangle, Moon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\nconst DAYS_OF_WEEK = [\n\t{ id: \"monday\", label: \"Mon\" },\n\t{ id: \"tuesday\", label: \"Tue\" },\n\t{ id: \"wednesday\", label: \"Wed\" },\n\t{ id: \"thursday\", label: \"Thu\" },\n\t{ id: \"friday\", label: \"Fri\" },\n\t{ id: \"saturday\", label: \"Sat\" },\n\t{ id: \"sunday\", label: \"Sun\" },\n];\n\nconst TIME_SLOTS = [\n\t\"06:00\",\n\t\"06:30\",\n\t\"07:00\",\n\t\"07:30\",\n\t\"08:00\",\n\t\"08:30\",\n\t\"09:00\",\n\t\"09:30\",\n\t\"10:00\",\n\t\"10:30\",\n\t\"11:00\",\n\t\"11:30\",\n\t\"12:00\",\n\t\"12:30\",\n\t\"13:00\",\n\t\"13:30\",\n\t\"14:00\",\n\t\"14:30\",\n\t\"15:00\",\n\t\"15:30\",\n\t\"16:00\",\n\t\"16:30\",\n\t\"17:00\",\n\t\"17:30\",\n\t\"18:00\",\n\t\"18:30\",\n\t\"19:00\",\n\t\"19:30\",\n\t\"20:00\",\n\t\"20:30\",\n\t\"21:00\",\n];\n\nconst BUFFER_OPTIONS = [\n\t{ value: \"0\", label: \"No buffer\" },\n\t{ value: \"15\", label: \"15 minutes\" },\n\t{ value: \"30\", label: \"30 minutes\" },\n\t{ value: \"60\", label: \"1 hour\" },\n];\n\ninterface DaySchedule {\n\tenabled: boolean;\n\tstart: string;\n\tend: string;\n}\n\ntype WeekSchedule = Record<string, DaySchedule>;\n\nconst DEFAULT_SCHEDULE: WeekSchedule = {\n\tmonday: { enabled: true, start: \"08:00\", end: \"17:00\" },\n\ttuesday: { enabled: true, start: \"08:00\", end: \"17:00\" },\n\twednesday: { enabled: true, start: \"08:00\", end: \"17:00\" },\n\tthursday: { enabled: true, start: \"08:00\", end: \"17:00\" },\n\tfriday: { enabled: true, start: \"08:00\", end: \"17:00\" },\n\tsaturday: { enabled: false, start: \"09:00\", end: \"14:00\" },\n\tsunday: { enabled: false, start: \"09:00\", end: \"14:00\" },\n};\n\nexport function ScheduleStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [schedule, setSchedule] = useState<WeekSchedule>(\n\t\tdata.businessHours || DEFAULT_SCHEDULE,\n\t);\n\tconst [bufferTime, setBufferTime] = useState(data.bufferTime || \"15\");\n\tconst [emergencyService, setEmergencyService] = useState(\n\t\tdata.emergencyService || false,\n\t);\n\n\tconst updateDaySchedule = (day: string, updates: Partial<DaySchedule>) => {\n\t\tconst updated = {\n\t\t\t...schedule,\n\t\t\t[day]: { ...schedule[day], ...updates },\n\t\t};\n\t\tsetSchedule(updated);\n\t\tupdateData({ businessHours: updated });\n\t};\n\n\tconst applyToAllWeekdays = () => {\n\t\tconst mondaySchedule = schedule.monday;\n\t\tconst updated = { ...schedule };\n\t\t[\"tuesday\", \"wednesday\", \"thursday\", \"friday\"].forEach((day) => {\n\t\t\tupdated[day] = { ...mondaySchedule };\n\t\t});\n\t\tsetSchedule(updated);\n\t\tupdateData({ businessHours: updated });\n\t};\n\n\tconst handleBufferChange = (value: string) => {\n\t\tsetBufferTime(value);\n\t\tupdateData({ bufferTime: value });\n\t};\n\n\tconst handleEmergencyChange = (enabled: boolean) => {\n\t\tsetEmergencyService(enabled);\n\t\tupdateData({ emergencyService: enabled });\n\t};\n\n\tconst formatTime = (time: string) => {\n\t\tconst [hours, minutes] = time.split(\":\");\n\t\tconst hour = parseInt(hours);\n\t\tconst ampm = hour >= 12 ? \"PM\" : \"AM\";\n\t\tconst displayHour = hour > 12 ? hour - 12 : hour === 0 ? 12 : hour;\n\t\treturn `${displayHour}:${minutes} ${ampm}`;\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Set your schedule</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tDefine when you're available for appointments.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Weekly Schedule */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<span className=\"font-medium\">Business Hours</span>\n\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={applyToAllWeekdays}>\n\t\t\t\t\t\tCopy Monday to Weekdays\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{DAYS_OF_WEEK.map((day) => {\n\t\t\t\t\t\tconst daySchedule = schedule[day.id];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={day.id}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex items-center gap-4 rounded-lg p-3\",\n\t\t\t\t\t\t\t\t\tdaySchedule?.enabled ? \"bg-muted/40\" : \"bg-muted/20\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\tchecked={daySchedule?.enabled}\n\t\t\t\t\t\t\t\t\tonCheckedChange={(v) =>\n\t\t\t\t\t\t\t\t\t\tupdateDaySchedule(day.id, { enabled: v })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"w-10 font-medium\",\n\t\t\t\t\t\t\t\t\t\t!daySchedule?.enabled && \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{day.label}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t{daySchedule?.enabled ? (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 flex-1\">\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tvalue={daySchedule.start}\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(v) =>\n\t\t\t\t\t\t\t\t\t\t\t\tupdateDaySchedule(day.id, { start: v })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-[110px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t{TIME_SLOTS.map((time) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={time} value={time}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(time)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">to</span>\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tvalue={daySchedule.end}\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(v) =>\n\t\t\t\t\t\t\t\t\t\t\t\tupdateDaySchedule(day.id, { end: v })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-[110px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t{TIME_SLOTS.map((time) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={time} value={time}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(time)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Closed</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Buffer Time */}\n\t\t\t<div className=\"space-y-3\">\n\t\t\t\t<div>\n\t\t\t\t\t<p className=\"font-medium\">Buffer Time Between Jobs</p>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tAdd travel time between appointments\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<Select value={bufferTime} onValueChange={handleBufferChange}>\n\t\t\t\t\t<SelectTrigger className=\"w-[180px]\">\n\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t{BUFFER_OPTIONS.map((option) => (\n\t\t\t\t\t\t\t<SelectItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SelectContent>\n\t\t\t\t</Select>\n\t\t\t</div>\n\n\t\t\t{/* Emergency Service */}\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-amber-500\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium\">24/7 Emergency Service</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tAccept emergency calls outside business hours\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Switch\n\t\t\t\t\tchecked={emergencyService}\n\t\t\t\t\tonCheckedChange={handleEmergencyChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Services Step - Pricebook Setup Options\n *\n * Three paths:\n * 1. Auto-setup with industry templates\n * 2. Import from ProfitRhino\n * 3. Start blank / skip\n */\n\nimport {\n\tCheck,\n\tCheckCircle2,\n\tClock,\n\tDollarSign,\n\tExternalLink,\n\tFileSpreadsheet,\n\tLoader2,\n\tPackage,\n\tPencil,\n\tPlus,\n\tSkipForward,\n\tTrash2,\n\tZap,\n} from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport { AIInputField } from \"@/components/ai/ai-field-wrapper\";\nimport { AIPriceRecommendButton } from \"@/components/ai/ai-price-recommend-button\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport {\n\tINDUSTRIES,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype PricebookSetupOption = \"templates\" | \"profitrhino\" | \"blank\";\n\nconst SETUP_OPTIONS: {\n\tid: PricebookSetupOption;\n\ttitle: string;\n\tsubtitle: string;\n\ticon: React.ElementType;\n\tbadge?: string;\n}[] = [\n\t{\n\t\tid: \"templates\",\n\t\ttitle: \"Quick Setup\",\n\t\tsubtitle: \"Start with industry templates\",\n\t\ticon: Zap,\n\t\tbadge: \"Recommended\",\n\t},\n\t{\n\t\tid: \"profitrhino\",\n\t\ttitle: \"Import from ProfitRhino\",\n\t\tsubtitle: \"Connect your existing pricebook\",\n\t\ticon: FileSpreadsheet,\n\t},\n\t{\n\t\tid: \"blank\",\n\t\ttitle: \"Start Blank\",\n\t\tsubtitle: \"Add services manually later\",\n\t\ticon: SkipForward,\n\t},\n];\n\n// Industry-specific service templates\nconst SERVICE_TEMPLATES: Record<\n\tstring,\n\t{ name: string; price: string; duration: string }[]\n> = {\n\thvac: [\n\t\t{ name: \"HVAC Diagnostic\", price: \"89\", duration: \"60\" },\n\t\t{ name: \"AC Tune-Up\", price: \"129\", duration: \"90\" },\n\t\t{ name: \"Furnace Tune-Up\", price: \"129\", duration: \"90\" },\n\t\t{ name: \"Filter Replacement\", price: \"49\", duration: \"15\" },\n\t\t{ name: \"Emergency Service Call\", price: \"149\", duration: \"60\" },\n\t],\n\tplumbing: [\n\t\t{ name: \"Plumbing Diagnostic\", price: \"79\", duration: \"60\" },\n\t\t{ name: \"Drain Cleaning\", price: \"149\", duration: \"60\" },\n\t\t{ name: \"Water Heater Flush\", price: \"129\", duration: \"90\" },\n\t\t{ name: \"Faucet Repair\", price: \"119\", duration: \"45\" },\n\t\t{ name: \"Toilet Repair\", price: \"139\", duration: \"60\" },\n\t],\n\telectrical: [\n\t\t{ name: \"Electrical Diagnostic\", price: \"89\", duration: \"60\" },\n\t\t{ name: \"Outlet Installation\", price: \"129\", duration: \"45\" },\n\t\t{ name: \"Switch Replacement\", price: \"99\", duration: \"30\" },\n\t\t{ name: \"Ceiling Fan Installation\", price: \"199\", duration: \"90\" },\n\t\t{ name: \"Panel Inspection\", price: \"149\", duration: \"60\" },\n\t],\n\troofing: [\n\t\t{ name: \"Roof Inspection\", price: \"149\", duration: \"90\" },\n\t\t{ name: \"Emergency Tarp\", price: \"299\", duration: \"120\" },\n\t\t{ name: \"Leak Repair\", price: \"349\", duration: \"180\" },\n\t\t{ name: \"Gutter Cleaning\", price: \"149\", duration: \"90\" },\n\t\t{ name: \"Shingle Replacement\", price: \"199\", duration: \"120\" },\n\t],\n\tlandscaping: [\n\t\t{ name: \"Lawn Mowing\", price: \"45\", duration: \"45\" },\n\t\t{ name: \"Hedge Trimming\", price: \"89\", duration: \"60\" },\n\t\t{ name: \"Leaf Cleanup\", price: \"129\", duration: \"90\" },\n\t\t{ name: \"Mulching\", price: \"199\", duration: \"120\" },\n\t\t{ name: \"Spring Cleanup\", price: \"249\", duration: \"180\" },\n\t],\n\tcleaning: [\n\t\t{ name: \"Standard Clean\", price: \"149\", duration: \"120\" },\n\t\t{ name: \"Deep Clean\", price: \"249\", duration: \"240\" },\n\t\t{ name: \"Move-In/Out Clean\", price: \"349\", duration: \"300\" },\n\t\t{ name: \"Office Cleaning\", price: \"199\", duration: \"180\" },\n\t\t{ name: \"Post-Construction\", price: \"449\", duration: \"480\" },\n\t],\n\tlocksmith: [\n\t\t{ name: \"Service Call\", price: \"89\", duration: \"30\" },\n\t\t{ name: \"Lockout Service\", price: \"129\", duration: \"45\" },\n\t\t{ name: \"Lock Rekey\", price: \"99\", duration: \"30\" },\n\t\t{ name: \"Lock Replacement\", price: \"179\", duration: \"60\" },\n\t\t{ name: \"Emergency Service\", price: \"199\", duration: \"60\" },\n\t],\n\tdefault: [\n\t\t{ name: \"Service Call\", price: \"89\", duration: \"60\" },\n\t\t{ name: \"Diagnostic Fee\", price: \"75\", duration: \"30\" },\n\t\t{ name: \"Standard Repair\", price: \"149\", duration: \"90\" },\n\t\t{ name: \"Emergency Service\", price: \"199\", duration: \"60\" },\n\t\t{ name: \"Maintenance Visit\", price: \"129\", duration: \"60\" },\n\t],\n};\n\nexport function ServicesStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [setupOption, setSetupOption] = useState<PricebookSetupOption | null>(\n\t\tdata.services.length > 0 ? \"templates\" : null,\n\t);\n\tconst [isConnecting, setIsConnecting] = useState(false);\n\n\tconst templates =\n\t\tSERVICE_TEMPLATES[data.industry] || SERVICE_TEMPLATES.default;\n\tconst industryLabel =\n\t\tINDUSTRIES.find((i) => i.value === data.industry)?.label || \"your industry\";\n\n\tconst handleSetupOption = async (option: PricebookSetupOption) => {\n\t\tsetSetupOption(option);\n\n\t\tif (option === \"templates\" && data.services.length === 0) {\n\t\t\t// Auto-add all templates\n\t\t\tconst newServices = templates.map((t, i) => ({\n\t\t\t\tid: `service-${Date.now()}-${i}`,\n\t\t\t\t...t,\n\t\t\t\tcategory: \"service\",\n\t\t\t}));\n\t\t\tupdateData({\n\t\t\t\tservices: newServices,\n\t\t\t\tservicesImportedFrom: data.industry || \"default\",\n\t\t\t});\n\t\t} else if (option === \"blank\") {\n\t\t\tupdateData({\n\t\t\t\tservices: [],\n\t\t\t\tservicesImportedFrom: null,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst handleProfitRhinoConnect = async () => {\n\t\tsetIsConnecting(true);\n\t\t// Simulate OAuth redirect\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\t\t// In production, this would redirect to ProfitRhino OAuth\n\t\tsetIsConnecting(false);\n\t\t// For now, show it's not connected\n\t};\n\n\tconst addService = (service?: {\n\t\tname: string;\n\t\tprice: string;\n\t\tduration: string;\n\t}) => {\n\t\tconst newService = service || { name: \"\", price: \"\", duration: \"60\" };\n\t\tupdateData({\n\t\t\tservices: [\n\t\t\t\t...data.services,\n\t\t\t\t{ id: `service-${Date.now()}`, ...newService, category: \"service\" },\n\t\t\t],\n\t\t});\n\t};\n\n\tconst updateService = (\n\t\tid: string,\n\t\tupdates: Partial<(typeof data.services)[0]>,\n\t) => {\n\t\tupdateData({\n\t\t\tservices: data.services.map((s) =>\n\t\t\t\ts.id === id ? { ...s, ...updates } : s,\n\t\t\t),\n\t\t});\n\t};\n\n\tconst removeService = (id: string) => {\n\t\tupdateData({\n\t\t\tservices: data.services.filter((s) => s.id !== id),\n\t\t});\n\t};\n\n\t// Show option selection if no choice made yet\n\tif (!setupOption) {\n\t\treturn (\n\t\t\t<div className=\"space-y-10\">\n\t\t\t\t{/* Header */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">Set up your pricebook</h2>\n\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\tYour pricebook powers estimates and invoices. How would you like to\n\t\t\t\t\t\tget started?\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Setup Options */}\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t{SETUP_OPTIONS.map((option) => {\n\t\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() => handleSetupOption(option.id)}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative w-full flex items-center gap-4 rounded-lg p-4 text-left transition-all\",\n\t\t\t\t\t\t\t\t\t\"bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{option.badge && (\n\t\t\t\t\t\t\t\t\t<span className=\"absolute top-2 right-2 text-[10px] font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t{option.badge}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-muted flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{option.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{option.subtitle}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Preview of templates */}\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<p className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\tQuick Setup includes {templates.length} {industryLabel} services:\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t{templates.slice(0, 4).map((t, i) => (\n\t\t\t\t\t\t\t<span key={i} className=\"text-xs bg-muted/60 px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t{t.name} · ${t.price}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{templates.length > 4 && (\n\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground px-2 py-1\">\n\t\t\t\t\t\t\t\t+{templates.length - 4} more\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// ProfitRhino connection flow\n\tif (setupOption === \"profitrhino\") {\n\t\treturn (\n\t\t\t<div className=\"space-y-10\">\n\t\t\t\t{/* Header */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setSetupOption(null)}\n\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t>\n\t\t\t\t\t\t← Back to options\n\t\t\t\t\t</button>\n\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">Connect ProfitRhino</h2>\n\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\tImport your existing pricebook from ProfitRhino with one click.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-6 space-y-4\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/10\">\n\t\t\t\t\t\t\t\t<span className=\"text-xl font-bold text-orange-500\">PR</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">ProfitRhino Integration</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tSync services, pricing & categories\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t<span>Import all services and pricing</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t<span>Keep pricebooks in sync automatically</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n\t\t\t\t\t\t\t\t<span>Flat-rate pricing support</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleProfitRhinoConnect}\n\t\t\t\t\t\tdisabled={isConnecting}\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{isConnecting ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\tConnecting...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\tConnect ProfitRhino Account\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\t\tYou'll be redirected to ProfitRhino to authorize access. Don't have\n\t\t\t\t\t\tProfitRhino?{\" \"}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => handleSetupOption(\"templates\")}\n\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUse our templates instead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Blank state - skip\n\tif (setupOption === \"blank\") {\n\t\treturn (\n\t\t\t<div className=\"space-y-10\">\n\t\t\t\t{/* Header */}\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setSetupOption(null)}\n\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t>\n\t\t\t\t\t\t← Back to options\n\t\t\t\t\t</button>\n\t\t\t\t\t<h2 className=\"text-2xl font-semibold\">\n\t\t\t\t\t\tStart with a blank pricebook\n\t\t\t\t\t</h2>\n\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\tYou can add services anytime from Settings → Pricebook.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-6 space-y-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<CheckCircle2 className=\"h-6 w-6 text-green-500\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium\">No services added</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tYou can create estimates with custom line items, or add services\n\t\t\t\t\t\t\t\tlater.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tChanged your mind? You can still:\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonClick={() => handleSetupOption(\"templates\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Zap className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\t\tUse Templates\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tonClick={() => handleSetupOption(\"profitrhino\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FileSpreadsheet className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\t\tConnect ProfitRhino\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Templates selected - show editable list\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => setSetupOption(null)}\n\t\t\t\t\tclassName=\"text-sm text-muted-foreground hover:text-foreground\"\n\t\t\t\t>\n\t\t\t\t\t← Back to options\n\t\t\t\t</button>\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Your pricebook</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tWe've added {data.services.length} {industryLabel} services. Edit\n\t\t\t\t\tprices or add more.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Success banner */}\n\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 flex items-center gap-3\">\n\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<p className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t{data.services.length} services added\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tCustomize prices below or continue to the next step\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Services List */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<span className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\tServices\n\t\t\t\t\t</span>\n\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={() => addService()}>\n\t\t\t\t\t\t<Plus className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\tAdd Service\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{data.services.map((service) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={service.id}\n\t\t\t\t\t\t\tclassName=\"flex items-center gap-3 rounded-lg bg-muted/40 p-3\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex-1 grid gap-2 sm:grid-cols-3\">\n\t\t\t\t\t\t\t\t<AIInputField\n\t\t\t\t\t\t\t\t\tplaceholder=\"Service name\"\n\t\t\t\t\t\t\t\t\tvalue={service.name}\n\t\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\t\tupdateService(service.id, { name: value })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfieldType=\"price-book-name\"\n\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\tcategory: industryLabel,\n\t\t\t\t\t\t\t\t\t\texistingItems: data.services\n\t\t\t\t\t\t\t\t\t\t\t.filter((s) => s.id !== service.id && s.name)\n\t\t\t\t\t\t\t\t\t\t\t.map((s) => s.name),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tenableAI\n\t\t\t\t\t\t\t\t\tbuttonPosition=\"end\"\n\t\t\t\t\t\t\t\t\tclassName=\"h-9\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"flex gap-1\">\n\t\t\t\t\t\t\t\t\t<div className=\"relative flex-1\">\n\t\t\t\t\t\t\t\t\t\t<DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"0.00\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={service.price}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tupdateService(service.id, { price: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"pl-8 h-9\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<AIPriceRecommendButton\n\t\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\t\tserviceName: service.name,\n\t\t\t\t\t\t\t\t\t\t\tindustry: industryLabel,\n\t\t\t\t\t\t\t\t\t\t\tduration: service.duration,\n\t\t\t\t\t\t\t\t\t\t\texistingPrices: data.services\n\t\t\t\t\t\t\t\t\t\t\t\t.filter((s) => s.id !== service.id && s.price)\n\t\t\t\t\t\t\t\t\t\t\t\t.map((s) => ({ name: s.name, price: s.price })),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonAccept={(price) =>\n\t\t\t\t\t\t\t\t\t\t\tupdateService(service.id, { price: price.toString() })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={service.duration}\n\t\t\t\t\t\t\t\t\tonValueChange={(v) =>\n\t\t\t\t\t\t\t\t\t\tupdateService(service.id, { duration: v })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<SelectTrigger className=\"h-9\">\n\t\t\t\t\t\t\t\t\t\t<Clock className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"15\">15 min</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"30\">30 min</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"45\">45 min</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"60\">1 hour</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"90\">1.5 hours</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"120\">2 hours</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"180\">3 hours</SelectItem>\n\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"240\">4 hours</SelectItem>\n\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\tclassName=\"h-9 w-9 text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\tonClick={() => removeService(service.id)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Pro tip */}\n\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\tTip: You can add materials, equipment, and more detailed pricing in\n\t\t\t\tSettings → Pricebook\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n","/**\n * useAIPriceRecommendation Hook\n *\n * Custom hook for AI-powered price recommendations.\n * Suggests optimal pricing based on service type, industry, and market data.\n */\n\nimport { useCallback, useState } from \"react\";\n\nexport type PriceRecommendation = {\n\tsuggestedPrice: number;\n\tpriceRange: {\n\t\tlow: number;\n\t\thigh: number;\n\t};\n\tconfidence: number;\n\treasoning: string;\n\tmarketPosition: \"budget\" | \"mid-market\" | \"premium\";\n};\n\nexport type PriceRecommendationContext = {\n\tserviceName: string;\n\tindustry?: string;\n\tduration?: string | number;\n\tlocation?: string;\n\texistingPrices?: { name: string; price: string }[];\n};\n\nexport type AIPriceRecommendationResult = {\n\trecommendation: PriceRecommendation | null;\n\tisLoading: boolean;\n\terror: string | null;\n\tgetRecommendation: (\n\t\tcontext: PriceRecommendationContext,\n\t) => Promise<PriceRecommendation | null>;\n\tclear: () => void;\n};\n\nexport function useAIPriceRecommendation(): AIPriceRecommendationResult {\n\tconst [recommendation, setRecommendation] =\n\t\tuseState<PriceRecommendation | null>(null);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\n\tconst getRecommendation = useCallback(\n\t\tasync (\n\t\t\tcontext: PriceRecommendationContext,\n\t\t): Promise<PriceRecommendation | null> => {\n\t\t\tif (!context.serviceName?.trim()) {\n\t\t\t\tsetError(\"Service name is required for price recommendation\");\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tsetIsLoading(true);\n\t\t\tsetError(null);\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\"/api/ai/price-recommendation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tbody: JSON.stringify(context),\n\t\t\t\t});\n\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(\"Failed to get price recommendation\");\n\t\t\t\t}\n\n\t\t\t\tconst data = await response.json();\n\t\t\t\tsetRecommendation(data);\n\t\t\t\treturn data;\n\t\t\t} catch (err) {\n\t\t\t\tconst message =\n\t\t\t\t\terr instanceof Error\n\t\t\t\t\t\t? err.message\n\t\t\t\t\t\t: \"Failed to get price recommendation\";\n\t\t\t\tsetError(message);\n\t\t\t\treturn null;\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t},\n\t\t[],\n\t);\n\n\tconst clear = useCallback(() => {\n\t\tsetRecommendation(null);\n\t\tsetError(null);\n\t}, []);\n\n\treturn {\n\t\trecommendation,\n\t\tisLoading,\n\t\terror,\n\t\tgetRecommendation,\n\t\tclear,\n\t};\n}\n","\"use client\";\n\n/**\n * AI Price Recommend Button\n *\n * A button that triggers AI price recommendation and shows results in a popover.\n * Can be placed next to price input fields.\n *\n * Features:\n * - Shows suggested price with confidence\n * - Displays price range and market position\n * - One-click to apply suggested price\n */\n\nimport { AlertCircle, Check, DollarSign, Loader2, Sparkles } from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport {\n\ttype PriceRecommendationContext,\n\tuseAIPriceRecommendation,\n} from \"@/hooks/use-ai-price-recommendation\";\nimport { cn } from \"@/lib/utils\";\n\ntype AIPriceRecommendButtonProps = {\n\t/** Context for generating recommendation */\n\tcontext: PriceRecommendationContext;\n\t/** Callback when price is accepted */\n\tonAccept: (price: number) => void;\n\t/** Disabled state */\n\tdisabled?: boolean;\n\t/** Button size */\n\tsize?: \"xs\" | \"sm\" | \"default\";\n\t/** Additional className */\n\tclassName?: string;\n};\n\nexport function AIPriceRecommendButton({\n\tcontext,\n\tonAccept,\n\tdisabled = false,\n\tsize = \"sm\",\n\tclassName,\n}: AIPriceRecommendButtonProps) {\n\tconst [open, setOpen] = useState(false);\n\tconst { recommendation, isLoading, error, getRecommendation, clear } =\n\t\tuseAIPriceRecommendation();\n\n\tconst handleOpenChange = useCallback(\n\t\t(newOpen: boolean) => {\n\t\t\tsetOpen(newOpen);\n\t\t\tif (!newOpen) {\n\t\t\t\tclear();\n\t\t\t}\n\t\t},\n\t\t[clear],\n\t);\n\n\tconst handleGetRecommendation = useCallback(async () => {\n\t\tsetOpen(true);\n\t\tawait getRecommendation(context);\n\t}, [getRecommendation, context]);\n\n\tconst handleAccept = useCallback(() => {\n\t\tif (recommendation) {\n\t\t\tonAccept(recommendation.suggestedPrice);\n\t\t\tsetOpen(false);\n\t\t\tclear();\n\t\t}\n\t}, [recommendation, onAccept, clear]);\n\n\tconst sizeClasses = {\n\t\txs: \"h-6 w-6 p-0\",\n\t\tsm: \"h-8 w-8 p-0\",\n\t\tdefault: \"h-9 w-9 p-0\",\n\t};\n\n\tconst iconSizes = {\n\t\txs: \"h-3 w-3\",\n\t\tsm: \"h-3.5 w-3.5\",\n\t\tdefault: \"h-4 w-4\",\n\t};\n\n\tconst marketPositionColors = {\n\t\tbudget: \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\",\n\t\t\"mid-market\":\n\t\t\t\"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\",\n\t\tpremium:\n\t\t\t\"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\",\n\t};\n\n\treturn (\n\t\t<Popover open={open} onOpenChange={handleOpenChange}>\n\t\t\t<TooltipProvider>\n\t\t\t\t<Tooltip>\n\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tonClick={handleGetRecommendation}\n\t\t\t\t\t\t\t\tdisabled={disabled || isLoading || !context.serviceName?.trim()}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tsizeClasses[size],\n\t\t\t\t\t\t\t\t\t\"border-primary/30 text-primary hover:bg-primary/10 hover:text-primary\",\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t\t\t<Loader2 className={cn(iconSizes[size], \"animate-spin\")} />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Sparkles className={iconSizes[size]} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t<p>Get AI price recommendation</p>\n\t\t\t\t\t</TooltipContent>\n\t\t\t\t</Tooltip>\n\t\t\t</TooltipProvider>\n\n\t\t\t<PopoverContent className=\"w-72 p-0\" align=\"end\">\n\t\t\t\t<div className=\"border-b px-3 py-2\">\n\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm font-medium\">\n\t\t\t\t\t\t<DollarSign className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\tAI Price Recommendation\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div className=\"flex items-center justify-center py-8\">\n\t\t\t\t\t\t<Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n\t\t\t\t\t</div>\n\t\t\t\t) : error ? (\n\t\t\t\t\t<div className=\"flex items-center gap-2 px-3 py-4 text-sm text-destructive\">\n\t\t\t\t\t\t<AlertCircle className=\"h-4 w-4 shrink-0\" />\n\t\t\t\t\t\t<span>{error}</span>\n\t\t\t\t\t</div>\n\t\t\t\t) : recommendation ? (\n\t\t\t\t\t<div className=\"p-3 space-y-3\">\n\t\t\t\t\t\t{/* Suggested Price */}\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mb-1\">\n\t\t\t\t\t\t\t\tSuggested Price\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className=\"text-3xl font-bold text-primary\">\n\t\t\t\t\t\t\t\t${recommendation.suggestedPrice.toFixed(2)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-2 mt-1\">\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\tclassName={marketPositionColors[recommendation.marketPosition]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{recommendation.marketPosition}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{recommendation.confidence}% confidence\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Price Range */}\n\t\t\t\t\t\t<div className=\"bg-muted/50 rounded-md p-2 text-center\">\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Typical Range</p>\n\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t${recommendation.priceRange.low.toFixed(2)} - $\n\t\t\t\t\t\t\t\t{recommendation.priceRange.high.toFixed(2)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Reasoning */}\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground leading-relaxed\">\n\t\t\t\t\t\t\t{recommendation.reasoning}\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tonClick={() => handleOpenChange(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tonClick={handleAccept}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Check className=\"mr-1 h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\tApply\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"px-3 py-8 text-center text-sm text-muted-foreground\">\n\t\t\t\t\t\tEnter a service name to get a price recommendation\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t);\n}\n","\"use client\";\n\n/**\n * Settings Step - Important Settings Tour\n */\n\nimport {\n\tCalendarCheck,\n\tCheckCircle2,\n\tFileText,\n\tLink2,\n\tPercent,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useOnboardingStore } from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\nconst POPULAR_INTEGRATIONS = [\n\t{\n\t\tid: \"quickbooks\",\n\t\tname: \"QuickBooks\",\n\t\tdescription: \"Sync invoices\",\n\t\tlogo: \"QB\",\n\t},\n\t{\n\t\tid: \"google_calendar\",\n\t\tname: \"Google Calendar\",\n\t\tdescription: \"Sync appointments\",\n\t\tlogo: \"GC\",\n\t},\n\t{ id: \"zapier\", name: \"Zapier\", description: \"Connect apps\", logo: \"ZP\" },\n\t{\n\t\tid: \"thumbtack\",\n\t\tname: \"Thumbtack\",\n\t\tdescription: \"Lead management\",\n\t\tlogo: \"TT\",\n\t},\n];\n\nconst PAYMENT_TERMS = [\n\t{ value: \"0\", label: \"Due on receipt\" },\n\t{ value: \"7\", label: \"Net 7 (7 days)\" },\n\t{ value: \"15\", label: \"Net 15 (15 days)\" },\n\t{ value: \"30\", label: \"Net 30 (30 days)\" },\n\t{ value: \"45\", label: \"Net 45 (45 days)\" },\n\t{ value: \"60\", label: \"Net 60 (60 days)\" },\n];\n\nexport function SettingsStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [taxRate, setTaxRate] = useState(data.taxRate || \"\");\n\tconst [paymentTerms, setPaymentTerms] = useState(data.paymentTerms || \"30\");\n\tconst [onlineBooking, setOnlineBooking] = useState(\n\t\tdata.onlineBookingEnabled || false,\n\t);\n\tconst [autoReminders, setAutoReminders] = useState(\n\t\tdata.autoReminders !== false,\n\t);\n\n\tconst handleTaxRateChange = (value: string) => {\n\t\tsetTaxRate(value);\n\t\tupdateData({ taxRate: value });\n\t};\n\n\tconst handlePaymentTermsChange = (value: string) => {\n\t\tsetPaymentTerms(value);\n\t\tupdateData({ paymentTerms: value });\n\t};\n\n\tconst handleOnlineBookingChange = (enabled: boolean) => {\n\t\tsetOnlineBooking(enabled);\n\t\tupdateData({ onlineBookingEnabled: enabled });\n\t};\n\n\tconst handleAutoRemindersChange = (enabled: boolean) => {\n\t\tsetAutoReminders(enabled);\n\t\tupdateData({ autoReminders: enabled });\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Important settings</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\tA few key settings to get right from the start. You can always change\n\t\t\t\t\tthese later.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Tax Settings */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<Percent className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium\">Tax Rate</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tApplied automatically to invoices\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tstep=\"0.01\"\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\tplaceholder=\"8.25\"\n\t\t\t\t\t\t\tvalue={taxRate}\n\t\t\t\t\t\t\tonChange={(e) => handleTaxRateChange(e.target.value)}\n\t\t\t\t\t\t\tclassName=\"w-[120px]\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">%</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-2\">\n\t\t\t\t\t\tExample: 8.25% for Texas sales tax. Check your local rate.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Invoice Defaults */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<FileText className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium\">Invoice Settings</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tDefault terms for all invoices\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-4 flex items-center justify-between\">\n\t\t\t\t\t\t<span className=\"text-sm\">Payment due</span>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={paymentTerms}\n\t\t\t\t\t\t\tonValueChange={handlePaymentTermsChange}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectTrigger className=\"w-[160px]\">\n\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{PAYMENT_TERMS.map((term) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={term.value} value={term.value}>\n\t\t\t\t\t\t\t\t\t\t{term.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"rounded-lg bg-muted/40 p-4 flex items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">Auto-send payment reminders</p>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\tRemind customers when invoices are due\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={autoReminders}\n\t\t\t\t\t\t\tonCheckedChange={handleAutoRemindersChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Online Booking */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<CalendarCheck className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"font-medium\">Online Booking</p>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tLet customers book directly\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tchecked={onlineBooking}\n\t\t\t\t\t\tonCheckedChange={handleOnlineBookingChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{onlineBooking && (\n\t\t\t\t\t<div className=\"rounded-lg bg-primary/10 p-4 space-y-2\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t<span>Embed on your website or share a booking link</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t<span>Customers see only available time slots</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm\">\n\t\t\t\t\t\t\t<CheckCircle2 className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t<span>Automatic confirmations and reminders</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Integrations Preview */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<Link2 className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium\">Integrations</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tConnect your favorite tools later\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"grid gap-2 sm:grid-cols-2\">\n\t\t\t\t\t{POPULAR_INTEGRATIONS.map((integration) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={integration.id}\n\t\t\t\t\t\t\tclassName=\"flex items-center gap-3 rounded-lg bg-muted/40 p-3\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"flex h-9 w-9 items-center justify-center rounded-lg bg-background text-xs font-bold\">\n\t\t\t\t\t\t\t\t{integration.logo}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{integration.name}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{integration.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t\tSet up integrations after onboarding in Settings → Integrations\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Summary */}\n\t\t\t<div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n\t\t\t\t<span>Tax: {taxRate ? `${taxRate}%` : \"Not set\"}</span>\n\t\t\t\t<span>\n\t\t\t\t\tTerms: {PAYMENT_TERMS.find((t) => t.value === paymentTerms)?.label}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Team Step - Team Members & Invitations\n *\n * Features:\n * - Shows current user (owner) as first member, non-removable\n * - Ability to add team members for all company sizes\n * - Role selection with descriptions\n */\n\nimport {\n\tBriefcase,\n\tCheck,\n\tCheckCircle2,\n\tCrown,\n\tLoader2,\n\tPhone,\n\tPlus,\n\tSend,\n\tShield,\n\tTrash2,\n\tUserPlus,\n\tUsers,\n\tWrench,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport {\n\tCOMPANY_SIZES,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\nconst TEAM_ROLES = [\n\t{\n\t\tvalue: \"admin\",\n\t\tlabel: \"Admin\",\n\t\tdescription: \"Full access to everything\",\n\t\ticon: Shield,\n\t},\n\t{\n\t\tvalue: \"manager\",\n\t\tlabel: \"Manager\",\n\t\tdescription: \"Manage team & scheduling\",\n\t\ticon: Briefcase,\n\t},\n\t{\n\t\tvalue: \"technician\",\n\t\tlabel: \"Technician\",\n\t\tdescription: \"View jobs & update status\",\n\t\ticon: Wrench,\n\t},\n\t{\n\t\tvalue: \"office\",\n\t\tlabel: \"Office Staff\",\n\t\tdescription: \"Scheduling & customer service\",\n\t\ticon: Phone,\n\t},\n];\n\ninterface TeamInvite {\n\tid: string;\n\temail: string;\n\tname: string;\n\trole: string;\n\tstatus: \"pending\" | \"sent\";\n}\n\nexport function TeamStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\tconst [invites, setInvites] = useState<TeamInvite[]>(\n\t\t// Initialize from stored data if any\n\t\t(data.teamInvites || []).map((inv, i) => ({\n\t\t\tid: `invite-${i}`,\n\t\t\temail: inv.email,\n\t\t\tname: inv.name,\n\t\t\trole: inv.role,\n\t\t\tstatus: \"sent\" as const,\n\t\t})),\n\t);\n\tconst [sending, setSending] = useState(false);\n\n\tconst companySize = COMPANY_SIZES.find((s) => s.value === data.path);\n\tconst isSolo = data.path === \"solo\";\n\n\t// Owner info from onboarding data\n\tconst ownerName = data.userName || \"You\";\n\tconst ownerEmail = data.userEmail || data.companyEmail || \"\";\n\n\tconst addInvite = () => {\n\t\tsetInvites([\n\t\t\t...invites,\n\t\t\t{\n\t\t\t\tid: `invite-${Date.now()}`,\n\t\t\t\temail: \"\",\n\t\t\t\tname: \"\",\n\t\t\t\trole: \"technician\",\n\t\t\t\tstatus: \"pending\",\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst updateInvite = (id: string, updates: Partial<TeamInvite>) => {\n\t\tsetInvites(\n\t\t\tinvites.map((inv) => (inv.id === id ? { ...inv, ...updates } : inv)),\n\t\t);\n\t};\n\n\tconst removeInvite = (id: string) => {\n\t\tsetInvites(invites.filter((inv) => inv.id !== id));\n\t};\n\n\tconst sendInvites = async () => {\n\t\tconst pendingInvites = invites.filter(\n\t\t\t(i) => i.status === \"pending\" && i.email,\n\t\t);\n\t\tif (pendingInvites.length === 0) return;\n\n\t\tsetSending(true);\n\t\tawait new Promise((resolve) => setTimeout(resolve, 1500));\n\n\t\tconst updatedInvites = invites.map((inv) =>\n\t\t\tinv.status === \"pending\" && inv.email\n\t\t\t\t? { ...inv, status: \"sent\" as const }\n\t\t\t\t: inv,\n\t\t);\n\t\tsetInvites(updatedInvites);\n\n\t\tupdateData({\n\t\t\tteamInvites: updatedInvites\n\t\t\t\t.filter((inv) => inv.email)\n\t\t\t\t.map((inv) => ({\n\t\t\t\t\temail: inv.email,\n\t\t\t\t\tname: inv.name,\n\t\t\t\t\trole: inv.role,\n\t\t\t\t})),\n\t\t});\n\t\tsetSending(false);\n\t};\n\n\tconst pendingCount = invites.filter(\n\t\t(i) => i.email && i.status === \"pending\",\n\t).length;\n\tconst sentCount = invites.filter((i) => i.status === \"sent\").length;\n\tconst totalTeamSize = 1 + invites.filter((i) => i.email).length; // Owner + invites\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold\">Your team</h2>\n\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t{isSolo\n\t\t\t\t\t\t? \"You're set up as the owner. Add team members anytime as you grow.\"\n\t\t\t\t\t\t: `${companySize?.label} teams typically have ${companySize?.value === \"small\" ? \"2-5\" : companySize?.value === \"growing\" ? \"6-20\" : \"20+\"} members.`}\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Team List */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<span className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\t\t{totalTeamSize} {totalTeamSize === 1 ? \"Member\" : \"Members\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t<Button variant=\"outline\" size=\"sm\" onClick={addInvite}>\n\t\t\t\t\t\t<Plus className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\tAdd Member\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Owner (Current User) - Always shown, cannot be removed */}\n\t\t\t\t<div className=\"rounded-lg bg-primary/5 ring-1 ring-primary/20 p-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t<div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground\">\n\t\t\t\t\t\t\t<Crown className=\"h-5 w-5\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<p className=\"font-medium truncate\">{ownerName}</p>\n\t\t\t\t\t\t\t\t<span className=\"text-[10px] font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full\">\n\t\t\t\t\t\t\t\t\tYou\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground truncate\">\n\t\t\t\t\t\t\t\t{ownerEmail || \"Owner\"} • Owner\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Team Invites */}\n\t\t\t\t{invites.length > 0 && (\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t{invites.map((invite) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={invite.id}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"rounded-lg p-4\",\n\t\t\t\t\t\t\t\t\tinvite.status === \"sent\" ? \"bg-green-500/10\" : \"bg-muted/40\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{invite.status === \"sent\" ? (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-green-500/20\">\n\t\t\t\t\t\t\t\t\t\t\t<Check className=\"h-5 w-5 text-green-600\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium truncate\">\n\t\t\t\t\t\t\t\t\t\t\t\t{invite.name || invite.email}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\tInvite sent •{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{TEAM_ROLES.find((r) => r.value === invite.role)?.label}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-3 sm:grid-cols-3\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={invite.name}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateInvite(invite.id, { name: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-9\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"email@example.com\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={invite.email}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateInvite(invite.id, { email: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-9\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={invite.role}\n\t\t\t\t\t\t\t\t\t\t\t\tonValueChange={(v) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateInvite(invite.id, { role: v })\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger className=\"h-9\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{TEAM_ROLES.map((role) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst Icon = role.icon;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem key={role.value} value={role.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{role.label}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tTEAM_ROLES.find((r) => r.value === invite.role)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.description\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeInvite(invite.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"mr-1 h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Empty state - show add button */}\n\t\t\t\t{invites.length === 0 && (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={addInvite}\n\t\t\t\t\t\tclassName=\"w-full flex items-center justify-center gap-3 rounded-lg border-2 border-dashed border-muted-foreground/25 p-6 hover:border-muted-foreground/50 hover:bg-muted/20 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserPlus className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tAdd a team member\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Send Invites Button */}\n\t\t\t{pendingCount > 0 && (\n\t\t\t\t<Button onClick={sendInvites} disabled={sending} className=\"w-full\">\n\t\t\t\t\t{sending ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\tSending Invites...\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Send className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t\t\tSend {pendingCount} Invite{pendingCount !== 1 ? \"s\" : \"\"}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Button>\n\t\t\t)}\n\n\t\t\t{/* Summary */}\n\t\t\t{sentCount > 0 && pendingCount === 0 && (\n\t\t\t\t<div className=\"rounded-lg bg-green-500/10 p-4 flex items-center gap-3\">\n\t\t\t\t\t<CheckCircle2 className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"font-medium text-green-700 dark:text-green-400\">\n\t\t\t\t\t\t\t{sentCount} invite{sentCount !== 1 ? \"s\" : \"\"} sent\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tTeam members will receive an email to join your account\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Note */}\n\t\t\t<p className=\"text-xs text-muted-foreground text-center\">\n\t\t\t\t{invites.length === 0\n\t\t\t\t\t? \"You can skip this step and add team members later from Settings → Team\"\n\t\t\t\t\t: \"Team members will be able to log in once they accept their invitation\"}\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Welcome Step - Clean, Minimal Path Selection\n *\n * Features:\n * - Team size selection with visual cards\n * - Industry selection with tailored recommendations\n * - \"How did you hear about us?\" tracking\n * - Industry-specific insights to build confidence\n */\n\nimport {\n\tArrowRight,\n\tBuilding,\n\tBuilding2,\n\tCalendar,\n\tCheck,\n\tClock,\n\tPhone,\n\tShield,\n\tSparkles,\n\tTrendingUp,\n\tUser,\n\tUsers,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport {\n\tINDUSTRIES,\n\ttype OnboardingPath,\n\tuseOnboardingStore,\n} from \"@/lib/onboarding/onboarding-store\";\nimport { cn } from \"@/lib/utils\";\n\n// Industry-specific insights to show after selection\nconst INDUSTRY_INSIGHTS: Record<string, { title: string; bullets: string[] }> =\n\t{\n\t\thvac: {\n\t\t\ttitle: \"HVAC businesses like yours typically see\",\n\t\t\tbullets: [\n\t\t\t\t\"40% faster dispatch with GPS tracking\",\n\t\t\t\t\"25% more jobs completed per day\",\n\t\t\t\t\"Automated seasonal maintenance reminders\",\n\t\t\t],\n\t\t},\n\t\tplumbing: {\n\t\t\ttitle: \"Plumbing companies using Thorbis report\",\n\t\t\tbullets: [\n\t\t\t\t\"60% faster quote turnaround\",\n\t\t\t\t\"Emergency job prioritization features\",\n\t\t\t\t\"Photo documentation for warranty claims\",\n\t\t\t],\n\t\t},\n\t\telectrical: {\n\t\t\ttitle: \"Electrical contractors benefit from\",\n\t\t\tbullets: [\n\t\t\t\t\"Permit tracking integration\",\n\t\t\t\t\"Code compliance checklists\",\n\t\t\t\t\"Multi-location job management\",\n\t\t\t],\n\t\t},\n\t\troofing: {\n\t\t\ttitle: \"Roofing companies love our\",\n\t\t\tbullets: [\n\t\t\t\t\"Weather-based scheduling\",\n\t\t\t\t\"Aerial measurement integration\",\n\t\t\t\t\"Storm damage documentation\",\n\t\t\t],\n\t\t},\n\t\tlandscaping: {\n\t\t\ttitle: \"Landscaping businesses enjoy\",\n\t\t\tbullets: [\n\t\t\t\t\"Recurring service scheduling\",\n\t\t\t\t\"Seasonal crew management\",\n\t\t\t\t\"Property photo timelines\",\n\t\t\t],\n\t\t},\n\t\tcleaning: {\n\t\t\ttitle: \"Cleaning services see results with\",\n\t\t\tbullets: [\n\t\t\t\t\"Recurring appointment automation\",\n\t\t\t\t\"Checklist-based job completion\",\n\t\t\t\t\"Customer key/code management\",\n\t\t\t],\n\t\t},\n\t\t\"pest-control\": {\n\t\t\ttitle: \"Pest control companies benefit from\",\n\t\t\tbullets: [\n\t\t\t\t\"Treatment history tracking\",\n\t\t\t\t\"Regulatory compliance reports\",\n\t\t\t\t\"Automated follow-up scheduling\",\n\t\t\t],\n\t\t},\n\t\tappliance: {\n\t\t\ttitle: \"Appliance repair pros love\",\n\t\t\tbullets: [\n\t\t\t\t\"Parts inventory tracking\",\n\t\t\t\t\"Warranty lookup integration\",\n\t\t\t\t\"Model-specific repair guides\",\n\t\t\t],\n\t\t},\n\t\t\"garage-door\": {\n\t\t\ttitle: \"Garage door companies see\",\n\t\t\tbullets: [\n\t\t\t\t\"Quick quote generation\",\n\t\t\t\t\"Spring life tracking\",\n\t\t\t\t\"Before/after photo documentation\",\n\t\t\t],\n\t\t},\n\t\tlocksmith: {\n\t\t\ttitle: \"Locksmiths benefit from\",\n\t\t\tbullets: [\n\t\t\t\t\"Emergency dispatch priority\",\n\t\t\t\t\"Key code secure storage\",\n\t\t\t\t\"Vehicle VIN lookup\",\n\t\t\t],\n\t\t},\n\t\t\"general-contractor\": {\n\t\t\ttitle: \"General contractors appreciate\",\n\t\t\tbullets: [\n\t\t\t\t\"Subcontractor management\",\n\t\t\t\t\"Project milestone tracking\",\n\t\t\t\t\"Change order documentation\",\n\t\t\t],\n\t\t},\n\t\tother: {\n\t\t\ttitle: \"Service businesses using Thorbis see\",\n\t\t\tbullets: [\n\t\t\t\t\"50% reduction in scheduling conflicts\",\n\t\t\t\t\"30% faster payment collection\",\n\t\t\t\t\"Happier customers with automated updates\",\n\t\t\t],\n\t\t},\n\t};\n\n// Referral sources for tracking\nconst REFERRAL_SOURCES = [\n\t{ value: \"google\", label: \"Google Search\" },\n\t{ value: \"facebook\", label: \"Facebook/Instagram\" },\n\t{ value: \"linkedin\", label: \"LinkedIn\" },\n\t{ value: \"youtube\", label: \"YouTube\" },\n\t{ value: \"podcast\", label: \"Podcast\" },\n\t{ value: \"friend\", label: \"Friend or Colleague\" },\n\t{ value: \"conference\", label: \"Trade Show/Conference\" },\n\t{ value: \"review-site\", label: \"Review Site (G2, Capterra)\" },\n\t{ value: \"other\", label: \"Other\" },\n];\n\nconst PATH_OPTIONS: {\n\tid: OnboardingPath;\n\ttitle: string;\n\tsubtitle: string;\n\ticon: React.ElementType;\n}[] = [\n\t{\n\t\tid: \"solo\",\n\t\ttitle: \"Solo\",\n\t\tsubtitle: \"Just me\",\n\t\ticon: User,\n\t},\n\t{\n\t\tid: \"small\",\n\t\ttitle: \"Small Team\",\n\t\tsubtitle: \"2-5 people\",\n\t\ticon: Users,\n\t},\n\t{\n\t\tid: \"growing\",\n\t\ttitle: \"Growing\",\n\t\tsubtitle: \"6-20 people\",\n\t\ticon: Building2,\n\t},\n\t{\n\t\tid: \"enterprise\",\n\t\ttitle: \"Enterprise\",\n\t\tsubtitle: \"20+ people\",\n\t\ticon: Building,\n\t},\n];\n\nexport function WelcomeStep() {\n\tconst { data, updateData } = useOnboardingStore();\n\n\tconst industryInsight = data.industry\n\t\t? INDUSTRY_INSIGHTS[data.industry]\n\t\t: null;\n\n\treturn (\n\t\t<div className=\"space-y-10\">\n\t\t\t{/* Hero */}\n\t\t\t<div className=\"text-center space-y-3\">\n\t\t\t\t<h1 className=\"text-3xl font-semibold tracking-tight\">\n\t\t\t\t\tWelcome to Thorbis\n\t\t\t\t</h1>\n\t\t\t\t<p className=\"text-muted-foreground text-lg max-w-md mx-auto\">\n\t\t\t\t\tLet's personalize your setup. This only takes a few minutes.\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t{/* Team Size */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<label className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\tHow big is your team?\n\t\t\t\t</label>\n\t\t\t\t<div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n\t\t\t\t\t{PATH_OPTIONS.map((option) => {\n\t\t\t\t\t\tconst Icon = option.icon;\n\t\t\t\t\t\tconst isSelected = data.path === option.id;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tupdateData({ path: option.id, teamSize: option.subtitle })\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex flex-col items-center gap-2 rounded-lg border-2 p-4 transition-all\",\n\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t\t\t: \"border-transparent bg-muted/40 hover:bg-muted/60\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isSelected && (\n\t\t\t\t\t\t\t\t\t<div className=\"absolute top-2 right-2\">\n\t\t\t\t\t\t\t\t\t\t<Check className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex h-10 w-10 items-center justify-center rounded-full\",\n\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-primary text-primary-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-muted\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"h-5 w-5\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium text-sm\">{option.title}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{option.subtitle}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Industry */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<label className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\tWhat industry are you in?\n\t\t\t\t</label>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={data.industry}\n\t\t\t\t\tonValueChange={(v) => updateData({ industry: v })}\n\t\t\t\t>\n\t\t\t\t\t<SelectTrigger className=\"w-full max-w-xs\">\n\t\t\t\t\t\t<SelectValue placeholder=\"Select your trade\" />\n\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t{INDUSTRIES.map((industry) => (\n\t\t\t\t\t\t\t<SelectItem key={industry.value} value={industry.value}>\n\t\t\t\t\t\t\t\t{industry.label}\n\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SelectContent>\n\t\t\t\t</Select>\n\n\t\t\t\t{/* Industry-specific insights */}\n\t\t\t\t{industryInsight && (\n\t\t\t\t\t<div className=\"mt-4 p-4 rounded-lg bg-primary/5 border border-primary/10 animate-in fade-in slide-in-from-bottom-2 duration-300\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t<div className=\"p-2 rounded-full bg-primary/10\">\n\t\t\t\t\t\t\t\t<Sparkles className=\"h-4 w-4 text-primary\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{industryInsight.title}</p>\n\t\t\t\t\t\t\t\t<ul className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t{industryInsight.bullets.map((bullet, i) => (\n\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground flex items-center gap-2\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Check className=\"h-3.5 w-3.5 text-green-500 flex-shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t\t{bullet}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{!industryInsight && (\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\tWe'll customize templates and suggestions for your trade.\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Referral Source */}\n\t\t\t<div className=\"space-y-4\">\n\t\t\t\t<label className=\"text-sm font-medium text-muted-foreground\">\n\t\t\t\t\tHow did you hear about us?{\" \"}\n\t\t\t\t\t<span className=\"text-muted-foreground/60\">(optional)</span>\n\t\t\t\t</label>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={data.referralSource || \"\"}\n\t\t\t\t\tonValueChange={(v) => updateData({ referralSource: v })}\n\t\t\t\t>\n\t\t\t\t\t<SelectTrigger className=\"w-full max-w-xs\">\n\t\t\t\t\t\t<SelectValue placeholder=\"Select an option\" />\n\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t{REFERRAL_SOURCES.map((source) => (\n\t\t\t\t\t\t\t<SelectItem key={source.value} value={source.value}>\n\t\t\t\t\t\t\t\t{source.label}\n\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SelectContent>\n\t\t\t\t</Select>\n\t\t\t</div>\n\n\t\t\t{/* Quick Stats - Build confidence */}\n\t\t\t<div className=\"pt-4 border-t\">\n\t\t\t\t<div className=\"grid grid-cols-3 gap-4 text-center\">\n\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-1 text-muted-foreground\">\n\t\t\t\t\t\t\t<Clock className=\"h-4 w-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-2xl font-semibold\">5 min</p>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Setup time</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-1 text-muted-foreground\">\n\t\t\t\t\t\t\t<TrendingUp className=\"h-4 w-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-2xl font-semibold\">10K+</p>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Active businesses</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-1 text-muted-foreground\">\n\t\t\t\t\t\t\t<Shield className=\"h-4 w-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p className=\"text-2xl font-semibold\">14 days</p>\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Free trial</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Assisted Onboarding CTA */}\n\t\t\t<div className=\"rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border border-blue-200 dark:border-blue-800 p-5\">\n\t\t\t\t<div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\n\t\t\t\t\t<div className=\"p-3 rounded-full bg-blue-100 dark:bg-blue-900 shrink-0\">\n\t\t\t\t\t\t<Phone className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-1 space-y-1\">\n\t\t\t\t\t\t<h3 className=\"font-semibold text-blue-900 dark:text-blue-100\">\n\t\t\t\t\t\t\tWant help getting set up?\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-blue-700 dark:text-blue-300\">\n\t\t\t\t\t\t\tSchedule a free 30-minute call with our onboarding team. We'll\n\t\t\t\t\t\t\thelp you migrate data, configure settings, and get your team\n\t\t\t\t\t\t\ttrained.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tclassName=\"shrink-0 border-blue-300 dark:border-blue-700 hover:bg-blue-100 dark:hover:bg-blue-900\"\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\twindow.open(\"https://calendly.com/thorbis/onboarding\", \"_blank\")\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Calendar className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\tSchedule Call\n\t\t\t\t\t\t<ArrowRight className=\"h-4 w-4 ml-2\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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AA,CAAA,QAAA,GAAA,EAAA,CAAA,CAAA,QA8BA,IAAM,GACL,CACC,KAAM,CACL,MAAO,2CACP,QAAS,CACR,wCACA,kCACA,2CACA,AACF,EACA,SAAU,CACT,MAAO,0CACP,QAAS,CACR,8BACA,wCACA,0CAEF,AADE,EAEF,WAAY,CACX,MAAO,sCACP,QAAS,CACR,8BACA,6BACA,gCACA,AACF,EACA,QAAS,CACR,MAAO,6BACP,QAAS,CACR,2BACA,iCACA,6BACA,AACF,EACA,YAAa,CACZ,MAAO,+BACP,QAAS,CACR,+BACA,2BACA,2BACA,AACF,EACA,SAAU,CACT,MAAO,qCACP,QAAS,CACR,mCACA,iCACA,+BACA,AACF,EACA,eAAgB,CACf,MAAO,sCACP,QAAS,CACR,6BACA,gCACA,iCACA,AACF,EACA,UAAW,CACV,MAAO,6BACP,QAAS,CACR,2BACA,8BACA,+BAEF,AADE,EAEF,cAAe,CACd,MAAO,4BACP,QAAS,CACR,yBACA,uBACA,mCACA,AACF,EACA,UAAW,CACV,MAAO,0BACP,QAAS,CACR,8BACA,0BACA,qBACA,AACF,EACA,qBAAsB,CACrB,MAAO,iCACP,QAAS,CACR,2BACA,6BACA,6BACA,AACF,EACA,MAAO,CACN,MAAO,uCACP,QAAS,CACR,wCACA,gCACA,2CACA,AACF,CACD,EAGK,GAAmB,CACxB,CAAE,MAAO,SAAU,MAAO,eAAgB,EAC1C,CAAE,MAAO,WAAY,MAAO,oBAAqB,EACjD,CAAE,MAAO,WAAY,MAAO,UAAW,EACvC,CAAE,MAAO,UAAW,MAAO,SAAU,EACrC,CAAE,MAAO,UAAW,MAAO,SAAU,EACrC,CAAE,MAAO,SAAU,MAAO,qBAAsB,EAChD,CAAE,MAAO,aAAc,MAAO,uBAAwB,EACtD,CAAE,MAAO,cAAe,MAAO,4BAA6B,EAC5D,CAAE,MAAO,QAAS,MAAO,OAAQ,EACjC,CAEK,GAKA,CACL,CACC,GAAI,OACJ,MAAO,OACP,SAAU,UACV,KAAM,GAAA,IAAI,AACX,EACA,CACC,GAAI,QACJ,MAAO,aACP,SAAU,aACV,KAAM,EAAA,KACP,AADY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"}