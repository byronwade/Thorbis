{"version":3,"sources":["../../../../../../apps/web/src/components/work/equipment/equipment-page-content.tsx","../../../../../../apps/web/src/components/work/equipment-detail-toolbar-actions.tsx"],"sourcesContent":["/**\n * Equipment Page Content\n *\n * Comprehensive equipment details with collapsible sections\n * Matches job and customer detail page patterns\n */\n\n\"use client\";\n\nimport {\n\tAlertTriangle,\n\tCalendar,\n\tFuel,\n\tGauge,\n\tMapPin,\n\tPackage,\n\tShieldCheck,\n\tTruck,\n\tUser,\n\tWrench,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport type { ReactNode } from \"react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { updateEntityTags } from \"@/actions/entity-tags\";\nimport {\n\tDetailPageContentLayout,\n\ttype DetailPageHeaderConfig,\n} from \"@/components/layout/detail-page-content-layout\";\nimport { DetailPageSurface } from \"@/components/layout/detail-page-shell\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tUnifiedAccordionContent,\n\ttype UnifiedAccordionSection,\n} from \"@/components/ui/unified-accordion\";\nimport { EntityTags } from \"@/components/work/entity-tags\";\nimport { useSectionShortcuts } from \"@/hooks/use-section-shortcuts\";\n\nexport type EquipmentData = {\n\tequipment: any;\n\tcustomer?: any;\n\tproperty?: any;\n\tservicePlan?: any;\n\tinstallJob?: any; // NEW: for lifecycle tracking\n\tlastServiceJob?: any; // NEW: for lifecycle tracking\n\tupcomingMaintenance?: any[]; // NEW: for lifecycle tracking\n\tserviceHistory?: any[];\n\tnotes?: any[];\n\tactivities?: any[];\n\tattachments?: any[];\n};\n\nexport type EquipmentPageContentProps = {\n\tentityData: EquipmentData;\n};\n\nfunction _formatCurrency(cents: number | null | undefined): string {\n\tif (cents === null || cents === undefined) {\n\t\treturn \"$0.00\";\n\t}\n\treturn new Intl.NumberFormat(\"en-US\", {\n\t\tstyle: \"currency\",\n\t\tcurrency: \"USD\",\n\t}).format(cents / 100);\n}\n\nfunction getStatusBadge(status: string, key?: string) {\n\tconst variants: Record<string, { className: string; label: string }> = {\n\t\tactive: {\n\t\t\tclassName: \"bg-success text-white\",\n\t\t\tlabel: \"Active\",\n\t\t},\n\t\tinactive: {\n\t\t\tclassName: \"bg-secondary0 text-white\",\n\t\t\tlabel: \"Inactive\",\n\t\t},\n\t\tretired: {\n\t\t\tclassName: \"bg-warning text-white\",\n\t\t\tlabel: \"Retired\",\n\t\t},\n\t\treplaced: {\n\t\t\tclassName: \"bg-primary text-white\",\n\t\t\tlabel: \"Replaced\",\n\t\t},\n\t};\n\n\tconst config = variants[status] || {\n\t\tclassName: \"bg-muted text-foreground\",\n\t\tlabel: status,\n\t};\n\n\treturn (\n\t\t<Badge className={config.className} key={key} variant=\"outline\">\n\t\t\t{config.label}\n\t\t</Badge>\n\t);\n}\n\nfunction getConditionBadge(condition: string, key?: string) {\n\tconst variants: Record<string, { className: string; label: string }> = {\n\t\texcellent: {\n\t\t\tclassName: \"bg-success text-white\",\n\t\t\tlabel: \"Excellent\",\n\t\t},\n\t\tgood: {\n\t\t\tclassName: \"bg-primary text-white\",\n\t\t\tlabel: \"Good\",\n\t\t},\n\t\tfair: {\n\t\t\tclassName: \"bg-warning text-white\",\n\t\t\tlabel: \"Fair\",\n\t\t},\n\t\tpoor: {\n\t\t\tclassName: \"bg-warning text-white\",\n\t\t\tlabel: \"Poor\",\n\t\t},\n\t\tneeds_replacement: {\n\t\t\tclassName: \"bg-destructive text-white\",\n\t\t\tlabel: \"Needs Replacement\",\n\t\t},\n\t};\n\n\tconst config = variants[condition] || {\n\t\tclassName: \"bg-muted text-foreground\",\n\t\tlabel: condition,\n\t};\n\n\treturn (\n\t\t<Badge className={config.className} key={key} variant=\"outline\">\n\t\t\t{config.label}\n\t\t</Badge>\n\t);\n}\n\nconst classificationLabelMap = {\n\tequipment: \"Equipment\",\n\ttool: \"Tool\",\n\tvehicle: \"Vehicle\",\n} as const;\n\nfunction formatLabel(value?: string | null): string {\n\tif (!value) {\n\t\treturn \"N/A\";\n\t}\n\treturn value\n\t\t.toString()\n\t\t.replace(/[_-]+/g, \" \")\n\t\t.replace(/\\s+/g, \" \")\n\t\t.trim()\n\t\t.replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nfunction formatDate(value?: string | null): string {\n\tif (!value) {\n\t\treturn \"N/A\";\n\t}\n\tconst date = new Date(value);\n\tif (Number.isNaN(date.getTime())) {\n\t\treturn \"N/A\";\n\t}\n\treturn date.toLocaleDateString(\"en-US\", {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\tyear: \"numeric\",\n\t});\n}\n\nfunction formatNumber(value?: number | null, unit?: string): string {\n\tif (value === null || value === undefined || Number.isNaN(value)) {\n\t\treturn \"N/A\";\n\t}\n\tconst formatted = value.toLocaleString(\"en-US\");\n\treturn unit ? `${formatted} ${unit}` : formatted;\n}\n\nfunction getDaysUntil(value?: string | null): number | null {\n\tif (!value) {\n\t\treturn null;\n\t}\n\tconst target = new Date(value);\n\tif (Number.isNaN(target.getTime())) {\n\t\treturn null;\n\t}\n\tconst diffMs = target.getTime() - Date.now();\n\treturn Math.round(diffMs / (1000 * 60 * 60 * 24));\n}\n\nexport function EquipmentPageContent({\n\tentityData,\n}: EquipmentPageContentProps) {\n\tconst {\n\t\tequipment,\n\t\tcustomer,\n\t\tproperty,\n\t\tservicePlan,\n\t\tinstallJob, // NEW: for lifecycle tracking\n\t\tlastServiceJob, // NEW: for lifecycle tracking\n\t\tupcomingMaintenance = [], // NEW: for lifecycle tracking\n\t\tserviceHistory = [],\n\t\tnotes = [],\n\t\tactivities = [],\n\t\tattachments = [],\n\t} = entityData;\n\n\tconst [mounted, setMounted] = useState(false);\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\t// Extract equipment tags from junction table (now included in RPC response)\n\tconst equipmentTags = useMemo(() => {\n\t\tif (!equipment?.equipment_tags) return [];\n\t\treturn equipment.equipment_tags.map((et: any) => ({\n\t\t\tid: et.id,\n\t\t\tname: et.name,\n\t\t\tslug: et.slug,\n\t\t\tcolor: et.color,\n\t\t\tcategory: et.category,\n\t\t\ticon: et.icon,\n\t\t}));\n\t}, [equipment?.equipment_tags]);\n\n\t// Keyboard shortcuts for section navigation (Ctrl+1 through Ctrl+9)\n\tconst sectionShortcuts = useMemo(\n\t\t() => ({\n\t\t\t\"1\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"equipment-details\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"2\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"fleet-profile\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"3\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"fleet-service\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"4\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"installation\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"5\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"last-service\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"6\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"upcoming-maintenance\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"7\": () => {\n\t\t\t\tconst element = document.querySelector('[data-section-id=\"warranty\"]');\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"8\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"service-history\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"9\": () => {\n\t\t\t\tconst element = document.querySelector(\n\t\t\t\t\t'[data-section-id=\"customer-details\"]',\n\t\t\t\t);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t\t\t\t\tconst trigger = element.querySelector(\"[data-accordion-trigger]\");\n\t\t\t\t\tif (trigger && trigger.getAttribute(\"data-state\") === \"closed\") {\n\t\t\t\t\t\t(trigger as HTMLElement).click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t}),\n\t\t[],\n\t);\n\n\tuseSectionShortcuts(sectionShortcuts);\n\n\tconst rawClassification =\n\t\t(equipment.classification as\n\t\t\t| keyof typeof classificationLabelMap\n\t\t\t| undefined) ?? \"equipment\";\n\tconst classificationKey: keyof typeof classificationLabelMap =\n\t\tclassificationLabelMap[rawClassification] ? rawClassification : \"equipment\";\n\tconst classificationLabel =\n\t\tclassificationLabelMap[classificationKey] ||\n\t\tformatLabel(equipment.classification);\n\tconst typeLabel = formatLabel(equipment.type);\n\tconst assetCategoryLabel = equipment.asset_category\n\t\t? formatLabel(equipment.asset_category)\n\t\t: null;\n\tconst assetSubcategoryLabel = equipment.asset_subcategory\n\t\t? formatLabel(equipment.asset_subcategory)\n\t\t: null;\n\tconst isVehicle = classificationKey === \"vehicle\";\n\tconst isTool = classificationKey === \"tool\";\n\n\tconst toneStyles = {\n\t\tpositive: \"border-success/30 bg-success/10\",\n\t\twarning: \"border-warning/40 bg-warning/10\",\n\t\tcritical: \"border-destructive/40 bg-destructive/10\",\n\t\tinfo: \"border-primary/30 bg-primary/10\",\n\t} as const;\n\n\tconst headerBadges = [\n\t\tgetStatusBadge(equipment.status || \"active\", \"status\"),\n\t\tgetConditionBadge(equipment.condition || \"good\", \"condition\"),\n\t\t<Badge\n\t\t\tclassName=\"bg-primary/10 text-primary\"\n\t\t\tkey=\"classification\"\n\t\t\tvariant=\"outline\"\n\t\t>\n\t\t\t{classificationLabel}\n\t\t</Badge>,\n\t];\n\n\tconst equipmentIdentifier =\n\t\tequipment.equipment_number ||\n\t\tequipment.asset_id ||\n\t\tequipment.id?.slice(0, 8).toUpperCase();\n\n\tconst equipmentName =\n\t\tequipment.name || `Equipment ${equipmentIdentifier ?? \"\"}`.trim();\n\n\tconst subtitleSegments = [\n\t\tclassificationLabel,\n\t\ttypeLabel !== \"N/A\" && typeLabel !== \"NA\" ? typeLabel : null,\n\t\tequipment.manufacturer || null,\n\t\tequipment.model || null,\n\t].filter(Boolean);\n\n\tconst headerSubtitle =\n\t\tsubtitleSegments.length > 0 ? subtitleSegments.join(\" • \") : undefined;\n\n\tconst metadataItems = [] as NonNullable<DetailPageHeaderConfig[\"metadata\"]>;\n\n\tmetadataItems.push({\n\t\tlabel: \"Equipment #\",\n\t\ticon: <Package className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\tvalue: equipmentIdentifier ?? \"Not assigned\",\n\t\thelperText: classificationLabel,\n\t});\n\n\tmetadataItems.push({\n\t\tlabel: \"Status\",\n\t\ticon: <ShieldCheck className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\tvalue: formatLabel(equipment.status) || \"Active\",\n\t\thelperText: formatLabel(equipment.condition),\n\t});\n\n\tmetadataItems.push({\n\t\tlabel: \"Installed\",\n\t\ticon: <Calendar className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\tvalue: formatDate(equipment.install_date),\n\t\thelperText: equipment.installed_by\n\t\t\t? `By ${equipment.installed_by}`\n\t\t\t: undefined,\n\t});\n\n\tif (equipment.serial_number) {\n\t\tmetadataItems.push({\n\t\t\tlabel: \"Serial Number\",\n\t\t\ticon: <Wrench className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\t\tvalue: equipment.serial_number,\n\t\t});\n\t}\n\n\tif (customer) {\n\t\tmetadataItems.push({\n\t\t\tlabel: \"Customer\",\n\t\t\ticon: <User className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\t\tvalue: (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"text-foreground text-sm font-medium hover:underline\"\n\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t>\n\t\t\t\t\t{customer.display_name ||\n\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\"Unknown Customer\"}\n\t\t\t\t</Link>\n\t\t\t),\n\t\t\thelperText: customer.email || customer.phone || undefined,\n\t\t});\n\t}\n\n\tif (property) {\n\t\tmetadataItems.push({\n\t\t\tlabel: \"Location\",\n\t\t\ticon: <MapPin className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\t\tvalue: property.address || property.name || \"Not assigned\",\n\t\t\thelperText:\n\t\t\t\t`${property.city || \"\"}, ${property.state || \"\"} ${property.zip_code || \"\"}`.trim(),\n\t\t});\n\t}\n\n\tif (servicePlan) {\n\t\tmetadataItems.push({\n\t\t\tlabel: \"Service Plan\",\n\t\t\ticon: <ShieldCheck className=\"text-muted-foreground h-3.5 w-3.5\" />,\n\t\t\tvalue: (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"text-foreground text-sm font-medium hover:underline\"\n\t\t\t\t\thref={`/dashboard/work/maintenance-plans/${servicePlan.id}`}\n\t\t\t\t>\n\t\t\t\t\t{servicePlan.name ||\n\t\t\t\t\t\t`Plan ${servicePlan.plan_number || servicePlan.id.slice(0, 8)}`}\n\t\t\t\t</Link>\n\t\t\t),\n\t\t\thelperText: servicePlan.status || undefined,\n\t\t});\n\t}\n\n\tconst secondaryActions: ReactNode[] = [];\n\n\tif (customer) {\n\t\tsecondaryActions.push(\n\t\t\t<Button asChild key=\"view-customer\" size=\"sm\" variant=\"outline\">\n\t\t\t\t<Link href={`/dashboard/customers/${customer.id}`}>View Customer</Link>\n\t\t\t</Button>,\n\t\t);\n\t}\n\n\tif (property) {\n\t\tsecondaryActions.push(\n\t\t\t<Button asChild key=\"view-property\" size=\"sm\" variant=\"outline\">\n\t\t\t\t<Link href={`/dashboard/work/properties/${property.id}`}>\n\t\t\t\t\tView Property\n\t\t\t\t</Link>\n\t\t\t</Button>,\n\t\t);\n\t}\n\n\tconst headerConfig: DetailPageHeaderConfig = {\n\t\ttitle: equipmentName,\n\t\tsubtitle: headerSubtitle,\n\t\tbadges: headerBadges,\n\t\tmetadata: metadataItems,\n\t\tsecondaryActions:\n\t\t\tsecondaryActions.length > 0 ? secondaryActions : undefined,\n\t};\n\n\tconst smartInsights = useMemo(() => {\n\t\tconst insights: Array<{\n\t\t\ttone: \"positive\" | \"warning\" | \"critical\" | \"info\";\n\t\t\ttitle: string;\n\t\t\tdescription: string;\n\t\t\ticon?: ReactNode;\n\t\t}> = [];\n\n\t\tif (isVehicle) {\n\t\t\tif (\n\t\t\t\ttypeof equipment.vehicle_odometer === \"number\" &&\n\t\t\t\ttypeof equipment.vehicle_next_service_mileage === \"number\"\n\t\t\t) {\n\t\t\t\tconst milesRemaining =\n\t\t\t\t\tequipment.vehicle_next_service_mileage - equipment.vehicle_odometer;\n\t\t\t\tif (Number.isFinite(milesRemaining)) {\n\t\t\t\t\tconst tone =\n\t\t\t\t\t\tmilesRemaining < 0\n\t\t\t\t\t\t\t? \"critical\"\n\t\t\t\t\t\t\t: milesRemaining <= 500\n\t\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t\t: \"info\";\n\t\t\t\t\tinsights.push({\n\t\t\t\t\t\ttone,\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\tmilesRemaining < 0\n\t\t\t\t\t\t\t\t? `Service overdue by ${formatNumber(Math.abs(milesRemaining), \"mi\")}`\n\t\t\t\t\t\t\t\t: `Service due in ${formatNumber(milesRemaining, \"mi\")}`,\n\t\t\t\t\t\tdescription: `Next service at ${formatNumber(\n\t\t\t\t\t\t\tequipment.vehicle_next_service_mileage,\n\t\t\t\t\t\t\t\"mi\",\n\t\t\t\t\t\t)}${equipment.next_service_due ? ` • ${formatDate(equipment.next_service_due)}` : \"\"}`,\n\t\t\t\t\t\ticon: <Gauge className=\"size-4\" />,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst inspectionDays = getDaysUntil(equipment.vehicle_inspection_due);\n\t\t\tif (inspectionDays !== null) {\n\t\t\t\tconst tone =\n\t\t\t\t\tinspectionDays < 0\n\t\t\t\t\t\t? \"critical\"\n\t\t\t\t\t\t: inspectionDays <= 14\n\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t: \"info\";\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\tinspectionDays < 0\n\t\t\t\t\t\t\t? `Inspection overdue by ${Math.abs(inspectionDays)} days`\n\t\t\t\t\t\t\t: `Inspection due in ${inspectionDays} days`,\n\t\t\t\t\tdescription: `Due ${formatDate(equipment.vehicle_inspection_due)}`,\n\t\t\t\t\ticon: <AlertTriangle className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst registrationDays = getDaysUntil(\n\t\t\t\tequipment.vehicle_registration_expiration,\n\t\t\t);\n\t\t\tif (registrationDays !== null) {\n\t\t\t\tconst tone =\n\t\t\t\t\tregistrationDays < 0\n\t\t\t\t\t\t? \"critical\"\n\t\t\t\t\t\t: registrationDays <= 30\n\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t: \"info\";\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\tregistrationDays < 0\n\t\t\t\t\t\t\t? `Registration expired ${Math.abs(registrationDays)} days ago`\n\t\t\t\t\t\t\t: `Registration expires in ${registrationDays} days`,\n\t\t\t\t\tdescription: `Renew by ${formatDate(equipment.vehicle_registration_expiration)}`,\n\t\t\t\t\ticon: <Truck className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (equipment.vehicle_fuel_type) {\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone: \"info\",\n\t\t\t\t\ttitle: `${formatLabel(equipment.vehicle_fuel_type)} fuel`,\n\t\t\t\t\tdescription: \"Fuel type captured for compliance and routing.\",\n\t\t\t\t\ticon: <Fuel className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (isTool) {\n\t\t\tconst calibrationDays = getDaysUntil(equipment.tool_calibration_due);\n\t\t\tif (calibrationDays !== null) {\n\t\t\t\tconst tone =\n\t\t\t\t\tcalibrationDays < 0\n\t\t\t\t\t\t? \"critical\"\n\t\t\t\t\t\t: calibrationDays <= 14\n\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t: \"info\";\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\tcalibrationDays < 0\n\t\t\t\t\t\t\t? `Calibration overdue by ${Math.abs(calibrationDays)} days`\n\t\t\t\t\t\t\t: `Calibration due in ${calibrationDays} days`,\n\t\t\t\t\tdescription: `Scheduled for ${formatDate(equipment.tool_calibration_due)}`,\n\t\t\t\t\ticon: <Gauge className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (equipment.condition) {\n\t\t\t\tconst tone =\n\t\t\t\t\tequipment.condition === \"needs_replacement\" ||\n\t\t\t\t\tequipment.condition === \"poor\"\n\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t: \"info\";\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone,\n\t\t\t\t\ttitle: `Condition: ${formatLabel(equipment.condition)}`,\n\t\t\t\t\tdescription:\n\t\t\t\t\t\tequipment.condition === \"needs_replacement\"\n\t\t\t\t\t\t\t? \"Plan replacement to avoid downtime.\"\n\t\t\t\t\t\t\t: \"Equipment ready for deployment.\",\n\t\t\t\t\ticon: <Wrench className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (equipment.tool_serial) {\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone: \"info\",\n\t\t\t\t\ttitle: `Serial ${equipment.tool_serial}`,\n\t\t\t\t\tdescription: \"Tracked for warranty and service history.\",\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconst serviceDays = getDaysUntil(equipment.next_service_due);\n\t\t\tif (serviceDays !== null) {\n\t\t\t\tconst tone =\n\t\t\t\t\tserviceDays < 0 ? \"critical\" : serviceDays <= 30 ? \"warning\" : \"info\";\n\t\t\t\tinsights.push({\n\t\t\t\t\ttone,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\tserviceDays < 0\n\t\t\t\t\t\t\t? `Service overdue by ${Math.abs(serviceDays)} days`\n\t\t\t\t\t\t\t: `Service due in ${serviceDays} days`,\n\t\t\t\t\tdescription: `Next scheduled for ${formatDate(equipment.next_service_due)}`,\n\t\t\t\t\ticon: <Gauge className=\"size-4\" />,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (equipment.is_under_warranty && equipment.warranty_expiration) {\n\t\t\t\tconst warrantyDays = getDaysUntil(equipment.warranty_expiration);\n\t\t\t\tif (warrantyDays !== null) {\n\t\t\t\t\tconst tone =\n\t\t\t\t\t\twarrantyDays < 0\n\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t: warrantyDays <= 60\n\t\t\t\t\t\t\t\t? \"warning\"\n\t\t\t\t\t\t\t\t: \"positive\";\n\t\t\t\t\tinsights.push({\n\t\t\t\t\t\ttone,\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\twarrantyDays < 0\n\t\t\t\t\t\t\t\t? \"Warranty expired\"\n\t\t\t\t\t\t\t\t: `Warranty active (${warrantyDays} days remaining)`,\n\t\t\t\t\t\tdescription: `Covers until ${formatDate(equipment.warranty_expiration)}`,\n\t\t\t\t\t\ticon: <ShieldCheck className=\"size-4\" />,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn insights;\n\t}, [\n\t\tequipment.condition,\n\t\tequipment.is_under_warranty,\n\t\tequipment.next_service_due,\n\t\tequipment.tool_calibration_due,\n\t\tequipment.tool_serial,\n\t\tequipment.vehicle_fuel_type,\n\t\tequipment.vehicle_inspection_due,\n\t\tequipment.vehicle_next_service_mileage,\n\t\tequipment.vehicle_odometer,\n\t\tequipment.vehicle_registration_expiration,\n\t\tisTool,\n\t\tisVehicle,\n\t\tequipment.warranty_expiration,\n\t]);\n\n\tconst nextServiceDays = getDaysUntil(equipment.next_service_due);\n\tconst warrantyDays = getDaysUntil(equipment.warranty_expiration);\n\n\tconst lifecycleTiles = [\n\t\t{\n\t\t\tkey: \"install\",\n\t\t\tlabel: \"Install Date\",\n\t\t\tvalue: formatDate(equipment.install_date),\n\t\t\thelperText: equipment.installed_by\n\t\t\t\t? `Installed by ${equipment.installed_by}`\n\t\t\t\t: undefined,\n\t\t\ticon: <Calendar className=\"text-muted-foreground h-4 w-4\" />,\n\t\t},\n\t\t{\n\t\t\tkey: \"last-service\",\n\t\t\tlabel: \"Last Service\",\n\t\t\tvalue: formatDate(equipment.last_service_date),\n\t\t\thelperText: equipment.last_service_job_id\n\t\t\t\t? \"Linked job on record\"\n\t\t\t\t: undefined,\n\t\t\ticon: <Wrench className=\"text-muted-foreground h-4 w-4\" />,\n\t\t},\n\t\t{\n\t\t\tkey: \"next-service\",\n\t\t\tlabel: \"Next Service Due\",\n\t\t\tvalue: formatDate(equipment.next_service_due),\n\t\t\thelperText:\n\t\t\t\tnextServiceDays !== null\n\t\t\t\t\t? nextServiceDays < 0\n\t\t\t\t\t\t? `${Math.abs(nextServiceDays)} days overdue`\n\t\t\t\t\t\t: `Due in ${nextServiceDays} days`\n\t\t\t\t\t: undefined,\n\t\t\ticon: <Gauge className=\"text-muted-foreground h-4 w-4\" />,\n\t\t},\n\t\t{\n\t\t\tkey: \"warranty\",\n\t\t\tlabel: \"Warranty\",\n\t\t\tvalue: equipment.is_under_warranty ? \"Active\" : \"Expired\",\n\t\t\thelperText:\n\t\t\t\tequipment.warranty_expiration && warrantyDays !== null\n\t\t\t\t\t? warrantyDays < 0\n\t\t\t\t\t\t? `Expired ${Math.abs(warrantyDays)} days ago`\n\t\t\t\t\t\t: `Expires in ${warrantyDays} days`\n\t\t\t\t\t: equipment.warranty_expiration\n\t\t\t\t\t\t? `Expires ${formatDate(equipment.warranty_expiration)}`\n\t\t\t\t\t\t: undefined,\n\t\t\ticon: <ShieldCheck className=\"text-muted-foreground h-4 w-4\" />,\n\t\t},\n\t];\n\n\tconst summarySurface =\n\t\tlifecycleTiles.length > 0 ? (\n\t\t\t<DetailPageSurface className=\"w-full\" padding=\"lg\" variant=\"muted\">\n\t\t\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t\t\t<h3 className=\"text-foreground text-base font-semibold\">\n\t\t\t\t\t\tLifecycle Overview\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-4\">\n\t\t\t\t\t\t{lifecycleTiles.map(({ key, label, value, helperText, icon }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"border-border/40 bg-background rounded-lg border px-3 py-3\"\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-medium uppercase\">\n\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-semibold\">{value}</span>\n\t\t\t\t\t\t\t\t\t\t{helperText ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{helperText}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</DetailPageSurface>\n\t\t) : null;\n\n\tconst smartInsightsSurface =\n\t\tsmartInsights.length > 0 ? (\n\t\t\t<DetailPageSurface className=\"w-full\" padding=\"lg\" variant=\"muted\">\n\t\t\t\t<div className=\"flex flex-col gap-3\">\n\t\t\t\t\t<h3 className=\"text-foreground text-base font-semibold\">\n\t\t\t\t\t\tSmart Insights\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t\t\t{smartInsights.map((insight) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={`rounded-md border p-3 text-sm ${toneStyles[insight.tone]}`}\n\t\t\t\t\t\t\t\tkey={`${insight.title}-${insight.description}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t{insight.icon && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground mt-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t{insight.icon}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-foreground font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{insight.title}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{insight.description}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</DetailPageSurface>\n\t\t) : null;\n\n\tconst beforeContent =\n\t\tsmartInsightsSurface || summarySurface ? (\n\t\t\t<div className=\"mx-auto flex w-full max-w-7xl flex-col gap-4\">\n\t\t\t\t{smartInsightsSurface}\n\t\t\t\t{summarySurface}\n\t\t\t</div>\n\t\t) : null;\n\n\tconst customSections = useMemo<UnifiedAccordionSection[]>(() => {\n\t\tconst sections: UnifiedAccordionSection[] = [\n\t\t\t{\n\t\t\t\tid: \"equipment-details\",\n\t\t\t\ttitle: \"Equipment Details\",\n\t\t\t\ticon: <Package className=\"size-4\" />,\n\t\t\t\tdefaultOpen: true,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Equipment Number</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={equipment.equipment_number || equipment.id.slice(0, 8)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Classification</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={classificationLabel} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Type</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={typeLabel !== \"N/A\" ? typeLabel : \"Unspecified\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Manufacturer</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.manufacturer || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Model</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.model || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{equipment.serial_number && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Serial Number</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.serial_number} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.model_year && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Model Year</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.model_year.toString()} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.location && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Location</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.location} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{assetCategoryLabel && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Asset Category</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={assetCategoryLabel} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{assetSubcategoryLabel && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Asset Subcategory</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={assetSubcategoryLabel} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.capacity && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Capacity</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.capacity} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.efficiency && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Efficiency</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.efficiency} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.fuel_type && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Fuel Type</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.fuel_type} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t},\n\t\t];\n\n\t\tif (isVehicle) {\n\t\t\tconst milesRemaining =\n\t\t\t\ttypeof equipment.vehicle_next_service_mileage === \"number\" &&\n\t\t\t\ttypeof equipment.vehicle_odometer === \"number\"\n\t\t\t\t\t? equipment.vehicle_next_service_mileage - equipment.vehicle_odometer\n\t\t\t\t\t: null;\n\n\t\t\tsections.push({\n\t\t\t\tid: \"fleet-profile\",\n\t\t\t\ttitle: \"Fleet Profile\",\n\t\t\t\ticon: <Truck className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Make</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.vehicle_make || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Model</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.vehicle_model || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Year</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tequipment.vehicle_year\n\t\t\t\t\t\t\t\t\t\t\t? equipment.vehicle_year.toString()\n\t\t\t\t\t\t\t\t\t\t\t: \"N/A\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>VIN</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.vehicle_vin || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>License / Unit</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={equipment.vehicle_license_plate || \"N/A\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Fuel Type</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tequipment.vehicle_fuel_type\n\t\t\t\t\t\t\t\t\t\t\t? formatLabel(equipment.vehicle_fuel_type)\n\t\t\t\t\t\t\t\t\t\t\t: \"N/A\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\n\t\t\tsections.push({\n\t\t\t\tid: \"fleet-service\",\n\t\t\t\ttitle: \"Service Metrics\",\n\t\t\t\ticon: <Gauge className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Odometer</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatNumber(equipment.vehicle_odometer, \"mi\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Last Service Mileage</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatNumber(\n\t\t\t\t\t\t\t\t\t\tequipment.vehicle_last_service_mileage,\n\t\t\t\t\t\t\t\t\t\t\"mi\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Next Service Mileage</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatNumber(\n\t\t\t\t\t\t\t\t\t\tequipment.vehicle_next_service_mileage,\n\t\t\t\t\t\t\t\t\t\t\"mi\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Remaining Until Service</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tmilesRemaining === null\n\t\t\t\t\t\t\t\t\t\t\t? \"N/A\"\n\t\t\t\t\t\t\t\t\t\t\t: milesRemaining < 0\n\t\t\t\t\t\t\t\t\t\t\t\t? `Past due by ${formatNumber(Math.abs(milesRemaining), \"mi\")}`\n\t\t\t\t\t\t\t\t\t\t\t\t: formatNumber(milesRemaining, \"mi\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\n\t\t\tsections.push({\n\t\t\t\tid: \"fleet-compliance\",\n\t\t\t\ttitle: \"Compliance & Renewals\",\n\t\t\t\ticon: <AlertTriangle className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Registration Expires</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatDate(equipment.vehicle_registration_expiration)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Inspection Due</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatDate(equipment.vehicle_inspection_due)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (isTool) {\n\t\t\tsections.push({\n\t\t\t\tid: \"tool-profile\",\n\t\t\t\ttitle: \"Tool Profile\",\n\t\t\t\ticon: <Wrench className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Tool Serial</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={equipment.tool_serial || \"N/A\"} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Primary Use</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={assetSubcategoryLabel || assetCategoryLabel || \"N/A\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\n\t\t\tsections.push({\n\t\t\t\tid: \"tool-calibration\",\n\t\t\t\ttitle: \"Calibration & Warranty\",\n\t\t\t\ticon: <Gauge className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Calibration Due</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatDate(equipment.tool_calibration_due)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Warranty Expires</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={formatDate(equipment.warranty_expiration)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Condition</Label>\n\t\t\t\t\t\t\t\t<Input readOnly value={formatLabel(equipment.condition)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// NEW: Enhanced Installation Section with full job data\n\t\tif (equipment.install_date || equipment.installed_by || installJob) {\n\t\t\tsections.push({\n\t\t\t\tid: \"installation\",\n\t\t\t\ttitle: \"Installation\",\n\t\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t{equipment.install_date && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label>Install Date</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\tvalue={new Date(\n\t\t\t\t\t\t\t\t\t\t\t\tequipment.install_date,\n\t\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{equipment.installed_by && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Label>Installed By</Label>\n\t\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.installed_by} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Install Job Card */}\n\t\t\t\t\t\t\t{installJob && (\n\t\t\t\t\t\t\t\t<div className=\"bg-card rounded-lg border p-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Label className=\"mb-2 block\">Install Job</Label>\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-lg font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t\t{installJob.title || `Job #${installJob.job_number}`}\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t#{installJob.job_number}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{installJob.completed_at && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tCompleted:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{new Date(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstallJob.completed_at,\n\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{installJob.status}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/${installJob.id}`}>\n\t\t\t\t\t\t\t\t\t\t\t\tView Job\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// NEW: Last Service Job Section\n\t\tif (lastServiceJob) {\n\t\t\tsections.push({\n\t\t\t\tid: \"last-service\",\n\t\t\t\ttitle: \"Last Service\",\n\t\t\t\ticon: <Wrench className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"bg-card rounded-lg border p-4\">\n\t\t\t\t\t\t\t<div className=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label className=\"mb-2 block\">Most Recent Service</Label>\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-lg font-semibold\">\n\t\t\t\t\t\t\t\t\t\t{lastServiceJob.title ||\n\t\t\t\t\t\t\t\t\t\t\t`Job #${lastServiceJob.job_number}`}\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{lastServiceJob.job_number}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{lastServiceJob.completed_at && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\tCompleted:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{new Date(\n\t\t\t\t\t\t\t\t\t\t\t\tlastServiceJob.completed_at,\n\t\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{lastServiceJob.status}</Badge>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/${lastServiceJob.id}`}>\n\t\t\t\t\t\t\t\t\t\tView Job\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// NEW: Upcoming Maintenance Section\n\t\tif (upcomingMaintenance.length > 0) {\n\t\t\tsections.push({\n\t\t\t\tid: \"upcoming-maintenance\",\n\t\t\t\ttitle: \"Upcoming Maintenance\",\n\t\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\t\tcount: upcomingMaintenance.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t{upcomingMaintenance.map((schedule: any) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"bg-card rounded-lg border p-4\"\n\t\t\t\t\t\t\t\t\tkey={schedule.id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t{new Date(schedule.scheduled_start).toLocaleDateString(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"en-US\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tweekday: \"long\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmonth: \"long\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t{new Date(schedule.scheduled_start).toLocaleTimeString(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"en-US\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thour: \"numeric\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminute: \"2-digit\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{schedule.job && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{schedule.job.title ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Job #${schedule.job.job_number}`}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{schedule.status}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`/dashboard/appointments/${schedule.id}`}>\n\t\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (equipment.is_under_warranty || equipment.warranty_expiration) {\n\t\t\tsections.push({\n\t\t\t\tid: \"warranty\",\n\t\t\t\ttitle: \"Warranty\",\n\t\t\t\ticon: <ShieldCheck className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Under Warranty</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\tvalue={equipment.is_under_warranty ? \"Yes\" : \"No\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{equipment.warranty_expiration && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Warranty Expiration</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(\n\t\t\t\t\t\t\t\t\t\t\tequipment.warranty_expiration,\n\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.warranty_provider && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Warranty Provider</Label>\n\t\t\t\t\t\t\t\t\t<Input readOnly value={equipment.warranty_provider} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.warranty_notes && (\n\t\t\t\t\t\t\t\t<div className=\"md:col-span-2\">\n\t\t\t\t\t\t\t\t\t<Label>Warranty Notes</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t\t\t{equipment.warranty_notes}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (serviceHistory.length > 0) {\n\t\t\tsections.push({\n\t\t\t\tid: \"service-history\",\n\t\t\t\ttitle: \"Service History\",\n\t\t\t\ticon: <Wrench className=\"size-4\" />,\n\t\t\t\tcount: serviceHistory.length,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t{serviceHistory.map((service: any) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between rounded-lg border p-3\"\n\t\t\t\t\t\t\t\t\tkey={service.id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t{service.service_type || \"Service\"}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{service.serviced_at\n\t\t\t\t\t\t\t\t\t\t\t\t? new Date(service.serviced_at).toLocaleDateString()\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Date unknown\"}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{service.job_id && (\n\t\t\t\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`/dashboard/work/${service.job_id}`}>\n\t\t\t\t\t\t\t\t\t\t\t\tView Job\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (equipment.last_service_date || equipment.next_service_due) {\n\t\t\tsections.push({\n\t\t\t\tid: \"maintenance-schedule\",\n\t\t\t\ttitle: \"Maintenance Schedule\",\n\t\t\t\ticon: <Calendar className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"grid gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t{equipment.last_service_date && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Last Service</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(\n\t\t\t\t\t\t\t\t\t\t\tequipment.last_service_date,\n\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.next_service_due && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Next Service Due</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(\n\t\t\t\t\t\t\t\t\t\t\tequipment.next_service_due,\n\t\t\t\t\t\t\t\t\t\t).toLocaleDateString()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{equipment.service_interval_days && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Service Interval</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\tvalue={`${equipment.service_interval_days} days`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (customer) {\n\t\t\tsections.push({\n\t\t\t\tid: \"customer-details\",\n\t\t\t\ttitle: \"Customer Details\",\n\t\t\t\ticon: <User className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n\t\t\t\t\t\t\t<div className=\"grid flex-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Name</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t{customer.display_name ||\n\t\t\t\t\t\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\t\t\t\"Unknown\"}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>Email</Label>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">{customer.email || \"N/A\"}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t\t\t<Link href={`/dashboard/customers/${customer.id}`}>\n\t\t\t\t\t\t\t\t\tView Full Profile\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tif (property) {\n\t\t\tsections.push({\n\t\t\t\tid: \"property-location\",\n\t\t\t\ttitle: \"Property Location\",\n\t\t\t\ticon: <MapPin className=\"size-4\" />,\n\t\t\t\tcontent: (\n\t\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>Service Address</Label>\n\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t{property.address}\n\t\t\t\t\t\t\t\t\t{property.address2 && `, ${property.address2}`}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t{property.city}, {property.state} {property.zip_code}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(\n\t\t\t\t\t\t\t\t\t\t`${property.address}, ${property.city}, ${property.state}`,\n\t\t\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MapPin className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\t\tOpen in Google Maps\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</UnifiedAccordionContent>\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\t// Tags Section - Always show\n\t\tsections.push({\n\t\t\tid: \"tags\",\n\t\t\ttitle: \"Tags\",\n\t\t\ticon: <Package className=\"size-4\" />,\n\t\t\tcontent: (\n\t\t\t\t<UnifiedAccordionContent>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"bg-muted/50 rounded-md\">\n\t\t\t\t\t\t\t<div className=\"flex flex-col gap-3 p-4\">\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-medium\">\n\t\t\t\t\t\t\t\t\tOrganize equipment with tags:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<EntityTags\n\t\t\t\t\t\t\t\t\tentityId={equipment.id}\n\t\t\t\t\t\t\t\t\tentityType=\"equipment\"\n\t\t\t\t\t\t\t\t\tonUpdateTags={async (id, tags) => {\n\t\t\t\t\t\t\t\t\t\tconst result = await updateEntityTags(\n\t\t\t\t\t\t\t\t\t\t\t\"equipment\",\n\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\ttags,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\t\trouter.refresh();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttags={equipmentTags}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</UnifiedAccordionContent>\n\t\t\t),\n\t\t});\n\n\t\treturn sections;\n\t}, [\n\t\tassetCategoryLabel,\n\t\tassetSubcategoryLabel,\n\t\tclassificationLabel,\n\t\tequipment,\n\t\tcustomer,\n\t\tproperty,\n\t\tinstallJob,\n\t\tlastServiceJob,\n\t\tupcomingMaintenance,\n\t\tserviceHistory,\n\t\tisTool,\n\t\tisVehicle,\n\t\ttypeLabel,\n\t\tequipmentTags,\n\t\trouter,\n\t]);\n\n\tconst relatedItems = useMemo(() => {\n\t\tconst items: any[] = [];\n\n\t\tif (customer) {\n\t\t\titems.push({\n\t\t\t\tid: `customer-${customer.id}`,\n\t\t\t\ttype: \"customer\",\n\t\t\t\ttitle:\n\t\t\t\t\tcustomer.display_name ||\n\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\"Unknown Customer\",\n\t\t\t\tsubtitle: customer.email || customer.phone || undefined,\n\t\t\t\thref: `/dashboard/customers/${customer.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (property) {\n\t\t\titems.push({\n\t\t\t\tid: `property-${property.id}`,\n\t\t\t\ttype: \"property\",\n\t\t\t\ttitle: property.address || property.name || \"Property\",\n\t\t\t\tsubtitle:\n\t\t\t\t\t`${property.city || \"\"}, ${property.state || \"\"}`.trim() || undefined,\n\t\t\t\thref: `/dashboard/work/properties/${property.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (servicePlan) {\n\t\t\titems.push({\n\t\t\t\tid: `service-plan-${servicePlan.id}`,\n\t\t\t\ttype: \"service_plan\",\n\t\t\t\ttitle:\n\t\t\t\t\tservicePlan.name ||\n\t\t\t\t\t`Plan ${servicePlan.plan_number || servicePlan.id.slice(0, 8)}`,\n\t\t\t\tsubtitle: servicePlan.status,\n\t\t\t\thref: `/dashboard/work/maintenance-plans/${servicePlan.id}`,\n\t\t\t\tbadge: servicePlan.status\n\t\t\t\t\t? { label: servicePlan.status, variant: \"outline\" as const }\n\t\t\t\t\t: undefined,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [customer, property, servicePlan]);\n\n\tif (!mounted) {\n\t\treturn <div className=\"flex-1 p-6\">Loading...</div>;\n\t}\n\n\treturn (\n\t\t<DetailPageContentLayout\n\t\t\tactivities={activities}\n\t\t\tattachments={attachments}\n\t\t\tbeforeContent={beforeContent}\n\t\t\tclassName=\"mx-auto w-full max-w-7xl\"\n\t\t\tcustomSections={customSections}\n\t\t\tdefaultOpenSection=\"equipment-details\"\n\t\t\theader={headerConfig}\n\t\t\tnotes={notes}\n\t\t\trelatedItems={relatedItems}\n\t\t\tshowStandardSections={{\n\t\t\t\tactivities: true,\n\t\t\t\tnotes: true,\n\t\t\t\tattachments: true,\n\t\t\t\trelatedItems: true,\n\t\t\t}}\n\t\t\tstorageKey=\"equipment-details\"\n\t\t/>\n\t);\n}\n","\"use client\";\n\n/**\n * Equipment Detail Toolbar Actions - Client Component\n *\n * Provides equipment-specific toolbar actions:\n * - Create service job\n * - View maintenance log\n * - Duplicate equipment\n * - Archive equipment\n *\n * Design: Clean, compact, outline buttons with consistent grouping\n */\n\nimport { Archive, ClipboardList, Copy, Wrench } from \"lucide-react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { archiveEquipment } from \"@/actions/equipment\";\nimport { ImportExportDropdownLazy as ImportExportDropdown } from \"@/components/data/import-export-dropdown-lazy\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function EquipmentDetailToolbarActions() {\n\tconst pathname = usePathname();\n\tconst router = useRouter();\n\tconst { toast } = useToast();\n\tconst equipmentId = pathname?.split(\"/\").pop();\n\tconst [isArchiveDialogOpen, setIsArchiveDialogOpen] = useState(false);\n\tconst [isArchiving, setIsArchiving] = useState(false);\n\n\tconst handleArchive = async () => {\n\t\tif (!equipmentId) {\n\t\t\ttoast.error(\"Equipment ID not found\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsArchiving(true);\n\t\ttry {\n\t\t\tconst result = await archiveEquipment(equipmentId);\n\t\t\tif (result.success) {\n\t\t\t\ttoast.success(\"Equipment archived successfully\");\n\t\t\t\tsetIsArchiveDialogOpen(false);\n\t\t\t\trouter.push(\"/dashboard/work/equipment\");\n\t\t\t\t// Server Action handles revalidation automatically\n\t\t\t} else {\n\t\t\t\ttoast.error(result.error || \"Failed to archive equipment\");\n\t\t\t}\n\t\t} catch {\n\t\t\ttoast.error(\"Failed to archive equipment\");\n\t\t} finally {\n\t\t\tsetIsArchiving(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"flex items-center gap-1.5\">\n\t\t\t\t{/* Quick Actions - Standardized styling */}\n\t\t\t\t<TooltipProvider>\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a href={`/dashboard/work/new?equipmentId=${equipmentId}`}>\n\t\t\t\t\t\t\t\t\t<Wrench />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden md:inline\">Service Job</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Create service job for this equipment</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`/dashboard/work/equipment/${equipmentId}?tab=maintenance`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ClipboardList />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Maintenance</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>View maintenance log</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button asChild size=\"sm\" variant=\"outline\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`/dashboard/work/equipment/new?cloneFrom=${equipmentId}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Copy />\n\t\t\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Copy</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Duplicate equipment record</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</TooltipProvider>\n\n\t\t\t\t<Separator className=\"h-8\" orientation=\"vertical\" />\n\t\t\t\t<ImportExportDropdown dataType=\"equipment\" />\n\n\t\t\t\t<Separator className=\"h-8\" orientation=\"vertical\" />\n\t\t\t\t<TooltipProvider>\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"border-destructive/40 text-destructive hover:bg-destructive/10 h-8 gap-1.5\"\n\t\t\t\t\t\t\t\tonClick={() => setIsArchiveDialogOpen(true)}\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Archive className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Archive</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\t<p>Archive equipment</p>\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</TooltipProvider>\n\t\t\t</div>\n\n\t\t\t<Dialog onOpenChange={setIsArchiveDialogOpen} open={isArchiveDialogOpen}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Archive Equipment</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tAre you sure you want to archive this equipment? Archived records\n\t\t\t\t\t\t\tcan be restored within 90 days.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isArchiving}\n\t\t\t\t\t\t\tonClick={() => setIsArchiveDialogOpen(false)}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isArchiving}\n\t\t\t\t\t\t\tonClick={handleArchive}\n\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isArchiving ? \"Archiving...\" : \"Archive Equipment\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}