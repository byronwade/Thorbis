{"version":3,"sources":["../../../../../../apps/web/src/actions/communication-stats-actions.ts","../../../../../../apps/web/.next-internal/server/app/%28dashboard%29/dashboard/analytics/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/lib/supabase/server\";\nimport { getActiveCompanyId } from \"@/lib/auth/company-context\";\n\n/**\n * Get comprehensive communication statistics\n */\nexport async function getCommunicationStatsAction(days: number = 30): Promise<{\n  success: boolean;\n  data?: {\n    // Overview stats\n    totalEmails: number;\n    totalSms: number;\n    totalCalls: number;\n    unreadEmails: number;\n    unreadSms: number;\n    totalUnread: number;\n    \n    // Today's stats\n    emailsToday: number;\n    smsToday: number;\n    callsToday: number;\n    \n    // Direction stats\n    emailsInbound: number;\n    emailsOutbound: number;\n    smsInbound: number;\n    smsOutbound: number;\n    callsInbound: number;\n    callsOutbound: number;\n    \n    // Time-based data for charts\n    dailyStats: Array<{\n      date: string;\n      emails: number;\n      sms: number;\n      calls: number;\n    }>;\n    \n    // Channel distribution\n    channelDistribution: {\n      email: number;\n      sms: number;\n      calls: number;\n    };\n    \n    // Response time stats (for emails and SMS)\n    avgResponseTime: number; // in minutes\n    responseTimeData: Array<{\n      date: string;\n      avgResponseTime: number;\n    }>;\n    hourlyStats: Array<{\n      hour: number;\n      Emails: number;\n      SMS: number;\n      Calls: number;\n    }>;\n    directionData: Array<{\n      name: string;\n      Emails: number;\n      SMS: number;\n      Calls: number;\n    }>;\n    weeklyStats: Array<{\n      week: string;\n      Emails: number;\n      SMS: number;\n      Calls: number;\n    }>;\n    totalInbound: number;\n    totalOutbound: number;\n    readRate: number;\n    peakHour: number;\n    avgPerDay: number;\n    responseRate: number;\n    dayOfWeekStats: Array<{\n      day: string;\n      Emails: number;\n      SMS: number;\n      Calls: number;\n    }>;\n    unreadTrendData: Array<{\n      date: string;\n      \"Unread Emails\": number;\n      \"Unread SMS\": number;\n    }>;\n    avgEmailResponseTime: number;\n    avgSmsResponseTime: number;\n    inboundOutboundTrend: Array<{\n      date: string;\n      Inbound: number;\n      Outbound: number;\n    }>;\n    busiestDay: string;\n    efficiencyScore: number;\n    totalCallDuration: number;\n    avgCallDuration: number;\n  };\n  error?: string;\n}> {\n  try {\n    const companyId = await getActiveCompanyId();\n    if (!companyId) {\n      return { success: false, error: \"No active company found\" };\n    }\n\n    const supabase = await createClient();\n    if (!supabase) {\n      return { success: false, error: \"Database connection failed\" };\n    }\n\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n    const startDateISO = startDate.toISOString();\n\n    // Get communications in the date range (limit to 10000 for performance)\n    const { data: communications, error } = await supabase\n      .from(\"communications\")\n      .select(\"id, type, direction, created_at, read_at, call_duration\")\n      .eq(\"company_id\", companyId)\n      .is(\"deleted_at\", null)\n      .gte(\"created_at\", startDateISO)\n      .order(\"created_at\", { ascending: false })\n      .limit(10000);\n\n    if (error) {\n      return { success: false, error: error.message };\n    }\n\n    const comms = communications || [];\n\n    // ============================================================\n    // SINGLE-PASS PROCESSING - Calculate ALL metrics in one loop\n    // Performance: ~50x faster than multiple filter() calls\n    // ============================================================\n\n    // Pre-calculate date thresholds\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const todayISO = today.toISOString();\n\n    const sevenDaysAgo = new Date();\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n    const sevenDaysAgoISO = sevenDaysAgo.toISOString();\n\n    const fourWeeksAgo = new Date();\n    fourWeeksAgo.setDate(fourWeeksAgo.getDate() - 28);\n    const fourWeeksAgoISO = fourWeeksAgo.toISOString();\n\n    // Initialize all accumulators\n    let totalEmails = 0;\n    let totalSms = 0;\n    let totalCalls = 0;\n    let unreadEmails = 0;\n    let unreadSms = 0;\n    let emailsToday = 0;\n    let smsToday = 0;\n    let callsToday = 0;\n    let emailsInbound = 0;\n    let emailsOutbound = 0;\n    let smsInbound = 0;\n    let smsOutbound = 0;\n    let callsInbound = 0;\n    let callsOutbound = 0;\n    let readCount = 0;\n    let totalCallDuration = 0;\n    let emailResponseTimeSum = 0;\n    let emailResponseTimeCount = 0;\n    let smsResponseTimeSum = 0;\n    let smsResponseTimeCount = 0;\n    let allResponseTimeSum = 0;\n    let allResponseTimeCount = 0;\n\n    // Maps for aggregations\n    const dailyStatsMap = new Map<string, { emails: number; sms: number; calls: number }>();\n    const hourlyStatsMap = new Map<number, { emails: number; sms: number; calls: number }>();\n    const weeklyStatsMap = new Map<string, { emails: number; sms: number; calls: number }>();\n    const dayOfWeekStatsMap = new Map<number, { emails: number; sms: number; calls: number }>();\n    const unreadTrendMap = new Map<string, { emails: number; sms: number }>();\n    const inboundByDate = new Map<string, number>();\n    const outboundByDate = new Map<string, number>();\n    const responseTimeMap = new Map<string, number[]>();\n\n    // SINGLE PASS through all communications\n    for (const comm of comms) {\n      const createdAt = comm.created_at;\n      const date = new Date(createdAt);\n      const dateStr = createdAt.split(\"T\")[0];\n      const isEmail = comm.type === \"email\";\n      const isSms = comm.type === \"sms\";\n      const isCall = comm.type === \"phone\" || comm.type === \"call\";\n      const isInbound = comm.direction === \"inbound\";\n      const isOutbound = comm.direction === \"outbound\";\n      const isRead = !!comm.read_at;\n      const isToday = createdAt >= todayISO;\n      const isLast7Days = createdAt >= sevenDaysAgoISO;\n      const isLast4Weeks = createdAt >= fourWeeksAgoISO;\n\n      // Count totals by type\n      if (isEmail) totalEmails++;\n      else if (isSms) totalSms++;\n      else if (isCall) totalCalls++;\n\n      // Count unread (inbound only)\n      if (isInbound && !isRead) {\n        if (isEmail) unreadEmails++;\n        else if (isSms) unreadSms++;\n      }\n\n      // Count today's messages\n      if (isToday) {\n        if (isEmail) emailsToday++;\n        else if (isSms) smsToday++;\n        else if (isCall) callsToday++;\n      }\n\n      // Count by direction\n      if (isEmail) {\n        if (isInbound) emailsInbound++;\n        else if (isOutbound) emailsOutbound++;\n      } else if (isSms) {\n        if (isInbound) smsInbound++;\n        else if (isOutbound) smsOutbound++;\n      } else if (isCall) {\n        if (isInbound) callsInbound++;\n        else if (isOutbound) callsOutbound++;\n      }\n\n      // Count read messages\n      if (isRead) readCount++;\n\n      // Accumulate call duration\n      if (isCall && comm.call_duration) {\n        totalCallDuration += comm.call_duration;\n      }\n\n      // Calculate response times for emails/sms\n      if (isRead && (isEmail || isSms) && comm.read_at) {\n        const created = date.getTime();\n        const read = new Date(comm.read_at).getTime();\n        const minutes = (read - created) / (1000 * 60);\n\n        if (minutes > 0 && minutes < 10080) { // Less than 7 days\n          allResponseTimeSum += minutes;\n          allResponseTimeCount++;\n\n          // Track response times by date\n          const existing = responseTimeMap.get(dateStr) || [];\n          existing.push(minutes);\n          responseTimeMap.set(dateStr, existing);\n\n          // Track by channel (inbound only for meaningful response times)\n          if (isInbound) {\n            if (isEmail) {\n              emailResponseTimeSum += minutes;\n              emailResponseTimeCount++;\n            } else if (isSms) {\n              smsResponseTimeSum += minutes;\n              smsResponseTimeCount++;\n            }\n          }\n        }\n      }\n\n      // Daily stats aggregation\n      const dailyStats = dailyStatsMap.get(dateStr) || { emails: 0, sms: 0, calls: 0 };\n      if (isEmail) dailyStats.emails++;\n      else if (isSms) dailyStats.sms++;\n      else if (isCall) dailyStats.calls++;\n      dailyStatsMap.set(dateStr, dailyStats);\n\n      // Hourly stats (last 7 days only)\n      if (isLast7Days) {\n        const hour = date.getHours();\n        const hourlyStats = hourlyStatsMap.get(hour) || { emails: 0, sms: 0, calls: 0 };\n        if (isEmail) hourlyStats.emails++;\n        else if (isSms) hourlyStats.sms++;\n        else if (isCall) hourlyStats.calls++;\n        hourlyStatsMap.set(hour, hourlyStats);\n      }\n\n      // Weekly stats (last 4 weeks only)\n      if (isLast4Weeks) {\n        const weekStart = new Date(date);\n        weekStart.setDate(date.getDate() - date.getDay());\n        const weekKey = weekStart.toISOString().split(\"T\")[0];\n        const weekStats = weeklyStatsMap.get(weekKey) || { emails: 0, sms: 0, calls: 0 };\n        if (isEmail) weekStats.emails++;\n        else if (isSms) weekStats.sms++;\n        else if (isCall) weekStats.calls++;\n        weeklyStatsMap.set(weekKey, weekStats);\n      }\n\n      // Day of week stats\n      const dayOfWeek = date.getDay();\n      const dowStats = dayOfWeekStatsMap.get(dayOfWeek) || { emails: 0, sms: 0, calls: 0 };\n      if (isEmail) dowStats.emails++;\n      else if (isSms) dowStats.sms++;\n      else if (isCall) dowStats.calls++;\n      dayOfWeekStatsMap.set(dayOfWeek, dowStats);\n\n      // Unread trend (inbound emails/sms only)\n      if ((isEmail || isSms) && isInbound && !isRead) {\n        const unreadStats = unreadTrendMap.get(dateStr) || { emails: 0, sms: 0 };\n        if (isEmail) unreadStats.emails++;\n        else if (isSms) unreadStats.sms++;\n        unreadTrendMap.set(dateStr, unreadStats);\n      }\n\n      // Inbound/outbound by date\n      if (isInbound) {\n        inboundByDate.set(dateStr, (inboundByDate.get(dateStr) || 0) + 1);\n      } else if (isOutbound) {\n        outboundByDate.set(dateStr, (outboundByDate.get(dateStr) || 0) + 1);\n      }\n    }\n\n    // ============================================================\n    // POST-PROCESSING - Build final data structures\n    // ============================================================\n\n    // Convert daily stats to array with filled dates\n    const dailyStats: Array<{ date: string; emails: number; sms: number; calls: number }> = [];\n    for (let i = 0; i < days; i++) {\n      const date = new Date(startDate);\n      date.setDate(date.getDate() + i);\n      const dateStr = date.toISOString().split(\"T\")[0];\n      const stats = dailyStatsMap.get(dateStr) || { emails: 0, sms: 0, calls: 0 };\n      dailyStats.push({ date: dateStr, ...stats });\n    }\n\n    // Channel distribution\n    const channelDistribution = {\n      email: totalEmails,\n      sms: totalSms,\n      calls: totalCalls,\n    };\n\n    // Calculate average response times\n    const avgResponseTime = allResponseTimeCount > 0\n      ? allResponseTimeSum / allResponseTimeCount\n      : 0;\n    const avgEmailResponseTime = emailResponseTimeCount > 0\n      ? emailResponseTimeSum / emailResponseTimeCount\n      : 0;\n    const avgSmsResponseTime = smsResponseTimeCount > 0\n      ? smsResponseTimeSum / smsResponseTimeCount\n      : 0;\n\n    // Response time data by date\n    const responseTimeData: Array<{ date: string; avgResponseTime: number }> = [];\n    for (let i = 0; i < days; i++) {\n      const date = new Date(startDate);\n      date.setDate(date.getDate() + i);\n      const dateStr = date.toISOString().split(\"T\")[0];\n      const times = responseTimeMap.get(dateStr) || [];\n      const avg = times.length > 0\n        ? times.reduce((a, b) => a + b, 0) / times.length\n        : 0;\n      responseTimeData.push({ date: dateStr, avgResponseTime: avg });\n    }\n\n    // Hourly stats array\n    const hourlyStats = Array.from({ length: 24 }, (_, i) => {\n      const stats = hourlyStatsMap.get(i) || { emails: 0, sms: 0, calls: 0 };\n      return { hour: i, Emails: stats.emails, SMS: stats.sms, Calls: stats.calls };\n    });\n\n    // Direction comparison data\n    const directionData = [\n      { name: \"Inbound\", Emails: emailsInbound, SMS: smsInbound, Calls: callsInbound },\n      { name: \"Outbound\", Emails: emailsOutbound, SMS: smsOutbound, Calls: callsOutbound },\n    ];\n\n    // Weekly stats array\n    const weeklyStats = Array.from(weeklyStatsMap.entries())\n      .sort(([a], [b]) => a.localeCompare(b))\n      .map(([date, stats]) => ({\n        week: new Date(date).toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" }),\n        Emails: stats.emails,\n        SMS: stats.sms,\n        Calls: stats.calls,\n      }));\n\n    // Calculated metrics\n    const totalInbound = emailsInbound + smsInbound + callsInbound;\n    const totalOutbound = emailsOutbound + smsOutbound + callsOutbound;\n    const totalCommunications = totalEmails + totalSms + totalCalls;\n    const readRate = totalCommunications > 0 ? (readCount / totalCommunications) * 100 : 0;\n\n    // Peak hour\n    const peakHour = hourlyStats.reduce((max, hour) =>\n      (hour.Emails + hour.SMS + hour.Calls) > (max.Emails + max.SMS + max.Calls) ? hour : max,\n      hourlyStats[0]\n    );\n\n    // Average per day\n    const avgPerDay = days > 0 ? totalCommunications / days : 0;\n\n    // Response rate\n    const responseRate = totalInbound > 0 ? ((totalOutbound / totalInbound) * 100) : 0;\n\n    // Day of week stats array\n    const dayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    const dayOfWeekStats = Array.from({ length: 7 }, (_, i) => {\n      const stats = dayOfWeekStatsMap.get(i) || { emails: 0, sms: 0, calls: 0 };\n      return { day: dayNames[i], Emails: stats.emails, SMS: stats.sms, Calls: stats.calls };\n    });\n\n    // Unread trend array\n    const unreadTrendData: Array<{ date: string; \"Unread Emails\": number; \"Unread SMS\": number }> = [];\n    for (let i = 0; i < days; i++) {\n      const date = new Date(startDate);\n      date.setDate(date.getDate() + i);\n      const dateStr = date.toISOString().split(\"T\")[0];\n      const stats = unreadTrendMap.get(dateStr) || { emails: 0, sms: 0 };\n      unreadTrendData.push({ date: dateStr, \"Unread Emails\": stats.emails, \"Unread SMS\": stats.sms });\n    }\n\n    // Inbound/outbound trend array\n    const inboundOutboundTrend: Array<{ date: string; Inbound: number; Outbound: number }> = [];\n    for (let i = 0; i < days; i++) {\n      const date = new Date(startDate);\n      date.setDate(date.getDate() + i);\n      const dateStr = date.toISOString().split(\"T\")[0];\n      inboundOutboundTrend.push({\n        date: dateStr,\n        Inbound: inboundByDate.get(dateStr) || 0,\n        Outbound: outboundByDate.get(dateStr) || 0,\n      });\n    }\n\n    // Busiest day\n    const busiestDay = dayOfWeekStats.reduce((max, day) =>\n      (day.Emails + day.SMS + day.Calls) > (max.Emails + max.SMS + max.Calls) ? day : max,\n      dayOfWeekStats[0]\n    );\n\n    // Efficiency score\n    const efficiencyScore = responseRate > 0 && avgResponseTime > 0\n      ? (responseRate / (avgResponseTime / 60))\n      : 0;\n\n    // Average call duration\n    const avgCallDuration = totalCalls > 0 ? totalCallDuration / totalCalls : 0;\n\n    return {\n      success: true,\n      data: {\n        totalEmails,\n        totalSms,\n        totalCalls,\n        unreadEmails,\n        unreadSms,\n        totalUnread: unreadEmails + unreadSms,\n        emailsToday,\n        smsToday,\n        callsToday,\n        emailsInbound,\n        emailsOutbound,\n        smsInbound,\n        smsOutbound,\n        callsInbound,\n        callsOutbound,\n        dailyStats,\n        channelDistribution: channelDistribution,\n        avgResponseTime,\n        responseTimeData,\n        hourlyStats,\n        directionData,\n        weeklyStats,\n        totalInbound,\n        totalOutbound,\n        readRate,\n        peakHour: peakHour.hour,\n        avgPerDay,\n        responseRate,\n        dayOfWeekStats,\n        unreadTrendData,\n        avgEmailResponseTime,\n        avgSmsResponseTime,\n        inboundOutboundTrend,\n        busiestDay: busiestDay.day,\n        efficiencyScore,\n        totalCallDuration,\n        avgCallDuration,\n      },\n    };\n  } catch (error) {\n    console.error(\"Error getting communication stats:\", error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : \"Unknown error\",\n    };\n  }\n}\n\n","export {getCurrentUserRole as '001f005176797ef23488068124fb9a744915a477de'} from 'ACTIONS_MODULE0'\nexport {canDeleteTeamMember as '406f6624261c6dd1a908026fa1408a3f6d507b6e7d'} from 'ACTIONS_MODULE0'\nexport {getPayrixMerchantAccount as '40704f0e856ad801ef93b43436f219a36f7c0efd2c'} from 'ACTIONS_MODULE1'\nexport {getWebRTCCredentials as '000478fbf5363dae5000d525663da13e29908cb952'} from 'ACTIONS_MODULE2'\nexport {transcribeCallRecording as '4002f454c46f4c21ca6e9e26362583ccff69c9f914'} from 'ACTIONS_MODULE2'\nexport {getCompanyPhoneNumbers as '4019cf9f81eb3c06f82b5c2f8eb042f3d95d91e933'} from 'ACTIONS_MODULE2'\nexport {getCallRoutingRules as '40247c617842c31b242455a0961cbd2c3297606a16'} from 'ACTIONS_MODULE2'\nexport {updateCallRoutingRule as '40413bfa888916480edbc33ebb812158fddf960f89'} from 'ACTIONS_MODULE2'\nexport {startCallRecording as '404e47931374ad2a1b54bc11f357703790f6104530'} from 'ACTIONS_MODULE2'\nexport {transferActiveCall as '405a16958f97c37bd4b5711bd8761510bdab55839f'} from 'ACTIONS_MODULE2'\nexport {searchPhoneNumbers as '406864ae05b8b51c66cc2c335999e5011a41cb521f'} from 'ACTIONS_MODULE2'\nexport {makeCall as '40b2df540ec465c5dc19545c96486485bb50b5633b'} from 'ACTIONS_MODULE2'\nexport {sendTextMessage as '40d050abdabe2ee7293436c505c5f27b4408a2f27c'} from 'ACTIONS_MODULE2'\nexport {stopCallRecording as '40d5cc291162e2fd61245bdb851d5e8ed609e4ed19'} from 'ACTIONS_MODULE2'\nexport {sendMMSMessage as '40edd91786b2a482e617fb16f2474d26ec295435e7'} from 'ACTIONS_MODULE2'\nexport {purchasePhoneNumber as '40fd6a80b32792fab749933f98f07503d8e94c0305'} from 'ACTIONS_MODULE2'\nexport {deleteCallRoutingRule as '607d0f958daf66b2a0d5277cdda17600dace5156bb'} from 'ACTIONS_MODULE2'\nexport {toggleCallRoutingRule as '60853f1e409364f7e171e27229217994ff224414e6'} from 'ACTIONS_MODULE2'\nexport {createServiceSupabaseClient as '00a13dbd00149949fc1367d3e76ae7d789e07f5321'} from 'ACTIONS_MODULE3'\nexport {ensureMessagingBranding as '606753f8910b46d5792f4bdeb457cdf29d1a8bbadc'} from 'ACTIONS_MODULE4'\nexport {ensureMessagingCampaign as '70a648f43fa62ae3dcf2070eb90413e96e81591e77'} from 'ACTIONS_MODULE4'\nexport {checkTelnyxVerificationStatus as '007505a78985e53e083a498c97761ed8a463d3d379'} from 'ACTIONS_MODULE5'\nexport {submitAutomatedVerification as '4087f0badccd6aaf6a28b640ab4bbc513f0832d105'} from 'ACTIONS_MODULE5'\nexport {registerCompanyFor10DLC as '40ae25402a089e45aa071d979e8cc6ad136205cc98'} from 'ACTIONS_MODULE5'\nexport {sendVerificationSubmittedEmail as '70f58c5ba46ef02b620d7dc87bae8fc83f6d480755'} from 'ACTIONS_MODULE6'\nexport {sendEmail as '40f8c061cf84f884e77af3425bc24b8a8d72f598fb'} from 'ACTIONS_MODULE7'\nexport {handleComplaintWebhook as '6045f8436f9cdfdadb7bfe3955677adfc5f4102de0'} from 'ACTIONS_MODULE7'\nexport {handleBounceWebhook as '78a8ea4f1cfa571a366adccf36ac04b1c85d61ae2b'} from 'ACTIONS_MODULE7'\nexport {runHealthCheckForAllDomains as '00c53a1f02416c3261983f8096f19a3450bfd51775'} from 'ACTIONS_MODULE8'\nexport {getDomainHealth as '400b8fb96146bfd004a3166563a5ab5536bb610c70'} from 'ACTIONS_MODULE8'\nexport {recordDeliveryEvent as '404d6f2891af89c71d5bde33d110a216bdd3ee4729'} from 'ACTIONS_MODULE8'\nexport {getCompanyDomainsHealth as '405c57a8fed352b8679525b56014eb8c49105c850c'} from 'ACTIONS_MODULE8'\nexport {processResendWebhookEvent as '40ad037af6f6ab1a3004746d3a1b65afa65527002d'} from 'ACTIONS_MODULE8'\nexport {generateDeliverabilityReport as '40ecf2c792e84ef4b898fda98ec27277b4a9dddef2'} from 'ACTIONS_MODULE8'\nexport {resetHourlyCounters as '004cdde5e6ae8991bab4ba61ae40647c2b823200ba'} from 'ACTIONS_MODULE9'\nexport {resetDailyCounters as '006acf41615a2f7795c47b6d7a3016e18300f2ad17'} from 'ACTIONS_MODULE9'\nexport {incrementEmailCounter as '4029b163c1c0acfd806352a72fe8030c8ae4f7f8ac'} from 'ACTIONS_MODULE9'\nexport {getCompanyActiveDomain as '407a5a7d0a7dd7989a963eb2485a3527c1dcb20a70'} from 'ACTIONS_MODULE9'\nexport {checkRateLimit as '40af86a915f04df8d7cc189fe26e45e0cc24663080'} from 'ACTIONS_MODULE9'\nexport {isGmailIntegrationEnabled as '00fe74bdf14126b5ad89e9480e82978d6357f356b3'} from 'ACTIONS_MODULE10'\nexport {getUserGmailTokens as '400ce95360aaffa14a99dfdf969ba5166c69a59eb6'} from 'ACTIONS_MODULE10'\nexport {disconnectCompanyGmail as '401d3d830065dd7c4777fad67f642392f48735c4ab'} from 'ACTIONS_MODULE10'\nexport {disconnectUserGmail as '404575d602ef4c60c0058b592b8c3e42fbcd13fc4c'} from 'ACTIONS_MODULE10'\nexport {getCompanyEmailProvider as '40787b1598849126560f9f0b0f8fe8967338c7bf28'} from 'ACTIONS_MODULE10'\nexport {getCompanyGmailTokens as '40beeb56302a20d27cd8ba7a0988310f855633d7e6'} from 'ACTIONS_MODULE10'\nexport {refreshUserGmailToken as '602fab67313b110e6ccb66e54b1e16450b2a772cc7'} from 'ACTIONS_MODULE10'\nexport {sendCompanyGmailEmail as '60302947fc4caffa53a719728f3c2cebace926098c'} from 'ACTIONS_MODULE10'\nexport {syncUserInbox as '603643b13bf288cc628303bb4d12df0311b11434c7'} from 'ACTIONS_MODULE10'\nexport {checkCompanyGmailHealth as '60856182db5eaec7f85eda2a5a94c5d7d3524325d6'} from 'ACTIONS_MODULE10'\nexport {refreshCompanyGmailToken as '60eeb51685ac265a4ad793a230a515fe6e462f16f4'} from 'ACTIONS_MODULE10'\nexport {fetchUserInbox as '708daa303e36e37247e22b5b828b6aad8c73ac283b'} from 'ACTIONS_MODULE10'\nexport {setCompanyEmailProvider as '70dd3bc4222a87350dc137fa9cbcb849fa1913b397'} from 'ACTIONS_MODULE10'\nexport {storeGmailMessage as '78d41ef818e75fef94d65a87ea1f0faf418132e3c5'} from 'ACTIONS_MODULE10'\nexport {storeUserGmailTokens as '7e3a356960ddd52a3fa4dc6d981ae7202a59eb9a3d'} from 'ACTIONS_MODULE10'\nexport {storeCompanyGmailTokens as '7f06df826c4fff42950e712c0f548254e275be2a52'} from 'ACTIONS_MODULE10'\nexport {getProviderHealthDashboard as '00a122f9d5fe3a1603c636c3a251886129b66154f8'} from 'ACTIONS_MODULE11'\nexport {checkProviderAlert as '40c7885bdc4fe4cdd5f57e78579230c58088adbef4'} from 'ACTIONS_MODULE11'\nexport {cleanupOldEvents as '40d3c4ceeaee653aa257a28ed429a7fd272fa9fb66'} from 'ACTIONS_MODULE11'\nexport {recordProviderEvent as '40e06418f4b93b40c84a25511e0468e1e8a41ddecf'} from 'ACTIONS_MODULE11'\nexport {getProviderStats as '60c643a41ce1a8e6cc8338da6e2f3678c386910460'} from 'ACTIONS_MODULE11'\nexport {recordSendFailure as '78255c3fa8c9facf7c3f353202f2907836e8eb5539'} from 'ACTIONS_MODULE11'\nexport {recordSendSuccess as '783861d25688b32ba086bbe9e45444975c36a1b285'} from 'ACTIONS_MODULE11'\nexport {recordFallbackTriggered as '78766431b437b16f7cb00b4d64a2f3be5e092ed724'} from 'ACTIONS_MODULE11'\nexport {deleteNotification as '40fab1894acc5e3d1fdd8d8c6128a7cecee06e7e6a'} from 'ACTIONS_MODULE12'\nexport {markAllAsRead as '00cf212b0097820096122537beac12e3403b97d564'} from 'ACTIONS_MODULE12'\nexport {markAsRead as '4094cf679b4a10ca0f969f4fc1b55602aac4e0fbc3'} from 'ACTIONS_MODULE12'\nexport {makeCall as '40b2df540ec465c5dc19545c96486485bb50b5633b'} from 'ACTIONS_MODULE2'\nexport {getWebRTCCredentials as '000478fbf5363dae5000d525663da13e29908cb952'} from 'ACTIONS_MODULE2'\nexport {signOut as '0043ae510c3322ea499beb9e1bb77d06afb4ef19bd'} from 'ACTIONS_MODULE13'\nexport {switchCompany as '4097c3c574342661f9a3c8244961d001234449f36f'} from 'ACTIONS_MODULE14'\nexport {updateUserStatus as '4081009dd4dff14ff4ece62648bad23a83f2f9f63c'} from 'ACTIONS_MODULE15'\nexport {getTotalUnreadCountAction as '00ebc03a4ffc993aea7ec2e541686105c2bace2437'} from 'ACTIONS_MODULE16'\nexport {getCompanyPendingActions as '40e9589cb639f2902eb841bedc1247d966486d6fd7'} from 'ACTIONS_MODULE17'\nexport {checkIsCompanyOwner as '001be5cf82b793f19f6a7d010c91c14577fa7a130d'} from 'ACTIONS_MODULE17'\nexport {getCustomerByPhone as '6013add076e3eaed7dc37e8b800ce977d5abb8d49a'} from 'ACTIONS_MODULE18'\nexport {startCallRecording as '404e47931374ad2a1b54bc11f357703790f6104530'} from 'ACTIONS_MODULE2'\nexport {stopCallRecording as '40d5cc291162e2fd61245bdb851d5e8ed609e4ed19'} from 'ACTIONS_MODULE2'\nexport {deleteCustomer as '4082b52123c24a95685a53c36313418a95c259c65b'} from 'ACTIONS_MODULE18'\nexport {searchCustomers as '60193685409a9d118f1b364e14ecf57d05fa5638a9'} from 'ACTIONS_MODULE18'\nexport {getCustomersForDialer as '0077abd0cb1e555f91adaa482ad0b2f565bbd0629a'} from 'ACTIONS_MODULE18'\nexport {getPendingSupportSessions as '000f90f949d6a2f5484d061d5a738a59a8c846aeaa'} from 'ACTIONS_MODULE19'\nexport {getActiveSupportSessions as '00665c1bbcd52d612d5bb4bf3be5e7fc75554132e6'} from 'ACTIONS_MODULE19'\nexport {approveSupportSessionRequest as '602e89ae7ace85fc30cd3b4b1dd865d517c0cb1cd5'} from 'ACTIONS_MODULE19'\nexport {rejectSupportSessionRequest as '60886af124323873afd4d5b64bb4143abbcba2c154'} from 'ACTIONS_MODULE19'\nexport {endActiveSupportSession as '40369e8ea4eced7bdaef8203d369469ee7b630db8c'} from 'ACTIONS_MODULE19'\nexport {getCommunicationStatsAction as '404da424c6472d2bf2b78aee44ca31e4cd370ca330'} from 'ACTIONS_MODULE20'\n"],"names":[],"mappings":"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"}