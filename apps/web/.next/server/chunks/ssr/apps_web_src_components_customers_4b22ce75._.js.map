{"version":3,"sources":["../../../../../../apps/web/src/components/customers/customers-kanban.tsx","../../../../../../apps/web/src/components/customers/customers-table.tsx","../../../../../../apps/web/src/lib/datatable/common-columns.tsx","../../../../../../apps/web/src/actions/data%3Af46c4d%20%3Ctext/javascript%3E"],"sourcesContent":["\"use client\";\n\nimport { ArrowUpRight, Mail, Phone, Users } from \"lucide-react\";\nimport Link from \"next/link\";\nimport type { Customer } from \"@/components/customers/customers-table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { type ColumnMeta, EntityKanban } from \"@/components/ui/entity-kanban\";\nimport type { KanbanItemBase } from \"@/components/ui/shadcn-io/kanban\";\nimport { cn } from \"@/lib/utils\";\n\ntype CustomerStatus = Customer[\"status\"];\n\ntype CustomersKanbanItem = KanbanItemBase & {\n\tcustomer: Customer;\n};\n\nconst CUSTOMER_COLUMNS: Array<{\n\tid: CustomerStatus;\n\tname: string;\n\taccentColor: string;\n}> = [\n\t{ id: \"active\", name: \"Active\", accentColor: \"#22C55E\" },\n\t{ id: \"prospect\", name: \"Prospect\", accentColor: \"#3B82F6\" },\n\t{ id: \"inactive\", name: \"Inactive\", accentColor: \"#6B7280\" },\n];\n\nconst columnLabel = new Map(\n\tCUSTOMER_COLUMNS.map((column) => [column.id, column.name]),\n);\n\nconst currencyFormatter = new Intl.NumberFormat(\"en-US\", {\n\tstyle: \"currency\",\n\tcurrency: \"USD\",\n});\n\nexport function CustomersKanban({ customers }: { customers: Customer[] }) {\n\treturn (\n\t\t<EntityKanban<Customer, CustomerStatus>\n\t\t\tcalculateColumnMeta={(columnId, items): ColumnMeta => {\n\t\t\t\tconst columnItems = items.filter((item) => item.columnId === columnId);\n\t\t\t\tconst total = columnItems.reduce(\n\t\t\t\t\t(sum, item) => sum + (item.entity as Customer).totalValue,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\treturn { count: columnItems.length, total };\n\t\t\t}}\n\t\t\tcolumns={CUSTOMER_COLUMNS}\n\t\t\tdata={customers}\n\t\t\tentityName=\"customers\"\n\t\t\tformatTotal={(total) => currencyFormatter.format(total / 100)}\n\t\t\tmapToKanbanItem={(customer) => ({\n\t\t\t\tid: customer.id,\n\t\t\t\tcolumnId: customer.status,\n\t\t\t\tentity: customer,\n\t\t\t\tcustomer,\n\t\t\t})}\n\t\t\trenderCard={(item) => (\n\t\t\t\t<CustomerCard\n\t\t\t\t\titem={{ ...item, customer: item.entity } as CustomersKanbanItem}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\trenderDragOverlay={(item) => (\n\t\t\t\t<div className=\"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg\">\n\t\t\t\t\t<CustomerCard\n\t\t\t\t\t\titem={{ ...item, customer: item.entity } as CustomersKanbanItem}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\tshowTotals={true}\n\t\t\tupdateEntityStatus={(customer, newStatus) => ({\n\t\t\t\t...customer,\n\t\t\t\tstatus: newStatus,\n\t\t\t})}\n\t\t/>\n\t);\n}\n\nfunction CustomerCard({ item }: { item: CustomersKanbanItem }) {\n\tconst { customer, columnId } = item;\n\treturn (\n\t\t<div className=\"space-y-3\">\n\t\t\t<div className=\"flex items-start justify-between gap-3\">\n\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t<h3 className=\"text-foreground text-sm font-semibold\">\n\t\t\t\t\t\t{customer.name}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">{customer.contact}</p>\n\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\tcolumnId === \"active\" && \"bg-primary/10 text-primary\",\n\t\t\t\t\t\t\t\tcolumnId === \"prospect\" && \"bg-primary/10 text-primary\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\tcolumnId === \"active\"\n\t\t\t\t\t\t\t\t\t? \"secondary\"\n\t\t\t\t\t\t\t\t\t: columnId === \"prospect\"\n\t\t\t\t\t\t\t\t\t\t? \"outline\"\n\t\t\t\t\t\t\t\t\t\t: \"outline\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{columnLabel.get(columnId as CustomerStatus) ?? columnId}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t{customer.totalValue > 0 && (\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tclassName=\"bg-muted/60 text-muted-foreground\"\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{currencyFormatter.format(customer.totalValue / 100)}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"text-muted-foreground space-y-2 text-xs\">\n\t\t\t\t{customer.email && (\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Mail className=\"text-primary size-4\" />\n\t\t\t\t\t\t<span className=\"truncate\">{customer.email}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{customer.phone && (\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Phone className=\"text-primary size-4\" />\n\t\t\t\t\t\t<span>{customer.phone}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{customer.address && (\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Users className=\"text-primary size-4\" />\n\t\t\t\t\t\t<span className=\"truncate\">\n\t\t\t\t\t\t\t{[customer.address, customer.city, customer.state]\n\t\t\t\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"text-muted-foreground flex items-center justify-between pt-2 text-xs\">\n\t\t\t\t<span>\n\t\t\t\t\t{customer.lastService !== \"None\"\n\t\t\t\t\t\t? `Last: ${customer.lastService}`\n\t\t\t\t\t\t: \"No services\"}\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"text-primary gap-1 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t>\n\t\t\t\t\t<Link href={`/dashboard/customers/${customer.id}`}>\n\t\t\t\t\t\tView\n\t\t\t\t\t\t<ArrowUpRight className=\"size-3.5\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * CustomersTable Component\n * Standardized full-width table for displaying customers\n *\n * Features:\n * - Full-width responsive layout with design system variant\n * - Row selection with bulk actions\n * - Search and filtering\n * - Status badges\n * - Click to view customer details\n * - Auto-virtualization for >1,000 customers\n */\n\nimport { Archive, Mail, Phone, Trash2, Users } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype BulkAction,\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport { RowActionsDropdown } from \"@/components/ui/row-actions-dropdown\";\nimport { useCustomerStatusColumn } from \"@/lib/datatable/common-columns\";\nimport { getRowHighlight } from \"@/lib/datatable/rowHighlight\";\nimport { TablePresets } from \"@/lib/datatable/table-presets\";\nimport { formatCurrencyFromDollars } from \"@/lib/formatters\";\nimport { deleteCustomer } from \"@/actions/customers\";\nimport { useArchiveStore } from \"@/lib/stores/archive-store\";\nimport { toast } from \"sonner\";\n\nexport type Customer = {\n\tid: string;\n\tname: string;\n\tcontact: string;\n\temail: string;\n\tphone: string;\n\taddress?: string;\n\tcity?: string;\n\tstate?: string;\n\tzipCode?: string;\n\tstatus: \"active\" | \"inactive\" | \"prospect\";\n\tlastService: string;\n\tnextService: string;\n\ttotalValue: number;\n\tarchived_at?: string | null;\n\tdeleted_at?: string | null;\n};\n\ntype CustomersTableProps = {\n\tcustomers: Customer[];\n\titemsPerPage?: number;\n\ttotalCount?: number;\n\tcurrentPage?: number;\n\tonCustomerClick?: (customer: Customer) => void;\n\tenableVirtualization?: boolean | \"auto\";\n\tshowRefresh?: boolean;\n};\n\nexport function CustomersTable({\n\tcustomers,\n\titemsPerPage = 50,\n\ttotalCount,\n\tcurrentPage = 1,\n\tonCustomerClick,\n\tenableVirtualization = \"auto\",\n\tshowRefresh = false,\n}: CustomersTableProps) {\n\tconst router = useRouter();\n\tconst archiveFilter = useArchiveStore((state) => state.filters.customers);\n\n\t// Filter customers based on archive status\n\tconst filteredCustomers = customers.filter((customer) => {\n\t\tconst isArchived = Boolean(customer.archived_at || customer.deleted_at);\n\t\tif (archiveFilter === \"active\") return !isArchived;\n\t\tif (archiveFilter === \"archived\") return isArchived;\n\t\treturn true;\n\t});\n\n\t// Define columns using standardized hooks and patterns\n\tconst columns: ColumnDef<Customer>[] = [\n\t\t{\n\t\t\tkey: \"customer\",\n\t\t\theader: \"Customer\",\n\t\t\twidth: \"flex-1\",\n\t\t\tsortable: true,\n\t\t\trender: (customer) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"flex items-center gap-3\"\n\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t<Avatar className=\"h-8 w-8\">\n\t\t\t\t\t\t<AvatarFallback className=\"text-xs\">\n\t\t\t\t\t\t\t{customer.name\n\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t\t\t\t\t.toUpperCase()}\n\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t</Avatar>\n\t\t\t\t\t<div className=\"min-w-0\">\n\t\t\t\t\t\t<div className=\"text-foreground truncate font-medium leading-tight hover:underline\">\n\t\t\t\t\t\t\t{customer.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"text-muted-foreground mt-0.5 truncate text-xs leading-tight\">\n\t\t\t\t\t\t\t{customer.contact}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"contact\",\n\t\t\theader: \"Contact\",\n\t\t\twidth: \"w-56\",\n\t\t\tshrink: true,\n\t\t\tsortable: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (customer) => (\n\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t<div className=\"text-foreground flex items-center gap-1.5\">\n\t\t\t\t\t\t<Mail className=\"text-muted-foreground h-3 w-3\" />\n\t\t\t\t\t\t<span className=\"truncate text-xs\">{customer.email}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"text-foreground flex items-center gap-1.5\">\n\t\t\t\t\t\t<Phone className=\"text-muted-foreground h-3 w-3\" />\n\t\t\t\t\t\t<span className=\"text-xs tabular-nums\">{customer.phone}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"address\",\n\t\t\theader: \"Address\",\n\t\t\twidth: \"w-56\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (customer) => {\n\t\t\t\tif (!(customer.address || customer.city || customer.state)) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs italic\">\n\t\t\t\t\t\t\tNo address\n\t\t\t\t\t\t</span>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t{customer.address && (\n\t\t\t\t\t\t\t<div className=\"text-foreground truncate text-xs\">\n\t\t\t\t\t\t\t\t{customer.address}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{(customer.city || customer.state || customer.zipCode) && (\n\t\t\t\t\t\t\t<div className=\"text-muted-foreground truncate text-xs\">\n\t\t\t\t\t\t\t\t{[customer.city, customer.state, customer.zipCode]\n\t\t\t\t\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t\t\t\t\t.join(\", \")}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t// Use standardized status column hook\n\t\tuseCustomerStatusColumn<Customer>(\n\t\t\t\"status\",\n\t\t\t\"Status\",\n\t\t\t(customer) => customer.status,\n\t\t\t{\n\t\t\t\twidth: \"w-28\",\n\t\t\t},\n\t\t),\n\t\t{\n\t\t\tkey: \"service\",\n\t\t\theader: \"Service\",\n\t\t\tsortable: true,\n\t\t\twidth: \"w-48\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\thideable: true,\n\t\t\trender: (customer) => (\n\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t<div className=\"text-foreground text-xs\">\n\t\t\t\t\t\tLast:{\" \"}\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t{customer.lastService}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"text-foreground text-xs\">\n\t\t\t\t\t\tNext:{\" \"}\n\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t{customer.nextService}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"value\",\n\t\t\theader: \"Total Value\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\talign: \"right\",\n\t\t\trender: (customer) => (\n\t\t\t\t<span className=\"text-xs font-semibold tabular-nums\">\n\t\t\t\t\t{formatCurrencyFromDollars(customer.totalValue)}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"actions\",\n\t\t\theader: \"\",\n\t\t\twidth: \"w-10\",\n\t\t\tshrink: true,\n\t\t\trender: (customer) => (\n\t\t\t\t<RowActionsDropdown\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"View Details\",\n\t\t\t\t\t\t\ticon: Users,\n\t\t\t\t\t\t\thref: `/dashboard/customers/${customer.id}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Send Email\",\n\t\t\t\t\t\t\ticon: Mail,\n\t\t\t\t\t\t\thref: `mailto:${customer.email}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Call Customer\",\n\t\t\t\t\t\t\ticon: Phone,\n\t\t\t\t\t\t\thref: `tel:${customer.phone}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Delete Customer\",\n\t\t\t\t\t\t\ticon: Trash2,\n\t\t\t\t\t\t\tvariant: \"destructive\",\n\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\tconst result = await deleteCustomer(customer.id);\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\ttoast.success(\"Customer deleted\");\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttoast.error(result.error || \"Failed to delete customer\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t),\n\t\t},\n\t];\n\n\tconst bulkActions: BulkAction[] = [\n\t\t{\n\t\t\tlabel: \"Export\",\n\t\t\ticon: <Archive className=\"h-4 w-4\" />,\n\t\t\tonClick: (selectedIds) => {\n\t\t\t\t// Export selected customers as CSV\n\t\t\t\tconst selectedCustomers = customers.filter((c) =>\n\t\t\t\t\tselectedIds.has(c.id)\n\t\t\t\t);\n\t\t\t\tconst csvContent = [\n\t\t\t\t\t[\"Name\", \"Contact\", \"Email\", \"Phone\", \"Status\", \"Total Value\"].join(\",\"),\n\t\t\t\t\t...selectedCustomers.map((c) =>\n\t\t\t\t\t\t[c.name, c.contact, c.email, c.phone, c.status, c.totalValue].join(\",\")\n\t\t\t\t\t),\n\t\t\t\t].join(\"\\n\");\n\t\t\t\tconst blob = new Blob([csvContent], { type: \"text/csv\" });\n\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\tconst a = document.createElement(\"a\");\n\t\t\t\ta.href = url;\n\t\t\t\ta.download = `customers-export-${new Date().toISOString().split(\"T\")[0]}.csv`;\n\t\t\t\ta.click();\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\ttoast.success(`Exported ${selectedIds.size} customer${selectedIds.size > 1 ? \"s\" : \"\"}`);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Delete\",\n\t\t\ticon: <Trash2 className=\"h-4 w-4\" />,\n\t\t\tonClick: async (selectedIds) => {\n\t\t\t\tlet successCount = 0;\n\t\t\t\tlet errorCount = 0;\n\t\t\t\tfor (const customerId of selectedIds) {\n\t\t\t\t\tconst result = await deleteCustomer(customerId);\n\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\tsuccessCount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorCount++;\n\t\t\t\t\t\tconsole.error(`Failed to delete customer ${customerId}:`, result.error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (successCount > 0) {\n\t\t\t\t\ttoast.success(`Deleted ${successCount} customer${successCount > 1 ? \"s\" : \"\"}`);\n\t\t\t\t}\n\t\t\t\tif (errorCount > 0) {\n\t\t\t\t\ttoast.error(`Failed to delete ${errorCount} customer${errorCount > 1 ? \"s\" : \"\"}`);\n\t\t\t\t}\n\t\t\t\twindow.location.reload();\n\t\t\t},\n\t\t\tvariant: \"destructive\",\n\t\t},\n\t];\n\n\tconst searchFilter = (customer: Customer, query: string) => {\n\t\tconst searchStr = query.toLowerCase();\n\t\treturn (\n\t\t\tcustomer.name.toLowerCase().includes(searchStr) ||\n\t\t\tcustomer.contact.toLowerCase().includes(searchStr) ||\n\t\t\tcustomer.email.toLowerCase().includes(searchStr) ||\n\t\t\tcustomer.phone.toLowerCase().includes(searchStr) ||\n\t\t\tcustomer.status.toLowerCase().includes(searchStr) ||\n\t\t\t(customer.address?.toLowerCase().includes(searchStr) ?? false) ||\n\t\t\t(customer.city?.toLowerCase().includes(searchStr) ?? false) ||\n\t\t\t(customer.state?.toLowerCase().includes(searchStr) ?? false) ||\n\t\t\t(customer.zipCode?.toLowerCase().includes(searchStr) ?? false)\n\t\t);\n\t};\n\n\tconst handleRowClick = (customer: Customer) => {\n\t\tif (onCustomerClick) {\n\t\t\tonCustomerClick(customer);\n\t\t} else {\n\t\t\twindow.location.href = `/dashboard/customers/${customer.id}`;\n\t\t}\n\t};\n\n\treturn (\n\t\t<FullWidthDataTable\n\t\t\t{...TablePresets.fullList({\n\t\t\t\tentity: \"customers\",\n\t\t\t\tenableSelection: true,\n\t\t\t\tsearchPlaceholder:\n\t\t\t\t\t\"Search customers by name, email, phone, address, or status...\",\n\t\t\t\titemsPerPage,\n\t\t\t\tshowRefresh,\n\t\t\t})}\n\t\t\tdata={filteredCustomers}\n\t\t\tcolumns={columns}\n\t\t\tgetItemId={(customer) => customer.id}\n\t\t\tbulkActions={bulkActions}\n\t\t\tsearchFilter={searchFilter}\n\t\t\tonRowClick={handleRowClick}\n\t\t\ttotalCount={totalCount ?? filteredCustomers.length}\n\t\t\tcurrentPageFromServer={currentPage}\n\t\t\tserverPagination\n\t\t\tonRefresh={() => router.refresh()}\n\t\t\temptyMessage=\"No customers found\"\n\t\t\temptyIcon={<Users className=\"text-muted-foreground h-8 w-8\" />}\n\t\t\temptyAction={\n\t\t\t\t<Button\n\t\t\t\t\tonClick={() => (window.location.href = \"/dashboard/customers/new\")}\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t>\n\t\t\t\t\t<Users className=\"mr-2 size-4\" />\n\t\t\t\t\tAdd Customer\n\t\t\t\t</Button>\n\t\t\t}\n\t\t\tisArchived={(customer) =>\n\t\t\t\tBoolean(customer.archived_at || customer.deleted_at)\n\t\t\t}\n\t\t\tshowArchived={archiveFilter !== \"active\"}\n\t\t\tisHighlighted={(customer) => {\n\t\t\t\tconst { isHighlighted, highlightClass } = getRowHighlight(customer);\n\t\t\t\tif (highlightClass.includes(\"bg-success\")) return false;\n\t\t\t\treturn isHighlighted;\n\t\t\t}}\n\t\t\tgetHighlightClass={(customer) => getRowHighlight(customer).highlightClass}\n\t\t\tenableVirtualization={enableVirtualization}\n\t\t/>\n\t);\n}\n","\"use client\";\n\n/**\n * Common Column Definitions - Reusable Patterns\n *\n * Shared column definitions and hooks to reduce duplication across tables.\n * Use these for consistent rendering of common data types (dates, status, actions, etc.)\n *\n * @example\n * import { useDateColumn, useActionsColumn } from \"@/lib/datatable/common-columns\";\n *\n * const columns: ColumnDef<Customer>[] = [\n *   { key: \"name\", header: \"Name\", render: (c) => c.name },\n *   useDateColumn<Customer>(\"created_at\", \"Created\", (c) => c.created_at),\n *   useActionsColumn<Customer>((c) => `/customers/${c.id}`)\n * ];\n */\n\nimport { Archive, Edit, Eye, Trash2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport type { ColumnDef } from \"@/components/ui/full-width-datatable\";\nimport { RowActionsDropdown } from \"@/components/ui/row-actions-dropdown\";\nimport {\n\tCustomerStatusBadge,\n\tJobStatusBadge,\n\tPriorityBadge,\n} from \"@/components/ui/status-badge\";\nimport { formatCurrency, formatDate, formatDateTime } from \"@/lib/formatters\";\n\n/**\n * Hook: Date Column\n *\n * Creates a column for date fields with consistent formatting\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract date value from item\n * @param options - Optional configuration\n *\n * @example\n * useDateColumn<Job>(\"scheduled_date\", \"Scheduled\", (job) => job.scheduled_date)\n */\nfunction useDateColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => string | Date | null | undefined,\n\toptions: {\n\t\t/** Show time in addition to date */\n\t\tincludeTime?: boolean;\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-32\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? true,\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (!value)\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\tconst formatted = options.includeTime\n\t\t\t\t? formatDateTime(value)\n\t\t\t\t: formatDate(value);\n\n\t\t\treturn <span className=\"text-xs tabular-nums\">{formatted}</span>;\n\t\t},\n\t\tsortFn: (a, b) => {\n\t\t\tconst aVal = getValue(a);\n\t\t\tconst bVal = getValue(b);\n\t\t\tif (!aVal) return 1;\n\t\t\tif (!bVal) return -1;\n\t\t\treturn new Date(aVal).getTime() - new Date(bVal).getTime();\n\t\t},\n\t};\n}\n\n/**\n * Hook: Currency Column\n *\n * Creates a column for currency fields with consistent formatting\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract currency value from item\n * @param options - Optional configuration\n *\n * @example\n * useCurrencyColumn<Invoice>(\"total\", \"Total\", (invoice) => invoice.total)\n */\nfunction useCurrencyColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => number | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t\t/** Text alignment */\n\t\talign?: \"left\" | \"center\" | \"right\";\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-28\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\talign: options.align || \"right\",\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<span className=\"text-xs font-medium tabular-nums\">\n\t\t\t\t\t{formatCurrency(value)}\n\t\t\t\t</span>\n\t\t\t);\n\t\t},\n\t\tsortFn: (a, b) => {\n\t\t\tconst aVal = getValue(a) ?? 0;\n\t\t\tconst bVal = getValue(b) ?? 0;\n\t\t\treturn aVal - bVal;\n\t\t},\n\t};\n}\n\n/**\n * Hook: Job Status Column\n *\n * Creates a column for job status with badge rendering\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract status from item\n * @param options - Optional configuration\n *\n * @example\n * useJobStatusColumn<Job>(\"status\", \"Status\", (job) => job.status)\n */\nfunction useJobStatusColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => string | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-32\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (!value)\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\treturn <JobStatusBadge status={value} />;\n\t\t},\n\t};\n}\n\n/**\n * Hook: Customer Status Column\n *\n * Creates a column for customer status with badge rendering\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract status from item\n * @param options - Optional configuration\n *\n * @example\n * useCustomerStatusColumn<Customer>(\"status\", \"Status\", (customer) => customer.status)\n */\nexport function useCustomerStatusColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => \"active\" | \"inactive\" | \"prospect\" | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-28\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (!value)\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\treturn <CustomerStatusBadge status={value} />;\n\t\t},\n\t};\n}\n\n/**\n * Hook: Priority Column\n *\n * Creates a column for priority with badge rendering\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract priority from item\n * @param options - Optional configuration\n *\n * @example\n * usePriorityColumn<Job>(\"priority\", \"Priority\", (job) => job.priority)\n */\nfunction usePriorityColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (\n\t\titem: T,\n\t) => \"low\" | \"medium\" | \"high\" | \"urgent\" | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-24\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? true,\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (!value)\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\treturn <PriorityBadge priority={value} />;\n\t\t},\n\t\tsortFn: (a, b) => {\n\t\t\tconst priorityOrder = { low: 1, medium: 2, high: 3, urgent: 4 };\n\t\t\tconst aVal = getValue(a);\n\t\t\tconst bVal = getValue(b);\n\t\t\tconst aPriority = aVal ? priorityOrder[aVal] : 0;\n\t\t\tconst bPriority = bVal ? priorityOrder[bVal] : 0;\n\t\t\treturn aPriority - bPriority;\n\t\t},\n\t};\n}\n\n/**\n * Hook: Actions Column\n *\n * Creates a column for row actions (view, edit, archive, delete)\n *\n * @param getViewHref - Function to get view link\n * @param getEditHref - Function to get edit link (optional)\n * @param onArchive - Archive handler (optional)\n * @param onDelete - Delete handler (optional)\n * @param options - Optional configuration\n *\n * @example\n * useActionsColumn<Customer>(\n *   (customer) => `/customers/${customer.id}`,\n *   (customer) => `/customers/${customer.id}/edit`,\n *   handleArchive,\n *   handleDelete\n * )\n */\nfunction useActionsColumn<T>(\n\tgetViewHref: (item: T) => string,\n\tgetEditHref?: (item: T) => string,\n\tonArchive?: (item: T) => void,\n\tonDelete?: (item: T) => void,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t\t/** Additional custom actions */\n\t\tcustomActions?: Array<{\n\t\t\tlabel: string;\n\t\t\ticon: React.ReactNode;\n\t\t\tonClick: (item: T) => void;\n\t\t}>;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey: \"actions\",\n\t\theader: \"\",\n\t\twidth: options.width || \"w-10\",\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\talign: \"right\",\n\t\trender: (item) => {\n\t\t\tconst actions = [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"View\",\n\t\t\t\t\ticon: <Eye className=\"h-4 w-4\" />,\n\t\t\t\t\thref: getViewHref(item),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tif (getEditHref) {\n\t\t\t\tactions.push({\n\t\t\t\t\tlabel: \"Edit\",\n\t\t\t\t\ticon: <Edit className=\"h-4 w-4\" />,\n\t\t\t\t\thref: getEditHref(item),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (onArchive) {\n\t\t\t\tactions.push({\n\t\t\t\t\tlabel: \"Archive\",\n\t\t\t\t\ticon: <Archive className=\"h-4 w-4\" />,\n\t\t\t\t\tonClick: () => onArchive(item),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (onDelete) {\n\t\t\t\tactions.push({\n\t\t\t\t\tlabel: \"Delete\",\n\t\t\t\t\ticon: <Trash2 className=\"h-4 w-4\" />,\n\t\t\t\t\tonClick: () => onDelete(item),\n\t\t\t\t\tvariant: \"destructive\" as const,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add custom actions\n\t\t\tif (options.customActions) {\n\t\t\t\tfor (const customAction of options.customActions) {\n\t\t\t\t\tactions.push({\n\t\t\t\t\t\tlabel: customAction.label,\n\t\t\t\t\t\ticon: customAction.icon,\n\t\t\t\t\t\tonClick: () => customAction.onClick(item),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn <RowActionsDropdown actions={actions} />;\n\t\t},\n\t};\n}\n\n/**\n * Hook: Link Column\n *\n * Creates a column that links to a detail page\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getLabel - Function to get link label\n * @param getHref - Function to get link href\n * @param options - Optional configuration\n *\n * @example\n * useLinkColumn<Customer>(\n *   \"name\",\n *   \"Customer\",\n *   (customer) => customer.name,\n *   (customer) => `/customers/${customer.id}`\n * )\n */\nfunction useLinkColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetLabel: (item: T) => string | React.ReactNode,\n\tgetHref: (item: T) => string,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t\t/** Show icon */\n\t\ticon?: React.ReactNode;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"flex-1\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\trender: (item) => {\n\t\t\tconst label = getLabel(item);\n\t\t\tconst href = getHref(item);\n\n\t\t\treturn (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"flex items-center gap-2 font-medium transition-colors hover:text-primary\"\n\t\t\t\t\thref={href}\n\t\t\t\t>\n\t\t\t\t\t{options.icon}\n\t\t\t\t\t{typeof label === \"string\" ? (\n\t\t\t\t\t\t<span className=\"truncate\">{label}</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tlabel\n\t\t\t\t\t)}\n\t\t\t\t</Link>\n\t\t\t);\n\t\t},\n\t};\n}\n\n/**\n * Hook: Text Column\n *\n * Creates a simple text column with consistent styling\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract value from item\n * @param options - Optional configuration\n *\n * @example\n * useTextColumn<Customer>(\"email\", \"Email\", (customer) => customer.email)\n */\nfunction useTextColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => string | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t\t/** Text alignment */\n\t\talign?: \"left\" | \"center\" | \"right\";\n\t\t/** Truncate text */\n\t\ttruncate?: boolean;\n\t\t/** Font weight */\n\t\tfontWeight?: \"normal\" | \"medium\" | \"semibold\" | \"bold\";\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"flex-1\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\talign: options.align || \"left\",\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (!value)\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\n\t\t\tconst fontWeightClass = options.fontWeight\n\t\t\t\t? {\n\t\t\t\t\t\tnormal: \"font-normal\",\n\t\t\t\t\t\tmedium: \"font-medium\",\n\t\t\t\t\t\tsemibold: \"font-semibold\",\n\t\t\t\t\t\tbold: \"font-bold\",\n\t\t\t\t\t}[options.fontWeight]\n\t\t\t\t: \"\";\n\n\t\t\treturn (\n\t\t\t\t<span\n\t\t\t\t\tclassName={`text-xs ${options.truncate ? \"truncate\" : \"\"} ${fontWeightClass}`}\n\t\t\t\t>\n\t\t\t\t\t{value}\n\t\t\t\t</span>\n\t\t\t);\n\t\t},\n\t};\n}\n\n/**\n * Hook: Number Column\n *\n * Creates a column for numeric values with consistent formatting\n *\n * @param key - Column key (field name)\n * @param header - Column header text\n * @param getValue - Function to extract number from item\n * @param options - Optional configuration\n *\n * @example\n * useNumberColumn<Invoice>(\"invoice_number\", \"#\", (invoice) => invoice.invoice_number)\n */\nfunction useNumberColumn<T>(\n\tkey: string,\n\theader: string,\n\tgetValue: (item: T) => number | null | undefined,\n\toptions: {\n\t\t/** Column width */\n\t\twidth?: string;\n\t\t/** Sortable */\n\t\tsortable?: boolean;\n\t\t/** Hide on mobile */\n\t\thideOnMobile?: boolean;\n\t\t/** Text alignment */\n\t\talign?: \"left\" | \"center\" | \"right\";\n\t\t/** Number format (e.g., \"#,##0\") */\n\t\tformat?: \"decimal\" | \"integer\" | \"percent\";\n\t\t/** Prefix (e.g., \"#\") */\n\t\tprefix?: string;\n\t\t/** Suffix (e.g., \"%\") */\n\t\tsuffix?: string;\n\t} = {},\n): ColumnDef<T> {\n\treturn {\n\t\tkey,\n\t\theader,\n\t\twidth: options.width || \"w-24\",\n\t\tsortable: options.sortable ?? true,\n\t\thideOnMobile: options.hideOnMobile ?? false,\n\t\talign: options.align || \"right\",\n\t\trender: (item) => {\n\t\t\tconst value = getValue(item);\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn <span className=\"text-muted-foreground text-xs\">—</span>;\n\t\t\t}\n\n\t\t\tlet formatted = \"\";\n\t\t\tif (options.format === \"decimal\") {\n\t\t\t\tformatted = value.toLocaleString(undefined, {\n\t\t\t\t\tminimumFractionDigits: 2,\n\t\t\t\t\tmaximumFractionDigits: 2,\n\t\t\t\t});\n\t\t\t} else if (options.format === \"percent\") {\n\t\t\t\tformatted = `${value.toFixed(1)}%`;\n\t\t\t} else {\n\t\t\t\tformatted = value.toLocaleString();\n\t\t\t}\n\n\t\t\tconst display = `${options.prefix || \"\"}${formatted}${options.suffix || \"\"}`;\n\n\t\t\treturn (\n\t\t\t\t<span className=\"text-xs font-medium tabular-nums\">{display}</span>\n\t\t\t);\n\t\t},\n\t\tsortFn: (a, b) => {\n\t\t\tconst aVal = getValue(a) ?? 0;\n\t\t\tconst bVal = getValue(b) ?? 0;\n\t\t\treturn aVal - bVal;\n\t\t},\n\t};\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4082b52123c24a95685a53c36313418a95c259c65b\":\"deleteCustomer\"},\"apps/web/src/actions/customers.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteCustomer=/*#__PURE__*/createServerReference(\"4082b52123c24a95685a53c36313418a95c259c65b\",callServer,void 0,findSourceMapURL,\"deleteCustomer\");"],"names":[],"mappings":"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"}