module.exports=[285956,a=>{"use strict";var b=a.i(780195);a.i(218188),process.env.PAYRIX_API_URL,process.env.PAYRIX_API_KEY,process.env.PAYRIX_PARTNER_ID;var c=a.i(136874);async function d(a){try{let b=await (0,c.createClient)(),{data:d,error:e}=await b.from("payrix_merchant_accounts").select("*").eq("company_id",a).maybeSingle();if(e)return{success:!1,error:e.message};return{success:!0,data:d}}catch(a){return console.error("Get merchant account error:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}(0,a.i(395731).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"40704f0e856ad801ef93b43436f219a36f7c0efd2c",null),a.s(["getPayrixMerchantAccount",()=>d],285956)},262820,a=>{"use strict";a.i(883385),a.s([])},257390,347128,a=>{"use strict";var b=a.i(429969),c=a.i(136874),d=a.i(933427),e=a.i(57535),f=a.i(883385);let g=(0,b.cache)(async()=>{try{let b=await (0,f.getCurrentUser)();if(!b)return null;let d=await (0,c.createClient)();if(!d)return{id:"dev-user-1",full_name:"Development User",email:"dev@example.com",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=dev",emailVerified:!0,createdAt:new Date};let{data:e,error:g}=await d.from("profiles").select("*").eq("id",b.id).single();if(g){var a;return{id:(a=b).id,full_name:a.user_metadata?.name||a.email?.split("@")[0]||"User",email:a.email||"",avatar_url:a.user_metadata?.avatar_url||h(a.email),emailVerified:!!a.email_confirmed_at,createdAt:new Date(a.created_at)}}return{id:b.id,full_name:e?.full_name||b.user_metadata?.name||b.email?.split("@")[0]||"User",email:b.email||e?.email||"",avatar_url:e?.avatar_url||b.user_metadata?.avatar_url||h(b.email||e?.email),bio:e?.bio||void 0,phone:e?.phone||void 0,status:e?.status||"online",emailVerified:!!b.email_confirmed_at,createdAt:new Date(e?.created_at||b.created_at)}}catch(a){return{id:"dev-user-1",full_name:"Development User",email:"dev@example.com",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=dev",emailVerified:!0,createdAt:new Date}}});function h(a){return a?`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(a)}&backgroundColor=0ea5e9&textColor=ffffff`:"https://api.dicebear.com/7.x/initials/svg?seed=User"}(0,b.cache)(async()=>{let a=await (0,f.getCurrentUser)();return!!a&&!!a.email_confirmed_at}),(0,b.cache)(async()=>{try{let a=await (0,f.getCurrentUser)();if(!a)return[];let b=await (0,d.createServiceSupabaseClient)();if(!b)return[];let{data:c,error:g}=await b.from("company_memberships").select(`
        company_id,
        companies!inner (
          id,
          name,
          logo,
          stripe_subscription_status,
          onboarding_progress,
          onboarding_completed_at,
          deleted_at
        )
      `).eq("user_id",a.id).eq("status","active").is("companies.deleted_at",null);if(g)return[];let h=new Map;return c?.forEach(a=>{let b=a.companies.id;if(!h.has(b)){let c=a.companies.stripe_subscription_status,d=a.companies.onboarding_progress||null,f=(0,e.isOnboardingComplete)({progress:d,completedAt:a.companies.onboarding_completed_at??null}),g="active"===c||"trialing"===c,i="Active";g&&f||(i="incomplete"===c?"Incomplete Onboarding":"Setup Required"),h.set(b,{id:b,name:a.companies.name,logo:a.companies.logo,plan:i,onboardingComplete:f,hasPayment:g})}}),Array.from(h.values())}catch(a){return[]}});let i=(0,b.cache)(async()=>{try{let a=await (0,f.getCurrentUser)();if(!a)return null;let b=await (0,c.createClient)();if(!b)return null;let{data:d,error:e}=await b.from("company_memberships").select("company_id").eq("user_id",a.id).eq("status","active").limit(1).single();if(e)return null;return d?.company_id||null}catch(a){return null}});a.s(["getUserCompanyId",0,i,"getUserProfile",0,g],347128),a.s([],257390)},469565,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call AppHeaderClient() from the server but AppHeaderClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/app-header-client.tsx <module evaluation>","AppHeaderClient");a.s(["AppHeaderClient",0,b])},64136,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call AppHeaderClient() from the server but AppHeaderClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/app-header-client.tsx","AppHeaderClient");a.s(["AppHeaderClient",0,b])},49892,a=>{"use strict";a.i(469565);var b=a.i(64136);a.n(b)},970502,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call AppHeaderErrorBoundary() from the server but AppHeaderErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/app-header-error-boundary.tsx <module evaluation>","AppHeaderErrorBoundary");a.s(["AppHeaderErrorBoundary",0,b])},118980,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call AppHeaderErrorBoundary() from the server but AppHeaderErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/app-header-error-boundary.tsx","AppHeaderErrorBoundary");a.s(["AppHeaderErrorBoundary",0,b])},338067,a=>{"use strict";a.i(970502);var b=a.i(118980);a.n(b)},211080,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call IncomingCallNotificationWrapper() from the server but IncomingCallNotificationWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/incoming-call-notification-wrapper.tsx <module evaluation>","IncomingCallNotificationWrapper");a.s(["IncomingCallNotificationWrapper",0,b])},352456,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call IncomingCallNotificationWrapper() from the server but IncomingCallNotificationWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/incoming-call-notification-wrapper.tsx","IncomingCallNotificationWrapper");a.s(["IncomingCallNotificationWrapper",0,b])},178952,a=>{"use strict";a.i(211080);var b=a.i(352456);a.n(b)},731814,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call MobileBottomTabsWrapper() from the server but MobileBottomTabsWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/mobile-bottom-tabs-wrapper.tsx <module evaluation>","MobileBottomTabsWrapper");a.s(["MobileBottomTabsWrapper",0,b])},706617,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call MobileBottomTabsWrapper() from the server but MobileBottomTabsWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/mobile-bottom-tabs-wrapper.tsx","MobileBottomTabsWrapper");a.s(["MobileBottomTabsWrapper",0,b])},240416,a=>{"use strict";a.i(731814);var b=a.i(706617);a.n(b)},649949,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call NotificationsInitializer() from the server but NotificationsInitializer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/notifications-initializer.tsx <module evaluation>","NotificationsInitializer");a.s(["NotificationsInitializer",0,b])},132393,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call NotificationsInitializer() from the server but NotificationsInitializer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/layout/notifications-initializer.tsx","NotificationsInitializer");a.s(["NotificationsInitializer",0,b])},590126,a=>{"use strict";a.i(649949);var b=a.i(132393);a.n(b)},66626,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call SupportSessionProvider() from the server but SupportSessionProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/support/support-session-provider.tsx <module evaluation>","SupportSessionProvider");a.s(["SupportSessionProvider",0,b])},417982,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call SupportSessionProvider() from the server but SupportSessionProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/support/support-session-provider.tsx","SupportSessionProvider");a.s(["SupportSessionProvider",0,b])},252282,a=>{"use strict";a.i(66626);var b=a.i(417982);a.n(b)},362735,a=>{"use strict";var b=a.i(504348),c=a.i(429969),d=a.i(285956),e=a.i(336176);a.i(467361);var f=a.i(445074);a.i(257390);var g=a.i(347128),h=a.i(49892);async function i(){let a,c,i;try{[a,c,i]=await Promise.all([(0,g.getUserProfile)(),(0,f.getUserCompanies)(),(0,f.getActiveCompanyId)()])}catch(a){if(a instanceof Error&&a.message.includes("prerendering"))return null;throw console.error("AppHeader: Failed to fetch user data",a),a}if(!a)return null;let j=[],k=!1,l=!1,m=null;if(i)try{let[a,b]=await Promise.all([(0,e.getCompanyPhoneNumbers)(i),(0,d.getPayrixMerchantAccount)(i)]);a.success&&a.data&&(j=a.data.map(a=>({id:a.id,number:a.phone_number,label:a.formatted_number||a.phone_number})),k=a.data.length>0),b.success&&b.data&&(l=!0,m=b.data.status)}catch(a){}return(0,b.jsx)(h.AppHeaderClient,{activeCompanyId:i,companies:c,companyPhones:j,userProfile:a,hasPhoneNumbers:k,hasPayrixAccount:l,payrixStatus:m,subHeader:null})}var j=a.i(338067);a.i(692167);var k=a.i(852596);a.i(262820);var l=a.i(883385);async function m(){return await (0,l.getCurrentUser)()||(0,k.redirect)("/login?message=Please log in to access the dashboard"),null}var n=a.i(178952),o=a.i(240416),p=a.i(590126),q=a.i(252282);function r({children:a}){return(0,b.jsxs)("div",{"data-dashboard-layout":!0,className:"flex h-full flex-col overflow-hidden",children:[(0,b.jsx)(j.AppHeaderErrorBoundary,{children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(s,{}),children:(0,b.jsx)(i,{})})}),(0,b.jsx)(p.NotificationsInitializer,{}),(0,b.jsx)(n.IncomingCallNotificationWrapper,{}),(0,b.jsx)(c.Suspense,{fallback:null,children:(0,b.jsx)(m,{})}),(0,b.jsx)(q.SupportSessionProvider,{children:(0,b.jsx)("main",{id:"main-content",className:"flex-1 flex flex-col overflow-y-auto pb-16 lg:pb-0",children:a})}),(0,b.jsx)(o.MobileBottomTabsWrapper,{})]})}function s(){return(0,b.jsx)("header",{className:"border-border/40 bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full border-b backdrop-blur",children:(0,b.jsxs)("div",{className:"flex h-14 items-center px-4",children:[(0,b.jsxs)("div",{className:"flex flex-1 items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-muted h-8 w-32 animate-pulse rounded"}),(0,b.jsxs)("div",{className:"hidden md:flex md:gap-2",children:[(0,b.jsx)("div",{className:"bg-muted h-8 w-20 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-8 w-20 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted h-8 w-20 animate-pulse rounded"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"bg-muted size-8 animate-pulse rounded-full"}),(0,b.jsx)("div",{className:"bg-muted size-8 animate-pulse rounded-full"})]})]})})}a.s(["default",()=>r],362735)},858982,a=>{a.v(a=>Promise.resolve().then(()=>a(857782)))},44464,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_telnyx_messaging-profile-fetcher_ts_96489c1c._.js"].map(b=>a.l(b))).then(()=>b(124096)))},115593,a=>{a.v(a=>Promise.resolve().then(()=>a(111732)))},408788,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_assemblyai_client_ts_839fcaee._.js"].map(b=>a.l(b))).then(()=>b(703513)))},37652,a=>{a.v(b=>Promise.all(["server/chunks/ssr/apps_web_src_lib_auth_company-context_ts_732d588b._.js"].map(b=>a.l(b))).then(()=>b(480513)))},141196,a=>{a.v(b=>Promise.all(["server/chunks/ssr/_2dbcdf27._.js","server/chunks/ssr/[root-of-the-server]__582fec95._.js","server/chunks/ssr/node_modules__pnpm_f6ce1303._.js","server/chunks/ssr/_77268b50._.js","server/chunks/ssr/37e87_zod_v4_bffbb343._.js","server/chunks/ssr/apps_web_src_lib_email_388c15fd._.js","server/chunks/ssr/apps_web_1975324d._.js","server/chunks/ssr/node_modules__pnpm_f300cd57._.js"].map(b=>a.l(b))).then(()=>b(970552)))},877662,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__19a3dae2._.js"].map(b=>a.l(b))).then(()=>b(546081)))}];

//# sourceMappingURL=_44cafbef._.js.map