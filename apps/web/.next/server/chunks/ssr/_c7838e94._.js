module.exports=[166190,a=>{"use strict";let b=(0,a.i(203431).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["default",()=>b])},824124,a=>{"use strict";var b=a.i(166190);a.s(["MapPin",()=>b.default])},857463,a=>{"use strict";a.i(156120),a.s([])},567572,a=>{"use strict";var b=a.i(169021),c=(0,b.createServerReference)("406ba1c9655fc9a1b2015aea1e701e0412af96ce58",b.callServer,void 0,b.findSourceMapURL,"createJob");a.s(["createJob",()=>c])},261042,a=>{"use strict";var b=a.i(861467),c=a.i(773608),d=a.i(97997),e=a.i(48199),f=a.i(587969),g=a.i(319895),h=a.i(198803),i=a.i(824124),j=a.i(320091),k=a.i(337241),l=a.i(783281),m=a.i(567572);a.i(857463);var n=a.i(161367);a.i(445255);var o=a.i(18170);a.i(380934);var p=a.i(347421);a.i(839984);var q=a.i(372712);a.i(458393);var r=a.i(82012);a.i(40744);var s=a.i(419573);a.i(897346);var t=a.i(75892),u=a.i(700760);function v({customers:a,properties:v,teamMembers:w,defaultValues:x}){let y=(0,k.useRouter)(),[z,A]=(0,l.useTransition)(),[B,C]=(0,l.useState)(null),[D,E]=(0,l.useState)(x?.customerId||""),[F,G]=(0,l.useState)(x?.propertyId||""),[H,I]=(0,l.useState)(x?.assignedTo||""),[J,K]=(0,l.useState)(x?.title||""),[L,M]=(0,l.useState)(x?.description||""),[N,O]=(0,l.useState)(x?.priority||"medium"),[P,Q]=(0,l.useState)(x?.jobType||""),[R,S]=(0,l.useState)(x?.scheduledStart?(0,c.format)(new Date(x.scheduledStart),"yyyy-MM-dd'T'HH:mm"):""),[T,U]=(0,l.useState)(""),[V,W]=(0,l.useState)(x?.notes||""),X=(0,l.useMemo)(()=>D?v.filter(a=>a.customer_id===D):v,[v,D]),Y=async a=>{(a.preventDefault(),C(null),F)?J.trim()?A(async()=>{let a=new FormData;a.set("propertyId",F),D&&a.set("customerId",D),a.set("title",J),L&&a.set("description",L),a.set("priority",N),P&&a.set("jobType",P),R&&a.set("scheduledStart",R),T&&a.set("scheduledEnd",T),H&&a.set("assignedTo",H),V&&a.set("notes",V);let b=await (0,m.createJob)(a);b.success?b.data?y.push(`/dashboard/work/${b.data}`):y.push("/dashboard/work"):C(b.error||"Failed to create job")}):C("Please enter a job title"):C("Please select a property for this job")};return(0,b.jsx)("div",{className:"container max-w-3xl py-6",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Briefcase,{className:"h-5 w-5"}),"Create New Job"]}),(0,b.jsx)(p.CardDescription,{children:"Fill in the details below to create a new work order"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsxs)("form",{onSubmit:Y,className:"space-y-6",children:[B&&(0,b.jsxs)(n.Alert,{variant:"destructive",children:[(0,b.jsx)(d.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(n.AlertDescription,{children:B})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(j.User,{className:"h-4 w-4"}),"Customer & Location"]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"customer",children:"Customer"}),(0,b.jsxs)(s.Select,{value:D,onValueChange:a=>{if(E(a),F){let b=v.find(a=>a.id===F);b&&b.customer_id!==a&&G("")}let b=v.filter(b=>b.customer_id===a);1===b.length&&G(b[0].id)},children:[(0,b.jsx)(s.SelectTrigger,{id:"customer",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select customer"})}),(0,b.jsx)(s.SelectContent,{children:a.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.display_name?a.display_name:a.first_name||a.last_name?`${a.first_name||""} ${a.last_name||""}`.trim():a.email||"Unknown"},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(r.Label,{htmlFor:"property",children:["Property ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(s.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(s.SelectTrigger,{id:"property",className:(0,u.cn)(!F&&"text-muted-foreground"),children:(0,b.jsx)(s.SelectValue,{placeholder:"Select property"})}),(0,b.jsx)(s.SelectContent,{children:X.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.MapPin,{className:"h-3 w-3 text-muted-foreground"}),[a.address,a.city,a.state].filter(Boolean).join(", ")||"Unknown address"]})},a.id))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(g.FileText,{className:"h-4 w-4"}),"Job Details"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(r.Label,{htmlFor:"title",children:["Title ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(q.Input,{id:"title",placeholder:"e.g., HVAC Maintenance, Plumbing Repair",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(t.Textarea,{id:"description",placeholder:"Describe the work to be done...",value:L,onChange:a=>M(a.target.value),rows:3})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"jobType",children:"Job Type"}),(0,b.jsxs)(s.Select,{value:P,onValueChange:Q,children:[(0,b.jsx)(s.SelectTrigger,{id:"jobType",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"service",children:"Service"}),(0,b.jsx)(s.SelectItem,{value:"installation",children:"Installation"}),(0,b.jsx)(s.SelectItem,{value:"repair",children:"Repair"}),(0,b.jsx)(s.SelectItem,{value:"maintenance",children:"Maintenance"}),(0,b.jsx)(s.SelectItem,{value:"inspection",children:"Inspection"}),(0,b.jsx)(s.SelectItem,{value:"consultation",children:"Consultation"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"priority",children:"Priority"}),(0,b.jsxs)(s.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(s.SelectTrigger,{id:"priority",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select priority"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"low",children:"Low"}),(0,b.jsx)(s.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(s.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(s.SelectItem,{value:"urgent",children:"Urgent"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(f.Calendar,{className:"h-4 w-4"}),"Schedule"]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"scheduledStart",children:"Start Date & Time"}),(0,b.jsx)(q.Input,{id:"scheduledStart",type:"datetime-local",value:R,onChange:a=>S(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"scheduledEnd",children:"End Date & Time"}),(0,b.jsx)(q.Input,{id:"scheduledEnd",type:"datetime-local",value:T,onChange:a=>U(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"assignedTo",children:"Assign To"}),(0,b.jsxs)(s.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(s.SelectTrigger,{id:"assignedTo",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select team member"})}),(0,b.jsx)(s.SelectContent,{children:w.map(a=>(0,b.jsxs)(s.SelectItem,{value:a.id,children:[a.name,a.jobTitle&&(0,b.jsxs)("span",{className:"text-muted-foreground",children:[" ","- ",a.jobTitle]})]},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"notes",children:"Internal Notes"}),(0,b.jsx)(t.Textarea,{id:"notes",placeholder:"Add any internal notes...",value:V,onChange:a=>W(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4",children:[(0,b.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>y.back(),disabled:z,children:"Cancel"}),(0,b.jsx)(o.Button,{type:"submit",disabled:z,children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Job"})]})]})})]})})}a.s(["JobCreateForm",()=>v])}];

//# sourceMappingURL=_c7838e94._.js.map