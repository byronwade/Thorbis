module.exports=[478166,a=>{"use strict";var b=a.i(861467),c=a.i(565308),d=a.i(60222),e=a.i(624126),f=a.i(320091),g=a.i(145679),h=a.i(783281);a.i(445255);var i=a.i(18170),j=a.i(425809),k=a.i(251048);let l=[{id:"scheduled",name:"Scheduled",accentColor:"#2563EB"},{id:"confirmed",name:"Confirmed",accentColor:"#22C55E"},{id:"in_progress",name:"In Progress",accentColor:"#F97316"},{id:"completed",name:"Completed",accentColor:"#10B981"},{id:"cancelled",name:"Cancelled",accentColor:"#EF4444"},{id:"no_show",name:"No Show",accentColor:"#F59E0B"}],m=new Map(l.map(a=>[a.id,a.name])),n="scheduled",o=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),p=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}),q=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"});function r(a){if(!a)return"—";let b="string"==typeof a?new Date(a):a;return q.format(b)}function s({item:a}){let{appointment:h,columnId:j}=a,k=h.start_time?new Date(h.start_time):null,l=h.end_time?new Date(h.end_time):null;return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,b.jsx)("div",{className:"space-y-1",children:(0,b.jsx)("h3",{className:"text-foreground text-sm leading-snug font-semibold",children:h.title})})}),h.description&&(0,b.jsx)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:h.description}),(0,b.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.User,{className:"text-primary size-4"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:h.customer?.display_name?h.customer.display_name:h.customer?.first_name||h.customer?.last_name?`${h.customer.first_name||""} ${h.customer.last_name||""}`.trim():"Unknown Customer"})]}),k&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.CalendarDays,{className:"text-primary size-4"}),(0,b.jsx)("span",{children:function(a){if(!a)return"—";let b="string"==typeof a?new Date(a):a;return o.format(b)}(k)})]}),k&&l&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Clock,{className:"text-primary size-4"}),(0,b.jsxs)("span",{children:[r(k)," - ",r(l)]})]}),h.assigned_user?.name&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.User,{className:"text-primary size-4"}),(0,b.jsx)("span",{children:h.assigned_user.name})]})]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-[11px] tracking-wide",children:[(0,b.jsx)("span",{children:k&&p.format(k)}),(0,b.jsx)("span",{className:"uppercase",children:m.get(j)??j})]}),(0,b.jsx)("div",{className:"flex items-center justify-end pt-1",children:(0,b.jsx)(i.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,b.jsxs)(g.default,{href:`/dashboard/work/appointments/${h.id}`,children:["View",(0,b.jsx)(c.ArrowUpRight,{className:"size-3.5"})]})})})]})}function t({appointments:a}){let{toast:c}=(0,k.useToast)(),[d,e]=(0,h.useTransition)(),f=async({item:a,fromColumnId:b,toColumnId:d})=>{b!==d&&e(()=>{(async()=>{c.success(`Appointment moved to ${m.get(d)}`)})()})};return(0,b.jsx)(j.EntityKanban,{calculateColumnMeta:(a,b)=>({count:b.filter(b=>b.columnId===a).length}),columns:l,data:a,entityName:"appointments",mapToKanbanItem:a=>{var b;return{id:a.id,columnId:(b=a.status)&&m.has(b)?b:n,entity:a,appointment:a}},onItemMove:f,renderCard:a=>(0,b.jsx)(s,{item:{...a,appointment:a.entity}}),renderDragOverlay:a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-md border p-3 shadow-lg",children:(0,b.jsx)(s,{item:{...a,appointment:a.entity}})}),updateEntityStatus:(a,b)=>({...a,status:b})})}a.s(["AppointmentsKanban",()=>t])},856600,a=>{"use strict";var b=a.i(861467),c=a.i(337241),d=a.i(169021),e=(0,d.createServerReference)("4011aa566ca79fb24d9075e5c8afddde5f0ff63c2c",d.callServer,void 0,d.findSourceMapURL,"archiveAppointment"),f=a.i(452168),g=a.i(587969),h=a.i(525756),i=a.i(854729),j=a.i(94436),k=a.i(638727),l=a.i(145679),m=a.i(783281);a.i(463359);var n=a.i(954581);a.i(288007);var o=a.i(986990);a.i(445255);var p=a.i(18170);a.i(956852);var q=a.i(90125),r=a.i(380340),s=a.i(370528),t=a.i(858707),u=a.i(563432),v=a.i(700760);function w(a){if(!a)return"—";let b="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"}).format(b)}function x({appointments:a,itemsPerPage:d=50,onAppointmentClick:x,showRefresh:y=!1,totalCount:z,currentPage:A=1,initialSearchQuery:B=""}){(0,c.useRouter)();let C=(0,u.useArchiveStore)(a=>a.filters.appointments),{handleRefresh:D}=(0,s.useTableActions)({entityType:"appointments"}),{openArchiveDialog:E,ArchiveDialogComponent:F}=(0,n.useArchiveDialog)({onConfirm:async a=>{(await e(a)).success&&D()},title:"Archive Appointment?",description:"This appointment will be archived and can be restored within 90 days."}),[G,H]=(0,m.useState)(!1),[I,J]=(0,m.useState)(null),[K,L]=(0,m.useState)(new Set),{openArchiveDialog:M,ArchiveDialogComponent:N}=(0,n.useArchiveDialog)({onConfirm:async()=>{let a=0;for(let b of K)(await e(b)).success&&a++;a>0&&D()},title:`Archive ${K.size} Appointment(s)?`,description:`${K.size} appointment(s) will be archived and can be restored within 90 days.`}),O=a.filter(a=>{let b=!!(a.archived_at||a.deleted_at);return"active"===C?!b:"archived"!==C||b}),P=[{key:"title",header:"Title",width:"flex-1",render:a=>(0,b.jsxs)(l.default,{className:"block min-w-0",href:`/dashboard/work/appointments/${a.id}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"truncate text-xs leading-tight font-medium hover:underline",children:a.title}),a.description&&(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:a.description})]})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:a.customer?.display_name?a.customer.display_name:a.customer?.first_name||a.customer?.last_name?`${a.customer.first_name||""} ${a.customer.last_name||""}`.trim():"Unknown Customer"})},{key:"start_time",header:"Date & Time",width:"w-40",shrink:!0,hideable:!1,render:a=>(0,b.jsxs)("div",{className:"text-muted-foreground text-xs tabular-nums",children:[(0,b.jsx)("div",{className:"leading-tight",children:function(a){if(!a)return"—";let b="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(b)}(a.start_time)}),(0,b.jsxs)("div",{className:"text-xs leading-tight",children:[w(a.start_time)," -"," ",w(a.end_time)]})]})},{key:"status",header:"Status",width:"w-32",shrink:!0,hideable:!1,render:a=>{var c;let d;return d=({scheduled:{className:"border-primary bg-primary text-primary-foreground hover:bg-primary/90 dark:border-primary dark:bg-primary dark:text-primary-foreground",label:"Scheduled"},confirmed:{className:"border-success bg-success text-white hover:bg-success/90 dark:border-success dark:bg-success dark:text-white",label:"Confirmed"},in_progress:{className:"border-primary/50 bg-primary text-white hover:bg-primary",label:"In Progress"},completed:{className:"border-success/50 bg-success text-white hover:bg-success",label:"Completed"},cancelled:{className:"border-destructive/50 bg-destructive text-white hover:bg-destructive",label:"Cancelled"},no_show:{className:"border-warning/50 bg-warning text-white hover:bg-warning",label:"No Show"}})[c=a.status]||{className:"border-border/50 bg-background text-muted-foreground",label:c},(0,b.jsx)(o.Badge,{className:(0,v.cn)("text-xs font-medium",d.className),variant:"outline",children:d.label})}},{key:"assigned_user",header:"Assigned To",width:"w-36",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:a.assigned_user?.name||"Unassigned"})},{key:"actions",header:"",width:"w-10",shrink:!0,render:a=>(0,b.jsx)("div",{"data-no-row-click":!0,children:(0,b.jsxs)(q.DropdownMenu,{children:[(0,b.jsx)(q.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(p.Button,{size:"icon",variant:"ghost",children:[(0,b.jsx)(j.MoreHorizontal,{className:"size-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,b.jsxs)(q.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(q.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(q.DropdownMenuSeparator,{}),(0,b.jsx)(q.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(l.default,{href:`/dashboard/work/appointments/${a.id}`,children:[(0,b.jsx)(i.Eye,{className:"mr-2 size-4"}),"View Details"]})}),(0,b.jsx)(q.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(l.default,{href:`/dashboard/work/appointments/${a.id}/edit`,children:[(0,b.jsx)(h.Edit,{className:"mr-2 size-4"}),"Edit Appointment"]})}),(0,b.jsx)(q.DropdownMenuSeparator,{}),(0,b.jsxs)(q.DropdownMenuItem,{className:"text-destructive",onClick:()=>{E(a.id)},children:[(0,b.jsx)(f.Archive,{className:"mr-2 size-4"}),"Archive Appointment"]})]})]})})}],Q=[{label:"Archive Selected",icon:(0,b.jsx)(f.Archive,{className:"h-4 w-4"}),onClick:async a=>{L(a),M("")},variant:"destructive"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.FullWidthDataTable,{...t.TablePresets.fullList({entity:"appointments",enableSelection:!0,searchPlaceholder:"Search appointments by title, description, or status...",itemsPerPage:d,showRefresh:y}),data:O,columns:P,getItemId:a=>a.id,bulkActions:Q,onRowClick:a=>{x?x(a):window.location.href=`/dashboard/work/appointments/${a.id}`},totalCount:z,currentPageFromServer:A,initialSearchQuery:B,serverPagination:!0,serverSearch:!0,searchParamKey:"search",onRefresh:D,emptyMessage:"No appointments found",emptyIcon:(0,b.jsx)(g.Calendar,{className:"text-muted-foreground h-8 w-8"}),emptyAction:(0,b.jsxs)(p.Button,{onClick:()=>{window.location.href="/dashboard/work/appointments/new"},size:"sm",children:[(0,b.jsx)(k.Plus,{className:"mr-2 size-4"}),"Add Appointment"]}),isArchived:a=>!!(a.archived_at||a.deleted_at),showArchived:"active"!==C}),(0,b.jsx)(F,{}),(0,b.jsx)(N,{})]})}a.s(["AppointmentsTable",()=>x],856600)}];

//# sourceMappingURL=apps_web_src_components_work_6de7aac7._.js.map