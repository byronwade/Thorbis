module.exports=[774804,891032,a=>{"use strict";var b=a.i(861467),c=a.i(97997),d=a.i(90083),e=a.i(624126),f=a.i(198803),g=a.i(824124),h=a.i(246840),i=a.i(808249),j=a.i(783281);a.i(275601);var k=a.i(184158),l=a.i(700760);let m=a=>{if(!a)return{primary:"Address unavailable",secondary:""};let b=a.split(",").map(a=>a.trim());return{primary:b[0]??a,secondary:b.slice(1).join(", ")}};function n({property:a,className:n}){let[o,p]=(0,j.useState)(null),[q,r]=(0,j.useState)(!0),[s,t]=(0,j.useState)(null),[u,v]=(0,j.useState)(null),w=(0,j.useRef)(!1),x=(0,j.useCallback)(async()=>{if(!(a?.address&&a?.city&&a?.state))return void r(!1);r(!0),t(null);try{let b=(a=>{let b=new URLSearchParams;if(a.lat&&a.lon)b.set("destinationLat",a.lat.toString()),b.set("destinationLon",a.lon.toString());else{let c,d=(c=[a.city,a.state].filter(a=>"string"==typeof a&&a.trim().length>0).join(", "),[a.address,a.address2,c||void 0,a.zipCode??a.zip_code??void 0].filter(a=>"string"==typeof a&&a.trim().length>0).map(a=>a.trim()).join(", "));b.set("destination",d)}return b})(a),c=await fetch(`/api/travel-time?${b.toString()}`,{credentials:"same-origin"});if(!c.ok){let a=await c.json().catch(()=>({error:"Failed to fetch travel time"}));throw Error(a.error||"Failed to fetch travel time")}let d=await c.json();p(d),v(new Date),t(null)}catch(a){t(a instanceof Error?a.message:"Failed to fetch travel time"),p(null)}finally{r(!1)}},[a?.address,a?.address2,a?.city,a?.state,a?.zipCode,a?.zip_code,a?.lat,a?.lon]),y=(0,j.useRef)(x);if((0,j.useEffect)(()=>{y.current=x},[x]),(0,j.useEffect)(()=>{if(!a?.address)return void r(!1);if(!w.current){w.current=!0,y.current();let a=setInterval(()=>{y.current()},3e5);return()=>{clearInterval(a),w.current=!1}}},[]),!a?.address)return null;let z=a=>{let b=Math.floor(a/3600),c=Math.floor(a%3600/60);return b>0?`${b}h ${c}m`:`${c}m`},A=o?m(o.origin):null,B=o?m(o.destination):null;return q||s||!o?(0,b.jsxs)("div",{className:(0,l.cn)("bg-muted/50 flex h-7 items-center gap-2 rounded-md px-2.5 text-xs",n),children:[q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"text-muted-foreground h-3 w-3 animate-spin"}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"Calculating..."})]}),s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.AlertCircle,{className:"text-destructive h-3 w-3"}),(0,b.jsx)("span",{className:"text-destructive",children:"Travel time unavailable"})]}),!(s||o||q)&&(0,b.jsx)("span",{className:"text-muted-foreground",children:"No travel data"})]}):(0,b.jsxs)(k.HoverCard,{openDelay:200,children:[(0,b.jsx)(k.HoverCardTrigger,{asChild:!0,children:(0,b.jsxs)("div",{className:(0,l.cn)("bg-muted/50 hover:bg-muted flex h-7 cursor-help items-center gap-2 rounded-md px-2.5 text-xs transition-colors",n),children:[(0,b.jsx)(e.Clock,{className:"text-muted-foreground h-3 w-3"}),(0,b.jsx)("span",{className:"font-medium tabular-nums",children:z(o.duration)}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,b.jsx)(i.Route,{className:"text-muted-foreground h-3 w-3"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[o.distance.toFixed(1)," mi"]}),(0,b.jsx)("button",{"aria-label":"Refresh travel time",className:"text-muted-foreground hover:text-foreground ml-auto flex items-center gap-1 transition",onClick:x,type:"button",children:(0,b.jsx)(h.RefreshCw,{className:"h-3 w-3"})})]})}),(0,b.jsx)(k.HoverCardContent,{align:"start",className:"w-80",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-md",children:(0,b.jsx)(e.Clock,{className:"text-primary h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Travel Time"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"From company HQ"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"border-border/50 bg-muted/20 rounded-lg border p-3",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-[10px] font-medium tracking-wide uppercase",children:"Duration"}),(0,b.jsx)("div",{className:"text-foreground mt-1 text-2xl font-bold tabular-nums",children:z(o.duration)}),(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 text-xs",children:o.durationText})]}),(0,b.jsxs)("div",{className:"border-border/50 bg-muted/20 rounded-lg border p-3",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-[10px] font-medium tracking-wide uppercase",children:"Distance"}),(0,b.jsxs)("div",{className:"text-foreground mt-1 text-2xl font-bold tabular-nums",children:[o.distance.toFixed(1)," mi"]}),(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 text-xs",children:o.distanceText})]})]}),(0,b.jsxs)("div",{className:"border-border/50 bg-muted/20 space-y-1.5 rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-1.5 text-[10px] font-medium tracking-wide uppercase",children:[(0,b.jsx)(i.Route,{className:"h-3 w-3"}),"Route"]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)(d.ArrowRight,{className:"text-muted-foreground mt-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-foreground font-medium",children:A?.primary}),A?.secondary&&(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:A.secondary})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)(g.MapPin,{className:"text-primary mt-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-foreground font-medium",children:B?.primary}),B?.secondary&&(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:B.secondary})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-emerald-500/10 px-2 py-1",children:[(0,b.jsx)("span",{className:"inline-flex h-1.5 w-1.5 animate-pulse rounded-full bg-emerald-500"}),(0,b.jsx)("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400",children:"Live traffic data"})]}),u&&(0,b.jsxs)("div",{className:"text-muted-foreground text-xs",children:["Updated ",(a=>{if(!a)return null;let b=Math.round((a.getTime()-Date.now())/6e4),c=new Intl.RelativeTimeFormat("en",{numeric:"auto"});if(60>Math.abs(b))return c.format(b,"minute");let d=Math.round(b/60);if(24>Math.abs(d))return c.format(d,"hour");let e=Math.round(d/24);return c.format(e,"day")})(u)]})]})]})})]})}a.s(["TravelTime",()=>n],774804);var o=a.i(572863),p=a.i(332284),q=a.i(924230),r=a.i(699756),s=a.i(566314);a.i(288007);var t=a.i(986990);a.i(445255);var u=a.i(18170);a.i(19256);var v=a.i(417132);a.i(531982);var w=a.i(421983);function x({property:a,nearbySuppliers:c=[]}){let[d,e]=(0,j.useState)(!1),[f,h]=(0,j.useState)("map"),i=[a.address,a.address2,`${a.city}, ${a.state} ${a.zip_code}`].filter(Boolean).join("\n"),k=encodeURIComponent([a.address,a.address2,a.city,a.state,a.zip_code].filter(Boolean).join(", ")),l=a.lat&&a.lon?`${a.lat},${a.lon}`:k,m=`https://www.google.com/maps/embed/v1/directions?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&origin=current+location&destination=${l}&mode=driving`,n=`https://www.google.com/maps/dir/?api=1&destination=${l}`,x=!!(a.lat&&a.lon),y=x?`https://www.google.com/maps/embed/v1/streetview?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&location=${a.lat},${a.lon}&heading=0&pitch=0&fov=90`:null,z=x?`https://www.google.com/maps/embed/v1/view?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&center=${a.lat},${a.lon}&zoom=18&maptype=satellite`:`https://www.google.com/maps/embed/v1/search?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&q=${k}&zoom=18&maptype=satellite`,A=a.lat&&a.lon?`https://earth.google.com/web/@${a.lat},${a.lon},0a,1000d,35y,0h,0t,0r`:`https://earth.google.com/web/search/${k}`;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-3 p-4 sm:p-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-xxs font-semibold tracking-wider uppercase",children:"Service Location"}),(0,b.jsx)(u.Button,{asChild:!0,className:"h-7 gap-1.5 px-2 text-xs",size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:n,rel:"noopener noreferrer",target:"_blank",children:[(0,b.jsx)(r.Navigation,{className:"size-3"}),"Open in Maps"]})})]}),(0,b.jsx)("div",{className:"text-foreground text-sm leading-relaxed whitespace-pre-line",children:i})]}),(0,b.jsxs)(w.Tabs,{className:"w-full",onValueChange:h,value:f,children:[(0,b.jsxs)(w.TabsList,{className:"grid h-9 w-full grid-cols-3",children:[(0,b.jsxs)(w.TabsTrigger,{className:"gap-1.5 text-xs",value:"map",children:[(0,b.jsx)(r.Navigation,{className:"size-3.5"}),"Map"]}),(0,b.jsxs)(w.TabsTrigger,{className:"gap-1.5 text-xs",disabled:!y,value:"street",children:[(0,b.jsx)(o.Camera,{className:"size-3.5"}),"Street"]}),(0,b.jsxs)(w.TabsTrigger,{className:"gap-1.5 text-xs",value:"earth",children:[(0,b.jsx)(p.Globe,{className:"size-3.5"}),"Earth"]})]}),(0,b.jsxs)(w.TabsContent,{className:"mt-3 space-y-3",value:"map",children:[(0,b.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,b.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:m,style:{border:0},title:"Property Map with Directions"}),(0,b.jsx)(u.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{h("map"),e(!0)},size:"icon",variant:"ghost",children:(0,b.jsx)(q.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Shows route from your current location"}),c.length>0&&(0,b.jsxs)(t.Badge,{className:"gap-1",variant:"secondary",children:[(0,b.jsx)(s.Store,{className:"size-3"}),c.length," nearby"]})]})]}),(0,b.jsx)(w.TabsContent,{className:"mt-3 space-y-3",value:"street",children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,b.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:y,style:{border:0},title:"Property Street View"}),(0,b.jsx)(u.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{h("street"),e(!0)},size:"icon",variant:"ghost",children:(0,b.jsx)(q.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"360° ground-level view of the property"})]}):(0,b.jsxs)("div",{className:"bg-muted/50 flex h-[200px] flex-col items-center justify-center rounded-lg border p-6 text-center",children:[(0,b.jsx)(o.Camera,{className:"text-muted-foreground mx-auto mb-3 size-10 opacity-30"}),(0,b.jsx)("p",{className:"text-foreground mb-1 text-sm font-medium",children:"Street View Unavailable"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-xs text-xs",children:"Add GPS coordinates (latitude/longitude) to the property to enable street-level imagery"})]})}),(0,b.jsxs)(w.TabsContent,{className:"mt-3 space-y-3",value:"earth",children:[(0,b.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,b.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:z,style:{border:0},title:"Satellite View"}),(0,b.jsx)(u.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{h("earth"),e(!0)},size:"icon",variant:"ghost",children:(0,b.jsx)(q.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Satellite imagery view"}),(0,b.jsx)(u.Button,{asChild:!0,className:"h-6 gap-1 px-2 text-xs",size:"sm",variant:"ghost",children:(0,b.jsxs)("a",{href:A,rel:"noopener noreferrer",target:"_blank",children:[(0,b.jsx)(p.Globe,{className:"size-3"}),"Open Google Earth"]})})]})]})]}),a.lat&&a.lon&&(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg px-3 py-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Coordinates:"}),(0,b.jsxs)("span",{className:"text-foreground font-mono font-medium",children:[a.lat.toFixed(4),", ",a.lon.toFixed(4)]})]})})]}),(0,b.jsx)(v.Dialog,{onOpenChange:e,open:d,children:(0,b.jsxs)(v.DialogContent,{className:"max-w-5xl p-0",children:[(0,b.jsxs)(v.DialogHeader,{className:"border-b px-6 py-4",children:[(0,b.jsxs)(v.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.MapPin,{className:"text-primary h-5 w-5"}),"Service Location"]}),(0,b.jsx)("div",{className:"text-muted-foreground mt-2 text-sm whitespace-pre-line",children:i})]}),(0,b.jsxs)(w.Tabs,{className:"w-full",onValueChange:h,value:f,children:[(0,b.jsx)("div",{className:"border-b px-6",children:(0,b.jsxs)(w.TabsList,{className:"h-10",children:[(0,b.jsxs)(w.TabsTrigger,{className:"gap-2",value:"map",children:[(0,b.jsx)(r.Navigation,{className:"size-4"}),"Map & Route"]}),(0,b.jsxs)(w.TabsTrigger,{className:"gap-2",disabled:!y,value:"street",children:[(0,b.jsx)(o.Camera,{className:"size-4"}),"Street View"]}),(0,b.jsxs)(w.TabsTrigger,{className:"gap-2",value:"earth",children:[(0,b.jsx)(p.Globe,{className:"size-4"}),"Satellite"]})]})}),(0,b.jsx)(w.TabsContent,{className:"m-0",value:"map",children:(0,b.jsx)("div",{className:"h-[600px] w-full",children:(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:m,style:{border:0},title:"Property Map with Directions - Expanded"})})}),(0,b.jsx)(w.TabsContent,{className:"m-0",value:"street",children:y?(0,b.jsx)("div",{className:"h-[600px] w-full",children:(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:y,style:{border:0},title:"Property Street View - Expanded"})}):(0,b.jsxs)("div",{className:"bg-muted/50 flex h-[600px] flex-col items-center justify-center p-12 text-center",children:[(0,b.jsx)(o.Camera,{className:"text-muted-foreground mx-auto mb-4 size-16 opacity-20"}),(0,b.jsx)("p",{className:"text-foreground mb-2 text-lg font-semibold",children:"Street View Unavailable"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-md text-sm",children:"Add GPS coordinates (latitude/longitude) to the property to enable street-level imagery"})]})}),(0,b.jsx)(w.TabsContent,{className:"m-0",value:"earth",children:(0,b.jsx)("div",{className:"h-[600px] w-full",children:(0,b.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:z,style:{border:0},title:"Satellite View - Expanded"})})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-4 text-sm",children:a.lat&&a.lon&&(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(g.MapPin,{className:"size-4"}),(0,b.jsxs)("span",{className:"font-mono text-xs",children:[a.lat.toFixed(6),", ",a.lon.toFixed(6)]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Button,{asChild:!0,className:"gap-2",size:"sm",variant:"outline",children:(0,b.jsxs)("a",{href:A,rel:"noopener noreferrer",target:"_blank",children:[(0,b.jsx)(p.Globe,{className:"size-4"}),"Open in Google Earth"]})}),(0,b.jsx)(u.Button,{asChild:!0,className:"gap-2",size:"sm",children:(0,b.jsxs)("a",{href:n,rel:"noopener noreferrer",target:"_blank",children:[(0,b.jsx)(r.Navigation,{className:"size-4"}),"Open in Google Maps"]})})]})]})]})})]})}a.s(["PropertyLocationVisual",()=>x],891032)}];

//# sourceMappingURL=apps_web_src_components_work_job-details_travel-time_tsx_6adfb63e._.js.map