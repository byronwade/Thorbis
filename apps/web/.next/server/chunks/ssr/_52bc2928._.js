module.exports=[764633,a=>{"use strict";let b=(0,a.i(203431).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);a.s(["default",()=>b])},60222,a=>{"use strict";var b=a.i(764633);a.s(["CalendarDays",()=>b.default])},684700,a=>{"use strict";let b=(0,a.i(203431).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["default",()=>b])},565308,a=>{"use strict";var b=a.i(684700);a.s(["ArrowUpRight",()=>b.default])},264738,a=>{"use strict";let b=(0,a.i(203431).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["default",()=>b])},779184,a=>{"use strict";var b=a.i(264738);a.s(["ChevronLeft",()=>b.default])},917640,a=>{"use strict";var b=a.i(734972);a.s(["ArrowDown",()=>b.default])},146674,a=>{"use strict";let b=(0,a.i(203431).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);a.s(["default",()=>b])},155519,a=>{"use strict";var b=a.i(146674);a.s(["ArrowUp",()=>b.default])},734972,a=>{"use strict";let b=(0,a.i(203431).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);a.s(["default",()=>b])},147225,a=>{"use strict";let b=(0,a.i(203431).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);a.s(["default",()=>b])},695023,a=>{"use strict";var b=a.i(861467),c=a.i(783281),d=a.i(764479);function e({section:a,table:e,kanban:f,fallback:g=null,forceView:h}){let i=(0,d.useWorkView)(a),j=(0,d.useSetWorkView)(a),k=h??i;return((0,c.useEffect)(()=>{h&&i!==h&&j(h)},[h]),"kanban"===k)?(0,b.jsx)(b.Fragment,{children:f??g}):(0,b.jsx)(b.Fragment,{children:e??g})}a.s(["WorkDataView",()=>e])},425809,a=>{"use strict";var b=a.i(861467),c=a.i(783281);a.i(156120);var d=a.i(986990),e=a.i(939039),f=a.i(490100),g=a.i(18195),h=a.i(347421),i=a.i(54210),j=a.i(481938);let k=(0,c.createContext)(null),l=(0,c.createContext)(null),m="kanban-column-";function n(a,b,c){let d=Object.fromEntries(a.map(a=>[a.id,[]]));return b.reduce((a,b)=>{let d=c(b);return a[d]||(a[d]=[]),a[d]=[...a[d],b],a},d)}function o({columns:a,data:d,onDataChange:g,onItemMove:i,getColumnId:l,children:o,className:p,pointerSensorOptions:q,renderDragOverlay:r}){let s=(0,c.useCallback)(l??(a=>a.columnId),[]),[t,u]=(0,c.useState)(()=>n(a,d,s)),[v,w]=(0,c.useState)(null),x=(0,c.useRef)(a);(0,c.useEffect)(()=>{x.current=a},[a]),(0,c.useEffect)(()=>{u(n(a,d,s))},[a,d,s]);let y=(0,e.useSensors)((0,e.useSensor)(e.PointerSensor,{activationConstraint:{distance:6},...q}),(0,e.useSensor)(e.KeyboardSensor,{coordinateGetter:f.sortableKeyboardCoordinates})),z=(0,c.useCallback)(a=>{for(let b of x.current){let c=t[b.id]??[],d=c.findIndex(b=>b.id===a);if(-1!==d)return{columnId:b.id,item:c[d],index:d}}return null},[t]),A=(0,c.useCallback)(a=>{let b=z(a.active.id);b&&w({item:b.item,columnId:b.columnId})},[z]),B=(0,c.useCallback)(a=>{var b;let{active:c,over:d}=a;if(w(null),!d)return;let e=z(c.id);if(!e)return;let f=null,h=null;if("string"==typeof d.id&&d.id.startsWith(m))h=(t[f=d.id.replace(m,"")]??[]).length;else{let a=z(d.id);a&&(f=a.columnId,h=(t[a.columnId]??[]).findIndex(b=>b.id===a.item.id))}if(null===f||null===h||f===e.columnId&&h===e.index)return;let j=Object.fromEntries(Object.entries(t).map(([a,b])=>[a,b.slice()])),k=j[e.columnId]??[],[l]=k.splice(e.index,1);j[e.columnId]=k;let n=j[f]??[],o=e.columnId===f&&e.index<h?h-1:h,p={...l,columnId:f};n.splice(o,0,p),j[f]=n,u(j);let q=(b=x.current,b.flatMap(a=>j[a.id]??[]));g?.(q),i&&i({item:p,fromColumnId:e.columnId,toColumnId:f,toIndex:o})},[z,t,g,i]),C=(0,c.useMemo)(()=>({columns:a,getItems:a=>t[a]??[],findItem:z,activeItem:v}),[a,t,z,v]);return(0,b.jsx)(k.Provider,{value:C,children:(0,b.jsxs)(e.DndContext,{collisionDetection:e.closestCorners,onDragCancel:()=>w(null),onDragEnd:B,onDragStart:A,sensors:y,children:[(0,b.jsx)("div",{className:(0,j.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",p),children:o}),(0,b.jsx)(e.DragOverlay,{children:v?r?r(v.item):(0,b.jsx)(h.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,b.jsx)("p",{className:"text-sm font-medium",children:String(v.item.id)})}):null})]})})}function p({column:a,children:c,className:d}){return(0,b.jsx)(l.Provider,{value:a,children:(0,b.jsx)("section",{"aria-label":`${a.name} column`,className:(0,j.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",d),children:c})})}function q({children:a,className:c}){return(0,b.jsx)("header",{className:(0,j.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",c),children:a})}function r({columnId:a,children:d,emptyState:g,className:h,height:l="28rem"}){let{getItems:n}=function(){let a=(0,c.useContext)(k);if(!a)throw Error("useKanbanContext must be used within a KanbanProvider");return a}(),o=n(a),{setNodeRef:p,isOver:q}=(0,e.useDroppable)({id:`${m}${a}`});return(0,b.jsx)(f.SortableContext,{items:o.map(a=>a.id),strategy:f.verticalListSortingStrategy,children:(0,b.jsx)(i.ScrollArea,{className:"kanban-scroll flex-1",children:(0,b.jsxs)("div",{className:(0,j.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",q&&"ring-primary/60 ring-2 ring-offset-2",h),"data-drop-state":q?"active":"inactive",ref:p,style:{minHeight:l},children:[0===o.length&&g,o.map((a,b)=>d(a,b))]})})})}function s({itemId:a,children:c,className:d}){let{attributes:e,listeners:i,setNodeRef:k,transform:l,transition:m,isDragging:n}=(0,f.useSortable)({id:a}),o={transform:g.CSS.Transform.toString(l),transition:m};return(0,b.jsx)(h.Card,{className:(0,j.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",n&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",d),"data-dragging":n?"":void 0,ref:k,style:o,...i,...e,children:c})}function t({data:a,columns:e,mapToKanbanItem:f,updateEntityStatus:g,renderCard:h,renderDragOverlay:i,calculateColumnMeta:j,onItemMove:k,entityName:l="items",emptyStateMessage:m,showTotals:n=!1,formatTotal:t}){let[u,v]=(0,c.useState)(()=>a.map(f)),w=j||((a,b)=>({count:b.filter(b=>b.columnId===a).length})),x=(0,c.useMemo)(()=>{let a={};return e.forEach(b=>{a[b.id]=w(b.id,u)}),a},[e,u,w]),y=(0,c.useMemo)(()=>e.map(a=>({id:a.id,name:a.name,accentColor:a.accentColor})),[e]),z=m||(a=>`No ${l} in ${a}`);return(0,b.jsx)(o,{className:"pb-4",columns:y,data:u,onDataChange:a=>{g?v(a.map(a=>({...a,entity:g(a.entity,a.columnId)}))):v(a)},onItemMove:k,renderDragOverlay:i||(a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:h(a)})),children:e.map(a=>{let c=x[a.id]??{count:0};return(0,b.jsxs)(p,{className:"min-h-[300px] flex-1",column:y.find(b=>b.id===a.id),children:[(0,b.jsx)(q,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:a.accentColor}}),(0,b.jsx)("span",{className:"text-foreground text-sm font-semibold",children:a.name}),(0,b.jsxs)(d.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[c.count," ",l]}),n&&void 0!==c.total&&t&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:t(c.total)}),n&&void 0!==c.value&&t&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:t(c.value)})]})}),(0,b.jsx)(r,{className:"min-h-[200px]",columnId:a.id,emptyState:(0,b.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:z(a.name)}),children:a=>(0,b.jsx)(s,{itemId:a.id,children:h(a)},a.id)})]},a.id)})})}a.s(["EntityKanban",()=>t],425809)},858707,a=>{"use strict";a.s(["TablePresets",0,{fullList:(a={})=>({variant:"full",enableSelection:a.enableSelection??!0,showRefresh:a.showRefresh??!1,showPagination:a.showPagination??!0,itemsPerPage:a.itemsPerPage??50,serverPagination:a.serverPagination??!1,serverSearch:a.serverSearch??!1,searchPlaceholder:a.searchPlaceholder??"Search...",entity:a.entity,noPadding:a.noPadding??!1}),compact:(a={})=>({variant:"compact",enableSelection:a.enableSelection??!1,showRefresh:a.showRefresh??!1,showPagination:a.showPagination??!0,itemsPerPage:a.itemsPerPage??20,serverPagination:a.serverPagination??!1,serverSearch:a.serverSearch??!1,searchPlaceholder:a.searchPlaceholder??"Search...",entity:a.entity,noPadding:a.noPadding??!1}),nested:(a={})=>({variant:"nested",enableSelection:a.enableSelection??!1,showRefresh:a.showRefresh??!1,showPagination:a.showPagination??!1,itemsPerPage:a.itemsPerPage??10,serverPagination:a.serverPagination??!1,serverSearch:a.serverSearch??!1,entity:a.entity,noPadding:a.noPadding??!0}),serverPaginated:(a={})=>({variant:"full",enableSelection:a.enableSelection??!0,showRefresh:a.showRefresh??!1,showPagination:a.showPagination??!0,itemsPerPage:a.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:a.searchPlaceholder??"Search...",entity:a.entity,noPadding:a.noPadding??!1}),readOnly:(a={})=>({variant:a.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:a.showPagination??!!a.itemsPerPage,itemsPerPage:a.itemsPerPage??20,serverPagination:a.serverPagination??!1,serverSearch:!1,entity:a.entity,noPadding:a.noPadding??!1}),modal:(a={})=>({variant:"compact",enableSelection:a.enableSelection??!0,showRefresh:!1,showPagination:a.showPagination??!1,itemsPerPage:a.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:a.searchPlaceholder??"Search...",noPadding:!0})}])},463359,370528,a=>{"use strict";a.i(156120),a.s([],463359);var b=a.i(337241),c=a.i(156916);function d({entityType:a,basePath:d}){let e=(0,b.useRouter)(),f={jobs:"job",invoices:"invoice",estimates:"estimate",payments:"payment",contracts:"contract",appointments:"appointment",equipment:"equipment","maintenance-plans":"maintenance plan","service-agreements":"service agreement","purchase-orders":"purchase order",properties:"property",customers:"customer"}[a]||a,g=d||`/dashboard/work/${a}`,h=async(a,b)=>{try{return await b(a),c.toast.success(`${a.length} ${f}s archived successfully`),e.refresh(),!0}catch(a){return console.error(`Failed to archive ${f}s:`,a),c.toast.error(`Failed to archive ${f}s`),!1}};return{handleRowClick:a=>{e.push(`${g}/${a}`)},handleArchive:async(a,b)=>{try{return await b(a),c.toast.success(`${f} archived successfully`),e.refresh(),!0}catch(a){return console.error(`Failed to archive ${f}:`,a),c.toast.error(`Failed to archive ${f}`),!1}},handleBulkArchive:h,handleRestore:async(a,b)=>{try{return await b(a),c.toast.success(`${f} restored successfully`),e.refresh(),!0}catch(a){return console.error(`Failed to restore ${f}:`,a),c.toast.error(`Failed to restore ${f}`),!1}},handleRefresh:()=>{e.refresh(),c.toast.success("Refreshed")},createSearchFilter:a=>(b,c)=>{let d=c.toLowerCase().trim();return!d||a.some(a=>{let c=b[a];return null!=c&&String(c).toLowerCase().includes(d)})},createBulkActions:a=>{let b=[];return a.archive&&b.push({label:"Archive Selected",onClick:b=>h(b,a.archive)}),a.export&&b.push({label:"Export Selected",onClick:async b=>{try{await a.export(b),c.toast.success(`Exported ${b.length} ${f}s`)}catch(a){c.toast.error("Failed to export")}}}),a.delete&&b.push({label:"Delete Selected",onClick:async b=>{try{await a.delete(b),c.toast.success(`Deleted ${b.length} ${f}s`),e.refresh()}catch(a){c.toast.error("Failed to delete")}}}),b},entityLabel:f}}a.s(["useTableActions",()=>d],370528)},625500,a=>{"use strict";let b=(0,a.i(203431).default)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);a.s(["default",()=>b])},217547,a=>{"use strict";var b=a.i(625500);a.s(["Repeat",()=>b.default])},439243,a=>{"use strict";a.i(156120),a.s([])},716980,a=>{"use strict";let b=(0,a.i(203431).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["default",()=>b])},262452,a=>{"use strict";var b=a.i(716980);a.s(["UserCheck",()=>b.default])},498167,a=>{"use strict";var b=a.i(861467),c=a.i(565308),d=a.i(60222),e=a.i(217547),f=a.i(262452),g=a.i(145679);a.i(288007);var h=a.i(986990);a.i(445255);var i=a.i(18170),j=a.i(425809),k=a.i(700760);let l=[{id:"active",name:"Active",accentColor:"#22C55E"},{id:"pending",name:"Pending",accentColor:"#F59E0B"},{id:"paused",name:"Paused",accentColor:"#6B7280"},{id:"cancelled",name:"Cancelled",accentColor:"#EF4444"}],m=new Map(l.map(a=>[a.id,a.name])),n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function o({plans:a}){return(0,b.jsx)(j.EntityKanban,{columns:l,data:a,entityName:"plans",mapToKanbanItem:a=>({id:a.id,columnId:a.status,entity:a,plan:a}),renderCard:a=>(0,b.jsx)(p,{item:{...a,plan:a.entity}}),renderDragOverlay:a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,b.jsx)(p,{item:{...a,plan:a.entity}})}),updateEntityStatus:(a,b)=>({...a,status:b})})}function p({item:a}){let{plan:j,columnId:l}=a;return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-foreground text-sm font-semibold",children:j.planName}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:j.customer}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,b.jsx)(h.Badge,{className:(0,k.cn)("text-xs","cancelled"===l&&"bg-destructive/10 text-destructive","active"===l&&"bg-primary/10 text-primary"),variant:"active"===l?"secondary":"cancelled"===l?"destructive":"outline",children:m.get(l)??l}),(0,b.jsx)(h.Badge,{className:"text-xs",variant:"outline",children:j.frequency})]})]})}),(0,b.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.UserCheck,{className:"text-primary size-4"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:j.serviceType})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Repeat,{className:"text-primary size-4"}),(0,b.jsx)("span",{children:j.frequency})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.CalendarDays,{className:"text-primary size-4"}),(0,b.jsxs)("span",{children:["Next visit ",j.nextVisit]})]})]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-xs",children:[(0,b.jsx)("span",{children:"Monthly fee"}),(0,b.jsx)("span",{className:"text-foreground font-semibold",children:n.format(j.monthlyFee/100)})]}),(0,b.jsx)(i.Button,{asChild:!0,className:"text-primary w-full justify-between text-xs",size:"sm",variant:"ghost",children:(0,b.jsxs)(g.default,{href:`/dashboard/work/maintenance-plans/${j.id}`,children:["Manage plan",(0,b.jsx)(c.ArrowUpRight,{className:"size-3.5"})]})})]})}a.s(["MaintenancePlansKanban",()=>o])},614900,a=>{"use strict";var b=a.i(861467),c=a.i(452168),d=a.i(587969),e=a.i(187056),f=a.i(319895),g=a.i(94436),h=a.i(339632),i=a.i(145679),j=a.i(337241),k=a.i(783281),l=a.i(169021),m=(0,l.createServerReference)("401ec8be029b0a5f4cc99a3e93a7ea7f61b4352f51",l.callServer,void 0,l.findSourceMapURL,"archiveMaintenancePlan");a.i(463359);var n=a.i(954581);a.i(445255);var o=a.i(18170);a.i(956852);var p=a.i(90125),q=a.i(380340);a.i(439243);var r=a.i(159337),s=a.i(370528),t=a.i(858707),u=a.i(792268),v=a.i(563432),w=a.i(156916);let x={active:{className:"bg-success hover:bg-success text-white",label:"Active"},pending:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Pending"},paused:{className:"bg-muted text-foreground dark:bg-foreground/20 dark:text-muted-foreground",label:"Paused"},cancelled:{className:"bg-destructive text-destructive dark:bg-destructive/20 dark:text-destructive",label:"Cancelled"}};function y({plans:a,itemsPerPage:l=50,currentPage:y=1,totalCount:z}){(0,j.useRouter)();let A=(0,v.useArchiveStore)(a=>a.filters.maintenance_plans),{handleRefresh:B}=(0,s.useTableActions)({entityType:"maintenance_plans"}),{openArchiveDialog:C,ArchiveDialogComponent:D}=(0,n.useArchiveDialog)({onConfirm:async a=>{(await m(a)).success&&B()},title:"Archive Maintenance Plan?",description:"This maintenance plan will be archived and can be restored within 90 days."}),[E,F]=(0,k.useState)(new Set),{openArchiveDialog:G,ArchiveDialogComponent:H}=(0,n.useArchiveDialog)({onConfirm:async()=>{let a=0;for(let b of E)(await m(b)).success&&a++;a>0&&B()},title:`Archive ${E.size} Maintenance Plan(s)?`,description:`${E.size} maintenance plan(s) will be archived and can be restored within 90 days.`}),I=a.filter(a=>{let b=!!(a.archived_at||a.deleted_at);return"active"===A?!b:"archived"!==A||b}),J=[{key:"planName",header:"Plan Name",width:"w-40",shrink:!0,sortable:!0,render:a=>(0,b.jsx)(i.default,{className:"text-foreground text-xs leading-tight font-medium hover:underline",href:`/dashboard/work/maintenance-plans/${a.id}`,onClick:a=>a.stopPropagation(),children:a.planName})},{key:"customer",header:"Customer",width:"flex-1",sortable:!0,render:a=>(0,b.jsxs)(i.default,{className:"block min-w-0",href:`/dashboard/work/maintenance-plans/${a.id}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"text-foreground truncate text-xs leading-tight font-medium hover:underline",children:a.customer}),(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:a.serviceType})]})},{key:"frequency",header:"Frequency",width:"w-32",shrink:!0,sortable:!0,hideOnMobile:!0,render:a=>(0,b.jsx)("span",{className:"text-foreground text-xs",children:a.frequency})},{key:"nextVisit",header:"Next Visit",width:"w-32",shrink:!0,sortable:!0,hideOnMobile:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-xs tabular-nums",children:a.nextVisit})},{key:"monthlyFee",header:"Monthly Fee",width:"w-28",shrink:!0,sortable:!0,align:"right",render:a=>(0,b.jsxs)("span",{className:"font-semibold tabular-nums",children:[(0,u.formatCurrency)(a.monthlyFee),"/mo"]})},{key:"status",header:"Status",width:"w-28",shrink:!0,sortable:!0,render:a=>(0,b.jsx)(r.GenericStatusBadge,{config:x,defaultStatus:"pending",status:a.status})},{key:"actions",header:"",width:"w-10",shrink:!0,render:a=>(0,b.jsx)("div",{"data-no-row-click":!0,children:(0,b.jsxs)(p.DropdownMenu,{children:[(0,b.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(o.Button,{size:"icon",variant:"ghost",children:(0,b.jsx)(g.MoreHorizontal,{className:"size-4"})})}),(0,b.jsxs)(p.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(p.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(p.DropdownMenuSeparator,{}),(0,b.jsxs)(p.DropdownMenuItem,{children:[(0,b.jsx)(d.Calendar,{className:"mr-2 size-4"}),"Schedule Visit"]}),(0,b.jsxs)(p.DropdownMenuItem,{children:[(0,b.jsx)(f.FileText,{className:"mr-2 size-4"}),"View Contract"]}),(0,b.jsx)(p.DropdownMenuSeparator,{}),(0,b.jsxs)(p.DropdownMenuItem,{className:"text-destructive",onClick:()=>{C(plan.id)},children:[(0,b.jsx)(c.Archive,{className:"mr-2 size-4"}),"Archive Plan"]}),(0,b.jsxs)(p.DropdownMenuItem,{className:"text-destructive",children:[(0,b.jsx)(h.Trash2,{className:"mr-2 size-4"}),"Cancel Plan"]})]})]})})}],K=[{label:"Schedule Visits",icon:(0,b.jsx)(d.Calendar,{className:"h-4 w-4"}),onClick:a=>{window.location.href=`/dashboard/work/appointments/new?plans=${Array.from(a).join(",")}`}},{label:"Export",icon:(0,b.jsx)(e.Download,{className:"h-4 w-4"}),onClick:a=>{let b=new Blob([["Plan Name,Customer,Service Type,Frequency,Next Visit,Monthly Fee,Status",...maintenancePlans.filter(b=>a.has(b.id)).map(a=>[`"${a.planName}"`,`"${a.customer}"`,a.serviceType,a.frequency,a.nextVisit,(0,u.formatCurrency)(a.monthlyFee),a.status].join(","))].join("\n")],{type:"text/csv"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`maintenance-plans-export-${new Date().toISOString().split("T")[0]}.csv`,d.click(),URL.revokeObjectURL(c),w.toast.success(`Exported ${a.size} plan${a.size>1?"s":""}`)}},{label:"Archive Selected",icon:(0,b.jsx)(c.Archive,{className:"h-4 w-4"}),variant:"destructive",onClick:async a=>{F(a),G("")}},{label:"Cancel",icon:(0,b.jsx)(h.Trash2,{className:"h-4 w-4"}),onClick:a=>{w.toast.info(`Cancel functionality for ${a.size} plan${a.size>1?"s":""} coming soon`)},variant:"destructive"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FullWidthDataTable,{...t.TablePresets.fullList(),bulkActions:K,columns:J,data:I,emptyIcon:(0,b.jsx)(d.Calendar,{className:"text-muted-foreground mx-auto h-12 w-12"}),emptyMessage:"No maintenance plans found",entity:"maintenance_plans",getHighlightClass:()=>"bg-success/30 dark:bg-success/10",getItemId:a=>a.id,isArchived:a=>!!(a.archived_at||a.deleted_at),isHighlighted:a=>"active"===a.status,currentPageFromServer:y,serverPagination:!0,onRefresh:B,onRowClick:a=>window.location.href=`/dashboard/work/maintenance-plans/${a.id}`,searchFilter:(a,b)=>{let c=b.toLowerCase();return a.planName.toLowerCase().includes(c)||a.customer.toLowerCase().includes(c)||a.serviceType.toLowerCase().includes(c)||a.frequency.toLowerCase().includes(c)||a.status.toLowerCase().includes(c)},searchPlaceholder:"Search plans by name, customer, service type, frequency, or status...",showArchived:"active"!==A,showRefresh:!1,totalCount:z??I.length}),(0,b.jsx)(D,{}),(0,b.jsx)(H,{})]})}a.s(["MaintenancePlansTable",()=>y],614900)}];

//# sourceMappingURL=_52bc2928._.js.map