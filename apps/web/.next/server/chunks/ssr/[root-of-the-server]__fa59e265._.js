module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},543474,a=>{"use strict";var b=a.i(429969);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],543474)},369942,a=>{a.n(a.i(328717))},181754,a=>{a.n(a.i(60011))},77925,a=>{a.n(a.i(356769))},174010,a=>{"use strict";a.i(730154),a.s([])},150644,a=>{"use strict";a.i(730154),a.s([])},836040,a=>{"use strict";let b=(0,a.i(543474).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],836040)},416128,a=>{"use strict";a.i(730154),a.s([])},549121,a=>{"use strict";a.i(730154);var b=a.i(563914),c=a.i(369637),d=a.i(861107),e=a.i(475976),f=a.i(836326),g=a.i(726954),h=a.i(236028),i=a.i(376977),j=a.i(868553),k=a.i(36705),l=a.i(396149),m=a.i(705991),n=a.i(102193),o=a.i(293107),p=a.i(525708),q=a.i(280558),r=a.i(27632),s=a.i(523762),t=a.i(533742),u=a.i(777394),v=a.i(30104),w=a.i(588159),x=a.i(851374),y=a.i(591888),z=a.i(968073),A=a.i(925834),B=a.i(946108),C=a.i(561203),D=a.i(228811),E=a.i(950872),F=a.i(297053),G=a.i(758289),H=a.i(919187),I=a.i(463683),J=a.i(274749),K=a.i(420235),L=a.i(90965),M=a.i(468335),N=a.i(571631),O=a.i(439724),P=a.i(109483),Q=a.i(709027),R=a.i(643953),S=a.i(920224),T=a.i(776419),U=a.i(920334),V=a.i(838239),W=a.i(490199),X=a.i(38825),Y=a.i(465296),Z=a.i(409604),$=a.i(892054),_=a.i(233387),aa=a.i(438468),ab=a.i(852495);a.i(422792);var ac=a.i(299049),ad=a.i(474235),ae=a.i(359004),af=a.i(171288);a.s(["Alert",()=>c.Alert,"AlertDescription",()=>c.AlertDescription,"AlertTitle",()=>c.AlertTitle,"Badge",()=>h.Badge,"Breadcrumb",()=>i.Breadcrumb,"BreadcrumbItem",()=>i.BreadcrumbItem,"BreadcrumbLink",()=>i.BreadcrumbLink,"BreadcrumbList",()=>i.BreadcrumbList,"BreadcrumbPage",()=>i.BreadcrumbPage,"BreadcrumbSeparator",()=>i.BreadcrumbSeparator,"Button",()=>j.Button,"ButtonGroup",()=>k.ButtonGroup,"ButtonGroupText",()=>k.ButtonGroupText,"Card",()=>m.Card,"CardContent",()=>m.CardContent,"CardDescription",()=>m.CardDescription,"CardFooter",()=>m.CardFooter,"CardHeader",()=>m.CardHeader,"CardListSkeleton",()=>Q.CardListSkeleton,"CardTitle",()=>m.CardTitle,"ChartSkeleton",()=>Q.ChartSkeleton,"ComingSoonShell",()=>q.ComingSoonShell,"DashboardSkeleton",()=>Q.DashboardSkeleton,"DataTableListSkeleton",()=>Q.DataTableListSkeleton,"FormSkeleton",()=>Q.FormSkeleton,"GenericStatusBadge",()=>y.GenericStatusBadge,"Input",()=>A.Input,"KPICardSkeleton",()=>Q.KPICardSkeleton,"PageHeaderSkeleton",()=>Q.PageHeaderSkeleton,"RowActionsDropdown",()=>J.RowActionsDropdown,"Skeleton",()=>P.Skeleton,"StatsCardsSkeleton",()=>S.StatsCardsSkeleton,"TableSkeleton",()=>Q.TableSkeleton,"Textarea",()=>X.Textarea,"WorkDetailSkeleton",()=>Q.WorkDetailSkeleton,"WorkflowTimeline",()=>af.WorkflowTimeline,"buttonVariants",()=>j.buttonVariants,"cn",()=>ad.cn]),a.j(b),a.j(d),a.j(e),a.j(f),a.j(g),a.j(l),a.j(n),a.j(o),a.j(p),a.j(r),a.j(s),a.j(t),a.j(u),a.j(v),a.j(w),a.j(x),a.j(z),a.j(B),a.j(C),a.j(D),a.j(E),a.j(F),a.j(G),a.j(H),a.j(I),a.j(K),a.j(L),a.j(M),a.j(N),a.j(O),a.j(R),a.j(T),a.j(U),a.j(V),a.j(W),a.j(Y),a.j(Z),a.j($),a.j(_),a.j(aa),a.j(ab),a.j(ac),a.j(ae)},52502,a=>{"use strict";let b=(0,a.i(543474).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],52502)},465807,a=>{"use strict";let b=(0,a.i(543474).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],465807)},676001,a=>{"use strict";let b=(0,a.i(543474).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],676001)},271242,a=>{"use strict";let b=(0,a.i(543474).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],271242)},584220,429007,a=>{"use strict";a.i(730154),a.s([],584220),a.i(584220);var b=a.i(549121);a.s([],429007),a.j(b,429007)},641911,a=>{"use strict";var b=a.i(504348),c=a.i(465807),d=a.i(836040);let e=(0,a.i(543474).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var f=a.i(271242),g=a.i(52502),h=a.i(676001);a.i(692167);var i=a.i(852596),j=a.i(429969);a.i(150644);var k=a.i(236028);a.i(174010);var l=a.i(705991);a.i(416128);var m=a.i(109483);a.i(584220);var n=a.i(429007),o=a.i(136874);async function p(){let a=await (0,o.createClient)();if(!a)return(0,b.jsx)("div",{className:"p-6 text-center text-muted-foreground",children:"Loading..."});let{data:{user:j}}=await a.auth.getUser();j||(0,i.redirect)("/login");let{data:m}=await a.from("team_members").select("company_id").eq("user_id",j.id).single();if(!m)return(0,b.jsx)("div",{className:"p-6 text-center text-muted-foreground",children:"No company found"});let p=[];try{let{data:b,error:c}=await a.from("support_sessions").select(`
				id,
				admin_user_id,
				ticket_id,
				status,
				reason,
				requested_at,
				approved_at,
				ended_at,
				expires_at
			`).eq("company_id",m.company_id).order("requested_at",{ascending:!1}).limit(50);c?console.error("Error fetching support sessions:",c):b&&(p=await Promise.all(b.map(async b=>{let{data:c}=await a.from("support_session_actions").select("id, action, resource_type, resource_id, reason, created_at, before_data, after_data").eq("session_id",b.id).order("created_at",{ascending:!0});return{...b,actions:c||[]}})))}catch(a){console.error("Error fetching audit log:",a)}let q=p;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Sessions"}),(0,b.jsx)(g.Shield,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:q.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Actions Taken"}),(0,b.jsx)(e,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:q.reduce((a,b)=>a+b.actions.length,0)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total modifications"})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Last Access"}),(0,b.jsx)(d.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:q.length>0?"Recently":"Never"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:q.length>0?new Date(q[0].requested_at).toLocaleDateString():"No support access"})]})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Support Access History"}),(0,b.jsx)(l.CardDescription,{children:"Complete timeline of all support sessions and actions taken on your account"})]}),(0,b.jsx)(l.CardContent,{children:0===q.length?(0,b.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,b.jsx)("div",{className:"rounded-full bg-muted w-16 h-16 flex items-center justify-center mx-auto",children:(0,b.jsx)(g.Shield,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-medium",children:"No Support Access History"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No support team member has accessed your account yet."})]})]}):(0,b.jsx)("div",{className:"space-y-6",children:q.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.User,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:"Support Team"}),a.ticket_id&&(0,b.jsxs)(k.Badge,{variant:"outline",className:"ml-2",children:["Ticket: ",a.ticket_id]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.reason})]}),(0,b.jsxs)("div",{className:"text-right space-y-1",children:[(0,b.jsx)(k.Badge,{variant:"active"===a.status?"default":"ended"===a.status?"secondary":"outline",children:a.status}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.requested_at).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(d.Clock,{className:"h-3.5 w-3.5"}),(0,b.jsxs)("span",{children:["Started:"," ",a.approved_at?new Date(a.approved_at).toLocaleString():"Pending"]})]}),a.ended_at&&(0,b.jsx)("div",{className:"flex items-center gap-1",children:(0,b.jsxs)("span",{children:["Ended: ",new Date(a.ended_at).toLocaleString()]})})]}),a.actions.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(e,{className:"h-3.5 w-3.5"}),"Actions Taken (",a.actions.length,")"]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(n.Table,{children:[(0,b.jsx)(n.TableHeader,{children:(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableHead,{children:"Action"}),(0,b.jsx)(n.TableHead,{children:"Resource"}),(0,b.jsx)(n.TableHead,{children:"Reason"}),(0,b.jsx)(n.TableHead,{children:"Time"})]})}),(0,b.jsx)(n.TableBody,{children:a.actions.map(a=>(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableCell,{className:"font-medium",children:a.action.replace(/_/g," ")}),(0,b.jsxs)(n.TableCell,{children:[a.resource_type," -"," ",a.resource_id.slice(0,8),"..."]}),(0,b.jsx)(n.TableCell,{className:"text-sm text-muted-foreground",children:a.reason||"—"}),(0,b.jsx)(n.TableCell,{className:"text-sm",children:new Date(a.created_at).toLocaleTimeString()})]},a.id))})]})})]}),0===a.actions.length&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground rounded-md bg-muted/50 p-3",children:[(0,b.jsx)(f.Eye,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"View only - no changes made"})]})]},a.id))})})]}),(0,b.jsxs)(l.Card,{className:"border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-950/20",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2 text-orange-900 dark:text-orange-100",children:[(0,b.jsx)(c.AlertCircle,{className:"h-5 w-5"}),"About Support Access"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-2 text-sm text-orange-800 dark:text-orange-200",children:[(0,b.jsx)("p",{children:"• Support access must be approved by you before it's granted"}),(0,b.jsx)("p",{children:"• All sessions automatically expire after the approved duration"}),(0,b.jsx)("p",{children:"• Every action taken by support is logged and visible here"}),(0,b.jsx)("p",{children:"• You can end any active support session at any time"}),(0,b.jsx)("p",{children:"• Your data is never shared with anyone outside our support team"})]})]})]})}function q(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(m.Skeleton,{className:"h-32"},c))}),(0,b.jsx)(m.Skeleton,{className:"h-96"})]})}function r(){return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Support Activity"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"View all support access sessions and actions taken on your account"})]}),(0,b.jsx)(j.Suspense,{fallback:(0,b.jsx)(q,{}),children:(0,b.jsx)(p,{})})]})}a.s(["default",()=>r],641911)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fa59e265._.js.map