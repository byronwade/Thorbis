{"version":3,"sources":["../../../../../../apps/web/src/components/invoices/invoice-options-sidebar.tsx","../../../../../../apps/web/src/components/layout/app-sidebar.tsx","../../../../../../apps/web/src/components/communication/communication-sidebar.tsx","../../../../../../apps/web/src/components/communication/communication-switcher.tsx","../../../../../../apps/web/src/components/layout/nav-grouped.tsx","../../../../../../apps/web/src/hooks/use-sidebar-scroll.ts","../../../../../../apps/web/src/lib/communication/communication-reports-sidebar-config.tsx","../../../../../../apps/web/src/components/communication/communication-reports-sidebar.tsx","../../../../../../apps/web/src/components/communication/email-sidebar.tsx","../../../../../../apps/web/src/actions/data%3Aac01bd%20%3Ctext/javascript%3E","../../../../../../apps/web/src/actions/data%3A2fcdd5%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/communication/recipient-selector.tsx","../../../../../../apps/web/src/lib/stores/communication-store.ts","../../../../../../apps/web/src/lib/communication/email-sidebar-config.tsx","../../../../../../apps/web/src/actions/data%3Ad8f233%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/communication/create-folder-dialog.tsx","../../../../../../apps/web/src/lib/communication/teams-sidebar-config.tsx","../../../../../../apps/web/src/components/communication/teams-sidebar.tsx","../../../../../../apps/web/src/components/communication/text-sidebar.tsx","../../../../../../apps/web/src/lib/communication/text-sidebar-config.tsx","../../../../../../apps/web/src/components/communication/compose-type-selector.tsx","../../../../../../apps/web/src/lib/communication/unified-communication-sidebar-config.tsx","../../../../../../apps/web/src/components/communication/unified-communication-sidebar.tsx","../../../../../../apps/web/src/components/layout/nav-chat-history.tsx","../../../../../../apps/web/src/actions/data%3Ade1836%20%3Ctext/javascript%3E","../../../../../../apps/web/src/actions/data%3A8b1461%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/ai/chat-search-command.tsx","../../../../../../apps/web/src/components/layout/nav-flexible.tsx","../../../../../../apps/web/src/components/layout/nav-main.tsx","../../../../../../apps/web/src/components/pricebook/pricebook-tree-sidebar.tsx","../../../../../../apps/web/src/lib/pricebook/category-tree-client.ts","../../../../../../apps/web/src/lib/pricebook/category-tree-shared.ts","../../../../../../apps/web/src/components/reporting/reporting-sidebar-nav.tsx","../../../../../../apps/web/src/components/reporting/preset-reports-dropdown.tsx","../../../../../../apps/web/src/lib/stores/job-details-layout-store.ts","../../../../../../apps/web/src/components/work/job-details/add-widget-dropdown.tsx","../../../../../../apps/web/src/lib/layout/job-layout-presets.ts","../../../../../../apps/web/src/components/work/job-details/presets-dropdown.tsx","../../../../../../apps/web/src/components/work/job-details/use-widget-navigation.ts","../../../../../../apps/web/src/components/work/job-details/job-details-nav.tsx","../../../../../../apps/web/src/lib/utils/icon-registry.ts","../../../../../../apps/web/src/components/pricebook/pricebook-sidebar.tsx"],"sourcesContent":["/**\n * Invoice Options Sidebar - Right Sidebar\n *\n * Focused on customizing the customer-facing invoice experience.\n * Matches the design patterns of the left sidebar with cards, buttons, and visual hierarchy.\n */\n\n\"use client\";\n\nimport {\n\tCheck,\n\tChevronRight,\n\tCreditCard,\n\tDownload,\n\tEye,\n\tFileText,\n\tGlobe,\n\tMail,\n\tPalette,\n\tSettings,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n\tCollapsible,\n\tCollapsibleContent,\n\tCollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tSidebar,\n\tSidebarContent,\n\tSidebarFooter,\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarHeader,\n} from \"@/components/ui/sidebar\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { StandardFormField } from \"@/components/ui/standard-form-field\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { cn } from \"@/lib/utils\";\n\n// PDF Layout Templates\nconst PDF_LAYOUTS = [\n\t{\n\t\tid: \"modern\",\n\t\tname: \"Modern Clean\",\n\t\tdescription: \"Minimalist design with clean lines\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"professional\",\n\t\tname: \"Professional\",\n\t\tdescription: \"Traditional business invoice layout\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"contractor\",\n\t\tname: \"Contractor\",\n\t\tdescription: \"Optimized for construction/trade work\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"service\",\n\t\tname: \"Service-Based\",\n\t\tdescription: \"Best for service businesses\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"commercial\",\n\t\tname: \"Commercial\",\n\t\tdescription: \"Large commercial projects\",\n\t\ticon: FileText,\n\t},\n\t{\n\t\tid: \"detailed\",\n\t\tname: \"Detailed Breakdown\",\n\t\tdescription: \"Itemized with material/labor breakdown\",\n\t\ticon: FileText,\n\t},\n];\n\nconst CUSTOMER_VIEW_OPTIONS = [\n\t{ id: \"line-numbers\", label: \"Line Numbers\", icon: Check },\n\t{ id: \"item-codes\", label: \"Item Codes\", icon: Check },\n\t{ id: \"subtotals\", label: \"Subtotals\", icon: Check },\n\t{ id: \"tax-breakdown\", label: \"Tax Breakdown\", icon: Check },\n\t{ id: \"notes\", label: \"Notes Section\", icon: Check },\n\t{ id: \"terms\", label: \"Terms & Conditions\", icon: Check },\n];\n\nconst PAYMENT_OPTIONS = [\n\t{ id: \"online-payment\", label: \"Online Payment\", icon: CreditCard },\n\t{ id: \"payment-methods\", label: \"Payment Methods\", icon: CreditCard },\n\t{ id: \"partial-payments\", label: \"Partial Payments\", icon: CreditCard },\n\t{ id: \"payment-plan\", label: \"Payment Plan\", icon: CreditCard },\n];\n\nexport function InvoiceOptionsSidebar() {\n\tconst pathname = usePathname();\n\tconst invoiceId = pathname?.split(\"/\").pop() || \"\";\n\n\t// Design settings state\n\tconst [selectedLayout, setSelectedLayout] = useState(\"modern\");\n\tconst [primaryColor, setPrimaryColor] = useState(\"#3b82f6\");\n\tconst [logoOpacity, setLogoOpacity] = useState([80]);\n\tconst [fontSize, setFontSize] = useState(\"medium\");\n\n\t// Customer view settings\n\tconst [enabledOptions, setEnabledOptions] = useState([\n\t\t\"line-numbers\",\n\t\t\"subtotals\",\n\t\t\"tax-breakdown\",\n\t\t\"notes\",\n\t\t\"terms\",\n\t]);\n\n\t// Payment settings\n\tconst [enabledPaymentOptions, setEnabledPaymentOptions] = useState([\n\t\t\"online-payment\",\n\t\t\"payment-methods\",\n\t]);\n\n\t// Email settings\n\tconst [sendEmailOnCreate, setSendEmailOnCreate] = useState(false);\n\n\t// Portal settings\n\tconst [enablePortal, setEnablePortal] = useState(true);\n\n\t// Handlers\n\tconst handleLayoutChange = (layoutId: string) => {\n\t\tsetSelectedLayout(layoutId);\n\t\ttoast.success(`Template changed to ${layoutId}`);\n\t};\n\n\tconst toggleOption = (optionId: string) => {\n\t\tsetEnabledOptions((prev) =>\n\t\t\tprev.includes(optionId)\n\t\t\t\t? prev.filter((id) => id !== optionId)\n\t\t\t\t: [...prev, optionId],\n\t\t);\n\t};\n\n\tconst togglePaymentOption = (optionId: string) => {\n\t\tsetEnabledPaymentOptions((prev) =>\n\t\t\tprev.includes(optionId)\n\t\t\t\t? prev.filter((id) => id !== optionId)\n\t\t\t\t: [...prev, optionId],\n\t\t);\n\t};\n\n\tconst handleSave = () => {\n\t\ttoast.success(\"Customer view settings saved\");\n\t};\n\n\tconst handlePreview = () => {\n\t\ttoast.success(\"Opening customer preview...\");\n\t};\n\n\treturn (\n\t\t<Sidebar collapsible=\"offcanvas\" side=\"right\" variant=\"inset\">\n\t\t\t<SidebarHeader className=\"border-b\">\n\t\t\t\t<div className=\"flex items-center justify-between p-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className=\"text-sm font-semibold\">Customer View</h2>\n\t\t\t\t\t\t<p className=\"text-muted-foreground mt-0.5 text-xs\">\n\t\t\t\t\t\t\tCustomize what customers see\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button onClick={handlePreview} size=\"icon\" variant=\"ghost\">\n\t\t\t\t\t\t<Eye className=\"size-4\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</SidebarHeader>\n\n\t\t\t<SidebarContent className=\"gap-0\">\n\t\t\t\t{/* PDF Template */}\n\t\t\t\t<Collapsible defaultOpen>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\tPDF Template\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-2 px-2 pt-2\">\n\t\t\t\t\t\t\t\t{PDF_LAYOUTS.map((layout) => (\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"group hover:border-primary/50 hover:bg-accent/5 cursor-pointer rounded-lg border p-3 transition-all\",\n\t\t\t\t\t\t\t\t\t\t\tselectedLayout === layout.id &&\n\t\t\t\t\t\t\t\t\t\t\t\t\"border-primary bg-primary/5\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tkey={layout.id}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleLayoutChange(layout.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<layout.icon className=\"text-muted-foreground size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-none font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{layout.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{layout.description}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{selectedLayout === layout.id && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Check className=\"text-primary size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Design & Branding */}\n\t\t\t\t<Collapsible>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Palette className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\tDesign & Branding\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-3 px-2 pt-1 pb-2\">\n\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\tlabel=\"Primary Color\"\n\t\t\t\t\t\t\t\t\thtmlFor=\"invoice-options-primary-color\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"invoice-options-primary-color\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-16 cursor-pointer rounded border\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setPrimaryColor(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"color\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={primaryColor}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-background h-8 flex-1 rounded border px-2 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setPrimaryColor(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={primaryColor}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\tlabel=\"Logo Opacity\"\n\t\t\t\t\t\t\t\t\thtmlFor=\"invoice-options-logo-opacity\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\t\tid=\"invoice-options-logo-opacity\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tonValueChange={setLogoOpacity}\n\t\t\t\t\t\t\t\t\t\tstep={10}\n\t\t\t\t\t\t\t\t\t\tvalue={logoOpacity}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t{logoOpacity[0]}%\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</StandardFormField>\n\n\t\t\t\t\t\t\t\t<StandardFormField\n\t\t\t\t\t\t\t\t\tlabel=\"Font Size\"\n\t\t\t\t\t\t\t\t\thtmlFor=\"invoice-options-font-size\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Select onValueChange={setFontSize} value={fontSize}>\n\t\t\t\t\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\t\t\t\t\tid=\"invoice-options-font-size\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 text-xs\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"small\">Small</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"medium\">Medium</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t<SelectItem value=\"large\">Large</SelectItem>\n\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</StandardFormField>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Customer View Options */}\n\t\t\t\t<Collapsible>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Eye className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\tWhat Customers See\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-1 px-2 pt-2\">\n\t\t\t\t\t\t\t\t{CUSTOMER_VIEW_OPTIONS.map((option) => {\n\t\t\t\t\t\t\t\t\tconst isEnabled = enabledOptions.includes(option.id);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => toggleOption(option.id)}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{isEnabled && <Check className=\"text-primary size-3\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisEnabled ? \"font-medium\" : \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isEnabled}\n\t\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={() => toggleOption(option.id)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Payment Options */}\n\t\t\t\t<Collapsible>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<CreditCard className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\tPayment Options\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-1 px-2 pt-2\">\n\t\t\t\t\t\t\t\t{PAYMENT_OPTIONS.map((option) => {\n\t\t\t\t\t\t\t\t\tconst isEnabled = enabledPaymentOptions.includes(option.id);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\tkey={option.id}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => togglePaymentOption(option.id)}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{isEnabled && <Check className=\"text-primary size-3\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisEnabled ? \"font-medium\" : \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isEnabled}\n\t\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={() => togglePaymentOption(option.id)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Email Settings */}\n\t\t\t\t<Collapsible>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Mail className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\tEmail Settings\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-3 px-2 pt-1 pb-2\">\n\t\t\t\t\t\t\t\t<Card className=\"rounded-lg border p-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium\">Auto-send on Create</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-[10px]\">\n\t\t\t\t\t\t\t\t\t\t\t\tAutomatically email invoice to customer\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\tchecked={sendEmailOnCreate}\n\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={setSendEmailOnCreate}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Card>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Link href=\"/dashboard/settings/email-templates\">\n\t\t\t\t\t\t\t\t\t\t<Mail className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\tCustomize Email Template\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Customer Portal */}\n\t\t\t\t<Collapsible>\n\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t<SidebarGroupLabel asChild>\n\t\t\t\t\t\t\t<CollapsibleTrigger className=\"group/collapsible hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs font-medium transition-colors\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<Globe className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t\tCustomer Portal\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ChevronRight className=\"h-3.5 w-3.5 transition-transform group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t<div className=\"space-y-2 px-2 pt-2\">\n\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"group hover:border-primary/50 hover:bg-accent/5 cursor-pointer rounded-lg border p-3 transition-all\",\n\t\t\t\t\t\t\t\t\t\tenablePortal && \"border-primary bg-primary/5\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => setEnablePortal(!enablePortal)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm leading-none font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\tPortal Access\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{enablePortal ? \"Enabled\" : \"Disabled\"}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\tchecked={enablePortal}\n\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={setEnablePortal}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Card>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Link href=\"/dashboard/settings/customer-portal\">\n\t\t\t\t\t\t\t\t\t\t<Settings className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\tConfigure Portal Settings\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t</Collapsible>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Quick Actions */}\n\t\t\t\t<SidebarGroup>\n\t\t\t\t\t<SidebarGroupLabel>Quick Actions</SidebarGroupLabel>\n\t\t\t\t\t<div className=\"space-y-2 px-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\twindow.open(`/api/invoices/${invoiceId}/pdf`, \"_blank\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Download className=\"size-3\" />\n\t\t\t\t\t\t\tDownload PDF\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Link href={`/invoices/${invoiceId}/preview`}>\n\t\t\t\t\t\t\t\t<Eye className=\"size-3\" />\n\t\t\t\t\t\t\t\tPreview Customer View\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</SidebarGroup>\n\t\t\t</SidebarContent>\n\n\t\t\t<SidebarFooter className=\"border-t p-3\">\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"w-full gap-2\"\n\t\t\t\t\tonClick={handleSave}\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"default\"\n\t\t\t\t>\n\t\t\t\t\t<Settings className=\"size-4\" />\n\t\t\t\t\tSave Settings\n\t\t\t\t</Button>\n\t\t\t</SidebarFooter>\n\t\t</Sidebar>\n\t);\n}\n","\"use client\";\n\n/**\n * AppSidebar - Dynamic Navigation Component\n *\n * Performance optimizations:\n * - Uses dynamic icon imports from @/lib/icons/icon-registry\n * - Icons are code-split and loaded on demand\n * - Reduces initial bundle by ~300-900KB\n * - Only loads icons needed for current page section\n */\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { CommunicationReportsSidebar } from \"@/components/communication/communication-reports-sidebar\";\nimport { CommunicationSwitcher } from \"@/components/communication/communication-switcher\";\nimport { EmailSidebar } from \"@/components/communication/email-sidebar\";\nimport { TeamsSidebar } from \"@/components/communication/teams-sidebar\";\nimport { TextSidebar } from \"@/components/communication/text-sidebar\";\nimport { UnifiedCommunicationSidebar } from \"@/components/communication/unified-communication-sidebar\";\nimport {\n\tAiNewChatButton,\n\tNavChatHistory,\n} from \"@/components/layout/nav-chat-history\";\nimport { NavFlexible } from \"@/components/layout/nav-flexible\";\nimport { NavGrouped } from \"@/components/layout/nav-grouped\";\nimport { NavMain } from \"@/components/layout/nav-main\";\nimport { PriceBookTreeSidebar } from \"@/components/pricebook/pricebook-tree-sidebar\";\nimport { ReportingSidebarNav } from \"@/components/reporting/reporting-sidebar-nav\";\nimport {\n\tSidebar,\n\tSidebarContent,\n\tSidebarFooter,\n\tSidebarHeader,\n\tSidebarRail,\n} from \"@/components/ui/sidebar\";\nimport { JobDetailsNav } from \"@/components/work/job-details/job-details-nav\";\nimport { useSidebarScroll } from \"@/hooks/use-sidebar-scroll\";\nimport {\n\tArchive,\n\tArrowDownToLine,\n\tArrowLeft,\n\tArrowUpFromLine,\n\tBadgeCheck,\n\tBarChart,\n\tBell,\n\tBook,\n\tBookOpen,\n\tBox,\n\tBriefcase,\n\tBug,\n\tBuilding2,\n\tCalculator,\n\tCalendar,\n\tCamera,\n\tCheckCircle2,\n\tClipboardList,\n\tClock,\n\tCreditCard,\n\tDatabase,\n\tDollarSign,\n\tFileEdit,\n\tFileSignature,\n\tFileSpreadsheet,\n\tFileText,\n\tGlobe,\n\tGraduationCap,\n\tHash,\n\tHome,\n\tInbox,\n\tList,\n\tMail,\n\tMailOpen,\n\tMapPin,\n\tMegaphone,\n\tMessageSquare,\n\tPackage,\n\tPalette,\n\tPaperclip,\n\tPhone,\n\tQrCode,\n\tReceipt,\n\tRepeat,\n\tSearch,\n\tSettings,\n\tShield,\n\tShieldAlert,\n\tShieldCheck,\n\tShoppingCart,\n\tSliders,\n\tSparkles,\n\tStar,\n\tTag,\n\tTarget,\n\tTicket,\n\tTrash,\n\tTrendingUp,\n\tTrophy,\n\tUser,\n\tUserCog,\n\tUserPlus,\n\tUsers,\n\tWallet,\n\tWorkflow,\n\tWrench,\n\tX,\n\tZap,\n} from \"@/lib/utils/icon-registry\";\n\n// Navigation sections for each route\nconst navigationSections = {\n\ttoday: [\n\t\t{\n\t\t\ttitle: \"Today\",\n\t\t\turl: \"/dashboard\",\n\t\t\ticon: Home,\n\t\t},\n\t],\n\tcommunication: [\n\t\t{\n\t\t\tlabel: \"Company Communications\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"All Communications\",\n\t\t\t\t\turl: \"/dashboard/communication\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t\tbadge: \"new\",\n\t\t\t\t\tdescription: \"Company-wide communications hub\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"My Inbox\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"My Email\",\n\t\t\t\t\turl: \"/dashboard/communication/email?folder=inbox\",\n\t\t\t\t\ticon: Mail,\n\t\t\t\t\tdescription: \"Personal email inbox\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"My SMS\",\n\t\t\t\t\turl: \"/dashboard/communication/sms\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\tdescription: \"Personal text messages\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"My Calls\",\n\t\t\t\t\turl: \"/dashboard/communication/calls\",\n\t\t\t\t\ticon: Phone,\n\t\t\t\t\tdescription: \"Personal call history\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Team Collaboration\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Teams\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=general\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t\tdescription: \"Team channels and discussions\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Analytics\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Statistics\",\n\t\t\t\t\turl: \"/dashboard/communication/stats\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t\tdescription: \"Communication metrics and reports\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\n\twork: [\n\t\t{\n\t\t\tlabel: \"Work Management\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Jobs\",\n\t\t\t\t\turl: \"/dashboard/work\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Appointments\",\n\t\t\t\t\turl: \"/dashboard/work/appointments\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Team Members\",\n\t\t\t\t\turl: \"/dashboard/work/team\",\n\t\t\t\t\ticon: UserPlus,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customers\",\n\t\t\t\t\turl: \"/dashboard/customers\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financial Documents\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Invoices\",\n\t\t\t\t\turl: \"/dashboard/work/invoices\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Estimates\",\n\t\t\t\t\turl: \"/dashboard/work/estimates\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payments\",\n\t\t\t\t\turl: \"/dashboard/work/payments\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Contracts\",\n\t\t\t\t\turl: \"/dashboard/work/contracts\",\n\t\t\t\t\ticon: FileSignature,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Purchase Orders\",\n\t\t\t\t\turl: \"/dashboard/work/purchase-orders\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Service Management\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Maintenance Plans\",\n\t\t\t\t\turl: \"/dashboard/work/maintenance-plans\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service Agreements\",\n\t\t\t\t\turl: \"/dashboard/work/service-agreements\",\n\t\t\t\t\ticon: ShieldCheck,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Company Resources\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Price Book\",\n\t\t\t\t\turl: \"/dashboard/work/pricebook\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Vendors\",\n\t\t\t\t\turl: \"/dashboard/work/vendors\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Materials Inventory\",\n\t\t\t\t\turl: \"/dashboard/work/materials\",\n\t\t\t\t\ticon: Box,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Equipment & Fleet\",\n\t\t\t\t\turl: \"/dashboard/work/equipment\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tfinance: [\n\t\t{\n\t\t\tlabel: \"Overview\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Banking\",\n\t\t\t\t\turl: \"/dashboard/finance\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Cash Flow\",\n\t\t\t\t\turl: \"/dashboard/finance/cash-flow\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payments\",\n\t\t\t\t\turl: \"/dashboard/finance/payments\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Reports\",\n\t\t\t\t\turl: \"/dashboard/finance/reports\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Expenses\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Expenses\",\n\t\t\t\t\turl: \"/dashboard/finance/expenses\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Debit Cards\",\n\t\t\t\t\turl: \"/dashboard/finance/debit-cards\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Credit Cards\",\n\t\t\t\t\turl: \"/dashboard/finance/credit-cards\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Bookkeeping\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Bookkeeping\",\n\t\t\t\t\turl: \"/dashboard/finance/bookkeeping\",\n\t\t\t\t\ticon: Book,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Bank Reconciliation\",\n\t\t\t\t\turl: \"/dashboard/finance/bank-reconciliation\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Journal Entries\",\n\t\t\t\t\turl: \"/dashboard/finance/journal-entries\",\n\t\t\t\t\ticon: FileEdit,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Accounting\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Accounting\",\n\t\t\t\t\turl: \"/dashboard/finance/accounting\",\n\t\t\t\t\ticon: Calculator,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Chart of Accounts\",\n\t\t\t\t\turl: \"/dashboard/finance/chart-of-accounts\",\n\t\t\t\t\ticon: List,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"General Ledger\",\n\t\t\t\t\turl: \"/dashboard/finance/general-ledger\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Accounts Receivable\",\n\t\t\t\t\turl: \"/dashboard/finance/accounts-receivable\",\n\t\t\t\t\ticon: ArrowDownToLine,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Accounts Payable\",\n\t\t\t\t\turl: \"/dashboard/finance/accounts-payable\",\n\t\t\t\t\ticon: ArrowUpFromLine,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"QuickBooks\",\n\t\t\t\t\turl: \"/dashboard/finance/quickbooks\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Payroll & Taxes\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payroll\",\n\t\t\t\t\turl: \"/dashboard/finance/payroll\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Taxes\",\n\t\t\t\t\turl: \"/dashboard/finance/tax\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financing\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Business Financing\",\n\t\t\t\t\turl: \"/dashboard/finance/business-financing\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Consumer Financing\",\n\t\t\t\t\turl: \"/dashboard/finance/consumer-financing\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Planning\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Budget\",\n\t\t\t\t\turl: \"/dashboard/finance/budget\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\treporting: [\n\t\t{\n\t\t\tlabel: \"Sections\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\turl: \"/dashboard/reporting\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Executive Dashboard\",\n\t\t\t\t\turl: \"/dashboard/reporting/executive\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Insights\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai\",\n\t\t\t\t\ticon: Sparkles,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Communication\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Finance\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Operations\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Team Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/team\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Custom Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/custom\",\n\t\t\t\t\ticon: FileEdit,\n\t\t\t\t\tbadge: \"Soon\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"AI & Intelligence\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Performance Metrics\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/performance\",\n\t\t\t\t\ticon: Sparkles,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Conversation Analytics\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/conversations\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Sentiment Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/sentiment\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Response Quality\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/quality\",\n\t\t\t\t\ticon: BadgeCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Training Data Insights\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/training\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Cost Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/costs\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Automation Success Rate\",\n\t\t\t\t\turl: \"/dashboard/reporting/ai/automation\",\n\t\t\t\t\ticon: Zap,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Communication Analytics\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Phone Call Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/calls\",\n\t\t\t\t\ticon: Phone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Call Duration & Volume\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/call-metrics\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Call Recordings\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/call-recordings\",\n\t\t\t\t\ticon: Archive,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Text Message Analytics\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/sms\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Email Campaigns\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/email\",\n\t\t\t\t\ticon: Mail,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Email Open & Click Rates\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/email-metrics\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Support Ticket Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/tickets\",\n\t\t\t\t\ticon: Ticket,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Response Time Metrics\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/response-time\",\n\t\t\t\t\ticon: Clock,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Satisfaction\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/satisfaction\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Channel Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/communication/channels\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financial Reports\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Profit & Loss\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/profit-loss\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Revenue Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/revenue\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Expense Breakdown\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/expenses\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Cash Flow Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/cash-flow\",\n\t\t\t\t\ticon: ArrowUpFromLine,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Invoice Aging\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/invoice-aging\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payment Analytics\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/payments\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Tax Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/tax\",\n\t\t\t\t\ticon: FileSpreadsheet,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Budget vs Actual\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/budget\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Job Profitability\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/job-profitability\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Lifetime Value\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/ltv\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Accounts Receivable\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/ar\",\n\t\t\t\t\ticon: ArrowDownToLine,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Accounts Payable\",\n\t\t\t\t\turl: \"/dashboard/reporting/finance/ap\",\n\t\t\t\t\ticon: ArrowUpFromLine,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Operations & Jobs\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Job Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/jobs\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service Type Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/service-types\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Completion Rates\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/completion\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Schedule Efficiency\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/schedule\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Dispatch Analytics\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/dispatch\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Route Optimization\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/routes\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Equipment Utilization\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/equipment\",\n\t\t\t\t\ticon: Box,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Materials Usage\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/materials\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Inventory Turnover\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/inventory\",\n\t\t\t\t\ticon: Archive,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Warranty Claims\",\n\t\t\t\t\turl: \"/dashboard/reporting/operations/warranty\",\n\t\t\t\t\ticon: ShieldCheck,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Team Performance\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Technician Leaderboard\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/leaderboard\",\n\t\t\t\t\ticon: Trophy,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Individual Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/individual\",\n\t\t\t\t\ticon: User,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Team Productivity\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/productivity\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Revenue Per Technician\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/revenue\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Jobs Completed\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/jobs-completed\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Ratings\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/ratings\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Time Tracking\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/time-tracking\",\n\t\t\t\t\ticon: Clock,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Attendance & Availability\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/attendance\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Training Completion\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/training\",\n\t\t\t\t\ticon: GraduationCap,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Certifications\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/certifications\",\n\t\t\t\t\ticon: BadgeCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Commission Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/commission\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Bonus Tracking\",\n\t\t\t\t\turl: \"/dashboard/reporting/team/bonus\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Customer Analytics\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Acquisition\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/acquisition\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Retention Rates\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/retention\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Churn Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/churn\",\n\t\t\t\t\ticon: ArrowDownToLine,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Segments\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/segments\",\n\t\t\t\t\ticon: List,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service History\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/service-history\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Repeat Business\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/repeat\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Referral Sources\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/referrals\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Geography\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/geography\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Demographics\",\n\t\t\t\t\turl: \"/dashboard/reporting/customers/demographics\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Marketing & Growth\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Campaign Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/campaigns\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Generation\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/leads\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Conversion\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/conversion\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"ROI Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/roi\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Website Analytics\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/website\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Social Media Metrics\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/social\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Review Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/reviews\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Ad Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/ads\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"SEO Rankings\",\n\t\t\t\t\turl: \"/dashboard/reporting/marketing/seo\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Scheduling & Dispatch\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Schedule Utilization\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/utilization\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"First-Time Fix Rate\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/first-time-fix\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Callback Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/callbacks\",\n\t\t\t\t\ticon: Phone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Travel Time Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/travel-time\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Same-Day Bookings\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/same-day\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Appointment Types\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/appointment-types\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"No-Show Rate\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/no-shows\",\n\t\t\t\t\ticon: X,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Rescheduling Trends\",\n\t\t\t\t\turl: \"/dashboard/reporting/schedule/rescheduling\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Maintenance & Agreements\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Active Agreements\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/active\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Renewal Rates\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/renewals\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service Plan Revenue\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/revenue\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Maintenance Schedule\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/schedule\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Preventive Maintenance\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/preventive\",\n\t\t\t\t\ticon: Shield,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Agreement Profitability\",\n\t\t\t\t\turl: \"/dashboard/reporting/maintenance/profitability\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Inventory & Materials\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Stock Levels\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/stock\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Material Costs\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/costs\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Reorder Trends\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/reorder\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Supplier Performance\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/suppliers\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Part Usage\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/usage\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Dead Stock Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/inventory/dead-stock\",\n\t\t\t\t\ticon: Trash,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Compliance & Safety\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Licensing Status\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/licensing\",\n\t\t\t\t\ticon: BadgeCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Insurance Coverage\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/insurance\",\n\t\t\t\t\ticon: Shield,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Certification Tracking\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/certifications\",\n\t\t\t\t\ticon: GraduationCap,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Safety Incidents\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/safety\",\n\t\t\t\t\ticon: ShieldAlert,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"OSHA Compliance\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/osha\",\n\t\t\t\t\ticon: ShieldCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Audit Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/compliance/audits\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Advanced Analytics\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Predictive Insights\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/predictive\",\n\t\t\t\t\ticon: Sparkles,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Trend Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/trends\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Seasonality Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/seasonality\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Forecasting\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/forecasting\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Benchmark Comparisons\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/benchmarks\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"What-If Analysis\",\n\t\t\t\t\turl: \"/dashboard/reporting/analytics/what-if\",\n\t\t\t\t\ticon: Calculator,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Export & Sharing\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Scheduled Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/export/scheduled\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Report Templates\",\n\t\t\t\t\turl: \"/dashboard/reporting/export/templates\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Data Export\",\n\t\t\t\t\turl: \"/dashboard/reporting/export/data\",\n\t\t\t\t\ticon: ArrowDownToLine,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Share Reports\",\n\t\t\t\t\turl: \"/dashboard/reporting/export/share\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Report History\",\n\t\t\t\t\turl: \"/dashboard/reporting/export/history\",\n\t\t\t\t\ticon: Archive,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tmarketing: [\n\t\t{\n\t\t\tlabel: \"Overview\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Marketing Dashboard\",\n\t\t\t\t\turl: \"/dashboard/marketing\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Campaign Performance\",\n\t\t\t\t\turl: \"/dashboard/marketing/performance\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Analytics\",\n\t\t\t\t\turl: \"/dashboard/marketing/analytics\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Lead Sources\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"All Leads\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Thumbtack\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/thumbtack\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Angi (Angie's List)\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/angi\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Google Local Services\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/google-local\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Yelp\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/yelp\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"HomeAdvisor\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/homeadvisor\",\n\t\t\t\t\ticon: Home,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Website Leads\",\n\t\t\t\t\turl: \"/dashboard/marketing/leads/website\",\n\t\t\t\t\ticon: Globe,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Paid Advertising\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Google Ads\",\n\t\t\t\t\turl: \"/dashboard/marketing/ads/google\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Campaigns\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/google/campaigns\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Performance Max\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/google/performance-max\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Search Ads\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/google/search\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Local Services Ads\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/google/local-services\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Analytics & Reports\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/google/analytics\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Facebook & Instagram Ads\",\n\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook\",\n\t\t\t\t\ticon: Camera,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Campaigns\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook/campaigns\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Ad Sets\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook/ad-sets\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Creative Library\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook/creative\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Audience Targeting\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook/audiences\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Performance\",\n\t\t\t\t\t\t\turl: \"/dashboard/marketing/ads/facebook/performance\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Nextdoor Ads\",\n\t\t\t\t\turl: \"/dashboard/marketing/ads/nextdoor\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Bing Ads\",\n\t\t\t\t\turl: \"/dashboard/marketing/ads/bing\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Organic Marketing\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Google Business Profile\",\n\t\t\t\t\turl: \"/dashboard/marketing/organic/google-business\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"SEO Management\",\n\t\t\t\t\turl: \"/dashboard/marketing/organic/seo\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Content Marketing\",\n\t\t\t\t\turl: \"/dashboard/marketing/organic/content\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Blog Posts\",\n\t\t\t\t\turl: \"/dashboard/marketing/organic/blog\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Social Media\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Social Hub\",\n\t\t\t\t\turl: \"/dashboard/marketing/social\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Facebook\",\n\t\t\t\t\turl: \"/dashboard/marketing/social/facebook\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Instagram\",\n\t\t\t\t\turl: \"/dashboard/marketing/social/instagram\",\n\t\t\t\t\ticon: Camera,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"LinkedIn\",\n\t\t\t\t\turl: \"/dashboard/marketing/social/linkedin\",\n\t\t\t\t\ticon: Briefcase,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"X (Twitter)\",\n\t\t\t\t\turl: \"/dashboard/marketing/social/twitter\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Post Scheduler\",\n\t\t\t\t\turl: \"/dashboard/marketing/social/scheduler\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Review Management\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"All Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Google Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/google\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Yelp Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/yelp\",\n\t\t\t\t\ticon: Star,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Facebook Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/facebook\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Angi Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/angi\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Thumbtack Reviews\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/thumbtack\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Review Requests\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/requests\",\n\t\t\t\t\ticon: Mail,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Review Responses\",\n\t\t\t\t\turl: \"/dashboard/marketing/reviews/responses\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Email Marketing\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Email Campaigns\",\n\t\t\t\t\turl: \"/dashboard/marketing/email/campaigns\",\n\t\t\t\t\ticon: Mail,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Newsletters\",\n\t\t\t\t\turl: \"/dashboard/marketing/email/newsletters\",\n\t\t\t\t\ticon: MailOpen,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Email Templates\",\n\t\t\t\t\turl: \"/dashboard/marketing/email/templates\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Subscriber Lists\",\n\t\t\t\t\turl: \"/dashboard/marketing/email/lists\",\n\t\t\t\t\ticon: List,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Automation Workflows\",\n\t\t\t\t\turl: \"/dashboard/marketing/email/automation\",\n\t\t\t\t\ticon: Zap,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Customer Outreach\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Outreach Dashboard\",\n\t\t\t\t\turl: \"/dashboard/marketing/outreach\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Seasonal Campaigns\",\n\t\t\t\t\turl: \"/dashboard/marketing/outreach/seasonal\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Referral Program\",\n\t\t\t\t\turl: \"/dashboard/marketing/outreach/referrals\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Loyalty Program\",\n\t\t\t\t\turl: \"/dashboard/marketing/outreach/loyalty\",\n\t\t\t\t\ticon: Trophy,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Promotions & Offers\",\n\t\t\t\t\turl: \"/dashboard/marketing/outreach/promotions\",\n\t\t\t\t\ticon: Tag,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Lead Management\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Pipeline\",\n\t\t\t\t\turl: \"/dashboard/marketing/lead-pipeline\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Scoring\",\n\t\t\t\t\turl: \"/dashboard/marketing/lead-scoring\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Assignment\",\n\t\t\t\t\turl: \"/dashboard/marketing/lead-assignment\",\n\t\t\t\t\ticon: UserPlus,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Nurturing\",\n\t\t\t\t\turl: \"/dashboard/marketing/lead-nurturing\",\n\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Marketing Tools\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Landing Pages\",\n\t\t\t\t\turl: \"/dashboard/marketing/tools/landing-pages\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"QR Codes\",\n\t\t\t\t\turl: \"/dashboard/marketing/tools/qr-codes\",\n\t\t\t\t\ticon: QrCode,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Marketing Materials\",\n\t\t\t\t\turl: \"/dashboard/marketing/tools/materials\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Brand Assets\",\n\t\t\t\t\turl: \"/dashboard/marketing/tools/brand-assets\",\n\t\t\t\t\ticon: Palette,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tshop: [\n\t\t{\n\t\t\tlabel: \"Categories\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"All Products\",\n\t\t\t\t\turl: \"/dashboard/shop\",\n\t\t\t\t\ticon: ShoppingCart,\n\t\t\t\t\tbadge: \"8\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payment Hardware\",\n\t\t\t\t\turl: \"/dashboard/shop?category=hardware\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\tbadge: \"3\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Uniforms & Apparel\",\n\t\t\t\t\turl: \"/dashboard/shop?category=apparel\",\n\t\t\t\t\ticon: User,\n\t\t\t\t\tbadge: \"1\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Tools & Equipment\",\n\t\t\t\t\turl: \"/dashboard/shop?category=tools\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t\tbadge: \"1\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Office Supplies\",\n\t\t\t\t\turl: \"/dashboard/shop?category=supplies\",\n\t\t\t\t\ticon: Paperclip,\n\t\t\t\t\tbadge: \"1\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Marketing Materials\",\n\t\t\t\t\turl: \"/dashboard/shop?category=marketing\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t\tbadge: \"2\",\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tautomation: [\n\t\t{\n\t\t\ttitle: \"Automation Overview\",\n\t\t\turl: \"/dashboard/automation\",\n\t\t\ticon: Zap,\n\t\t},\n\t\t{\n\t\t\ttitle: \"Workflows\",\n\t\t\turl: \"/dashboard/automation/workflows\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Rules\",\n\t\t\turl: \"/dashboard/automation/rules\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Templates\",\n\t\t\turl: \"/dashboard/automation/templates\",\n\t\t},\n\t],\n\tai: [\n\t\t{\n\t\t\tlabel: undefined, // No group label - flat list under New Chat button\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Automation\",\n\t\t\t\t\turl: \"/dashboard/ai/automation\",\n\t\t\t\t\ticon: Zap,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Calls\",\n\t\t\t\t\turl: \"/dashboard/ai/calls\",\n\t\t\t\t\ticon: Phone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"AI Texts\",\n\t\t\t\t\turl: \"/dashboard/ai/texts\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Activity Log\",\n\t\t\t\t\turl: \"/dashboard/ai/activity\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tsettings: [\n\t\t{\n\t\t\tlabel: undefined,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\turl: \"/dashboard/settings\",\n\t\t\t\t\ticon: Settings,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t...(process.env.NODE_ENV === \"development\"\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"Development\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: \"Developer Settings\",\n\t\t\t\t\t\t\t\turl: \"/dashboard/settings/development\",\n\t\t\t\t\t\t\t\ticon: Bug,\n\t\t\t\t\t\t\t\thighlight: \"yellow\" as const,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: []),\n\t\t{\n\t\t\tlabel: \"Account\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Personal Info\",\n\t\t\t\t\turl: \"/dashboard/settings/profile/personal\",\n\t\t\t\t\ticon: User,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Security\",\n\t\t\t\t\turl: \"/dashboard/settings/profile/security\",\n\t\t\t\t\ticon: Shield,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Notifications\",\n\t\t\t\t\turl: \"/dashboard/settings/profile/notifications\",\n\t\t\t\t\ticon: Bell,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Preferences\",\n\t\t\t\t\turl: \"/dashboard/settings/profile/preferences\",\n\t\t\t\t\ticon: Sliders,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Company\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Company Profile\",\n\t\t\t\t\turl: \"/dashboard/settings/company\",\n\t\t\t\t\ticon: Building2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\turl: \"/dashboard/settings/billing\",\n\t\t\t\t\ticon: CreditCard,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Communication\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Communications\",\n\t\t\t\t\turl: \"/dashboard/settings/communications\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Email\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications/email\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"SMS & Text\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications/sms\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Phone & Voice\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications/phone\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Notifications\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications/notifications\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Templates\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/communications/templates\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Teams & Channels\",\n\t\t\t\t\turl: \"/dashboard/settings/teams-channels\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Work\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Jobs\",\n\t\t\t\t\turl: \"/dashboard/settings/jobs\",\n\t\t\t\t\ticon: Briefcase,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Intake\",\n\t\t\t\t\turl: \"/dashboard/settings/customer-intake\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Booking\",\n\t\t\t\t\turl: \"/dashboard/settings/booking\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Checklists\",\n\t\t\t\t\turl: \"/dashboard/settings/checklists\",\n\t\t\t\t\ticon: CheckCircle2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Job Fields\",\n\t\t\t\t\turl: \"/dashboard/settings/job-fields\",\n\t\t\t\t\ticon: List,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Schedule\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Schedule Settings\",\n\t\t\t\t\turl: \"/dashboard/settings/schedule\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Calendar Settings\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule/calendar\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Availability\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule/availability\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Service Areas\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule/service-areas\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Dispatch Rules\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule/dispatch\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Team Scheduling\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/schedule/team\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Customers\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Settings\",\n\t\t\t\t\turl: \"/dashboard/settings/customers\",\n\t\t\t\t\ticon: UserCog,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Preferences\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers/preferences\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Loyalty & Rewards\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers/loyalty\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Notifications\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers/notifications\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Privacy & Consent\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers/privacy\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Custom Fields\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/customers/custom-fields\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer Portal\",\n\t\t\t\t\turl: \"/dashboard/settings/customer-portal\",\n\t\t\t\t\ticon: Globe,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Tags\",\n\t\t\t\t\turl: \"/dashboard/settings/tags\",\n\t\t\t\t\ticon: Tag,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Finances\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Invoices\",\n\t\t\t\t\turl: \"/dashboard/settings/invoices\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Estimates\",\n\t\t\t\t\turl: \"/dashboard/settings/estimates\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Price Book\",\n\t\t\t\t\turl: \"/dashboard/settings/pricebook\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service Plans\",\n\t\t\t\t\turl: \"/dashboard/settings/service-plans\",\n\t\t\t\t\ticon: Repeat,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Payroll\",\n\t\t\t\t\turl: \"/dashboard/settings/payroll\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Commission\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/commission\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Materials\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/materials\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Callbacks\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/callbacks\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Bonuses\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/bonuses\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overtime\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/overtime\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Deductions\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/deductions\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Schedule\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/payroll/schedule\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Finance\",\n\t\t\t\t\turl: \"/dashboard/settings/finance\",\n\t\t\t\t\ticon: Wallet,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Bank Accounts\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/bank-accounts\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Virtual Buckets\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/virtual-buckets\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Consumer Financing\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/consumer-financing\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Business Financing\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/business-financing\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Bookkeeping\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/bookkeeping\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Accounting\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/accounting\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Debit Cards\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/debit-cards\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Gas Cards\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/gas-cards\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Gift Cards\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/finance/gift-cards\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Reporting\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Reporting Settings\",\n\t\t\t\t\turl: \"/dashboard/settings/reporting\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Report Templates\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting/templates\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Scheduled Reports\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting/scheduled\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Distribution\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting/distribution\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Metrics & KPIs\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting/metrics\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Dashboards\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/reporting/dashboards\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Marketing\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Marketing Center\",\n\t\t\t\t\turl: \"/dashboard/settings/marketing\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Lead Sources\",\n\t\t\t\t\turl: \"/dashboard/settings/lead-sources\",\n\t\t\t\t\ticon: Target,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Automation\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Automation Settings\",\n\t\t\t\t\turl: \"/dashboard/settings/automation\",\n\t\t\t\t\ticon: Workflow,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Overview\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Workflows\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation/workflows\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Triggers & Actions\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation/triggers\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"AI Automation\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation/ai\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Conditional Logic\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation/logic\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Data Filters\",\n\t\t\t\t\t\t\turl: \"/dashboard/settings/automation/filters\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"System\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Data Import/Export\",\n\t\t\t\t\turl: \"/dashboard/settings/data-import-export\",\n\t\t\t\t\ticon: Database,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Integrations\",\n\t\t\t\t\turl: \"/dashboard/settings/integrations\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"QuickBooks\",\n\t\t\t\t\turl: \"/dashboard/settings/quickbooks\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tpricebook: \"custom\", // Use custom tree sidebar\n\ttools: [\n\t\t{\n\t\t\tlabel: \"Marketing & Social\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Google Business Profile\",\n\t\t\t\t\turl: \"/tools/marketing/google-business\",\n\t\t\t\t\ticon: Search,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Local Services Ads\",\n\t\t\t\t\turl: \"/tools/marketing/local-services\",\n\t\t\t\t\ticon: BadgeCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Social Media Setup\",\n\t\t\t\t\turl: \"/tools/marketing/social-media\",\n\t\t\t\t\ticon: Megaphone,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Facebook Business\",\n\t\t\t\t\turl: \"/tools/marketing/facebook\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Instagram for Business\",\n\t\t\t\t\turl: \"/tools/marketing/instagram\",\n\t\t\t\t\ticon: Camera,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"X (Twitter) Business\",\n\t\t\t\t\turl: \"/tools/marketing/twitter\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"LinkedIn Company Page\",\n\t\t\t\t\turl: \"/tools/marketing/linkedin\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Business Setup\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Business Registration\",\n\t\t\t\t\turl: \"/tools/business/registration\",\n\t\t\t\t\ticon: Briefcase,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Licensing & Permits\",\n\t\t\t\t\turl: \"/tools/business/licensing\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Insurance Providers\",\n\t\t\t\t\turl: \"/tools/business/insurance\",\n\t\t\t\t\ticon: Shield,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Banking & Payroll\",\n\t\t\t\t\turl: \"/tools/business/banking\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Legal Resources\",\n\t\t\t\t\turl: \"/tools/business/legal\",\n\t\t\t\t\ticon: ShieldCheck,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financing & Growth\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Consumer Financing\",\n\t\t\t\t\turl: \"/tools/financing/consumer\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Business Loans\",\n\t\t\t\t\turl: \"/tools/financing/business-loans\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Equipment Financing\",\n\t\t\t\t\turl: \"/tools/financing/equipment\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Credit Card Processing\",\n\t\t\t\t\turl: \"/tools/financing/credit-card\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Industry Networks\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Nexstar Network\",\n\t\t\t\t\turl: \"/tools/networks/nexstar\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Service Nation Alliance\",\n\t\t\t\t\turl: \"/tools/networks/service-nation\",\n\t\t\t\t\ticon: Users,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"ACCA (HVAC)\",\n\t\t\t\t\turl: \"/tools/networks/acca\",\n\t\t\t\t\ticon: Zap,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"PHCC (Plumbing)\",\n\t\t\t\t\turl: \"/tools/networks/phcc\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"NECA (Electrical)\",\n\t\t\t\t\turl: \"/tools/networks/neca\",\n\t\t\t\t\ticon: Zap,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Training & Certification\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Trade Certifications\",\n\t\t\t\t\turl: \"/tools/training/certifications\",\n\t\t\t\t\ticon: BadgeCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"OSHA Training\",\n\t\t\t\t\turl: \"/tools/training/osha\",\n\t\t\t\t\ticon: ShieldCheck,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"EPA Certification\",\n\t\t\t\t\turl: \"/tools/training/epa\",\n\t\t\t\t\ticon: Shield,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Business Management\",\n\t\t\t\t\turl: \"/tools/training/business\",\n\t\t\t\t\ticon: GraduationCap,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Resources & Tools\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Industry News\",\n\t\t\t\t\turl: \"/tools/resources/news\",\n\t\t\t\t\ticon: BookOpen,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Calculators & Estimators\",\n\t\t\t\t\turl: \"/tools/resources/calculators\",\n\t\t\t\t\ticon: Wrench,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Vendor Directories\",\n\t\t\t\t\turl: \"/tools/resources/vendors\",\n\t\t\t\t\ticon: Package,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Emergency Services\",\n\t\t\t\t\turl: \"/tools/resources/emergency\",\n\t\t\t\t\ticon: Phone,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tjobDetails: [\n\t\t{\n\t\t\tlabel: undefined,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Back to Jobs\",\n\t\t\t\t\turl: \"/dashboard/work\",\n\t\t\t\t\ticon: ArrowLeft,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Overview\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Job Details\",\n\t\t\t\t\turl: \"#job-details\",\n\t\t\t\t\ticon: ClipboardList,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Timeline\",\n\t\t\t\t\turl: \"#timeline\",\n\t\t\t\t\ticon: Calendar,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Related\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Property\",\n\t\t\t\t\turl: \"#property\",\n\t\t\t\t\ticon: MapPin,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Customer\",\n\t\t\t\t\turl: \"#customer\",\n\t\t\t\t\ticon: User,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financials\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Job Costing\",\n\t\t\t\t\turl: \"#costing\",\n\t\t\t\t\ticon: DollarSign,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Profitability\",\n\t\t\t\t\turl: \"#profitability\",\n\t\t\t\t\ticon: BarChart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Invoices\",\n\t\t\t\t\turl: \"#invoices\",\n\t\t\t\t\ticon: Receipt,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Estimates\",\n\t\t\t\t\turl: \"#estimates\",\n\t\t\t\t\ticon: FileText,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Activity\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Communications\",\n\t\t\t\t\turl: \"#communications\",\n\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Photo Gallery\",\n\t\t\t\t\turl: \"#photo-gallery\",\n\t\t\t\t\ticon: Camera,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Documentation\",\n\t\t\t\t\turl: \"#documents\",\n\t\t\t\t\ticon: Paperclip,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n};\n\n// Regex patterns for route matching\n// Match only job detail pages with numeric/UUID IDs, not page names like \"invoices\", \"schedule\", etc.\n// This prevents the job details sidebar from showing on other work pages\nconst JOB_DETAILS_PATTERN =\n\t/^\\/dashboard\\/work\\/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;\n\n// Match communication detail pages (e.g., /dashboard/communication/123)\n// Function to determine current section based on pathname\nfunction getCurrentSection(pathname: string): keyof typeof navigationSections {\n\tif (pathname === \"/dashboard\") {\n\t\treturn \"today\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/communication\")) {\n\t\treturn \"communication\";\n\t}\n\t// Check for price book page before general work check\n\tif (pathname.startsWith(\"/dashboard/work/pricebook\")) {\n\t\treturn \"pricebook\";\n\t}\n\t// Check for job details page pattern: /dashboard/work/[id]\n\tif (pathname.match(JOB_DETAILS_PATTERN)) {\n\t\treturn \"jobDetails\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/work\")) {\n\t\treturn \"work\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/customers\")) {\n\t\treturn \"work\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/finance\")) {\n\t\treturn \"finance\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/reporting\")) {\n\t\treturn \"reporting\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/marketing\")) {\n\t\treturn \"marketing\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/shop\")) {\n\t\treturn \"shop\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/automation\")) {\n\t\treturn \"automation\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/ai\")) {\n\t\treturn \"ai\";\n\t}\n\tif (pathname.startsWith(\"/dashboard/settings\")) {\n\t\treturn \"settings\";\n\t}\n\tif (pathname.startsWith(\"/tools\")) {\n\t\treturn \"tools\";\n\t}\n\n\treturn \"today\";\n}\n\ntype AppSidebarProps = React.ComponentProps<typeof Sidebar> & {\n\tpathname?: string;\n};\n\nexport function AppSidebar({\n\tpathname: externalPathname,\n\t...props\n}: AppSidebarProps) {\n\tconst clientPathname = usePathname();\n\tconst pathname = clientPathname || externalPathname || \"/dashboard\";\n\tconst scrollRef = useSidebarScroll();\n\n\tconst currentSection = getCurrentSection(pathname);\n\tconst navItems = navigationSections[currentSection];\n\n\tconst isAISection = currentSection === \"ai\";\n\tconst isReportingSection = currentSection === \"reporting\";\n\tconst isJobDetailsSection = currentSection === \"jobDetails\";\n\t// Removed isCommunicationDetail - detail pages should use EmailSidebar like main pages\n\n\t// Use grouped navigation for settings, ai, work, communication, finance, marketing, shop, tools, pricebook, and jobDetails sections\n\tconst useGroupedNav =\n\t\tcurrentSection === \"settings\" ||\n\t\tcurrentSection === \"ai\" ||\n\t\tcurrentSection === \"work\" ||\n\t\tcurrentSection === \"communication\" ||\n\t\tcurrentSection === \"finance\" ||\n\t\tcurrentSection === \"marketing\" ||\n\t\tcurrentSection === \"shop\" ||\n\t\tcurrentSection === \"tools\" ||\n\t\tcurrentSection === \"pricebook\" ||\n\t\tcurrentSection === \"jobDetails\";\n\n\t// Check if page has custom sidebar config\n\t// Custom sidebar config is no longer used - removed with layout refactor\n\tconst hasCustomConfig = false;\n\tconst sidebarConfig: any = undefined;\n\n\t// Check if using custom sidebar component\n\tconst useCustomSidebar = navItems === \"custom\";\n\n\t// Check for communication-specific sidebars\n\t// Main communication page (unified hub with email + SMS + calls combined)\n\tconst isUnifiedCommunicationPage =\n\t\tpathname === \"/dashboard/communication\" ||\n\t\tpathname === \"/dashboard/communication/inbox\" ||\n\t\tpathname === \"/dashboard/communication/sent\" ||\n\t\tpathname === \"/dashboard/communication/archive\" ||\n\t\tpathname === \"/dashboard/communication/trash\" ||\n\t\tpathname === \"/dashboard/communication/snoozed\" ||\n\t\tpathname === \"/dashboard/communication/spam\" ||\n\t\tpathname === \"/dashboard/communication/drafts\";\n\t// Stats page uses reports sidebar\n\tconst isCommunicationReportsPage =\n\t\tpathname === \"/dashboard/communication/stats\";\n\t// Email page is at /dashboard/communication/email (with query params for folder filtering)\n\tconst isEmailPage = pathname?.startsWith(\"/dashboard/communication/email\");\n\tconst isSmsPage = pathname?.startsWith(\"/dashboard/communication/sms\");\n\tconst isTeamsPage = pathname?.startsWith(\"/dashboard/communication/teams\");\n\n\tif (isUnifiedCommunicationPage) {\n\t\treturn <UnifiedCommunicationSidebar {...props} />;\n\t}\n\tif (isCommunicationReportsPage) {\n\t\treturn <CommunicationReportsSidebar {...props} />;\n\t}\n\tif (isEmailPage) {\n\t\treturn <EmailSidebar {...props} />;\n\t}\n\tif (isSmsPage) {\n\t\treturn <TextSidebar {...props} />;\n\t}\n\tif (isTeamsPage) {\n\t\treturn <TeamsSidebar {...props} />;\n\t}\n\n\t// For pricebook, return tree sidebar\n\tif (useCustomSidebar && currentSection === \"pricebook\") {\n\t\treturn <PriceBookTreeSidebar {...props} />;\n\t}\n\n\treturn (\n\t\t<Sidebar collapsible=\"offcanvas\" variant=\"inset\" {...props}>\n\t\t\t{currentSection === \"communication\" && (\n\t\t\t\t<div className=\"px-3 pt-2 pb-1\">\n\t\t\t\t\t<CommunicationSwitcher />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<SidebarContent ref={scrollRef}>\n\t\t\t\t{isReportingSection ? (\n\t\t\t\t\t// Use custom collapsible navigation for reporting\n\t\t\t\t\t<ReportingSidebarNav />\n\t\t\t\t) : isJobDetailsSection ? (\n\t\t\t\t\t// Use dynamic widget navigation for job details (uses NavGrouped internally)\n\t\t\t\t\t<JobDetailsNav />\n\t\t\t\t) : hasCustomConfig ? (\n\t\t\t\t\t// Use custom page configuration from layout\n\t\t\t\t\t<NavFlexible\n\t\t\t\t\t\tconfig={sidebarConfig}\n\t\t\t\t\t\tgroups={sidebarConfig?.groups}\n\t\t\t\t\t\titems={sidebarConfig?.items}\n\t\t\t\t\t/>\n\t\t\t\t) : useGroupedNav ? (\n\t\t\t\t\t// Use default grouped navigation\n\t\t\t\t\t<>\n\t\t\t\t\t\t{/* New Chat button for AI section - above nav items */}\n\t\t\t\t\t\t{isAISection && <AiNewChatButton />}\n\t\t\t\t\t\t<NavGrouped groups={navItems as any} pathname={pathname} />\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t// Use default main navigation\n\t\t\t\t\t<NavMain items={navItems as any} pathname={pathname} />\n\t\t\t\t)}\n\n\t\t\t\t{/* Chat History for AI section */}\n\t\t\t\t{isAISection && !hasCustomConfig && <NavChatHistory />}\n\t\t\t</SidebarContent>\n\n\t\t\t<SidebarFooter>\n\t\t\t\t<div className=\"group border-border from-primary/5 via-primary/10 to-primary/5 hover:border-primary/30 relative flex flex-col gap-2 overflow-hidden rounded-lg border bg-gradient-to-br p-4 transition-all hover:shadow-md\">\n\t\t\t\t\t<Link className=\"absolute inset-0 z-0\" href=\"/changelog\" />\n\t\t\t\t\t<div className=\"relative z-10 flex items-center gap-2\">\n\t\t\t\t\t\t<div className=\"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-md\">\n\t\t\t\t\t\t\t<Sparkles className=\"text-primary h-4 w-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t<span className=\"text-sm font-semibold\">What's New</span>\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\tVersion 2.1.0\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"text-muted-foreground relative z-10 text-xs leading-relaxed\">\n\t\t\t\t\t\tCheck out the latest features, improvements, and bug fixes.\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"via-primary/5 absolute inset-0 bg-gradient-to-r from-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n\t\t\t\t</div>\n\t\t\t</SidebarFooter>\n\t\t\t<SidebarRail />\n\t\t</Sidebar>\n\t);\n}\n","\"use client\";\n\nimport { ChevronRight, type LucideIcon, Plus, Trash2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname, useSearchParams } from \"next/navigation\";\nimport type { ComponentProps } from \"react\";\nimport { CommunicationSwitcher } from \"@/components/communication/communication-switcher\";\nimport { NavGrouped } from \"@/components/layout/nav-grouped\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tCollapsible,\n\tCollapsibleContent,\n\tCollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n\tSidebar,\n\tSidebarContent,\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarHeader,\n\tSidebarMenu,\n\tSidebarMenuBadge,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n\tSidebarRail,\n} from \"@/components/ui/sidebar\";\nimport { useSidebarScroll } from \"@/hooks/use-sidebar-scroll\";\n\n/**\n * Navigation group configuration for communication sidebar\n */\nexport type CommunicationNavGroup = {\n\tlabel: string;\n\titems: Array<{\n\t\ttitle: string;\n\t\turl: string;\n\t\ticon: LucideIcon;\n\t\tbadge?: number | string;\n\t}>;\n};\n\n/**\n * Additional section configuration (e.g., Labels, Tags, etc.)\n */\nexport type CommunicationAdditionalSection = {\n\tlabel: string;\n\titems: Array<{\n\t\ttitle: string;\n\t\ticon?: LucideIcon;\n\t\tonClick?: () => void;\n\t\turl?: string;\n\t\tbadge?: number | string;\n\t\tfolderId?: string; // For delete functionality\n\t\tonDelete?: (folderId: string) => void; // Delete handler\n\t}>;\n\tonAddClick?: () => void;\n\taddButton?: React.ReactNode; // Custom add button component (e.g., CreateFolderDialog)\n\tscrollable?: boolean;\n\tscrollHeight?: string;\n\tdefaultOpen?: boolean; // Whether the section should be open by default\n};\n\n/**\n * Primary action button configuration\n */\nexport type CommunicationPrimaryAction = {\n\tlabel: string;\n\ticon: LucideIcon;\n\tonClick?: () => void;\n\thref?: string;\n\tvariant?:\n\t\t| \"default\"\n\t\t| \"outline\"\n\t\t| \"ghost\"\n\t\t| \"secondary\"\n\t\t| \"destructive\"\n\t\t| \"link\";\n};\n\n/**\n * Communication sidebar configuration\n */\nexport type CommunicationSidebarConfig = {\n\t/** Navigation groups to display */\n\tnavGroups: CommunicationNavGroup[];\n\t/** Primary action button (e.g., \"New email\", \"New text\") */\n\tprimaryAction?: CommunicationPrimaryAction;\n\t/** Additional sections (e.g., Labels, Tags) */\n\tadditionalSections?: CommunicationAdditionalSection[];\n};\n\nexport type CommunicationSidebarProps = ComponentProps<typeof Sidebar> & {\n\tconfig: CommunicationSidebarConfig;\n};\n\n/**\n * CommunicationSidebar - Reusable sidebar layout for all communication pages\n *\n * Provides a consistent layout structure with:\n * - Communication switcher at the top\n * - Primary action button\n * - Navigation groups\n * - Optional additional sections (labels, tags, etc.)\n *\n * @example\n * ```tsx\n * <CommunicationSidebar\n *   config={{\n *     navGroups: [\n *       {\n *         label: \"Core\",\n *         items: [\n *           { title: \"Inbox\", url: \"/email\", icon: Inbox, badge: 42 }\n *         ]\n *       }\n *     ],\n *     primaryAction: {\n *       label: \"New email\",\n *       icon: Plus,\n *       onClick: () => handleNewEmail()\n *     }\n *   }}\n * />\n * ```\n */\nexport function CommunicationSidebar({\n\tconfig,\n\t...props\n}: CommunicationSidebarProps) {\n\tconst pathname = usePathname();\n\tconst searchParams = useSearchParams();\n\tconst scrollRef = useSidebarScroll();\n\tconst { navGroups, primaryAction, additionalSections } = config;\n\n\t// Helper to check if URL matches current pathname + searchParams\n\tconst isUrlActive = (url: string): boolean => {\n\t\tconst urlObj = new URL(url, \"http://localhost\");\n\t\tconst urlPathname = urlObj.pathname;\n\t\tconst urlSearchParams = urlObj.searchParams;\n\n\t\t// Check pathname match\n\t\tif (pathname !== urlPathname) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If URL has query params, check if they match\n\t\tif (urlSearchParams.toString()) {\n\t\t\tfor (const [key, value] of urlSearchParams.entries()) {\n\t\t\t\tif (searchParams.get(key) !== value) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\treturn (\n\t\t<Sidebar collapsible=\"offcanvas\" variant=\"inset\" {...props}>\n\t\t\t<SidebarHeader className=\"gap-3 px-3 pt-4 md:pt-0 pb-2\">\n\t\t\t\t<CommunicationSwitcher />\n\t\t\t\t{primaryAction && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"w-full h-11 md:h-9 font-medium text-base md:text-sm\"\n\t\t\t\t\t\tvariant={primaryAction.variant || \"default\"}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={primaryAction.onClick}\n\t\t\t\t\t\tasChild={!!primaryAction.href}\n\t\t\t\t\t>\n\t\t\t\t\t\t{primaryAction.href ? (\n\t\t\t\t\t\t\t<Link href={primaryAction.href}>\n\t\t\t\t\t\t\t\t<primaryAction.icon className=\"size-5 md:size-4\" />\n\t\t\t\t\t\t\t\t{primaryAction.label}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<primaryAction.icon className=\"size-5 md:size-4\" />\n\t\t\t\t\t\t\t\t{primaryAction.label}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</SidebarHeader>\n\n\t\t\t<SidebarContent ref={scrollRef}>\n\t\t\t\t{/* Navigation Groups */}\n\t\t\t\t<NavGrouped\n\t\t\t\t\tgroups={navGroups}\n\t\t\t\t\tpathname={pathname ?? undefined}\n\t\t\t\t\tsearchParams={searchParams}\n\t\t\t\t/>\n\n\t\t\t\t{/* Additional Sections (Labels, Tags, etc.) */}\n\t\t\t\t{additionalSections?.map((section, index) => (\n\t\t\t\t\t<Collapsible\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tdefaultOpen={section.defaultOpen ?? true}\n\t\t\t\t\t\tclassName=\"group/collapsible\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SidebarGroup>\n\t\t\t\t\t\t\t<CollapsibleTrigger asChild>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between px-2 cursor-pointer hover:bg-sidebar-accent/50 rounded-md transition-colors\">\n\t\t\t\t\t\t\t\t\t<SidebarGroupLabel className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<ChevronRight className=\"size-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t\t\t\t{section.label}\n\t\t\t\t\t\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t\t\t\t\t\t{section.addButton ||\n\t\t\t\t\t\t\t\t\t\t(section.onAddClick && (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\tsection.onAddClick?.();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t\t<SidebarMenu>\n\t\t\t\t\t\t\t\t\t{section.scrollable ? (\n\t\t\t\t\t\t\t\t\t\t<ScrollArea\n\t\t\t\t\t\t\t\t\t\t\tclassName={section.scrollHeight || \"h-[200px] w-full\"}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{section.items.map((item, itemIndex) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuItem key={itemIndex}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group/item flex items-center w-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.url ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton asChild className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link href={item.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<item.icon className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typeof item.badge === \"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.badge.toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={item.onClick}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype={item.onClick ? \"button\" : undefined}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon className=\"size-4\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && item.badge > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typeof item.badge === \"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.badge.toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.folderId && item.onDelete && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 opacity-0 group-hover/item:opacity-100 transition-opacity ml-auto\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to delete \"${item.title}\"?`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.onDelete?.(item.folderId!);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete folder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-3.5 w-3.5 text-destructive\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\tsection.items.map((item, itemIndex) => (\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuItem key={itemIndex}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"group/item flex items-center w-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.url ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton asChild className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link href={item.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon className=\"size-4\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && item.badge > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typeof item.badge === \"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.badge.toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={item.onClick}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype={item.onClick ? \"button\" : undefined}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon className=\"size-4\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-auto text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.folderId && item.onDelete && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 opacity-0 group-hover/item:opacity-100 transition-opacity ml-auto\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to delete \"${item.title}\"?`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.onDelete?.(item.folderId!);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete folder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-3.5 w-3.5 text-destructive\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</SidebarMenu>\n\t\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t\t</SidebarGroup>\n\t\t\t\t\t</Collapsible>\n\t\t\t\t))}\n\t\t\t</SidebarContent>\n\t\t\t<SidebarRail />\n\t\t</Sidebar>\n\t);\n}\n","\"use client\";\n\nimport {\n\tCheck,\n\tChevronDown,\n\tLayoutDashboard,\n\tMail,\n\tMessageSquare,\n\tUsers,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\n\ntype Channel = {\n\tname: string;\n\turl: string;\n\ticon: React.ElementType;\n};\n\nexport function CommunicationSwitcher() {\n\tconst pathname = usePathname();\n\n\tconst channels: Channel[] = [\n\t\t{\n\t\t\tname: \"Dashboard\",\n\t\t\turl: \"/dashboard/communication\",\n\t\t\ticon: LayoutDashboard,\n\t\t},\n\t\t{\n\t\t\tname: \"Email\",\n\t\t\turl: \"/dashboard/communication/email?folder=inbox\",\n\t\t\ticon: Mail,\n\t\t},\n\t\t{\n\t\t\tname: \"SMS\",\n\t\t\turl: \"/dashboard/communication/sms\",\n\t\t\ticon: MessageSquare,\n\t\t},\n\t\t{\n\t\t\tname: \"Teams\",\n\t\t\turl: \"/dashboard/communication/teams?channel=general\",\n\t\t\ticon: Users,\n\t\t},\n\t];\n\n\tconst getIsActive = (url: string) => {\n\t\tif (url === \"/dashboard/communication\") {\n\t\t\treturn pathname === \"/dashboard/communication\";\n\t\t}\n\t\tconst basePath = url.split(\"?\")[0];\n\t\treturn pathname?.startsWith(basePath) ?? false;\n\t};\n\n\tconst activeChannel = channels.find((c) => getIsActive(c.url)) || channels[0];\n\tconst ActiveIcon = activeChannel.icon;\n\n\treturn (\n\t\t<DropdownMenu>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"w-full justify-between h-8 px-2.5 rounded-md\",\n\t\t\t\t\t\t\"border border-sidebar-border\",\n\t\t\t\t\t\t\"bg-sidebar-accent/30 hover:bg-sidebar-accent/50\",\n\t\t\t\t\t\t\"text-sidebar-foreground\",\n\t\t\t\t\t\t\"font-medium text-sm\",\n\t\t\t\t\t\t\"transition-colors\",\n\t\t\t\t\t\t\"group\",\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<ActiveIcon className=\"size-4 text-sidebar-foreground/70\" />\n\t\t\t\t\t\t<span className=\"truncate\">{activeChannel.name}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChevronDown className=\"size-3.5 text-sidebar-foreground/50 transition-transform duration-200 group-data-[state=open]:rotate-180\" />\n\t\t\t\t</Button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent\n\t\t\t\tclassName=\"w-[200px] p-1\"\n\t\t\t\talign=\"start\"\n\t\t\t\tside=\"bottom\"\n\t\t\t\tsideOffset={4}\n\t\t\t>\n\t\t\t\t{/* Dashboard */}\n\t\t\t\t<DropdownMenuItem asChild className=\"p-0\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref={channels[0].url}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex items-center gap-2.5 px-2 py-1.5 rounded-sm cursor-pointer\",\n\t\t\t\t\t\t\t\"text-sm transition-colors\",\n\t\t\t\t\t\t\tgetIsActive(channels[0].url)\n\t\t\t\t\t\t\t\t? \"bg-accent font-medium\"\n\t\t\t\t\t\t\t\t: \"hover:bg-muted/80\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<LayoutDashboard className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t<span className=\"flex-1\">Dashboard</span>\n\t\t\t\t\t\t{getIsActive(channels[0].url) && (\n\t\t\t\t\t\t\t<Check className=\"size-3.5 text-foreground/70\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Link>\n\t\t\t\t</DropdownMenuItem>\n\n\t\t\t\t<DropdownMenuSeparator className=\"my-1\" />\n\n\t\t\t\t{/* Channels */}\n\t\t\t\t<div className=\"space-y-0.5\">\n\t\t\t\t\t{channels.slice(1).map((channel) => {\n\t\t\t\t\t\tconst isActive = getIsActive(channel.url);\n\t\t\t\t\t\tconst Icon = channel.icon;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<DropdownMenuItem key={channel.name} asChild className=\"p-0\">\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref={channel.url}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"flex items-center gap-2.5 px-2 py-1.5 rounded-sm cursor-pointer\",\n\t\t\t\t\t\t\t\t\t\t\"text-sm transition-colors\",\n\t\t\t\t\t\t\t\t\t\tisActive ? \"bg-accent font-medium\" : \"hover:bg-muted/80\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"flex-1\">{channel.name}</span>\n\t\t\t\t\t\t\t\t\t{isActive && (\n\t\t\t\t\t\t\t\t\t\t<Check className=\"size-3.5 text-foreground/70\" />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n","import type { LucideIcon } from \"lucide-react\";\nimport Link from \"next/link\";\nimport {\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuBadge,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n\tSidebarMenuSub,\n\tSidebarMenuSubButton,\n\tSidebarMenuSubItem,\n} from \"@/components/ui/sidebar\";\n\ntype NavItem = {\n\ttitle: string;\n\turl: string;\n\ticon?: LucideIcon;\n\thighlight?: \"yellow\";\n\tbadge?: number | string;\n\tonClick?: () => void;\n\titems?: {\n\t\ttitle: string;\n\t\turl: string;\n\t}[];\n};\n\ntype NavGroup = {\n\tlabel?: string;\n\titems: NavItem[];\n};\n\nexport function NavGrouped({\n\tgroups,\n\tpathname = \"/dashboard\",\n\tsearchParams,\n\tclassName,\n}: {\n\tgroups: NavGroup[];\n\tpathname?: string;\n\tsearchParams?: URLSearchParams;\n\tclassName?: string;\n}) {\n\tconst safePathname = pathname || \"/dashboard\";\n\n\t// Guard against undefined or null groups\n\tif (!Array.isArray(groups)) {\n\t\treturn null;\n\t}\n\n\t// Known work subpaths that should NOT mark Jobs (/dashboard/work) as active\n\tconst workSubpaths = [\n\t\t\"/team\",\n\t\t\"/invoices\",\n\t\t\"/estimates\",\n\t\t\"/contracts\",\n\t\t\"/appointments\",\n\t\t\"/payments\",\n\t\t\"/purchase-orders\",\n\t\t\"/maintenance-plans\",\n\t\t\"/service-agreements\",\n\t\t\"/materials\",\n\t\t\"/equipment\",\n\t\t\"/pricebook\",\n\t\t\"/schedule\",\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t{groups.map((group, groupIndex) => {\n\t\t\t\t// Skip groups without items array\n\t\t\t\tif (!Array.isArray(group?.items)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<SidebarGroup\n\t\t\t\t\t\tkey={`${group.label || \"group\"}-${groupIndex}`}\n\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t>\n\t\t\t\t\t\t{group.label && (\n\t\t\t\t\t\t\t<SidebarGroupLabel>{group.label}</SidebarGroupLabel>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<SidebarMenu>\n\t\t\t\t\t\t\t{group.items.map((item) => {\n\t\t\t\t\t\t\t\t// Extract pathname and query params from item.url\n\t\t\t\t\t\t\t\tconst itemUrl = new URL(item.url, \"http://localhost\");\n\t\t\t\t\t\t\t\tconst itemPathname = itemUrl.pathname;\n\t\t\t\t\t\t\t\tconst itemSearchParams = itemUrl.searchParams;\n\n\t\t\t\t\t\t\t\t// Check if pathname matches\n\t\t\t\t\t\t\t\tconst pathnameMatches = safePathname === itemPathname;\n\n\t\t\t\t\t\t\t\t// Check if query params match (if item has query params)\n\t\t\t\t\t\t\t\tlet queryParamsMatch = true;\n\t\t\t\t\t\t\t\tif (itemSearchParams.toString() && searchParams) {\n\t\t\t\t\t\t\t\t\tfor (const [key, value] of itemSearchParams.entries()) {\n\t\t\t\t\t\t\t\t\t\tif (searchParams.get(key) !== value) {\n\t\t\t\t\t\t\t\t\t\t\tqueryParamsMatch = false;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (itemSearchParams.toString() && !searchParams) {\n\t\t\t\t\t\t\t\t\t// Item has query params but current page doesn't\n\t\t\t\t\t\t\t\t\tqueryParamsMatch = false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Check if current path matches this item or its detail pages\n\t\t\t\t\t\t\t\tconst isExactMatch = pathnameMatches && queryParamsMatch;\n\n\t\t\t\t\t\t\t\t// Special handling for Jobs (/dashboard/work) to exclude known work subpaths\n\t\t\t\t\t\t\t\tlet isDetailPage = safePathname.startsWith(`${item.url}/`);\n\t\t\t\t\t\t\t\tif (item.url === \"/dashboard/work\" && isDetailPage) {\n\t\t\t\t\t\t\t\t\t// Check if pathname matches any known work subpath\n\t\t\t\t\t\t\t\t\tconst pathAfterWork = safePathname.replace(\n\t\t\t\t\t\t\t\t\t\t\"/dashboard/work\",\n\t\t\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tconst isKnownSubpath = workSubpaths.some((subpath) =>\n\t\t\t\t\t\t\t\t\t\tpathAfterWork.startsWith(subpath),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (isKnownSubpath) {\n\t\t\t\t\t\t\t\t\t\tisDetailPage = false; // Don't mark Jobs as active for known subpaths\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst hasActiveSubItem = item.items?.some(\n\t\t\t\t\t\t\t\t\t(subItem) => safePathname === subItem.url,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst isActive =\n\t\t\t\t\t\t\t\t\tisExactMatch || isDetailPage || hasActiveSubItem;\n\n\t\t\t\t\t\t\t\t// If item has sub-items, render parent + children (always open, no chevron)\n\t\t\t\t\t\t\t\tif (item.items && item.items.length > 0) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<SidebarMenuItem key={item.title}>\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t\t\tisActive={isActive && safePathname === item.url}\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip={item.title}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Link href={item.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSub>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.items.map((subItem) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst isSubActive =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsafePathname === subItem.url ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsafePathname.startsWith(`${subItem.url}/`);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubItem key={subItem.title}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisActive={isSubActive}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link href={subItem.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{subItem.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSub>\n\t\t\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Regular menu item without sub-items\n\t\t\t\t\t\t\t\tconst isAnchorLink = item.url.startsWith(\"#\");\n\t\t\t\t\t\t\t\tconst highlightClass =\n\t\t\t\t\t\t\t\t\titem.highlight === \"yellow\"\n\t\t\t\t\t\t\t\t\t\t? \"ring-2 ring-yellow-500/50 hover:ring-yellow-500/70 dark:ring-yellow-500/50 dark:hover:ring-yellow-500/70\"\n\t\t\t\t\t\t\t\t\t\t: \"\";\n\n\t\t\t\t\t\t\t\t// If onClick is provided, use button instead of Link\n\t\t\t\t\t\t\t\tif (item.onClick) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<SidebarMenuItem key={item.title}>\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={highlightClass}\n\t\t\t\t\t\t\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={item.onClick}\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip={item.title}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{typeof item.badge === \"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.badge.toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<SidebarMenuItem key={item.title}>\n\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t\tclassName={highlightClass}\n\t\t\t\t\t\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\t\t\t\t\t\ttooltip={item.title}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{isAnchorLink ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={item.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Link href={item.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t\t{item.badge !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t\t\t{typeof item.badge === \"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t? item.badge.toLocaleString()\n\t\t\t\t\t\t\t\t\t\t\t\t\t: item.badge}\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuBadge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SidebarMenu>\n\t\t\t\t\t</SidebarGroup>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n}\n","\"use client\";\n\n/**\n * useSidebarScroll - Preserve sidebar scroll position across navigation\n *\n * Automatically saves and restores sidebar scroll position when navigating\n * between pages, providing a better UX by maintaining scroll context.\n *\n * Features:\n * - Saves scroll position before navigation\n * - Restores scroll position on mount\n * - Uses sessionStorage (persists during session)\n * - Debounced scroll saves (performance)\n * - Per-pathname scroll positions\n *\n * Usage:\n * ```tsx\n * function AppSidebar() {\n *   const scrollRef = useSidebarScroll();\n *   return (\n *     <SidebarContent ref={scrollRef}>\n *       ...\n *     </SidebarContent>\n *   );\n * }\n * ```\n */\n\nimport { usePathname } from \"next/navigation\";\nimport { useEffect, useRef } from \"react\";\n\nconst STORAGE_KEY = \"sidebar-scroll-positions\";\nconst DEBOUNCE_MS = 150;\n\n/**\n * Hook to preserve sidebar scroll position across navigation\n *\n * @returns Ref to attach to scrollable sidebar element\n */\nexport function useSidebarScroll<T extends HTMLElement = HTMLDivElement>() {\n\tconst scrollRef = useRef<T>(null);\n\tconst pathname = usePathname();\n\tconst scrollTimeoutRef = useRef<NodeJS.Timeout>();\n\n\t// Restore scroll position on mount/pathname change\n\tuseEffect(() => {\n\t\tconst element = scrollRef.current;\n\t\tif (!element || !pathname) return;\n\n\t\t// Small delay to ensure DOM is ready\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\ttry {\n\t\t\t\tconst stored = sessionStorage.getItem(STORAGE_KEY);\n\t\t\t\tif (stored) {\n\t\t\t\t\tconst positions = JSON.parse(stored) as Record<string, number>;\n\t\t\t\t\tconst savedPosition = positions[pathname];\n\n\t\t\t\t\tif (savedPosition !== undefined) {\n\t\t\t\t\t\telement.scrollTop = savedPosition;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to restore sidebar scroll position:\", error);\n\t\t\t}\n\t\t}, 50);\n\n\t\treturn () => clearTimeout(timeoutId);\n\t}, [pathname]);\n\n\t// Save scroll position on scroll (debounced)\n\tuseEffect(() => {\n\t\tconst element = scrollRef.current;\n\t\tif (!element || !pathname) return;\n\n\t\tconst handleScroll = () => {\n\t\t\t// Clear existing timeout\n\t\t\tif (scrollTimeoutRef.current) {\n\t\t\t\tclearTimeout(scrollTimeoutRef.current);\n\t\t\t}\n\n\t\t\t// Debounce scroll saves\n\t\t\tscrollTimeoutRef.current = setTimeout(() => {\n\t\t\t\ttry {\n\t\t\t\t\tconst stored = sessionStorage.getItem(STORAGE_KEY);\n\t\t\t\t\tconst positions = stored ? JSON.parse(stored) : {};\n\n\t\t\t\t\tpositions[pathname] = element.scrollTop;\n\n\t\t\t\t\tsessionStorage.setItem(STORAGE_KEY, JSON.stringify(positions));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Failed to save sidebar scroll position:\", error);\n\t\t\t\t}\n\t\t\t}, DEBOUNCE_MS);\n\t\t};\n\n\t\telement.addEventListener(\"scroll\", handleScroll, { passive: true });\n\n\t\treturn () => {\n\t\t\telement.removeEventListener(\"scroll\", handleScroll);\n\t\t\tif (scrollTimeoutRef.current) {\n\t\t\t\tclearTimeout(scrollTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t}, [pathname]);\n\n\t// Save scroll position before unmount\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tconst element = scrollRef.current;\n\t\t\tif (!element || !pathname) return;\n\n\t\t\ttry {\n\t\t\t\tconst stored = sessionStorage.getItem(STORAGE_KEY);\n\t\t\t\tconst positions = stored ? JSON.parse(stored) : {};\n\n\t\t\t\tpositions[pathname] = element.scrollTop;\n\n\t\t\t\tsessionStorage.setItem(STORAGE_KEY, JSON.stringify(positions));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Failed to save sidebar scroll position on unmount:\",\n\t\t\t\t\terror,\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t}, [pathname]);\n\n\treturn scrollRef;\n}\n","import {\n\tArchive,\n\tCreditCard,\n\tFile,\n\tHelpCircle,\n\tInbox,\n\tInfo,\n\tSend,\n\tStar,\n\tTrendingUp,\n} from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\n/**\n * Get communication sidebar configuration for the main communication hub\n * Matches the email sidebar structure with MY INBOX and COMPANY INBOX sections\n */\nexport function getCommunicationReportsSidebarConfig(): CommunicationSidebarConfig {\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"MY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=inbox\",\n\t\t\t\t\t\ticon: Inbox,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Drafts\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=drafts\",\n\t\t\t\t\t\ticon: File,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Starred\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=starred\",\n\t\t\t\t\t\ticon: Star,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"COMPANY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=support\",\n\t\t\t\t\t\ticon: HelpCircle,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=sales\",\n\t\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=billing\",\n\t\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=general\",\n\t\t\t\t\t\ticon: Info,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: undefined,\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: [],\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true,\n\t\t\t},\n\t\t],\n\t};\n}\n","\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { CommunicationSidebar } from \"@/components/communication/communication-sidebar\";\nimport { getCommunicationReportsSidebarConfig } from \"@/lib/communication/communication-reports-sidebar-config\";\n\n/**\n * CommunicationReportsSidebar - Sidebar for communication statistics and reports\n *\n * Displays different report types users can view:\n * - Overview reports (Dashboard, Activity Summary)\n * - Channel Analytics (Email, SMS, Calls)\n * - Performance Metrics (Response Times, Team Performance, Trends)\n * - Distribution reports (Channel Distribution, Time Series)\n */\nexport function CommunicationReportsSidebar(\n\tprops: ComponentProps<typeof CommunicationSidebar>,\n) {\n\tconst config = getCommunicationReportsSidebarConfig();\n\n\treturn <CommunicationSidebar config={config} {...props} />;\n}\n","\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { getEmailFolderCountsAction } from \"@/actions/email-actions\";\nimport {\n\tdeleteEmailFolderAction,\n\tgetEmailFoldersAction,\n} from \"@/actions/email-folders\";\nimport { CommunicationSidebar } from \"@/components/communication/communication-sidebar\";\nimport { RecipientSelector } from \"@/components/communication/recipient-selector\";\nimport type { Sidebar } from \"@/components/ui/sidebar\";\nimport { getEmailSidebarConfig } from \"@/lib/communication/email-sidebar-config\";\n\n/**\n * EmailSidebar - Email communication sidebar\n *\n * Uses the shared CommunicationSidebar component with email-specific configuration.\n * This ensures consistent layout and behavior across all communication pages.\n */\nexport function EmailSidebar(props: ComponentProps<typeof Sidebar>) {\n\tconst [config, setConfig] = useState(() => getEmailSidebarConfig());\n\n\t// Fetch folder counts and custom folders - memoized to prevent recreating on every render\n\tconst fetchData = useCallback(async () => {\n\t\ttry {\n\t\t\tconst [countsResult, foldersResult] = await Promise.all([\n\t\t\t\tgetEmailFolderCountsAction(),\n\t\t\t\tgetEmailFoldersAction(),\n\t\t\t]);\n\n\t\t\tif (countsResult.success && countsResult.counts) {\n\t\t\t\t// Merge custom folder counts with system folder counts\n\t\t\t\tconst allCounts = { ...countsResult.counts };\n\n\t\t\t\t// Add custom folder counts\n\t\t\t\tif (foldersResult.success && foldersResult.folders) {\n\t\t\t\t\tfoldersResult.folders.forEach((folder) => {\n\t\t\t\t\t\t// Count emails with this folder's slug in tags\n\t\t\t\t\t\t// This will be calculated by the counts action, but we can add folder metadata\n\t\t\t\t\t\tallCounts[folder.slug] = allCounts[folder.slug] || 0;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Ensure all counts are numbers (not undefined)\n\t\t\t\tconst normalizedCounts = {\n\t\t\t\t\tinbox: allCounts.inbox ?? 0,\n\t\t\t\t\tdrafts: allCounts.drafts ?? 0,\n\t\t\t\t\tsent: allCounts.sent ?? 0,\n\t\t\t\t\tarchive: allCounts.archive ?? 0,\n\t\t\t\t\tsnoozed: allCounts.snoozed ?? 0,\n\t\t\t\t\tspam: allCounts.spam ?? 0,\n\t\t\t\t\ttrash: allCounts.trash ?? 0,\n\t\t\t\t\t...allCounts,\n\t\t\t\t};\n\n\t\t\t\tconst config = getEmailSidebarConfig(\n\t\t\t\t\tnormalizedCounts,\n\t\t\t\t\tfoldersResult.folders,\n\t\t\t\t);\n\n\t\t\t\t// Add delete handlers to folder items\n\t\t\t\tif (config.additionalSections?.[0]?.items) {\n\t\t\t\t\tconfig.additionalSections[0].items =\n\t\t\t\t\t\tconfig.additionalSections[0].items.map((item) => ({\n\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\tonDelete: async (folderId: string) => {\n\t\t\t\t\t\t\t\tconst result = await deleteEmailFolderAction({ id: folderId });\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\ttoast.success(\"Folder deleted\");\n\t\t\t\t\t\t\t\t\t// Refresh folder list\n\t\t\t\t\t\t\t\t\tfetchData();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttoast.error(\"Failed to delete folder\", {\n\t\t\t\t\t\t\t\t\t\tdescription: result.error || \"Unknown error\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tsetConfig(config);\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t\" Failed to fetch email folder counts:\",\n\t\t\t\t\tcountsResult.error,\n\t\t\t\t);\n\t\t\t\t// Set config with zero counts on error\n\t\t\t\tsetConfig(\n\t\t\t\t\tgetEmailSidebarConfig(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinbox: 0,\n\t\t\t\t\t\t\tdrafts: 0,\n\t\t\t\t\t\t\tsent: 0,\n\t\t\t\t\t\t\tarchive: 0,\n\t\t\t\t\t\t\tsnoozed: 0,\n\t\t\t\t\t\t\tspam: 0,\n\t\t\t\t\t\t\ttrash: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfoldersResult.folders,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch email folder data:\", error);\n\t\t}\n\t}, []);\n\n\t// Fetch folder data on mount and periodically\n\tuseEffect(() => {\n\t\tfetchData();\n\t\tconst interval = setInterval(fetchData, 30000); // Refresh every 30 seconds\n\n\t\t// Listen for folder creation events\n\t\tconst handleFolderCreated = () => {\n\t\t\tfetchData();\n\t\t};\n\t\twindow.addEventListener(\"folder-created\", handleFolderCreated);\n\n\t\t// Listen for email read/unread events to refresh counts (debounced)\n\t\tconst handleEmailRead = () => {\n\t\t\t// Debounce to avoid too many refreshes\n\t\t\tsetTimeout(() => fetchData(), 1000);\n\t\t};\n\t\twindow.addEventListener(\"email-read\", handleEmailRead);\n\t\twindow.addEventListener(\"email-unread\", handleEmailRead);\n\n\t\t// Listen for email action events to refresh counts IMMEDIATELY (no debounce)\n\t\tconst handleEmailAction = () => {\n\t\t\tfetchData();\n\t\t};\n\t\twindow.addEventListener(\"email-archived\", handleEmailAction);\n\t\twindow.addEventListener(\"email-starred-toggled\", handleEmailAction);\n\t\twindow.addEventListener(\"email-spam-toggled\", handleEmailAction);\n\t\twindow.addEventListener(\"email-snoozed\", handleEmailAction);\n\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t\twindow.removeEventListener(\"folder-created\", handleFolderCreated);\n\t\t\twindow.removeEventListener(\"email-read\", handleEmailRead);\n\t\t\twindow.removeEventListener(\"email-unread\", handleEmailRead);\n\t\t\twindow.removeEventListener(\"email-archived\", handleEmailAction);\n\t\t\twindow.removeEventListener(\"email-starred-toggled\", handleEmailAction);\n\t\t\twindow.removeEventListener(\"email-spam-toggled\", handleEmailAction);\n\t\t\twindow.removeEventListener(\"email-snoozed\", handleEmailAction);\n\t\t};\n\t}, [fetchData]);\n\n\tconst [showRecipientSelector, setShowRecipientSelector] = useState(false);\n\n\t// Listen for open recipient selector event\n\tuseEffect(() => {\n\t\tconst handleOpenSelector = (event: CustomEvent) => {\n\t\t\tif (event.detail?.type === \"email\") {\n\t\t\t\tsetShowRecipientSelector(true);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener(\n\t\t\t\"open-recipient-selector\",\n\t\t\thandleOpenSelector as EventListener,\n\t\t);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\n\t\t\t\t\"open-recipient-selector\",\n\t\t\t\thandleOpenSelector as EventListener,\n\t\t\t);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<CommunicationSidebar config={config} {...props} />\n\t\t\t<RecipientSelector\n\t\t\t\topen={showRecipientSelector}\n\t\t\t\tonOpenChange={setShowRecipientSelector}\n\t\t\t\trecipientType=\"email\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"40ab3b361b2041f77f436c8d1e4550cc0e1195ba49\":\"deleteEmailFolderAction\"},\"apps/web/src/actions/email-folders.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteEmailFolderAction=/*#__PURE__*/createServerReference(\"40ab3b361b2041f77f436c8d1e4550cc0e1195ba49\",callServer,void 0,findSourceMapURL,\"deleteEmailFolderAction\");","/* __next_internal_action_entry_do_not_use__ [{\"009d2437f279bb220435d6b93fe38eb909817e6046\":\"getEmailFoldersAction\"},\"apps/web/src/actions/email-folders.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getEmailFoldersAction=/*#__PURE__*/createServerReference(\"009d2437f279bb220435d6b93fe38eb909817e6046\",callServer,void 0,findSourceMapURL,\"getEmailFoldersAction\");","/**\n * Recipient Selector - Command menu for selecting email/SMS recipients\n *\n * Features:\n * - Search customers by name, email, phone\n * - Search vendors by name, email, phone\n * - Enter custom email or phone number\n * - Opens composer with selected recipient\n */\n\n\"use client\";\n\nimport {\n\tAtSign,\n\tBuilding2,\n\tLoader2,\n\tMail,\n\tMessageSquare,\n\tPhone,\n\tUser,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useState, useTransition } from \"react\";\nimport { searchCustomers } from \"@/actions/customers\";\nimport { searchVendors } from \"@/actions/vendors\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tCommand,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem,\n\tCommandList,\n} from \"@/components/ui/command\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useCommunicationStore } from \"@/lib/stores/communication-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype RecipientType = \"email\" | \"sms\";\n\ntype Customer = {\n\tid: string;\n\tdisplay_name: string;\n\temail?: string | null;\n\tphone?: string | null;\n\tcompany_name?: string | null;\n};\n\ntype Vendor = {\n\tid: string;\n\tname: string;\n\tdisplay_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n};\n\n// Search result types that match API response structure\ntype CustomerSearchResult = {\n\tid: string;\n\tdisplay_name?: string | null;\n\tfirst_name?: string | null;\n\tlast_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n\tprimary_phone?: string | null;\n\tcompany_name?: string | null;\n};\n\ntype VendorSearchResult = {\n\tid: string;\n\tname: string;\n\tdisplay_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n};\n\ntype RecipientOption =\n\t| { type: \"customer\"; data: Customer }\n\t| { type: \"vendor\"; data: Vendor }\n\t| { type: \"custom-email\"; email: string }\n\t| { type: \"custom-phone\"; phone: string };\n\ntype RecipientSelectorProps = {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n\trecipientType: RecipientType;\n};\n\nexport function RecipientSelector({\n\topen,\n\tonOpenChange,\n\trecipientType,\n}: RecipientSelectorProps) {\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst [customInput, setCustomInput] = useState(\"\");\n\tconst [customInputMode, setCustomInputMode] = useState<\n\t\t\"email\" | \"phone\" | null\n\t>(null);\n\tconst [customers, setCustomers] = useState<Customer[]>([]);\n\tconst [vendors, setVendors] = useState<Vendor[]>([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [isPending, startTransition] = useTransition();\n\tconst openComposer = useCommunicationStore((state) => state.openComposer);\n\n\t// Search customers and vendors\n\tuseEffect(() => {\n\t\t// Don't search if in custom input mode (user is typing email/phone directly)\n\t\tif (!open || customInputMode !== null) {\n\t\t\tif (!open) {\n\t\t\t\tsetCustomers([]);\n\t\t\t\tsetVendors([]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (searchQuery.trim().length < 2) {\n\t\t\tsetCustomers([]);\n\t\t\tsetVendors([]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst searchTimeout = setTimeout(() => {\n\t\t\tsetLoading(true);\n\t\t\tstartTransition(async () => {\n\t\t\t\ttry {\n\t\t\t\t\t// Search customers\n\t\t\t\t\tconst customersResult = await searchCustomers(searchQuery, {\n\t\t\t\t\t\tlimit: 20,\n\t\t\t\t\t});\n\n\t\t\t\t\t// Handle ActionResult structure: { success: boolean, data?: T, error?: string }\n\t\t\t\t\t// Also handle direct array returns (for backward compatibility)\n\t\t\t\t\tlet customerArray: CustomerSearchResult[] = [];\n\n\t\t\t\t\tif (customersResult.success && customersResult.data) {\n\t\t\t\t\t\tcustomerArray = Array.isArray(customersResult.data)\n\t\t\t\t\t\t\t? customersResult.data\n\t\t\t\t\t\t\t: [customersResult.data];\n\t\t\t\t\t} else if (Array.isArray(customersResult)) {\n\t\t\t\t\t\t// Handle case where result is directly an array\n\t\t\t\t\t\tcustomerArray = customersResult as CustomerSearchResult[];\n\t\t\t\t\t} else if (customersResult.error) {\n\t\t\t\t\t\tconsole.warn(\"Customer search failed:\", customersResult.error);\n\t\t\t\t\t\tsetCustomers([]);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (customerArray.length > 0) {\n\t\t\t\t\t\t// Map to Customer type - handle different data structures\n\t\t\t\t\t\tconst customerData = customerArray.map((c) => ({\n\t\t\t\t\t\t\tid: c.id,\n\t\t\t\t\t\t\tdisplay_name:\n\t\t\t\t\t\t\t\tc.display_name ||\n\t\t\t\t\t\t\t\t`${c.first_name || \"\"} ${c.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\"Customer\",\n\t\t\t\t\t\t\temail: c.email || null,\n\t\t\t\t\t\t\tphone: c.phone || c.primary_phone || null,\n\t\t\t\t\t\t\tcompany_name: c.company_name || null,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tsetCustomers(customerData);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetCustomers([]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Search vendors\n\t\t\t\t\tconst vendorsResult = await searchVendors(searchQuery);\n\n\t\t\t\t\t// Handle ActionResult structure: { success: boolean, data?: T, error?: string }\n\t\t\t\t\tif (vendorsResult.success) {\n\t\t\t\t\t\tconst vendorArray = Array.isArray(vendorsResult.data)\n\t\t\t\t\t\t\t? vendorsResult.data\n\t\t\t\t\t\t\t: vendorsResult.data\n\t\t\t\t\t\t\t\t? [vendorsResult.data]\n\t\t\t\t\t\t\t\t: [];\n\n\t\t\t\t\t\tif (vendorArray.length > 0) {\n\t\t\t\t\t\t\t// Map to Vendor type\n\t\t\t\t\t\t\tconst vendorData = (vendorArray as VendorSearchResult[]).map((v) => ({\n\t\t\t\t\t\t\t\tid: v.id,\n\t\t\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\t\t\tdisplay_name: v.display_name || v.name,\n\t\t\t\t\t\t\t\temail: v.email,\n\t\t\t\t\t\t\t\tphone: v.phone,\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\tsetVendors(vendorData);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetVendors([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\"Vendor search failed:\",\n\t\t\t\t\t\t\tvendorsResult.error || \"Unknown error\",\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetVendors([]);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Error searching recipients:\", error);\n\t\t\t\t\tsetCustomers([]);\n\t\t\t\t\tsetVendors([]);\n\t\t\t\t} finally {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}, 300);\n\n\t\treturn () => clearTimeout(searchTimeout);\n\t}, [searchQuery, open, customInputMode]);\n\n\tconst handleSelectRecipient = useCallback(\n\t\t(option: RecipientOption) => {\n\t\t\tif (option.type === \"customer\") {\n\t\t\t\tconst customer = option.data;\n\t\t\t\tconst email = customer.email || \"\";\n\t\t\t\tconst phone = customer.phone || \"\";\n\t\t\t\tconst name = customer.display_name || \"Customer\";\n\n\t\t\t\tif (recipientType === \"email\" && email) {\n\t\t\t\t\topenComposer(\"email\", {\n\t\t\t\t\t\tcustomerId: customer.id,\n\t\t\t\t\t\tcustomerName: name,\n\t\t\t\t\t\temail,\n\t\t\t\t\t});\n\t\t\t\t} else if (recipientType === \"sms\" && phone) {\n\t\t\t\t\topenComposer(\"sms\", {\n\t\t\t\t\t\tcustomerId: customer.id,\n\t\t\t\t\t\tcustomerName: name,\n\t\t\t\t\t\tphone,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (option.type === \"vendor\") {\n\t\t\t\tconst vendor = option.data;\n\t\t\t\tconst email = vendor.email || \"\";\n\t\t\t\tconst phone = vendor.phone || \"\";\n\t\t\t\tconst name = vendor.display_name || vendor.name || \"Vendor\";\n\n\t\t\t\tif (recipientType === \"email\" && email) {\n\t\t\t\t\topenComposer(\"email\", {\n\t\t\t\t\t\tcustomerName: name,\n\t\t\t\t\t\temail,\n\t\t\t\t\t});\n\t\t\t\t} else if (recipientType === \"sms\" && phone) {\n\t\t\t\t\topenComposer(\"sms\", {\n\t\t\t\t\t\tcustomerName: name,\n\t\t\t\t\t\tphone,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (option.type === \"custom-email\") {\n\t\t\t\topenComposer(\"email\", {\n\t\t\t\t\tcustomerName: option.email,\n\t\t\t\t\temail: option.email,\n\t\t\t\t});\n\t\t\t} else if (option.type === \"custom-phone\") {\n\t\t\t\topenComposer(\"sms\", {\n\t\t\t\t\tcustomerName: option.phone,\n\t\t\t\t\tphone: option.phone,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tonOpenChange(false);\n\t\t\t// Reset state after a short delay to allow dialog to close\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetSearchQuery(\"\");\n\t\t\t\tsetCustomInput(\"\");\n\t\t\t\tsetCustomInputMode(null);\n\t\t\t\tsetCustomers([]);\n\t\t\t\tsetVendors([]);\n\t\t\t}, 200);\n\t\t},\n\t\t[recipientType, openComposer, onOpenChange],\n\t);\n\n\t// Reset when dialog closes\n\tuseEffect(() => {\n\t\tif (!open) {\n\t\t\tsetSearchQuery(\"\");\n\t\t\tsetCustomInput(\"\");\n\t\t\tsetCustomInputMode(null);\n\t\t\tsetCustomers([]);\n\t\t\tsetVendors([]);\n\t\t}\n\t}, [open]);\n\n\tconst handleCustomInput = useCallback(() => {\n\t\tif (!customInput.trim()) return;\n\n\t\tif (customInputMode === \"email\") {\n\t\t\t// Validate email\n\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\tif (!emailRegex.test(customInput.trim())) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thandleSelectRecipient({\n\t\t\t\ttype: \"custom-email\",\n\t\t\t\temail: customInput.trim(),\n\t\t\t});\n\t\t} else if (customInputMode === \"phone\") {\n\t\t\t// Basic phone validation (at least 10 digits)\n\t\t\tconst phoneDigits = customInput.replace(/\\D/g, \"\");\n\t\t\tif (phoneDigits.length < 10) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thandleSelectRecipient({\n\t\t\t\ttype: \"custom-phone\",\n\t\t\t\tphone: customInput.trim(),\n\t\t\t});\n\t\t}\n\t}, [customInput, customInputMode, handleSelectRecipient]);\n\n\tconst isValidEmail =\n\t\tcustomInput.trim().match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/) !== null;\n\tconst isValidPhone = customInput.replace(/\\D/g, \"\").length >= 10;\n\n\tconst hasResults = customers.length > 0 || vendors.length > 0;\n\tconst showCustomOptions =\n\t\t(searchQuery.trim().length >= 2 || customInputMode !== null) && !loading;\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent className=\"sm:max-w-[600px]\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>\n\t\t\t\t\t\t{recipientType === \"email\" ? \"Send Email To\" : \"Send Text To\"}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tSearch for a customer or vendor, or enter a custom{\" \"}\n\t\t\t\t\t\t{recipientType === \"email\" ? \"email address\" : \"phone number\"}\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<Command className=\"rounded-lg border shadow-md\" shouldFilter={false}>\n\t\t\t\t\t<CommandInput\n\t\t\t\t\t\tplaceholder={`Search customers, vendors, or enter ${recipientType === \"email\" ? \"email\" : \"phone number\"}...`}\n\t\t\t\t\t\tvalue={customInputMode ? customInput : searchQuery}\n\t\t\t\t\t\tonValueChange={(value) => {\n\t\t\t\t\t\t\tif (customInputMode) {\n\t\t\t\t\t\t\t\t// User is in custom input mode, update custom input\n\t\t\t\t\t\t\t\tsetCustomInput(value);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Check if user has typed a VALID complete email or phone\n\t\t\t\t\t\t\t\t// Only switch to custom mode if it's actually valid\n\t\t\t\t\t\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\t\t\t\t\t\tconst isValidEmail = emailRegex.test(value.trim());\n\t\t\t\t\t\t\t\tconst phoneDigits = value.replace(/\\D/g, \"\");\n\t\t\t\t\t\t\t\tconst isValidPhone = phoneDigits.length >= 10;\n\n\t\t\t\t\t\t\t\t// Be conservative - only switch to custom mode for VALID inputs\n\t\t\t\t\t\t\t\t// This prevents switching mode while typing customer names\n\t\t\t\t\t\t\t\tif (isValidEmail && recipientType === \"email\") {\n\t\t\t\t\t\t\t\t\t// Valid complete email address\n\t\t\t\t\t\t\t\t\tsetCustomInputMode(\"email\");\n\t\t\t\t\t\t\t\t\tsetCustomInput(value);\n\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\"); // Clear search query\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\tisValidPhone &&\n\t\t\t\t\t\t\t\t\trecipientType === \"sms\" &&\n\t\t\t\t\t\t\t\t\t!value.includes(\"@\")\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// Valid phone number (10+ digits, no @ symbol)\n\t\t\t\t\t\t\t\t\tsetCustomInputMode(\"phone\");\n\t\t\t\t\t\t\t\t\tsetCustomInput(value);\n\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\"); // Clear search query\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Normal search mode - keep searching\n\t\t\t\t\t\t\t\t\tsetSearchQuery(value);\n\t\t\t\t\t\t\t\t\tsetCustomInputMode(null);\n\t\t\t\t\t\t\t\t\tsetCustomInput(\"\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t// Handle Enter key to submit custom email/phone\n\t\t\t\t\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (customInputMode === \"email\" && isValidEmail) {\n\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\ttype: \"custom-email\",\n\t\t\t\t\t\t\t\t\t\temail: customInput.trim(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else if (customInputMode === \"phone\" && isValidPhone) {\n\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\ttype: \"custom-phone\",\n\t\t\t\t\t\t\t\t\t\tphone: customInput.trim(),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else if (!customInputMode && searchQuery.trim().length >= 2) {\n\t\t\t\t\t\t\t\t\t// If typing an email-like string, try to use it as email\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\trecipientType === \"email\" &&\n\t\t\t\t\t\t\t\t\t\tsearchQuery.includes(\"@\") &&\n\t\t\t\t\t\t\t\t\t\tsearchQuery.includes(\".\")\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\t\t\t\t\t\t\t\tif (emailRegex.test(searchQuery.trim())) {\n\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"custom-email\",\n\t\t\t\t\t\t\t\t\t\t\t\temail: searchQuery.trim(),\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (recipientType === \"sms\") {\n\t\t\t\t\t\t\t\t\t\tconst phoneDigits = searchQuery.replace(/\\D/g, \"\");\n\t\t\t\t\t\t\t\t\t\tif (phoneDigits.length >= 10) {\n\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"custom-phone\",\n\t\t\t\t\t\t\t\t\t\t\t\tphone: searchQuery.trim(),\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<CommandList>\n\t\t\t\t\t\t{loading && (\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-center py-6\">\n\t\t\t\t\t\t\t\t<Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<span className=\"ml-2 text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\tSearching...\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!loading &&\n\t\t\t\t\t\t\t!hasResults &&\n\t\t\t\t\t\t\t!showCustomOptions &&\n\t\t\t\t\t\t\tsearchQuery.trim().length >= 2 && (\n\t\t\t\t\t\t\t\t<CommandEmpty>\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-8 text-center\">\n\t\t\t\t\t\t\t\t\t\t<User className=\"h-8 w-8 text-muted-foreground mb-2\" />\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">No results found</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\tTry a different search term or enter a custom{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{recipientType === \"email\"\n\t\t\t\t\t\t\t\t\t\t\t\t? \"email address\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"phone number\"}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</CommandEmpty>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!loading &&\n\t\t\t\t\t\t\t!hasResults &&\n\t\t\t\t\t\t\t!showCustomOptions &&\n\t\t\t\t\t\t\tsearchQuery.trim().length === 0 && (\n\t\t\t\t\t\t\t\t<CommandEmpty>\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-8 text-center\">\n\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-8 w-8 text-muted-foreground mb-2\" />\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\tStart typing to search\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\tSearch for customers or vendors, or type an{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{recipientType === \"email\"\n\t\t\t\t\t\t\t\t\t\t\t\t? \"email address\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"phone number\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\tdirectly\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</CommandEmpty>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Custom Input Options */}\n\t\t\t\t\t\t{showCustomOptions && (\n\t\t\t\t\t\t\t<CommandGroup heading=\"Custom\">\n\t\t\t\t\t\t\t\t{customInputMode === \"email\" && (\n\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\t\t\tif (isValidEmail) {\n\t\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"custom-email\",\n\t\t\t\t\t\t\t\t\t\t\t\t\temail: customInput.trim(),\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={!isValidEmail}\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"flex items-center gap-2 cursor-pointer\",\n\t\t\t\t\t\t\t\t\t\t\t!isValidEmail && \"opacity-50 cursor-not-allowed\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<AtSign className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\tSend to {customInput.trim() || \"email address\"}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{isValidEmail && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"default\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\tPress Enter\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!isValidEmail && customInput.trim().length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\tInvalid email\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{customInputMode === \"phone\" && (\n\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\t\t\tif (isValidPhone) {\n\t\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"custom-phone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tphone: customInput.trim(),\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={!isValidPhone}\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\"flex items-center gap-2 cursor-pointer\",\n\t\t\t\t\t\t\t\t\t\t\t!isValidPhone && \"opacity-50 cursor-not-allowed\",\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Phone className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\tSend to {customInput.trim() || \"phone number\"}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{isValidPhone && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"default\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\tPress Enter\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!isValidPhone && customInput.trim().length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\tInvalid phone\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!customInputMode &&\n\t\t\t\t\t\t\t\t\tsearchQuery.trim().length >= 2 &&\n\t\t\t\t\t\t\t\t\trecipientType === \"email\" && (\n\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetCustomInputMode(\"email\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetCustomInput(searchQuery);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\");\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<AtSign className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t<span>Use \"{searchQuery}\" as email address</span>\n\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!customInputMode &&\n\t\t\t\t\t\t\t\t\tsearchQuery.trim().length >= 2 &&\n\t\t\t\t\t\t\t\t\trecipientType === \"sms\" && (\n\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetCustomInputMode(\"phone\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetCustomInput(searchQuery);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSearchQuery(\"\");\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t<span>Use \"{searchQuery}\" as phone number</span>\n\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Customers */}\n\t\t\t\t\t\t{customers.length > 0 && (\n\t\t\t\t\t\t\t<CommandGroup heading=\"Customers\">\n\t\t\t\t\t\t\t\t{customers.map((customer) => {\n\t\t\t\t\t\t\t\t\tconst hasEmail = !!customer.email;\n\t\t\t\t\t\t\t\t\tconst hasPhone = !!customer.phone;\n\t\t\t\t\t\t\t\t\tconst canUse =\n\t\t\t\t\t\t\t\t\t\trecipientType === \"email\" ? hasEmail : hasPhone;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\tkey={customer.id}\n\t\t\t\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (canUse) {\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"customer\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: customer,\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!canUse}\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\"flex items-center gap-3\",\n\t\t\t\t\t\t\t\t\t\t\t\t!canUse && \"opacity-50 cursor-not-allowed\",\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-8 w-8\">\n\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.display_name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 2)}\n\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-1 flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.display_name}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.email && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.phone && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{customer.phone}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{!canUse && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo {recipientType === \"email\" ? \"email\" : \"phone\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{canUse &&\n\t\t\t\t\t\t\t\t\t\t\t\t(recipientType === \"email\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MessageSquare className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Vendors */}\n\t\t\t\t\t\t{vendors.length > 0 && (\n\t\t\t\t\t\t\t<CommandGroup heading=\"Vendors\">\n\t\t\t\t\t\t\t\t{vendors.map((vendor) => {\n\t\t\t\t\t\t\t\t\tconst hasEmail = !!vendor.email;\n\t\t\t\t\t\t\t\t\tconst hasPhone = !!vendor.phone;\n\t\t\t\t\t\t\t\t\tconst canUse =\n\t\t\t\t\t\t\t\t\t\trecipientType === \"email\" ? hasEmail : hasPhone;\n\n\t\t\t\t\t\t\t\t\tif (!canUse) return null;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\tkey={vendor.id}\n\t\t\t\t\t\t\t\t\t\t\tonSelect={() =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleSelectRecipient({ type: \"vendor\", data: vendor })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-3\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-8 w-8\">\n\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-1 flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{vendor.display_name || vendor.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{vendor.email && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{vendor.email}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{vendor.phone && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Phone className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{vendor.phone}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{recipientType === \"email\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageSquare className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</CommandList>\n\t\t\t\t</Command>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","/**\n * Communication Store - Zustand state management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Automatic re-renders only for components using this state\n * - Shares active tab state between page and toolbar\n * - Tracks selected message for detail view navigation\n */\n\nimport { create } from \"zustand\";\n\ntype MessageType = \"email\" | \"sms\" | \"phone\" | \"ticket\";\ntype ActiveFilter = MessageType | \"all\";\ntype ComposerType = \"email\" | \"sms\" | \"call\";\ntype MessageDirection = \"sent\" | \"received\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type ComposerContext = {\n\tcustomerId?: string;\n\tcustomerName?: string;\n\temail?: string;\n\tphone?: string;\n\tthreadId?: string;\n\tjobId?: string;\n\tpropertyId?: string;\n\tinvoiceId?: string;\n\testimateId?: string;\n};\n\nexport type PendingMessage = {\n\tid: string;\n\tconversationId: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus: MessageStatus;\n\tcontactName?: string;\n\tcontactNumber?: string;\n\tcontactNumberRaw?: string;\n\tcustomerId?: string;\n};\n\ntype PendingMessageMap = Record<string, PendingMessage[]>;\n\ntype CommunicationStore = {\n\tactiveFilter: ActiveFilter;\n\tsetActiveFilter: (filter: ActiveFilter) => void;\n\tselectedMessageId: string | null;\n\tsetSelectedMessageId: (id: string | null) => void;\n\tisDetailView: boolean;\n\tsetIsDetailView: (isDetailView: boolean) => void;\n\tactiveThreadId: string | null;\n\tsetActiveThreadId: (threadId: string | null) => void;\n\tcomposer: {\n\t\ttype: ComposerType | null;\n\t\tcontext?: ComposerContext;\n\t};\n\topenComposer: (type: ComposerType, context?: ComposerContext) => void;\n\tcloseComposer: () => void;\n\tpendingMessages: PendingMessageMap;\n\taddPendingMessage: (message: PendingMessage) => void;\n\tresolvePendingMessage: (\n\t\tconversationId: string,\n\t\tmessageId: string,\n\t\treplacement?: PendingMessage,\n\t) => void;\n\tresetPendingMessages: (conversationId: string) => void;\n};\n\nexport const useCommunicationStore = create<CommunicationStore>((set) => ({\n\tactiveFilter: \"all\",\n\tsetActiveFilter: (filter) => set({ activeFilter: filter }),\n\tselectedMessageId: null,\n\tsetSelectedMessageId: (id) => set({ selectedMessageId: id }),\n\tisDetailView: false,\n\tsetIsDetailView: (isDetailView) => set({ isDetailView }),\n\tactiveThreadId: null,\n\tsetActiveThreadId: (threadId) => set({ activeThreadId: threadId }),\n\tcomposer: {\n\t\ttype: null,\n\t},\n\topenComposer: (type, context) => {\n\t\tconsole.log(\" openComposer called:\", { type, context });\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\ttype,\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t},\n\tcloseComposer: () =>\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\ttype: null,\n\t\t\t},\n\t\t}),\n\tpendingMessages: {},\n\taddPendingMessage: (message) =>\n\t\tset((state) => {\n\t\t\tconst existing = state.pendingMessages[message.conversationId] ?? [];\n\t\t\treturn {\n\t\t\t\tpendingMessages: {\n\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t[message.conversationId]: [...existing, message],\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n\tresolvePendingMessage: (conversationId, messageId, replacement) =>\n\t\tset((state) => {\n\t\t\tconst current = state.pendingMessages[conversationId] ?? [];\n\t\t\tconst filtered = current.filter((msg) => msg.id !== messageId);\n\t\t\tif (replacement) {\n\t\t\t\tfiltered.push(replacement);\n\t\t\t}\n\t\t\tconst nextPending =\n\t\t\t\tfiltered.length > 0\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t\t\t[conversationId]: filtered,\n\t\t\t\t\t\t}\n\t\t\t\t\t: Object.fromEntries(\n\t\t\t\t\t\t\tObject.entries(state.pendingMessages).filter(\n\t\t\t\t\t\t\t\t([key]) => key !== conversationId,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\treturn {\n\t\t\t\tpendingMessages: nextPending,\n\t\t\t};\n\t\t}),\n\tresetPendingMessages: (conversationId) =>\n\t\tset((state) => {\n\t\t\tif (!state.pendingMessages[conversationId]) {\n\t\t\t\treturn { pendingMessages: state.pendingMessages };\n\t\t\t}\n\t\t\tconst nextEntries = Object.entries(state.pendingMessages).filter(\n\t\t\t\t([key]) => key !== conversationId,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tpendingMessages: Object.fromEntries(nextEntries),\n\t\t\t};\n\t\t}),\n}));\n","import {\n\tArchive,\n\tBuilding2,\n\tClock,\n\tCreditCard,\n\tFile,\n\tHelpCircle,\n\tInbox,\n\tInfo,\n\tMail,\n\tPlus,\n\tSend,\n\tShieldAlert,\n\tStar,\n\tTag,\n\tTrendingUp,\n\tUser,\n} from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\nimport { CreateFolderDialog } from \"@/components/communication/create-folder-dialog\";\n\ntype FolderCounts = {\n\t// Personal inbox counts\n\tpersonal_inbox?: number;\n\tpersonal_drafts?: number;\n\tpersonal_sent?: number;\n\tpersonal_archive?: number;\n\tpersonal_starred?: number;\n\n\t// Company inbox counts (by category)\n\tcompany_support?: number;\n\tcompany_sales?: number;\n\tcompany_billing?: number;\n\tcompany_general?: number;\n\n\t// Legacy counts (deprecated, for backwards compatibility)\n\tall?: number;\n\tinbox?: number;\n\tdrafts?: number;\n\tsent?: number;\n\tarchive?: number;\n\tsnoozed?: number;\n\tspam?: number;\n\ttrash?: number;\n\tstarred?: number;\n\t[label: string]: number | undefined;\n};\n\ntype CustomFolder = {\n\tid: string;\n\tname: string;\n\tslug: string;\n\tcolor?: string | null;\n\ticon?: string | null;\n\tsort_order: number;\n};\n\ntype FolderItem = {\n\ttitle: string;\n\ticon: typeof Tag;\n\tbadge?: number;\n\turl: string;\n\tfolderId?: string; // For delete functionality\n};\n\n/**\n * Get email sidebar configuration with dynamic counts\n * @param counts - Optional folder counts to display as badges\n * @param customFolders - Optional custom folders from database\n */\nexport function getEmailSidebarConfig(\n\tcounts?: FolderCounts,\n\tcustomFolders?: CustomFolder[],\n): CommunicationSidebarConfig {\n\t// Build label items from custom folders\n\tconst labelItems: FolderItem[] = [];\n\n\t// Add custom folders from database\n\tif (customFolders && customFolders.length > 0) {\n\t\tcustomFolders\n\t\t\t.sort((a, b) => a.sort_order - b.sort_order)\n\t\t\t.forEach((folder) => {\n\t\t\t\tconst count = counts?.[folder.slug];\n\t\t\t\tlabelItems.push({\n\t\t\t\t\ttitle: folder.name,\n\t\t\t\t\ticon: Tag,\n\t\t\t\t\tbadge: count && count > 0 ? count : undefined,\n\t\t\t\t\turl: `/dashboard/communication/folder/${encodeURIComponent(folder.slug)}`,\n\t\t\t\t\tfolderId: folder.id, // Include ID for delete functionality\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t// Add any additional labels from counts (legacy support)\n\tif (counts) {\n\t\tObject.keys(counts).forEach((key) => {\n\t\t\tif (\n\t\t\t\t![\n\t\t\t\t\t\"all\",\n\t\t\t\t\t\"inbox\",\n\t\t\t\t\t\"drafts\",\n\t\t\t\t\t\"sent\",\n\t\t\t\t\t\"archive\",\n\t\t\t\t\t\"snoozed\",\n\t\t\t\t\t\"spam\",\n\t\t\t\t\t\"trash\",\n\t\t\t\t\t\"starred\",\n\t\t\t\t].includes(key) &&\n\t\t\t\t!labelItems.some((item) => item.url.includes(key))\n\t\t\t) {\n\t\t\t\tconst count = counts[key];\n\t\t\t\tlabelItems.push({\n\t\t\t\t\ttitle: key,\n\t\t\t\t\ticon: Tag,\n\t\t\t\t\tbadge: count && count > 0 ? count : undefined,\n\t\t\t\t\turl: `/dashboard/communication/label/${encodeURIComponent(key.toLowerCase())}`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"MY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=inbox\",\n\t\t\t\t\t\ticon: Inbox,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.personal_inbox && counts.personal_inbox > 0\n\t\t\t\t\t\t\t\t? counts.personal_inbox\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.personal_sent && counts.personal_sent > 0\n\t\t\t\t\t\t\t\t? counts.personal_sent\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Drafts\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=drafts\",\n\t\t\t\t\t\ticon: File,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.personal_drafts && counts.personal_drafts > 0\n\t\t\t\t\t\t\t\t? counts.personal_drafts\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Starred\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=starred\",\n\t\t\t\t\t\ticon: Star,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.personal_starred && counts.personal_starred > 0\n\t\t\t\t\t\t\t\t? counts.personal_starred\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.personal_archive && counts.personal_archive > 0\n\t\t\t\t\t\t\t\t? counts.personal_archive\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"COMPANY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=support\",\n\t\t\t\t\t\ticon: HelpCircle,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.company_support && counts.company_support > 0\n\t\t\t\t\t\t\t\t? counts.company_support\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=sales\",\n\t\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.company_sales && counts.company_sales > 0\n\t\t\t\t\t\t\t\t? counts.company_sales\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=billing\",\n\t\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.company_billing && counts.company_billing > 0\n\t\t\t\t\t\t\t\t? counts.company_billing\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=company&category=general\",\n\t\t\t\t\t\ticon: Info,\n\t\t\t\t\t\tbadge:\n\t\t\t\t\t\t\tcounts?.company_general && counts.company_general > 0\n\t\t\t\t\t\t\t\t? counts.company_general\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: {\n\t\t\tlabel: \"New email\",\n\t\t\ticon: Plus,\n\t\t\thref: \"/dashboard/communication/email?compose=true\",\n\t\t},\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: labelItems.map((item) => ({\n\t\t\t\t\t...item,\n\t\t\t\t\turl: item.url,\n\t\t\t\t\tfolderId: item.folderId,\n\t\t\t\t\t// onDelete will be added by EmailSidebar component\n\t\t\t\t})),\n\t\t\t\taddButton: (\n\t\t\t\t\t<CreateFolderDialog\n\t\t\t\t\t\tonFolderCreated={() => {\n\t\t\t\t\t\t\t// Trigger sidebar refresh\n\t\t\t\t\t\t\twindow.dispatchEvent(new Event(\"folder-created\"));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true, // Keep Folders section open by default\n\t\t\t},\n\t\t],\n\t};\n}\n\n/**\n * Default email sidebar configuration (for backwards compatibility)\n * @deprecated Use getEmailSidebarConfig() directly instead\n */\nconst emailSidebarConfig = getEmailSidebarConfig();\n","/* __next_internal_action_entry_do_not_use__ [{\"40d07b28bd187d6d3394516f5d39d8c4717c1b232c\":\"createEmailFolderAction\"},\"apps/web/src/actions/email-folders.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var createEmailFolderAction=/*#__PURE__*/createServerReference(\"40d07b28bd187d6d3394516f5d39d8c4717c1b232c\",callServer,void 0,findSourceMapURL,\"createEmailFolderAction\");","\"use client\";\n\nimport { Plus } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { createEmailFolderAction } from \"@/actions/email-folders\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n\tDialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\ntype CreateFolderDialogProps = {\n\tonFolderCreated?: () => void;\n\tchildren?: React.ReactNode;\n};\n\nexport function CreateFolderDialog({\n\tonFolderCreated,\n\tchildren,\n}: CreateFolderDialogProps) {\n\tconst [open, setOpen] = useState(false);\n\tconst [loading, setLoading] = useState(false);\n\tconst [name, setName] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\tconst router = useRouter();\n\n\tconst handleSubmit = async (e: React.FormEvent) => {\n\t\te.preventDefault();\n\n\t\tif (!name.trim()) {\n\t\t\ttoast.error(\"Folder name is required\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst result = await createEmailFolderAction({\n\t\t\t\tname: name.trim(),\n\t\t\t\tdescription: description.trim() || undefined,\n\t\t\t});\n\n\t\t\tif (result.success && result.folder) {\n\t\t\t\ttoast.success(\"Folder created successfully\");\n\t\t\t\tsetOpen(false);\n\t\t\t\tsetName(\"\");\n\t\t\t\tsetDescription(\"\");\n\n\t\t\t\t// Navigate to the new folder\n\t\t\t\trouter.push(`/dashboard/communication/folder/${result.folder.slug}`);\n\n\t\t\t\t// Refresh sidebar\n\t\t\t\tonFolderCreated?.();\n\t\t\t} else {\n\t\t\t\ttoast.error(result.error || \"Failed to create folder\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttoast.error(\"Failed to create folder\", {\n\t\t\t\tdescription: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t});\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={setOpen}>\n\t\t\t<DialogTrigger asChild>\n\t\t\t\t{children || (\n\t\t\t\t\t<Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\">\n\t\t\t\t\t\t<Plus className=\"h-4 w-4\" />\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</DialogTrigger>\n\t\t\t<DialogContent>\n\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Create New Folder</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tCreate a custom folder to organize your emails. You can add emails\n\t\t\t\t\t\t\tto this folder using labels.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4 py-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"name\">Folder Name</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"e.g., CSLB, Important, Follow-up\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tmaxLength={100}\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"description\">Description (Optional)</Label>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"Add a description for this folder\"\n\t\t\t\t\t\t\t\tmaxLength={500}\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tonClick={() => setOpen(false)}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"submit\" disabled={loading || !name.trim()}>\n\t\t\t\t\t\t\t{loading ? \"Creating...\" : \"Create Folder\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</form>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","import { Hash, MessageCircle, Plus, Users } from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\n/**\n * Teams sidebar configuration\n * Defines the navigation structure and actions for the teams communication page\n */\nexport const teamsSidebarConfig: CommunicationSidebarConfig = {\n\tnavGroups: [\n\t\t{\n\t\t\tlabel: \"Channels\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=general\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=sales\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=support\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Technicians\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=technicians\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Management\",\n\t\t\t\t\turl: \"/dashboard/communication/teams?channel=management\",\n\t\t\t\t\ticon: Hash,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\tprimaryAction: {\n\t\tlabel: \"New channel\",\n\t\ticon: Plus,\n\t\tonClick: () => {\n\t\t\t// TODO: Implement new channel creation modal\n\t\t},\n\t},\n};\n","\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { CommunicationSidebar } from \"@/components/communication/communication-sidebar\";\nimport type { Sidebar } from \"@/components/ui/sidebar\";\nimport { teamsSidebarConfig } from \"@/lib/communication/teams-sidebar-config\";\n\n/**\n * TeamsSidebar - Teams communication sidebar\n *\n * Uses the shared CommunicationSidebar component with teams-specific configuration.\n */\nexport function TeamsSidebar(props: ComponentProps<typeof Sidebar>) {\n\treturn <CommunicationSidebar config={teamsSidebarConfig} {...props} />;\n}\n","\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { getSmsFolderCountsAction } from \"@/actions/sms-actions\";\nimport { CommunicationSidebar } from \"@/components/communication/communication-sidebar\";\nimport { RecipientSelector } from \"@/components/communication/recipient-selector\";\nimport type { Sidebar } from \"@/components/ui/sidebar\";\nimport { getSmsSidebarConfig } from \"@/lib/communication/text-sidebar-config\";\n\n/**\n * TextSidebar - Text/SMS communication sidebar\n *\n * Fetches SMS folder counts and uses the shared CommunicationSidebar component.\n */\nexport function TextSidebar(props: ComponentProps<typeof Sidebar>) {\n\tconst [config, setConfig] = useState(() => getSmsSidebarConfig({}));\n\n\t// Fetch folder counts and update config\n\tconst fetchData = useCallback(async () => {\n\t\ttry {\n\t\t\tconst countsResult = await getSmsFolderCountsAction();\n\n\t\t\tif (countsResult.success && countsResult.counts) {\n\t\t\t\tsetConfig(getSmsSidebarConfig(countsResult.counts));\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t\" Failed to fetch SMS folder counts:\",\n\t\t\t\t\tcountsResult.error,\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch SMS folder data:\", error);\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t\t// Refresh counts every 30 seconds\n\t\tconst interval = setInterval(fetchData, 30000);\n\n\t\t// Listen for SMS read events to refresh counts\n\t\tconst handleSmsRead = () => {\n\t\t\tfetchData();\n\t\t};\n\t\twindow.addEventListener(\"sms-read\", handleSmsRead);\n\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t\twindow.removeEventListener(\"sms-read\", handleSmsRead);\n\t\t};\n\t}, [fetchData]);\n\n\tconst [showRecipientSelector, setShowRecipientSelector] = useState(false);\n\n\t// Listen for open recipient selector event\n\tuseEffect(() => {\n\t\tconst handleOpenSelector = (event: CustomEvent) => {\n\t\t\tif (event.detail?.type === \"sms\") {\n\t\t\t\tsetShowRecipientSelector(true);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener(\n\t\t\t\"open-recipient-selector\",\n\t\t\thandleOpenSelector as EventListener,\n\t\t);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\n\t\t\t\t\"open-recipient-selector\",\n\t\t\t\thandleOpenSelector as EventListener,\n\t\t\t);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<CommunicationSidebar config={config} {...props} />\n\t\t\t<RecipientSelector\n\t\t\t\topen={showRecipientSelector}\n\t\t\t\tonOpenChange={setShowRecipientSelector}\n\t\t\t\trecipientType=\"sms\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import { Archive, MessageSquare, Plus, Send, Users } from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\ntype SmsFolderCounts = {\n\tinbox?: number;\n\tsent?: number;\n\tarchive?: number;\n\ttrash?: number;\n\t[label: string]: number | undefined;\n};\n\n/**\n * Get SMS sidebar configuration with dynamic folder counts\n * Similar to getEmailSidebarConfig but for SMS\n */\nexport function getSmsSidebarConfig(\n\tcounts?: SmsFolderCounts,\n): CommunicationSidebarConfig {\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"Core\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Inbox\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=inbox\",\n\t\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\t\tbadge: counts?.inbox ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\tbadge: counts?.sent ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\tbadge: counts?.archive ?? 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Groups\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"All Groups\",\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=groups\",\n\t\t\t\t\t\ticon: Users,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: {\n\t\t\tlabel: \"New text\",\n\t\t\ticon: Plus,\n\t\t\tonClick: () => {\n\t\t\t\t// This will be handled by the TextSidebar component\n\t\t\t\t// which will open the RecipientSelector\n\t\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\t\tnew CustomEvent(\"open-recipient-selector\", {\n\t\t\t\t\t\t\tdetail: { type: \"sms\" },\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Folders\",\n\t\t\t\titems: [],\n\t\t\t\tscrollable: true,\n\t\t\t\tscrollHeight: \"h-[200px]\",\n\t\t\t\tdefaultOpen: true, // Keep Folders section open by default (matching email page)\n\t\t\t},\n\t\t],\n\t};\n}\n","\"use client\";\n\nimport { Mail, MessageSquare, X } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\n\ninterface ComposeTypeSelectorProps {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n}\n\n/**\n * ComposeTypeSelector - Dialog for selecting message type to compose\n *\n * Allows users to choose between composing an email or SMS message\n * from the unified communication hub.\n */\nexport function ComposeTypeSelector({\n\topen,\n\tonOpenChange,\n}: ComposeTypeSelectorProps) {\n\tconst router = useRouter();\n\n\tconst handleSelectEmail = () => {\n\t\tonOpenChange(false);\n\t\trouter.push(\"/dashboard/communication/email?compose=true\");\n\t};\n\n\tconst handleSelectSms = () => {\n\t\tonOpenChange(false);\n\t\t// Dispatch event to open SMS recipient selector\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"open-recipient-selector\", {\n\t\t\t\tdetail: { type: \"sms\" },\n\t\t\t}),\n\t\t);\n\t\trouter.push(\"/dashboard/communication/sms\");\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent className=\"sm:max-w-md\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>New Message</DialogTitle>\n\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\tChoose the type of message you want to send.\n\t\t\t\t\t</DialogDescription>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<div className=\"grid grid-cols-2 gap-4 py-4\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={handleSelectEmail}\n\t\t\t\t\t\tclassName=\"group flex flex-col items-center gap-3 rounded-lg border border-border bg-card p-6 transition-all hover:border-primary hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 group-hover:bg-primary/20\">\n\t\t\t\t\t\t\t<Mail className=\"h-6 w-6 text-primary\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<h3 className=\"font-medium\">Email</h3>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\tSend an email message\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={handleSelectSms}\n\t\t\t\t\t\tclassName=\"group flex flex-col items-center gap-3 rounded-lg border border-border bg-card p-6 transition-all hover:border-primary hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-green-500/10 group-hover:bg-green-500/20\">\n\t\t\t\t\t\t\t<MessageSquare className=\"h-6 w-6 text-green-500\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<h3 className=\"font-medium\">Text Message</h3>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Send an SMS/MMS</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t<Button variant=\"ghost\" onClick={() => onOpenChange(false)}>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","import {\n\tArchive,\n\tCreditCard,\n\tHelpCircle,\n\tInbox,\n\tInfo,\n\tMail,\n\tMessageSquare,\n\tPhone,\n\tPlus,\n\tSend,\n\tStar,\n\tTrendingUp,\n\tUsers,\n\tVoicemail,\n} from \"lucide-react\";\nimport type { CommunicationSidebarConfig } from \"@/components/communication/communication-sidebar\";\n\n/**\n * Unified Communication Counts\n * Combines email and SMS folder counts for the unified view\n */\nexport type UnifiedCommunicationCounts = {\n\t// Type counts (all communications)\n\tall?: number;\n\temail?: number;\n\tsms?: number;\n\tcall?: number;\n\tvoicemail?: number;\n\n\t// Folder counts\n\tinbox?: number;\n\tsent?: number;\n\tarchive?: number;\n\ttrash?: number;\n\tstarred?: number;\n\n\t// Email-specific personal inbox\n\tpersonal_inbox?: number;\n\tpersonal_sent?: number;\n\tpersonal_drafts?: number;\n\n\t// Email-specific company inbox\n\tcompany_support?: number;\n\tcompany_sales?: number;\n\tcompany_billing?: number;\n\tcompany_general?: number;\n\n\t// SMS-specific\n\tsms_inbox?: number;\n\tsms_sent?: number;\n\tsms_archive?: number;\n};\n\n/**\n * Get unified communication sidebar configuration\n * Combines email and SMS navigation into a single sidebar\n *\n * @param counts - Folder and type counts for badges\n * @param activeType - Currently active type filter ('all', 'email', 'sms', 'call', 'voicemail')\n */\nexport function getUnifiedCommunicationSidebarConfig(\n\tcounts?: UnifiedCommunicationCounts,\n\tactiveType?: string,\n): CommunicationSidebarConfig {\n\treturn {\n\t\tnavGroups: [\n\t\t\t{\n\t\t\t\tlabel: \"ALL COMMUNICATIONS\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"All Messages\",\n\t\t\t\t\t\turl: \"/dashboard/communication\",\n\t\t\t\t\t\ticon: Inbox,\n\t\t\t\t\t\tbadge: counts?.all ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Starred\",\n\t\t\t\t\t\turl: \"/dashboard/communication?folder=starred\",\n\t\t\t\t\t\ticon: Star,\n\t\t\t\t\t\tbadge: counts?.starred ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sent\",\n\t\t\t\t\t\turl: \"/dashboard/communication?folder=sent\",\n\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\tbadge: counts?.sent ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Archive\",\n\t\t\t\t\t\turl: \"/dashboard/communication?folder=archive\",\n\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\tbadge: counts?.archive ?? 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"BY TYPE\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Emails\",\n\t\t\t\t\t\turl: \"/dashboard/communication?type=email\",\n\t\t\t\t\t\ticon: Mail,\n\t\t\t\t\t\tbadge: counts?.email ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Text Messages\",\n\t\t\t\t\t\turl: \"/dashboard/communication?type=sms\",\n\t\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\t\tbadge: counts?.sms ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Phone Calls\",\n\t\t\t\t\t\turl: \"/dashboard/communication?type=call\",\n\t\t\t\t\t\ticon: Phone,\n\t\t\t\t\t\tbadge: counts?.call ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Voicemails\",\n\t\t\t\t\t\turl: \"/dashboard/communication?type=voicemail\",\n\t\t\t\t\t\ticon: Voicemail,\n\t\t\t\t\t\tbadge: counts?.voicemail ?? 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"COMPANY INBOX\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Support\",\n\t\t\t\t\t\turl: \"/dashboard/communication?category=support\",\n\t\t\t\t\t\ticon: HelpCircle,\n\t\t\t\t\t\tbadge: counts?.company_support ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Sales\",\n\t\t\t\t\t\turl: \"/dashboard/communication?category=sales\",\n\t\t\t\t\t\ticon: TrendingUp,\n\t\t\t\t\t\tbadge: counts?.company_sales ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Billing\",\n\t\t\t\t\t\turl: \"/dashboard/communication?category=billing\",\n\t\t\t\t\t\ticon: CreditCard,\n\t\t\t\t\t\tbadge: counts?.company_billing ?? 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"General\",\n\t\t\t\t\t\turl: \"/dashboard/communication?category=general\",\n\t\t\t\t\t\ticon: Info,\n\t\t\t\t\t\tbadge: counts?.company_general ?? 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tprimaryAction: {\n\t\t\tlabel: \"New message\",\n\t\t\ticon: Plus,\n\t\t\tonClick: () => {\n\t\t\t\t// Open message type selector\n\t\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\t\tnew CustomEvent(\"open-unified-compose\", {\n\t\t\t\t\t\t\tdetail: { type: \"selector\" },\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tadditionalSections: [\n\t\t\t{\n\t\t\t\tlabel: \"Quick Access\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"My Email\",\n\t\t\t\t\t\ticon: Mail,\n\t\t\t\t\t\turl: \"/dashboard/communication/email?inbox=personal&folder=inbox\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"My SMS\",\n\t\t\t\t\t\ticon: MessageSquare,\n\t\t\t\t\t\turl: \"/dashboard/communication/sms?folder=inbox\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Team Chats\",\n\t\t\t\t\t\ticon: Users,\n\t\t\t\t\t\turl: \"/dashboard/communication/teams?channel=general\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tscrollable: false,\n\t\t\t\tdefaultOpen: true,\n\t\t\t},\n\t\t],\n\t};\n}\n","\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { CommunicationSidebar } from \"@/components/communication/communication-sidebar\";\nimport { ComposeTypeSelector } from \"@/components/communication/compose-type-selector\";\nimport type { Sidebar } from \"@/components/ui/sidebar\";\nimport {\n\tgetUnifiedCommunicationSidebarConfig,\n\ttype UnifiedCommunicationCounts,\n} from \"@/lib/communication/unified-communication-sidebar-config\";\n\n/**\n * UnifiedCommunicationSidebar - Unified communication hub sidebar\n *\n * Combines email and SMS navigation into a single sidebar for the main\n * /dashboard/communication page. Shows counts for all communication types\n * and provides quick access to compose new messages.\n */\nexport function UnifiedCommunicationSidebar(\n\tprops: ComponentProps<typeof Sidebar>,\n) {\n\tconst [config, setConfig] = useState(() =>\n\t\tgetUnifiedCommunicationSidebarConfig(),\n\t);\n\tconst [showComposeSelector, setShowComposeSelector] = useState(false);\n\n\t// Fetch communication counts\n\tconst fetchCounts = useCallback(async () => {\n\t\ttry {\n\t\t\t// Import actions dynamically to avoid server/client issues\n\t\t\tconst { getEmailFolderCountsAction } = await import(\n\t\t\t\t\"@/actions/email-actions\"\n\t\t\t);\n\t\t\tconst { getSmsFolderCountsAction } = await import(\n\t\t\t\t\"@/actions/sms-actions\"\n\t\t\t);\n\t\t\tconst { getCommunicationCountsAction } = await import(\n\t\t\t\t\"@/actions/communication-stats-actions\"\n\t\t\t);\n\n\t\t\tconst [emailResult, smsResult, commCountsResult] = await Promise.all([\n\t\t\t\tgetEmailFolderCountsAction(),\n\t\t\t\tgetSmsFolderCountsAction(),\n\t\t\t\tgetCommunicationCountsAction(),\n\t\t\t]);\n\n\t\t\t// Get actual counts from communications table\n\t\t\tconst commCounts = commCountsResult.counts;\n\n\t\t\t// Combine counts\n\t\t\tconst counts: UnifiedCommunicationCounts = {\n\t\t\t\t// Email counts - use actual counts from communications table\n\t\t\t\temail: commCounts?.email ?? 0,\n\t\t\t\tpersonal_inbox: emailResult.counts?.personal_inbox ?? 0,\n\t\t\t\tpersonal_sent: emailResult.counts?.personal_sent ?? 0,\n\t\t\t\tpersonal_drafts: emailResult.counts?.personal_drafts ?? 0,\n\t\t\t\tcompany_support: emailResult.counts?.company_support ?? 0,\n\t\t\t\tcompany_sales: emailResult.counts?.company_sales ?? 0,\n\t\t\t\tcompany_billing: emailResult.counts?.company_billing ?? 0,\n\t\t\t\tcompany_general: emailResult.counts?.company_general ?? 0,\n\n\t\t\t\t// SMS counts - use actual counts from communications table\n\t\t\t\tsms: commCounts?.sms ?? 0,\n\t\t\t\tsms_inbox: smsResult.counts?.inbox ?? 0,\n\t\t\t\tsms_sent: smsResult.counts?.sent ?? 0,\n\t\t\t\tsms_archive: smsResult.counts?.archive ?? 0,\n\n\t\t\t\t// Combined folder counts\n\t\t\t\tinbox:\n\t\t\t\t\t(emailResult.counts?.personal_inbox || 0) +\n\t\t\t\t\t(smsResult.counts?.inbox || 0),\n\t\t\t\tsent:\n\t\t\t\t\t(emailResult.counts?.personal_sent || 0) +\n\t\t\t\t\t(smsResult.counts?.sent || 0),\n\t\t\t\tarchive:\n\t\t\t\t\t(emailResult.counts?.personal_archive || 0) +\n\t\t\t\t\t(smsResult.counts?.archive || 0),\n\t\t\t\tstarred: emailResult.counts?.personal_starred ?? 0,\n\n\t\t\t\t// Call/voicemail counts from communications table\n\t\t\t\tcall: commCounts?.call ?? 0,\n\t\t\t\tvoicemail: commCounts?.voicemail ?? 0,\n\t\t\t};\n\n\t\t\t// Use actual total from communications table\n\t\t\tcounts.all = commCounts?.all ?? 0;\n\n\t\t\tsetConfig(getUnifiedCommunicationSidebarConfig(counts));\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch unified communication counts:\", error);\n\t\t}\n\t}, []);\n\n\t// Fetch counts on mount and periodically\n\tuseEffect(() => {\n\t\tfetchCounts();\n\t\tconst interval = setInterval(fetchCounts, 30000); // Refresh every 30 seconds\n\n\t\t// Listen for communication events to refresh counts\n\t\tconst handleRefresh = () => {\n\t\t\tsetTimeout(fetchCounts, 1000); // Debounce\n\t\t};\n\n\t\twindow.addEventListener(\"email-read\", handleRefresh);\n\t\twindow.addEventListener(\"email-archived\", handleRefresh);\n\t\twindow.addEventListener(\"sms-read\", handleRefresh);\n\t\twindow.addEventListener(\"communication-updated\", handleRefresh);\n\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t\twindow.removeEventListener(\"email-read\", handleRefresh);\n\t\t\twindow.removeEventListener(\"email-archived\", handleRefresh);\n\t\t\twindow.removeEventListener(\"sms-read\", handleRefresh);\n\t\t\twindow.removeEventListener(\"communication-updated\", handleRefresh);\n\t\t};\n\t}, [fetchCounts]);\n\n\t// Listen for compose selector open event\n\tuseEffect(() => {\n\t\tconst handleOpenCompose = () => {\n\t\t\tsetShowComposeSelector(true);\n\t\t};\n\n\t\twindow.addEventListener(\n\t\t\t\"open-unified-compose\",\n\t\t\thandleOpenCompose as EventListener,\n\t\t);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\n\t\t\t\t\"open-unified-compose\",\n\t\t\t\thandleOpenCompose as EventListener,\n\t\t\t);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<CommunicationSidebar config={config} {...props} />\n\t\t\t<ComposeTypeSelector\n\t\t\t\topen={showComposeSelector}\n\t\t\t\tonOpenChange={setShowComposeSelector}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","\"use client\";\n\nimport type { ChatSession } from \"@ai-sdk-tools/memory\";\nimport { PenLine, Search, Trash2 } from \"lucide-react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { useCallback, useEffect, useState, useTransition } from \"react\";\nimport { toast } from \"sonner\";\nimport { getChats, deleteChat as deleteChatAction } from \"@/actions/chats\";\nimport { ChatSearchCommand } from \"@/components/ai/chat-search-command\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuAction,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n} from \"@/components/ui/sidebar\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\n// Lightweight client cache to avoid spamming server actions on every rerender/navigation\nconst CHAT_CACHE_TTL = 30_000;\nlet cachedChats: ChatSession[] | null = null;\nlet cachedChatsAt = 0;\nlet inflightChatRequest: Promise<ChatSession[]> | null = null;\n\nasync function loadChatCache(limit: number, force = false): Promise<ChatSession[]> {\n\tconst now = Date.now();\n\n\t// Return cached data when still fresh\n\tif (!force && cachedChats && now - cachedChatsAt < CHAT_CACHE_TTL) {\n\t\treturn cachedChats.slice(0, limit);\n\t}\n\n\t// Deduplicate concurrent requests between button + history\n\tif (inflightChatRequest) {\n\t\treturn inflightChatRequest.then((data) => data.slice(0, limit));\n\t}\n\n\tinflightChatRequest = (async () => {\n\t\ttry {\n\t\t\tconst result = await getChats({ limit });\n\t\t\tif (result.success && result.data) {\n\t\t\t\tcachedChats = result.data;\n\t\t\t\tcachedChatsAt = Date.now();\n\t\t\t\treturn result.data;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"[NavChatHistory] Failed to load chats\", error);\n\t\t} finally {\n\t\t\tinflightChatRequest = null;\n\t\t}\n\n\t\t// On failure, return empty list and clear cache timestamp to retry later\n\t\tcachedChats = null;\n\t\tcachedChatsAt = 0;\n\t\treturn [];\n\t})();\n\n\treturn inflightChatRequest;\n}\n\nfunction updateChatCache(nextChats: ChatSession[]) {\n\tcachedChats = nextChats;\n\tcachedChatsAt = Date.now();\n}\n\n// New Chat button + Search bar - rendered above AI nav items\nexport function AiNewChatButton() {\n\tconst router = useRouter();\n\tconst [searchOpen, setSearchOpen] = useState(false);\n\tconst [hasChats, setHasChats] = useState(false);\n\n\t// Check if there are any chats for showing search\n\tuseEffect(() => {\n\t\tconst checkChats = async () => {\n\t\t\tconst chats = await loadChatCache(1);\n\t\t\tsetHasChats(chats.length > 0);\n\t\t};\n\t\tcheckChats();\n\t}, []);\n\n\tconst handleNewChat = () => {\n\t\t// Navigate to the AI landing page to start a new chat\n\t\trouter.push(\"/dashboard/ai\");\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<SidebarGroup className=\"pb-0\">\n\t\t\t\t<div className=\"px-2 space-y-3\">\n\t\t\t\t\t{/* New Chat button */}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"w-full h-9 font-medium gap-2\"\n\t\t\t\t\t\tvariant=\"default\"\n\t\t\t\t\t\tonClick={handleNewChat}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PenLine className=\"size-4\" />\n\t\t\t\t\t\t<span>New Chat</span>\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{/* Search bar - only shown when there are chats */}\n\t\t\t\t\t{hasChats && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tclassName=\"w-full h-8 gap-2 justify-start text-sm font-normal bg-muted/50 border-transparent hover:bg-muted hover:border-border\"\n\t\t\t\t\t\t\tonClick={() => setSearchOpen(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Search className=\"size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">Search chats...</span>\n\t\t\t\t\t\t\t<kbd className=\"ml-auto hidden sm:inline-flex h-5 items-center gap-1 rounded border bg-background px-1.5 font-mono text-[10px] font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t\tK\n\t\t\t\t\t\t\t</kbd>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Search command dialog */}\n\t\t\t<ChatSearchCommand open={searchOpen} onOpenChange={setSearchOpen} />\n\t\t</>\n\t);\n}\n\n// Chat history list - rendered below AI Assistant nav\nexport function NavChatHistory() {\n\tconst router = useRouter();\n\tconst pathname = usePathname();\n\tconst [chats, setChats] = useState<ChatSession[]>([]);\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [isPending, startTransition] = useTransition();\n\n\t// Extract active chat ID from pathname\n\tconst activeChatId = pathname?.match(/\\/dashboard\\/ai\\/([^/]+)/)?.[1] ?? null;\n\n\t// Load chats from database on mount\n\tuseEffect(() => {\n\t\tconst loadChats = async () => {\n\t\t\tsetIsLoading(true);\n\t\t\tconst data = await loadChatCache(10);\n\t\t\tsetChats(data);\n\t\t\tsetIsLoading(false);\n\t\t};\n\t\tloadChats();\n\t}, []);\n\n\t// Refresh chats when navigating AWAY and BACK to AI pages (not on every pathname change)\n\t// This prevents the looping POST requests caused by router.replace and revalidatePath\n\tconst [prevWasAiPage, setPrevWasAiPage] = useState(false);\n\tuseEffect(() => {\n\t\tconst isAiPage = pathname?.startsWith(\"/dashboard/ai\") ?? false;\n\t\t// Only refresh when transitioning INTO an AI page (not on every pathname change within AI)\n\t\tif (isAiPage && !prevWasAiPage) {\n\t\t\tconst refreshChats = async () => {\n\t\t\t\tconst data = await loadChatCache(10, true);\n\t\t\t\tsetChats(data);\n\t\t\t};\n\t\t\trefreshChats();\n\t\t}\n\t\tsetPrevWasAiPage(isAiPage);\n\t}, [pathname, prevWasAiPage]);\n\n\tconst handleSelectChat = useCallback((chatId: string) => {\n\t\trouter.push(`/dashboard/ai/${chatId}`);\n\t}, [router]);\n\n\tconst handleDeleteChat = useCallback(async (e: React.MouseEvent, chatId: string) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tstartTransition(async () => {\n\t\t\tconst result = await deleteChatAction(chatId);\n\t\t\tif (result.success) {\n\t\t\t\tsetChats((prev) => {\n\t\t\t\t\tconst next = prev.filter((c) => c.chatId !== chatId);\n\t\t\t\t\tupdateChatCache(next);\n\t\t\t\t\treturn next;\n\t\t\t\t});\n\t\t\t\ttoast.success(\"Chat deleted\");\n\t\t\t\t// Navigate away if we deleted the active chat\n\t\t\t\tif (activeChatId === chatId) {\n\t\t\t\t\trouter.push(\"/dashboard/ai\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast.error(\"Failed to delete chat\");\n\t\t\t}\n\t\t});\n\t}, [activeChatId, router]);\n\n\t// Loading skeleton\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarGroupLabel>Recent Chats</SidebarGroupLabel>\n\t\t\t\t<div className=\"space-y-1 px-2\">\n\t\t\t\t\t<Skeleton className=\"h-8 w-full\" />\n\t\t\t\t\t<Skeleton className=\"h-8 w-full\" />\n\t\t\t\t\t<Skeleton className=\"h-8 w-full\" />\n\t\t\t\t</div>\n\t\t\t</SidebarGroup>\n\t\t);\n\t}\n\n\t// Don't render anything if no chats\n\tif (chats.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SidebarGroup>\n\t\t\t<SidebarGroupLabel>Recent Chats</SidebarGroupLabel>\n\t\t\t<SidebarMenu>\n\t\t\t\t{chats.map((chat) => {\n\t\t\t\t\tconst isActive = activeChatId === chat.chatId;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SidebarMenuItem key={chat.chatId}>\n\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\t\t\tonClick={() => handleSelectChat(chat.chatId)}\n\t\t\t\t\t\t\t\ttitle={chat.title}\n\t\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className=\"flex-1 truncate text-left\">{chat.title}</span>\n\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t<SidebarMenuAction\n\t\t\t\t\t\t\t\taria-label=\"Delete chat\"\n\t\t\t\t\t\t\t\tonClick={(e) => handleDeleteChat(e, chat.chatId)}\n\t\t\t\t\t\t\t\tshowOnHover\n\t\t\t\t\t\t\t\ttitle=\"Delete chat\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Trash2 className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t</SidebarMenuAction>\n\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</SidebarMenu>\n\t\t</SidebarGroup>\n\t);\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4019c922633b8ec9611fbf9a4260f8b6365e540a39\":\"getChats\"},\"apps/web/src/actions/chats.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getChats=/*#__PURE__*/createServerReference(\"4019c922633b8ec9611fbf9a4260f8b6365e540a39\",callServer,void 0,findSourceMapURL,\"getChats\");","/* __next_internal_action_entry_do_not_use__ [{\"4072d8665dd8168ec873c971190c1b50389e0de901\":\"deleteChat\"},\"apps/web/src/actions/chats.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteChat=/*#__PURE__*/createServerReference(\"4072d8665dd8168ec873c971190c1b50389e0de901\",callServer,void 0,findSourceMapURL,\"deleteChat\");","\"use client\";\n\nimport { formatDistanceToNow } from \"date-fns\";\nimport { MessageSquare, Search } from \"lucide-react\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport {\n\tCommandDialog,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem,\n\tCommandList,\n} from \"@/components/ui/command\";\nimport {\n\ttype Chat,\n\tchatSelectors,\n\ttype Message,\n\tuseChatStore,\n} from \"@/lib/stores/chat-store\";\n\ntype ChatSearchCommandProps = {\n\topen: boolean;\n\tonOpenChange: (open: boolean) => void;\n};\n\ntype SearchResult = {\n\tchat: Chat;\n\tmatchedSnippet: string | null;\n\tscore: number;\n};\n\n/**\n * Compact search through chat history\n */\nfunction searchChats(chats: Chat[], query: string): SearchResult[] {\n\tif (!query.trim()) {\n\t\treturn chats\n\t\t\t.map((chat) => ({\n\t\t\t\tchat,\n\t\t\t\tmatchedSnippet: null,\n\t\t\t\tscore:\n\t\t\t\t\tchat.messages.length > 0\n\t\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].timestamp,\n\t\t\t\t\t\t\t).getTime()\n\t\t\t\t\t\t: new Date(chat.createdAt).getTime(),\n\t\t\t}))\n\t\t\t.sort((a, b) => b.score - a.score);\n\t}\n\n\tconst normalizedQuery = query.toLowerCase().trim();\n\tconst queryWords = normalizedQuery.split(/\\s+/).filter(Boolean);\n\tconst results: SearchResult[] = [];\n\n\tfor (const chat of chats) {\n\t\tlet score = 0;\n\t\tlet matchedSnippet: string | null = null;\n\n\t\t// Title match (highest weight)\n\t\tconst titleLower = chat.title.toLowerCase();\n\t\tif (queryWords.every((word) => titleLower.includes(word))) {\n\t\t\tscore += titleLower === normalizedQuery ? 150 : 100;\n\t\t}\n\n\t\t// Message content match\n\t\tfor (const message of chat.messages) {\n\t\t\tconst contentLower = message.content.toLowerCase();\n\t\t\tif (queryWords.every((word) => contentLower.includes(word))) {\n\t\t\t\tscore += message.role === \"user\" ? 20 : 10;\n\t\t\t\tif (!matchedSnippet) {\n\t\t\t\t\tconst idx = contentLower.indexOf(queryWords[0]);\n\t\t\t\t\tconst start = Math.max(0, idx - 20);\n\t\t\t\t\tconst end = Math.min(message.content.length, idx + 60);\n\t\t\t\t\tmatchedSnippet =\n\t\t\t\t\t\t(start > 0 ? \"...\" : \"\") +\n\t\t\t\t\t\tmessage.content.slice(start, end) +\n\t\t\t\t\t\t(end < message.content.length ? \"...\" : \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (score > 0) {\n\t\t\tconst lastActivity =\n\t\t\t\tchat.messages.length > 0\n\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].timestamp,\n\t\t\t\t\t\t).getTime()\n\t\t\t\t\t: new Date(chat.createdAt).getTime();\n\t\t\tresults.push({\n\t\t\t\tchat,\n\t\t\t\tmatchedSnippet,\n\t\t\t\tscore:\n\t\t\t\t\tscore +\n\t\t\t\t\tMath.min(20, (lastActivity - Date.now() + 604800000) / 86400000),\n\t\t\t});\n\t\t}\n\t}\n\n\treturn results.sort((a, b) => b.score - a.score);\n}\n\nexport function ChatSearchCommand({\n\topen,\n\tonOpenChange,\n}: ChatSearchCommandProps) {\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst chats = useChatStore(chatSelectors.chats);\n\tconst { setActiveChat } = useChatStore();\n\n\tuseEffect(() => {\n\t\tif (open) setSearchQuery(\"\");\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tconst handleKeyDown = (e: KeyboardEvent) => {\n\t\t\tif ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\n\t\t\t\te.preventDefault();\n\t\t\t\tonOpenChange(!open);\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener(\"keydown\", handleKeyDown);\n\t\treturn () => document.removeEventListener(\"keydown\", handleKeyDown);\n\t}, [open, onOpenChange]);\n\n\tconst searchResults = useMemo(\n\t\t() => searchChats(chats, searchQuery),\n\t\t[chats, searchQuery],\n\t);\n\n\tconst handleSelectChat = useCallback(\n\t\t(chatId: string) => {\n\t\t\tsetActiveChat(chatId);\n\t\t\tonOpenChange(false);\n\t\t},\n\t\t[setActiveChat, onOpenChange],\n\t);\n\n\tconst getTimeAgo = (chat: Chat) => {\n\t\tconst date =\n\t\t\tchat.messages.length > 0\n\t\t\t\t? new Date(chat.messages[chat.messages.length - 1].timestamp)\n\t\t\t\t: new Date(chat.createdAt);\n\t\treturn formatDistanceToNow(date, { addSuffix: false });\n\t};\n\n\treturn (\n\t\t<CommandDialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<CommandInput\n\t\t\t\tplaceholder=\"Search chats...\"\n\t\t\t\tvalue={searchQuery}\n\t\t\t\tonValueChange={setSearchQuery}\n\t\t\t\tclassName=\"h-9 text-sm\"\n\t\t\t/>\n\t\t\t<CommandList className=\"max-h-[320px]\">\n\t\t\t\t<CommandEmpty>\n\t\t\t\t\t<div className=\"flex flex-col items-center py-6\">\n\t\t\t\t\t\t<Search className=\"size-5 text-muted-foreground/40 mb-2\" />\n\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">No chats found</p>\n\t\t\t\t\t</div>\n\t\t\t\t</CommandEmpty>\n\n\t\t\t\t{searchResults.length > 0 && (\n\t\t\t\t\t<CommandGroup>\n\t\t\t\t\t\t{searchResults.slice(0, 15).map((result) => (\n\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\tkey={result.chat.id}\n\t\t\t\t\t\t\t\tvalue={result.chat.id}\n\t\t\t\t\t\t\t\tonSelect={() => handleSelectChat(result.chat.id)}\n\t\t\t\t\t\t\t\tclassName=\"py-2 px-2 cursor-pointer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MessageSquare className=\"size-3.5 text-muted-foreground/60 mr-2 shrink-0\" />\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-2\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm truncate\">\n\t\t\t\t\t\t\t\t\t\t\t{result.chat.title}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground/60 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t{getTimeAgo(result.chat)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{result.matchedSnippet && searchQuery && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-[11px] text-muted-foreground/70 truncate mt-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t{result.matchedSnippet}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</CommandGroup>\n\t\t\t\t)}\n\t\t\t</CommandList>\n\n\t\t\t<div className=\"border-t border-border/40 px-2 py-1.5 flex items-center justify-between\">\n\t\t\t\t<div className=\"flex items-center gap-3 text-[10px] text-muted-foreground/60\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<kbd className=\"bg-muted/60 px-1 py-0.5 rounded font-mono\"></kbd>{\" \"}\n\t\t\t\t\t\tselect\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<kbd className=\"bg-muted/60 px-1 py-0.5 rounded font-mono\"></kbd>{\" \"}\n\t\t\t\t\t\tnavigate\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"text-[10px] text-muted-foreground/60\">\n\t\t\t\t\t<kbd className=\"bg-muted/60 px-1 py-0.5 rounded font-mono\">esc</kbd>{\" \"}\n\t\t\t\t\tclose\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</CommandDialog>\n\t);\n}\n","\"use client\";\n\nimport { ChevronRight } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n\tCollapsible,\n\tCollapsibleContent,\n\tCollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport {\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n\tSidebarMenuSub,\n\tSidebarMenuSubButton,\n\tSidebarMenuSubItem,\n} from \"@/components/ui/sidebar\";\nimport type {\n\tFilterSidebarItem,\n\tLinkSidebarItem,\n\tSidebarConfig,\n\tSidebarGroup as SidebarGroupType,\n\tSidebarItem,\n\tTabSidebarItem,\n} from \"@/lib/layout/sidebar-types\";\n\ntype NavFlexibleProps = {\n\tconfig?: SidebarConfig;\n\tgroups?: SidebarGroupType[];\n\titems?: SidebarItem[];\n};\n\nexport function NavFlexible({ config, groups, items }: NavFlexibleProps) {\n\tconst pathname = usePathname();\n\tconst activeValue = config?.activeValue;\n\tconst setActiveValue = config?.onValueChange;\n\n\t// If items are provided directly, wrap them in a single group\n\tconst normalizedGroups = groups || (items ? [{ items }] : []);\n\n\tconst renderItem = (item: SidebarItem) => {\n\t\t// Link mode - traditional navigation\n\t\tif (item.mode === \"link\") {\n\t\t\tconst linkItem = item as LinkSidebarItem;\n\t\t\tconst isActive = pathname === linkItem.url;\n\n\t\t\t// If has sub-items, render as collapsible\n\t\t\tif (linkItem.items && linkItem.items.length > 0) {\n\t\t\t\treturn (\n\t\t\t\t\t<Collapsible\n\t\t\t\t\t\tasChild\n\t\t\t\t\t\tclassName=\"group/collapsible\"\n\t\t\t\t\t\tdefaultOpen={isActive}\n\t\t\t\t\t\tkey={linkItem.url}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SidebarMenuItem>\n\t\t\t\t\t\t\t<CollapsibleTrigger asChild>\n\t\t\t\t\t\t\t\t<SidebarMenuButton tooltip={linkItem.title}>\n\t\t\t\t\t\t\t\t\t{linkItem.icon && <linkItem.icon />}\n\t\t\t\t\t\t\t\t\t<span>{linkItem.title}</span>\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t\t<SidebarMenuSub>\n\t\t\t\t\t\t\t\t\t{linkItem.items.map((subItem) => {\n\t\t\t\t\t\t\t\t\t\tconst isSubActive = pathname === subItem.url;\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubItem key={subItem.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubButton asChild isActive={isSubActive}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link href={subItem.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{subItem.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubButton>\n\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</SidebarMenuSub>\n\t\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t</Collapsible>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Regular link item\n\t\t\treturn (\n\t\t\t\t<SidebarMenuItem key={linkItem.url}>\n\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\tasChild\n\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\ttooltip={linkItem.title}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Link href={linkItem.url}>\n\t\t\t\t\t\t\t{linkItem.icon && <linkItem.icon />}\n\t\t\t\t\t\t\t<span>{linkItem.title}</span>\n\t\t\t\t\t\t\t{linkItem.badge && (\n\t\t\t\t\t\t\t\t<span className=\"bg-primary text-primary-foreground ml-auto flex h-5 min-w-5 items-center justify-center rounded-full px-1.5 text-xs font-medium\">\n\t\t\t\t\t\t\t\t\t{linkItem.badge}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t</SidebarMenuItem>\n\t\t\t);\n\t\t}\n\n\t\t// Tab mode - view switching\n\t\tif (item.mode === \"tab\") {\n\t\t\tconst tabItem = item as TabSidebarItem;\n\t\t\tconst isActive =\n\t\t\t\tactiveValue === tabItem.value ||\n\t\t\t\t(activeValue === undefined && config?.defaultValue === tabItem.value);\n\n\t\t\treturn (\n\t\t\t\t<SidebarMenuItem key={tabItem.value}>\n\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\tonClick={() => setActiveValue?.(tabItem.value)}\n\t\t\t\t\t\ttooltip={tabItem.title}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabItem.icon && <tabItem.icon />}\n\t\t\t\t\t\t<span>{tabItem.title}</span>\n\t\t\t\t\t\t{tabItem.badge && (\n\t\t\t\t\t\t\t<span className=\"bg-primary text-primary-foreground ml-auto flex h-5 min-w-5 items-center justify-center rounded-full px-1.5 text-xs font-medium\">\n\t\t\t\t\t\t\t\t{tabItem.badge}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t</SidebarMenuItem>\n\t\t\t);\n\t\t}\n\n\t\t// Filter mode - data filtering\n\t\tif (item.mode === \"filter\") {\n\t\t\tconst filterItem = item as FilterSidebarItem;\n\t\t\tconst isActive =\n\t\t\t\tactiveValue === filterItem.value ||\n\t\t\t\t(activeValue === undefined &&\n\t\t\t\t\tconfig?.defaultValue === filterItem.value);\n\n\t\t\treturn (\n\t\t\t\t<SidebarMenuItem key={filterItem.value}>\n\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\tonClick={() => setActiveValue?.(filterItem.value)}\n\t\t\t\t\t\ttooltip={filterItem.title}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filterItem.icon && <filterItem.icon />}\n\t\t\t\t\t\t<span>{filterItem.title}</span>\n\t\t\t\t\t\t{filterItem.count !== undefined && (\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground ml-auto text-xs\">\n\t\t\t\t\t\t\t\t{filterItem.count}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t</SidebarMenuItem>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{normalizedGroups.map((group, index) => (\n\t\t\t\t<SidebarGroup key={group.label || `group-${index}`}>\n\t\t\t\t\t{group.label && <SidebarGroupLabel>{group.label}</SidebarGroupLabel>}\n\t\t\t\t\t<SidebarMenu>{group.items.map(renderItem)}</SidebarMenu>\n\t\t\t\t</SidebarGroup>\n\t\t\t))}\n\t\t</>\n\t);\n}\n","import { ChevronRight, type LucideIcon } from \"lucide-react\";\nimport Link from \"next/link\";\nimport {\n\tCollapsible,\n\tCollapsibleContent,\n\tCollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport {\n\tSidebarGroup,\n\tSidebarMenu,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n\tSidebarMenuSub,\n\tSidebarMenuSubButton,\n\tSidebarMenuSubItem,\n} from \"@/components/ui/sidebar\";\n\nexport function NavMain({\n\titems,\n\tpathname = \"/dashboard\",\n}: {\n\titems: {\n\t\ttitle: string;\n\t\turl: string;\n\t\ticon?: LucideIcon;\n\t\tisActive?: boolean;\n\t\titems?: {\n\t\t\ttitle: string;\n\t\t\turl: string;\n\t\t}[];\n\t}[];\n\tpathname?: string;\n}) {\n\tconst safePathname = pathname || \"/dashboard\";\n\n\treturn (\n\t\t<SidebarGroup>\n\t\t\t<SidebarMenu>\n\t\t\t\t{items.map((item) => {\n\t\t\t\t\t// Check if current path matches this item or its detail pages\n\t\t\t\t\tconst isExactMatch = safePathname === item.url;\n\t\t\t\t\tconst isDetailPage = safePathname.startsWith(`${item.url}/`);\n\t\t\t\t\tconst hasActiveSubItem = item.items?.some(\n\t\t\t\t\t\t(subItem) =>\n\t\t\t\t\t\t\tsafePathname === subItem.url ||\n\t\t\t\t\t\t\tsafePathname.startsWith(`${subItem.url}/`),\n\t\t\t\t\t);\n\t\t\t\t\tconst isActive = isExactMatch || isDetailPage || hasActiveSubItem;\n\n\t\t\t\t\t// If item has sub-items, render parent + children\n\t\t\t\t\tif (item.items && item.items.length > 0) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Collapsible\n\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\tdefaultOpen={true}\n\t\t\t\t\t\t\t\tkey={item.title}\n\t\t\t\t\t\t\t\topen={true}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SidebarMenuItem>\n\t\t\t\t\t\t\t\t\t<CollapsibleTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\t\t\tisActive={isActive && safePathname === item.url}\n\t\t\t\t\t\t\t\t\t\t\ttooltip={item.title}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t<ChevronRight className=\"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90\" />\n\t\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t\t\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t\t\t\t\t\t<SidebarMenuSub>\n\t\t\t\t\t\t\t\t\t\t\t{item.items.map((subItem) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst isSubActive =\n\t\t\t\t\t\t\t\t\t\t\t\t\tsafePathname === subItem.url ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tsafePathname.startsWith(`${subItem.url}/`);\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubItem key={subItem.title}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SidebarMenuSubButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisActive={isSubActive}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link href={subItem.url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{subItem.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</SidebarMenuSubItem>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</SidebarMenuSub>\n\t\t\t\t\t\t\t\t\t</CollapsibleContent>\n\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t</Collapsible>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Regular menu item without sub-items\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SidebarMenuItem key={item.title}>\n\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\t\t\ttooltip={item.title}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Link href={item.url}>\n\t\t\t\t\t\t\t\t\t{item.icon && <item.icon />}\n\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</SidebarMenu>\n\t\t</SidebarGroup>\n\t);\n}\n","\"use client\";\n\n/**\n * Price Book Tree Sidebar Component\n *\n * Shows category hierarchy as a collapsible tree:\n * - Full category structure up to 5 levels deep\n * - Only shows categories (folders), not individual items\n * - Current location highlighted\n * - Click any category to navigate and see its items/subcategories\n * - Auto-expand to show current path\n * - Items are displayed in main content area (cards/table), not in tree\n */\n\nimport { ArrowLeft, ChevronRight, Folder } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport {\n\tCollapsible,\n\tCollapsibleContent,\n\tCollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport {\n\tSidebar,\n\tSidebarContent,\n\tSidebarGroup,\n\tSidebarGroupContent,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuBadge,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n\tSidebarMenuSub,\n\tSidebarRail,\n} from \"@/components/ui/sidebar\";\nimport { getCategoryTreeClient } from \"@/lib/pricebook/category-tree-client\";\nimport { buildCategoryUrl } from \"@/lib/pricebook/utils\";\nimport { usePriceBookStore } from \"@/lib/stores/pricebook-store\";\nimport { cn } from \"@/lib/utils\";\nimport type { CategoryNode } from \"./drill-down-view\";\n\n// TreeNode props type\n\ntype TreeNodeProps = {\n\tnode: CategoryNode;\n\tparentPath: string[];\n\tdepth?: number;\n};\n\nconst MAX_TREE_DEPTH = 5;\n\nfunction TreeNode({ node, parentPath, depth = 0 }: TreeNodeProps) {\n\tconst router = useRouter();\n\tconst navigationPath = usePriceBookStore((state) => state.navigationPath);\n\n\tconst currentPath = [...parentPath, node.name];\n\n\t// Check if this node or any of its descendants is in the current path\n\tconst isInPath = navigationPath.some((_segment, index) => {\n\t\tconst checkPath = navigationPath.slice(0, index + 1);\n\t\treturn checkPath.join(\" > \").startsWith(currentPath.join(\" > \"));\n\t});\n\n\tconst isActive =\n\t\tnavigationPath.length === currentPath.length &&\n\t\tnavigationPath.every((segment, index) => segment === currentPath[index]);\n\n\tconst hasChildren = node.children && node.children.length > 0;\n\tconst canShowChildren = hasChildren && depth < MAX_TREE_DEPTH;\n\n\tconst handleClick = () => {\n\t\t// Navigate using Next.js router - this will update URL and trigger state sync\n\t\tconst url = buildCategoryUrl(currentPath);\n\t\trouter.push(url);\n\t};\n\n\t// Calculate left padding based on depth using inline style\n\tconst indentStyle =\n\t\tdepth > 0 ? { paddingLeft: `${depth * 1.5 + 0.5}rem` } : undefined;\n\n\t// Leaf node (no children) or max depth reached - show as simple folder button\n\t// Items will be shown in main content area, not in tree\n\tif (!canShowChildren) {\n\t\treturn (\n\t\t\t<SidebarMenuItem>\n\t\t\t\t<SidebarMenuButton\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"pr-8\",\n\t\t\t\t\t\tisActive && \"bg-primary/10 text-primary font-medium\",\n\t\t\t\t\t)}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\tstyle={indentStyle}\n\t\t\t\t\ttooltip={{\n\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p className=\"font-medium\">{node.name}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t{node.count} items\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Folder className=\"size-4 shrink-0\" />\n\t\t\t\t\t{node.name}\n\t\t\t\t</SidebarMenuButton>\n\t\t\t\t<SidebarMenuBadge>{node.count}</SidebarMenuBadge>\n\t\t\t</SidebarMenuItem>\n\t\t);\n\t}\n\n\t// Parent node (has children and under depth limit)\n\treturn (\n\t\t<SidebarMenuItem>\n\t\t\t<Collapsible\n\t\t\t\tclassName=\"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90\"\n\t\t\t\tdefaultOpen={isInPath}\n\t\t\t>\n\t\t\t\t<CollapsibleTrigger asChild>\n\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"pr-8\",\n\t\t\t\t\t\t\tisActive && \"bg-primary/10 text-primary font-medium\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\tstyle={indentStyle}\n\t\t\t\t\t\ttooltip={{\n\t\t\t\t\t\t\tchildren: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{node.name}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t{node.count} items\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChevronRight className=\"shrink-0 transition-transform\" />\n\t\t\t\t\t\t<Folder className=\"size-4 shrink-0\" />\n\t\t\t\t\t\t{node.name}\n\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t</CollapsibleTrigger>\n\t\t\t\t<SidebarMenuBadge>{node.count}</SidebarMenuBadge>\n\t\t\t\t<CollapsibleContent>\n\t\t\t\t\t<SidebarMenuSub className=\"mx-0 px-0\">\n\t\t\t\t\t\t{node.children?.map((child) => (\n\t\t\t\t\t\t\t<TreeNode\n\t\t\t\t\t\t\t\tdepth={depth + 1}\n\t\t\t\t\t\t\t\tkey={child.name}\n\t\t\t\t\t\t\t\tnode={child}\n\t\t\t\t\t\t\t\tparentPath={currentPath}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SidebarMenuSub>\n\t\t\t\t</CollapsibleContent>\n\t\t\t</Collapsible>\n\t\t</SidebarMenuItem>\n\t);\n}\n\ntype PriceBookTreeSidebarProps = React.ComponentProps<typeof Sidebar>;\n\nexport function PriceBookTreeSidebar(props: PriceBookTreeSidebarProps) {\n\tconst router = useRouter();\n\tconst navigationPath = usePriceBookStore((state) => state.navigationPath);\n\tconst isAtRoot = navigationPath.length === 0;\n\n\tconst [categories, setCategories] = useState<CategoryNode[]>([]);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\t// Fetch categories on mount\n\tuseEffect(() => {\n\t\tasync function loadCategories() {\n\t\t\ttry {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tconst tree = await getCategoryTreeClient();\n\t\t\t\tsetCategories(tree);\n\t\t\t} catch (_error) {\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t}\n\n\t\tloadCategories();\n\t}, []);\n\n\tconst handleRootClick = () => {\n\t\trouter.push(\"/dashboard/work/pricebook\");\n\t};\n\n\tconst handleBackClick = () => {\n\t\trouter.push(\"/dashboard/work\");\n\t};\n\n\treturn (\n\t\t<Sidebar collapsible=\"offcanvas\" variant=\"inset\" {...props}>\n\t\t\t<SidebarContent>\n\t\t\t\t<SidebarGroup>\n\t\t\t\t\t<SidebarGroupContent>\n\t\t\t\t\t\t<SidebarMenu>\n\t\t\t\t\t\t\t<SidebarMenuItem>\n\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\tonClick={handleBackClick}\n\t\t\t\t\t\t\t\t\ttooltip=\"Return to Work\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArrowLeft className=\"size-4 shrink-0\" />\n\t\t\t\t\t\t\t\t\tBack to Work\n\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t</SidebarMenu>\n\t\t\t\t\t</SidebarGroupContent>\n\t\t\t\t</SidebarGroup>\n\t\t\t\t<SidebarGroup>\n\t\t\t\t\t<SidebarGroupLabel>Categories</SidebarGroupLabel>\n\t\t\t\t\t<SidebarGroupContent>\n\t\t\t\t\t\t<SidebarMenu>\n\t\t\t\t\t\t\t{/* All Items */}\n\t\t\t\t\t\t\t<SidebarMenuItem>\n\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\tisAtRoot && \"bg-primary/10 text-primary font-medium\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tisActive={isAtRoot}\n\t\t\t\t\t\t\t\t\tonClick={handleRootClick}\n\t\t\t\t\t\t\t\t\ttooltip=\"Browse all categories\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Folder className=\"size-4 shrink-0\" />\n\t\t\t\t\t\t\t\t\tAll Items\n\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t</SidebarMenuItem>\n\n\t\t\t\t\t\t\t{/* Category Tree - Max 5 levels deep */}\n\t\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t\t// Loading skeleton\n\t\t\t\t\t\t\t\t<div className=\"space-y-2 px-2 py-2\">\n\t\t\t\t\t\t\t\t\t{[...new Array(3)].map((_, i) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-muted h-8 animate-pulse rounded\"\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tcategories.map((category) => (\n\t\t\t\t\t\t\t\t\t<TreeNode\n\t\t\t\t\t\t\t\t\t\tdepth={0}\n\t\t\t\t\t\t\t\t\t\tkey={category.name}\n\t\t\t\t\t\t\t\t\t\tnode={category}\n\t\t\t\t\t\t\t\t\t\tparentPath={[]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</SidebarMenu>\n\t\t\t\t\t</SidebarGroupContent>\n\t\t\t\t</SidebarGroup>\n\t\t\t</SidebarContent>\n\t\t\t<SidebarRail />\n\t\t</Sidebar>\n\t);\n}\n","/**\n * Client-Side Category Tree Functions\n *\n * Functions for fetching and building category trees on the client.\n * Uses browser-side Supabase client.\n */\n\nimport { createClient as createBrowserClient } from \"@/lib/supabase/client\";\nimport {\n\tbuildCategoryTree,\n\ttype DatabaseCategory,\n} from \"./category-tree-shared\";\n\n/**\n * Fetch all categories for the current user's company (client-side)\n */\nasync function fetchCategoriesClient(): Promise<DatabaseCategory[]> {\n\tconst supabase = createBrowserClient();\n\n\tif (!supabase) {\n\t\treturn [];\n\t}\n\n\tconst { data: categories, error } = await supabase\n\t\t.from(\"price_book_categories\")\n\t\t.select(\n\t\t\t\"id, name, slug, parent_id, path, level, sort_order, item_count, descendant_item_count\",\n\t\t)\n\t\t.eq(\"is_active\", true)\n\t\t.order(\"level\", { ascending: true })\n\t\t.order(\"sort_order\", { ascending: true });\n\n\tif (error) {\n\t\treturn [];\n\t}\n\n\treturn categories || [];\n}\n\n/**\n * Fetch and build complete category tree (client-side)\n */\nexport async function getCategoryTreeClient() {\n\tconst categories = await fetchCategoriesClient();\n\treturn buildCategoryTree(categories);\n}\n","/**\n * Shared Category Tree Utilities\n *\n * Pure utility functions for building and navigating category trees.\n * Can be imported by both server and client code.\n */\n\nimport type { CategoryNode } from \"@/components/pricebook/drill-down-view\";\n\nexport type DatabaseCategory = {\n\tid: string;\n\tname: string;\n\tslug: string;\n\tparent_id: string | null;\n\tpath: string;\n\tlevel: number;\n\tsort_order: number;\n\titem_count: number;\n\tdescendant_item_count: number;\n};\n\n/**\n * Build hierarchical category tree from flat list\n */\nexport function buildCategoryTree(\n\tcategories: DatabaseCategory[],\n): CategoryNode[] {\n\t// Create a map for quick lookup\n\tconst categoryMap = new Map<\n\t\tstring,\n\t\tCategoryNode & { parent_id: string | null }\n\t>();\n\n\t// First pass: Create all nodes\n\tcategories.forEach((cat) => {\n\t\tcategoryMap.set(cat.id, {\n\t\t\tname: cat.name,\n\t\t\tcount: cat.descendant_item_count, // Use descendant count for tree display\n\t\t\timageUrl: undefined, // Could be added to schema later\n\t\t\tchildren: [],\n\t\t\tparent_id: cat.parent_id,\n\t\t});\n\t});\n\n\t// Second pass: Build tree structure\n\tconst rootNodes: CategoryNode[] = [];\n\n\tcategoryMap.forEach((node, _id) => {\n\t\tif (node.parent_id === null) {\n\t\t\t// Root level category\n\t\t\tconst { parent_id, ...cleanNode } = node;\n\t\t\trootNodes.push(cleanNode);\n\t\t} else {\n\t\t\t// Child category - add to parent's children\n\t\t\tconst parent = categoryMap.get(node.parent_id);\n\t\t\tif (parent?.children) {\n\t\t\t\tconst { parent_id, ...cleanNode } = node;\n\t\t\t\tparent.children.push(cleanNode);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn rootNodes;\n}\n\n/**\n * Get categories at a specific path level\n * Example: [\"HVAC\", \"Heating\"] returns children of HVAC > Heating\n */\nexport function getCategoriesAtPath(\n\ttree: CategoryNode[],\n\tpath: string[],\n): CategoryNode[] {\n\tlet current = tree;\n\n\tfor (const segment of path) {\n\t\tconst found = current.find((cat) => cat.name === segment);\n\t\tif (!found?.children) {\n\t\t\treturn [];\n\t\t}\n\t\tcurrent = found.children;\n\t}\n\n\treturn current;\n}\n","\"use client\";\n\n/**\n * Reporting Sidebar Navigation V2 - Client Component\n *\n * Clean, focused design:\n * - Preset reports in a compact dropdown menu\n * - Custom reports take center stage\n * - More space for user's personal reports\n */\n\nimport {\n\tBarChart3,\n\tDollarSign,\n\tPlus,\n\tTrash2,\n\tTrendingUp,\n\tUsers,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuAction,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n} from \"@/components/ui/sidebar\";\nimport {\n\treportingSelectors,\n\tuseReportingStore,\n} from \"@/lib/stores/reporting-store\";\nimport { PresetReportsDropdown } from \"./preset-reports-dropdown\";\n\n// Top 4 reports every business owner needs\nconst topReports = [\n\t{\n\t\ttitle: \"Profit & Loss\",\n\t\thref: \"/dashboard/reporting/finance/profit-loss\",\n\t\ticon: DollarSign,\n\t\tdescription: \"Essential financial overview\",\n\t},\n\t{\n\t\ttitle: \"Revenue Analysis\",\n\t\thref: \"/dashboard/reporting/finance/revenue\",\n\t\ticon: TrendingUp,\n\t\tdescription: \"Track income trends\",\n\t},\n\t{\n\t\ttitle: \"Team Performance\",\n\t\thref: \"/dashboard/reporting/team/leaderboard\",\n\t\ticon: Users,\n\t\tdescription: \"Technician rankings\",\n\t},\n\t{\n\t\ttitle: \"Job Performance\",\n\t\thref: \"/dashboard/reporting/operations/jobs\",\n\t\ticon: BarChart3,\n\t\tdescription: \"Operations metrics\",\n\t},\n];\n\nexport function ReportingSidebarNav() {\n\tconst pathname = usePathname();\n\tconst customReports = useReportingStore(reportingSelectors.customReports);\n\tconst { deleteCustomReport, setIsCreatingReport } = useReportingStore();\n\n\tconst handleDeleteReport = (e: React.MouseEvent, reportId: string) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tdeleteCustomReport(reportId);\n\t};\n\n\tconst handleCreateReport = () => {\n\t\tsetIsCreatingReport(true);\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t{/* Preset Reports Dropdown */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarGroupLabel>All Reports</SidebarGroupLabel>\n\t\t\t\t<PresetReportsDropdown />\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Top Reports for Business Owners */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarGroupLabel>Quick Access</SidebarGroupLabel>\n\t\t\t\t<SidebarMenu>\n\t\t\t\t\t{topReports.map((report) => {\n\t\t\t\t\t\tconst isActive = pathname === report.href;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SidebarMenuItem key={report.href}>\n\t\t\t\t\t\t\t\t<SidebarMenuButton\n\t\t\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\t\t\tisActive={isActive}\n\t\t\t\t\t\t\t\t\ttooltip={report.description}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Link href={report.href}>\n\t\t\t\t\t\t\t\t\t\t<report.icon className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex-1 truncate\">{report.title}</span>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</SidebarMenu>\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Custom Reports Section - Takes Center Stage */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarGroupLabel className=\"flex items-center justify-between\">\n\t\t\t\t\t<span>My Custom Reports</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground flex h-5 w-5 items-center justify-center rounded-md transition-colors\"\n\t\t\t\t\t\tonClick={handleCreateReport}\n\t\t\t\t\t\ttitle=\"Create new report\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</SidebarGroupLabel>\n\t\t\t\t<SidebarMenu>\n\t\t\t\t\t{customReports.length === 0 ? (\n\t\t\t\t\t\t<div className=\"px-2 py-8 text-center\">\n\t\t\t\t\t\t\t<p className=\"text-muted-foreground mb-2 text-sm\">\n\t\t\t\t\t\t\t\tNo custom reports yet\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"text-primary text-xs hover:underline\"\n\t\t\t\t\t\t\t\tonClick={handleCreateReport}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCreate your first report\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tcustomReports.map((report) => {\n\t\t\t\t\t\t\tconst isActive = pathname === report.href;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<SidebarMenuItem key={report.id}>\n\t\t\t\t\t\t\t\t\t<SidebarMenuButton asChild isActive={isActive}>\n\t\t\t\t\t\t\t\t\t\t<Link href={report.href}>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex-1 truncate text-left\">\n\t\t\t\t\t\t\t\t\t\t\t\t{report.title}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t\t\t\t\t<SidebarMenuAction\n\t\t\t\t\t\t\t\t\t\taria-label=\"Delete report\"\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => handleDeleteReport(e, report.id)}\n\t\t\t\t\t\t\t\t\t\tshowOnHover\n\t\t\t\t\t\t\t\t\t\ttitle=\"Delete report\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t</SidebarMenuAction>\n\t\t\t\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t)}\n\t\t\t\t</SidebarMenu>\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Quick Tips / Help Section */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<div className=\"border-border bg-muted/30 rounded-lg border p-3\">\n\t\t\t\t\t<p className=\"mb-1 text-xs font-medium\"> Pro Tip</p>\n\t\t\t\t\t<p className=\"text-muted-foreground text-xs leading-relaxed\">\n\t\t\t\t\t\tCreate custom reports with your own filters and metrics. Save time\n\t\t\t\t\t\tby building reports you check frequently.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</SidebarGroup>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Preset Reports Dropdown - Client Component\n *\n * Displays all preset reports in a compact dropdown menu\n * Organized by category with search functionality\n */\n\nimport { ChevronRight, FileBarChart, Search } from \"lucide-react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\n\ntype PresetReport = {\n\ttitle: string;\n\thref: string;\n\tbadge?: string;\n};\n\ntype ReportCategory = {\n\tlabel: string;\n\titems: PresetReport[];\n};\n\nconst presetReports: ReportCategory[] = [\n\t{\n\t\tlabel: \"Quick Access\",\n\t\titems: [\n\t\t\t{ title: \"Overview\", href: \"/dashboard/reporting\" },\n\t\t\t{\n\t\t\t\ttitle: \"Executive Dashboard\",\n\t\t\t\thref: \"/dashboard/reporting/executive\",\n\t\t\t\tbadge: \"Premium\",\n\t\t\t},\n\t\t\t{ title: \"Custom Reports Builder\", href: \"/dashboard/reporting/custom\" },\n\t\t],\n\t},\n\t{\n\t\tlabel: \"AI & Intelligence\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"AI Performance Metrics\",\n\t\t\t\thref: \"/dashboard/reporting/ai/performance\",\n\t\t\t\tbadge: \"New\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Conversation Analytics\",\n\t\t\t\thref: \"/dashboard/reporting/ai/conversations\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Sentiment Analysis\",\n\t\t\t\thref: \"/dashboard/reporting/ai/sentiment\",\n\t\t\t},\n\t\t\t{ title: \"AI Response Quality\", href: \"/dashboard/reporting/ai/quality\" },\n\t\t\t{\n\t\t\t\ttitle: \"Training Data Insights\",\n\t\t\t\thref: \"/dashboard/reporting/ai/training\",\n\t\t\t},\n\t\t\t{ title: \"AI Cost Analysis\", href: \"/dashboard/reporting/ai/costs\" },\n\t\t\t{\n\t\t\t\ttitle: \"Automation Success Rate\",\n\t\t\t\thref: \"/dashboard/reporting/ai/automation\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Communication Analytics\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Phone Call Reports\",\n\t\t\t\thref: \"/dashboard/reporting/communication/calls\",\n\t\t\t\tbadge: \"Popular\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Call Duration & Volume\",\n\t\t\t\thref: \"/dashboard/reporting/communication/call-metrics\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Call Recordings\",\n\t\t\t\thref: \"/dashboard/reporting/communication/call-recordings\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Text Message Analytics\",\n\t\t\t\thref: \"/dashboard/reporting/communication/sms\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Email Campaigns\",\n\t\t\t\thref: \"/dashboard/reporting/communication/email\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Email Metrics\",\n\t\t\t\thref: \"/dashboard/reporting/communication/email-metrics\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Support Tickets\",\n\t\t\t\thref: \"/dashboard/reporting/communication/tickets\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Response Times\",\n\t\t\t\thref: \"/dashboard/reporting/communication/response-time\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Customer Satisfaction\",\n\t\t\t\thref: \"/dashboard/reporting/communication/satisfaction\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Channel Performance\",\n\t\t\t\thref: \"/dashboard/reporting/communication/channels\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Financial Reports\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Profit & Loss\",\n\t\t\t\thref: \"/dashboard/reporting/finance/profit-loss\",\n\t\t\t\tbadge: \"Essential\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Revenue Analysis\",\n\t\t\t\thref: \"/dashboard/reporting/finance/revenue\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Expense Breakdown\",\n\t\t\t\thref: \"/dashboard/reporting/finance/expenses\",\n\t\t\t},\n\t\t\t{ title: \"Cash Flow\", href: \"/dashboard/reporting/finance/cash-flow\" },\n\t\t\t{\n\t\t\t\ttitle: \"Invoice Aging\",\n\t\t\t\thref: \"/dashboard/reporting/finance/invoice-aging\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Payment Analytics\",\n\t\t\t\thref: \"/dashboard/reporting/finance/payments\",\n\t\t\t},\n\t\t\t{ title: \"Tax Reports\", href: \"/dashboard/reporting/finance/tax\" },\n\t\t\t{\n\t\t\t\ttitle: \"Budget vs Actual\",\n\t\t\t\thref: \"/dashboard/reporting/finance/budget\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Job Profitability\",\n\t\t\t\thref: \"/dashboard/reporting/finance/job-profitability\",\n\t\t\t},\n\t\t\t{ title: \"Customer LTV\", href: \"/dashboard/reporting/finance/ltv\" },\n\t\t\t{ title: \"Accounts Receivable\", href: \"/dashboard/reporting/finance/ar\" },\n\t\t\t{ title: \"Accounts Payable\", href: \"/dashboard/reporting/finance/ap\" },\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Operations & Jobs\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Job Performance\",\n\t\t\t\thref: \"/dashboard/reporting/operations/jobs\",\n\t\t\t\tbadge: \"Popular\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Service Types\",\n\t\t\t\thref: \"/dashboard/reporting/operations/service-types\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Completion Rates\",\n\t\t\t\thref: \"/dashboard/reporting/operations/completion\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Schedule Efficiency\",\n\t\t\t\thref: \"/dashboard/reporting/operations/schedule\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Dispatch Analytics\",\n\t\t\t\thref: \"/dashboard/reporting/operations/dispatch\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Route Optimization\",\n\t\t\t\thref: \"/dashboard/reporting/operations/routes\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Equipment Usage\",\n\t\t\t\thref: \"/dashboard/reporting/operations/equipment\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Materials Usage\",\n\t\t\t\thref: \"/dashboard/reporting/operations/materials\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Inventory Turnover\",\n\t\t\t\thref: \"/dashboard/reporting/operations/inventory\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Warranty Claims\",\n\t\t\t\thref: \"/dashboard/reporting/operations/warranty\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Team Performance\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Technician Leaderboard\",\n\t\t\t\thref: \"/dashboard/reporting/team/leaderboard\",\n\t\t\t\tbadge: \"Popular\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Individual Performance\",\n\t\t\t\thref: \"/dashboard/reporting/team/individual\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Team Productivity\",\n\t\t\t\thref: \"/dashboard/reporting/team/productivity\",\n\t\t\t},\n\t\t\t{ title: \"Revenue Per Tech\", href: \"/dashboard/reporting/team/revenue\" },\n\t\t\t{\n\t\t\t\ttitle: \"Jobs Completed\",\n\t\t\t\thref: \"/dashboard/reporting/team/jobs-completed\",\n\t\t\t},\n\t\t\t{ title: \"Customer Ratings\", href: \"/dashboard/reporting/team/ratings\" },\n\t\t\t{\n\t\t\t\ttitle: \"Time Tracking\",\n\t\t\t\thref: \"/dashboard/reporting/team/time-tracking\",\n\t\t\t},\n\t\t\t{ title: \"Attendance\", href: \"/dashboard/reporting/team/attendance\" },\n\t\t\t{ title: \"Training\", href: \"/dashboard/reporting/team/training\" },\n\t\t\t{\n\t\t\t\ttitle: \"Certifications\",\n\t\t\t\thref: \"/dashboard/reporting/team/certifications\",\n\t\t\t},\n\t\t\t{ title: \"Commissions\", href: \"/dashboard/reporting/team/commission\" },\n\t\t\t{ title: \"Bonuses\", href: \"/dashboard/reporting/team/bonus\" },\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Customer Analytics\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Acquisition\",\n\t\t\t\thref: \"/dashboard/reporting/customers/acquisition\",\n\t\t\t},\n\t\t\t{ title: \"Retention\", href: \"/dashboard/reporting/customers/retention\" },\n\t\t\t{ title: \"Churn Analysis\", href: \"/dashboard/reporting/customers/churn\" },\n\t\t\t{ title: \"Segments\", href: \"/dashboard/reporting/customers/segments\" },\n\t\t\t{\n\t\t\t\ttitle: \"Service History\",\n\t\t\t\thref: \"/dashboard/reporting/customers/service-history\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Repeat Business\",\n\t\t\t\thref: \"/dashboard/reporting/customers/repeat\",\n\t\t\t},\n\t\t\t{ title: \"Referrals\", href: \"/dashboard/reporting/customers/referrals\" },\n\t\t\t{ title: \"Geography\", href: \"/dashboard/reporting/customers/geography\" },\n\t\t\t{\n\t\t\t\ttitle: \"Demographics\",\n\t\t\t\thref: \"/dashboard/reporting/customers/demographics\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Marketing & Growth\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Campaigns\",\n\t\t\t\thref: \"/dashboard/reporting/marketing/campaigns\",\n\t\t\t\tbadge: \"New\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Lead Generation\",\n\t\t\t\thref: \"/dashboard/reporting/marketing/leads\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Conversions\",\n\t\t\t\thref: \"/dashboard/reporting/marketing/conversion\",\n\t\t\t},\n\t\t\t{ title: \"ROI Analysis\", href: \"/dashboard/reporting/marketing/roi\" },\n\t\t\t{\n\t\t\t\ttitle: \"Website Analytics\",\n\t\t\t\thref: \"/dashboard/reporting/marketing/website\",\n\t\t\t},\n\t\t\t{ title: \"Social Media\", href: \"/dashboard/reporting/marketing/social\" },\n\t\t\t{ title: \"Reviews\", href: \"/dashboard/reporting/marketing/reviews\" },\n\t\t\t{ title: \"Ad Performance\", href: \"/dashboard/reporting/marketing/ads\" },\n\t\t\t{ title: \"SEO Rankings\", href: \"/dashboard/reporting/marketing/seo\" },\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Scheduling & Dispatch\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Utilization\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/utilization\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"First-Time Fix\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/first-time-fix\",\n\t\t\t},\n\t\t\t{ title: \"Callbacks\", href: \"/dashboard/reporting/schedule/callbacks\" },\n\t\t\t{\n\t\t\t\ttitle: \"Travel Time\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/travel-time\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Same-Day Bookings\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/same-day\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Appointment Types\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/appointment-types\",\n\t\t\t},\n\t\t\t{ title: \"No-Shows\", href: \"/dashboard/reporting/schedule/no-shows\" },\n\t\t\t{\n\t\t\t\ttitle: \"Rescheduling\",\n\t\t\t\thref: \"/dashboard/reporting/schedule/rescheduling\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Maintenance & Agreements\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Active Agreements\",\n\t\t\t\thref: \"/dashboard/reporting/maintenance/active\",\n\t\t\t},\n\t\t\t{ title: \"Renewals\", href: \"/dashboard/reporting/maintenance/renewals\" },\n\t\t\t{ title: \"Revenue\", href: \"/dashboard/reporting/maintenance/revenue\" },\n\t\t\t{ title: \"Schedule\", href: \"/dashboard/reporting/maintenance/schedule\" },\n\t\t\t{\n\t\t\t\ttitle: \"Preventive\",\n\t\t\t\thref: \"/dashboard/reporting/maintenance/preventive\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Profitability\",\n\t\t\t\thref: \"/dashboard/reporting/maintenance/profitability\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Inventory & Materials\",\n\t\titems: [\n\t\t\t{ title: \"Stock Levels\", href: \"/dashboard/reporting/inventory/stock\" },\n\t\t\t{ title: \"Costs\", href: \"/dashboard/reporting/inventory/costs\" },\n\t\t\t{\n\t\t\t\ttitle: \"Reorder Trends\",\n\t\t\t\thref: \"/dashboard/reporting/inventory/reorder\",\n\t\t\t},\n\t\t\t{ title: \"Suppliers\", href: \"/dashboard/reporting/inventory/suppliers\" },\n\t\t\t{ title: \"Part Usage\", href: \"/dashboard/reporting/inventory/usage\" },\n\t\t\t{\n\t\t\t\ttitle: \"Dead Stock\",\n\t\t\t\thref: \"/dashboard/reporting/inventory/dead-stock\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Compliance & Safety\",\n\t\titems: [\n\t\t\t{ title: \"Licensing\", href: \"/dashboard/reporting/compliance/licensing\" },\n\t\t\t{ title: \"Insurance\", href: \"/dashboard/reporting/compliance/insurance\" },\n\t\t\t{\n\t\t\t\ttitle: \"Certifications\",\n\t\t\t\thref: \"/dashboard/reporting/compliance/certifications\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Safety Incidents\",\n\t\t\t\thref: \"/dashboard/reporting/compliance/safety\",\n\t\t\t},\n\t\t\t{ title: \"OSHA\", href: \"/dashboard/reporting/compliance/osha\" },\n\t\t\t{ title: \"Audits\", href: \"/dashboard/reporting/compliance/audits\" },\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Advanced Analytics\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Predictive Insights\",\n\t\t\t\thref: \"/dashboard/reporting/analytics/predictive\",\n\t\t\t\tbadge: \"Premium\",\n\t\t\t},\n\t\t\t{ title: \"Trends\", href: \"/dashboard/reporting/analytics/trends\" },\n\t\t\t{\n\t\t\t\ttitle: \"Seasonality\",\n\t\t\t\thref: \"/dashboard/reporting/analytics/seasonality\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Forecasting\",\n\t\t\t\thref: \"/dashboard/reporting/analytics/forecasting\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Benchmarks\",\n\t\t\t\thref: \"/dashboard/reporting/analytics/benchmarks\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"What-If Analysis\",\n\t\t\t\thref: \"/dashboard/reporting/analytics/what-if\",\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tlabel: \"Export & Sharing\",\n\t\titems: [\n\t\t\t{\n\t\t\t\ttitle: \"Scheduled Reports\",\n\t\t\t\thref: \"/dashboard/reporting/export/scheduled\",\n\t\t\t},\n\t\t\t{ title: \"Templates\", href: \"/dashboard/reporting/export/templates\" },\n\t\t\t{ title: \"Data Export\", href: \"/dashboard/reporting/export/data\" },\n\t\t\t{ title: \"Share\", href: \"/dashboard/reporting/export/share\" },\n\t\t\t{ title: \"History\", href: \"/dashboard/reporting/export/history\" },\n\t\t],\n\t},\n];\n\nexport function PresetReportsDropdown() {\n\tconst pathname = usePathname();\n\tconst router = useRouter();\n\tconst [open, setOpen] = useState(false);\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\n\t// Filter reports based on search\n\tconst filteredReports = presetReports\n\t\t.map((category) => ({\n\t\t\t...category,\n\t\t\titems: category.items.filter((item) =>\n\t\t\t\titem.title.toLowerCase().includes(searchQuery.toLowerCase()),\n\t\t\t),\n\t\t}))\n\t\t.filter((category) => category.items.length > 0);\n\n\tconst handleNavigate = (href: string) => {\n\t\trouter.push(href);\n\t\tsetOpen(false);\n\t\tsetSearchQuery(\"\");\n\t};\n\n\treturn (\n\t\t<DropdownMenu onOpenChange={setOpen} open={open}>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"flex w-full items-center justify-between gap-2 rounded-md px-2 py-2\",\n\t\t\t\t\t\t\"text-sm font-medium transition-colors\",\n\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\"focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none\",\n\t\t\t\t\t)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<FileBarChart className=\"h-4 w-4\" />\n\t\t\t\t\t\t<span>Browse Preset Reports</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\tclassName={cn(\"h-4 w-4 transition-transform\", open && \"rotate-90\")}\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"start\" className=\"w-[320px]\" side=\"right\">\n\t\t\t\t{/* Search */}\n\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<Search className=\"text-muted-foreground absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2\" />\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName=\"h-9 pl-8\"\n\t\t\t\t\t\t\tonChange={(e) => setSearchQuery(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Search reports...\"\n\t\t\t\t\t\t\tvalue={searchQuery}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t{/* Report Categories */}\n\t\t\t\t<ScrollArea className=\"h-[400px]\">\n\t\t\t\t\t{filteredReports.length === 0 ? (\n\t\t\t\t\t\t<div className=\"text-muted-foreground py-6 text-center text-sm\">\n\t\t\t\t\t\t\tNo reports found\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t{filteredReports.map((category) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"relative flex w-full min-w-0 flex-col p-2\"\n\t\t\t\t\t\t\t\t\tkey={category.label}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* Match SidebarGroupLabel styling */}\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium\">\n\t\t\t\t\t\t\t\t\t\t{category.label}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* Report items */}\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t{category.items.map((item) => {\n\t\t\t\t\t\t\t\t\t\t\tconst isActive = pathname === item.href;\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"flex items-center gap-2 rounded-md p-2 text-left outline-hidden transition-all\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"focus-visible:ring-ring focus-visible:ring-2\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"h-[30px] w-full border border-transparent text-[0.8rem] font-medium\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisActive &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"border-accent bg-accent text-accent-foreground font-medium\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.href}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleNavigate(item.href)}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"flex-1 truncate\">{item.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.badge && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-primary ml-auto flex size-2 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={item.badge}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</ScrollArea>\n\n\t\t\t\t{/* Footer */}\n\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t<div className=\"text-muted-foreground p-2 text-center text-xs\">\n\t\t\t\t\t{presetReports.reduce((sum, cat) => sum + cat.items.length, 0)} preset\n\t\t\t\t\treports available\n\t\t\t\t</div>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * Job Details Layout Store - Zustand State Management\n *\n * Performance optimizations:\n * - Lightweight state management with Zustand\n * - No provider wrapper needed\n * - Selective subscriptions prevent unnecessary re-renders\n * - Organized in /src/lib/stores/ directory\n *\n * This store manages the customizable widget-based layout for job details pages.\n * Users can drag-and-drop widgets, resize them, and save their preferred layout.\n */\n\nimport { create } from \"zustand\";\nimport { devtools, persist } from \"zustand/middleware\";\n\n// ============================================================================\n// Widget Types and Definitions\n// ============================================================================\n\n/**\n * Available widget types for job details page\n */\nexport type JobWidgetType =\n\t// Core job information\n\t| \"job-header\"\n\t| \"job-financials\"\n\t| \"job-details\"\n\n\t// Property and customer\n\t| \"property-details\"\n\t| \"property-enrichment\"\n\t| \"customer-info\"\n\t| \"location-map\"\n\n\t// Financial\n\t| \"invoices\"\n\t| \"estimates\"\n\t| \"job-costing\"\n\t| \"profitability\"\n\t| \"payment-tracker\"\n\n\t// Project management\n\t| \"schedule\"\n\t| \"team-assignments\"\n\t| \"materials-list\"\n\t| \"equipment-list\"\n\t| \"purchase-orders\"\n\n\t// Documentation\n\t| \"photos\"\n\t| \"documents\"\n\t| \"permits\"\n\t| \"communications\"\n\t| \"activity-log\"\n\n\t// Industry-specific\n\t| \"hvac-equipment\"\n\t| \"plumbing-fixtures\"\n\t| \"electrical-panels\"\n\t| \"roofing-materials\"\n\t| \"landscape-zones\"\n\n\t// Analytics\n\t| \"time-tracking\"\n\t| \"labor-hours\"\n\t| \"material-costs\"\n\t| \"change-orders\";\n\n/**\n * Widget configuration\n */\nexport type JobWidget = {\n\tid: string;\n\ttype: JobWidgetType;\n\ttitle: string;\n\tdescription?: string;\n\n\t// Layout properties\n\tposition: {\n\t\tx: number; // Grid column position (0-based)\n\t\ty: number; // Grid row position (0-based)\n\t};\n\tsize: {\n\t\twidth: number; // 1 = half-width, 2+ = full-width\n\t\theight: number; // Height in rows (auto-flows with content)\n\t};\n\n\t// Widget behavior\n\tisVisible: boolean;\n\tisCollapsible: boolean; // Deprecated - no longer used\n\tisCollapsed: boolean; // Deprecated - no longer used\n\tisResizable: boolean; // Not implemented\n\tisDraggable: boolean;\n\n\t// Widget-specific settings\n\tsettings?: Record<string, unknown>;\n\t// PERFORMANCE: Skip hydration to prevent SSR mismatches\n\t// Allows Next.js to generate static pages without Zustand errors\n\tskipHydration?: true;\n};\n\n/**\n * Industry-specific preset layouts\n */\nexport type IndustryType =\n\t| \"hvac\"\n\t| \"plumbing\"\n\t| \"electrical\"\n\t| \"roofing\"\n\t| \"landscaping\"\n\t| \"general_contractor\"\n\t| \"remodeling\"\n\t| \"commercial\"\n\t| \"custom\";\n\n/**\n * Layout preset configuration\n */\nexport type LayoutPreset = {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tindustry: IndustryType;\n\twidgets: JobWidget[];\n\tthumbnail?: string;\n};\n\n// ============================================================================\n// Default Widget Configurations\n// ============================================================================\n\n/**\n * Default widget metadata\n */\nexport const WIDGET_METADATA: Record<\n\tJobWidgetType,\n\t{\n\t\ttitle: string;\n\t\tdescription: string;\n\t\tminSize: { width: number; height: number };\n\t\tdefaultSize: { width: number; height: number };\n\t\tmaxSize: { width: number; height: number };\n\t\tcategory:\n\t\t\t| \"core\"\n\t\t\t| \"financial\"\n\t\t\t| \"project\"\n\t\t\t| \"documentation\"\n\t\t\t| \"analytics\"\n\t\t\t| \"industry\";\n\t\tindustries: IndustryType[]; // Which industries typically use this\n\t}\n> = {\n\t// Core job information\n\t\"job-header\": {\n\t\ttitle: \"Job Header\",\n\t\tdescription: \"Job number, title, status, and priority\",\n\t\tminSize: { width: 4, height: 1 },\n\t\tdefaultSize: { width: 4, height: 1 },\n\t\tmaxSize: { width: 4, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-financials\": {\n\t\ttitle: \"Financial Summary\",\n\t\tdescription: \"Quick overview of job finances\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-details\": {\n\t\ttitle: \"Job Information\",\n\t\tdescription: \"Detailed job information and notes\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 2, height: 1 }, // Full-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Property and customer\n\t\"property-details\": {\n\t\ttitle: \"Property Details\",\n\t\tdescription: \"Basic property information\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"property-enrichment\": {\n\t\ttitle: \"Property Intelligence\",\n\t\tdescription: \"Enriched property data (ownership, permits, tax info)\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"customer-info\": {\n\t\ttitle: \"Customer Information\",\n\t\tdescription: \"Customer contact and billing details\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 1 }, // Half-width\n\t\tmaxSize: { width: 2, height: 1 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"location-map\": {\n\t\ttitle: \"Location Map\",\n\t\tdescription: \"Interactive map with property location\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"core\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Financial\n\tinvoices: {\n\t\ttitle: \"Invoices\",\n\t\tdescription: \"Job invoices and payment history\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\testimates: {\n\t\ttitle: \"Estimates\",\n\t\tdescription: \"Job estimates and quotes\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"job-costing\": {\n\t\ttitle: \"Job Costing\",\n\t\tdescription: \"Detailed cost breakdown by category\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tprofitability: {\n\t\ttitle: \"Profitability Analysis\",\n\t\tdescription: \"Profit margin and revenue analysis\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"payment-tracker\": {\n\t\ttitle: \"Payment Tracker\",\n\t\tdescription: \"Visual payment progress and reminders\",\n\t\tminSize: { width: 1, height: 1 },\n\t\tdefaultSize: { width: 1, height: 2 },\n\t\tmaxSize: { width: 2, height: 3 },\n\t\tcategory: \"financial\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Project management\n\tschedule: {\n\t\ttitle: \"Schedule\",\n\t\tdescription: \"Job schedule and milestones\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"team-assignments\": {\n\t\ttitle: \"Team Assignments\",\n\t\tdescription: \"Assigned technicians and crew\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"materials-list\": {\n\t\ttitle: \"Materials List\",\n\t\tdescription: \"Required and used materials\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"equipment-list\": {\n\t\ttitle: \"Equipment List\",\n\t\tdescription: \"Equipment and tools needed\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"purchase-orders\": {\n\t\ttitle: \"Purchase Orders\",\n\t\tdescription: \"Material and equipment purchase orders\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"project\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Documentation\n\tphotos: {\n\t\ttitle: \"Photo Gallery\",\n\t\tdescription: \"Before, during, and after photos\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tdocuments: {\n\t\ttitle: \"Documents\",\n\t\tdescription: \"Contracts, specs, and files\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tpermits: {\n\t\ttitle: \"Permits\",\n\t\tdescription: \"Required permits and inspections\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\tcommunications: {\n\t\ttitle: \"Communications\",\n\t\tdescription: \"Messages, emails, and notes\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"activity-log\": {\n\t\ttitle: \"Activity Log\",\n\t\tdescription: \"Timeline of all job activities\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 3 },\n\t\tmaxSize: { width: 4, height: 4 },\n\t\tcategory: \"documentation\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\n\t// Industry-specific\n\t\"hvac-equipment\": {\n\t\ttitle: \"HVAC Equipment\",\n\t\tdescription: \"Units, tonnage, and specifications\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"hvac\"],\n\t},\n\t\"plumbing-fixtures\": {\n\t\ttitle: \"Plumbing Fixtures\",\n\t\tdescription: \"Fixtures, piping, and connections\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"plumbing\"],\n\t},\n\t\"electrical-panels\": {\n\t\ttitle: \"Electrical Panels\",\n\t\tdescription: \"Panels, circuits, and load calculations\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"electrical\"],\n\t},\n\t\"roofing-materials\": {\n\t\ttitle: \"Roofing Materials\",\n\t\tdescription: \"Shingles, underlayment, and squares\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"roofing\"],\n\t},\n\t\"landscape-zones\": {\n\t\ttitle: \"Landscape Zones\",\n\t\tdescription: \"Planting zones and irrigation\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"industry\",\n\t\tindustries: [\"landscaping\"],\n\t},\n\n\t// Analytics\n\t\"time-tracking\": {\n\t\ttitle: \"Time Tracking\",\n\t\tdescription: \"Labor hours and time on site\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"labor-hours\": {\n\t\ttitle: \"Labor Hours\",\n\t\tdescription: \"Detailed labor breakdown by crew\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"material-costs\": {\n\t\ttitle: \"Material Costs\",\n\t\tdescription: \"Actual vs estimated material costs\",\n\t\tminSize: { width: 1, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n\t\"change-orders\": {\n\t\ttitle: \"Change Orders\",\n\t\tdescription: \"Scope changes and additional work\",\n\t\tminSize: { width: 2, height: 2 },\n\t\tdefaultSize: { width: 2, height: 2 },\n\t\tmaxSize: { width: 4, height: 3 },\n\t\tcategory: \"analytics\",\n\t\tindustries: [\n\t\t\t\"hvac\",\n\t\t\t\"plumbing\",\n\t\t\t\"electrical\",\n\t\t\t\"roofing\",\n\t\t\t\"landscaping\",\n\t\t\t\"general_contractor\",\n\t\t\t\"remodeling\",\n\t\t\t\"commercial\",\n\t\t\t\"custom\",\n\t\t],\n\t},\n};\n\n// ============================================================================\n// Store State and Actions\n// ============================================================================\n\ntype JobDetailsLayoutStore = {\n\t// Current layout\n\twidgets: JobWidget[];\n\tindustry: IndustryType;\n\tversion: number; // Layout version for migrations\n\n\t// Layout management\n\taddWidget: (widgetType: JobWidgetType) => void;\n\tremoveWidget: (widgetId: string) => void;\n\tupdateWidget: (widgetId: string, updates: Partial<JobWidget>) => void;\n\tmoveWidget: (widgetId: string, position: { x: number; y: number }) => void;\n\tresizeWidget: (\n\t\twidgetId: string,\n\t\tsize: { width: number; height: number },\n\t) => void;\n\ttoggleWidgetVisibility: (widgetId: string) => void;\n\ttoggleWidgetCollapse: (widgetId: string) => void;\n\n\t// Preset management\n\tloadPreset: (preset: LayoutPreset) => void;\n\tsetIndustry: (industry: IndustryType) => void;\n\tresetToDefault: () => void;\n\n\t// Utility\n\tgetWidgetById: (widgetId: string) => JobWidget | undefined;\n\tgetVisibleWidgets: () => JobWidget[];\n};\n\n// ============================================================================\n// Create Store\n// ============================================================================\n\n// Version number for layout migrations\n// Increment this when making breaking changes to initialWidgets\n// v2: Added new Priority 1 widgets (12 total)\n// v3: Removed job-timeline widget (redundant - built into page)\n// v4: Completely removed job-timeline from metadata and renderer\nconst LAYOUT_VERSION = 4;\n\nconst initialWidgets: JobWidget[] = [\n\t// Default layout - comprehensive view with newly implemented widgets\n\t// Note: job-timeline removed - JobProcessIndicatorEditable is built into page\n\n\t// Row 1: Financials\n\t{\n\t\tid: \"financials\",\n\t\ttype: \"job-financials\",\n\t\ttitle: \"Financial Summary\",\n\t\tposition: { x: 0, y: 0 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"profitability\",\n\t\ttype: \"profitability\",\n\t\ttitle: \"Profitability Analysis\",\n\t\tposition: { x: 1, y: 0 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 2: Customer & Property\n\t{\n\t\tid: \"customer\",\n\t\ttype: \"customer-info\",\n\t\ttitle: \"Customer Information\",\n\t\tposition: { x: 0, y: 1 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"property-details\",\n\t\ttype: \"property-details\",\n\t\ttitle: \"Property Details\",\n\t\tposition: { x: 1, y: 1 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 3: Job Details\n\t{\n\t\tid: \"job-details\",\n\t\ttype: \"job-details\",\n\t\ttitle: \"Job Information\",\n\t\tposition: { x: 0, y: 2 },\n\t\tsize: { width: 2, height: 1 }, // Full-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 4: Schedule & Team\n\t{\n\t\tid: \"schedule\",\n\t\ttype: \"schedule\",\n\t\ttitle: \"Schedule\",\n\t\tposition: { x: 0, y: 3 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"team-assignments\",\n\t\ttype: \"team-assignments\",\n\t\ttitle: \"Team Assignments\",\n\t\tposition: { x: 1, y: 3 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 5: Materials & Permits\n\t{\n\t\tid: \"materials-list\",\n\t\ttype: \"materials-list\",\n\t\ttitle: \"Materials List\",\n\t\tposition: { x: 0, y: 4 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"permits\",\n\t\ttype: \"permits\",\n\t\ttitle: \"Permits\",\n\t\tposition: { x: 1, y: 4 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 6: Photos & Payments\n\t{\n\t\tid: \"photos\",\n\t\ttype: \"photos\",\n\t\ttitle: \"Photo Gallery\",\n\t\tposition: { x: 0, y: 5 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\t{\n\t\tid: \"payment-tracker\",\n\t\ttype: \"payment-tracker\",\n\t\ttitle: \"Payment Tracker\",\n\t\tposition: { x: 1, y: 5 },\n\t\tsize: { width: 1, height: 1 }, // Half-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n\n\t// Row 7: Activity Log\n\t{\n\t\tid: \"activity-log\",\n\t\ttype: \"activity-log\",\n\t\ttitle: \"Activity Log\",\n\t\tposition: { x: 0, y: 6 },\n\t\tsize: { width: 2, height: 1 }, // Full-width\n\t\tisVisible: true,\n\t\tisCollapsible: false,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t},\n];\n\nexport const useJobDetailsLayoutStore = create<JobDetailsLayoutStore>()(\n\tdevtools(\n\t\tpersist(\n\t\t\t(set, get) => ({\n\t\t\t\twidgets: initialWidgets,\n\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\tversion: LAYOUT_VERSION,\n\n\t\t\t\taddWidget: (widgetType) => {\n\t\t\t\t\tconst metadata = WIDGET_METADATA[widgetType];\n\t\t\t\t\tconst newWidget: JobWidget = {\n\t\t\t\t\t\tid: `${widgetType}-${Date.now()}`,\n\t\t\t\t\t\ttype: widgetType,\n\t\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t\t\tposition: { x: 0, y: 0 }, // Will be auto-positioned\n\t\t\t\t\t\tsize: metadata.defaultSize,\n\t\t\t\t\t\tisVisible: true,\n\t\t\t\t\t\tisCollapsible: true,\n\t\t\t\t\t\tisCollapsed: false,\n\t\t\t\t\t\tisResizable: true,\n\t\t\t\t\t\tisDraggable: true,\n\t\t\t\t\t};\n\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: [...state.widgets, newWidget],\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tremoveWidget: (widgetId) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: state.widgets.filter((w) => w.id !== widgetId),\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tupdateWidget: (widgetId, updates) => {\n\t\t\t\t\tset((state) => ({\n\t\t\t\t\t\twidgets: state.widgets.map((w) =>\n\t\t\t\t\t\t\tw.id === widgetId ? { ...w, ...updates } : w,\n\t\t\t\t\t\t),\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tmoveWidget: (widgetId, position) => {\n\t\t\t\t\tget().updateWidget(widgetId, { position });\n\t\t\t\t},\n\n\t\t\t\tresizeWidget: (widgetId, size) => {\n\t\t\t\t\tget().updateWidget(widgetId, { size });\n\t\t\t\t},\n\n\t\t\t\ttoggleWidgetVisibility: (widgetId) => {\n\t\t\t\t\tconst widget = get().getWidgetById(widgetId);\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\tget().updateWidget(widgetId, { isVisible: !widget.isVisible });\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\ttoggleWidgetCollapse: (widgetId) => {\n\t\t\t\t\tconst widget = get().getWidgetById(widgetId);\n\t\t\t\t\tif (widget?.isCollapsible) {\n\t\t\t\t\t\tget().updateWidget(widgetId, { isCollapsed: !widget.isCollapsed });\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tloadPreset: (preset) => {\n\t\t\t\t\tset({\n\t\t\t\t\t\twidgets: preset.widgets,\n\t\t\t\t\t\tindustry: preset.industry,\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsetIndustry: (industry) => {\n\t\t\t\t\tset({ industry });\n\t\t\t\t},\n\n\t\t\t\tresetToDefault: () => {\n\t\t\t\t\tset({\n\t\t\t\t\t\twidgets: initialWidgets,\n\t\t\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tgetWidgetById: (widgetId) =>\n\t\t\t\t\tget().widgets.find((w) => w.id === widgetId),\n\n\t\t\t\tgetVisibleWidgets: () => get().widgets.filter((w) => w.isVisible),\n\t\t\t}),\n\t\t\t{\n\t\t\t\tname: \"job-details-layout-storage-v2\", // v2: masonry grid with half/full width\n\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\tpartialize: (state) => ({\n\t\t\t\t\twidgets: state.widgets,\n\t\t\t\t\tindustry: state.industry,\n\t\t\t\t\tversion: state.version,\n\t\t\t\t}),\n\t\t\t\tmigrate: (persistedState: any, version: number) => {\n\t\t\t\t\t// If version mismatch, reset to default layout with new widgets\n\t\t\t\t\tif (version < LAYOUT_VERSION) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\twidgets: initialWidgets,\n\t\t\t\t\t\t\tindustry: \"general_contractor\",\n\t\t\t\t\t\t\tversion: LAYOUT_VERSION,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn persistedState;\n\t\t\t\t},\n\t\t\t},\n\t\t),\n\t\t{ name: \"JobDetailsLayoutStore\" },\n\t),\n);\n","\"use client\";\n\n/**\n * Add Widget Dropdown - Client Component\n *\n * Displays all available widgets in a compact dropdown menu\n * Organized by category with search functionality\n * Pattern matches PresetReportsDropdown for consistency\n */\n\nimport { ChevronRight, Plus, Search } from \"lucide-react\";\nimport { useState } from \"react\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n\ttype JobWidgetType,\n\tuseJobDetailsLayoutStore,\n\tWIDGET_METADATA,\n} from \"@/lib/stores/job-details-layout-store\";\nimport { cn } from \"@/lib/utils\";\n\ntype WidgetCategory = {\n\tlabel: string;\n\titems: {\n\t\ttype: JobWidgetType;\n\t\ttitle: string;\n\t\tdescription: string;\n\t\tbadge?: string;\n\t}[];\n};\n\nexport function AddWidgetDropdown() {\n\tconst [open, setOpen] = useState(false);\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\n\tconst widgets = useJobDetailsLayoutStore((state) => state.widgets);\n\tconst addWidget = useJobDetailsLayoutStore((state) => state.addWidget);\n\n\t// Get available widgets (not already added)\n\tconst availableWidgets = Object.entries(WIDGET_METADATA).filter(\n\t\t([widgetType]) => !widgets.some((w) => w.type === widgetType),\n\t);\n\n\t// Group widgets by category\n\tconst widgetsByCategory: WidgetCategory[] = [\n\t\t{\n\t\t\tlabel: \"Core\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"core\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Financial\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"financial\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Project Management\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"project\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Documentation\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"documentation\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Analytics\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"analytics\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t\t{\n\t\t\tlabel: \"Industry-Specific\",\n\t\t\titems: availableWidgets\n\t\t\t\t.filter(([_, metadata]) => metadata.category === \"industry\")\n\t\t\t\t.map(([type, metadata]) => ({\n\t\t\t\t\ttype: type as JobWidgetType,\n\t\t\t\t\ttitle: metadata.title,\n\t\t\t\t\tdescription: metadata.description,\n\t\t\t\t})),\n\t\t},\n\t].filter((category) => category.items.length > 0);\n\n\t// Filter widgets based on search\n\tconst filteredCategories = widgetsByCategory\n\t\t.map((category) => ({\n\t\t\t...category,\n\t\t\titems: category.items.filter(\n\t\t\t\t(item) =>\n\t\t\t\t\titem.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n\t\t\t\t\titem.description.toLowerCase().includes(searchQuery.toLowerCase()),\n\t\t\t),\n\t\t}))\n\t\t.filter((category) => category.items.length > 0);\n\n\tconst handleAddWidget = (widgetType: JobWidgetType) => {\n\t\taddWidget(widgetType);\n\t\tsetOpen(false);\n\t\tsetSearchQuery(\"\");\n\t};\n\n\tconst totalAvailable = widgetsByCategory.reduce(\n\t\t(sum, cat) => sum + cat.items.length,\n\t\t0,\n\t);\n\n\treturn (\n\t\t<DropdownMenu onOpenChange={setOpen} open={open}>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"flex w-full items-center justify-between gap-2 rounded-md px-2 py-2\",\n\t\t\t\t\t\t\"text-sm font-medium transition-colors\",\n\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\"focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none\",\n\t\t\t\t\t)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Plus className=\"h-4 w-4\" />\n\t\t\t\t\t\t<span>Add Widget</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\tclassName={cn(\"h-4 w-4 transition-transform\", open && \"rotate-90\")}\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"start\" className=\"w-[320px]\" side=\"right\">\n\t\t\t\t{/* Search */}\n\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<Search className=\"text-muted-foreground absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2\" />\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName=\"h-9 pl-8\"\n\t\t\t\t\t\t\tonChange={(e) => setSearchQuery(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Search widgets...\"\n\t\t\t\t\t\t\tvalue={searchQuery}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t{/* Widget Categories */}\n\t\t\t\t<ScrollArea className=\"h-[400px]\">\n\t\t\t\t\t{filteredCategories.length === 0 ? (\n\t\t\t\t\t\t<div className=\"text-muted-foreground py-6 text-center text-sm\">\n\t\t\t\t\t\t\t{totalAvailable === 0 ? \"All widgets added\" : \"No widgets found\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t{filteredCategories.map((category) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"relative flex w-full min-w-0 flex-col p-2\"\n\t\t\t\t\t\t\t\t\tkey={category.label}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* Category Label - matches SidebarGroupLabel styling */}\n\t\t\t\t\t\t\t\t\t<div className=\"text-muted-foreground flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium\">\n\t\t\t\t\t\t\t\t\t\t{category.label}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* Widget Items */}\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t{category.items.map((widget) => (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"flex flex-col gap-1 rounded-md p-2 text-left outline-hidden transition-all\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"focus-visible:ring-ring focus-visible:ring-2\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"min-h-[44px] w-full border border-transparent\",\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={widget.type}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleAddWidget(widget.type)}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-[0.8rem] font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{widget.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-[0.7rem] leading-tight\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{widget.description}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</ScrollArea>\n\n\t\t\t\t{/* Footer */}\n\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t<div className=\"text-muted-foreground p-2 text-center text-xs\">\n\t\t\t\t\t{totalAvailable} widget{totalAvailable !== 1 ? \"s\" : \"\"} available\n\t\t\t\t</div>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * Job Details Layout Presets\n *\n * Pre-configured layouts for different construction industries.\n * Each preset is optimized for the specific needs of that trade.\n */\n\nimport type {\n\tIndustryType,\n\tJobWidget,\n\tLayoutPreset,\n} from \"@/lib/stores/job-details-layout-store\";\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Create a widget with default settings\n */\nfunction createWidget(\n\tid: string,\n\ttype: JobWidget[\"type\"],\n\ttitle: string,\n\tx: number,\n\ty: number,\n\twidth: number,\n\theight: number,\n\toptions: Partial<JobWidget> = {},\n): JobWidget {\n\treturn {\n\t\tid,\n\t\ttype,\n\t\ttitle,\n\t\tposition: { x, y },\n\t\tsize: { width, height },\n\t\tisVisible: true,\n\t\tisCollapsible: true,\n\t\tisCollapsed: false,\n\t\tisResizable: true,\n\t\tisDraggable: true,\n\t\t...options,\n\t} as JobWidget;\n}\n\n// ============================================================================\n// Industry Presets\n// ============================================================================\n\n/**\n * HVAC Contractor Layout\n * Focus: Equipment specs, system sizing, property details\n */\nconst hvacPreset: LayoutPreset = {\n\tid: \"hvac-preset\",\n\tname: \"HVAC Contractor\",\n\tdescription:\n\t\t\"Optimized for HVAC installation and repair jobs with equipment tracking\",\n\tindustry: \"hvac\",\n\twidgets: [\n\t\t// Row 1: Header (always first)\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\n\t\t// Row 2: Main content (Timeline is permanent at top of page)\n\t\tcreateWidget(\n\t\t\t\"hvac-equipment\",\n\t\t\t\"hvac-equipment\",\n\t\t\t\"HVAC Equipment\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\n\t\t// Row 5-7: Financial and details\n\t\tcreateWidget(\n\t\t\t\"job-financials\",\n\t\t\t\"job-financials\",\n\t\t\t\"Financial Summary\",\n\t\t\t0,\n\t\t\t4,\n\t\t\t1,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 1, 4, 1, 2),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 4, 2, 3),\n\n\t\t// Row 8-9: Photos and documents\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 1, 2),\n\t\tcreateWidget(\"customer-info\", \"customer-info\", \"Customer\", 3, 7, 1, 2),\n\t],\n};\n\n/**\n * Plumbing Contractor Layout\n * Focus: Fixtures, permits, property details\n */\nconst plumbingPreset: LayoutPreset = {\n\tid: \"plumbing-preset\",\n\tname: \"Plumbing Contractor\",\n\tdescription: \"Optimized for plumbing jobs with fixture and permit tracking\",\n\tindustry: \"plumbing\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"plumbing-fixtures\",\n\t\t\t\"plumbing-fixtures\",\n\t\t\t\"Plumbing Fixtures\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-details\",\n\t\t\t\"property-details\",\n\t\t\t\"Property Details\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 0, 4, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * Electrical Contractor Layout\n * Focus: Panels, circuits, permits, code compliance\n */\nconst electricalPreset: LayoutPreset = {\n\tid: \"electrical-preset\",\n\tname: \"Electrical Contractor\",\n\tdescription: \"Optimized for electrical work with panel and circuit tracking\",\n\tindustry: \"electrical\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"electrical-panels\",\n\t\t\t\"electrical-panels\",\n\t\t\t\"Electrical Panels\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 2, 2, 2, 2),\n\t\tcreateWidget(\n\t\t\t\"property-details\",\n\t\t\t\"property-details\",\n\t\t\t\"Property Details\",\n\t\t\t0,\n\t\t\t4,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * Roofing Contractor Layout\n * Focus: Materials, weather, photos\n */\nconst roofingPreset: LayoutPreset = {\n\tid: \"roofing-preset\",\n\tname: \"Roofing Contractor\",\n\tdescription: \"Optimized for roofing jobs with material and weather tracking\",\n\tindustry: \"roofing\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"roofing-materials\",\n\t\t\t\"roofing-materials\",\n\t\t\t\"Roofing Materials\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 4, 2, 3),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 4, 2, 3),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 2, 2),\n\t],\n};\n\n/**\n * Landscaping Contractor Layout\n * Focus: Zones, materials, property details\n */\nconst landscapingPreset: LayoutPreset = {\n\tid: \"landscaping-preset\",\n\tname: \"Landscaping Contractor\",\n\tdescription:\n\t\t\"Optimized for landscaping projects with zone and material tracking\",\n\tindustry: \"landscaping\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\n\t\t\t\"landscape-zones\",\n\t\t\t\"landscape-zones\",\n\t\t\t\"Landscape Zones\",\n\t\t\t0,\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"location-map\", \"location-map\", \"Location Map\", 2, 2, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 0, 4, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 2, 4, 2, 2),\n\t\tcreateWidget(\"job-financials\", \"job-financials\", \"Financials\", 0, 6, 2, 2),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 6, 2, 2),\n\t],\n};\n\n/**\n * General Contractor Layout\n * Focus: Comprehensive overview with all key information\n */\nconst generalContractorPreset: LayoutPreset = {\n\tid: \"general-contractor-preset\",\n\tname: \"General Contractor\",\n\tdescription: \"Comprehensive layout for general construction projects\",\n\tindustry: \"general_contractor\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 0, 2, 2, 3),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t3,\n\t\t),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 0, 5, 2, 2),\n\t\tcreateWidget(\"profitability\", \"profitability\", \"Profitability\", 2, 5, 2, 2),\n\t\tcreateWidget(\"schedule\", \"schedule\", \"Schedule\", 0, 7, 2, 2),\n\t\tcreateWidget(\"team-assignments\", \"team-assignments\", \"Team\", 2, 7, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 0, 9, 2, 2),\n\t\tcreateWidget(\"documents\", \"documents\", \"Documents\", 2, 9, 2, 2),\n\t],\n};\n\n/**\n * Remodeling Contractor Layout\n * Focus: Before/after photos, change orders, detailed costing\n */\nconst remodelingPreset: LayoutPreset = {\n\tid: \"remodeling-preset\",\n\tname: \"Remodeling Contractor\",\n\tdescription: \"Optimized for remodeling projects with detailed photo tracking\",\n\tindustry: \"remodeling\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photo Gallery\", 0, 2, 2, 3),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 2, 2, 2, 3),\n\t\tcreateWidget(\"change-orders\", \"change-orders\", \"Change Orders\", 0, 5, 2, 2),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 2, 5, 2, 2),\n\t\tcreateWidget(\"materials-list\", \"materials-list\", \"Materials\", 0, 7, 2, 2),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits\", 2, 7, 2, 2),\n\t],\n};\n\n/**\n * Commercial Construction Layout\n * Focus: Complex project management, multiple teams, detailed tracking\n */\nconst commercialPreset: LayoutPreset = {\n\tid: \"commercial-preset\",\n\tname: \"Commercial Construction\",\n\tdescription: \"Comprehensive layout for large commercial projects\",\n\tindustry: \"commercial\",\n\twidgets: [\n\t\tcreateWidget(\"header\", \"job-header\", \"Job Header\", 0, 0, 4, 1, {\n\t\t\tisCollapsible: false,\n\t\t\tisResizable: false,\n\t\t\tisDraggable: false,\n\t\t}),\n\t\tcreateWidget(\"job-details\", \"job-details\", \"Job Information\", 0, 2, 2, 3),\n\t\tcreateWidget(\n\t\t\t\"property-enrichment\",\n\t\t\t\"property-enrichment\",\n\t\t\t\"Property Intelligence\",\n\t\t\t2,\n\t\t\t2,\n\t\t\t2,\n\t\t\t3,\n\t\t),\n\t\tcreateWidget(\"schedule\", \"schedule\", \"Project Schedule\", 0, 5, 2, 2),\n\t\tcreateWidget(\"team-assignments\", \"team-assignments\", \"Teams\", 2, 5, 2, 2),\n\t\tcreateWidget(\"job-costing\", \"job-costing\", \"Job Costing\", 0, 7, 2, 2),\n\t\tcreateWidget(\"profitability\", \"profitability\", \"Profitability\", 2, 7, 2, 2),\n\t\tcreateWidget(\n\t\t\t\"purchase-orders\",\n\t\t\t\"purchase-orders\",\n\t\t\t\"Purchase Orders\",\n\t\t\t0,\n\t\t\t9,\n\t\t\t2,\n\t\t\t2,\n\t\t),\n\t\tcreateWidget(\"permits\", \"permits\", \"Permits & Inspections\", 2, 9, 2, 2),\n\t\tcreateWidget(\"photos\", \"photos\", \"Photos\", 0, 11, 2, 2),\n\t\tcreateWidget(\"documents\", \"documents\", \"Documents\", 2, 11, 2, 2),\n\t],\n};\n\n// ============================================================================\n// Export All Presets\n// ============================================================================\n\nexport const ALL_PRESETS: LayoutPreset[] = [\n\thvacPreset,\n\tplumbingPreset,\n\telectricalPreset,\n\troofingPreset,\n\tlandscapingPreset,\n\tgeneralContractorPreset,\n\tremodelingPreset,\n\tcommercialPreset,\n];\n\n/**\n * Get preset by industry type\n */\nfunction getPresetByIndustry(industry: IndustryType): LayoutPreset | undefined {\n\treturn ALL_PRESETS.find((preset) => preset.industry === industry);\n}\n\n/**\n * Get all presets for a specific category\n */\nfunction getPresetsByCategory(\n\tcategory: \"residential\" | \"commercial\" | \"specialty\",\n): LayoutPreset[] {\n\tconst residentialIndustries: IndustryType[] = [\n\t\t\"hvac\",\n\t\t\"plumbing\",\n\t\t\"electrical\",\n\t\t\"roofing\",\n\t\t\"landscaping\",\n\t\t\"remodeling\",\n\t];\n\tconst commercialIndustries: IndustryType[] = [\n\t\t\"commercial\",\n\t\t\"general_contractor\",\n\t];\n\n\tif (category === \"residential\") {\n\t\treturn ALL_PRESETS.filter((preset) =>\n\t\t\tresidentialIndustries.includes(preset.industry),\n\t\t);\n\t}\n\n\tif (category === \"commercial\") {\n\t\treturn ALL_PRESETS.filter((preset) =>\n\t\t\tcommercialIndustries.includes(preset.industry),\n\t\t);\n\t}\n\n\treturn ALL_PRESETS;\n}\n","\"use client\";\n\nimport { Blocks, ChevronRight, Grid3x3 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { ALL_PRESETS } from \"@/lib/layout/job-layout-presets\";\nimport { useJobDetailsLayoutStore } from \"@/lib/stores/job-details-layout-store\";\nimport { cn } from \"@/lib/utils\";\n\nexport function PresetsDropdown() {\n\tconst [open, setOpen] = useState(false);\n\n\tconst industry = useJobDetailsLayoutStore((state) => state.industry);\n\tconst loadPreset = useJobDetailsLayoutStore((state) => state.loadPreset);\n\n\tconst handleLoadPreset = (presetId: string) => {\n\t\tconst preset = ALL_PRESETS.find((p) => p.id === presetId);\n\t\tif (preset) {\n\t\t\tloadPreset(preset);\n\t\t\tsetOpen(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<DropdownMenu onOpenChange={setOpen} open={open}>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<button\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"flex w-full items-center justify-between gap-2 rounded-md px-2 py-2\",\n\t\t\t\t\t\t\"text-sm font-medium transition-colors\",\n\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\"focus-visible:ring-ring focus-visible:ring-2 focus-visible:outline-none\",\n\t\t\t\t\t)}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Grid3x3 className=\"h-4 w-4\" />\n\t\t\t\t\t\t<span>Presets</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChevronRight\n\t\t\t\t\t\tclassName={cn(\"h-4 w-4 transition-transform\", open && \"rotate-90\")}\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"start\" className=\"w-[320px]\" side=\"right\">\n\t\t\t\t{/* Header */}\n\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t<div className=\"text-sm font-medium\">Layout Presets</div>\n\t\t\t\t\t<div className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\tChoose a pre-configured layout optimized for your industry\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t{/* Preset List */}\n\t\t\t\t<ScrollArea className=\"h-[400px]\">\n\t\t\t\t\t<div className=\"flex flex-col gap-1 p-2\">\n\t\t\t\t\t\t{ALL_PRESETS.map((preset) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex flex-col gap-1 rounded-md p-3 text-left outline-hidden transition-all\",\n\t\t\t\t\t\t\t\t\t\"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\t\t\t\t\t\t\"min-h-[44px] w-full border\",\n\t\t\t\t\t\t\t\t\tindustry === preset.industry\n\t\t\t\t\t\t\t\t\t\t? \"border-primary bg-primary/5\"\n\t\t\t\t\t\t\t\t\t\t: \"border-transparent\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tkey={preset.id}\n\t\t\t\t\t\t\t\tonClick={() => handleLoadPreset(preset.id)}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-2\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-[0.8rem] font-medium\">\n\t\t\t\t\t\t\t\t\t\t{preset.name}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{industry === preset.industry ? (\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-5 px-1.5 text-[0.65rem]\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"default\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCurrent\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-[0.7rem]\">\n\t\t\t\t\t\t\t\t\t{preset.description}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1.5 text-[0.65rem]\">\n\t\t\t\t\t\t\t\t\t<Blocks className=\"text-muted-foreground h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{preset.widgets.length} widgets\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</ScrollArea>\n\n\t\t\t\t{/* Footer */}\n\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t<div className=\"text-muted-foreground p-2 text-center text-xs\">\n\t\t\t\t\t{ALL_PRESETS.length} preset{ALL_PRESETS.length !== 1 ? \"s\" : \"\"}{\" \"}\n\t\t\t\t\tavailable\n\t\t\t\t</div>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n}\n","\"use client\";\n\n/**\n * useWidgetNavigation Hook\n *\n * Generates navigation data structure for job details widgets\n * that matches the existing NavGrouped format used throughout the app.\n *\n * Returns navigation groups in the exact format expected by NavGrouped:\n * - label: Group name (Overview, Financials, etc.)\n * - items: Array of navigation items with title, url (anchor), and icon\n */\n\nimport type { LucideIcon } from \"lucide-react\";\nimport {\n\tActivity,\n\tBuilding2,\n\tCircleDollarSign,\n\tFileText,\n\tImage,\n\tMessageSquare,\n\tPackage,\n\tPieChart,\n\tUsers,\n\tWrench,\n} from \"lucide-react\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nimport {\n\ttype JobWidget,\n\ttype JobWidgetType,\n\tuseJobDetailsLayoutStore,\n\tWIDGET_METADATA,\n} from \"@/lib/stores/job-details-layout-store\";\n\n// ============================================================================\n// Icon Mapping\n// ============================================================================\n\nconst WIDGET_ICONS: Record<JobWidgetType, LucideIcon> = {\n\t\"job-financials\": CircleDollarSign,\n\t\"customer-info\": Users,\n\t\"job-details\": FileText,\n\t\"property-enrichment\": Building2,\n\t\"property-details\": Building2,\n\tphotos: Image,\n\tinvoices: CircleDollarSign,\n\testimates: FileText,\n\t\"job-costing\": PieChart,\n\tprofitability: PieChart,\n\tcommunications: MessageSquare,\n\tdocuments: FileText,\n\tschedule: Activity,\n\t\"time-tracking\": Activity,\n\t\"team-assignments\": Users,\n\t\"materials-list\": Package,\n\t\"equipment-list\": Wrench,\n\t\"activity-log\": Activity,\n\t\"location-map\": Building2,\n\t\"purchase-orders\": Package,\n\t\"hvac-equipment\": Wrench,\n\t\"job-header\": FileText,\n\t\"payment-tracker\": CircleDollarSign,\n\tpermits: FileText,\n\t\"plumbing-fixtures\": Wrench,\n\t\"electrical-panels\": Wrench,\n\t\"roofing-materials\": Package,\n\t\"landscape-zones\": Building2,\n\t\"labor-hours\": Activity,\n\t\"material-costs\": Package,\n\t\"change-orders\": FileText,\n};\n\n// ============================================================================\n// Navigation Group Type (matches NavGrouped expectations)\n// ============================================================================\n\ntype NavItem = {\n\ttitle: string;\n\turl: string;\n\ticon?: LucideIcon;\n};\n\ntype NavGroup = {\n\tlabel?: string;\n\titems: NavItem[];\n};\n\n// ============================================================================\n// Hook\n// ============================================================================\n\nexport function useWidgetNavigation(): NavGroup[] {\n\t// Track if we're on the client to avoid SSR hydration issues\n\tconst [isClient, setIsClient] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetIsClient(true);\n\t}, []);\n\n\t// Get visible widgets from store with stable reference\n\tconst allWidgets = useJobDetailsLayoutStore((state) => state.widgets);\n\n\t// Filter visible widgets in useMemo to maintain stable reference\n\tconst visibleWidgets = useMemo(\n\t\t() => (isClient ? allWidgets.filter((w) => w.isVisible) : []),\n\t\t[allWidgets, isClient],\n\t);\n\n\t// Generate navigation groups dynamically based on visible widgets\n\tconst navigationGroups = useMemo(() => {\n\t\t// Category labels for display\n\t\tconst categoryLabels: Record<string, string> = {\n\t\t\tcore: \"Overview\",\n\t\t\tfinancial: \"Financials\",\n\t\t\tproject: \"Project Management\",\n\t\t\tdocumentation: \"Documentation\",\n\t\t\tanalytics: \"Analytics\",\n\t\t\tindustry: \"Industry-Specific\",\n\t\t};\n\n\t\t// Group widgets by category\n\t\tconst widgetsByCategory: Record<string, JobWidget[]> = {};\n\n\t\tfor (const widget of visibleWidgets) {\n\t\t\tconst metadata = WIDGET_METADATA[widget.type];\n\t\t\tconst category = metadata?.category || \"core\";\n\n\t\t\tif (!widgetsByCategory[category]) {\n\t\t\t\twidgetsByCategory[category] = [];\n\t\t\t}\n\n\t\t\twidgetsByCategory[category].push(widget);\n\t\t}\n\n\t\t// Convert to NavGrouped format\n\t\tconst groups: NavGroup[] = [];\n\n\t\t// Note: Back button is provided by app-sidebar.tsx static navigation\n\t\t// No need to add it here as it would create a duplicate\n\n\t\t// Add widget navigation groups\n\t\tfor (const [category, widgets] of Object.entries(widgetsByCategory)) {\n\t\t\tif (widgets.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tgroups.push({\n\t\t\t\tlabel: categoryLabels[category] || category,\n\t\t\t\titems: widgets.map((widget) => ({\n\t\t\t\t\ttitle: widget.title,\n\t\t\t\t\turl: `#widget-${widget.id}`,\n\t\t\t\t\ticon: WIDGET_ICONS[widget.type] || FileText,\n\t\t\t\t})),\n\t\t\t});\n\t\t}\n\n\t\treturn groups;\n\t}, [visibleWidgets]);\n\n\treturn navigationGroups;\n}\n","\"use client\";\n\n/**\n * Job Details Navigation - Client Component\n *\n * Provides navigation for job details widgets using the existing NavGrouped component.\n * Matches the design, structure, and behavior of all other sidebar navigations in the app.\n *\n * Features:\n * - Back button to jobs list\n * - Add Widget dropdown menu (matches PresetReportsDropdown pattern)\n * - Presets dropdown menu for layout presets\n * - Uses existing NavGrouped component for consistency\n * - Dynamic navigation based on visible widgets\n * - Scroll-spy highlighting (via scroll-utils)\n * - Proper anchor links (#widget-id)\n * - Grouped by category (Overview, Financials, Documentation, etc.)\n */\n\nimport { ArrowLeft } from \"lucide-react\";\nimport Link from \"next/link\";\n\nimport { NavGrouped } from \"@/components/layout/nav-grouped\";\nimport {\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarMenu,\n\tSidebarMenuButton,\n\tSidebarMenuItem,\n} from \"@/components/ui/sidebar\";\nimport { AddWidgetDropdown } from \"./add-widget-dropdown\";\nimport { PresetsDropdown } from \"./presets-dropdown\";\nimport { useWidgetNavigation } from \"./use-widget-navigation\";\n\nexport function JobDetailsNav() {\n\t// Get navigation groups dynamically from visible widgets\n\tconst navigationGroups = useWidgetNavigation();\n\n\treturn (\n\t\t<>\n\t\t\t{/* Back Button */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarMenu>\n\t\t\t\t\t<SidebarMenuItem>\n\t\t\t\t\t\t<SidebarMenuButton asChild>\n\t\t\t\t\t\t\t<Link href=\"/dashboard/work\">\n\t\t\t\t\t\t\t\t<ArrowLeft />\n\t\t\t\t\t\t\t\t<span>Back to Jobs</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</SidebarMenuButton>\n\t\t\t\t\t</SidebarMenuItem>\n\t\t\t\t</SidebarMenu>\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Layout Controls */}\n\t\t\t<SidebarGroup>\n\t\t\t\t<SidebarGroupLabel>Layout</SidebarGroupLabel>\n\t\t\t\t<AddWidgetDropdown />\n\t\t\t\t<PresetsDropdown />\n\t\t\t</SidebarGroup>\n\n\t\t\t{/* Widget Navigation */}\n\t\t\t<NavGrouped groups={navigationGroups} />\n\t\t</>\n\t);\n}\n","/**\n * Icon Registry - Dynamic Icon Exports\n *\n * Performance-optimized icon registry using Next.js dynamic imports.\n * Each icon is code-split into a separate chunk and loaded on demand.\n *\n * Benefits:\n * - Reduces initial bundle by ~300-900KB (from 63 upfront imports)\n * - Icons load only when needed for current page\n * - Automatic code splitting via Next.js\n * - Drop-in replacement for lucide-react imports\n *\n * Usage:\n * // Instead of:\n * import { Home, Settings } from \"lucide-react\";\n *\n * // Use:\n * import { Home, Settings } from \"@/lib/utils/icon-registry\";\n */\n\nimport dynamic from \"next/dynamic\";\n\n// Each icon is dynamically imported and code-split\nexport const Home = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Home),\n);\nexport const Settings = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Settings),\n);\nexport const Users = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Users),\n);\nexport const User = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.User),\n);\nexport const UserPlus = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.UserPlus),\n);\nexport const Mail = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Mail),\n);\nexport const MailOpen = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MailOpen),\n);\nexport const Phone = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Phone),\n);\nexport const MessageSquare = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MessageSquare),\n);\nexport const Calendar = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Calendar),\n);\nexport const ClipboardList = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ClipboardList),\n);\nexport const FileText = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileText),\n);\nexport const FileSignature = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileSignature),\n);\nexport const FileSpreadsheet = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileSpreadsheet),\n);\nexport const FileEdit = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.FileEdit),\n);\nexport const Receipt = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Receipt),\n);\nexport const Inbox = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Inbox),\n);\nexport const Archive = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Archive),\n);\nexport const Trash = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Trash),\n);\nexport const Star = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Star),\n);\nexport const Hash = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Hash),\n);\nexport const Ticket = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Ticket),\n);\nexport const Wrench = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Wrench),\n);\nexport const ShieldCheck = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShieldCheck),\n);\nexport const ShieldAlert = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShieldAlert),\n);\nexport const Shield = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Shield),\n);\nexport const BookOpen = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BookOpen),\n);\nexport const Book = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Book),\n);\nexport const Box = dynamic(() => import(\"lucide-react\").then((mod) => mod.Box));\nexport const Package = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Package),\n);\nexport const DollarSign = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.DollarSign),\n);\nexport const CreditCard = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.CreditCard),\n);\nexport const TrendingUp = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.TrendingUp),\n);\nexport const BarChart = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BarChart),\n);\nexport const Target = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Target),\n);\nexport const Trophy = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Trophy),\n);\nexport const BadgeCheck = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.BadgeCheck),\n);\nexport const Sparkles = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Sparkles),\n);\nexport const Zap = dynamic(() => import(\"lucide-react\").then((mod) => mod.Zap));\nexport const Globe = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Globe),\n);\nexport const MapPin = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.MapPin),\n);\nexport const Building2 = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Building2),\n);\nexport const Briefcase = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Briefcase),\n);\nexport const Calculator = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Calculator),\n);\nexport const Clock = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Clock),\n);\nexport const Camera = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Camera),\n);\nexport const QrCode = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.QrCode),\n);\nexport const Search = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Search),\n);\nexport const Tag = dynamic(() => import(\"lucide-react\").then((mod) => mod.Tag));\nexport const List = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.List),\n);\nexport const CheckCircle2 = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.CheckCircle2),\n);\nexport const ArrowLeft = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowLeft),\n);\nexport const ArrowUpFromLine = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowUpFromLine),\n);\nexport const ArrowDownToLine = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ArrowDownToLine),\n);\nexport const Megaphone = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Megaphone),\n);\nexport const Palette = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Palette),\n);\nexport const Paperclip = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Paperclip),\n);\nexport const ShoppingCart = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.ShoppingCart),\n);\nexport const GraduationCap = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.GraduationCap),\n);\nexport const Bug = dynamic(() => import(\"lucide-react\").then((mod) => mod.Bug));\nexport const X = dynamic(() => import(\"lucide-react\").then((mod) => mod.X));\nexport const Bell = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Bell),\n);\nexport const Sliders = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Sliders),\n);\nexport const UserCog = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.UserCog),\n);\nexport const Repeat = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Repeat),\n);\nexport const Wallet = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Wallet),\n);\nexport const Workflow = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Workflow),\n);\nexport const Database = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Database),\n);\nconst Lock = dynamic(() => import(\"lucide-react\").then((mod) => mod.Lock));\nconst KeyRound = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.KeyRound),\n);\nconst Heart = dynamic(() => import(\"lucide-react\").then((mod) => mod.Heart));\nconst Gift = dynamic(() => import(\"lucide-react\").then((mod) => mod.Gift));\nconst Folder = dynamic(() => import(\"lucide-react\").then((mod) => mod.Folder));\nconst Store = dynamic(() => import(\"lucide-react\").then((mod) => mod.Store));\nconst PiggyBank = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.PiggyBank),\n);\nconst Landmark = dynamic(() =>\n\timport(\"lucide-react\").then((mod) => mod.Landmark),\n);\n","\"use client\";\n\n/**\n * Price Book Sidebar - Client Component\n *\n * Dedicated sidebar for price book page with:\n * - Supplier API integration status\n * - Quick actions (labor calculator, bulk operations)\n * - Category filtering\n * - Active filters display\n *\n * Performance optimizations:\n * - Zustand for state management\n * - Selective re-renders with shallow selectors\n */\n\nimport {\n\tAlertCircle,\n\tCalculator,\n\tCheck,\n\tCheckCircle2,\n\tChevronDown,\n\tChevronRight,\n\tDownload,\n\tLoader2,\n\tPlus,\n\tSettings,\n\tTrendingUp,\n\tUpload,\n\tX,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n\tSidebar,\n\tSidebarContent,\n\tSidebarFooter,\n\tSidebarGroup,\n\tSidebarGroupLabel,\n\tSidebarHeader,\n} from \"@/components/ui/sidebar\";\nimport {\n\ttype SupplierName,\n\ttype SyncStatus,\n\tusePriceBookStore,\n} from \"@/lib/stores/pricebook-store\";\n\n// ============================================================================\n// Supplier Status Icon Component\n// ============================================================================\n\nfunction SupplierStatusIcon({ status }: { status: SyncStatus }) {\n\tswitch (status) {\n\t\tcase \"connected\":\n\t\t\treturn <CheckCircle2 className=\"text-success dark:text-success size-4\" />;\n\t\tcase \"syncing\":\n\t\t\treturn (\n\t\t\t\t<Loader2 className=\"text-primary dark:text-primary size-4 animate-spin\" />\n\t\t\t);\n\t\tcase \"error\":\n\t\t\treturn (\n\t\t\t\t<AlertCircle className=\"text-destructive dark:text-destructive size-4\" />\n\t\t\t);\n\t\tcase \"warning\":\n\t\t\treturn <AlertCircle className=\"text-warning dark:text-warning size-4\" />;\n\t\tdefault:\n\t\t\treturn <div className=\"bg-muted-foreground/30 size-2 rounded-full\" />;\n\t}\n}\n\n// ============================================================================\n// Supplier Status Card Component\n// ============================================================================\n\nfunction SupplierStatusCard({\n\tname,\n\tdisplayName,\n\tstatus,\n\tlastSyncAt,\n\titemsImported,\n\terrorMessage,\n}: {\n\tname: SupplierName;\n\tdisplayName: string;\n\tstatus: SyncStatus;\n\tlastSyncAt: Date | null;\n\titemsImported: number;\n\terrorMessage: string | null;\n}) {\n\tconst syncSupplier = usePriceBookStore((state) => state.syncSupplier);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tconst handleSync = async () => {\n\t\tsetIsLoading(true);\n\t\tawait syncSupplier(name);\n\t\tsetIsLoading(false);\n\t};\n\n\tconst getStatusText = () => {\n\t\tif (status === \"syncing\") {\n\t\t\treturn \"Syncing...\";\n\t\t}\n\t\tif (status === \"error\") {\n\t\t\treturn errorMessage || \"Error\";\n\t\t}\n\t\tif (status === \"connected\" && lastSyncAt) {\n\t\t\tconst now = new Date();\n\t\t\tconst diffHours = Math.floor(\n\t\t\t\t(now.getTime() - lastSyncAt.getTime()) / (1000 * 60 * 60),\n\t\t\t);\n\t\t\tif (diffHours < 1) {\n\t\t\t\treturn \"Just now\";\n\t\t\t}\n\t\t\tif (diffHours < 24) {\n\t\t\t\treturn `${diffHours}h ago`;\n\t\t\t}\n\t\t\treturn `${Math.floor(diffHours / 24)}d ago`;\n\t\t}\n\t\treturn \"Not connected\";\n\t};\n\n\treturn (\n\t\t<div className=\"group hover:border-primary/50 hover:bg-accent/5 rounded-lg border p-3 transition-all\">\n\t\t\t<div className=\"flex items-start justify-between gap-2\">\n\t\t\t\t<div className=\"flex items-start gap-3\">\n\t\t\t\t\t<div className=\"mt-0.5\">\n\t\t\t\t\t\t<SupplierStatusIcon status={status} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-1 space-y-1\">\n\t\t\t\t\t\t<p className=\"text-sm leading-none font-medium\">{displayName}</p>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs\">{getStatusText()}</p>\n\t\t\t\t\t\t{status === \"connected\" && itemsImported > 0 && (\n\t\t\t\t\t\t\t<p className=\"text-success dark:text-success text-xs\">\n\t\t\t\t\t\t\t\t{itemsImported.toLocaleString()} items\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"size-7 opacity-0 transition-opacity group-hover:opacity-100\"\n\t\t\t\t\tdisabled={isLoading || status === \"syncing\"}\n\t\t\t\t\tonClick={handleSync}\n\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t>\n\t\t\t\t\t<Loader2\n\t\t\t\t\t\tclassName={`size-3 ${isLoading || status === \"syncing\" ? \"animate-spin\" : \"\"}`}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t{status === \"error\" && errorMessage && (\n\t\t\t\t<div className=\"bg-destructive dark:bg-destructive/20 mt-2 rounded-md p-2\">\n\t\t\t\t\t<p className=\"text-destructive dark:text-destructive text-xs\">\n\t\t\t\t\t\t{errorMessage}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\n// ============================================================================\n// Quick Actions Section\n// ============================================================================\n\nfunction QuickActionsSection() {\n\treturn (\n\t\t<SidebarGroup>\n\t\t\t<SidebarGroupLabel>Quick Actions</SidebarGroupLabel>\n\t\t\t<div className=\"space-y-2 px-2\">\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t>\n\t\t\t\t\t<Link href=\"/dashboard/work/pricebook/labor-calculator\">\n\t\t\t\t\t\t<Calculator className=\"size-3\" />\n\t\t\t\t\t\tLabor Calculator\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t>\n\t\t\t\t\t<Link href=\"/dashboard/work/pricebook/mass-update\">\n\t\t\t\t\t\t<TrendingUp className=\"size-3\" />\n\t\t\t\t\t\tMass Price Increase\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t>\n\t\t\t\t\t<Link href=\"/dashboard/work/pricebook/import\">\n\t\t\t\t\t\t<Upload className=\"size-3\" />\n\t\t\t\t\t\tBulk Import\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"w-full justify-start gap-2 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t>\n\t\t\t\t\t<Link href=\"/dashboard/work/pricebook/export\">\n\t\t\t\t\t\t<Download className=\"size-3\" />\n\t\t\t\t\t\tBulk Export\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</SidebarGroup>\n\t);\n}\n\n// ============================================================================\n// Categories Section\n// ============================================================================\n\nfunction CategoriesSection() {\n\tconst [collapsed, setCollapsed] = useState(false);\n\tconst categories = usePriceBookStore((state) => state.filters.categories);\n\tconst setCategories = usePriceBookStore((state) => state.setCategories);\n\n\t// Mock categories - will come from database\n\tconst availableCategories = [\n\t\t{ name: \"HVAC\", count: 45 },\n\t\t{ name: \"Plumbing\", count: 38 },\n\t\t{ name: \"Electrical\", count: 52 },\n\t\t{ name: \"General\", count: 23 },\n\t];\n\n\tconst toggleCategory = (name: string) => {\n\t\tif (categories.includes(name)) {\n\t\t\tsetCategories(categories.filter((c) => c !== name));\n\t\t} else {\n\t\t\tsetCategories([...categories, name]);\n\t\t}\n\t};\n\n\treturn (\n\t\t<SidebarGroup>\n\t\t\t<button\n\t\t\t\tclassName=\"flex w-full items-center justify-between px-2\"\n\t\t\t\tonClick={() => setCollapsed(!collapsed)}\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t<SidebarGroupLabel>Categories</SidebarGroupLabel>\n\t\t\t\t{collapsed ? (\n\t\t\t\t\t<ChevronRight className=\"size-4\" />\n\t\t\t\t) : (\n\t\t\t\t\t<ChevronDown className=\"size-4\" />\n\t\t\t\t)}\n\t\t\t</button>\n\t\t\t{!collapsed && (\n\t\t\t\t<div className=\"space-y-1 px-2 pt-2\">\n\t\t\t\t\t{availableCategories.map((category) => (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1.5 text-left text-sm transition-colors\"\n\t\t\t\t\t\t\tkey={category.name}\n\t\t\t\t\t\t\tonClick={() => toggleCategory(category.name)}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t{categories.includes(category.name) && (\n\t\t\t\t\t\t\t\t\t<Check className=\"text-primary size-3\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tcategories.includes(category.name) ? \"font-medium\" : \"\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{category.name}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Badge className=\"text-xs\" variant=\"secondary\">\n\t\t\t\t\t\t\t\t{category.count}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</SidebarGroup>\n\t);\n}\n\n// ============================================================================\n// Active Filters Section\n// ============================================================================\n\nfunction ActiveFiltersSection() {\n\tconst filters = usePriceBookStore((state) => state.filters);\n\tconst resetFilters = usePriceBookStore((state) => state.resetFilters);\n\tconst setCategories = usePriceBookStore((state) => state.setCategories);\n\tconst setItemTypes = usePriceBookStore((state) => state.setItemTypes);\n\n\tconst hasActiveFilters =\n\t\tfilters.categories.length > 0 ||\n\t\tfilters.itemTypes.length > 0 ||\n\t\tfilters.statusFilter !== \"all\" ||\n\t\tfilters.supplierFilter.length > 0;\n\n\tif (!hasActiveFilters) {\n\t\treturn null;\n\t}\n\n\tconst removeCategory = (category: string) => {\n\t\tsetCategories(filters.categories.filter((c) => c !== category));\n\t};\n\n\tconst removeItemType = (type: \"service\" | \"material\" | \"package\") => {\n\t\tsetItemTypes(filters.itemTypes.filter((t) => t !== type));\n\t};\n\n\treturn (\n\t\t<SidebarGroup>\n\t\t\t<div className=\"flex items-center justify-between px-2\">\n\t\t\t\t<SidebarGroupLabel>Active Filters</SidebarGroupLabel>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"h-auto p-0 text-xs\"\n\t\t\t\t\tonClick={resetFilters}\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t>\n\t\t\t\t\tClear all\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div className=\"space-y-2 px-2\">\n\t\t\t\t{filters.categories.map((category) => (\n\t\t\t\t\t<Badge className=\"gap-1\" key={category} variant=\"secondary\">\n\t\t\t\t\t\t{category}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"hover:bg-accent ml-1 rounded-sm\"\n\t\t\t\t\t\t\tonClick={() => removeCategory(category)}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<X className=\"size-3\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Badge>\n\t\t\t\t))}\n\t\t\t\t{filters.itemTypes.map((type) => (\n\t\t\t\t\t<Badge className=\"gap-1\" key={type} variant=\"outline\">\n\t\t\t\t\t\t{type}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"hover:bg-accent ml-1 rounded-sm\"\n\t\t\t\t\t\t\tonClick={() => removeItemType(type)}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<X className=\"size-3\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Badge>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</SidebarGroup>\n\t);\n}\n\n// ============================================================================\n// Main Sidebar Component\n// ============================================================================\n\nexport function PriceBookSidebar() {\n\tconst suppliers = usePriceBookStore((state) => state.suppliers);\n\tconst [suppliersCollapsed, setSuppliersCollapsed] = useState(false);\n\n\treturn (\n\t\t<Sidebar collapsible=\"offcanvas\" side=\"right\" variant=\"inset\">\n\t\t\t<SidebarHeader className=\"border-b p-4\">\n\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t<h2 className=\"text-sm font-semibold\">Price Book Tools</h2>\n\t\t\t\t\t<Button asChild size=\"icon\" variant=\"ghost\">\n\t\t\t\t\t\t<Link href=\"/dashboard/settings/pricebook/integrations\">\n\t\t\t\t\t\t\t<Settings className=\"size-4\" />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</SidebarHeader>\n\n\t\t\t<SidebarContent className=\"gap-0\">\n\t\t\t\t{/* API Integrations Section */}\n\t\t\t\t<SidebarGroup>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"flex w-full items-center justify-between px-2\"\n\t\t\t\t\t\tonClick={() => setSuppliersCollapsed(!suppliersCollapsed)}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SidebarGroupLabel>API Integrations</SidebarGroupLabel>\n\t\t\t\t\t\t{suppliersCollapsed ? (\n\t\t\t\t\t\t\t<ChevronRight className=\"size-4\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ChevronDown className=\"size-4\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t\t{!suppliersCollapsed && (\n\t\t\t\t\t\t<div className=\"space-y-2 px-2 pt-2\">\n\t\t\t\t\t\t\t{suppliers.map((supplier) => (\n\t\t\t\t\t\t\t\t<SupplierStatusCard key={supplier.name} {...supplier} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</SidebarGroup>\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Quick Actions */}\n\t\t\t\t<QuickActionsSection />\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Categories */}\n\t\t\t\t<CategoriesSection />\n\n\t\t\t\t<Separator className=\"my-2\" />\n\n\t\t\t\t{/* Active Filters */}\n\t\t\t\t<ActiveFiltersSection />\n\t\t\t</SidebarContent>\n\n\t\t\t<SidebarFooter className=\"border-t p-3\">\n\t\t\t\t<Button asChild className=\"w-full gap-2\" size=\"sm\" variant=\"default\">\n\t\t\t\t\t<Link href=\"/dashboard/work/pricebook/new\">\n\t\t\t\t\t\t<Plus className=\"size-4\" />\n\t\t\t\t\t\tAdd Item\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t</SidebarFooter>\n\t\t</Sidebar>\n\t);\n}\n"],"names":[],"mappings":"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,KAAM,iDACP,EACA,CACC,MAAO,sBACP,KAAM,6CACP,EAEF,AADE,EAEF,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,gBACP,KAAM,2CACN,MAAO,WACR,EACA,CACC,MAAO,mBACP,KAAM,sCACP,EACA,CACC,MAAO,oBACP,KAAM,uCACP,EACA,CAAE,MAAO,YAAa,KAAM,wCAAyC,EACrE,CACC,MAAO,gBACP,KAAM,4CACP,EACA,CACC,MAAO,oBACP,KAAM,uCACP,EACA,CAAE,MAAO,cAAe,KAAM,kCAAmC,EACjE,CACC,MAAO,mBACP,KAAM,qCACP,EACA,CACC,MAAO,oBACP,KAAM,gDACP,EACA,CAAE,MAAO,eAAgB,KAAM,kCAAmC,EAClE,CAAE,MAAO,sBAAuB,KAAM,iCAAkC,EACxE,CAAE,MAAO,mBAAoB,KAAM,iCAAkC,EACrE,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,kBACP,KAAM,uCACN,MAAO,SACR,EACA,CACC,MAAO,gBACP,KAAM,+CACP,EACA,CACC,MAAO,mBACP,KAAM,4CACP,EACA,CACC,MAAO,sBACP,KAAM,0CACP,EACA,CACC,MAAO,qBACP,KAAM,0CACP,EACA,CACC,MAAO,qBACP,KAAM,wCACP,EACA,CACC,MAAO,kBACP,KAAM,2CACP,EACA,CACC,MAAO,kBACP,KAAM,2CACP,EACA,CACC,MAAO,qBACP,KAAM,2CACP,EACA,CACC,MAAO,kBACP,KAAM,0CACP,EACA,AACF,EACA,CACC,MAAO,mBACP,MAAO,CACN,CACC,MAAO,yBACP,KAAM,wCACN,MAAO,SACR,EACA,CACC,MAAO,yBACP,KAAM,sCACP,EACA,CACC,MAAO,oBACP,KAAM,wCACP,EACA,CAAE,MAAO,mBAAoB,KAAM,mCAAoC,EACvE,CACC,MAAO,iBACP,KAAM,0CACP,EACA,CAAE,MAAO,mBAAoB,KAAM,mCAAoC,EACvE,CACC,MAAO,gBACP,KAAM,yCACP,EACA,CAAE,MAAO,aAAc,KAAM,sCAAuC,EACpE,CAAE,MAAO,WAAY,KAAM,oCAAqC,EAChE,CAC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,EAAA,uCAElC,CAAA,EAAA,GAAA,OAAA,AAAO,EAAC,IACxB,EAAA,CAAA,CAAA,QAAuB,IAAI,CAAC,AAAC,GAAQ,EAAI,QAAQ,EAAA,uCvCvHlD,IAAM,GAAqB,CAC1B,MAAO,CACN,CACC,MAAO,QACP,IAAK,aACL,KAAM,EACP,EACA,CACD,cAAe,CACd,CACC,MAAO,yBACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,2BACL,KAAM,GACN,MAAO,MACP,YAAa,iCACd,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,8CACL,KAAM,GACN,YAAa,sBACd,EACA,CACC,MAAO,SACP,IAAK,+BACL,KAAM,GACN,YAAa,wBACd,EACA,CACC,MAAO,WACP,IAAK,iCACL,KAAM,GACN,YAAa,uBACd,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,QACP,IAAK,iDACL,KAAM,GACN,YAAa,+BACd,EACA,AACF,EACA,CACC,MAAO,YACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,iCACL,KAAM,GACN,YAAa,mCACd,EACA,AACF,EACA,CAED,KAAM,CACL,CACC,MAAO,kBACP,MAAO,CACN,CACC,MAAO,OACP,IAAK,kBACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,uBACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,uBACL,KAAM,EACP,EAEF,AADE,EAEF,CACC,MAAO,sBACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,kCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,oBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,qCACL,KAAM,EACP,EAEF,AADE,EAEF,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,UACP,IAAK,0BACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,4BACL,KAAM,EACP,EACA,AACF,EACA,CACD,QAAS,CACR,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,UACP,IAAK,qBACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,8BACL,KAAM,EACP,EACA,CACC,MAAO,UACP,IAAK,6BACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,8BACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,cACP,IAAK,iCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,kCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,cACP,MAAO,CACN,CACC,MAAO,cACP,IAAK,iCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,sBACP,IAAK,yCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,kBACP,IAAK,qCACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,aACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,gCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,oBACP,IAAK,uCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,iBACP,IAAK,oCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,sBACP,IAAK,yCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,mBACP,IAAK,sCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,aACP,IAAK,gCACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,kBACP,MAAO,CACN,CACC,MAAO,UACP,IAAK,6BACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,QACP,IAAK,yBACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,YACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,wCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,qBACP,IAAK,wCACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,SACP,IAAK,4BACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACD,UAAW,CACV,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,uBACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,sBACP,IAAK,iCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,cACP,IAAK,0BACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,gBACP,IAAK,qCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,UACP,IAAK,+BACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,aACP,IAAK,kCACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,mBACP,IAAK,4BACL,KAAM,GACN,MAAO,MACR,EACA,CACC,MAAO,iBACP,IAAK,8BACL,KAAM,GACN,MAAO,MACR,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,yBACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,0BACP,IAAK,qCACL,KAAM,EACP,EAEF,AADE,EAEF,CACC,MAAO,0BACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,kDACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,qDACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,2BACP,IAAK,mDACL,KAAM,EACP,EACA,CACC,MAAO,0BACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,mDACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,kDACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,8CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,gBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,iDACL,KAAM,EACP,EACA,CACC,MAAO,0BACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,kCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,gDACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,2CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,mBACP,MAAO,CACN,CACC,MAAO,yBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,4BACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,qCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,kCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,uBACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,iDACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,8CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,uBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,qCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,qCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,qCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,wBACP,MAAO,CACN,CACC,MAAO,uBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,+CACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,kDACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,6CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,2BACP,MAAO,CACN,CACC,MAAO,oBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,8CACL,KAAM,EACP,EACA,CACC,MAAO,0BACP,IAAK,iDACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,wBACP,MAAO,CACN,CACC,MAAO,eACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,4CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,sBACP,MAAO,CACN,CACC,MAAO,mBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,iDACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,yCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,sBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,6CACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,yCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,mBACP,MAAO,CACN,CACC,MAAO,oBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,sCACL,KAAM,EACP,EACA,AACF,EACA,CACD,UAAW,CACV,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,sBACP,IAAK,uBACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,iCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,eACP,MAAO,CACN,CACC,MAAO,YACP,IAAK,6BACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,OACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,qCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,mBACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,kCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,YACP,IAAK,2CACN,EACA,CACC,MAAO,kBACP,IAAK,iDACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,CACC,MAAO,qBACP,IAAK,gDACN,EACA,CACC,MAAO,sBACP,IAAK,2CACN,EACA,AACF,EACA,CACC,MAAO,2BACP,IAAK,oCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,YACP,IAAK,6CACN,EACA,CACC,MAAO,UACP,IAAK,2CACN,EACA,CACC,MAAO,mBACP,IAAK,4CACN,EACA,CACC,MAAO,qBACP,IAAK,6CACN,EACA,CACC,MAAO,cACP,IAAK,+CACN,EACA,AACF,EACA,CACC,MAAO,eACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,gCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,0BACP,IAAK,+CACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,oCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,eACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,8BACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,wCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,cACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,yCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,kBACP,MAAO,CACN,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,wCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,mBACP,IAAK,0CACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,wCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,2CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,kBACP,MAAO,CACN,CACC,MAAO,gBACP,IAAK,qCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,sCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,kBACP,MAAO,CACN,CACC,MAAO,gBACP,IAAK,2CACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,0CACL,KAAM,EACP,EACA,AACF,EACA,CACD,KAAM,CACL,CACC,MAAO,aACP,MAAO,CACN,CACC,MAAO,eACP,IAAK,kBACL,KAAM,GACN,MAAO,GACR,EACA,CACC,MAAO,mBACP,IAAK,oCACL,KAAM,GACN,MAAO,GACR,EACA,CACC,MAAO,qBACP,IAAK,mCACL,KAAM,GACN,MAAO,GACR,EACA,CACC,MAAO,oBACP,IAAK,iCACL,KAAM,GACN,MAAO,GACR,EACA,CACC,MAAO,kBACP,IAAK,oCACL,KAAM,GACN,MAAO,GACR,EACA,CACC,MAAO,sBACP,IAAK,qCACL,KAAM,GACN,MAAO,GACR,EACA,AACF,EACA,CACD,WAAY,CACX,CACC,MAAO,sBACP,IAAK,wBACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,iCACN,EACA,CACC,MAAO,QACP,IAAK,6BACN,EACA,CACC,MAAO,YACP,IAAK,iCACN,EACA,CACD,GAAI,CACH,CACC,WAAO,EACP,MAAO,CACN,CACC,MAAO,aACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,sBACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,sBACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,yBACL,KAAM,EACP,EACA,AACF,EACA,CACD,SAAU,CACT,CACC,WAAO,EACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,sBACL,KAAM,EACP,EACA,AACF,EAgBA,CACC,MAAO,UACP,MAAO,CACN,CACC,MAAO,gBACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,uCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,4CACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,0CACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,UACP,MAAO,CACN,CACC,MAAO,kBACP,IAAK,8BACL,KAAM,EACP,EACA,CACC,MAAO,UACP,IAAK,8BACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,gBACP,MAAO,CACN,CACC,MAAO,iBACP,IAAK,qCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,oCACN,EACA,CACC,MAAO,QACP,IAAK,0CACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,CACC,MAAO,gBACP,IAAK,0CACN,EACA,CACC,MAAO,gBACP,IAAK,kDACN,EACA,CACC,MAAO,YACP,IAAK,8CACN,EACA,AACF,EACA,CACC,MAAO,mBACP,IAAK,qCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,OACP,MAAO,CACN,CACC,MAAO,OACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,UACP,IAAK,8BACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,iCACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,iCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,oBACP,IAAK,+BACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,8BACN,EACA,CACC,MAAO,oBACP,IAAK,uCACN,EACA,CACC,MAAO,eACP,IAAK,2CACN,EACA,CACC,MAAO,gBACP,IAAK,4CACN,EACA,CACC,MAAO,iBACP,IAAK,uCACN,EACA,CACC,MAAO,kBACP,IAAK,mCACN,EACA,AACF,EACA,AACF,EACA,CACC,MAAO,YACP,MAAO,CACN,CACC,MAAO,oBACP,IAAK,gCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,+BACN,EACA,CACC,MAAO,cACP,IAAK,2CACN,EACA,CACC,MAAO,oBACP,IAAK,uCACN,EACA,CACC,MAAO,gBACP,IAAK,6CACN,EACA,CACC,MAAO,oBACP,IAAK,uCACN,EACA,CACC,MAAO,gBACP,IAAK,6CACN,EACA,AACF,EACA,CACC,MAAO,kBACP,IAAK,sCACL,KAAM,EACP,EACA,CACC,MAAO,OACP,IAAK,2BACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,YACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,oCACL,KAAM,EACP,EACA,CACC,MAAO,UACP,IAAK,8BACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,6BACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,CACC,MAAO,YACP,IAAK,uCACN,EACA,CACC,MAAO,YACP,IAAK,uCACN,EACA,CACC,MAAO,UACP,IAAK,qCACN,EACA,CACC,MAAO,WACP,IAAK,sCACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,CACC,MAAO,WACP,IAAK,sCACN,EACA,AACF,EACA,CACC,MAAO,UACP,IAAK,8BACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,6BACN,EACA,CACC,MAAO,gBACP,IAAK,2CACN,EACA,CACC,MAAO,kBACP,IAAK,6CACN,EACA,CACC,MAAO,qBACP,IAAK,gDACN,EACA,CACC,MAAO,qBACP,IAAK,gDACN,EACA,CACC,MAAO,cACP,IAAK,yCACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,CACC,MAAO,cACP,IAAK,yCACN,EACA,CACC,MAAO,YACP,IAAK,uCACN,EACA,CACC,MAAO,aACP,IAAK,wCACN,EACA,AACF,EACA,AACF,EACA,CACC,MAAO,YACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,gCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,+BACN,EACA,CACC,MAAO,mBACP,IAAK,yCACN,EACA,CACC,MAAO,oBACP,IAAK,yCACN,EACA,CACC,MAAO,eACP,IAAK,4CACN,EACA,CACC,MAAO,iBACP,IAAK,uCACN,EACA,CACC,MAAO,aACP,IAAK,0CACN,EACA,AACF,EACA,AACF,EACA,CACC,MAAO,YACP,MAAO,CACN,CACC,MAAO,mBACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,mCACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,aACP,MAAO,CACN,CACC,MAAO,sBACP,IAAK,iCACL,KAAM,GACN,MAAO,CACN,CACC,MAAO,WACP,IAAK,gCACN,EACA,CACC,MAAO,YACP,IAAK,0CACN,EACA,CACC,MAAO,qBACP,IAAK,yCACN,EACA,CACC,MAAO,gBACP,IAAK,mCACN,EACA,CACC,MAAO,oBACP,IAAK,sCACN,EACA,CACC,MAAO,eACP,IAAK,wCACN,EACA,AACF,EACA,AACF,EACA,CACC,MAAO,SACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,yCACL,KAAM,EACP,EACA,CACC,MAAO,eACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,aACP,IAAK,iCACL,KAAM,EACP,EACA,AACF,EACA,CACD,UAAW,SACX,MAAO,CACN,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,0BACP,IAAK,mCACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,gCACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,6BACL,KAAM,EACP,EACA,CACC,MAAO,uBACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,wBACP,IAAK,4BACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,iBACP,MAAO,CACN,CACC,MAAO,wBACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,0BACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,wBACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,qBACP,MAAO,CACN,CACC,MAAO,qBACP,IAAK,4BACL,KAAM,EACP,EACA,CACC,MAAO,iBACP,IAAK,kCACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,6BACL,KAAM,EACP,EACA,CACC,MAAO,yBACP,IAAK,+BACL,KAAM,EACP,EAEF,AADE,EAEF,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,kBACP,IAAK,0BACL,KAAM,EACP,EACA,CACC,MAAO,0BACP,IAAK,iCACL,KAAM,EACP,EACA,CACC,MAAO,cACP,IAAK,uBACL,KAAM,EACP,EACA,CACC,MAAO,kBACP,IAAK,uBACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,uBACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,2BACP,MAAO,CACN,CACC,MAAO,uBACP,IAAK,iCACL,KAAM,EACP,EACA,CACC,MAAO,gBACP,IAAK,uBACL,KAAM,EACP,EACA,CACC,MAAO,oBACP,IAAK,sBACL,KAAM,EACP,EACA,CACC,MAAO,sBACP,IAAK,2BACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,oBACP,MAAO,CACN,CACC,MAAO,gBACP,IAAK,wBACL,KAAM,EACP,EACA,CACC,MAAO,2BACP,IAAK,+BACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,2BACL,KAAM,EACP,EACA,CACC,MAAO,qBACP,IAAK,6BACL,KAAM,EACP,EACA,AACF,EACA,CACD,WAAY,CACX,CACC,WAAO,EACP,MAAO,CACN,CACC,MAAO,eACP,IAAK,kBACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,WACP,MAAO,CACN,CACC,MAAO,cACP,IAAK,eACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,YACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,UACP,MAAO,CACN,CACC,MAAO,WACP,IAAK,YACL,KAAM,EACP,EACA,CACC,MAAO,WACP,IAAK,YACL,KAAM,EACP,EACA,AACF,EACA,CACC,MAAO,aACP,MAAO,CACN,CACC,MAAO,cACP,IAAK,WACL,KAAM,EACP,E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"}