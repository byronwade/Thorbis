module.exports=[57394,a=>{"use strict";var b=a.i(861467),c=a.i(916680),d=a.i(125987),e=a.i(898062),f=a.i(543829),g=a.i(412048),h=a.i(127634),i=a.i(268344),j=a.i(145679),k=a.i(783281);a.i(256564);var l=a.i(169021),m=(0,l.createServerReference)("00d2dc966f2fff77c57777250f45130885476a8b83",l.callServer,void 0,l.findSourceMapURL,"getPhoneSettings"),n=(0,l.createServerReference)("4038c619c2e2ed0bb4f03276ff4c200700b84ce2ec",l.callServer,void 0,l.findSourceMapURL,"updatePhoneSettings"),o=a.i(120939),p=a.i(334838),q=a.i(638727),r=a.i(686556),r=r,s=a.i(821278);a.i(288007);var t=a.i(986990);a.i(445255);var u=a.i(18170);a.i(380934);var v=a.i(347421);function w(){let[a,c]=(0,k.useState)([{id:"1",name:"Main Reception",type:"ivr",status:"active",steps:5},{id:"2",name:"After Hours",type:"voicemail",status:"active",steps:2},{id:"3",name:"Sales Team",type:"routing",status:"draft",steps:3}]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(v.Card,{children:[(0,b.jsx)(v.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r.default,{className:"size-5"}),"Call Flows"]}),(0,b.jsx)(v.CardDescription,{children:"Design and manage visual call routing flows"})]}),(0,b.jsxs)(u.Button,{children:[(0,b.jsx)(q.Plus,{className:"mr-2 size-4"}),"Create Flow"]})]})}),(0,b.jsx)(v.CardContent,{children:(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsxs)(v.Card,{children:[(0,b.jsx)(v.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(v.CardTitle,{className:"text-base",children:a.name}),(0,b.jsxs)(v.CardDescription,{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)(t.Badge,{className:"text-xs",variant:"outline",children:a.type}),(0,b.jsxs)("span",{className:"text-xs",children:[a.steps," steps"]})]})]}),"active"===a.status?(0,b.jsx)(t.Badge,{variant:"default",children:"Active"}):(0,b.jsx)(t.Badge,{variant:"secondary",children:"Draft"})]})}),(0,b.jsxs)(v.CardContent,{className:"space-y-2",children:[(0,b.jsxs)(u.Button,{className:"w-full",size:"sm",variant:"outline",children:[(0,b.jsx)(s.Zap,{className:"mr-2 size-4"}),"Edit Flow"]}),(0,b.jsxs)(u.Button,{className:"w-full",size:"sm",variant:"outline",children:[(0,b.jsx)(p.Play,{className:"mr-2 size-4"}),"Test Flow"]})]})]},a.id))})})]}),(0,b.jsx)(v.Card,{className:"border-dashed",children:(0,b.jsxs)(v.CardContent,{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)(r.default,{className:"text-muted-foreground mb-4 size-12"}),(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"Visual Flow Builder"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 max-w-sm text-sm",children:"Design complex call routing with our drag-and-drop flow builder. Create IVR menus, conditional routing, and multi-step workflows."}),(0,b.jsxs)(u.Button,{children:[(0,b.jsx)(q.Plus,{className:"mr-2 size-4"}),"Create Your First Flow"]})]})}),(0,b.jsx)(v.Card,{className:"border-primary/50 bg-primary/5",children:(0,b.jsxs)(v.CardContent,{className:"flex items-start gap-3 pt-6",children:[(0,b.jsx)(e.Phone,{className:"text-primary mt-0.5 h-5 w-5 shrink-0"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-primary dark:text-primary text-sm font-medium",children:"Flow Design Best Practices"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Keep IVR menus simple with 3-4 options maximum. Always provide an option to reach a live person. Test your flows before publishing. Use clear, concise voice prompts. Consider peak hours when designing call capacity."})]})]})})]})}var x=a.i(689041);a.i(835218);var y=a.i(733621);a.i(839984);var z=a.i(372712);a.i(458393);var A=a.i(82012);a.i(146697);var B=a.i(778737),C=a.i(382281);a.i(650756);var D=a.i(560450);a.i(531982);var E=a.i(421983);a.i(897346);var F=a.i(75892);a.i(928414);var G=a.i(745250),H=a.i(443847),I=a.i(700760);let J={routingStrategy:"round_robin",fallbackNumber:"",businessHoursOnly:!1,voicemailEnabled:!0,voicemailGreetingUrl:"",voicemailEmailNotifications:!0,voicemailTranscriptionEnabled:!1,recordingEnabled:!1,recordingAnnouncement:"This call may be recorded for quality assurance purposes.",recordingConsentRequired:!0,ivrEnabled:!1,ivrMenu:"{}"};function K({initialSettings:a}){let{settings:l,isLoading:p,isPending:q,hasUnsavedChanges:r,updateSetting:s,saveSettings:t,reload:K}=(0,H.useSettings)({getter:m,setter:n,initialState:J,settingsName:"phone",prefetchedData:a??void 0,transformLoad:a=>a?{routingStrategy:a.routing_strategy??"round_robin",fallbackNumber:a.fallback_number??"",businessHoursOnly:a.business_hours_only??!1,voicemailEnabled:a.voicemail_enabled??!0,voicemailGreetingUrl:a.voicemail_greeting_url??"",voicemailEmailNotifications:a.voicemail_email_notifications??!0,voicemailTranscriptionEnabled:a.voicemail_transcription_enabled??!1,recordingEnabled:a.recording_enabled??!1,recordingAnnouncement:a.recording_announcement||"This call may be recorded for quality assurance purposes.",recordingConsentRequired:a.recording_consent_required??!0,ivrEnabled:a.ivr_enabled??!1,ivrMenu:a.ivr_menu?JSON.stringify(a.ivr_menu):"{}"}:{},transformSave:a=>{let b=new FormData;return b.append("routingStrategy",a.routingStrategy),b.append("fallbackNumber",a.fallbackNumber),b.append("businessHoursOnly",a.businessHoursOnly.toString()),b.append("voicemailEnabled",a.voicemailEnabled.toString()),b.append("voicemailGreetingUrl",a.voicemailGreetingUrl),b.append("voicemailEmailNotifications",a.voicemailEmailNotifications.toString()),b.append("voicemailTranscriptionEnabled",a.voicemailTranscriptionEnabled.toString()),b.append("recordingEnabled",a.recordingEnabled.toString()),b.append("recordingAnnouncement",a.recordingAnnouncement),b.append("recordingConsentRequired",a.recordingConsentRequired.toString()),b.append("ivrEnabled",a.ivrEnabled.toString()),b.append("ivrMenu",a.ivrMenu),b}}),L=(0,k.useCallback)(()=>{t().catch(()=>{})},[t]),M=(0,k.useCallback)(()=>{K().catch(()=>{})},[K]);return(0,b.jsx)(G.TooltipProvider,{children:(0,b.jsxs)(o.SettingsPageLayout,{description:"Manage routing, voicemail, and plan for the upcoming React Flow VOIP system.",hasChanges:r,helpText:"Changes apply to all inbound calls immediately.",isLoading:p,isPending:q,onCancel:M,onSave:L,saveButtonText:"Save phone settings",title:"Phone & Voice",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)(y.Breadcrumb,{children:(0,b.jsxs)(y.BreadcrumbList,{children:[(0,b.jsx)(y.BreadcrumbItem,{children:(0,b.jsx)(y.BreadcrumbLink,{asChild:!0,children:(0,b.jsx)(j.default,{href:"/dashboard/settings",children:"Settings"})})}),(0,b.jsx)(y.BreadcrumbSeparator,{}),(0,b.jsx)(y.BreadcrumbItem,{children:(0,b.jsx)(y.BreadcrumbLink,{asChild:!0,children:(0,b.jsx)(j.default,{href:"/dashboard/settings/communications",children:"Communications"})})}),(0,b.jsx)(y.BreadcrumbSeparator,{}),(0,b.jsx)(y.BreadcrumbItem,{children:(0,b.jsx)(y.BreadcrumbPage,{children:"Phone"})})]})}),(0,b.jsx)(u.Button,{asChild:!0,variant:"ghost",children:(0,b.jsxs)(j.default,{href:"/dashboard/settings/communications",children:[(0,b.jsx)(h.Settings,{className:"mr-2 size-4"}),"Back to communications"]})})]}),(0,b.jsxs)(E.Tabs,{className:"mt-6 space-y-6",defaultValue:"overview",children:[(0,b.jsxs)(E.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(E.TabsTrigger,{value:"overview",children:"Routing & Compliance"}),(0,b.jsx)(E.TabsTrigger,{value:"voicemail",children:"Company Voicemail"}),(0,b.jsx)(E.TabsTrigger,{value:"flows",children:"Call Flows (Beta)"})]}),(0,b.jsxs)(E.TabsContent,{className:"space-y-6",value:"overview",children:[(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Phone,{className:"size-4"}),"Routing & fallback"]}),(0,b.jsx)(v.CardDescription,{children:"Where inbound calls go when they reach your main number"})]}),(0,b.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:(0,I.cn)("grid","md:grid-cols-2","gap-4"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-sm font-medium",children:"Routing strategy"}),(0,b.jsxs)("select",{className:"border-input bg-background mt-2 block w-full rounded-md border px-3 py-2 text-sm",onChange:a=>s("routingStrategy",a.target.value),value:l.routingStrategy,children:[(0,b.jsx)("option",{value:"round_robin",children:"Round robin"}),(0,b.jsx)("option",{value:"skills_based",children:"Skills-based"}),(0,b.jsx)("option",{value:"priority",children:"Priority"}),(0,b.jsx)("option",{value:"simultaneous",children:"Simultaneous ring"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Determines how Thorbis assigns inbound calls."})]}),(0,b.jsxs)(C.StandardFormField,{label:"Fallback number",htmlFor:"phone-fallback",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)(G.Tooltip,{children:[(0,b.jsx)(G.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.HelpCircle,{className:"text-muted-foreground size-3"})}),(0,b.jsx)(G.TooltipContent,{children:"Phone number used if no teammates are available."})]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Phone number used if no teammates are available"})]}),(0,b.jsx)(z.Input,{id:"phone-fallback",onChange:a=>s("fallbackNumber",a.target.value),placeholder:"(555) 987-6543",type:"tel",value:l.fallbackNumber})]})]}),(0,b.jsx)(B.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-sm font-medium",children:"Business hours only"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Send callers to voicemail outside of configured business hours."})]}),(0,b.jsx)(D.Switch,{checked:l.businessHoursOnly,onCheckedChange:a=>s("businessHoursOnly",a)})]})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Voicemail,{className:"size-4"}),"Voicemail"]}),(0,b.jsx)(v.CardDescription,{children:"Greetings, transcription, and email notifications"})]}),(0,b.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Enable voicemail"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Allow callers to leave a message when no one answers."})]}),(0,b.jsx)(D.Switch,{checked:l.voicemailEnabled,onCheckedChange:a=>s("voicemailEnabled",a)})]}),l.voicemailEnabled&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Separator,{}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(C.StandardFormField,{label:"Greeting URL",htmlFor:"phone-greeting-url",children:[(0,b.jsx)(z.Input,{id:"phone-greeting-url",onChange:a=>s("voicemailGreetingUrl",a.target.value),placeholder:"https://cdn.yourcompany.com/greetings/vm.mp3",value:l.voicemailGreetingUrl}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Provide an MP3/OGG file for your greeting."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Email notifications for new voicemail"}),(0,b.jsx)(D.Switch,{checked:l.voicemailEmailNotifications,onCheckedChange:a=>s("voicemailEmailNotifications",a)})]})]}),(0,b.jsx)(B.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Transcribe voicemail"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Include transcription in notification emails."})]}),(0,b.jsx)(D.Switch,{checked:l.voicemailTranscriptionEnabled,onCheckedChange:a=>s("voicemailTranscriptionEnabled",a)})]})]})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(f.PhoneIncoming,{className:"size-4"}),"Call recording"]}),(0,b.jsx)(v.CardDescription,{children:"Capture calls for QA and maintain compliance"})]}),(0,b.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:(0,I.cn)("flex items-center justify-between","rounded-lg border","p-3"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Enable recording"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Applies to all inbound and outbound calls."})]}),(0,b.jsx)(D.Switch,{checked:l.recordingEnabled,onCheckedChange:a=>s("recordingEnabled",a)})]}),l.recordingEnabled&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Separator,{}),(0,b.jsx)(C.StandardFormField,{label:"Announcement message",htmlFor:"phone-recording-announcement",children:(0,b.jsx)(F.Textarea,{id:"phone-recording-announcement",className:"min-h-[80px] resize-none",onChange:a=>s("recordingAnnouncement",a.target.value),value:l.recordingAnnouncement})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Consent required"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Pauses recording if customer declines consent."})]}),(0,b.jsx)(D.Switch,{checked:l.recordingConsentRequired,onCheckedChange:a=>s("recordingConsentRequired",a)})]})]})]})]}),(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsxs)(v.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.PhoneOutgoing,{className:"size-4"}),"IVR & call flows"]}),(0,b.jsx)(v.CardDescription,{children:"Menu options and directed routing"})]}),(0,b.jsxs)(v.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:(0,I.cn)("flex items-center justify-between","rounded-lg border","p-3"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Enable IVR menu"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Present callers with “Press 1 for Sales” style prompts."})]}),(0,b.jsx)(D.Switch,{checked:l.ivrEnabled,onCheckedChange:a=>s("ivrEnabled",a)})]}),l.ivrEnabled&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Separator,{}),(0,b.jsxs)(C.StandardFormField,{label:"IVR JSON definition",htmlFor:"phone-ivr-menu",children:[(0,b.jsx)(F.Textarea,{id:"phone-ivr-menu",className:"min-h-[160px] font-mono text-sm",onChange:a=>s("ivrMenu",a.target.value),value:l.ivrMenu}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Provide call flow definition (we'll validate JSON on save)."})]})]})]})]}),(0,b.jsx)(v.Card,{className:"border-warning/40 bg-warning/5",children:(0,b.jsxs)(v.CardContent,{className:(0,I.cn)("flex items-start","gap-3","pt-6"),children:[(0,b.jsx)(c.AlertTriangle,{className:"text-warning size-5"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-warning text-sm font-semibold",children:"Regulatory reminder"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Recording and IVR features may carry legal obligations in your jurisdiction (GDPR, HIPAA, state consent laws). Confirm with legal counsel before enabling and keep callers informed via the announcement message."})]})]})})]}),(0,b.jsx)(E.TabsContent,{value:"voicemail",children:(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsx)(v.CardTitle,{children:"Company Voicemail Experience"}),(0,b.jsx)(v.CardDescription,{children:"Configure greetings, notifications, and mailbox rules for every Twilio number."})]}),(0,b.jsx)(v.CardContent,{className:"pt-0",children:(0,b.jsx)(x.VoicemailSettings,{})})]})}),(0,b.jsx)(E.TabsContent,{value:"flows",children:(0,b.jsxs)(v.Card,{children:[(0,b.jsxs)(v.CardHeader,{children:[(0,b.jsx)(v.CardTitle,{children:"Visual Call Flow Builder"}),(0,b.jsx)(v.CardDescription,{children:"Experiment with the React Flow designer that will power future VOIP automation."})]}),(0,b.jsx)(v.CardContent,{className:"pt-0",children:(0,b.jsx)(w,{})})]})})]})]})})}a.s(["default",()=>K],57394)}];

//# sourceMappingURL=e978b_dashboard_settings_communications_phone_phone-settings-client_tsx_68051121._.js.map