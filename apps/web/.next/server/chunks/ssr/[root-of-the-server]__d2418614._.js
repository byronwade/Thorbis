module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},712363,a=>{a.n(a.i(279732))},208120,a=>{a.n(a.i(52860))},863056,a=>{a.n(a.i(77721))},468729,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx <module evaluation>","WorkDataView");a.s(["WorkDataView",0,b])},750692,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call WorkDataView() from the server but WorkDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/work-data-view.tsx","WorkDataView");a.s(["WorkDataView",0,b])},310669,a=>{"use strict";a.i(468729);var b=a.i(750692);a.n(b)},69560,a=>{a.n(a.i(875617))},117992,a=>{a.n(a.i(683588))},537445,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call PurchaseOrdersKanban() from the server but PurchaseOrdersKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/purchase-orders-kanban.tsx <module evaluation>","PurchaseOrdersKanban");a.s(["PurchaseOrdersKanban",0,b])},870181,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call PurchaseOrdersKanban() from the server but PurchaseOrdersKanban is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/purchase-orders-kanban.tsx","PurchaseOrdersKanban");a.s(["PurchaseOrdersKanban",0,b])},279618,a=>{"use strict";a.i(537445);var b=a.i(870181);a.n(b)},378697,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call PurchaseOrdersTable() from the server but PurchaseOrdersTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/purchase-orders-table.tsx <module evaluation>","PurchaseOrdersTable");a.s(["PurchaseOrdersTable",0,b])},919172,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call PurchaseOrdersTable() from the server but PurchaseOrdersTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/work/purchase-orders-table.tsx","PurchaseOrdersTable");a.s(["PurchaseOrdersTable",0,b])},190351,a=>{"use strict";a.i(378697);var b=a.i(919172);a.n(b)},213912,a=>{"use strict";var b=a.i(504348),c=a.i(429969);a.i(692167);var d=a.i(852596),e=a.i(279618),f=a.i(190351),g=a.i(310669);a.i(467361);var h=a.i(445074),i=a.i(933427);let j=`
  id,
  company_id,
  po_number,
  vendor,
  title,
  status,
  priority,
  total_amount,
  created_at,
  expected_delivery,
  auto_generated,
  archived_at,
  job_id
`;async function k(a,b=50,c){let d=c??await (0,h.getActiveCompanyId)();if(!d)return{purchaseOrders:[],totalCount:0};let e=await (0,i.createServiceSupabaseClient)();if(!e)throw Error("Supabase client not configured");let f=(Math.max(a,1)-1)*b,{data:g,error:l,count:m}=await e.from("purchase_orders").select(j,{count:"exact"}).eq("company_id",d).order("created_at",{ascending:!1}).range(f,f+b-1);if(l)throw Error(`Failed to fetch purchase orders: ${l.message}`);return{purchaseOrders:g??[],totalCount:m??0}}async function l({searchParams:a}){let c=await (0,h.getActiveCompanyId)();if(!c)return(0,d.notFound)();let i=Number(a?.page)||1,{purchaseOrders:j,totalCount:l}=await k(i,50,c),m=(j||[]).map(a=>({id:a.id,poNumber:a.po_number,vendor:a.vendor||"Unknown Vendor",title:a.title,status:a.status,priority:a.priority,totalAmount:a.total_amount||0,jobNumber:void 0,requestedBy:"",createdAt:a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",expectedDelivery:a.expected_delivery?new Date(a.expected_delivery).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):void 0,autoGenerated:a.auto_generated,archived_at:a.archived_at,deleted_at:null}));return(0,b.jsx)(g.WorkDataView,{kanban:(0,b.jsx)(e.PurchaseOrdersKanban,{orders:m}),section:"purchaseOrders",table:(0,b.jsx)(f.PurchaseOrdersTable,{currentPage:i,itemsPerPage:50,orders:m,totalCount:l})})}(0,c.cache)(async(a,b)=>{let c=await (0,i.createServiceSupabaseClient)();if(!c)throw Error("Supabase client not configured");let{data:d,error:e}=await c.rpc("get_purchase_order_complete",{p_purchase_order_id:a,p_company_id:b});return e?(console.error("Error fetching purchase order:",e),null):d?.[0]?.purchase_order_data||null}),a.i(250202);var m=a.i(709027);function n(){return(0,b.jsx)(m.DataTableListSkeleton,{showSearchBar:!0})}async function o({searchParams:a}){let d=await a;return(0,b.jsx)("div",{className:"flex h-full flex-col",children:(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(n,{}),children:(0,b.jsx)(l,{searchParams:d})})})})}a.s(["default",()=>o],213912)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d2418614._.js.map