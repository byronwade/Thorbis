module.exports=[781272,a=>{"use strict";var b=a.i(861467),c=a.i(60222),d=a.i(96250),e=a.i(274956),f=a.i(430243),g=a.i(824124),h=a.i(949747),i=a.i(757844),j=a.i(246840),k=a.i(966183),l=a.i(320091),m=a.i(362841),n=a.i(145679),o=a.i(783281),p=a.i(836994);a.i(288007);var q=a.i(986990);a.i(445255);var r=a.i(18170);a.i(476036);var s=a.i(930514),t=a.i(792268),u=a.i(700760);function v({label:a,value:c,helper:d}){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:a}),(0,b.jsx)("div",{className:"text-foreground text-sm font-medium",children:c}),d?(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:d}):null]})}function w(a){return a.slice(0,8)}function x(a){return a.replaceAll("_"," ")}function y({entityData:a}){let{agreement:y,customer:z,property:A,generatedInvoices:B=[],generatedJobs:C=[],equipment:D=[],notes:E=[],activities:F=[],attachments:G=[]}=a,H=y.plan_number||y.agreement_number||y.agreementNumber||("string"==typeof y.id?`AG-${w(y.id).toUpperCase()}`:"Service Agreement"),I=(0,o.useMemo)(()=>{var a;let c,d=[(0,b.jsx)(q.Badge,{variant:"outline",children:H},"number"),(a=y.status||"draft",c=({draft:{className:"bg-muted text-foreground dark:bg-foreground/20 dark:text-muted-foreground",label:"Draft"},active:{className:"bg-success text-white",label:"Active"},expired:{className:"bg-warning text-white",label:"Expired"},cancelled:{className:"bg-destructive text-white",label:"Cancelled"}})[a]||{className:"bg-muted text-foreground",label:a},(0,b.jsx)(q.Badge,{className:c.className,variant:"outline",children:c.label},"status"))];return y.billing_frequency&&d.push((0,b.jsx)(q.Badge,{className:"capitalize",variant:"outline",children:x(String(y.billing_frequency))},"billing")),y.auto_renew&&d.push((0,b.jsx)(q.Badge,{className:"border-success/40 bg-success/10 text-success",variant:"outline",children:"Auto-Renew"},"auto-renew")),d},[H,y.status,y.billing_frequency,y.auto_renew]),J=(0,o.useMemo)(()=>{let a;return[!y.start_date?null:{key:"start",icon:c.CalendarDays,label:"Starts",value:(0,t.formatDate)(y.start_date,{preset:"medium"})},function(a){let b=a.renewal_date||a.end_date;if(!b)return null;let c=new Date(b);if(Number.isNaN(c.getTime()))return null;let d=Math.ceil((c.getTime()-Date.now())/864e5),e="",f="default";return d<0?(e=`${Math.abs(d)} days overdue`,f="destructive"):0===d?(e="Renews today",f="warning"):(e=`${d} days remaining`,d<=30&&(f="warning")),{key:"renewal",icon:j.RefreshCw,label:"Renews",value:(0,t.formatDate)(c,{preset:"medium"}),helper:e,tone:f}}(y),(a=y.contract_value??y.price??y.value??0)<=0?null:{key:"contract-value",icon:e.DollarSign,label:"Contract Value",value:(0,t.formatCurrency)(a)},!y.billing_frequency?null:{key:"billing-frequency",icon:k.ShieldCheck,label:"Billing",value:x(String(y.billing_frequency))},function(a){if(0===a.length)return null;let b=a.reduce((a,b)=>a+(b.total_amount??0),0),c=a.reduce((a,b)=>a+(b.balance_amount??0),0);return{key:"invoices",icon:i.Receipt,label:1===a.length?"Invoice Generated":"Invoices Generated",value:`${a.length}`,helper:c>0?`${(0,t.formatCurrency)(b)} • ${(0,t.formatCurrency)(c)} due`:(0,t.formatCurrency)(b),tone:c>0?"warning":"success"}}(B),function(a){if(0===a.length)return null;let b=a.filter(a=>"completed"===a.status).length;return{key:"jobs",icon:m.Wrench,label:1===a.length?"Linked Job":"Linked Jobs",value:`${a.length}`,helper:b>0?`${b} completed`:"In progress"}}(C),0===D.length?null:{key:"equipment",icon:h.Package,label:1===D.length?"Covered Asset":"Covered Assets",value:`${D.length}`}].filter(Boolean)},[y,D,B,C]),K="border border-border/60 bg-background font-medium inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm transition-colors hover:border-primary/50 hover:bg-primary/5",L=(0,b.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,b.jsx)("div",{className:"bg-muted/40 mx-auto max-w-7xl rounded-xl shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:p-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:I}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold sm:text-3xl",children:y.name||y.title||`Agreement ${H}`}),y.description?(0,b.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:y.description}):null]})]})}),(z||A)&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[z?(0,b.jsxs)(n.default,{className:K,href:`/dashboard/customers/${z.id}`,children:[(0,b.jsx)(l.User,{className:"size-4"}),z.display_name||`${z.first_name||""} ${z.last_name||""}`.trim()||"Unknown Customer"]}):null,A?(0,b.jsxs)(n.default,{className:K,href:`/dashboard/work/properties/${A.id}`,children:[(0,b.jsx)(g.MapPin,{className:"size-4"}),A.address||A.name||[A.city,A.state].filter(Boolean).join(", ")||"Property"]}):null]}),J.length>0?(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:J.map(({key:a,icon:c,label:d,value:e,helper:f,tone:g})=>(0,b.jsxs)("div",{className:function(a="default"){return(0,u.cn)("inline-flex min-h-[3.25rem] items-center gap-3 rounded-full border border-border/60 bg-background px-4 py-2 transition-colors hover:border-primary/50 hover:bg-primary/5 dark:border-border/40","warning"===a&&"border-amber-200 bg-amber-50 text-amber-700 hover:border-amber-300 hover:bg-amber-100 dark:border-amber-900/30 dark:bg-amber-900/20 dark:text-amber-300","destructive"===a&&"border-destructive/40 bg-destructive/10 text-destructive hover:border-destructive/60 hover:bg-destructive/15 dark:text-destructive","success"===a&&"border-emerald-200 bg-emerald-50 text-emerald-700 hover:border-emerald-300 hover:bg-emerald-100 dark:border-emerald-900/30 dark:bg-emerald-900/20 dark:text-emerald-300")}(g),children:[(0,b.jsx)(c,{className:"text-muted-foreground size-4"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:d}),(0,b.jsx)("span",{className:"text-foreground text-sm font-medium",children:e}),f?(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:f}):null]})]},a))}):null]})})}),M=(0,o.useMemo)(()=>{var a;let b;return Array.isArray(b="string"==typeof(a=y.service_levels)?function(a){try{return JSON.parse(a)}catch{return null}}(a):a)?b.reduce((a,b,c)=>{if("string"==typeof b){let d=b.trim();return d&&a.push({id:`${d}-${c}`,label:d}),a}if(b&&"object"==typeof b){let d=b.name?.toString()??b.description?.toString()??`Service Level ${c+1}`;a.push({id:b.id?.toString()??`${d}-${c}`,label:d,responseTime:b.response_time?.toString()})}return a},[]):[]},[y.service_levels]),N=(0,o.useMemo)(()=>{let a,c;return[(c=(a=y.contract_value??0)>0,{id:"contract-terms",title:"Contract Terms",icon:(0,b.jsx)(f.FileSignature,{className:"size-4"}),defaultOpen:!0,content:(0,b.jsxs)(s.UnifiedAccordionContent,{children:[(0,b.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[(0,b.jsx)(v,{label:"Start Date",value:y.start_date?(0,t.formatDate)(y.start_date,{preset:"medium"}):"Not set"}),y.end_date?(0,b.jsx)(v,{label:"End Date",value:(0,t.formatDate)(y.end_date,{preset:"medium"})}):null,c?(0,b.jsx)(v,{label:"Contract Value",value:(0,t.formatCurrency)(a)}):null,y.payment_terms?(0,b.jsx)(v,{label:"Payment Terms",value:y.payment_terms}):null]}),y.terms?(0,b.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:"Terms & Conditions"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm whitespace-pre-wrap",children:y.terms})]}):null]})}),0===M.length?null:{id:"service-levels",title:"Service Levels",icon:(0,b.jsx)(k.ShieldCheck,{className:"size-4"}),count:M.length,content:(0,b.jsx)(s.UnifiedAccordionContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:M.map(a=>(0,b.jsxs)("div",{className:"border-border/60 bg-background flex items-center gap-3 rounded-lg border px-4 py-3",children:[(0,b.jsx)(d.CheckCircle2,{className:"text-success size-4"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-foreground text-sm font-medium",children:a.label}),a.responseTime?(0,b.jsxs)("span",{className:"text-muted-foreground text-xs",children:["Response: ",a.responseTime]}):null]})]},a.id))})})},!(y.renewal_type||y.renewal_date||y.renewal_notice_days)?null:{id:"renewal",title:"Renewal",icon:(0,b.jsx)(j.RefreshCw,{className:"size-4"}),content:(0,b.jsx)(s.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[y.renewal_type?(0,b.jsx)(v,{label:"Renewal Type",value:String(y.renewal_type).replaceAll("_"," ")}):null,y.renewal_date?(0,b.jsx)(v,{label:"Renewal Date",value:(0,t.formatDate)(y.renewal_date,{preset:"medium"})}):null,y.renewal_notice_days?(0,b.jsx)(v,{label:"Notice Window",value:`${y.renewal_notice_days} days`}):null]})})},!z?null:{id:"customer-details",title:"Customer Details",icon:(0,b.jsx)(l.User,{className:"size-4"}),content:(0,b.jsx)(s.UnifiedAccordionContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"grid flex-1 gap-6 sm:grid-cols-2",children:[(0,b.jsx)(v,{label:"Name",value:z.display_name||`${z.first_name||""} ${z.last_name||""}`.trim()||"Unknown"}),(0,b.jsx)(v,{label:"Email",value:z.email||"N/A"})]}),(0,b.jsx)(r.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,b.jsx)(n.default,{href:`/dashboard/customers/${z.id}`,children:"View Full Profile"})})]})})},0===B.length?null:{id:"generated-invoices",title:"Generated Invoices",icon:(0,b.jsx)(i.Receipt,{className:"size-4"}),count:B.length,content:(0,b.jsxs)(s.UnifiedAccordionContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Invoices created from this service agreement."}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Invoice #"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Title"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Balance"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:B.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,b.jsxs)("td",{className:"px-6 py-4 text-sm",children:["#",a.invoice_number||w(a.id)]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.title||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.formatDate)(a.created_at,{preset:"medium"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:(0,t.formatCurrency)(a.total_amount)}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:(0,t.formatCurrency)(a.balance_amount)}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)(q.Badge,{variant:"paid"===a.status?"default":"outline",children:a.status||"pending"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)(n.default,{className:"text-primary hover:underline",href:`/dashboard/work/invoices/${a.id}`,children:"View"})})]},a.id))})]})})]})},0===C.length?null:{id:"generated-jobs",title:"Generated Jobs",icon:(0,b.jsx)(m.Wrench,{className:"size-4"}),count:C.length,content:(0,b.jsxs)(s.UnifiedAccordionContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Jobs created from this service agreement."}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Job #"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Title"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Completed"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:C.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,b.jsxs)("td",{className:"px-6 py-4 text-sm",children:["#",a.job_number||w(a.id)]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:a.title||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.formatDate)(a.created_at,{preset:"medium"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)(q.Badge,{variant:"outline",children:a.status||"scheduled"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.completed_at?(0,t.formatDate)(a.completed_at,{preset:"medium"}):"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)(n.default,{className:"text-primary hover:underline",href:`/dashboard/work/${a.id}`,children:"View"})})]},a.id))})]})})]})},0===D.length?null:{id:"equipment-covered",title:"Equipment Covered",icon:(0,b.jsx)(h.Package,{className:"size-4"}),count:D.length,content:(0,b.jsxs)(s.UnifiedAccordionContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Equipment included in this service agreement."}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Equipment #"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Manufacturer"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:D.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,b.jsxs)("td",{className:"px-6 py-4 text-sm",children:["#",a.equipment_number||w(a.id)]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:a.name||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.type||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.manufacturer||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)(n.default,{className:"text-primary hover:underline",href:`/dashboard/work/equipment/${a.id}`,children:"View"})})]},a.id))})]})})]})}].filter(Boolean)},[y,z,D,B,C,M]),O=(0,o.useMemo)(()=>{let a=[];return z&&a.push({id:`customer-${z.id}`,type:"customer",title:z.display_name||`${z.first_name||""} ${z.last_name||""}`.trim()||"Unknown Customer",subtitle:z.email||z.phone||void 0,href:`/dashboard/customers/${z.id}`}),A&&a.push({id:`property-${A.id}`,type:"property",title:A.address||A.name||"Property",subtitle:`${A.city||""}, ${A.state||""}`.trim()||void 0,href:`/dashboard/work/properties/${A.id}`}),a},[z,A]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.DetailPageContentLayout,{activities:F,attachments:G,customHeader:L,customSections:N,defaultOpenSection:"contract-terms",notes:E,relatedItems:O,showStandardSections:{activities:!0,notes:!0,attachments:!0,relatedItems:!0}})})}a.s(["ServiceAgreementPageContent",()=>y])}];

//# sourceMappingURL=82e4e_components_work_service-agreements_service-agreement-page-content_tsx_279cacb4._.js.map