module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},997868,a=>{a.n(a.i(884849))},592581,a=>{a.n(a.i(596565))},134005,a=>{a.n(a.i(977930))},565165,a=>{a.n(a.i(728209))},147941,a=>{a.n(a.i(484103))},304434,a=>{a.n(a.i(632684))},407521,a=>{a.n(a.i(693094))},797797,a=>{a.n(a.i(977207))},290022,a=>{a.n(a.i(362735))},729157,a=>{a.n(a.i(470009))},543474,a=>{"use strict";var b=a.i(429969);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],543474)},142969,a=>{"use strict";let b=(0,a.i(543474).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],142969)},836040,a=>{"use strict";let b=(0,a.i(543474).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],836040)},174010,a=>{"use strict";a.i(730154),a.s([])},150644,a=>{"use strict";a.i(730154),a.s([])},481136,a=>{"use strict";let b=(0,a.i(543474).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],481136)},549121,a=>{"use strict";a.i(730154);var b=a.i(563914),c=a.i(369637),d=a.i(861107),e=a.i(726954),f=a.i(236028),g=a.i(376977),h=a.i(868553),i=a.i(36705),j=a.i(396149),k=a.i(705991),l=a.i(102193),m=a.i(293107),n=a.i(525708),o=a.i(27632),p=a.i(523762),q=a.i(777394),r=a.i(30104),s=a.i(851374),t=a.i(968073),u=a.i(925834),v=a.i(946108),w=a.i(561203),x=a.i(758289),y=a.i(919187),z=a.i(463683),A=a.i(420235),B=a.i(468335),C=a.i(571631),D=a.i(439724),E=a.i(109483),F=a.i(709027),G=a.i(643953),H=a.i(776419),I=a.i(920334),J=a.i(490199),K=a.i(38825),L=a.i(465296),M=a.i(409604),N=a.i(852495),O=a.i(475976),P=a.i(836326),Q=a.i(280558),R=a.i(533742),S=a.i(588159),T=a.i(591888),U=a.i(228811),V=a.i(950872),W=a.i(297053),X=a.i(274749),Y=a.i(90965),Z=a.i(920224),$=a.i(838239),_=a.i(892054),aa=a.i(233387),ab=a.i(438468),ac=a.i(299049),ad=a.i(359004),ae=a.i(171288);a.i(422792);var af=a.i(474235);a.s(["Alert",()=>c.Alert,"AlertDescription",()=>c.AlertDescription,"AlertTitle",()=>c.AlertTitle,"Badge",()=>f.Badge,"Breadcrumb",()=>g.Breadcrumb,"BreadcrumbItem",()=>g.BreadcrumbItem,"BreadcrumbLink",()=>g.BreadcrumbLink,"BreadcrumbList",()=>g.BreadcrumbList,"BreadcrumbPage",()=>g.BreadcrumbPage,"BreadcrumbSeparator",()=>g.BreadcrumbSeparator,"Button",()=>h.Button,"ButtonGroup",()=>i.ButtonGroup,"ButtonGroupText",()=>i.ButtonGroupText,"Card",()=>k.Card,"CardContent",()=>k.CardContent,"CardDescription",()=>k.CardDescription,"CardFooter",()=>k.CardFooter,"CardHeader",()=>k.CardHeader,"CardListSkeleton",()=>F.CardListSkeleton,"CardTitle",()=>k.CardTitle,"ChartSkeleton",()=>F.ChartSkeleton,"ComingSoonShell",()=>Q.ComingSoonShell,"DashboardSkeleton",()=>F.DashboardSkeleton,"DataTableListSkeleton",()=>F.DataTableListSkeleton,"FormSkeleton",()=>F.FormSkeleton,"GenericStatusBadge",()=>T.GenericStatusBadge,"Input",()=>u.Input,"KPICardSkeleton",()=>F.KPICardSkeleton,"PageHeaderSkeleton",()=>F.PageHeaderSkeleton,"RowActionsDropdown",()=>X.RowActionsDropdown,"Skeleton",()=>E.Skeleton,"StatsCardsSkeleton",()=>Z.StatsCardsSkeleton,"TableSkeleton",()=>F.TableSkeleton,"Textarea",()=>K.Textarea,"WorkDetailSkeleton",()=>F.WorkDetailSkeleton,"WorkflowTimeline",()=>ae.WorkflowTimeline,"buttonVariants",()=>h.buttonVariants,"cn",()=>af.cn]),a.j(b),a.j(d),a.j(e),a.j(j),a.j(l),a.j(m),a.j(n),a.j(o),a.j(p),a.j(q),a.j(r),a.j(s),a.j(t),a.j(v),a.j(w),a.j(x),a.j(y),a.j(z),a.j(A),a.j(B),a.j(C),a.j(D),a.j(G),a.j(H),a.j(I),a.j(J),a.j(L),a.j(M),a.j(N),a.j(O),a.j(P),a.j(R),a.j(S),a.j(U),a.j(V),a.j(W),a.j(Y),a.j($),a.j(_),a.j(aa),a.j(ab),a.j(ac),a.j(ad)},123523,a=>{"use strict";let b=(0,a.i(543474).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],123523)},856222,a=>{a.n(a.i(371029))},842417,a=>{a.n(a.i(213663))},502549,236433,a=>{"use strict";a.i(730154),a.s([],502549),a.i(502549);var b=a.i(549121);a.s([],236433),a.j(b,236433)},196971,a=>{"use strict";let b=(0,a.i(543474).default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);a.s(["Briefcase",()=>b],196971)},584220,429007,a=>{"use strict";a.i(730154),a.s([],584220),a.i(584220);var b=a.i(549121);a.s([],429007),a.j(b,429007)},752695,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ExportButton() from the server but ExportButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/reports/export-button.tsx <module evaluation>","ExportButton");a.s(["ExportButton",0,b])},689828,a=>{"use strict";let b=(0,a.i(742210).registerClientReference)(function(){throw Error("Attempted to call ExportButton() from the server but ExportButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/src/components/reports/export-button.tsx","ExportButton");a.s(["ExportButton",0,b])},519741,a=>{"use strict";a.i(752695);var b=a.i(689828);a.n(b)},841298,a=>{"use strict";var b=a.i(504348),c=a.i(429969),d=a.i(54214);a.i(467361);var e=a.i(445074);a.i(174010);var f=a.i(705991);a.i(150644);var g=a.i(236028);a.i(584220);var h=a.i(429007);a.i(502549);var i=a.i(236433),j=a.i(196971),k=a.i(123523),l=a.i(836040),m=a.i(142969),n=a.i(481136),o=a.i(519741);function p(a){return`${a.toFixed(1)}%`}function q(a){if(a<60)return`${Math.round(a)}m`;let b=Math.floor(a/60),c=Math.round(a%60);return c>0?`${b}h ${c}m`:`${b}h`}async function r(){let a=await (0,e.getActiveCompanyId)();if(!a)return(0,b.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Please select a company to view reports"})});let c=await (0,d.getJobPerformanceReport)(a,90);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Jobs Performance"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Completion rates, technician performance, and job analysis"})]}),(0,b.jsx)(o.ExportButton,{reportType:"jobs",days:90})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(s,{title:"Total Jobs",value:c.summary.totalJobs.toString(),subtitle:`${c.summary.completedJobs} completed`,icon:(0,b.jsx)(j.Briefcase,{className:"size-4 text-blue-500"})}),(0,b.jsx)(s,{title:"Completion Rate",value:p(c.summary.completionRate),icon:(0,b.jsx)(k.CheckCircle,{className:"size-4 text-green-500"}),trend:c.summary.completionRate>=90?"positive":c.summary.completionRate>=75?"neutral":"negative"}),(0,b.jsx)(s,{title:"First-Time Fix Rate",value:p(c.summary.firstTimeFixRate),subtitle:`${p(c.summary.callbackRate)} callback rate`,icon:(0,b.jsx)(m.TrendingUp,{className:"size-4 text-emerald-500"}),trend:c.summary.firstTimeFixRate>=85?"positive":"neutral"}),(0,b.jsx)(s,{title:"Avg Duration",value:q(c.summary.averageDuration),icon:(0,b.jsx)(l.Clock,{className:"size-4 text-orange-500"})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Jobs by Status"}),(0,b.jsx)(f.CardDescription,{children:"Distribution of jobs across different statuses"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:c.byStatus.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t,{status:a.status}),(0,b.jsx)("span",{className:"text-sm font-medium capitalize",children:a.status.replace(/_/g," ")})]}),(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:[a.count," (",p(a.percentage),")"]})]}),(0,b.jsx)(i.Progress,{value:a.percentage,className:"h-2"})]},a.status))})})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Users,{className:"size-5"}),"Performance by Technician"]}),(0,b.jsx)(f.CardDescription,{children:"Job metrics by team member"})]}),(0,b.jsx)(f.CardContent,{children:0===c.byTechnician.length?(0,b.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"No technician data available"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Technician"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Jobs"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Avg Time"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"FTF Rate"})]})}),(0,b.jsx)(h.TableBody,{children:c.byTechnician.slice(0,10).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.jobsCompleted}),(0,b.jsx)(h.TableCell,{className:"text-right",children:q(a.avgDuration)}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsx)(g.Badge,{variant:a.firstTimeFixRate>=90?"default":a.firstTimeFixRate>=75?"secondary":"destructive",children:p(a.firstTimeFixRate)})})]},a.id))})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Briefcase,{className:"size-5"}),"Performance by Job Type"]}),(0,b.jsx)(f.CardDescription,{children:"Metrics by service category"})]}),(0,b.jsx)(f.CardContent,{children:0===c.byJobType.length?(0,b.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"No job type data available"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Job Type"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Count"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Avg Revenue"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Completion"})]})}),(0,b.jsx)(h.TableBody,{children:c.byJobType.slice(0,10).map(a=>{var c;return(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium capitalize",children:a.jobType}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.count}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(c=a.avgRevenue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c))}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsx)(g.Badge,{variant:a.completionRate>=90?"default":"secondary",children:p(a.completionRate)})})]},a.jobType)})})]})})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Weekly Trends"}),(0,b.jsx)(f.CardDescription,{children:"Job volume by week"})]}),(0,b.jsx)(f.CardContent,{children:0===c.trendsWeekly.length?(0,b.jsx)("p",{className:"text-muted-foreground py-8 text-center",children:"No trend data available"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Week Starting"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Completed"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Scheduled"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Cancelled"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Total"})]})}),(0,b.jsx)(h.TableBody,{children:c.trendsWeekly.slice(-12).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:new Date(a.week).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,b.jsx)(h.TableCell,{className:"text-right text-green-600",children:a.completed}),(0,b.jsx)(h.TableCell,{className:"text-right text-blue-600",children:a.scheduled}),(0,b.jsx)(h.TableCell,{className:"text-right text-red-600",children:a.cancelled}),(0,b.jsx)(h.TableCell,{className:"text-right font-medium",children:a.completed+a.scheduled+a.cancelled})]},a.week))})]})})]})]})}function s({title:a,value:c,subtitle:d,icon:e,trend:g}){return(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium",children:a}),e]}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:c}),d&&(0,b.jsx)("p",{className:`text-xs ${"positive"===g?"text-green-600":"negative"===g?"text-red-600":"text-muted-foreground"}`,children:d})]})]})}function t({status:a}){return(0,b.jsx)("div",{className:`size-3 rounded-full ${{completed:"bg-green-500",scheduled:"bg-blue-500",in_progress:"bg-yellow-500",cancelled:"bg-red-500",pending:"bg-gray-500"}[a]||"bg-gray-400"}`})}function u(){return(0,b.jsxs)("div",{className:"relative space-y-10 py-8 md:py-12",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"bg-muted h-9 w-32 animate-pulse rounded-full"})}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"bg-muted size-24 animate-pulse rounded-full"})}),(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-3 text-center",children:[(0,b.jsx)("div",{className:"bg-muted mx-auto h-12 w-96 animate-pulse rounded"}),(0,b.jsx)("div",{className:"bg-muted mx-auto h-6 w-full max-w-2xl animate-pulse rounded"})]})]})}function v(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(u,{}),children:(0,b.jsx)(r,{})})}a.s(["default",()=>v],841298)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f15e2d93._.js.map