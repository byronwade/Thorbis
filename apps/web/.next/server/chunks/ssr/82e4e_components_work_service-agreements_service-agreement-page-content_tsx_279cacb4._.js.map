{"version":3,"sources":["../../../../../../apps/web/src/components/work/service-agreements/service-agreement-page-content.tsx"],"sourcesContent":["/**\n * Service Agreement Page Content\n *\n * Comprehensive service agreement details with collapsible sections\n * Matches job and customer detail page patterns\n */\n\n\"use client\";\n\nimport {\n\tCalendarDays,\n\tCheckCircle2,\n\tDollarSign,\n\tFileSignature,\n\tMapPin,\n\tPackage,\n\tReceipt,\n\tRefreshCw,\n\tShieldCheck,\n\tUser,\n\tWrench,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { type ElementType, type ReactNode, useMemo } from \"react\";\nimport { DetailPageContentLayout } from \"@/components/layout/detail-page-content-layout\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tUnifiedAccordionContent,\n\ttype UnifiedAccordionSection,\n} from \"@/components/ui/unified-accordion\";\nimport { formatCurrency, formatDate } from \"@/lib/formatters\";\nimport { cn } from \"@/lib/utils\";\n\nconst MS_PER_SECOND = 1000;\nconst SECONDS_PER_MINUTE = 60;\nconst MINUTES_PER_HOUR = 60;\nconst HOURS_PER_DAY = 24;\nconst MS_PER_DAY =\n\tMS_PER_SECOND * SECONDS_PER_MINUTE * MINUTES_PER_HOUR * HOURS_PER_DAY;\nconst RENEWAL_SOON_THRESHOLD_DAYS = 30;\nconst SHORT_ID_LENGTH = 8;\n\ntype ServiceAgreementRecord = {\n\tid: string;\n\tplan_number?: string | null;\n\tagreement_number?: string | null;\n\tagreementNumber?: string | null;\n\tname?: string | null;\n\ttitle?: string | null;\n\tdescription?: string | null;\n\tstatus?: string | null;\n\tbilling_frequency?: string | null;\n\tauto_renew?: boolean | null;\n\tcontract_value?: number | null;\n\tprice?: number | null;\n\tvalue?: number | null;\n\tstart_date?: string | null;\n\tend_date?: string | null;\n\trenewal_date?: string | null;\n\trenewal_type?: string | null;\n\trenewal_notice_days?: number | null;\n\tservice_levels?: unknown;\n\tterms?: string | null;\n\tpayment_terms?: string | null;\n};\n\ntype CustomerRecord = {\n\tid: string;\n\tdisplay_name?: string | null;\n\tfirst_name?: string | null;\n\tlast_name?: string | null;\n\temail?: string | null;\n\tphone?: string | null;\n};\n\ntype PropertyRecord = {\n\tid: string;\n\taddress?: string | null;\n\tname?: string | null;\n\tcity?: string | null;\n\tstate?: string | null;\n};\n\ntype InvoiceRecord = {\n\tid: string;\n\tinvoice_number?: string | null;\n\ttitle?: string | null;\n\ttotal_amount?: number | null;\n\tbalance_amount?: number | null;\n\tstatus?: string | null;\n\tcreated_at?: string | null;\n};\n\ntype JobRecord = {\n\tid: string;\n\tjob_number?: string | null;\n\ttitle?: string | null;\n\tstatus?: string | null;\n\tcreated_at?: string | null;\n\tcompleted_at?: string | null;\n};\n\ntype EquipmentRecord = {\n\tid: string;\n\tequipment_number?: string | null;\n\tname?: string | null;\n\ttype?: string | null;\n\tmanufacturer?: string | null;\n};\n\ntype RelatedItem = {\n\tid: string;\n\ttype: \"customer\" | \"property\";\n\ttitle: string;\n\tsubtitle?: string;\n\thref: string;\n};\n\ntype ServiceLevelDisplay = {\n\tid: string;\n\tlabel: string;\n\tresponseTime?: string;\n};\n\nexport type ServiceAgreementData = {\n\tagreement: ServiceAgreementRecord;\n\tcustomer?: CustomerRecord | null;\n\tproperty?: PropertyRecord | null;\n\tgeneratedInvoices?: InvoiceRecord[];\n\tgeneratedJobs?: JobRecord[];\n\tequipment?: EquipmentRecord[];\n\tnotes?: unknown[];\n\tactivities?: unknown[];\n\tattachments?: unknown[];\n};\n\nexport type ServiceAgreementPageContentProps = {\n\tentityData: ServiceAgreementData;\n};\n\ntype QuickInfoTone = \"default\" | \"warning\" | \"destructive\" | \"success\";\n\ntype QuickInfoBadge = {\n\tkey: string;\n\ticon: ElementType;\n\tlabel: string;\n\tvalue: string;\n\thelper?: string;\n\ttone?: QuickInfoTone;\n};\n\ntype InfoBlockProps = {\n\tlabel: string;\n\tvalue: ReactNode;\n\thelper?: ReactNode;\n};\n\nfunction InfoBlock({ label, value, helper }: InfoBlockProps) {\n\treturn (\n\t\t<div className=\"space-y-1\">\n\t\t\t<span className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t{label}\n\t\t\t</span>\n\t\t\t<div className=\"text-foreground text-sm font-medium\">{value}</div>\n\t\t\t{helper ? (\n\t\t\t\t<div className=\"text-muted-foreground text-xs\">{helper}</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nfunction quickInfoBadgeClass(tone: QuickInfoTone = \"default\") {\n\treturn cn(\n\t\t\"inline-flex min-h-[3.25rem] items-center gap-3 rounded-full border border-border/60 bg-background px-4 py-2 transition-colors hover:border-primary/50 hover:bg-primary/5 dark:border-border/40\",\n\t\ttone === \"warning\" &&\n\t\t\t\"border-amber-200 bg-amber-50 text-amber-700 hover:border-amber-300 hover:bg-amber-100 dark:border-amber-900/30 dark:bg-amber-900/20 dark:text-amber-300\",\n\t\ttone === \"destructive\" &&\n\t\t\t\"border-destructive/40 bg-destructive/10 text-destructive hover:border-destructive/60 hover:bg-destructive/15 dark:text-destructive\",\n\t\ttone === \"success\" &&\n\t\t\t\"border-emerald-200 bg-emerald-50 text-emerald-700 hover:border-emerald-300 hover:bg-emerald-100 dark:border-emerald-900/30 dark:bg-emerald-900/20 dark:text-emerald-300\",\n\t);\n}\n\nfunction safeParseJson(value: string): unknown {\n\ttry {\n\t\treturn JSON.parse(value);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nfunction normalizeServiceLevels(input: unknown): ServiceLevelDisplay[] {\n\tconst raw = typeof input === \"string\" ? safeParseJson(input) : input;\n\n\tif (!Array.isArray(raw)) {\n\t\treturn [];\n\t}\n\n\treturn raw.reduce<ServiceLevelDisplay[]>((acc, item, index) => {\n\t\tif (typeof item === \"string\") {\n\t\t\tconst label = item.trim();\n\t\t\tif (!label) {\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tacc.push({\n\t\t\t\tid: `${label}-${index}`,\n\t\t\t\tlabel,\n\t\t\t});\n\t\t\treturn acc;\n\t\t}\n\n\t\tif (item && typeof item === \"object\") {\n\t\t\tconst candidate = item as {\n\t\t\t\tid?: string | number;\n\t\t\t\tname?: string | null;\n\t\t\t\tdescription?: string | null;\n\t\t\t\tresponse_time?: string | number | null;\n\t\t\t};\n\n\t\t\tconst label =\n\t\t\t\tcandidate.name?.toString() ??\n\t\t\t\tcandidate.description?.toString() ??\n\t\t\t\t`Service Level ${index + 1}`;\n\n\t\t\tacc.push({\n\t\t\t\tid: candidate.id?.toString() ?? `${label}-${index}`,\n\t\t\t\tlabel,\n\t\t\t\tresponseTime: candidate.response_time?.toString(),\n\t\t\t});\n\t\t}\n\n\t\treturn acc;\n\t}, []);\n}\n\nfunction formatShortId(id: string): string {\n\treturn id.slice(0, SHORT_ID_LENGTH);\n}\n\nfunction formatBillingFrequency(value: string): string {\n\treturn value.replaceAll(\"_\", \" \");\n}\n\nfunction buildContractSection(\n\tagreement: ServiceAgreementRecord,\n): UnifiedAccordionSection {\n\tconst contractValue = agreement.contract_value ?? 0;\n\tconst hasContractValue = contractValue > 0;\n\n\treturn {\n\t\tid: \"contract-terms\",\n\t\ttitle: \"Contract Terms\",\n\t\ticon: <FileSignature className=\"size-4\" />,\n\t\tdefaultOpen: true,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent>\n\t\t\t\t<div className=\"grid gap-6 sm:grid-cols-2\">\n\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\tlabel=\"Start Date\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tagreement.start_date\n\t\t\t\t\t\t\t\t? formatDate(agreement.start_date, { preset: \"medium\" })\n\t\t\t\t\t\t\t\t: \"Not set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{agreement.end_date ? (\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"End Date\"\n\t\t\t\t\t\t\tvalue={formatDate(agreement.end_date, { preset: \"medium\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{hasContractValue ? (\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Contract Value\"\n\t\t\t\t\t\t\tvalue={formatCurrency(contractValue)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{agreement.payment_terms ? (\n\t\t\t\t\t\t<InfoBlock label=\"Payment Terms\" value={agreement.payment_terms} />\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t{agreement.terms ? (\n\t\t\t\t\t<div className=\"mt-6 space-y-2\">\n\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t\t\t\tTerms & Conditions\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm whitespace-pre-wrap\">\n\t\t\t\t\t\t\t{agreement.terms}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildServiceLevelsSection(\n\tlevels: ServiceLevelDisplay[],\n): UnifiedAccordionSection | null {\n\tif (levels.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"service-levels\",\n\t\ttitle: \"Service Levels\",\n\t\ticon: <ShieldCheck className=\"size-4\" />,\n\t\tcount: levels.length,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent>\n\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t{levels.map((level) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"border-border/60 bg-background flex items-center gap-3 rounded-lg border px-4 py-3\"\n\t\t\t\t\t\t\tkey={level.id}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CheckCircle2 className=\"text-success size-4\" />\n\t\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t\t<span className=\"text-foreground text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t{level.label}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{level.responseTime ? (\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\tResponse: {level.responseTime}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildRenewalSection(\n\tagreement: ServiceAgreementRecord,\n): UnifiedAccordionSection | null {\n\tif (\n\t\t!(\n\t\t\tagreement.renewal_type ||\n\t\t\tagreement.renewal_date ||\n\t\t\tagreement.renewal_notice_days\n\t\t)\n\t) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"renewal\",\n\t\ttitle: \"Renewal\",\n\t\ticon: <RefreshCw className=\"size-4\" />,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent>\n\t\t\t\t<div className=\"grid gap-6 sm:grid-cols-2\">\n\t\t\t\t\t{agreement.renewal_type ? (\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Renewal Type\"\n\t\t\t\t\t\t\tvalue={String(agreement.renewal_type).replaceAll(\"_\", \" \")}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{agreement.renewal_date ? (\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Renewal Date\"\n\t\t\t\t\t\t\tvalue={formatDate(agreement.renewal_date, { preset: \"medium\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{agreement.renewal_notice_days ? (\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Notice Window\"\n\t\t\t\t\t\t\tvalue={`${agreement.renewal_notice_days} days`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildCustomerSection(\n\tcustomer?: CustomerRecord | null,\n): UnifiedAccordionSection | null {\n\tif (!customer) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"customer-details\",\n\t\ttitle: \"Customer Details\",\n\t\ticon: <User className=\"size-4\" />,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent>\n\t\t\t\t<div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n\t\t\t\t\t<div className=\"grid flex-1 gap-6 sm:grid-cols-2\">\n\t\t\t\t\t\t<InfoBlock\n\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tcustomer.display_name ||\n\t\t\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\"Unknown\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InfoBlock label=\"Email\" value={customer.email || \"N/A\"} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button asChild size=\"sm\" variant=\"ghost\">\n\t\t\t\t\t\t<Link href={`/dashboard/customers/${customer.id}`}>\n\t\t\t\t\t\t\tView Full Profile\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildInvoicesSection(\n\tinvoices: InvoiceRecord[],\n): UnifiedAccordionSection | null {\n\tif (invoices.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"generated-invoices\",\n\t\ttitle: \"Generated Invoices\",\n\t\ticon: <Receipt className=\"size-4\" />,\n\t\tcount: invoices.length,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\tInvoices created from this service agreement.\n\t\t\t\t</div>\n\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tInvoice #\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tTotal\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tBalance\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{invoices.map((invoice) => (\n\t\t\t\t\t\t\t\t<tr className=\"hover:bg-muted/30 border-b\" key={invoice.id}>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{invoice.invoice_number || formatShortId(invoice.id)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">{invoice.title || \"—\"}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{formatDate(invoice.created_at, { preset: \"medium\" })}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(invoice.total_amount)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(invoice.balance_amount)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\t\t\t\tinvoice.status === \"paid\" ? \"default\" : \"outline\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{invoice.status || \"pending\"}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/invoices/${invoice.id}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildJobsSection(jobs: JobRecord[]): UnifiedAccordionSection | null {\n\tif (jobs.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"generated-jobs\",\n\t\ttitle: \"Generated Jobs\",\n\t\ticon: <Wrench className=\"size-4\" />,\n\t\tcount: jobs.length,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\tJobs created from this service agreement.\n\t\t\t\t</div>\n\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tJob #\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tCompleted\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{jobs.map((job) => (\n\t\t\t\t\t\t\t\t<tr className=\"hover:bg-muted/30 border-b\" key={job.id}>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{job.job_number || formatShortId(job.id)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{job.title || \"—\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{formatDate(job.created_at, { preset: \"medium\" })}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\">{job.status || \"scheduled\"}</Badge>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{job.completed_at\n\t\t\t\t\t\t\t\t\t\t\t? formatDate(job.completed_at, { preset: \"medium\" })\n\t\t\t\t\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/${job.id}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction buildEquipmentSection(\n\tequipment: EquipmentRecord[],\n): UnifiedAccordionSection | null {\n\tif (equipment.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tid: \"equipment-covered\",\n\t\ttitle: \"Equipment Covered\",\n\t\ticon: <Package className=\"size-4\" />,\n\t\tcount: equipment.length,\n\t\tcontent: (\n\t\t\t<UnifiedAccordionContent className=\"p-0\">\n\t\t\t\t<div className=\"text-muted-foreground border-b px-6 py-4 text-sm\">\n\t\t\t\t\tEquipment included in this service agreement.\n\t\t\t\t</div>\n\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t<table className=\"w-full\">\n\t\t\t\t\t\t<thead className=\"bg-muted/50 border-b\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tEquipment #\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tType\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tManufacturer\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th className=\"px-6 py-3 text-left text-sm font-medium\">\n\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{equipment.map((item) => (\n\t\t\t\t\t\t\t\t<tr className=\"hover:bg-muted/30 border-b\" key={item.id}>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t#{item.equipment_number || formatShortId(item.id)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t{item.name || \"—\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">{item.type || \"—\"}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t{item.manufacturer || \"—\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 text-sm\">\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary hover:underline\"\n\t\t\t\t\t\t\t\t\t\t\thref={`/dashboard/work/equipment/${item.id}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</UnifiedAccordionContent>\n\t\t),\n\t};\n}\n\nfunction createStartBadge(\n\tagreement: ServiceAgreementRecord,\n): QuickInfoBadge | null {\n\tif (!agreement.start_date) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tkey: \"start\",\n\t\ticon: CalendarDays,\n\t\tlabel: \"Starts\",\n\t\tvalue: formatDate(agreement.start_date, { preset: \"medium\" }),\n\t};\n}\n\nfunction createRenewalBadge(\n\tagreement: ServiceAgreementRecord,\n): QuickInfoBadge | null {\n\tconst renewalDate = agreement.renewal_date || agreement.end_date;\n\tif (!renewalDate) {\n\t\treturn null;\n\t}\n\n\tconst date = new Date(renewalDate);\n\tif (Number.isNaN(date.getTime())) {\n\t\treturn null;\n\t}\n\n\tconst diffDays = Math.ceil((date.getTime() - Date.now()) / MS_PER_DAY);\n\tlet helperText = \"\";\n\tlet tone: QuickInfoTone = \"default\";\n\n\tif (diffDays < 0) {\n\t\thelperText = `${Math.abs(diffDays)} days overdue`;\n\t\ttone = \"destructive\";\n\t} else if (diffDays === 0) {\n\t\thelperText = \"Renews today\";\n\t\ttone = \"warning\";\n\t} else {\n\t\thelperText = `${diffDays} days remaining`;\n\t\tif (diffDays <= RENEWAL_SOON_THRESHOLD_DAYS) {\n\t\t\ttone = \"warning\";\n\t\t}\n\t}\n\n\treturn {\n\t\tkey: \"renewal\",\n\t\ticon: RefreshCw,\n\t\tlabel: \"Renews\",\n\t\tvalue: formatDate(date, { preset: \"medium\" }),\n\t\thelper: helperText,\n\t\ttone,\n\t};\n}\n\nfunction createContractValueBadge(\n\tagreement: ServiceAgreementRecord,\n): QuickInfoBadge | null {\n\tconst contractValue =\n\t\tagreement.contract_value ?? agreement.price ?? agreement.value ?? 0;\n\tif (contractValue <= 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tkey: \"contract-value\",\n\t\ticon: DollarSign,\n\t\tlabel: \"Contract Value\",\n\t\tvalue: formatCurrency(contractValue),\n\t};\n}\n\nfunction createBillingBadge(\n\tagreement: ServiceAgreementRecord,\n): QuickInfoBadge | null {\n\tif (!agreement.billing_frequency) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tkey: \"billing-frequency\",\n\t\ticon: ShieldCheck,\n\t\tlabel: \"Billing\",\n\t\tvalue: formatBillingFrequency(String(agreement.billing_frequency)),\n\t};\n}\n\nfunction createInvoicesBadge(invoices: InvoiceRecord[]): QuickInfoBadge | null {\n\tif (invoices.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst invoiceTotal = invoices.reduce(\n\t\t(sum, invoice) => sum + (invoice.total_amount ?? 0),\n\t\t0,\n\t);\n\tconst outstanding = invoices.reduce(\n\t\t(sum, invoice) => sum + (invoice.balance_amount ?? 0),\n\t\t0,\n\t);\n\n\treturn {\n\t\tkey: \"invoices\",\n\t\ticon: Receipt,\n\t\tlabel: invoices.length === 1 ? \"Invoice Generated\" : \"Invoices Generated\",\n\t\tvalue: `${invoices.length}`,\n\t\thelper:\n\t\t\toutstanding > 0\n\t\t\t\t? `${formatCurrency(invoiceTotal)} • ${formatCurrency(outstanding)} due`\n\t\t\t\t: formatCurrency(invoiceTotal),\n\t\ttone: outstanding > 0 ? \"warning\" : \"success\",\n\t};\n}\n\nfunction createJobsBadge(jobs: JobRecord[]): QuickInfoBadge | null {\n\tif (jobs.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst completedJobs = jobs.filter((job) => job.status === \"completed\").length;\n\n\treturn {\n\t\tkey: \"jobs\",\n\t\ticon: Wrench,\n\t\tlabel: jobs.length === 1 ? \"Linked Job\" : \"Linked Jobs\",\n\t\tvalue: `${jobs.length}`,\n\t\thelper: completedJobs > 0 ? `${completedJobs} completed` : \"In progress\",\n\t};\n}\n\nfunction createEquipmentBadge(\n\tequipment: EquipmentRecord[],\n): QuickInfoBadge | null {\n\tif (equipment.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tkey: \"equipment\",\n\t\ticon: Package,\n\t\tlabel: equipment.length === 1 ? \"Covered Asset\" : \"Covered Assets\",\n\t\tvalue: `${equipment.length}`,\n\t};\n}\n\nfunction getStatusBadge(status: string, key?: string) {\n\tconst variants: Record<string, { className: string; label: string }> = {\n\t\tdraft: {\n\t\t\tclassName:\n\t\t\t\t\"bg-muted text-foreground dark:bg-foreground/20 dark:text-muted-foreground\",\n\t\t\tlabel: \"Draft\",\n\t\t},\n\t\tactive: {\n\t\t\tclassName: \"bg-success text-white\",\n\t\t\tlabel: \"Active\",\n\t\t},\n\t\texpired: {\n\t\t\tclassName: \"bg-warning text-white\",\n\t\t\tlabel: \"Expired\",\n\t\t},\n\t\tcancelled: {\n\t\t\tclassName: \"bg-destructive text-white\",\n\t\t\tlabel: \"Cancelled\",\n\t\t},\n\t};\n\n\tconst config = variants[status] || {\n\t\tclassName: \"bg-muted text-foreground\",\n\t\tlabel: status,\n\t};\n\n\treturn (\n\t\t<Badge className={config.className} key={key} variant=\"outline\">\n\t\t\t{config.label}\n\t\t</Badge>\n\t);\n}\n\nexport function ServiceAgreementPageContent({\n\tentityData,\n}: ServiceAgreementPageContentProps) {\n\tconst {\n\t\tagreement,\n\t\tcustomer,\n\t\tproperty,\n\t\tgeneratedInvoices = [], // NEW\n\t\tgeneratedJobs = [], // NEW\n\t\tequipment = [], // NEW\n\t\tnotes = [],\n\t\tactivities = [],\n\t\tattachments = [],\n\t} = entityData;\n\n\tconst agreementNumber =\n\t\tagreement.plan_number ||\n\t\tagreement.agreement_number ||\n\t\tagreement.agreementNumber ||\n\t\t(typeof agreement.id === \"string\"\n\t\t\t? `AG-${formatShortId(agreement.id).toUpperCase()}`\n\t\t\t: \"Service Agreement\");\n\n\tconst headerBadges = useMemo(() => {\n\t\tconst badges: ReactNode[] = [\n\t\t\t<Badge key=\"number\" variant=\"outline\">\n\t\t\t\t{agreementNumber}\n\t\t\t</Badge>,\n\t\t\tgetStatusBadge(agreement.status || \"draft\", \"status\"),\n\t\t];\n\n\t\tif (agreement.billing_frequency) {\n\t\t\tbadges.push(\n\t\t\t\t<Badge className=\"capitalize\" key=\"billing\" variant=\"outline\">\n\t\t\t\t\t{formatBillingFrequency(String(agreement.billing_frequency))}\n\t\t\t\t</Badge>,\n\t\t\t);\n\t\t}\n\n\t\tif (agreement.auto_renew) {\n\t\t\tbadges.push(\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"border-success/40 bg-success/10 text-success\"\n\t\t\t\t\tkey=\"auto-renew\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t>\n\t\t\t\t\tAuto-Renew\n\t\t\t\t</Badge>,\n\t\t\t);\n\t\t}\n\n\t\treturn badges;\n\t}, [\n\t\tagreementNumber,\n\t\tagreement.status,\n\t\tagreement.billing_frequency,\n\t\tagreement.auto_renew,\n\t]);\n\n\tconst quickInfoBadges = useMemo<QuickInfoBadge[]>(\n\t\t() =>\n\t\t\t[\n\t\t\t\tcreateStartBadge(agreement),\n\t\t\t\tcreateRenewalBadge(agreement),\n\t\t\t\tcreateContractValueBadge(agreement),\n\t\t\t\tcreateBillingBadge(agreement),\n\t\t\t\tcreateInvoicesBadge(generatedInvoices),\n\t\t\t\tcreateJobsBadge(generatedJobs),\n\t\t\t\tcreateEquipmentBadge(equipment),\n\t\t\t].filter(Boolean) as QuickInfoBadge[],\n\t\t[agreement, equipment, generatedInvoices, generatedJobs],\n\t);\n\n\tconst quickLinkClassName =\n\t\t\"border border-border/60 bg-background font-medium inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm transition-colors hover:border-primary/50 hover:bg-primary/5\";\n\n\tconst customHeader = (\n\t\t<div className=\"w-full px-2 sm:px-0\">\n\t\t\t<div className=\"bg-muted/40 mx-auto max-w-7xl rounded-xl shadow-sm\">\n\t\t\t\t<div className=\"flex flex-col gap-4 p-4 sm:p-6\">\n\t\t\t\t\t<div className=\"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between\">\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t\t\t{headerBadges}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-2xl font-semibold sm:text-3xl\">\n\t\t\t\t\t\t\t\t\t{agreement.name ||\n\t\t\t\t\t\t\t\t\t\tagreement.title ||\n\t\t\t\t\t\t\t\t\t\t`Agreement ${agreementNumber}`}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t{agreement.description ? (\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-sm sm:text-base\">\n\t\t\t\t\t\t\t\t\t\t{agreement.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{(customer || property) && (\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t\t{customer ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tclassName={quickLinkClassName}\n\t\t\t\t\t\t\t\t\thref={`/dashboard/customers/${customer.id}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<User className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t{customer.display_name ||\n\t\t\t\t\t\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\t\t\t\t\t\"Unknown Customer\"}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{property ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tclassName={quickLinkClassName}\n\t\t\t\t\t\t\t\t\thref={`/dashboard/work/properties/${property.id}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MapPin className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t{property.address ||\n\t\t\t\t\t\t\t\t\t\tproperty.name ||\n\t\t\t\t\t\t\t\t\t\t[property.city, property.state]\n\t\t\t\t\t\t\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t\t\t\t\t\t\t.join(\", \") ||\n\t\t\t\t\t\t\t\t\t\t\"Property\"}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{quickInfoBadges.length > 0 ? (\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t\t{quickInfoBadges.map(\n\t\t\t\t\t\t\t\t({ key, icon: Icon, label, value, helper, tone }) => (\n\t\t\t\t\t\t\t\t\t<div className={quickInfoBadgeClass(tone)} key={key}>\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"text-muted-foreground size-4\" />\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-foreground text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{helper ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{helper}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst serviceLevels = useMemo<ServiceLevelDisplay[]>(\n\t\t() => normalizeServiceLevels(agreement.service_levels),\n\t\t[agreement.service_levels],\n\t);\n\n\tconst customSections = useMemo<UnifiedAccordionSection[]>(\n\t\t() =>\n\t\t\t[\n\t\t\t\tbuildContractSection(agreement),\n\t\t\t\tbuildServiceLevelsSection(serviceLevels),\n\t\t\t\tbuildRenewalSection(agreement),\n\t\t\t\tbuildCustomerSection(customer),\n\t\t\t\tbuildInvoicesSection(generatedInvoices),\n\t\t\t\tbuildJobsSection(generatedJobs),\n\t\t\t\tbuildEquipmentSection(equipment),\n\t\t\t].filter(Boolean) as UnifiedAccordionSection[],\n\t\t[\n\t\t\tagreement,\n\t\t\tcustomer,\n\t\t\tequipment,\n\t\t\tgeneratedInvoices,\n\t\t\tgeneratedJobs,\n\t\t\tserviceLevels,\n\t\t],\n\t);\n\n\tconst relatedItems = useMemo<RelatedItem[]>(() => {\n\t\tconst items: RelatedItem[] = [];\n\n\t\tif (customer) {\n\t\t\titems.push({\n\t\t\t\tid: `customer-${customer.id}`,\n\t\t\t\ttype: \"customer\",\n\t\t\t\ttitle:\n\t\t\t\t\tcustomer.display_name ||\n\t\t\t\t\t`${customer.first_name || \"\"} ${customer.last_name || \"\"}`.trim() ||\n\t\t\t\t\t\"Unknown Customer\",\n\t\t\t\tsubtitle: customer.email || customer.phone || undefined,\n\t\t\t\thref: `/dashboard/customers/${customer.id}`,\n\t\t\t});\n\t\t}\n\n\t\tif (property) {\n\t\t\titems.push({\n\t\t\t\tid: `property-${property.id}`,\n\t\t\t\ttype: \"property\",\n\t\t\t\ttitle: property.address || property.name || \"Property\",\n\t\t\t\tsubtitle:\n\t\t\t\t\t`${property.city || \"\"}, ${property.state || \"\"}`.trim() || undefined,\n\t\t\t\thref: `/dashboard/work/properties/${property.id}`,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}, [customer, property]);\n\n\treturn (\n\t\t<>\n\t\t\t<DetailPageContentLayout\n\t\t\t\tactivities={activities}\n\t\t\t\tattachments={attachments}\n\t\t\t\tcustomHeader={customHeader}\n\t\t\t\tcustomSections={customSections}\n\t\t\t\tdefaultOpenSection=\"contract-terms\"\n\t\t\t\tnotes={notes}\n\t\t\t\trelatedItems={relatedItems}\n\t\t\t\tshowStandardSections={{\n\t\t\t\t\tactivities: true,\n\t\t\t\t\tnotes: true,\n\t\t\t\t\tattachments: true,\n\t\t\t\t\trelatedItems: true,\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t{/* Archive Dialog */}\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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"}