{"version":3,"sources":["../../../../../../apps/web/src/components/work/invoices-kanban.tsx","../../../../../../apps/web/src/components/work/invoices-table.tsx","../../../../../../apps/web/src/hooks/use-url-filters.ts"],"sourcesContent":["\"use client\";\n\nimport { ArrowUpRight, CalendarDays, FileText } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { type ColumnMeta, EntityKanban } from \"@/components/ui/entity-kanban\";\nimport type { KanbanItemBase } from \"@/components/ui/shadcn-io/kanban\";\nimport type { Invoice } from \"@/components/work/invoices-table\";\nimport { cn } from \"@/lib/utils\";\n\ntype InvoiceStatus = Invoice[\"status\"];\n\ntype InvoicesKanbanItem = KanbanItemBase & {\n\tinvoice: Invoice;\n};\n\nconst INVOICE_COLUMNS: Array<{\n\tid: InvoiceStatus;\n\tname: string;\n\taccentColor: string;\n}> = [\n\t{ id: \"draft\", name: \"Draft\", accentColor: \"#6B7280\" },\n\t{ id: \"pending\", name: \"Pending\", accentColor: \"#F59E0B\" },\n\t{ id: \"paid\", name: \"Paid\", accentColor: \"#22C55E\" },\n\t{ id: \"overdue\", name: \"Overdue\", accentColor: \"#EF4444\" },\n];\n\nconst columnLabel = new Map(\n\tINVOICE_COLUMNS.map((column) => [column.id, column.name]),\n);\n\nconst currencyFormatter = new Intl.NumberFormat(\"en-US\", {\n\tstyle: \"currency\",\n\tcurrency: \"USD\",\n});\n\nexport function InvoicesKanban({ invoices }: { invoices: Invoice[] }) {\n\treturn (\n\t\t<EntityKanban<Invoice, InvoiceStatus>\n\t\t\tcalculateColumnMeta={(columnId, items): ColumnMeta => {\n\t\t\t\tconst columnItems = items.filter((item) => item.columnId === columnId);\n\t\t\t\tconst total = columnItems.reduce(\n\t\t\t\t\t(sum, item) => sum + (item.entity as Invoice).amount,\n\t\t\t\t\t0,\n\t\t\t\t);\n\t\t\t\treturn { count: columnItems.length, total };\n\t\t\t}}\n\t\t\tcolumns={INVOICE_COLUMNS}\n\t\t\tdata={invoices}\n\t\t\tentityName=\"invoices\"\n\t\t\tformatTotal={(total) => currencyFormatter.format(total / 100)}\n\t\t\tmapToKanbanItem={(invoice) => ({\n\t\t\t\tid: invoice.id,\n\t\t\t\tcolumnId: invoice.status,\n\t\t\t\tentity: invoice,\n\t\t\t\tinvoice,\n\t\t\t})}\n\t\t\trenderCard={(item) => (\n\t\t\t\t<InvoiceCard\n\t\t\t\t\titem={{ ...item, invoice: item.entity } as InvoicesKanbanItem}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\trenderDragOverlay={(item) => (\n\t\t\t\t<div className=\"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg\">\n\t\t\t\t\t<InvoiceCard\n\t\t\t\t\t\titem={{ ...item, invoice: item.entity } as InvoicesKanbanItem}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\tshowTotals={true}\n\t\t\tupdateEntityStatus={(invoice, newStatus) => ({\n\t\t\t\t...invoice,\n\t\t\t\tstatus: newStatus,\n\t\t\t})}\n\t\t/>\n\t);\n}\n\nfunction InvoiceCard({ item }: { item: InvoicesKanbanItem }) {\n\tconst { invoice, columnId } = item;\n\treturn (\n\t\t<div className=\"space-y-3\">\n\t\t\t<div className=\"flex items-start justify-between gap-3\">\n\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t<p className=\"text-muted-foreground text-xs font-semibold tracking-wide uppercase\">\n\t\t\t\t\t\t{invoice.invoiceNumber}\n\t\t\t\t\t</p>\n\t\t\t\t\t<h3 className=\"text-foreground text-sm font-semibold\">\n\t\t\t\t\t\t{invoice.customer}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div className=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"text-xs\",\n\t\t\t\t\t\t\t\tcolumnId === \"overdue\" && \"bg-destructive/10 text-destructive\",\n\t\t\t\t\t\t\t\tcolumnId === \"paid\" && \"bg-primary/10 text-primary\",\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\tcolumnId === \"overdue\"\n\t\t\t\t\t\t\t\t\t? \"destructive\"\n\t\t\t\t\t\t\t\t\t: columnId === \"paid\"\n\t\t\t\t\t\t\t\t\t\t? \"secondary\"\n\t\t\t\t\t\t\t\t\t\t: \"outline\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{columnLabel.get(columnId as InvoiceStatus) ?? columnId}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\tclassName=\"bg-muted/60 text-muted-foreground\"\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{currencyFormatter.format(invoice.amount / 100)}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"text-muted-foreground space-y-2 text-xs\">\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<FileText className=\"text-primary size-4\" />\n\t\t\t\t\t<span>Issued {invoice.date}</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t<CalendarDays className=\"text-primary size-4\" />\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"font-medium\",\n\t\t\t\t\t\t\tcolumnId === \"overdue\" ? \"text-destructive\" : \"text-foreground\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tDue {invoice.dueDate}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"text-muted-foreground flex items-center justify-between pt-2 text-xs\">\n\t\t\t\t<span>Total {currencyFormatter.format(invoice.amount / 100)}</span>\n\t\t\t\t<Button\n\t\t\t\t\tasChild\n\t\t\t\t\tclassName=\"text-primary gap-1 text-xs\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t>\n\t\t\t\t\t<Link href={`/dashboard/work/invoices/${invoice.id}`}>\n\t\t\t\t\t\tView\n\t\t\t\t\t\t<ArrowUpRight className=\"size-3.5\" />\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * InvoicesTable Component\n * Full-width Gmail-style table for displaying invoices\n */\n\nimport { Archive, Download, FileText, Plus, Send } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useMemo, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n\tAlertDialog,\n\tAlertDialogAction,\n\tAlertDialogCancel,\n\tAlertDialogContent,\n\tAlertDialogDescription,\n\tAlertDialogFooter,\n\tAlertDialogHeader,\n\tAlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\ttype BulkAction,\n\ttype ColumnDef,\n\tFullWidthDataTable,\n} from \"@/components/ui/full-width-datatable\";\nimport { RowActionsDropdown } from \"@/components/ui/row-actions-dropdown\";\nimport { InvoiceStatusBadge } from \"@/components/ui/status-badge\";\nimport { useUrlFilters } from \"@/hooks/use-url-filters\";\nimport { formatCurrency } from \"@/lib/formatters\";\nimport { useInvoiceFiltersStore } from \"@/lib/stores/invoice-filters-store\";\n\nexport type Invoice = {\n\tid: string;\n\tinvoiceNumber: string;\n\tcustomer: string;\n\tdate: string;\n\tdueDate: string;\n\tamount: number;\n\tstatus: \"paid\" | \"pending\" | \"draft\" | \"overdue\";\n\tarchived_at?: string | null;\n\tdeleted_at?: string | null;\n};\n\ntype InvoicesTableProps = {\n\tinvoices: Invoice[];\n\titemsPerPage?: number;\n\tshowRefresh?: boolean;\n\tenableVirtualization?: boolean | \"auto\";\n\ttotalCount?: number;\n\tcurrentPage?: number;\n};\n\nexport function InvoicesTable({\n\tinvoices,\n\titemsPerPage = 50,\n\tshowRefresh = false,\n\tenableVirtualization = \"auto\",\n\ttotalCount,\n\tcurrentPage = 1,\n}: InvoicesTableProps) {\n\t// Sync filters with URL parameters\n\tuseUrlFilters(useInvoiceFiltersStore);\n\n\t// Get filters from global store\n\tconst filters = useInvoiceFiltersStore((state) => state.filters);\n\n\tconst [isArchiveDialogOpen, setIsArchiveDialogOpen] = useState(false);\n\tconst [itemToArchive, setItemToArchive] = useState<string | null>(null);\n\tconst [isBulkArchiveOpen, setIsBulkArchiveOpen] = useState(false);\n\tconst [isBulkSendDialogOpen, setIsBulkSendDialogOpen] = useState(false);\n\tconst [selectedItemIds, setSelectedItemIds] = useState<Set<string>>(\n\t\tnew Set(),\n\t);\n\tconst [pendingSendIds, setPendingSendIds] = useState<Set<string>>(new Set());\n\n\t// Apply filters from store\n\tconst filteredInvoices = useMemo(() => {\n\t\tlet result = invoices;\n\n\t\t// 1. Filter by archive status\n\t\tif (filters.archiveStatus === \"active\") {\n\t\t\tresult = result.filter((inv) => !(inv.archived_at || inv.deleted_at));\n\t\t} else if (filters.archiveStatus === \"archived\") {\n\t\t\tresult = result.filter((inv) =>\n\t\t\t\tBoolean(inv.archived_at || inv.deleted_at),\n\t\t\t);\n\t\t}\n\t\t// \"all\" = no archive filtering\n\n\t\t// 2. Filter by status\n\t\tif (filters.status && filters.status !== \"all\") {\n\t\t\tresult = result.filter((inv) => inv.status === filters.status);\n\t\t}\n\n\t\t// 3. Filter by amount range\n\t\tif (filters.amountMin) {\n\t\t\tconst min = Number(filters.amountMin) * 100; // Convert to cents\n\t\t\tresult = result.filter((inv) => inv.amount >= min);\n\t\t}\n\t\tif (filters.amountMax) {\n\t\t\tconst max = Number(filters.amountMax) * 100; // Convert to cents\n\t\t\tresult = result.filter((inv) => inv.amount <= max);\n\t\t}\n\n\t\t// 4. Filter by customer name\n\t\tif (filters.customerName) {\n\t\t\tconst search = filters.customerName.toLowerCase();\n\t\t\tresult = result.filter((inv) =>\n\t\t\t\tinv.customer.toLowerCase().includes(search),\n\t\t\t);\n\t\t}\n\n\t\t// 5. Filter by invoice number\n\t\tif (filters.invoiceNumber) {\n\t\t\tconst search = filters.invoiceNumber.toLowerCase();\n\t\t\tresult = result.filter((inv) =>\n\t\t\t\tinv.invoiceNumber.toLowerCase().includes(search),\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t}, [invoices, filters]);\n\n\t// Determine if we're showing archived items\n\tconst showingArchived =\n\t\tfilters.archiveStatus === \"archived\" || filters.archiveStatus === \"all\";\n\n\tconst columns: ColumnDef<Invoice>[] = [\n\t\t{\n\t\t\tkey: \"invoiceNumber\",\n\t\t\theader: \"Invoice #\",\n\t\t\twidth: \"w-36\",\n\t\t\tshrink: true,\n\t\t\tsortable: true,\n\t\t\trender: (invoice) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline\"\n\t\t\t\t\thref={`/dashboard/work/invoices/${invoice.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t{invoice.invoiceNumber}\n\t\t\t\t</Link>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"customer\",\n\t\t\theader: \"Customer\",\n\t\t\twidth: \"flex-1\",\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Always show customer for quick identification\n\t\t\trender: (invoice) => (\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\thref={`/dashboard/work/invoices/${invoice.id}`}\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"text-foreground text-sm font-medium hover:underline\">\n\t\t\t\t\t\t{invoice.customer}\n\t\t\t\t\t</span>\n\t\t\t\t</Link>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"date\",\n\t\t\theader: \"Date\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\tsortable: true,\n\t\t\thideable: true,\n\t\t\trender: (invoice) => (\n\t\t\t\t<span className=\"text-muted-foreground text-sm tabular-nums\">\n\t\t\t\t\t{invoice.date}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"dueDate\",\n\t\t\theader: \"Due Date\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\thideOnMobile: true,\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Due dates are essential for AR management\n\t\t\trender: (invoice) => (\n\t\t\t\t<span className=\"text-muted-foreground text-sm tabular-nums\">\n\t\t\t\t\t{invoice.dueDate}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"amount\",\n\t\t\theader: \"Amount\",\n\t\t\twidth: \"w-32\",\n\t\t\tshrink: true,\n\t\t\talign: \"right\",\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Financial data essential for decision-making\n\t\t\trender: (invoice) => (\n\t\t\t\t<span className=\"font-semibold tabular-nums\">\n\t\t\t\t\t{formatCurrency(invoice.amount, { decimals: 2 })}\n\t\t\t\t</span>\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\tkey: \"status\",\n\t\t\theader: \"Status\",\n\t\t\twidth: \"w-28\",\n\t\t\tshrink: true,\n\t\t\tsortable: true,\n\t\t\thideable: false, // CRITICAL: Status is key for action items\n\t\t\trender: (invoice) => <InvoiceStatusBadge status={invoice.status} />,\n\t\t},\n\t\t{\n\t\t\tkey: \"actions\",\n\t\t\theader: \"\",\n\t\t\twidth: \"w-10\",\n\t\t\tshrink: true,\n\t\t\trender: (invoice) => (\n\t\t\t\t<RowActionsDropdown\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"View Invoice\",\n\t\t\t\t\t\t\ticon: FileText,\n\t\t\t\t\t\t\thref: `/dashboard/work/invoices/${invoice.id}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Send to Customer\",\n\t\t\t\t\t\t\ticon: Send,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t// Navigate to invoice page with send action\n\t\t\t\t\t\t\t\twindow.location.href = `/dashboard/work/invoices/${invoice.id}?action=send`;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"Download PDF\",\n\t\t\t\t\t\t\ticon: Download,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t// Open PDF in new tab for download\n\t\t\t\t\t\t\t\twindow.open(`/api/invoices/${invoice.id}/pdf`, \"_blank\");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// Only show archive option for non-paid invoices\n\t\t\t\t\t\t...(invoice.status !== \"paid\"\n\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: \"Archive Invoice\",\n\t\t\t\t\t\t\t\t\t\ticon: Archive,\n\t\t\t\t\t\t\t\t\t\tvariant: \"destructive\" as const,\n\t\t\t\t\t\t\t\t\t\tseparatorBefore: true,\n\t\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\t\tsetItemToArchive(invoice.id);\n\t\t\t\t\t\t\t\t\t\t\tsetIsArchiveDialogOpen(true);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t: []),\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t),\n\t\t},\n\t];\n\n\t// Loading state for bulk actions\n\tconst [isBulkSending, setIsBulkSending] = useState(false);\n\n\t// Bulk actions\n\tconst bulkActions: BulkAction[] = [\n\t\t{\n\t\t\tlabel: \"Send\",\n\t\t\ticon: <Send className=\"h-4 w-4\" />,\n\t\t\tonClick: async (selectedIds) => {\n\t\t\t\tif (isBulkSending) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst invoicesToSend = filteredInvoices.filter((inv) =>\n\t\t\t\t\tselectedIds.has(inv.id),\n\t\t\t\t);\n\n\t\t\t\tif (invoicesToSend.length === 0) {\n\t\t\t\t\ttoast.error(\"No invoices selected\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Open confirmation dialog\n\t\t\t\tsetPendingSendIds(selectedIds);\n\t\t\t\tsetIsBulkSendDialogOpen(true);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Download\",\n\t\t\ticon: <Download className=\"h-4 w-4\" />,\n\t\t\tonClick: () => {\n\t\t\t\ttoast.info(\"Download functionality coming soon\");\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Archive Selected\",\n\t\t\ticon: <Archive className=\"h-4 w-4\" />,\n\t\t\tonClick: (selectedIds) => {\n\t\t\t\t// Check if all selected are paid invoices\n\t\t\t\tconst hasNonPaidInvoices = filteredInvoices.some(\n\t\t\t\t\t(inv) => selectedIds.has(inv.id) && inv.status !== \"paid\",\n\t\t\t\t);\n\n\t\t\t\tif (!hasNonPaidInvoices) {\n\t\t\t\t\ttoast.error(\"All selected invoices are paid and cannot be archived\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Open dialog with all selected IDs - the server action will filter out paid ones\n\t\t\t\tsetSelectedItemIds(selectedIds);\n\t\t\t\tsetIsBulkArchiveOpen(true);\n\t\t\t},\n\t\t\tvariant: \"destructive\",\n\t\t},\n\t];\n\n\t// Search filter function\n\tconst searchFilter = (invoice: Invoice, query: string) => {\n\t\tconst searchStr = query.toLowerCase();\n\t\treturn (\n\t\t\tinvoice.invoiceNumber.toLowerCase().includes(searchStr) ||\n\t\t\tinvoice.customer.toLowerCase().includes(searchStr) ||\n\t\t\tinvoice.status.toLowerCase().includes(searchStr)\n\t\t);\n\t};\n\n\tconst handleRowClick = (invoice: Invoice) => {\n\t\twindow.location.href = `/dashboard/work/invoices/${invoice.id}`;\n\t};\n\n\t// Highlight overdue invoices\n\tconst isHighlighted = (invoice: Invoice) => invoice.status === \"overdue\";\n\n\treturn (\n\t\t<>\n\t\t\t<FullWidthDataTable\n\t\t\t\tbulkActions={bulkActions}\n\t\t\t\tcolumns={columns}\n\t\t\t\tdata={filteredInvoices}\n\t\t\t\temptyAction={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t(window.location.href = \"/dashboard/work/invoices/new\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"mr-2 size-4\" />\n\t\t\t\t\t\tCreate Invoice\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\temptyIcon={<FileText className=\"text-muted-foreground h-8 w-8\" />}\n\t\t\t\temptyMessage=\"No invoices found\"\n\t\t\t\tenableSelection={true}\n\t\t\t\tenableVirtualization={enableVirtualization}\n\t\t\t\tentity=\"invoices\"\n\t\t\t\tgetHighlightClass={() => \"bg-destructive/50 dark:bg-destructive/20\"}\n\t\t\t\tgetItemId={(invoice) => invoice.id}\n\t\t\t\tisArchived={(invoice) => !!(invoice.archived_at || invoice.deleted_at)}\n\t\t\t\tisHighlighted={isHighlighted}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\ttotalCount={totalCount ?? filteredInvoices.length}\n\t\t\t\tcurrentPageFromServer={currentPage}\n\t\t\t\tserverPagination\n\t\t\t\tonRefresh={() => window.location.reload()}\n\t\t\t\tonRowClick={handleRowClick}\n\t\t\t\tsearchFilter={searchFilter}\n\t\t\t\tsearchPlaceholder=\"Search invoices by number, customer, or status...\"\n\t\t\t\tshowArchived={showingArchived}\n\t\t\t\tshowRefresh={showRefresh}\n\t\t\t\ttoolbarActions={undefined}\n\t\t\t/>\n\n\t\t\t{/* Archive Single Invoice Dialog */}\n\t\t\t<AlertDialog\n\t\t\t\tonOpenChange={setIsArchiveDialogOpen}\n\t\t\t\topen={isArchiveDialogOpen}\n\t\t\t>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>Archive Invoice?</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis invoice will be archived and can be restored within 90 days.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tif (itemToArchive) {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tconst { archiveInvoice } = await import(\n\t\t\t\t\t\t\t\t\t\t\t\"@/actions/invoices\"\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tconst result = await archiveInvoice(itemToArchive);\n\t\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\t\ttoast.success(\"Invoice archived successfully\");\n\t\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttoast.error(result.error || \"Failed to archive invoice\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\ttoast.error(\"Failed to archive invoice\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\n\t\t\t{/* Bulk Archive Dialog */}\n\t\t\t<AlertDialog onOpenChange={setIsBulkArchiveOpen} open={isBulkArchiveOpen}>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>\n\t\t\t\t\t\t\tArchive {selectedItemIds.size} Invoice(s)?\n\t\t\t\t\t\t</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\t{selectedItemIds.size} invoice(s) will be archived and can be\n\t\t\t\t\t\t\trestored within 90 days. Paid invoices will be automatically\n\t\t\t\t\t\t\tskipped.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tclassName=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tconst loadingToast = toast.loading(\n\t\t\t\t\t\t\t\t\t`Archiving ${selectedItemIds.size} invoice(s)...`,\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst { bulkArchiveInvoices } = await import(\n\t\t\t\t\t\t\t\t\t\t\"@/actions/bulk-archive\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tconst result = await bulkArchiveInvoices(\n\t\t\t\t\t\t\t\t\t\tArray.from(selectedItemIds),\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\ttoast.dismiss(loadingToast);\n\n\t\t\t\t\t\t\t\t\tif (result.success && result.data) {\n\t\t\t\t\t\t\t\t\t\tconst { successful, failed, skipped } = result.data;\n\n\t\t\t\t\t\t\t\t\t\tif (successful > 0) {\n\t\t\t\t\t\t\t\t\t\t\ttoast.success(result.message || \"Invoices archived\");\n\t\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t\t} else if (skipped > 0 && failed === 0) {\n\t\t\t\t\t\t\t\t\t\t\ttoast.warning(\n\t\t\t\t\t\t\t\t\t\t\t\t`${skipped} paid invoice${skipped !== 1 ? \"s\" : \"\"} cannot be archived`,\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\tresult.message || \"Failed to archive invoices\",\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttoast.error(\"Failed to archive invoices\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\ttoast.dismiss(loadingToast);\n\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t\t\t\t\t\t: \"Failed to archive invoices\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tArchive\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\n\t\t\t{/* Bulk Send Confirmation Dialog */}\n\t\t\t<AlertDialog\n\t\t\t\tonOpenChange={setIsBulkSendDialogOpen}\n\t\t\t\topen={isBulkSendDialogOpen}\n\t\t\t>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>\n\t\t\t\t\t\t\tSend {pendingSendIds.size} Invoice(s)?\n\t\t\t\t\t\t</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis will send {pendingSendIds.size} invoice\n\t\t\t\t\t\t\t{pendingSendIds.size !== 1 ? \"s\" : \"\"} via email to your\n\t\t\t\t\t\t\tcustomers.\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<strong>Estimated time:</strong>{\" \"}\n\t\t\t\t\t\t\t{Math.ceil(pendingSendIds.size * 0.5)} second\n\t\t\t\t\t\t\t{Math.ceil(pendingSendIds.size * 0.5) !== 1 ? \"s\" : \"\"}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\tNote: Only invoices with customer email addresses will be sent.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tsetIsBulkSendDialogOpen(false);\n\t\t\t\t\t\t\t\tsetIsBulkSending(true);\n\n\t\t\t\t\t\t\t\t// Import sync store\n\t\t\t\t\t\t\t\tconst { useSyncStore } = await import(\n\t\t\t\t\t\t\t\t\t\"@/lib/stores/sync-store\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst { startOperation, updateOperation, completeOperation } =\n\t\t\t\t\t\t\t\t\tuseSyncStore.getState();\n\n\t\t\t\t\t\t\t\tconst invoiceIds = Array.from(pendingSendIds);\n\t\t\t\t\t\t\t\tconst count = invoiceIds.length;\n\n\t\t\t\t\t\t\t\t// Start sync operation\n\t\t\t\t\t\t\t\tconst operationId = startOperation({\n\t\t\t\t\t\t\t\t\ttype: \"bulk_send_invoices\",\n\t\t\t\t\t\t\t\t\ttitle: `Sending ${count} invoice${count !== 1 ? \"s\" : \"\"}`,\n\t\t\t\t\t\t\t\t\tdescription: \"Preparing emails with payment links...\",\n\t\t\t\t\t\t\t\t\ttotal: count,\n\t\t\t\t\t\t\t\t\tcurrent: 0,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst { bulkSendInvoices } = await import(\n\t\t\t\t\t\t\t\t\t\t\"@/actions/bulk-communications\"\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t// Send invoices\n\t\t\t\t\t\t\t\t\tconst result = await bulkSendInvoices(invoiceIds, {\n\t\t\t\t\t\t\t\t\t\tbatchSize: 10,\n\t\t\t\t\t\t\t\t\t\tbatchDelay: 1000,\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t// Complete operation\n\t\t\t\t\t\t\t\t\tif (result.success || (result.results?.successful ?? 0) > 0) {\n\t\t\t\t\t\t\t\t\t\tcompleteOperation(operationId, true);\n\t\t\t\t\t\t\t\t\t\ttoast.success(result.message);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcompleteOperation(\n\t\t\t\t\t\t\t\t\t\t\toperationId,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\tresult.error || \"Failed to send invoices\",\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\ttoast.error(result.error || \"Failed to send invoices\");\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Reload if any succeeded\n\t\t\t\t\t\t\t\t\tif ((result.results?.successful ?? 0) > 0) {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\tcompleteOperation(\n\t\t\t\t\t\t\t\t\t\toperationId,\n\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t\t\t\t\t\t: \"Failed to send invoices\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t\t\t\t\t\t: \"Failed to send invoices\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\tsetIsBulkSending(false);\n\t\t\t\t\t\t\t\t\tsetPendingSendIds(new Set());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSend Invoices\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\t\t</>\n\t);\n}\n","\"use client\";\n\n/**\n * useUrlFilters - Sync filter state with URL search params\n *\n * Syncs Zustand filter store with URL query parameters, enabling:\n * - Shareable filter states via URL\n * - Filter persistence across page reloads\n * - Browser back/forward navigation\n * - Bookmarkable filtered views\n *\n * Usage:\n * ```tsx\n * // In your table component\n * useUrlFilters(useInvoiceFiltersStore);\n * ```\n *\n * URL format:\n * /invoices?status=paid&archiveStatus=active&amountMin=100\n */\n\nimport { usePathname, useRouter, useSearchParams } from \"next/navigation\";\nimport { useEffect, useRef } from \"react\";\n\ntype FilterStore<T> = {\n\tgetState: () => {\n\t\tfilters: T;\n\t\tsetFilters: (filters: Partial<T>) => void;\n\t};\n\tsubscribe: (listener: () => void) => () => void;\n};\n\n/**\n * Syncs a Zustand filter store with URL search parameters\n *\n * @param store - Zustand store with filters object and setFilters method\n * @param options - Configuration options\n *\n * @example\n * ```tsx\n * function InvoicesTable() {\n *   useUrlFilters(useInvoiceFiltersStore);\n *   const filters = useInvoiceFiltersStore((state) => state.filters);\n *   // filters are now synced with URL\n * }\n * ```\n */\nexport function useUrlFilters<T extends Record<string, any>>(\n\tstore: FilterStore<T>,\n\toptions: {\n\t\t/** Filter keys to exclude from URL sync */\n\t\texcludeKeys?: (keyof T)[];\n\t\t/** Debounce delay for URL updates (ms) */\n\t\tdebounceMs?: number;\n\t} = {},\n) {\n\tconst router = useRouter();\n\tconst pathname = usePathname();\n\tconst searchParams = useSearchParams();\n\tconst isInitialMount = useRef(true);\n\tconst { excludeKeys = [], debounceMs = 300 } = options;\n\n\t// Read filters from URL on mount\n\tuseEffect(() => {\n\t\tif (!isInitialMount.current) return;\n\t\tisInitialMount.current = false;\n\n\t\tconst urlFilters: Partial<T> = {};\n\t\tconst currentFilters = store.getState().filters;\n\n\t\t// Parse URL params into filter object\n\t\tsearchParams.forEach((value, key) => {\n\t\t\tif (excludeKeys.includes(key as keyof T)) return;\n\n\t\t\t// Only update if the key exists in the filter schema\n\t\t\tif (key in currentFilters) {\n\t\t\t\t// Parse value based on current filter type\n\t\t\t\tconst currentValue = currentFilters[key as keyof T];\n\t\t\t\tif (typeof currentValue === \"number\") {\n\t\t\t\t\turlFilters[key as keyof T] = Number.parseFloat(value) as T[keyof T];\n\t\t\t\t} else if (typeof currentValue === \"boolean\") {\n\t\t\t\t\turlFilters[key as keyof T] = (value === \"true\") as T[keyof T];\n\t\t\t\t} else {\n\t\t\t\t\turlFilters[key as keyof T] = value as T[keyof T];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Apply URL filters to store if any were found\n\t\tif (Object.keys(urlFilters).length > 0) {\n\t\t\tstore.getState().setFilters(urlFilters);\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\t// Sync filter changes to URL\n\tuseEffect(() => {\n\t\tlet timeoutId: NodeJS.Timeout;\n\n\t\tconst unsubscribe = store.subscribe(() => {\n\t\t\tclearTimeout(timeoutId);\n\n\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\tconst filters = store.getState().filters;\n\t\t\t\tconst params = new URLSearchParams(searchParams.toString());\n\n\t\t\t\t// Update URL params with current filters\n\t\t\t\tObject.entries(filters).forEach(([key, value]) => {\n\t\t\t\t\tif (excludeKeys.includes(key as keyof T)) return;\n\n\t\t\t\t\t// Remove param if value is empty/default\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue === \"\" ||\n\t\t\t\t\t\tvalue === null ||\n\t\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t\tvalue === \"all\" ||\n\t\t\t\t\t\tvalue === \"active\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tparams.delete(key);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.set(key, String(value));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst newUrl =\n\t\t\t\t\tparams.toString() === \"\"\n\t\t\t\t\t\t? pathname\n\t\t\t\t\t\t: `${pathname}?${params.toString()}`;\n\n\t\t\t\t// Only update if URL actually changed\n\t\t\t\tconst currentUrl = `${pathname}${searchParams.toString() ? `?${searchParams.toString()}` : \"\"}`;\n\t\t\t\tif (newUrl !== currentUrl) {\n\t\t\t\t\trouter.push(newUrl, { scroll: false });\n\t\t\t\t}\n\t\t\t}, debounceMs);\n\t\t});\n\n\t\treturn () => {\n\t\t\tclearTimeout(timeoutId);\n\t\t\tunsubscribe();\n\t\t};\n\t}, [store, router, pathname, searchParams, excludeKeys, debounceMs]);\n}\n"],"names":[],"mappings":"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"}