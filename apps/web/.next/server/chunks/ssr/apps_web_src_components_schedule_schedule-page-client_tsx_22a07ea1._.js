module.exports=[726458,a=>{"use strict";var b=a.i(861467),c=a.i(783281);a.i(857463);var d=a.i(161367),e=a.i(77323),f=a.i(337241),g=a.i(563491);function h(a){var b;return{...a,startTime:new Date(a.startTime),endTime:new Date(a.endTime),createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),customer:{...a.customer,createdAt:new Date(a.customer.createdAt),updatedAt:new Date(a.customer.updatedAt)},recurrence:a.recurrence?{...b=a.recurrence,endDate:b.endDate?new Date(b.endDate):void 0}:void 0}}function i(a){var b;return{...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),schedule:{...b=a.schedule,daysOff:b.daysOff.map(a=>new Date(a))}}}var j=a.i(527228),k=a.i(140596),l=a.i(665791);a.i(129774);let m={maxRetries:3,initialDelay:500,maxDelay:5e3,backoffFactor:2,shouldRetry:a=>{if(a instanceof Error){let b=a.message.toLowerCase();return b.includes("network")||b.includes("timeout")||b.includes("connection")||b.includes("fetch failed")||b.includes("econnreset")||b.includes("500")||b.includes("502")||b.includes("503")||b.includes("504")}return!1}};async function n(a,b,c={}){let d,e={...m,...c},f=e.initialDelay;for(let c=0;c<=e.maxRetries;c++)try{return await a()}catch(a){if(d=a,c===e.maxRetries||!e.shouldRetry(a))throw console.error(`[Schedule] ${b} failed after ${c+1} attempt(s):`,a instanceof Error?a.message:String(a)),a;console.warn(`[Schedule] ${b} attempt ${c+1} failed, retrying in ${f}ms...`,a instanceof Error?a.message:String(a)),await new Promise(a=>setTimeout(a,f)),f=Math.min(f*e.backoffFactor,e.maxDelay)}throw d}let o=`
  *,
  customer:customers(
    id,
    first_name,
    last_name,
    email,
    phone
  ),
  job:jobs(
    id,
    job_number,
    title,
    job_type,
    company_id,
    job_team_assignments:job_team_assignments!job_team_assignments_job_id_fkey(
      id,
      role,
      team_member_id,
      removed_at,
      team_member:team_members(
        id,
        company_id,
        status,
        job_title,
        department,
        archived_at,
        user_id,
        phone,
        email,
        invited_name,
        created_at,
        updated_at
      )
    )
  )
`,p=`
  *,
  customer:customers!customer_id(
    id,
    first_name,
    last_name,
    email,
    phone,
    created_at,
    updated_at
  ),
  property:properties!property_id(
    id,
    name,
    address,
    address2,
    city,
    state,
    zip_code,
    country,
    lat,
    lon
  ),
  job_team_assignments:job_team_assignments!job_team_assignments_job_id_fkey(
    id,
    role,
    team_member_id,
    removed_at,
    team_member:team_members(
      id,
      company_id,
      status,
      job_title,
      department,
      archived_at,
      user_id,
      phone,
      email,
      invited_name,
      created_at,
      updated_at
    )
  )
`,q={workingHours:{start:"08:00",end:"17:00"},daysOff:[],availableHours:{start:0,end:40}},r={address:{street:"",city:"",state:"",zip:"",country:""},coordinates:{lat:0,lng:0}};async function s({supabase:a,companyId:b,range:c,unscheduledLimit:d=50,unscheduledOffset:e=0,unscheduledSearch:f=""}){var g;let h,i,j,k,l,m,p,s,u=a.from("appointments").select(o).eq("company_id",b).is("deleted_at",null).is("archived_at",null).order("start_time",{ascending:!0});c&&(u.lte("start_time",c.end.toISOString()),u.gte("end_time",c.start.toISOString()));try{[l,m,p]=await n(()=>Promise.all([u,t(a,b),v(a,b,{limit:d,offset:e,search:f})]),"fetchScheduleData parallel queries")}catch(a){throw console.error("[Schedule] Failed to fetch schedule data:",a),Error(`Schedule data query failed: ${a instanceof Error?a.message:String(a)}`)}let A=l.data??[],B=l.error;if(B)throw console.error("Appointments query error:",B),Error(`Appointments query failed: ${B.message}`);let C=new Set(A.map(a=>a.job_id).filter(a=>!!a)),D=p.rows.filter(a=>!C.has(a.id)),E={totalCount:p.totalCount,hasMore:p.hasMore,fetchedCount:p.rows.length};try{s=await n(()=>{var b,c;let d;return w(a,(b=A,c=D,d=new Set,b.forEach(a=>{a.property_id&&d.add(a.property_id)}),c.forEach(a=>{a.property_id&&d.add(a.property_id)}),Array.from(d)))},"fetchPropertiesByIds")}catch(a){console.error("[Schedule] Failed to fetch properties:",a),s=new Map}let F=(g=m,h=[],i=new Map,j=new Map,k=new Map,g.forEach(a=>{let b=a.user_id??a.id;if(!b)return;let c=a.users,d={id:b,userId:a.user_id??void 0,teamMemberId:a.id,name:c?.name||a.invited_name||a.job_title||"Team Member",email:c?.email||a.email||void 0,phone:c?.phone||a.phone||void 0,avatar:c?.avatar||void 0,role:a.job_title||a.role||"Team Member",department:a.department||void 0,status:"active"===a.status?"available":"offline",isActive:"active"===a.status&&!a.archived_at,schedule:{...q},color:"#3B82F6",createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)};h.push(d),i.set(d.id,d),d.userId&&j.set(d.userId,d),d.teamMemberId&&k.set(d.teamMemberId,d)}),{technicians:h,byId:i,byUserId:j,byTeamMemberId:k});return{jobs:[...A.map(a=>{var b,c,d,e;let f,g,h,i,j,k,l;return b=a,c=F,h=y(s.get(a.property_id??"")??null),i=(d=b,e=h.address.street,g=(f=d.customer)&&`${f.first_name??""} ${f.last_name??""}`.trim(),{id:f?.id||d.customer_id||`customer-${d.id}`,name:g&&g.length>0?g:"Unspecified Customer",email:f?.email||void 0,phone:f?.phone||void 0,location:{...r,address:{...r.address,street:e}},createdAt:new Date(d.created_at),updatedAt:new Date(d.updated_at)}),k=(j=function(a,b){let c=[];if(a.assigned_to){let d=b.byUserId.get(a.assigned_to)||b.byId.get(a.assigned_to);c.push({technicianId:d?.id??a.assigned_to,teamMemberId:d?.teamMemberId,displayName:d?.name||"Primary Technician",avatar:d?.avatar||null,role:"primary",status:d?.status??"available",isActive:d?.isActive??!0})}return(a.job?.job_team_assignments?.filter(a=>!a.removed_at)??[]).forEach(a=>{let d=a.team_member;if(!d)return;let e=d.user_id&&b.byUserId.get(d.user_id)||b.byTeamMemberId.get(d.id),f=e?.name||d.invited_name||d.job_title||"Crew Member";c.push({technicianId:e?.id??d.user_id??d.id,teamMemberId:d.id,displayName:f,avatar:e?.avatar||null,role:a.role||"crew",status:e?.status??z(d.status),isActive:e?.isActive??"active"===d.status})}),x(c)}(b,c)).find(a=>"primary"===a.role),l=k?.technicianId??"",{id:b.id,jobId:b.job_id||void 0,technicianId:l,assignments:j,isUnassigned:0===j.length,title:b.title||b.job?.title||"Appointment",description:b.description||void 0,jobType:b.job?.job_type||void 0,appointmentType:b.type||void 0,appointmentCategory:function(a,b){if(b)return"event";switch(a?.toLowerCase()){case"meeting":case"appointment":case"follow_up":case"consultation":case"call":return"meeting";case"event":case"training":case"conference":case"holiday":return"event";default:return"job"}}(b.type,b.all_day??!1),customer:i,location:h,startTime:new Date(b.start_time),endTime:new Date(b.end_time),allDay:b.all_day,status:b.status&&["scheduled","dispatched","arrived","in-progress","closed","completed","cancelled"].includes(b.status)?b.status:"scheduled",priority:"medium",recurrence:b.is_recurring?{frequency:"weekly",interval:1,endDate:b.recurrence_end_date?new Date(b.recurrence_end_date):void 0}:void 0,metadata:{estimatedDuration:b.duration,notes:b.notes||void 0},createdAt:new Date(b.created_at),updatedAt:new Date(b.updated_at)}}),...D.map(a=>{var b,c,d,e,f,g;let h,i,j,k,l,m,n,o;return b=a,c=F,j=y(s.get(a.property_id??"")??null),k=(d=b,e=j.address.street,h=Array.isArray(f=d.customer)?f[0]??null:f??null,i=[h?.first_name?.trim()??"",h?.last_name?.trim()??""].filter(Boolean).join(" ").trim(),{id:h?.id||d.customer_id||`customer-${d.id}`,name:i||d.title||"Unspecified Customer",email:h?.email||void 0,phone:h?.phone||void 0,location:{...r,address:{...r.address,street:e}},createdAt:new Date(h?.created_at??d.created_at),updatedAt:new Date(h?.updated_at??d.updated_at)}),l=function(a,b){let c=[];if(a.assigned_to){let d=b.byUserId.get(a.assigned_to)||b.byId.get(a.assigned_to);c.push({technicianId:null,teamMemberId:d?.teamMemberId,displayName:d?.name||"Primary Technician",avatar:d?.avatar??null,role:"primary",status:d?.status??"available",isActive:d?.isActive??!0})}return(Array.isArray(a.job_team_assignments)?a.job_team_assignments:a.job_team_assignments?[a.job_team_assignments]:[]).filter(a=>!a.removed_at).forEach(a=>{let d=a.team_member;if(!d)return;let e=d.user_id&&b.byUserId.get(d.user_id)||b.byTeamMemberId.get(d.id);c.push({technicianId:null,teamMemberId:d.id,displayName:e?.name||d.invited_name||d.job_title||"Crew Member",avatar:e?.avatar??null,role:a.role||"crew",status:e?.status??z(d.status),isActive:e?.isActive??"active"===d.status})}),x(c)}(b,c),m=new Date(b.scheduled_start?b.scheduled_start:b.created_at),n=new Date(b.scheduled_end?b.scheduled_end:m.getTime()+36e5),{id:b.id,jobId:b.id,technicianId:"",assignments:l,isUnassigned:!0,title:b.title||b.job_number||"Job",description:b.description||void 0,jobType:b.job_type||void 0,customer:k,location:j,startTime:m,endTime:n,status:function(a){if(!a)return"scheduled";let b=a.toLowerCase();switch(b){case"scheduled":case"dispatched":case"arrived":case"closed":case"cancelled":return b;case"in-progress":case"in_progress":case"inprogress":return"in-progress";case"completed":case"complete":case"done":return"completed";default:return"scheduled"}}(b.status),priority:function(a){if(!a)return"medium";let b=a.toLowerCase();switch(b){case"low":case"medium":case"high":case"urgent":return b;case"critical":case"emergency":return"urgent";default:return"medium"}}(b.priority),metadata:(o={...(g=b).metadata&&"object"==typeof g.metadata?g.metadata:{}},g.notes&&(o.notes=g.notes),o),createdAt:new Date(b.created_at),updatedAt:new Date(b.updated_at)}})],technicians:F.technicians,unassignedMeta:{limit:d,nextOffset:e+E.fetchedCount,hasMore:E.hasMore,search:f,totalCount:E.totalCount}}}async function t(a,b){let{data:c,error:d}=await a.from("company_memberships").select(`
			*,
			users:profiles!company_memberships_profile_id_fkey(
				id,
				full_name,
				email,
				phone,
				avatar_url
			)
		`).eq("company_id",b).eq("status","active").is("archived_at",null);return d?(console.warn("Join query failed, falling back to sequential queries:",d.message),u(a,b)):(c??[]).map(a=>({...a,users:a.users?{id:a.users.id,name:a.users.full_name,email:a.users.email,phone:a.users.phone,avatar:a.users.avatar_url}:null}))}async function u(a,b){let{data:c,error:d}=await a.from("company_memberships").select("*").eq("company_id",b).eq("status","active").is("archived_at",null);if(d)throw d;let e=Array.from(new Set((c??[]).map(a=>a.user_id).filter(a=>!!a))),f=new Map;if(e.length>0){let{data:b,error:c}=await a.from("profiles").select("id, full_name, email, phone, avatar_url").in("id",e);if(c)throw c;(b??[]).forEach(a=>{f.set(a.id,a)})}return(c??[]).map(a=>({...a,users:a.user_id?f.get(a.user_id)??null:null}))}async function v(a,b,c){let d,e,f,g=c.limit??50,h=c.offset??0,i=a.from("jobs").select(p,{count:"exact"}).eq("company_id",b).is("deleted_at",null).is("archived_at",null).is("scheduled_start",null).is("scheduled_end",null).not("status","in",'("completed","cancelled")').order("created_at",{ascending:!1}).range(h,h+g-1);if(c.search?.trim()){let a=c.search.trim().replace(/,/g,"\\,"),b=`%${a}%`;i=i.or(`title.ilike.${b},job_number.ilike.${b},description.ilike.${b}`)}try{let a=await i;d=a.data,e=a.count,f=a.error}catch(a){return console.error("[Schedule] Unscheduled jobs fetch failed:",a),{rows:[],totalCount:0,hasMore:!1}}if(f)return console.error("[Schedule] Unscheduled jobs query error:",f),{rows:[],totalCount:0,hasMore:!1};let j=d??[],k="number"==typeof e?e:j.length,l=h+j.length<k;return{rows:j,totalCount:k,hasMore:l}}async function w(a,b){let c=new Map;if(0===b.length)return c;for(let d=0;d<b.length;d+=100){let e=b.slice(d,d+100);try{let{data:b,error:d}=await a.from("properties").select("id, name, address, address2, city, state, zip_code, country, lat, lon").in("id",e);if(d){console.error("[Schedule] Properties query error:",d);continue}(b??[]).forEach(a=>c.set(a.id,a))}catch(a){console.error(`[Schedule] Failed to fetch properties chunk ${d/100+1}:`,a);continue}}return c}function x(a){let b=new Set;return a.filter(a=>{let c=`${a.role}-${a.technicianId??a.teamMemberId??""}`;return!b.has(c)&&(b.add(c),!0)})}function y(a){return a?{address:{street:a.address||a.address2||a.name||"",city:a.city||"",state:a.state||"",zip:a.zip_code||"",country:a.country||""},coordinates:{lat:a.lat||0,lng:a.lon||0}}:{...r}}function z(a){return"active"===a?"available":"offline"}var A=a.i(132440);let B=(0,j.create)()((0,k.devtools)((0,k.persist)((a,b)=>({technicians:new Map,jobs:new Map,companyId:null,lastFetchedRange:null,isLoading:!1,error:null,lastSync:null,isLoadingUnassigned:!1,unassignedSearch:"",unassignedHasMore:!1,unassignedNextOffset:0,unassignedLimit:50,unassignedTotalCount:0,selectedJobId:null,selectedTechnicianId:null,setTechnicians:b=>{a({technicians:new Map(b.map(a=>[a.id,a]))})},addTechnician:b=>{a(a=>{let c=new Map(a.technicians);return c.set(b.id,b),{technicians:c}})},updateTechnician:(b,c)=>{a(a=>{let d=new Map(a.technicians),e=d.get(b);return e&&d.set(b,{...e,...c}),{technicians:d}})},removeTechnician:b=>{a(a=>{let c=new Map(a.technicians);c.delete(b);let d=new Map(a.jobs);for(let[a,c]of d){let e=c.assignments.filter(a=>a.technicianId!==b);e.length!==c.assignments.length&&d.set(a,{...c,assignments:e,technicianId:e.find(a=>"primary"===a.role)?.technicianId??"",isUnassigned:0===e.length})}return{technicians:c,jobs:d,selectedTechnicianId:a.selectedTechnicianId===b?null:a.selectedTechnicianId}})},setJobs:b=>{a({jobs:new Map(b.map(a=>[a.id,a]))})},addJob:b=>{a(a=>{let c=new Map(a.jobs);return c.set(b.id,b),{jobs:c}})},updateJob:(b,c)=>{a(a=>{let d=new Map(a.jobs),e=d.get(b);return e&&d.set(b,{...e,...c}),{jobs:d}})},moveJob:(b,c,d,e)=>{a(a=>{let f=new Map(a.jobs),g=f.get(b);if(g){let h=a.technicians.get(c),i=g.assignments.length>0?g.assignments.map(a=>"primary"===a.role?{...a,technicianId:c,teamMemberId:h?.teamMemberId,displayName:h?.name||a.displayName,avatar:h?.avatar??a.avatar??null,status:h?.status??a.status,isActive:h?.isActive??!0}:a):[{technicianId:c,teamMemberId:h?.teamMemberId,displayName:h?.name||"Primary Technician",avatar:h?.avatar??null,role:"primary",status:h?.status??"available",isActive:!0}];f.set(b,{...g,technicianId:c,assignments:i,isUnassigned:0===i.length,startTime:d,endTime:e})}return{jobs:f}})},deleteJob:b=>{a(a=>{let c=new Map(a.jobs);return c.delete(b),{jobs:c,selectedJobId:a.selectedJobId===b?null:a.selectedJobId}})},duplicateJob:(a,c)=>{let d=b().jobs.get(a);if(!d)return;let e=d.endTime.getTime()-d.startTime.getTime(),f=new Date(c.getTime()+e),g={...d,id:`${d.id}-copy-${Date.now()}`,startTime:c,endTime:f,status:"scheduled",assignments:d.assignments.map(a=>({...a})),createdAt:new Date,updatedAt:new Date};b().addJob(g)},selectJob:b=>a({selectedJobId:b}),selectTechnician:b=>a({selectedTechnicianId:b}),bulkUpdateJobs:b=>{a(a=>{let c=new Map(a.jobs);return b.forEach(({jobId:a,updates:b})=>{let d=c.get(a);d&&c.set(a,{...d,...b})}),{jobs:c}})},bulkDeleteJobs:b=>{a(a=>{let c=new Map(a.jobs);return b.forEach(a=>c.delete(a)),{jobs:c,selectedJobId:b.includes(a.selectedJobId||"")?null:a.selectedJobId}})},hydrateFromServer:c=>{a(a=>{let b=new Map(c.jobs.map(a=>[a.id,a])),d=new Map(c.technicians.map(a=>[a.id,a]));return{...a,companyId:c.companyId,jobs:b,technicians:d,lastFetchedRange:{start:c.range.start,end:c.range.end},lastSync:c.lastSync,isLoading:!1,error:null,selectedTechnicianId:null,selectedJobId:null}});let d=c.jobs.filter(a=>a.isUnassigned).length;b().setUnassignedMeta(c.unassignedMeta,d)},syncWithServer:async()=>{a({isLoading:!0,error:null});try{let c=(0,A.createClient)();if(!c)throw Error("Database connection not available");let d=b().companyId;if(!d)throw Error("Company context is missing");let e=b().lastFetchedRange??{start:new Date(Date.now()-2592e6),end:new Date(Date.now()+2592e6)},{unassignedLimit:f,unassignedSearch:g}=b(),{jobs:h,technicians:i,unassignedMeta:j}=await s({supabase:c,companyId:d,range:e,unscheduledLimit:f,unscheduledOffset:0,unscheduledSearch:g});b().setTechnicians(i),b().setJobs(h),a({lastSync:new Date,lastFetchedRange:{start:new Date(e.start),end:new Date(e.end)}});let k=h.filter(a=>a.isUnassigned).length;b().setUnassignedMeta(j,k)}catch(b){a({error:b instanceof Error?b.message:"Unknown error"})}finally{a({isLoading:!1})}},setLoading:b=>a({isLoading:b}),setError:b=>a({error:b}),setLastSync:b=>a({lastSync:b}),setCompanyId:b=>a({companyId:b}),setLastFetchedRange:b=>a({lastFetchedRange:b}),setUnassignedMeta:(b,c=0)=>a(a=>{let d=Math.max(c,Array.from(a.jobs.values()).filter(a=>a.isUnassigned).length);return{unassignedSearch:b&&"string"==typeof b.search?b.search:a.unassignedSearch??"",unassignedHasMore:"boolean"==typeof b?.hasMore?b.hasMore:a.unassignedHasMore??!1,unassignedNextOffset:b?.nextOffset??d,unassignedLimit:b?.limit??a.unassignedLimit??50,unassignedTotalCount:b?.totalCount??d,isLoadingUnassigned:!1}}),loadMoreUnassignedJobs:async({reset:c=!1,search:d}={})=>{let{unassignedLimit:e}=b(),f="string"==typeof d?d:b().unassignedSearch,g=c?0:b().unassignedNextOffset;a({isLoadingUnassigned:!0,error:null,unassignedSearch:f});try{let d=await fetch("/api/schedule/unscheduled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:f,offset:g,limit:e})}),i=await d.json();if(!d.ok)throw Error(i?.error||"Failed to load unscheduled jobs");let j=Array.isArray(i?.jobs)?i.jobs.map(h):[],k=i?.meta;a(a=>{let b=new Map(a.jobs);if(c)for(let[a,c]of b)c.isUnassigned&&b.delete(a);return j.forEach(a=>{b.set(a.id,a)}),{jobs:b}});let l=Array.from(b().jobs.values()).filter(a=>a.isUnassigned).length;b().setUnassignedMeta(k,l)}catch(b){throw a({error:b instanceof Error?b.message:"Failed to load unscheduled jobs"}),b}finally{a({isLoadingUnassigned:!1})}},getJobsByTechnician:a=>Array.from(b().jobs.values()).filter(b=>b.assignments.some(b=>b.technicianId===a)),getJobsByDateRange:(a,c)=>Array.from(b().jobs.values()).filter(b=>b.startTime<=c&&b.endTime>=a),getTechnicianById:a=>b().technicians.get(a),getJobById:a=>b().jobs.get(a),hasConflict:(a,c,d,e)=>b().getJobsByTechnician(a).some(a=>(!e||a.id!==e)&&(c>=a.startTime&&c<a.endTime||d>a.startTime&&d<=a.endTime||c<=a.startTime&&d>=a.endTime)),getUnassignedJobs:()=>Array.from(b().jobs.values()).filter(a=>a.isUnassigned),getJobsGroupedByTechnician:()=>{let a={};for(let c of b().jobs.values())c.assignments.forEach(b=>{b.technicianId&&(a[b.technicianId]||(a[b.technicianId]=[]),a[b.technicianId].push(c))});return a}}),{name:"schedule-storage",skipHydration:!0,partialize:a=>({technicians:Array.from(a.technicians.values()),jobs:Array.from(a.jobs.values()),lastSync:a.lastSync}),merge:(a,b)=>{let c=a?.technicians?new Map(a.technicians.map(a=>[a.id,a])):b.technicians,d=a?.jobs?new Map(a.jobs.map(a=>[a.id,a])):b.jobs;return{...b,...a,technicians:c,jobs:d}}})));var C=a.i(226559);a.i(129112);var D=a.i(256003);let E=(0,C.default)(async()=>{},{loadableGenerated:{modules:[915024]},loading:()=>(0,b.jsxs)("div",{className:"flex h-full w-full flex-col gap-4 p-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(D.Skeleton,{className:"h-10 w-32"}),(0,b.jsx)(D.Skeleton,{className:"h-10 w-32"}),(0,b.jsx)(D.Skeleton,{className:"h-10 flex-1"})]}),(0,b.jsx)(D.Skeleton,{className:"h-full w-full"})]}),ssr:!1});function F(){return(0,b.jsx)(E,{})}let G=(0,C.default)(async()=>{},{loadableGenerated:{modules:[823591]},loading:()=>(0,b.jsx)("div",{className:"flex h-full w-full gap-4 p-4",children:Array.from({length:7}).map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,b.jsx)(D.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(D.Skeleton,{className:"h-32 w-full"}),(0,b.jsx)(D.Skeleton,{className:"h-32 w-full"})]},c))}),ssr:!1});function H(){return(0,b.jsx)(G,{})}var I=a.i(773608),J=a.i(165990),K=a.i(766153),L=a.i(337850),M=a.i(779184);a.i(445255);var N=a.i(18170),O=a.i(587969),P=a.i(50900),Q=a.i(101482),R=a.i(700760);let S={no_jobs:{icon:O.Calendar,title:"No jobs scheduled",description:"Get started by scheduling your first appointment",defaultActionLabel:"Schedule Appointment"},no_results:{icon:P.Search,title:"No jobs found",description:"Try adjusting your search or filters",defaultActionLabel:"Clear Filters"},no_unassigned:{icon:Q.Users,title:"All jobs assigned",description:"Great! All jobs have been assigned to technicians",defaultActionLabel:"View Schedule"},no_jobs_today:{icon:O.Calendar,title:"No jobs today",description:"This technician has no scheduled jobs for today",defaultActionLabel:"View Full Schedule"}};function T({variant:a,onAction:c,actionLabel:d,className:e}){let f=S[a],g=f.icon,h=d||f.defaultActionLabel;return(0,b.jsxs)("div",{className:(0,R.cn)("flex flex-col items-center justify-center gap-4 px-6 py-12 text-center",e),children:[(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:(0,b.jsx)(g,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:f.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:f.description})]}),c&&(0,b.jsx)(N.Button,{className:"mt-2",onClick:c,children:h})]})}var U=a.i(90083),V=a.i(96250),W=a.i(624126),X=a.i(824124),Y=a.i(699756),Z=a.i(217547),$=a.i(339632),_=a.i(320091),aa=a.i(300298);a.i(516775);var ab=a.i(560272);a.i(288007);var ac=a.i(986990),ad=a.i(42881),ae=a.i(939968);function af(a,b,c){let d=(0,ae.toDate)(a,c?.in);return d.setHours(b),d}function ag(a,b,c){let d=(0,ae.toDate)(a,c?.in);return d.setMinutes(b),d}a.i(708402);var ah=a.i(876067);a.i(458393);var ai=a.i(82012);a.i(413309);var aj=a.i(54210);let ak=(()=>{let a=[];for(let b=0;b<24;b++)for(let c=0;c<60;c+=30){let d=new Date;d.setHours(b,c,0,0),a.push({label:(0,I.format)(d,"h:mm a"),time:`${String(b).padStart(2,"0")}:${String(c).padStart(2,"0")}`})}return a})(),al=ak.filter(a=>{let[b]=a.time.split(":").map(Number);return b>=6&&b<18});function am({job:a,isOpen:d,onClose:e,onConfirm:f}){let[g,h]=(0,c.useState)(a?.scheduled_start?new Date(a.scheduled_start):new Date),[i,j]=(0,c.useState)(a?.scheduled_start?(0,I.format)(new Date(a.scheduled_start),"HH:mm"):"09:00"),[k,l]=(0,c.useState)(!1),m=(0,c.useMemo)(()=>{if(a?.scheduled_start&&a?.scheduled_end){let b=new Date(a.scheduled_start);return(new Date(a.scheduled_end).getTime()-b.getTime())/36e5}let b=a?.title?.toLowerCase()||"";return b.includes("emergency")?3:b.includes("install")?4:b.includes("inspection")?1:(b.includes("maintenance"),2)},[a]),n=(0,c.useMemo)(()=>{if(!g||!i)return null;let[a,b]=i.split(":").map(Number),c=(0,ad.startOfDay)(g);af(c,a),ag(c,b);let d=new Date(c);return d.setHours(c.getHours()+Math.floor(m)),d.setMinutes(c.getMinutes()+m%1*60),d},[g,i,m]);if(!a)return null;let o=k?ak:al;return(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in",onClick:e}),(0,b.jsxs)("div",{className:(0,R.cn)("fixed bottom-0 left-0 right-0 z-50 bg-background rounded-t-2xl shadow-2xl","transform transition-transform duration-300 ease-out",d?"translate-y-0":"translate-y-full"),style:{maxHeight:"90vh"},children:[(0,b.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,b.jsx)("div",{className:"w-12 h-1 bg-muted-foreground/30 rounded-full"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pb-4 border-b",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Reschedule Appointment"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.customer?.name||"Unknown Customer"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Current: ",a.scheduled_start?(0,I.format)(new Date(a.scheduled_start),"MMM d, h:mm a"):"Not scheduled"]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 shrink-0",onClick:e,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsx)(aj.ScrollArea,{className:"flex-1",style:{maxHeight:"calc(90vh - 240px)"},children:(0,b.jsxs)("div",{className:"p-4 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(ai.Label,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,b.jsx)(O.Calendar,{className:"h-4 w-4"}),"Select Date"]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(ah.Calendar,{disabled:a=>a<(0,ad.startOfDay)(new Date),mode:"single",onSelect:h,selected:g})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)(ai.Label,{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(W.Clock,{className:"h-4 w-4"}),"Select Time"]}),(0,b.jsx)(N.Button,{onClick:()=>l(!k),size:"sm",variant:"ghost",children:k?"Business Hours":"All Hours"})]}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:o.map(a=>(0,b.jsx)(N.Button,{className:(0,R.cn)("h-12 text-sm font-medium",i===a.time&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>j(a.time),variant:i===a.time?"default":"outline",children:a.label},a.time))})]}),g&&i&&n&&(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"New Schedule Preview"}),(0,b.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Date:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,I.format)(g,"EEEE, MMMM d, yyyy")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Start:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,I.format)(af(ag(g,parseInt(i.split(":")[1])),parseInt(i.split(":")[0])),"h:mm a")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"End:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,I.format)(n,"h:mm a")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Duration:"}),(0,b.jsxs)("span",{className:"font-medium text-foreground",children:[m,"h"]})]})]})]})]})}),(0,b.jsx)("div",{className:"border-t bg-muted/30 p-4 safe-bottom",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(N.Button,{className:"flex-1 h-12",onClick:e,size:"lg",variant:"outline",children:"Cancel"}),(0,b.jsx)(N.Button,{className:"flex-1 h-12",disabled:!g||!i,onClick:()=>{if(!a||!g||!i||!n)return;let[b,c]=i.split(":").map(Number),d=(0,ad.startOfDay)(g);af(d,b),ag(d,c),f(a,d,n),e()},size:"lg",variant:"default",children:"Confirm Reschedule"})]})})]})]})}var an=a.i(638446),ao=a.i(612658),ao=ao;a.i(839984);var ap=a.i(372712);function aq({job:a,isOpen:d,onClose:e,onConfirm:f}){let g=B(a=>a.technicians),h=B(a=>a.jobs),i=(0,c.useMemo)(()=>Array.from(g.values()),[g]),j=(0,c.useMemo)(()=>Array.from(h.values()),[h]),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(a?.assignedTechnicianId||null),o=(0,c.useMemo)(()=>i.map(a=>{let b=j.filter(b=>b.assignedTechnicianId===a.id),c=b.filter(a=>!["completed","cancelled","closed"].includes(a.status?.toLowerCase()||""));return{...a,totalJobs:b.length,activeJobs:c.length}}),[i,j]),p=(0,c.useMemo)(()=>{if(!k.trim())return o;let a=k.toLowerCase();return o.filter(b=>b.name.toLowerCase().includes(a))},[o,k]),q=(0,c.useMemo)(()=>[...p].sort((b,c)=>b.id===a?.assignedTechnicianId?-1:c.id===a?.assignedTechnicianId?1:b.activeJobs-c.activeJobs),[p,a]);return a?(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in",onClick:e}),(0,b.jsxs)("div",{className:(0,R.cn)("fixed bottom-0 left-0 right-0 z-50 bg-background rounded-t-2xl shadow-2xl","transform transition-transform duration-300 ease-out",d?"translate-y-0":"translate-y-full"),style:{maxHeight:"85vh"},children:[(0,b.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,b.jsx)("div",{className:"w-12 h-1 bg-muted-foreground/30 rounded-full"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pb-4 border-b",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Assign Technician"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.customer?.name||"Unknown Customer"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.title})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 shrink-0",onClick:e,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsx)("div",{className:"px-4 pt-4",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(P.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(ap.Input,{className:"h-11 pl-10 text-base",onChange:a=>l(a.target.value),placeholder:"Search technicians...",type:"search",value:k})]})}),a.assignedTechnicianId&&(0,b.jsx)("div",{className:"px-4 pt-3",children:(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-center gap-3 rounded-lg border-2 p-3 transition-all hover:border-orange-500/50 active:scale-98",null===m?"border-orange-500 bg-orange-50 dark:bg-orange-950/20":"border-border"),onClick:()=>n(null),type:"button",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900",children:(0,b.jsx)(ao.default,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:"text-base font-semibold",children:"Unassign Technician"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Remove technician from this job"})]}),null===m&&(0,b.jsx)(an.Check,{className:"h-5 w-5 text-orange-600 shrink-0"})]})}),(0,b.jsx)(aj.ScrollArea,{className:"flex-1",style:{maxHeight:"calc(85vh - 280px)"},children:(0,b.jsx)("div",{className:"p-4 space-y-2",children:0===q.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)(ao.default,{className:"h-12 w-12 text-muted-foreground/50 mb-3"}),(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"No technicians found"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Try a different search term"})]}):q.map(c=>{let d=m===c.id,e=a.assignedTechnicianId===c.id;return(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-center gap-3 rounded-lg border-2 p-3 transition-all hover:border-primary/50 active:scale-98",d?"border-primary bg-primary/5":"border-border"),onClick:()=>n(c.id),type:"button",children:[(0,b.jsx)(ab.Avatar,{className:"h-12 w-12",children:(0,b.jsx)(ab.AvatarFallback,{className:"text-sm font-medium",children:c.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)})}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("p",{className:"text-base font-semibold",children:c.name}),e&&(0,b.jsx)(ac.Badge,{className:"h-5 px-2 text-[9px]",variant:"secondary",children:"Current"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[c.activeJobs," active"]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:[c.totalJobs," total"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,b.jsx)("div",{className:"flex flex-col items-end",children:(0,b.jsx)("div",{className:(0,R.cn)("h-2 w-16 rounded-full bg-muted overflow-hidden"),children:(0,b.jsx)("div",{className:(0,R.cn)("h-full transition-all",0===c.activeJobs&&"bg-green-500",c.activeJobs>0&&c.activeJobs<=3&&"bg-blue-500",c.activeJobs>3&&c.activeJobs<=6&&"bg-yellow-500",c.activeJobs>6&&"bg-red-500"),style:{width:`${Math.min(c.activeJobs/10*100,100)}%`}})})}),d&&(0,b.jsx)(an.Check,{className:"h-5 w-5 text-primary"})]})]},c.id)})})}),(0,b.jsx)("div",{className:"border-t bg-muted/30 p-4 safe-bottom",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(N.Button,{className:"flex-1 h-12",onClick:e,size:"lg",variant:"outline",children:"Cancel"}),(0,b.jsx)(N.Button,{className:"flex-1 h-12",disabled:m===a.assignedTechnicianId,onClick:()=>{a&&(f(a,m),e())},size:"lg",variant:"default",children:null===m?"Unassign":"Assign Technician"})]})})]})]}):null}var ar=a.i(253520),as=a.i(976803),at=a.i(240716);let au=[{id:"unscheduled",label:"Unscheduled",icon:W.Clock,color:"bg-gray-500",borderColor:"border-gray-500",description:"No date/time assigned"},{id:"scheduled",label:"Scheduled",icon:O.Calendar,color:"bg-blue-500",borderColor:"border-blue-500",description:"Date and time confirmed"},{id:"dispatched",label:"Dispatched",icon:as.Truck,color:"bg-sky-500",borderColor:"border-sky-500",description:"Technician on the way"},{id:"arrived",label:"Arrived",icon:X.MapPin,color:"bg-emerald-400",borderColor:"border-emerald-400",description:"Technician at location"},{id:"in_progress",label:"In Progress",icon:Y.Navigation,color:"bg-amber-500 animate-pulse",borderColor:"border-amber-500",description:"Work actively underway"},{id:"closed",label:"Closed",icon:ar.CheckCircle,color:"bg-emerald-600",borderColor:"border-emerald-600",description:"Work completed, awaiting review"},{id:"completed",label:"Completed",icon:V.CheckCircle2,color:"bg-green-700",borderColor:"border-green-700",description:"Fully complete and approved"},{id:"cancelled",label:"Cancelled",icon:at.XCircle,color:"bg-red-500",borderColor:"border-red-500",description:"Job cancelled or abandoned"}];function av({job:a,isOpen:d,onClose:e,onConfirm:f}){let[g,h]=(0,c.useState)(a?.status?.toLowerCase()||null),i=a?.status?.toLowerCase()||"unscheduled",j=(a=>{switch(a?.toLowerCase()||"unscheduled"){case"unscheduled":case"cancelled":default:return["scheduled"];case"scheduled":return["dispatched","cancelled"];case"dispatched":return["arrived","scheduled","cancelled"];case"arrived":return["in_progress","dispatched","cancelled"];case"in_progress":return["closed","arrived"];case"closed":return["completed","in_progress"];case"completed":return[]}})(i);return a?(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in",onClick:e}),(0,b.jsxs)("div",{className:(0,R.cn)("fixed bottom-0 left-0 right-0 z-50 bg-background rounded-t-2xl shadow-2xl","transform transition-transform duration-300 ease-out",d?"translate-y-0":"translate-y-full"),style:{maxHeight:"85vh"},children:[(0,b.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,b.jsx)("div",{className:"w-12 h-1 bg-muted-foreground/30 rounded-full"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pb-4 border-b",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Change Status"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.customer?.name||"Unknown Customer"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground capitalize",children:["Current: ",i.replace(/_/g," ")]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 shrink-0",onClick:e,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsx)(aj.ScrollArea,{className:"flex-1",style:{maxHeight:"calc(85vh - 220px)"},children:(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[j.length>0&&(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2 uppercase tracking-wide",children:"Suggested Next Steps"})}),au.map(a=>{let c=g===a.id,d=i===a.id,e=j.includes(a.id),f=e&&!d,k=d||!e&&j.length>0,l=a.icon;return(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-start gap-3 rounded-lg border-2 p-4 transition-all text-left",k?"opacity-50 cursor-not-allowed":"hover:border-primary/50 active:scale-98",c&&!k&&"border-primary bg-primary/5",f&&!c&&"border-green-500/30 bg-green-50 dark:bg-green-950/20",d&&"border-muted-foreground bg-muted",!c&&!f&&!d&&"border-border"),disabled:k,onClick:()=>!k&&h(a.id),type:"button",children:[(0,b.jsx)("div",{className:(0,R.cn)("flex h-12 w-12 shrink-0 items-center justify-center rounded-full",a.color,k&&"opacity-50"),children:(0,b.jsx)(l,{className:"h-6 w-6 text-white"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("p",{className:"text-base font-semibold",children:a.label}),d&&(0,b.jsx)("span",{className:"text-[10px] px-2 py-0.5 bg-muted-foreground/20 rounded-full font-medium",children:"Current"}),f&&!c&&(0,b.jsx)("span",{className:"text-[10px] px-2 py-0.5 bg-green-500 text-white rounded-full font-medium",children:"Recommended"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]}),c&&!k&&(0,b.jsx)("div",{className:"flex shrink-0 items-center justify-center h-6 w-6 rounded-full bg-primary",children:(0,b.jsx)(ar.CheckCircle,{className:"h-4 w-4 text-primary-foreground"})})]},a.id)}),j.length>0&&(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2 uppercase tracking-wide",children:"Other Statuses"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"These transitions may not be typical for the current workflow"})]})]})}),(0,b.jsx)("div",{className:"border-t bg-muted/30 p-4 safe-bottom",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(N.Button,{className:"flex-1 h-12",onClick:e,size:"lg",variant:"outline",children:"Cancel"}),(0,b.jsx)(N.Button,{className:"flex-1 h-12",disabled:!g||g===i,onClick:()=>{a&&g&&(f(a,g),e())},size:"lg",variant:"default",children:"Update Status"})]})})]})]}):null}function aw({isOpen:a,onClose:d,job:e,onAction:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),m=(0,c.useRef)(null),n=(0,c.useCallback)(()=>{h(!0),setTimeout(()=>{d(),h(!1)},300)},[d]);(0,c.useEffect)(()=>{let b=a=>{m.current&&!m.current.contains(a.target)&&n()};return a&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[a,n]),(0,c.useEffect)(()=>{let b=a=>{"Escape"===a.key&&n()};return a&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a,n]),(0,c.useEffect)(()=>{a||(l(null),j(null))},[a]);let o=(0,c.useCallback)((a,b)=>{if("reschedule"===a){j(b),l("reschedule");return}if("reassign"===a){j(b),l("reassign");return}if("move_to_status"===a){j(b),l("status");return}f(a,b),n()},[f,n]),p=(0,c.useCallback)((a,b,c)=>{f("reschedule",a,b,c),l(null),j(null),n()},[f,n]),q=(0,c.useCallback)((a,b)=>{f("reassign",a,b),l(null),j(null),n()},[f,n]),r=(0,c.useCallback)((a,b)=>{f("move_to_status",a,b),l(null),j(null),n()},[f,n]),s=(0,c.useCallback)(()=>{l(null),j(null)},[]);if(!a&&!g||!e)return null;let t=e.status?.toLowerCase().replace(/ /g,"_")||"unscheduled",u=[];"scheduled"===t&&u.push("dispatch"),"dispatched"===t&&u.push("arrive"),"arrived"===t&&u.push("start"),"in_progress"===t&&u.push("complete"),u.push("reschedule","reassign","move_to_status"),"cancelled"!==t&&"completed"!==t&&u.push("cancel"),u.unshift("view_details");let v=e.customer?.name||"No Customer",w=e.location?.address?.street||"No location",x=e.startTime?(0,I.format)(new Date(e.startTime),"MMM d, h:mm a"):"Not scheduled",y=e.endTime?(0,I.format)(new Date(e.endTime),"h:mm a"):"",z=y?`${x} - ${y}`:x,A=e.assignments.find(a=>"primary"===a.role),B=A?.displayName?A.displayName.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"?",C=e.startTime&&e.endTime?Math.round((new Date(e.endTime).getTime()-new Date(e.startTime).getTime())/36e5):0,D={view_details:{icon:U.ArrowRight,label:"View Full Details"},dispatch:{icon:Y.Navigation,label:"Dispatch Job"},arrive:{icon:X.MapPin,label:"Mark as Arrived"},start:{icon:W.Clock,label:"Start Job"},complete:{icon:V.CheckCircle2,label:"Mark as Complete"},reschedule:{icon:O.Calendar,label:"Reschedule"},reassign:{icon:Q.Users,label:"Reassign Technician"},move_to_status:{icon:Z.Repeat,label:"Move to Status..."},cancel:{icon:$.Trash2,label:"Cancel Job",variant:"destructive"}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:(0,R.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",g?"animate-out fade-out duration-300":"animate-in fade-in duration-300")}),(0,b.jsxs)("div",{className:(0,R.cn)("safe-bottom fixed bottom-0 left-0 right-0 z-50 rounded-t-3xl border-t border-border bg-background shadow-2xl",g?"animate-out slide-out-to-bottom duration-300":"animate-in slide-in-from-bottom duration-300"),ref:m,children:[(0,b.jsx)("div",{className:"flex justify-center py-4",children:(0,b.jsx)("div",{className:"h-1.5 w-10 rounded-full bg-muted"})}),(0,b.jsxs)("div",{className:"max-h-[80vh] overflow-y-auto px-6 pb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Job Actions"}),(0,b.jsxs)(N.Button,{className:"h-9 w-9",onClick:n,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsxs)("div",{className:"mb-6 space-y-3 rounded-lg border bg-muted/50 p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-medium leading-tight",children:v}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:e.title||"Untitled Job"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(W.Clock,{className:"h-4 w-4 mt-0.5 shrink-0 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:z}),C>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[C," ",1===C?"hour":"hours"]})]})]}),"No location"!==w&&(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(X.MapPin,{className:"h-4 w-4 mt-0.5 shrink-0 text-muted-foreground"}),(0,b.jsx)("p",{children:w})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(_.User,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(ab.Avatar,{className:"h-6 w-6",children:[(0,b.jsx)(ab.AvatarImage,{alt:A?.displayName||"Unassigned",src:A?.avatar||void 0}),(0,b.jsx)(ab.AvatarFallback,{className:"text-xs",children:B})]}),(0,b.jsx)("span",{className:"font-medium",children:A?.displayName||"Unassigned"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(ac.Badge,{variant:"secondary",className:"capitalize",children:e.status||"Unscheduled"})})]}),e.description&&(0,b.jsx)("div",{className:"pt-2 border-t",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Actions"}),u.map(a=>{let c=D[a],d=c.icon,f="destructive"===c.variant;return(0,b.jsxs)(N.Button,{className:(0,R.cn)("h-14 w-full justify-start gap-3 text-base font-medium",f&&"text-destructive hover:text-destructive"),onClick:()=>o(a,e),variant:f?"ghost":"outline",children:[(0,b.jsx)(d,{className:"h-5 w-5"}),c.label]},a)})]})]})]}),(0,b.jsx)(am,{isOpen:"reschedule"===k,job:i,onClose:s,onConfirm:p}),(0,b.jsx)(aq,{isOpen:"reassign"===k,job:i,onClose:s,onConfirm:q}),(0,b.jsx)(av,{isOpen:"status"===k,job:i,onClose:s,onConfirm:r})]})}let ax={unscheduled:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",label:"Unscheduled"},scheduled:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",label:"Scheduled"},dispatched:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300",label:"Dispatched"},arrived:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",label:"Arrived"},in_progress:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-300",label:"In Progress"},closed:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",label:"Closed"},completed:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-emerald-700 dark:text-emerald-300",label:"Completed"},cancelled:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",label:"Cancelled"}};function ay({job:a,onClick:c,className:d,showTechnician:e=!0,showDate:f=!0}){let g=ax[a.status?.toLowerCase().replace(/ /g,"_")||"unscheduled"]||ax.unscheduled,h=a.startTime?(0,I.format)(new Date(a.startTime),"h:mm a"):"Not scheduled";a.endTime&&(0,I.format)(new Date(a.endTime),"h:mm a"),a.startTime&&(0,I.format)(new Date(a.startTime),"MMM d");let i=a.assignments.find(a=>"primary"===a.role),j=i?.displayName?i.displayName.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"?",k=a.customer?.name||"No Customer",l=a.location?.address?.street||"No location";return(0,b.jsxs)("button",{className:(0,R.cn)("group relative flex w-full items-center gap-3 rounded-lg border bg-card p-3 text-left transition-all","min-h-[64px]","hover:border-primary/30 hover:bg-primary/5 hover:shadow-sm","active:scale-[0.99]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",d),onClick:c,type:"button",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center shrink-0 w-16 text-center",children:[(0,b.jsx)("span",{className:"text-sm font-semibold leading-tight",children:"Not scheduled"===h?"--:--":(0,I.format)(new Date(a.startTime),"h:mm")}),(0,b.jsx)("span",{className:"text-[0.65rem] text-muted-foreground uppercase",children:"Not scheduled"===h?"":(0,I.format)(new Date(a.startTime),"a")})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 space-y-0.5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold leading-tight truncate",children:k}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.title||"Untitled Job"}),"No location"!==l&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[0.65rem] text-muted-foreground",children:[(0,b.jsx)(X.MapPin,{className:"h-2.5 w-2.5"}),(0,b.jsx)("span",{className:"truncate",children:l})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[(0,b.jsx)(ac.Badge,{className:(0,R.cn)("text-[0.65rem] font-medium h-4 px-1.5",g.bg,g.text),variant:"secondary",children:g.label}),e&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(ab.Avatar,{className:"h-4 w-4",children:[(0,b.jsx)(ab.AvatarImage,{alt:i?.displayName||"Unassigned",src:i?.avatar||void 0}),(0,b.jsx)(ab.AvatarFallback,{className:"text-[0.5rem] font-medium",children:j})]}),(0,b.jsx)("span",{className:"text-[0.65rem] text-muted-foreground max-w-[60px] truncate",children:i?.displayName||"Unassigned"})]})]})]})}var az=a.i(349669),aA=a.i(638727),aB=a.i(556253),aC=a.i(856856),aD=a.i(220578);a.i(799390);var aE=a.i(985943);function aF({isOpen:a,onClose:d,onJobSelect:e}){let[f,g]=(0,c.useState)(""),h=B(a=>a.jobs),i=(0,c.useMemo)(()=>Array.from(h.values()),[h]),j=(0,c.useMemo)(()=>{if(!f.trim())return[];let a=f.toLowerCase();return i.filter(b=>!!((b.customer?.name?.toLowerCase()||"").includes(a)||(b.title?.toLowerCase()||"").includes(a)||(b.location?.address?.street?.toLowerCase()||"").includes(a)||(b.jobNumber?.toString().toLowerCase()||"").includes(a)))},[i,f]);return(0,b.jsx)(aE.Sheet,{open:a,onOpenChange:d,children:(0,b.jsxs)(aE.SheetContent,{side:"top",className:"h-[90vh] flex flex-col",children:[(0,b.jsx)(aE.SheetHeader,{children:(0,b.jsx)(aE.SheetTitle,{children:"Search Jobs"})}),(0,b.jsxs)("div",{className:"relative mt-4",children:[(0,b.jsx)(P.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(ap.Input,{autoFocus:!0,className:"pl-9 pr-9",onChange:a=>g(a.target.value),placeholder:"Search by customer, job title, location...",type:"search",value:f}),f&&(0,b.jsxs)(N.Button,{className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2 p-0",onClick:()=>{g("")},size:"sm",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Clear search"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto mt-4",children:f.trim()?0===j.length?(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(P.Search,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-20"}),(0,b.jsxs)("p",{className:"mt-4 text-sm text-muted-foreground",children:['No jobs found for "',f,'"']})]})}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:[j.length," ",1===j.length?"job":"jobs"," found"]}),j.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>{e(a),d()},showDate:!0,showTechnician:!0},a.id))]}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(P.Search,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-20"}),(0,b.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Start typing to search jobs"})]})})})]})})}let aG=[{value:"scheduled",label:"Scheduled",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},{value:"dispatched",label:"Dispatched",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},{value:"arrived",label:"Arrived",color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"},{value:"in_progress",label:"In Progress",color:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}];function aH({isOpen:a,onClose:d,activeFilters:e,onApplyFilters:f}){let[g,h]=(0,c.useState)(e.statuses),[i,j]=(0,c.useState)(e.technicianIds),[k,l]=(0,c.useState)(e.showUnassignedOnly),m=B(a=>a.technicians),n=(0,c.useMemo)(()=>Array.from(m.values()),[m]),o=g.length>0||i.length>0||k;return(0,b.jsx)(aE.Sheet,{open:a,onOpenChange:d,children:(0,b.jsxs)(aE.SheetContent,{side:"right",className:"w-[300px] sm:w-[400px] flex flex-col",children:[(0,b.jsx)(aE.SheetHeader,{children:(0,b.jsxs)(aE.SheetTitle,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Filter Jobs"}),(0,b.jsx)(N.Button,{className:"h-8 w-8 p-0",onClick:d,size:"icon",variant:"ghost",children:(0,b.jsx)(aa.X,{className:"h-4 w-4"})})]})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto py-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(ai.Label,{className:"text-sm font-semibold",children:"Status"}),(0,b.jsx)("div",{className:"space-y-2",children:aG.map(a=>(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-center justify-between rounded-lg border p-3 text-left transition-colors",g.includes(a.value)?"border-primary bg-primary/5":"border-border hover:bg-muted/50"),onClick:()=>{var b;return b=a.value,void h(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},type:"button",children:[(0,b.jsx)(ac.Badge,{className:(0,R.cn)("text-xs",a.color),variant:"secondary",children:a.label}),g.includes(a.value)&&(0,b.jsx)(an.Check,{className:"h-4 w-4 text-primary"})]},a.value))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(ai.Label,{className:"text-sm font-semibold",children:"Technician"}),(0,b.jsx)("div",{className:"space-y-2",children:n.map(a=>{let c=a.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2);return(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-center justify-between rounded-lg border p-3 text-left transition-colors",i.includes(a.id)?"border-primary bg-primary/5":"border-border hover:bg-muted/50"),onClick:()=>{var b;return b=a.id,void j(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(ab.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(ab.AvatarImage,{alt:a.name,src:a.avatar||void 0}),(0,b.jsx)(ab.AvatarFallback,{className:"text-xs",children:c})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:a.name})]}),i.includes(a.id)&&(0,b.jsx)(an.Check,{className:"h-4 w-4 text-primary"})]},a.id)})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(ai.Label,{className:"text-sm font-semibold",children:"Special Filters"}),(0,b.jsxs)("button",{className:(0,R.cn)("flex w-full items-center justify-between rounded-lg border p-3 text-left transition-colors",k?"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20":"border-border hover:bg-muted/50"),onClick:()=>l(!k),type:"button",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Show unassigned only"}),k&&(0,b.jsx)(an.Check,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})]})]})]}),(0,b.jsxs)("div",{className:"shrink-0 space-y-2 border-t pt-4",children:[o&&(0,b.jsx)(N.Button,{className:"w-full",onClick:()=>{h([]),j([]),l(!1)},size:"sm",variant:"outline",children:"Clear All Filters"}),(0,b.jsx)(N.Button,{className:"w-full",onClick:()=>{f({statuses:g,technicianIds:i,showUnassignedOnly:k}),d()},size:"default",children:"Apply Filters"})]})]})})}function aI({onJobSelect:a}){let d=(0,f.useRouter)(),{viewMode:e,setViewMode:h}=(0,g.useScheduleViewStore)(),i=B(a=>a.jobs),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)({statuses:[],technicianIds:[],showUnassignedOnly:!1}),p=(0,c.useMemo)(()=>{let a=Array.from(i.values()),b=new Date;b.setHours(0,0,0,0);let c=a.filter(a=>{let c=new Date(a.startTime);return c.setHours(0,0,0,0),c.getTime()===b.getTime()});return{total:c.length,completed:c.filter(a=>"completed"===a.status).length,inProgress:c.filter(a=>"in_progress"===a.status||"in-progress"===a.status).length,unassigned:c.filter(a=>a.isUnassigned).length}},[i]),q=a=>{h(a)},r=n.statuses.length+n.technicianIds.length+ +!!n.showUnassignedOnly;return(0,b.jsxs)("div",{className:"safe-top sticky top-0 z-35 border-b bg-background/95 backdrop-blur-sm supports-[backdrop-filter]:bg-background/80",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-lg border p-1",children:[(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",onClick:()=>q("day"),size:"sm",variant:"day"===e?"secondary":"ghost",children:[(0,b.jsx)(O.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Day view"})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",onClick:()=>q("week"),size:"sm",variant:"week"===e?"secondary":"ghost",children:[(0,b.jsx)(aC.LayoutGrid,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Week view"})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",onClick:()=>q("list"),size:"sm",variant:"list"===e?"secondary":"ghost",children:[(0,b.jsx)(aD.List,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"List view"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsxs)(aE.Sheet,{children:[(0,b.jsx)(aE.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",size:"sm",variant:"ghost",children:[(0,b.jsx)(aB.BarChart3,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"View stats"})]})}),(0,b.jsxs)(aE.SheetContent,{side:"bottom",className:"h-[300px]",children:[(0,b.jsx)(aE.SheetHeader,{children:(0,b.jsx)(aE.SheetTitle,{children:"Today's Stats"})}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:p.total}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Jobs"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:p.completed}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:p.inProgress}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:p.unassigned}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unassigned"})]})]})]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",onClick:()=>k(!0),size:"sm",variant:"ghost",children:[(0,b.jsx)(P.Search,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Search jobs"})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0 relative",onClick:()=>m(!0),size:"sm",variant:"ghost",children:[(0,b.jsx)(az.Filter,{className:"h-4 w-4"}),r>0&&(0,b.jsx)(ac.Badge,{className:"absolute -top-1 -right-1 h-4 min-w-4 p-0 text-[0.6rem]",variant:"destructive",children:r}),(0,b.jsx)("span",{className:"sr-only",children:"Filter jobs"})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 p-0",onClick:()=>{d.push("/dashboard/work/jobs/new")},size:"sm",variant:"default",children:[(0,b.jsx)(aA.Plus,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Create job"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto px-4 pb-2 scrollbar-none",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full border bg-muted/50 px-3 py-1 text-xs whitespace-nowrap",children:[(0,b.jsx)("span",{className:"font-semibold",children:p.total}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total"})]}),p.completed>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full border border-green-200 bg-green-50 px-3 py-1 text-xs whitespace-nowrap dark:border-green-900 dark:bg-green-950",children:[(0,b.jsx)("span",{className:"font-semibold text-green-700 dark:text-green-300",children:p.completed}),(0,b.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"Done"})]}),p.inProgress>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full border border-orange-200 bg-orange-50 px-3 py-1 text-xs whitespace-nowrap dark:border-orange-900 dark:bg-orange-950",children:[(0,b.jsx)("span",{className:"font-semibold text-orange-700 dark:text-orange-300",children:p.inProgress}),(0,b.jsx)("span",{className:"text-orange-600 dark:text-orange-400",children:"Active"})]}),p.unassigned>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full border border-yellow-200 bg-yellow-50 px-3 py-1 text-xs whitespace-nowrap dark:border-yellow-900 dark:bg-yellow-950",children:[(0,b.jsx)("span",{className:"font-semibold text-yellow-700 dark:text-yellow-300",children:p.unassigned}),(0,b.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Unassigned"})]})]}),(0,b.jsx)(aF,{isOpen:j,onClose:()=>k(!1),onJobSelect:b=>{a&&a(b)}}),(0,b.jsx)(aH,{activeFilters:n,isOpen:l,onApplyFilters:a=>{o(a)},onClose:()=>m(!1)})]})}function aJ({isOpen:a,onClose:d,currentDate:e,onDateSelect:f}){let[g,h]=(0,c.useState)(e),i=()=>{h(e),d()};return(0,b.jsx)(aE.Sheet,{open:a,onOpenChange:i,children:(0,b.jsxs)(aE.SheetContent,{side:"bottom",className:"h-[500px] flex flex-col",children:[(0,b.jsx)(aE.SheetHeader,{children:(0,b.jsxs)(aE.SheetTitle,{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(O.Calendar,{className:"h-5 w-5"}),"Select Date"]}),(0,b.jsxs)(N.Button,{className:"h-8 w-8 p-0",onClick:i,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-y-auto py-4",children:(0,b.jsx)(ah.Calendar,{className:"rounded-md border",mode:"single",onSelect:a=>{a&&h(a)},selected:g})}),(0,b.jsx)("div",{className:"shrink-0 space-y-2 border-t pt-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(N.Button,{className:"flex-1",onClick:()=>{let a=new Date;h(a),f(a),d()},size:"default",variant:"outline",children:"Today"}),(0,b.jsxs)(N.Button,{className:"flex-1",onClick:()=>{f(g),d()},size:"default",children:["Go to ",(0,I.format)(g,"MMM d, yyyy")]})]})})]})})}var aK=a.i(156916);function aL(){let d=B(a=>a.jobs),e=B(a=>a.technicians),{currentDate:f,goToToday:h,navigatePrevious:i,navigateNext:j,setCurrentDate:k}=(0,g.useScheduleViewStore)(),l=(0,c.useMemo)(()=>Array.from(d.values()),[d]),m=(0,c.useMemo)(()=>Array.from(e.values()),[e]),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(new Set),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),v=(0,c.useMemo)(()=>l.filter(a=>{if(!a.startTime)return!1;let b="string"==typeof a.startTime?new Date(a.startTime):a.startTime;return(0,J.isSameDay)(b,f)}),[l,f]),w=(0,c.useMemo)(()=>{let a=new Map;return m.forEach(b=>{a.set(b.id,[])}),v.forEach(b=>{if(b.technicianId){let c=a.get(b.technicianId)||[];c.push(b),a.set(b.technicianId,c)}}),a.forEach(a=>{a.sort((a,b)=>a.startTime?b.startTime?new Date(a.startTime).getTime()-new Date(b.startTime).getTime():-1:1)}),a},[v,m]),x=(0,c.useMemo)(()=>v.filter(a=>a.isUnassigned),[v]),y=(0,c.useCallback)(a=>{q(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),z=(0,c.useCallback)(async(b,c,...d)=>{o(null);try{switch(b){case"view_details":window.location.href=`/dashboard/work/jobs/${c.id}`;break;case"dispatch":case"arrive":case"start":case"complete":case"move_to_status":{let{updateJobStatus:e}=await a.A(965863),f="move_to_status"===b?d[0]:b,g=await e(c.id,{dispatch:"dispatched",arrive:"arrived",start:"in_progress",complete:"completed"}[b]||f);g.success?(aK.toast.success(`Job ${"move_to_status"===b?"moved to "+f:b+"ed"}`),window.location.reload()):aK.toast.error(g.error||"Failed to update job status");break}case"reschedule":{let[b,e]=d,{updateJob:f}=await a.A(965863),g=await f({jobId:c.id,scheduled_start:b.toISOString(),scheduled_end:e.toISOString()});g.success?(aK.toast.success("Job rescheduled"),window.location.reload()):aK.toast.error(g.error||"Failed to reschedule job");break}case"reassign":{let b=d[0];if(b){let{assignJobToTechnician:d}=await a.A(959763),e=await d(c.id,b);e.success?(aK.toast.success("Job reassigned"),window.location.reload()):aK.toast.error(e.error||"Failed to reassign job")}else aK.toast.info("Unassigning technician coming soon");break}case"cancel":{let{cancelJobAndAppointment:b}=await a.A(959763),d=await b(c.id);d.success?(aK.toast.success("Job cancelled"),window.location.reload()):aK.toast.error(d.error||"Failed to cancel job");break}default:console.warn("Unknown action:",b)}}catch(a){console.error("Job action error:",a),aK.toast.error("An error occurred")}},[]);(0,I.format)(f,"EEEE, MMM d, yyyy");let A=(0,J.isSameDay)(f,new Date);return(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,b.jsx)(aI,{onJobSelect:o}),(0,b.jsxs)("div",{className:"shrink-0 border-b bg-background",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,b.jsxs)(N.Button,{className:"h-9 w-9",onClick:i,size:"icon",variant:"ghost",children:[(0,b.jsx)(M.ChevronLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Previous day"})]}),(0,b.jsxs)("button",{className:"flex flex-col items-center transition-colors hover:text-primary active:scale-95",onClick:()=>u(!0),type:"button",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-muted-foreground",children:(0,I.format)(f,"EEEE")}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:(0,I.format)(f,"MMM d, yyyy")})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9",onClick:j,size:"icon",variant:"ghost",children:[(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Next day"})]})]}),!A&&(0,b.jsx)("div",{className:"px-4 pb-3",children:(0,b.jsx)(N.Button,{className:"w-full",onClick:h,size:"sm",variant:"outline",children:"Go to Today"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===v.length?(0,b.jsx)(T,{actionLabel:"View Full Schedule",onAction:()=>{window.location.href="/dashboard/schedule"},variant:"no_jobs_today"}):(0,b.jsxs)("div",{className:"space-y-0",children:[m.map(a=>{let c=w.get(a.id)||[],d=p.has(a.id),e=c.length>0;return(0,b.jsxs)("div",{className:"border-b last:border-b-0",children:[(0,b.jsxs)("button",{className:"flex w-full items-center justify-between bg-muted/30 p-4 text-left transition-colors hover:bg-muted/50 active:bg-muted",onClick:()=>y(a.id),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[d?(0,b.jsx)(K.ChevronDown,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.length," ",1===c.length?"job":"jobs"]})]})]}),e&&(0,b.jsx)("div",{className:"flex h-6 min-w-6 items-center justify-center rounded-full bg-primary/10 px-2 text-xs font-semibold text-primary",children:c.length})]}),d&&(0,b.jsx)("div",{className:"bg-background px-4 pb-4",children:0===c.length?(0,b.jsx)("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No jobs scheduled for today"}):(0,b.jsx)("div",{className:"space-y-1.5",children:c.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>o(a),showDate:!1,showTechnician:!1},a.id))})})]},a.id)}),x.length>0&&(0,b.jsxs)("div",{className:"border-t",children:[(0,b.jsxs)("button",{className:"flex w-full items-center justify-between bg-yellow-50 dark:bg-yellow-950/20 p-4 text-left transition-colors hover:bg-yellow-100 dark:hover:bg-yellow-950/30 active:bg-yellow-100 dark:active:bg-yellow-950/30",onClick:()=>s(!r),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[r?(0,b.jsx)(K.ChevronDown,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:"ðŸ“‹ Unassigned"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[x.length," ",1===x.length?"job":"jobs"," need assignment"]})]})]}),(0,b.jsx)("div",{className:"flex h-6 min-w-6 items-center justify-center rounded-full bg-yellow-500 dark:bg-yellow-600 px-2 text-xs font-semibold text-white",children:x.length})]}),r&&(0,b.jsx)("div",{className:"bg-background px-4 pb-4",children:(0,b.jsx)("div",{className:"space-y-1.5",children:x.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>o(a),showDate:!1,showTechnician:!0},a.id))})})]})]})}),(0,b.jsx)(aw,{isOpen:null!==n,job:n,onAction:z,onClose:()=>o(null)}),(0,b.jsx)(aJ,{currentDate:f,isOpen:t,onClose:()=>u(!1),onDateSelect:a=>{k(a),u(!1)}})]})}let aM=[{id:"unscheduled",label:"Unscheduled",color:"bg-gray-500"},{id:"scheduled",label:"Scheduled",color:"bg-blue-500"},{id:"dispatched",label:"Dispatched",color:"bg-yellow-500"},{id:"arrived",label:"Arrived",color:"bg-purple-500"},{id:"in_progress",label:"In Progress",color:"bg-orange-500"},{id:"closed",label:"Closed",color:"bg-green-500"},{id:"completed",label:"Completed",color:"bg-emerald-500"},{id:"cancelled",label:"Cancelled",color:"bg-red-500"}];function aN(){let d=B(a=>a.jobs),e=(0,c.useMemo)(()=>Array.from(d.values()),[d]),[f,g]=(0,c.useState)(2),[h,i]=(0,c.useState)(null),j=aM[f],k=(0,c.useMemo)(()=>e.filter(a=>(a.status||"unscheduled").toLowerCase().replace(/ /g,"_")===j.id),[e,j.id]),l=(0,c.useMemo)(()=>[...k].sort((a,b)=>a.scheduled_start?b.scheduled_start?new Date(a.scheduled_start).getTime()-new Date(b.scheduled_start).getTime():-1:1),[k]),m=(0,c.useCallback)(()=>{g(a=>Math.max(0,a-1))},[]),n=(0,c.useCallback)(()=>{g(a=>Math.min(aM.length-1,a+1))},[]),o=(0,c.useCallback)(a=>{g(a)},[]),p=(0,c.useCallback)(async(b,c,...d)=>{i(null);try{switch(b){case"view_details":window.location.href=`/dashboard/work/jobs/${c.id}`;break;case"dispatch":case"arrive":case"start":case"complete":case"move_to_status":{let{updateJobStatus:e}=await a.A(965863),f="move_to_status"===b?d[0]:b,g=await e(c.id,{dispatch:"dispatched",arrive:"arrived",start:"in_progress",complete:"completed"}[b]||f);g.success?(aK.toast.success(`Job ${"move_to_status"===b?"moved to "+f:b+"ed"}`),window.location.reload()):aK.toast.error(g.error||"Failed to update job status");break}case"reschedule":{let[b,e]=d,{updateJob:f}=await a.A(965863),g=await f({jobId:c.id,scheduled_start:b.toISOString(),scheduled_end:e.toISOString()});g.success?(aK.toast.success("Job rescheduled"),window.location.reload()):aK.toast.error(g.error||"Failed to reschedule job");break}case"reassign":{let b=d[0];if(b){let{assignJobToTechnician:d}=await a.A(959763),e=await d(c.id,b);e.success?(aK.toast.success("Job reassigned"),window.location.reload()):aK.toast.error(e.error||"Failed to reassign job")}else aK.toast.info("Unassigning technician coming soon");break}case"cancel":{let{cancelJobAndAppointment:b}=await a.A(959763),d=await b(c.id);d.success?(aK.toast.success("Job cancelled"),window.location.reload()):aK.toast.error(d.error||"Failed to cancel job");break}default:console.warn("Unknown action:",b)}}catch(a){console.error("Job action error:",a),aK.toast.error("An error occurred")}},[]),q=f<aM.length-1;return(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"shrink-0 border-b bg-background p-4",children:[(0,b.jsx)("div",{className:"mb-4 flex items-center justify-center gap-2",children:aM.map((a,c)=>{let d=c===f;return(0,b.jsxs)("button",{className:"transition-transform hover:scale-125 active:scale-110",onClick:()=>o(c),type:"button",children:[(0,b.jsx)("div",{className:`h-2 w-2 rounded-full transition-all ${d?`${a.color} scale-125`:"bg-muted-foreground/30"}`}),(0,b.jsx)("span",{className:"sr-only",children:a.label})]},a.id)})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(N.Button,{className:"h-9 w-9",disabled:!(f>0),onClick:m,size:"icon",variant:"ghost",children:[(0,b.jsx)(M.ChevronLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Previous status"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`mb-1 h-1 w-16 rounded-full ${j.color}`}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:j.label}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[l.length," ",1===l.length?"job":"jobs"]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9",disabled:!q,onClick:n,size:"icon",variant:"ghost",children:[(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Next status"})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===l.length?(0,b.jsx)("div",{className:"flex h-full items-center justify-center p-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:['No jobs with status "',j.label,'"']}),q&&(0,b.jsxs)(N.Button,{className:"mt-4",onClick:n,size:"sm",variant:"outline",children:["View ",aM[f+1].label]})]})}):(0,b.jsx)("div",{className:"space-y-2 p-4",children:l.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>i(a),showDate:!0,showTechnician:!0},a.id))})}),(0,b.jsx)(aw,{isOpen:null!==h,job:h,onAction:p,onClose:()=>i(null)})]})}var aO=a.i(696922),aP=a.i(520821);function aQ(a,b){return(0,J.isSameDay)(a,(0,l.addDays)((0,aP.constructNow)(b?.in||a),1),b)}var aR=a.i(769739),aS=a.i(788839);let aT=/[T ]/,aU=/[Z ]/i,aV=/([Z+-].*)$/,aW=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,aX=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,aY=/^([+-])(\d{2})(?::?(\d{2}))?$/;function aZ(a){return a?parseInt(a):1}function a$(a){return a&&parseFloat(a.replace(",","."))||0}let a_=[31,null,31,30,31,30,31,31,30,31,30,31];function a0(a){return a%400==0||a%4==0&&a%100!=0}a.i(40744);var a1=a.i(419573);function a2({statusOptions:a,technicianOptions:c,activeFilters:d,onToggleStatus:e,onToggleTechnician:f,onClearAll:g,onOpenFilters:h,className:i}){let j=d.statuses.length>0||d.technicians.length>0||d.dateRange,k=d.statuses.length+d.technicians.length+ +!!d.dateRange;return(0,b.jsxs)("div",{className:(0,R.cn)("flex items-center gap-2 overflow-x-auto pb-2",i),children:[h&&(0,b.jsxs)(N.Button,{className:"h-9 shrink-0 gap-2",onClick:h,size:"sm",variant:"outline",children:[(0,b.jsx)(az.Filter,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Filters"}),k>0&&(0,b.jsx)(ac.Badge,{className:"ml-1 h-5 min-w-5 px-1.5 text-xs",variant:"secondary",children:k})]}),a.map(a=>{let c=d.statuses.includes(a.id);return(0,b.jsxs)(ac.Badge,{className:(0,R.cn)("h-9 cursor-pointer shrink-0 gap-1.5 px-3 text-sm font-medium transition-all",c?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),onClick:()=>e(a.id),variant:"secondary",children:[(0,b.jsx)("span",{children:a.label}),void 0!==a.count&&(0,b.jsx)("span",{className:(0,R.cn)("rounded-full px-1.5 py-0.5 text-xs font-semibold",c?"bg-primary-foreground/20 text-primary-foreground":"bg-muted text-muted-foreground"),children:a.count})]},a.id)}),c.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-6 w-px bg-border shrink-0"}),c.map(a=>{let c=d.technicians.includes(a.id);return(0,b.jsxs)(ac.Badge,{className:(0,R.cn)("h-9 cursor-pointer shrink-0 gap-1.5 px-3 text-sm font-medium transition-all",c?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),onClick:()=>f(a.id),variant:"secondary",children:[(0,b.jsx)("span",{children:a.label}),void 0!==a.count&&(0,b.jsx)("span",{className:(0,R.cn)("rounded-full px-1.5 py-0.5 text-xs font-semibold",c?"bg-primary-foreground/20 text-primary-foreground":"bg-muted text-muted-foreground"),children:a.count})]},a.id)})]}),j&&(0,b.jsxs)(N.Button,{className:"h-9 shrink-0 gap-2",onClick:g,size:"sm",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Clear"})]})]})}function a3(){let d=B(a=>a.jobs),e=B(a=>a.technicians),f=(0,c.useMemo)(()=>Array.from(d.values()),[d]),g=(0,c.useMemo)(()=>Array.from(e.values()),[e]),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("date"),[l,m]=(0,c.useState)("start_time"),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({statuses:[],technicians:[]}),r=(0,c.useMemo)(()=>{let a=f.reduce((a,b)=>{let c=b.status||"unscheduled";return a[c]=(a[c]||0)+1,a},{});return[{id:"scheduled",label:"Scheduled",count:a.scheduled||0},{id:"dispatched",label:"Dispatched",count:a.dispatched||0},{id:"arrived",label:"Arrived",count:a.arrived||0},{id:"in_progress",label:"In Progress",count:a.in_progress||0},{id:"completed",label:"Completed",count:a.completed||0}]},[f]),s=(0,c.useMemo)(()=>g.map(a=>{let b=f.filter(b=>b.assignedTechnicianId===a.id).length;return{id:a.id,label:a.name,count:b}}),[g,f]),t=(0,c.useMemo)(()=>{let a=[...f];if(h.trim()){let b=h.toLowerCase();a=a.filter(a=>a.customer?.name.toLowerCase().includes(b)||a.title?.toLowerCase().includes(b)||a.property?.address?.toLowerCase().includes(b)||a.description?.toLowerCase().includes(b))}return p.statuses.length>0&&(a=a.filter(a=>p.statuses.includes(a.status?.toLowerCase()||"unscheduled"))),p.technicians.length>0&&(a=a.filter(a=>!!a.assignedTechnicianId&&p.technicians.includes(a.assignedTechnicianId))),a},[f,h,p]),u=(0,c.useMemo)(()=>{let a=[...t];switch(l){case"start_time":a.sort((a,b)=>a.scheduled_start?b.scheduled_start?new Date(a.scheduled_start).getTime()-new Date(b.scheduled_start).getTime():-1:1);break;case"customer":a.sort((a,b)=>{let c=a.customer?.name||"",d=b.customer?.name||"";return c.localeCompare(d)});break;case"status":a.sort((a,b)=>{let c=a.status||"unscheduled",d=b.status||"unscheduled";return c.localeCompare(d)})}return a},[t,l]),v=(0,c.useMemo)(()=>{let a={};return u.forEach(b=>{let c="";switch(j){case"date":if(b.scheduled_start){let a="string"==typeof b.scheduled_start?function(a,b){let c,d,e=()=>(0,aS.constructFrom)(void 0,NaN),f=function(a){let b,c={},d=a.split(aT);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],aU.test(c.date)&&(c.date=a.split(aU)[0],b=a.substr(c.date.length,a.length))),b){let a=aV.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(f.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(f.date,(void 0)??2);c=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(null===b)return new Date(NaN);let m=a.match(aW);if(!m)return new Date(NaN);let n=!!m[4],o=aZ(m[1]),p=aZ(m[2])-1,q=aZ(m[3]),r=aZ(m[4]),s=aZ(m[5])-1;if(n){let a,h;return(c=r,d=s,c>=1&&c<=53&&d>=0&&d<=6)?(e=b,f=r,g=s,(a=new Date(0)).setUTCFullYear(e,0,4),h=a.getUTCDay()||7,a.setUTCDate(a.getUTCDate()+((f-1)*7+g+1-h)),a):new Date(NaN)}{let a=new Date(0);return(h=b,i=p,j=q,i>=0&&i<=11&&j>=1&&j<=(a_[i]||(a0(h)?29:28))&&(k=b,(l=o)>=1&&l<=(a0(k)?366:365)))?(a.setUTCFullYear(b,p,Math.max(o,q)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(+c))return e();let g=+c,h=0;if(f.time&&isNaN(h=function(a){var b,c,d;let e=a.match(aX);if(!e)return NaN;let f=a$(e[1]),g=a$(e[2]),h=a$(e[3]);return(b=f,c=g,d=h,24===b?0===c&&0===d:d>=0&&d<60&&c>=0&&c<60&&b>=0&&b<25)?f*aR.millisecondsInHour+g*aR.millisecondsInMinute+1e3*h:NaN}(f.time)))return e();if(f.timezone){if(isNaN(d=function(a){var b;if("Z"===a)return 0;let c=a.match(aY);if(!c)return 0;let d="+"===c[1]?-1:1,e=parseInt(c[2]),f=c[3]&&parseInt(c[3])||0;return(b=f)>=0&&b<=59?d*(e*aR.millisecondsInHour+f*aR.millisecondsInMinute):NaN}(f.timezone)))return e()}else{let a=new Date(g+h),b=(0,ae.toDate)(0,void 0);return b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),b.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),b}return(0,ae.toDate)(g+h+d,void 0)}(b.scheduled_start):new Date(b.scheduled_start);c=(0,aO.isToday)(a)?"Today":aQ(a)?"Tomorrow":(0,I.format)(a,"EEEE, MMM d")}else c="Unscheduled";break;case"technician":c=b.assignedTechnician?.name||"Unassigned";break;case"status":c=b.status||"Unscheduled";break;case"customer":c=b.customer?.name||"No Customer";break;default:c="All Jobs"}a[c]||(a[c]=[]),a[c].push(b)}),a},[u,j]),w=(0,c.useCallback)(a=>{q(b=>({...b,statuses:b.statuses.includes(a)?b.statuses.filter(b=>b!==a):[...b.statuses,a]}))},[]),x=(0,c.useCallback)(a=>{q(b=>({...b,technicians:b.technicians.includes(a)?b.technicians.filter(b=>b!==a):[...b.technicians,a]}))},[]),y=(0,c.useCallback)(()=>{q({statuses:[],technicians:[]}),i("")},[]),z=(0,c.useCallback)(async(b,c,...d)=>{o(null);try{switch(b){case"view_details":window.location.href=`/dashboard/work/jobs/${c.id}`;break;case"dispatch":case"arrive":case"start":case"complete":case"move_to_status":{let{updateJobStatus:e}=await a.A(965863),f="move_to_status"===b?d[0]:b,g=await e(c.id,{dispatch:"dispatched",arrive:"arrived",start:"in_progress",complete:"completed"}[b]||f);g.success?(aK.toast.success(`Job ${"move_to_status"===b?"moved to "+f:b+"ed"}`),window.location.reload()):aK.toast.error(g.error||"Failed to update job status");break}case"reschedule":{let[b,e]=d,{updateJob:f}=await a.A(965863),g=await f({jobId:c.id,scheduled_start:b.toISOString(),scheduled_end:e.toISOString()});g.success?(aK.toast.success("Job rescheduled"),window.location.reload()):aK.toast.error(g.error||"Failed to reschedule job");break}case"reassign":{let b=d[0];if(b){let{assignJobToTechnician:d}=await a.A(959763),e=await d(c.id,b);e.success?(aK.toast.success("Job reassigned"),window.location.reload()):aK.toast.error(e.error||"Failed to reassign job")}else aK.toast.info("Unassigning technician coming soon");break}case"cancel":{let{cancelJobAndAppointment:b}=await a.A(959763),d=await b(c.id);d.success?(aK.toast.success("Job cancelled"),window.location.reload()):aK.toast.error(d.error||"Failed to cancel job");break}default:console.warn("Unknown action:",b)}}catch(a){console.error("Job action error:",a),aK.toast.error("An error occurred")}},[]);return 0!==t.length||h||0!==p.statuses.length?(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"shrink-0 space-y-3 border-b bg-background p-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(P.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(ap.Input,{className:"h-11 pl-10 text-base",onChange:a=>i(a.target.value),placeholder:"Search jobs, customers, or locations...",type:"search",value:h})]}),(0,b.jsx)(a2,{activeFilters:p,onClearAll:y,onToggleStatus:w,onToggleTechnician:x,statusOptions:r,technicianOptions:s}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(a1.Select,{onValueChange:a=>k(a),value:j,children:[(0,b.jsx)(a1.SelectTrigger,{className:"h-9 w-[140px] text-sm",children:(0,b.jsx)(a1.SelectValue,{placeholder:"Group by"})}),(0,b.jsxs)(a1.SelectContent,{children:[(0,b.jsx)(a1.SelectItem,{value:"date",children:"Group by Date"}),(0,b.jsx)(a1.SelectItem,{value:"technician",children:"Group by Tech"}),(0,b.jsx)(a1.SelectItem,{value:"status",children:"Group by Status"}),(0,b.jsx)(a1.SelectItem,{value:"customer",children:"Group by Customer"})]})]}),(0,b.jsxs)(a1.Select,{onValueChange:a=>m(a),value:l,children:[(0,b.jsx)(a1.SelectTrigger,{className:"h-9 w-[140px] text-sm",children:(0,b.jsx)(a1.SelectValue,{placeholder:"Sort by"})}),(0,b.jsxs)(a1.SelectContent,{children:[(0,b.jsx)(a1.SelectItem,{value:"start_time",children:"Sort by Time"}),(0,b.jsx)(a1.SelectItem,{value:"customer",children:"Sort by Customer"}),(0,b.jsx)(a1.SelectItem,{value:"status",children:"Sort by Status"})]})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===t.length?(0,b.jsx)(T,{actionLabel:"Clear Filters",onAction:y,variant:"no_results"}):(0,b.jsx)("div",{className:"space-y-6 p-4",children:Object.entries(v).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:a}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[c.length," ",1===c.length?"job":"jobs"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>o(a),showDate:"date"!==j,showTechnician:"technician"!==j},a.id))})]},a))})}),(0,b.jsxs)(N.Button,{className:"fixed right-4 bottom-20 lg:bottom-4 h-14 w-14 rounded-full shadow-lg",onClick:()=>{window.location.href="/dashboard/work/jobs/new"},size:"icon",children:[(0,b.jsx)(aA.Plus,{className:"h-6 w-6"}),(0,b.jsx)("span",{className:"sr-only",children:"Create new job"})]}),(0,b.jsx)(aw,{isOpen:null!==n,job:n,onAction:z,onClose:()=>o(null)})]}):(0,b.jsx)("div",{className:"flex h-full flex-col",children:(0,b.jsx)(T,{onAction:()=>{window.location.href="/dashboard/work/jobs/new"},variant:"no_jobs"})})}var a4=a.i(838441),a5=a.i(788568),a6=a.i(238221),a7=a.i(591065),a8=a.i(90617);function a9({date:a,jobs:c,isOpen:d,onClose:e,onJobTap:f,onAction:g}){if(!a)return null;let h=(0,aO.isToday)(a)?"Today":aQ(a)?"Tomorrow":(0,I.format)(a,"EEEE, MMMM d"),i=c.reduce((a,b)=>{if(!b.scheduled_start||!b.scheduled_end)return a;let c=new Date(b.scheduled_start);return a+(new Date(b.scheduled_end).getTime()-c.getTime())/36e5},0);return(0,b.jsxs)(b.Fragment,{children:[d&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in",onClick:e}),(0,b.jsxs)("div",{className:(0,R.cn)("fixed bottom-0 left-0 right-0 z-50 bg-background rounded-t-2xl shadow-2xl","transform transition-transform duration-300 ease-out",d?"translate-y-0":"translate-y-full"),style:{maxHeight:"85vh"},children:[(0,b.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,b.jsx)("div",{className:"w-12 h-1 bg-muted-foreground/30 rounded-full"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pb-4 border-b",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(O.Calendar,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:h})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,I.format)(a,"MMMM d, yyyy")}),c.length>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[c.length," ",1===c.length?"job":"jobs"," Â· ",i.toFixed(1),"h total"]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9 shrink-0",onClick:e,size:"icon",variant:"ghost",children:[(0,b.jsx)(aa.X,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsx)(aj.ScrollArea,{className:"flex-1",style:{maxHeight:"calc(85vh - 200px)"},children:(0,b.jsx)("div",{className:"p-4",children:0===c.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)(O.Calendar,{className:"h-12 w-12 text-muted-foreground/50 mb-3"}),(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"No jobs scheduled"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Schedule an appointment for this day"}),(0,b.jsxs)(N.Button,{onClick:()=>{g("create_appointment",a)},size:"sm",variant:"default",children:[(0,b.jsx)(aA.Plus,{className:"h-4 w-4 mr-2"}),"New Appointment"]})]}):(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,b.jsx)(ay,{job:a,onClick:()=>f(a),showDate:!1,showTechnician:!0},a.id))})})}),c.length>0&&(0,b.jsx)("div",{className:"border-t bg-muted/30 p-4 safe-bottom",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(N.Button,{className:"flex-1",onClick:()=>{g("create_appointment",a)},size:"default",variant:"outline",children:[(0,b.jsx)(aA.Plus,{className:"h-4 w-4 mr-2"}),"New Appointment"]}),(0,b.jsxs)(N.Button,{className:"flex-1",onClick:()=>{g("view_day",a)},size:"default",variant:"default",children:[(0,b.jsx)(O.Calendar,{className:"h-4 w-4 mr-2"}),"View Day Schedule"]})]})})]})]})}let ba=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bb=["S","M","T","W","T","F","S"],bc=a=>{switch(a?.toLowerCase()){case"scheduled":return"bg-blue-500";case"dispatched":return"bg-sky-500";case"arrived":return"bg-emerald-400";case"in_progress":return"bg-amber-500";case"closed":case"completed":return"bg-emerald-600";case"cancelled":return"bg-slate-400";default:return"bg-slate-500"}};function bd({date:a,jobs:d,isCurrentMonth:e,onDayTap:f,onJobTap:g}){let h=(0,aO.isToday)(a),i=d.length>0,j=0===a.getDay()||6===a.getDay(),k=(0,c.useMemo)(()=>d.reduce((a,b)=>{let c=b.status?.toLowerCase()||"scheduled";return a[c]=(a[c]||0)+1,a},{}),[d]),l=(0,c.useMemo)(()=>Object.entries(k).sort(([,a],[,b])=>b-a).slice(0,3),[k]);return(0,b.jsxs)("button",{className:(0,R.cn)("flex h-24 sm:h-28 flex-col border-r border-b p-1.5 sm:p-2 text-left transition-all active:scale-95",!e&&"bg-muted/50 opacity-60",h&&"bg-blue-50 ring-2 ring-inset ring-blue-500/50 dark:bg-blue-950/30",j&&!h&&"bg-slate-100/80 dark:bg-slate-800/30"),onClick:()=>f(a,d),type:"button",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-1 mb-1",children:[(0,b.jsx)("span",{className:(0,R.cn)("flex h-6 w-6 sm:h-7 sm:w-7 items-center justify-center rounded-full text-xs sm:text-sm font-bold",h&&"bg-blue-500 text-white shadow-md",!h&&!e&&"text-muted-foreground/60",!h&&e&&"text-foreground"),children:(0,I.format)(a,"d")}),i&&(0,b.jsx)(ac.Badge,{className:"h-4 px-1.5 text-[9px] sm:text-[10px] font-semibold",variant:"secondary",children:d.length})]}),i&&(0,b.jsx)("div",{className:"flex flex-wrap gap-0.5",children:l.map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,b.jsx)("div",{className:(0,R.cn)("h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full",bc(a))}),c>1&&(0,b.jsx)("span",{className:"text-[8px] sm:text-[9px] text-muted-foreground font-medium",children:c})]},a))}),i&&(0,b.jsxs)("div",{className:"hidden xs:flex flex-col gap-0.5 mt-1 overflow-hidden",children:[d.slice(0,2).map(a=>(0,b.jsx)("button",{className:(0,R.cn)("flex items-center gap-1 rounded px-1 py-0.5 text-[8px] sm:text-[9px] font-medium transition-colors hover:opacity-80",bc(a.status),"text-white truncate"),onClick:b=>{b.stopPropagation(),g(a)},type:"button",children:(0,b.jsx)("span",{className:"truncate",children:a.customer?.name||a.title})},a.id)),d.length>2&&(0,b.jsxs)("span",{className:"text-[8px] text-muted-foreground ml-1",children:["+",d.length-2," more"]})]})]})}function be(){let d=B(a=>a.jobs),{currentDate:e,goToToday:f,navigatePrevious:h,navigateNext:i}=(0,g.useScheduleViewStore)(),j=(0,c.useMemo)(()=>Array.from(d.values()),[d]),[k,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),r=(0,c.useMemo)(()=>e instanceof Date?e:new Date(e),[e]),s=(0,c.useMemo)(()=>{let a=(0,a4.startOfMonth)(r),b=(0,a5.endOfMonth)(r),c=(0,a6.startOfWeek)(a),d=(0,a7.endOfWeek)(b),e=[],f=c;for(;f<=d;)e.push(f),f=(0,l.addDays)(f,1);return e},[r]),t=(0,c.useMemo)(()=>{if(!p)return s;let a=(0,a6.startOfWeek)(r),b=[];for(let c=0;c<7;c++)b.push((0,l.addDays)(a,c));return b},[p,r,s]),u=(0,c.useMemo)(()=>{let a=new Map;return j.forEach(b=>{if(!b.scheduled_start)return;let c=new Date(b.scheduled_start),d=(0,I.format)(c,"yyyy-MM-dd");a.has(d)||a.set(d,[]),a.get(d)?.push(b)}),a.forEach(a=>{a.sort((a,b)=>a.scheduled_start?b.scheduled_start?new Date(a.scheduled_start).getTime()-new Date(b.scheduled_start).getTime():-1:1)}),a},[j]),v=(0,c.useCallback)((a,b)=>{o({date:a,jobs:b})},[]),w=(0,c.useCallback)(a=>{m(a)},[]),x=(0,c.useCallback)(async(b,c,...d)=>{m(null);try{switch(b){case"view_details":window.location.href=`/dashboard/work/jobs/${c.id}`;break;case"dispatch":case"arrive":case"start":case"complete":case"move_to_status":{let{updateJobStatus:e}=await a.A(965863),f="move_to_status"===b?d[0]:b,g=await e(c.id,{dispatch:"dispatched",arrive:"arrived",start:"in_progress",complete:"completed"}[b]||f);g.success?(aK.toast.success(`Job ${"move_to_status"===b?"moved to "+f:b+"ed"}`),window.location.reload()):aK.toast.error(g.error||"Failed to update job status");break}case"reschedule":{let[b,e]=d,{updateJob:f}=await a.A(965863),g=await f({jobId:c.id,scheduled_start:b.toISOString(),scheduled_end:e.toISOString()});g.success?(aK.toast.success("Job rescheduled"),window.location.reload()):aK.toast.error(g.error||"Failed to reschedule job");break}case"reassign":{let b=d[0];if(b){let{assignJobToTechnician:d}=await a.A(959763),e=await d(c.id,b);e.success?(aK.toast.success("Job reassigned"),window.location.reload()):aK.toast.error(e.error||"Failed to reassign job")}else aK.toast.info("Unassigning technician coming soon");break}case"cancel":{let{cancelJobAndAppointment:b}=await a.A(959763),d=await b(c.id);d.success?(aK.toast.success("Job cancelled"),window.location.reload()):aK.toast.error(d.error||"Failed to cancel job");break}default:console.warn("Unknown action:",b)}}catch(a){console.error("Job action error:",a),aK.toast.error("An error occurred")}},[]),y=(0,c.useCallback)((a,b)=>{switch(o(null),a){case"view_day":window.location.href=`/dashboard/schedule?view=day&date=${(0,I.format)(b,"yyyy-MM-dd")}`;break;case"create_appointment":window.location.href=`/dashboard/work/appointments/new?date=${(0,I.format)(b,"yyyy-MM-dd")}`;break;case"create_job":window.location.href=`/dashboard/work/jobs/new?date=${(0,I.format)(b,"yyyy-MM-dd")}`;break;default:console.warn("Unknown day action:",a)}},[]),z=(0,J.isSameDay)(r,new Date);return(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"shrink-0 border-b bg-background",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[(0,b.jsxs)(N.Button,{className:"h-9 w-9",onClick:h,size:"icon",variant:"ghost",children:[(0,b.jsx)(M.ChevronLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Previous month"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsxs)("h2",{className:"text-base sm:text-lg font-semibold",children:[(0,I.format)(r,p?"MMM d - ":"MMMM yyyy"),p&&(0,I.format)((0,l.addDays)((0,a6.startOfWeek)(r),6),"MMM d, yyyy")]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[u.size," days with jobs"]})]}),(0,b.jsxs)(N.Button,{className:"h-9 w-9",onClick:i,size:"icon",variant:"ghost",children:[(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Next month"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 px-3 sm:px-4 pb-3",children:[(0,b.jsx)(N.Button,{className:"flex-1 h-8 text-xs",onClick:()=>q(!p),size:"sm",variant:"outline",children:p?"Show Month":"Show Week"}),!z&&(0,b.jsx)(N.Button,{className:"flex-1 h-8 text-xs",onClick:f,size:"sm",variant:"outline",children:"Today"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-7 h-full",children:[ba.map((a,c)=>(0,b.jsxs)("div",{className:(0,R.cn)("sticky top-0 z-10 bg-muted/80 backdrop-blur-sm border-r border-b px-1 py-2 text-center text-[10px] sm:text-xs font-bold uppercase",(0===c||6===c)&&"bg-slate-200/80 dark:bg-slate-700/50"),children:[(0,b.jsx)("span",{className:"hidden xs:inline",children:a}),(0,b.jsx)("span",{className:"xs:hidden",children:bb[c]})]},a)),t.map(a=>{let c=(0,I.format)(a,"yyyy-MM-dd"),d=u.get(c)||[],e=(0,a8.isSameMonth)(a,r);return(0,b.jsx)(bd,{date:a,isCurrentMonth:e,jobs:d,onDayTap:v,onJobTap:w},a.toISOString())})]})}),(0,b.jsx)(aw,{isOpen:null!==k,job:k,onAction:x,onClose:()=>m(null)}),(0,b.jsx)(a9,{date:n?.date||null,isOpen:null!==n,jobs:n?.jobs||[],onAction:y,onClose:()=>o(null),onJobTap:w})]})}let bf=(0,C.default)(async()=>{},{loadableGenerated:{modules:[5456]},loading:()=>(0,b.jsx)("div",{className:"flex h-full w-full flex-col gap-4 p-4",children:(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:35}).map((a,c)=>(0,b.jsx)(D.Skeleton,{className:"aspect-square w-full"},c))})}),ssr:!1});function bg(){return(0,b.jsx)(bf,{})}function bh({initialData:a,bootstrapError:j}){let k=B(a=>a.hydrateFromServer),{viewMode:l}=(0,g.useScheduleViewStore)(),m=(0,e.useIsMobile)(),n=(0,c.useMemo)(()=>a?{companyId:a.companyId,range:{start:new Date(a.range.start),end:new Date(a.range.end)},lastSync:new Date(a.lastSync),jobs:a.jobs.map(h),technicians:a.technicians.map(i),unassignedMeta:a.unassignedMeta}:null,[a]);return!function(){let a=(0,f.useRouter)(),{goToToday:b,navigatePrevious:d,navigateNext:e,setViewMode:h}=(0,g.useScheduleViewStore)();(0,c.useEffect)(()=>{let c=c=>{let f=c.target;if("INPUT"!==f.tagName&&"TEXTAREA"!==f.tagName&&!f.isContentEditable&&!c.ctrlKey&&!c.metaKey&&!c.altKey)switch(c.key.toLowerCase()){case"t":c.preventDefault(),b();break;case"n":c.preventDefault(),a.push("/dashboard/work/new");break;case"[":c.preventDefault(),d();break;case"]":c.preventDefault(),e();break;case"1":c.preventDefault(),h("day");break;case"2":c.preventDefault(),h("month");break;case"3":c.preventDefault(),h("week")}};return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[b,d,e,h,a])}(),(0,c.useEffect)(()=>{n&&k(n)},[k,n]),(0,b.jsxs)("div",{className:"m-0 flex h-full w-full flex-1 flex-col overflow-hidden p-0",children:[j&&(0,b.jsxs)(d.Alert,{className:"mx-3 md:mx-4 mt-2 mb-3 md:mb-4 max-w-2xl self-center",variant:"destructive",children:[(0,b.jsx)(d.AlertTitle,{children:"Live schedule data unavailable"}),(0,b.jsxs)(d.AlertDescription,{children:[j,". Showing the scheduler without preloaded jobsâ€”use the refresh controls after fixing the issue."]})]}),m?(0,b.jsx)(b.Fragment,{children:"list"===l?(0,b.jsx)(a3,{}):"day"===l?(0,b.jsx)(aL,{}):"week"===l?(0,b.jsx)(aN,{}):"month"===l?(0,b.jsx)(be,{}):(0,b.jsx)(a3,{})}):(0,b.jsx)(b.Fragment,{children:"month"===l?(0,b.jsx)(bg,{}):"week"===l?(0,b.jsx)(H,{}):"list"===l?(0,b.jsx)(a3,{}):(0,b.jsx)(F,{})})]})}a.s(["SchedulePageClient",()=>bh],726458)}];

//# sourceMappingURL=apps_web_src_components_schedule_schedule-page-client_tsx_22a07ea1._.js.map