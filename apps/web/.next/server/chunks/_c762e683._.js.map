{"version":3,"sources":["../../../../../node_modules/.pnpm/%40vercel%2Boidc%403.0.5/node_modules/%40vercel/oidc/dist/token-error.js","../../../../../node_modules/.pnpm/%40vercel%2Boidc%403.0.5/node_modules/%40vercel/oidc/dist/get-context.js","../../../../../node_modules/.pnpm/%40vercel%2Boidc%403.0.5/node_modules/%40vercel/oidc/dist/get-vercel-oidc-token.js","../../../../../node_modules/.pnpm/%40vercel%2Boidc%403.0.5/node_modules/%40vercel/oidc/dist/index.js","../../../../../apps/web/src/lib/email/spam-filter.ts"],"sourcesContent":["\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar token_error_exports = {};\n__export(token_error_exports, {\n  VercelOidcTokenError: () => VercelOidcTokenError\n});\nmodule.exports = __toCommonJS(token_error_exports);\nclass VercelOidcTokenError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"VercelOidcTokenError\";\n    this.cause = cause;\n  }\n  toString() {\n    if (this.cause) {\n      return `${this.name}: ${this.message}: ${this.cause}`;\n    }\n    return `${this.name}: ${this.message}`;\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  VercelOidcTokenError\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar get_context_exports = {};\n__export(get_context_exports, {\n  SYMBOL_FOR_REQ_CONTEXT: () => SYMBOL_FOR_REQ_CONTEXT,\n  getContext: () => getContext\n});\nmodule.exports = __toCommonJS(get_context_exports);\nconst SYMBOL_FOR_REQ_CONTEXT = Symbol.for(\"@vercel/request-context\");\nfunction getContext() {\n  const fromSymbol = globalThis;\n  return fromSymbol[SYMBOL_FOR_REQ_CONTEXT]?.get?.() ?? {};\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  SYMBOL_FOR_REQ_CONTEXT,\n  getContext\n});\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar get_vercel_oidc_token_exports = {};\n__export(get_vercel_oidc_token_exports, {\n  getVercelOidcToken: () => getVercelOidcToken,\n  getVercelOidcTokenSync: () => getVercelOidcTokenSync\n});\nmodule.exports = __toCommonJS(get_vercel_oidc_token_exports);\nvar import_get_context = require(\"./get-context\");\nvar import_token_error = require(\"./token-error\");\nasync function getVercelOidcToken() {\n  let token = \"\";\n  let err;\n  try {\n    token = getVercelOidcTokenSync();\n  } catch (error) {\n    err = error;\n  }\n  try {\n    const [{ getTokenPayload, isExpired }, { refreshToken }] = await Promise.all([\n      await import(\"./token-util.js\"),\n      await import(\"./token.js\")\n    ]);\n    if (!token || isExpired(getTokenPayload(token))) {\n      await refreshToken();\n      token = getVercelOidcTokenSync();\n    }\n  } catch (error) {\n    if (err?.message && error instanceof Error) {\n      error.message = `${err.message}\n${error.message}`;\n    }\n    throw new import_token_error.VercelOidcTokenError(`Failed to refresh OIDC token`, error);\n  }\n  return token;\n}\nfunction getVercelOidcTokenSync() {\n  const token = (0, import_get_context.getContext)().headers?.[\"x-vercel-oidc-token\"] ?? process.env.VERCEL_OIDC_TOKEN;\n  if (!token) {\n    throw new Error(\n      `The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?`\n    );\n  }\n  return token;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  getVercelOidcToken,\n  getVercelOidcTokenSync\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar src_exports = {};\n__export(src_exports, {\n  getContext: () => import_get_context.getContext,\n  getVercelOidcToken: () => import_get_vercel_oidc_token.getVercelOidcToken,\n  getVercelOidcTokenSync: () => import_get_vercel_oidc_token.getVercelOidcTokenSync\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_get_vercel_oidc_token = require(\"./get-vercel-oidc-token\");\nvar import_get_context = require(\"./get-context\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  getContext,\n  getVercelOidcToken,\n  getVercelOidcTokenSync\n});\n","/**\n * Spam Filter Service\n *\n * Provides AI-powered spam detection using Google Gemini,\n * with fallback to rule-based filtering.\n */\n\nimport { google } from \"@ai-sdk/google\";\nimport { generateText } from \"ai\";\n\nexport interface SpamCheckResult {\n\tisSpam: boolean;\n\tconfidence: number; // 0-1, where 1 is most confident\n\treason: string;\n\tmethod: \"ai\" | \"rules\" | \"hybrid\";\n\tscore?: number; // Spam score (0-100)\n}\n\ninterface EmailContent {\n\tsubject: string | null;\n\tbody: string | null;\n\tbodyHtml: string | null;\n\tfromAddress: string | null;\n\tfromName: string | null;\n\ttoAddress: string | null;\n}\n\n/**\n * Rule-based spam detection (fast, no API calls)\n */\nfunction ruleBasedSpamCheck(email: EmailContent): SpamCheckResult | null {\n\tconst subject = (email.subject || \"\").toLowerCase();\n\tconst body = (email.body || \"\").toLowerCase();\n\tconst fromAddress = (email.fromAddress || \"\").toLowerCase();\n\t\n\tlet score = 0;\n\tconst reasons: string[] = [];\n\t\n\t// Subject-based checks\n\tconst spamSubjectPatterns = [\n\t\t/\\b(viagra|cialis|pharmacy|pills|medication)\\b/i,\n\t\t/\\b(winner|congratulations|you won|claim your prize)\\b/i,\n\t\t/\\b(urgent|act now|limited time|expires today)\\b/i,\n\t\t/\\b(free money|get rich|make \\$|earn \\$)\\b/i,\n\t\t/\\b(click here|click now|visit now)\\b/i,\n\t\t/\\b(nigerian prince|inheritance|lottery)\\b/i,\n\t];\n\t\n\tfor (const pattern of spamSubjectPatterns) {\n\t\tif (pattern.test(subject)) {\n\t\t\tscore += 15;\n\t\t\treasons.push(`Suspicious subject pattern: \"${pattern.source}\"`);\n\t\t}\n\t}\n\t\n\t// Body-based checks\n\tconst spamBodyPatterns = [\n\t\t/\\b(click here|click now|visit our website|unsubscribe)\\b/i,\n\t\t/\\b(guaranteed|risk-free|100% satisfaction)\\b/i,\n\t\t/\\b(act now|limited time|expires soon)\\b/i,\n\t\t/\\b(no credit check|bad credit ok|loan approval)\\b/i,\n\t];\n\t\n\tfor (const pattern of spamBodyPatterns) {\n\t\tif (pattern.test(body)) {\n\t\t\tscore += 10;\n\t\t\treasons.push(`Suspicious body pattern: \"${pattern.source}\"`);\n\t\t}\n\t}\n\t\n\t// Suspicious sender patterns\n\tif (fromAddress.includes(\"noreply\") || fromAddress.includes(\"no-reply\")) {\n\t\tscore += 5;\n\t\treasons.push(\"No-reply sender address\");\n\t}\n\t\n\t// Excessive capitalization\n\tconst capsRatio = (subject.match(/[A-Z]/g) || []).length / (subject.length || 1);\n\tif (capsRatio > 0.5 && subject.length > 10) {\n\t\tscore += 10;\n\t\treasons.push(\"Excessive capitalization in subject\");\n\t}\n\t\n\t// Suspicious links (basic check)\n\tconst linkCount = (body.match(/https?:\\/\\//g) || []).length;\n\tif (linkCount > 5) {\n\t\tscore += 10;\n\t\treasons.push(`Multiple suspicious links (${linkCount})`);\n\t}\n\t\n\t// Empty or very short body\n\tif (body.length < 20 && subject.length < 10) {\n\t\tscore += 5;\n\t\treasons.push(\"Very short or empty content\");\n\t}\n\t\n\t// If score is high enough, mark as spam\n\tif (score >= 30) {\n\t\treturn {\n\t\t\tisSpam: true,\n\t\t\tconfidence: Math.min(score / 100, 0.9), // Cap at 90% for rules\n\t\t\treason: reasons.join(\"; \"),\n\t\t\tmethod: \"rules\",\n\t\t\tscore,\n\t\t};\n\t}\n\t\n\t// If score is moderate, return null to defer to AI\n\tif (score >= 15) {\n\t\treturn null; // Defer to AI for uncertain cases\n\t}\n\t\n\t// Low score, likely not spam\n\treturn {\n\t\tisSpam: false,\n\t\tconfidence: 0.7,\n\t\treason: \"No obvious spam indicators found\",\n\t\tmethod: \"rules\",\n\t\tscore,\n\t};\n}\n\n/**\n * AI-powered spam detection using Anthropic Claude\n */\nasync function aiSpamCheck(email: EmailContent): Promise<SpamCheckResult> {\n\ttry {\n\t\tconst prompt = `You are an email spam detection expert. Analyze the following email and determine if it is spam.\n\nEmail Subject: ${email.subject || \"(no subject)\"}\nFrom: ${email.fromName || \"\"} <${email.fromAddress || \"\"}>\nTo: ${email.toAddress || \"\"}\n\nEmail Body (text):\n${email.body || \"(no body text)\"}\n\n${email.bodyHtml ? `\\nEmail Body (HTML - extract text only):\\n${email.bodyHtml.substring(0, 2000)}` : \"\"}\n\nAnalyze this email and respond with a JSON object containing:\n{\n  \"isSpam\": boolean,\n  \"confidence\": number (0-1),\n  \"reason\": string (brief explanation),\n  \"score\": number (0-100, spam score)\n}\n\nConsider these factors:\n- Suspicious subject lines (urgent, winner, free money, etc.)\n- Suspicious content (phishing, scams, promotional spam)\n- Suspicious sender patterns\n- Excessive links or attachments\n- Poor grammar or formatting (common in spam)\n- Legitimate business communications should NOT be marked as spam\n\nRespond ONLY with valid JSON, no other text.`;\n\n\t\tconst { text } = await generateText({\n\t\t\tmodel: google(\"gemini-2.0-flash-exp\"), // Fast and cost-effective\n\t\t\tprompt,\n\t\t\tmaxTokens: 200,\n\t\t\ttemperature: 0.1, // Low temperature for consistent classification\n\t\t});\n\n\t\t// Parse JSON response - try to extract JSON from text\n\t\tlet jsonText = text.trim();\n\t\t\n\t\t// Remove markdown code blocks if present\n\t\tjsonText = jsonText.replace(/```json\\s*/g, \"\").replace(/```\\s*/g, \"\");\n\t\t\n\t\t// Try to find JSON object\n\t\tconst jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n\t\tif (!jsonMatch) {\n\t\t\tconsole.error(\"No JSON found in AI response:\", text);\n\t\t\tthrow new Error(\"No JSON found in AI response\");\n\t\t}\n\n\t\tlet result: {\n\t\t\tisSpam: boolean;\n\t\t\tconfidence: number;\n\t\t\treason: string;\n\t\t\tscore?: number;\n\t\t};\n\t\t\n\t\ttry {\n\t\t\tresult = JSON.parse(jsonMatch[0]);\n\t\t} catch (parseError) {\n\t\t\tconsole.error(\"Failed to parse AI response JSON:\", jsonMatch[0], parseError);\n\t\t\tthrow new Error(\"Invalid JSON in AI response\");\n\t\t}\n\n\t\treturn {\n\t\t\tisSpam: result.isSpam,\n\t\t\tconfidence: Math.max(0, Math.min(1, result.confidence || 0.5)),\n\t\t\treason: result.reason || \"AI analysis\",\n\t\t\tmethod: \"ai\",\n\t\t\tscore: result.score || (result.isSpam ? 75 : 25),\n\t\t};\n\t} catch (error) {\n\t\tconsole.error(\"‚ùå AI spam check failed:\", error);\n\t\t// Fallback to rule-based if AI fails\n\t\treturn {\n\t\t\tisSpam: false,\n\t\t\tconfidence: 0.5,\n\t\t\treason: \"AI check failed, using fallback\",\n\t\t\tmethod: \"rules\",\n\t\t};\n\t}\n}\n\n/**\n * Main spam check function\n * Uses hybrid approach: rules first (fast), then AI for uncertain cases\n */\nexport async function checkSpam(email: EmailContent): Promise<SpamCheckResult> {\n\t// Check if Google AI API is available\n\tconst hasGoogleAI = !!process.env.GOOGLE_GENERATIVE_AI_API_KEY;\n\n\t// First, try rule-based (fast, no API calls)\n\tconst ruleResult = ruleBasedSpamCheck(email);\n\n\t// If rules are confident, use that\n\tif (ruleResult && (ruleResult.confidence > 0.8 || ruleResult.isSpam)) {\n\t\treturn ruleResult;\n\t}\n\n\t// If rules are uncertain and AI is available, use AI\n\tif (hasGoogleAI && (!ruleResult || ruleResult.confidence < 0.7)) {\n\t\tconst aiResult = await aiSpamCheck(email);\n\t\t\n\t\t// Combine results if we have both\n\t\tif (ruleResult) {\n\t\t\t// Hybrid approach: average confidence, use AI decision if rules uncertain\n\t\t\treturn {\n\t\t\t\tisSpam: aiResult.isSpam || (ruleResult.isSpam && ruleResult.confidence > 0.6),\n\t\t\t\tconfidence: (aiResult.confidence + ruleResult.confidence) / 2,\n\t\t\t\treason: `${aiResult.reason} (AI); ${ruleResult.reason} (Rules)`,\n\t\t\t\tmethod: \"hybrid\",\n\t\t\t\tscore: aiResult.score || ruleResult.score,\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn aiResult;\n\t}\n\t\n\t// Fallback to rule-based if no AI\n\treturn ruleResult || {\n\t\tisSpam: false,\n\t\tconfidence: 0.5,\n\t\treason: \"Insufficient data for spam detection\",\n\t\tmethod: \"rules\",\n\t};\n}\n\n/**\n * Quick spam check (rules only, no AI)\n * Use this for high-volume scenarios where speed is critical\n */\nexport function quickSpamCheck(email: EmailContent): SpamCheckResult {\n\tconst result = ruleBasedSpamCheck(email);\n\treturn result || {\n\t\tisSpam: false,\n\t\tconfidence: 0.5,\n\t\treason: \"No obvious spam indicators\",\n\t\tmethod: \"rules\",\n\t};\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3]}