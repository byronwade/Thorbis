module.exports=[773939,(e,r,t)=>{"use strict";var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={},c={VercelOidcTokenError:()=>u};for(var l in c)o(a,l,{get:c[l],enumerable:!0});r.exports=((e,r,t,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of s(r))i.call(e,t)||void 0===t||o(e,t,{get:()=>r[t],enumerable:!(a=n(r,t))||a.enumerable});return e})(o({},"__esModule",{value:!0}),a);class u extends Error{constructor(e,r){super(e),this.name="VercelOidcTokenError",this.cause=r}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}},164645,(e,r,t)=>{"use strict";var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={},c={SYMBOL_FOR_REQ_CONTEXT:()=>u,getContext:()=>p};for(var l in c)o(a,l,{get:c[l],enumerable:!0});r.exports=((e,r,t,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of s(r))i.call(e,t)||void 0===t||o(e,t,{get:()=>r[t],enumerable:!(a=n(r,t))||a.enumerable});return e})(o({},"__esModule",{value:!0}),a);let u=Symbol.for("@vercel/request-context");function p(){let e=globalThis;return e[u]?.get?.()??{}}},599382,(e,r,t)=>{"use strict";var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={},c={getVercelOidcToken:()=>m,getVercelOidcTokenSync:()=>d};for(var l in c)o(a,l,{get:c[l],enumerable:!0});r.exports=((e,r,t,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of s(r))i.call(e,t)||void 0===t||o(e,t,{get:()=>r[t],enumerable:!(a=n(r,t))||a.enumerable});return e})(o({},"__esModule",{value:!0}),a);var u=e.r(164645),p=e.r(773939);async function m(){let r,t="";try{t=d()}catch(e){r=e}try{let[{getTokenPayload:r,isExpired:o},{refreshToken:n}]=await Promise.all([await e.A(216653),await e.A(792892)]);(!t||o(r(t)))&&(await n(),t=d())}catch(e){throw r?.message&&e instanceof Error&&(e.message=`${r.message}
${e.message}`),new p.VercelOidcTokenError("Failed to refresh OIDC token",e)}return t}function d(){let e=(0,u.getContext)().headers?.["x-vercel-oidc-token"]??process.env.VERCEL_OIDC_TOKEN;if(!e)throw Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return e}},42936,(e,r,t)=>{"use strict";var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={},c={getContext:()=>p.getContext,getVercelOidcToken:()=>u.getVercelOidcToken,getVercelOidcTokenSync:()=>u.getVercelOidcTokenSync};for(var l in c)o(a,l,{get:c[l],enumerable:!0});r.exports=((e,r,t,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of s(r))i.call(e,t)||void 0===t||o(e,t,{get:()=>r[t],enumerable:!(a=n(r,t))||a.enumerable});return e})(o({},"__esModule",{value:!0}),a);var u=e.r(599382),p=e.r(164645)},808324,e=>{"use strict";var r=e.i(23322),t=e.i(476674);function o(e){let r=(e.subject||"").toLowerCase(),t=(e.body||"").toLowerCase(),o=(e.fromAddress||"").toLowerCase(),n=0,s=[];for(let e of[/\b(viagra|cialis|pharmacy|pills|medication)\b/i,/\b(winner|congratulations|you won|claim your prize)\b/i,/\b(urgent|act now|limited time|expires today)\b/i,/\b(free money|get rich|make \$|earn \$)\b/i,/\b(click here|click now|visit now)\b/i,/\b(nigerian prince|inheritance|lottery)\b/i])e.test(r)&&(n+=15,s.push(`Suspicious subject pattern: "${e.source}"`));for(let e of[/\b(click here|click now|visit our website|unsubscribe)\b/i,/\b(guaranteed|risk-free|100% satisfaction)\b/i,/\b(act now|limited time|expires soon)\b/i,/\b(no credit check|bad credit ok|loan approval)\b/i])e.test(t)&&(n+=10,s.push(`Suspicious body pattern: "${e.source}"`));(o.includes("noreply")||o.includes("no-reply"))&&(n+=5,s.push("No-reply sender address")),(r.match(/[A-Z]/g)||[]).length/(r.length||1)>.5&&r.length>10&&(n+=10,s.push("Excessive capitalization in subject"));let i=(t.match(/https?:\/\//g)||[]).length;return(i>5&&(n+=10,s.push(`Multiple suspicious links (${i})`)),t.length<20&&r.length<10&&(n+=5,s.push("Very short or empty content")),n>=30)?{isSpam:!0,confidence:Math.min(n/100,.9),reason:s.join("; "),method:"rules",score:n}:n>=15?null:{isSpam:!1,confidence:.7,reason:"No obvious spam indicators found",method:"rules",score:n}}async function n(e){try{let o,n=`You are an email spam detection expert. Analyze the following email and determine if it is spam.

Email Subject: ${e.subject||"(no subject)"}
From: ${e.fromName||""} <${e.fromAddress||""}>
To: ${e.toAddress||""}

Email Body (text):
${e.body||"(no body text)"}

${e.bodyHtml?`
Email Body (HTML - extract text only):
${e.bodyHtml.substring(0,2e3)}`:""}

Analyze this email and respond with a JSON object containing:
{
  "isSpam": boolean,
  "confidence": number (0-1),
  "reason": string (brief explanation),
  "score": number (0-100, spam score)
}

Consider these factors:
- Suspicious subject lines (urgent, winner, free money, etc.)
- Suspicious content (phishing, scams, promotional spam)
- Suspicious sender patterns
- Excessive links or attachments
- Poor grammar or formatting (common in spam)
- Legitimate business communications should NOT be marked as spam

Respond ONLY with valid JSON, no other text.`,{text:s}=await (0,t.generateText)({model:(0,r.google)("gemini-2.0-flash-exp"),prompt:n,maxTokens:200,temperature:.1}),i=s.trim(),a=(i=i.replace(/```json\s*/g,"").replace(/```\s*/g,"")).match(/\{[\s\S]*\}/);if(!a)throw console.error("No JSON found in AI response:",s),Error("No JSON found in AI response");try{o=JSON.parse(a[0])}catch(e){throw console.error("Failed to parse AI response JSON:",a[0],e),Error("Invalid JSON in AI response")}return{isSpam:o.isSpam,confidence:Math.max(0,Math.min(1,o.confidence||.5)),reason:o.reason||"AI analysis",method:"ai",score:o.score||(o.isSpam?75:25)}}catch(e){return console.error("âŒ AI spam check failed:",e),{isSpam:!1,confidence:.5,reason:"AI check failed, using fallback",method:"rules"}}}async function s(e){let r=!!process.env.GOOGLE_GENERATIVE_AI_API_KEY,t=o(e);if(t&&(t.confidence>.8||t.isSpam))return t;if(r&&(!t||t.confidence<.7)){let r=await n(e);return t?{isSpam:r.isSpam||t.isSpam&&t.confidence>.6,confidence:(r.confidence+t.confidence)/2,reason:`${r.reason} (AI); ${t.reason} (Rules)`,method:"hybrid",score:r.score||t.score}:r}return t||{isSpam:!1,confidence:.5,reason:"Insufficient data for spam detection",method:"rules"}}function i(e){return o(e)||{isSpam:!1,confidence:.5,reason:"No obvious spam indicators",method:"rules"}}e.s(["checkSpam",()=>s,"quickSpamCheck",()=>i])},216653,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__a6a8820c._.js"].map(r=>e.l(r))).then(()=>r(439609)))},792892,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__8bbeb9a7._.js"].map(r=>e.l(r))).then(()=>r(927791)))}];

//# sourceMappingURL=_c762e683._.js.map