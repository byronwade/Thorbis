(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,221999,e=>{"use strict";let t=(0,e.i(383206).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["default",()=>t])},560149,e=>{"use strict";var t=e.i(221999);e.s(["CalendarDays",()=>t.default])},686804,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>t])},550652,e=>{"use strict";var t=e.i(686804);e.s(["ArrowUpRight",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},287156,e=>{"use strict";var t=e.i(111043),a=e.i(970799),r=e.i(151213);function s({section:e,table:s,kanban:i,fallback:n=null,forceView:l}){let d=(0,r.useWorkView)(e),o=(0,r.useSetWorkView)(e),c=l??d;return((0,a.useEffect)(()=>{l&&d!==l&&o(l)},[l]),"kanban"===c)?(0,t.jsx)(t.Fragment,{children:i??n}):(0,t.jsx)(t.Fragment,{children:s??n})}e.s(["WorkDataView",()=>s])},430876,e=>{"use strict";var t=e.i(111043),a=e.i(970799);e.i(116233);var r=e.i(363712),s=e.i(999),i=e.i(691225),n=e.i(913532),l=e.i(605278),d=e.i(375308),o=e.i(989239);let c=(0,a.createContext)(null),u=(0,a.createContext)(null),m="kanban-column-";function h(e,t,a){let r=Object.fromEntries(e.map(e=>[e.id,[]]));return t.reduce((e,t)=>{let r=a(t);return e[r]||(e[r]=[]),e[r]=[...e[r],t],e},r)}function x({columns:e,data:r,onDataChange:n,onItemMove:d,getColumnId:u,children:x,className:p,pointerSensorOptions:g,renderDragOverlay:f}){let b=(0,a.useCallback)(u??(e=>e.columnId),[]),[v,w]=(0,a.useState)(()=>h(e,r,b)),[y,j]=(0,a.useState)(null),k=(0,a.useRef)(e);(0,a.useEffect)(()=>{k.current=e},[e]),(0,a.useEffect)(()=>{w(h(e,r,b))},[e,r,b]);let N=(0,s.useSensors)((0,s.useSensor)(s.PointerSensor,{activationConstraint:{distance:6},...g}),(0,s.useSensor)(s.KeyboardSensor,{coordinateGetter:i.sortableKeyboardCoordinates})),C=(0,a.useCallback)(e=>{for(let t of k.current){let a=v[t.id]??[],r=a.findIndex(t=>t.id===e);if(-1!==r)return{columnId:t.id,item:a[r],index:r}}return null},[v]),S=(0,a.useCallback)(e=>{let t=C(e.active.id);t&&j({item:t.item,columnId:t.columnId})},[C]),I=(0,a.useCallback)(e=>{var t;let{active:a,over:r}=e;if(j(null),!r)return;let s=C(a.id);if(!s)return;let i=null,l=null;if("string"==typeof r.id&&r.id.startsWith(m))l=(v[i=r.id.replace(m,"")]??[]).length;else{let e=C(r.id);e&&(i=e.columnId,l=(v[e.columnId]??[]).findIndex(t=>t.id===e.item.id))}if(null===i||null===l||i===s.columnId&&l===s.index)return;let o=Object.fromEntries(Object.entries(v).map(([e,t])=>[e,t.slice()])),c=o[s.columnId]??[],[u]=c.splice(s.index,1);o[s.columnId]=c;let h=o[i]??[],x=s.columnId===i&&s.index<l?l-1:l,p={...u,columnId:i};h.splice(x,0,p),o[i]=h,w(o);let g=(t=k.current,t.flatMap(e=>o[e.id]??[]));n?.(g),d&&d({item:p,fromColumnId:s.columnId,toColumnId:i,toIndex:x})},[C,v,n,d]),M=(0,a.useMemo)(()=>({columns:e,getItems:e=>v[e]??[],findItem:C,activeItem:y}),[e,v,C,y]);return(0,t.jsx)(c.Provider,{value:M,children:(0,t.jsxs)(s.DndContext,{collisionDetection:s.closestCorners,onDragCancel:()=>j(null),onDragEnd:I,onDragStart:S,sensors:N,children:[(0,t.jsx)("div",{className:(0,o.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",p),children:x}),(0,t.jsx)(s.DragOverlay,{children:y?f?f(y.item):(0,t.jsx)(l.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium",children:String(y.item.id)})}):null})]})})}function p({column:e,children:a,className:r}){return(0,t.jsx)(u.Provider,{value:e,children:(0,t.jsx)("section",{"aria-label":`${e.name} column`,className:(0,o.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",r),children:a})})}function g({children:e,className:a}){return(0,t.jsx)("header",{className:(0,o.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",a),children:e})}function f({columnId:e,children:r,emptyState:n,className:l,height:u="28rem"}){let{getItems:h}=function(){let e=(0,a.useContext)(c);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),x=h(e),{setNodeRef:p,isOver:g}=(0,s.useDroppable)({id:`${m}${e}`});return(0,t.jsx)(i.SortableContext,{items:x.map(e=>e.id),strategy:i.verticalListSortingStrategy,children:(0,t.jsx)(d.ScrollArea,{className:"kanban-scroll flex-1",children:(0,t.jsxs)("div",{className:(0,o.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",g&&"ring-primary/60 ring-2 ring-offset-2",l),"data-drop-state":g?"active":"inactive",ref:p,style:{minHeight:u},children:[0===x.length&&n,x.map((e,t)=>r(e,t))]})})})}function b({itemId:e,children:a,className:r}){let{attributes:s,listeners:d,setNodeRef:c,transform:u,transition:m,isDragging:h}=(0,i.useSortable)({id:e}),x={transform:n.CSS.Transform.toString(u),transition:m};return(0,t.jsx)(l.Card,{className:(0,o.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",h&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",r),"data-dragging":h?"":void 0,ref:c,style:x,...d,...s,children:a})}function v({data:e,columns:s,mapToKanbanItem:i,updateEntityStatus:n,renderCard:l,renderDragOverlay:d,calculateColumnMeta:o,onItemMove:c,entityName:u="items",emptyStateMessage:m,showTotals:h=!1,formatTotal:v}){let[w,y]=(0,a.useState)(()=>e.map(i)),j=o||((e,t)=>({count:t.filter(t=>t.columnId===e).length})),k=(0,a.useMemo)(()=>{let e={};return s.forEach(t=>{e[t.id]=j(t.id,w)}),e},[s,w,j]),N=(0,a.useMemo)(()=>s.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[s]),C=m||(e=>`No ${u} in ${e}`);return(0,t.jsx)(x,{className:"pb-4",columns:N,data:w,onDataChange:e=>{n?y(e.map(e=>({...e,entity:n(e.entity,e.columnId)}))):y(e)},onItemMove:c,renderDragOverlay:d||(e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:l(e)})),children:s.map(e=>{let a=k[e.id]??{count:0};return(0,t.jsxs)(p,{className:"min-h-[300px] flex-1",column:N.find(t=>t.id===e.id),children:[(0,t.jsx)(g,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,t.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,t.jsxs)(r.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[a.count," ",u]}),h&&void 0!==a.total&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(a.total)}),h&&void 0!==a.value&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(a.value)})]})}),(0,t.jsx)(f,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,t.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:C(e.name)}),children:e=>(0,t.jsx)(b,{itemId:e.id,children:l(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>v],430876)},66763,e=>{"use strict";let t=(0,e.i(383206).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["default",()=>t])},604501,e=>{"use strict";var t=e.i(66763);e.s(["Truck",()=>t.default])},772450,e=>{"use strict";e.i(116233),e.s([])},475973,e=>{"use strict";var t=e.i(111043),a=e.i(550652),r=e.i(560149),s=e.i(14435),i=e.i(501651),n=e.i(176378);e.i(553153);var l=e.i(363712);e.i(889265);var d=e.i(677607),o=e.i(430876),c=e.i(152088);let u=[{id:"available",name:"Available",accentColor:"#22C55E"},{id:"in-use",name:"In Use",accentColor:"#2563EB"},{id:"maintenance",name:"Maintenance",accentColor:"#F59E0B"},{id:"retired",name:"Retired",accentColor:"#6B7280"}],m=new Map(u.map(e=>[e.id,e.name]));function h({equipment:e}){return(0,t.jsx)(o.EntityKanban,{columns:u,data:e,entityName:"assets",mapToKanbanItem:e=>({id:e.id,columnId:e.status,entity:e,equipment:e}),renderCard:e=>(0,t.jsx)(x,{item:{...e,equipment:e.entity}}),renderDragOverlay:e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,t.jsx)(x,{item:{...e,equipment:e.entity}})}),updateEntityStatus:(e,t)=>({...e,status:t})})}function x({item:e}){let{equipment:o,columnId:u}=e;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:o.assetId}),(0,t.jsx)("h3",{className:"text-foreground text-sm font-semibold",children:o.name}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsx)(l.Badge,{className:(0,c.cn)("text-xs","retired"===u&&"bg-destructive/10 text-destructive","available"===u&&"bg-primary/10 text-primary"),variant:"available"===u?"secondary":"retired"===u?"destructive":"outline",children:m.get(u)??u}),(0,t.jsxs)(l.Badge,{className:"text-xs",variant:"outline",children:[o.classificationLabel,o.typeLabel&&o.typeLabel.toLowerCase()!==o.classificationLabel.toLowerCase()&&(0,t.jsxs)("span",{className:"text-muted-foreground/80",children:[" ","• ",o.typeLabel]})]})]})]}),(0,t.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.User,{className:"text-primary size-4"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:o.assignedTo})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Wrench,{className:"text-primary size-4"}),(0,t.jsxs)("span",{children:["Last service ",o.lastService]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.CalendarDays,{className:"text-primary size-4"}),(0,t.jsxs)("span",{children:["Next service ",o.nextService]})]})]}),(0,t.jsx)(d.Button,{asChild:!0,className:"text-primary w-full justify-between text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)(n.default,{href:`/dashboard/work/equipment/${o.id}`,children:["View asset",(0,t.jsx)(a.ArrowUpRight,{className:"size-3.5"})]})})]})}e.s(["EquipmentKanban",()=>h])},564063,e=>{"use strict";var t=e.i(111043),a=e.i(946672),r=e.i(882896),s=e.i(38614),i=e.i(371526),n=e.i(121085),l=e.i(604501),d=e.i(501651),o=e.i(176378);e.i(889265);var c=e.i(677607);e.i(244242);var u=e.i(563078),m=e.i(527756);e.i(772450);var h=e.i(491168),x=e.i(274220),p=e.i(995403);let g={available:{className:"bg-success hover:bg-success text-white",label:"Available"},"in-use":{className:"bg-primary text-primary dark:bg-primary/20 dark:text-primary",label:"In Use"},maintenance:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Maintenance"},retired:{className:"bg-muted text-foreground dark:bg-foreground/20 dark:text-muted-foreground",label:"Retired"},active:{className:"bg-primary/15 text-primary",label:"Active"},inactive:{className:"bg-muted text-muted-foreground",label:"Inactive"},replaced:{className:"bg-muted text-muted-foreground",label:"Replaced"},"out-of-service":{className:"bg-warning text-warning",label:"Out of Service"},"in-service":{className:"bg-primary/15 text-primary",label:"In Service"}};function f({equipment:f,itemsPerPage:b=50,totalCount:v,currentPage:w=1}){let y=(0,x.useArchiveStore)(e=>e.filters.equipment),j=f.filter(e=>{let t=!!(e.archived_at||e.deleted_at);return"active"===y?!t:"archived"!==y||t}),k=[{key:"assetId",header:"Asset ID",width:"w-32",shrink:!0,sortable:!0,render:e=>(0,t.jsx)(o.default,{className:"text-foreground text-sm leading-tight font-medium hover:underline",href:`/dashboard/work/equipment/${e.id}`,onClick:e=>e.stopPropagation(),children:e.assetId})},{key:"name",header:"Name",width:"flex-1",sortable:!0,render:e=>(0,t.jsxs)(o.default,{className:"block min-w-0",href:`/dashboard/work/equipment/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"text-foreground truncate text-sm leading-tight font-medium hover:underline",children:e.name}),(0,t.jsxs)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:[e.classificationLabel,e.typeLabel&&e.typeLabel.toLowerCase()!==e.classificationLabel.toLowerCase()&&(0,t.jsxs)("span",{className:"text-muted-foreground/80",children:[" ","• ",e.typeLabel]})]})]})},{key:"assignedTo",header:"Assigned To",width:"w-40",shrink:!0,hideOnMobile:!0,sortable:!0,render:e=>(0,t.jsx)("span",{className:"text-foreground text-sm",children:e.assignedTo})},{key:"lastService",header:"Last Service",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-sm tabular-nums",children:e.lastService})},{key:"nextService",header:"Next Service",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-sm tabular-nums",children:e.nextService})},{key:"status",header:"Status",width:"w-32",shrink:!0,sortable:!0,render:e=>(0,t.jsx)(h.GenericStatusBadge,{config:g,defaultStatus:"available",status:e.status})},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)("div",{"data-no-row-click":!0,children:(0,t.jsxs)(u.DropdownMenu,{children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{size:"icon",variant:"ghost",children:(0,t.jsx)(s.MoreHorizontal,{className:"size-4"})})}),(0,t.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(u.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(u.DropdownMenuSeparator,{}),(0,t.jsxs)(u.DropdownMenuItem,{children:[(0,t.jsx)(d.Wrench,{className:"mr-2 size-4"}),"Schedule Service"]}),(0,t.jsxs)(u.DropdownMenuItem,{children:[(0,t.jsx)(n.Settings,{className:"mr-2 size-4"}),"Update Status"]}),(0,t.jsx)(u.DropdownMenuSeparator,{}),(0,t.jsxs)(u.DropdownMenuItem,{children:[(0,t.jsx)(a.Archive,{className:"mr-2 size-4"}),"Archive"]})]})]})})}],N=[{label:"Schedule Service",icon:(0,t.jsx)(d.Wrench,{className:"h-4 w-4"}),onClick:e=>{window.location.href=`/dashboard/work/appointments/new?equipment=${Array.from(e).join(",")}`}},{label:"Export",icon:(0,t.jsx)(r.Download,{className:"h-4 w-4"}),onClick:e=>{let t=new Blob([["Asset ID,Name,Classification,Type,Assigned To,Status,Last Service,Next Service",...f.filter(t=>e.has(t.id)).map(e=>[e.assetId,e.name,e.classificationLabel,e.typeLabel,e.assignedTo,e.status,e.lastService,e.nextService].join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`equipment-export-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(a),p.toast.success(`Exported ${e.size} item${e.size>1?"s":""}`)}},{label:"Archive",icon:(0,t.jsx)(a.Archive,{className:"h-4 w-4"}),variant:"destructive",onClick:async t=>{let{archiveEquipment:a}=await e.A(39624),r=0,s=0;for(let e of t){let t=await a(e);t.success?r++:(s++,console.error(`Failed to archive equipment ${e}:`,t.error))}r>0&&p.toast.success(`Archived ${r} item${r>1?"s":""}`),s>0&&p.toast.error(`Failed to archive ${s} item${s>1?"s":""}`),window.location.reload()}}];return(0,t.jsx)(m.FullWidthDataTable,{bulkActions:N,columns:k,data:j,emptyAction:(0,t.jsxs)(c.Button,{onClick:()=>window.location.href="/dashboard/work/equipment/new",size:"sm",children:[(0,t.jsx)(i.Plus,{className:"mr-2 size-4"}),"Add Equipment"]}),emptyIcon:(0,t.jsx)(l.Truck,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No equipment found",enableSelection:!0,entity:"equipment",getHighlightClass:()=>"bg-warning/30 dark:bg-warning/10",getItemId:e=>e.id,isArchived:e=>!!(e.archived_at||e.deleted_at),isHighlighted:e=>"maintenance"===e.status,itemsPerPage:b,totalCount:v??j.length,currentPageFromServer:w,serverPagination:!0,onRefresh:()=>window.location.reload(),onRowClick:e=>window.location.href=`/dashboard/work/equipment/${e.id}`,searchFilter:(e,t)=>{let a=t.toLowerCase();return e.assetId.toLowerCase().includes(a)||e.name.toLowerCase().includes(a)||e.type.toLowerCase().includes(a)||e.typeLabel.toLowerCase().includes(a)||e.classification.toLowerCase().includes(a)||e.classificationLabel.toLowerCase().includes(a)||e.assignedTo.toLowerCase().includes(a)||e.status.toLowerCase().includes(a)},searchPlaceholder:"Search equipment by asset ID, name, type, assigned to, or status...",showArchived:"active"!==y,showRefresh:!1})}e.s(["EquipmentTable",()=>f])},39624,e=>{e.v(t=>Promise.all(["static/chunks/cfd4efaa8779223f.js"].map(t=>e.l(t))).then(()=>t(8737)))}]);