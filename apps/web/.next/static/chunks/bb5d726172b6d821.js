(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,720582,e=>{"use strict";var i=e.i(111043),t=e.i(751139),s=e.i(276389),a=e.i(438170),a=a,n=e.i(463529),l=e.i(15751),r=e.i(60179),d=e.i(123891),c=e.i(604501),o=e.i(14435),u=e.i(501651),h=e.i(176378),x=e.i(904653),m=e.i(970799),p=e.i(49718),v=e.i(821305),j=e.i(278633),g=e.i(307033);e.i(553153);var b=e.i(363712);e.i(889265);var y=e.i(677607);e.i(51478);var f=e.i(635613);e.i(149989);var _=e.i(880177);e.i(711448);var N=e.i(157222),w=e.i(933234);let S={equipment:"Equipment",tool:"Tool",vehicle:"Vehicle"};function C(e){return e?e.toString().replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,e=>e.toUpperCase()):"N/A"}function $(e){if(!e)return"N/A";let i=new Date(e);return Number.isNaN(i.getTime())?"N/A":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function L(e,i){if(null==e||Number.isNaN(e))return"N/A";let t=e.toLocaleString("en-US");return i?`${t} ${i}`:t}function I(e){if(!e)return null;let i=new Date(e);return Number.isNaN(i.getTime())?null:Math.round((i.getTime()-Date.now())/864e5)}function A({entityData:e}){var A,k;let q,T,{equipment:O,customer:D,property:z,servicePlan:U,installJob:M,lastServiceJob:P,upcomingMaintenance:E=[],serviceHistory:B=[],notes:V=[],activities:W=[],attachments:R=[]}=e,[F,G]=(0,m.useState)(!1),J=(0,x.useRouter)();(0,m.useEffect)(()=>{G(!0)},[]);let K=(0,m.useMemo)(()=>O?.equipment_tags?O.equipment_tags.map(e=>({id:e.id,name:e.name,slug:e.slug,color:e.color,category:e.category,icon:e.icon})):[],[O?.equipment_tags]),Y=(0,m.useMemo)(()=>({1:()=>{let e=document.querySelector('[data-section-id="equipment-details"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},2:()=>{let e=document.querySelector('[data-section-id="fleet-profile"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},3:()=>{let e=document.querySelector('[data-section-id="fleet-service"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},4:()=>{let e=document.querySelector('[data-section-id="installation"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},5:()=>{let e=document.querySelector('[data-section-id="last-service"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},6:()=>{let e=document.querySelector('[data-section-id="upcoming-maintenance"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},7:()=>{let e=document.querySelector('[data-section-id="warranty"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},8:()=>{let e=document.querySelector('[data-section-id="service-history"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}},9:()=>{let e=document.querySelector('[data-section-id="customer-details"]');if(e){e.scrollIntoView({behavior:"smooth",block:"start"});let i=e.querySelector("[data-accordion-trigger]");i&&"closed"===i.getAttribute("data-state")&&i.click()}}}),[]);(0,w.useSectionShortcuts)(Y);let H=O.classification??"equipment",Q=S[H]?H:"equipment",X=S[Q]||C(O.classification),Z=C(O.type),ee=O.asset_category?C(O.asset_category):null,ei=O.asset_subcategory?C(O.asset_subcategory):null,et="vehicle"===Q,es="tool"===Q,ea={positive:"border-success/30 bg-success/10",warning:"border-warning/40 bg-warning/10",critical:"border-destructive/40 bg-destructive/10",info:"border-primary/30 bg-primary/10"},en=[(A=O.status||"active",q=({active:{className:"bg-success text-white",label:"Active"},inactive:{className:"bg-secondary0 text-white",label:"Inactive"},retired:{className:"bg-warning text-white",label:"Retired"},replaced:{className:"bg-primary text-white",label:"Replaced"}})[A]||{className:"bg-muted text-foreground",label:A},(0,i.jsx)(b.Badge,{className:q.className,variant:"outline",children:q.label},"status")),(k=O.condition||"good",T=({excellent:{className:"bg-success text-white",label:"Excellent"},good:{className:"bg-primary text-white",label:"Good"},fair:{className:"bg-warning text-white",label:"Fair"},poor:{className:"bg-warning text-white",label:"Poor"},needs_replacement:{className:"bg-destructive text-white",label:"Needs Replacement"}})[k]||{className:"bg-muted text-foreground",label:k},(0,i.jsx)(b.Badge,{className:T.className,variant:"outline",children:T.label},"condition")),(0,i.jsx)(b.Badge,{className:"bg-primary/10 text-primary",variant:"outline",children:X},"classification")],el=O.equipment_number||O.asset_id||O.id?.slice(0,8).toUpperCase(),er=O.name||`Equipment ${el??""}`.trim(),ed=[X,"N/A"!==Z&&"NA"!==Z?Z:null,O.manufacturer||null,O.model||null].filter(Boolean),ec=ed.length>0?ed.join(" • "):void 0,eo=[];eo.push({label:"Equipment #",icon:(0,i.jsx)(r.Package,{className:"text-muted-foreground h-3.5 w-3.5"}),value:el??"Not assigned",helperText:X}),eo.push({label:"Status",icon:(0,i.jsx)(d.ShieldCheck,{className:"text-muted-foreground h-3.5 w-3.5"}),value:C(O.status)||"Active",helperText:C(O.condition)}),eo.push({label:"Installed",icon:(0,i.jsx)(s.Calendar,{className:"text-muted-foreground h-3.5 w-3.5"}),value:$(O.install_date),helperText:O.installed_by?`By ${O.installed_by}`:void 0}),O.serial_number&&eo.push({label:"Serial Number",icon:(0,i.jsx)(u.Wrench,{className:"text-muted-foreground h-3.5 w-3.5"}),value:O.serial_number}),D&&eo.push({label:"Customer",icon:(0,i.jsx)(o.User,{className:"text-muted-foreground h-3.5 w-3.5"}),value:(0,i.jsx)(h.default,{className:"text-foreground text-sm font-medium hover:underline",href:`/dashboard/customers/${D.id}`,children:D.display_name||`${D.first_name||""} ${D.last_name||""}`.trim()||"Unknown Customer"}),helperText:D.email||D.phone||void 0}),z&&eo.push({label:"Location",icon:(0,i.jsx)(l.MapPin,{className:"text-muted-foreground h-3.5 w-3.5"}),value:z.address||z.name||"Not assigned",helperText:`${z.city||""}, ${z.state||""} ${z.zip_code||""}`.trim()}),U&&eo.push({label:"Service Plan",icon:(0,i.jsx)(d.ShieldCheck,{className:"text-muted-foreground h-3.5 w-3.5"}),value:(0,i.jsx)(h.default,{className:"text-foreground text-sm font-medium hover:underline",href:`/dashboard/work/maintenance-plans/${U.id}`,children:U.name||`Plan ${U.plan_number||U.id.slice(0,8)}`}),helperText:U.status||void 0});let eu=[];D&&eu.push((0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsx)(h.default,{href:`/dashboard/customers/${D.id}`,children:"View Customer"})},"view-customer")),z&&eu.push((0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsx)(h.default,{href:`/dashboard/work/properties/${z.id}`,children:"View Property"})},"view-property"));let eh={title:er,subtitle:ec,badges:en,metadata:eo,secondaryActions:eu.length>0?eu:void 0},ex=(0,m.useMemo)(()=>{let e=[];if(et){if("number"==typeof O.vehicle_odometer&&"number"==typeof O.vehicle_next_service_mileage){let t=O.vehicle_next_service_mileage-O.vehicle_odometer;Number.isFinite(t)&&e.push({tone:t<0?"critical":t<=500?"warning":"info",title:t<0?`Service overdue by ${L(Math.abs(t),"mi")}`:`Service due in ${L(t,"mi")}`,description:`Next service at ${L(O.vehicle_next_service_mileage,"mi")}${O.next_service_due?` • ${$(O.next_service_due)}`:""}`,icon:(0,i.jsx)(n.Gauge,{className:"size-4"})})}let s=I(O.vehicle_inspection_due);null!==s&&e.push({tone:s<0?"critical":s<=14?"warning":"info",title:s<0?`Inspection overdue by ${Math.abs(s)} days`:`Inspection due in ${s} days`,description:`Due ${$(O.vehicle_inspection_due)}`,icon:(0,i.jsx)(t.AlertTriangle,{className:"size-4"})});let l=I(O.vehicle_registration_expiration);null!==l&&e.push({tone:l<0?"critical":l<=30?"warning":"info",title:l<0?`Registration expired ${Math.abs(l)} days ago`:`Registration expires in ${l} days`,description:`Renew by ${$(O.vehicle_registration_expiration)}`,icon:(0,i.jsx)(c.Truck,{className:"size-4"})}),O.vehicle_fuel_type&&e.push({tone:"info",title:`${C(O.vehicle_fuel_type)} fuel`,description:"Fuel type captured for compliance and routing.",icon:(0,i.jsx)(a.default,{className:"size-4"})})}else if(es){let t=I(O.tool_calibration_due);if(null!==t&&e.push({tone:t<0?"critical":t<=14?"warning":"info",title:t<0?`Calibration overdue by ${Math.abs(t)} days`:`Calibration due in ${t} days`,description:`Scheduled for ${$(O.tool_calibration_due)}`,icon:(0,i.jsx)(n.Gauge,{className:"size-4"})}),O.condition){let t="needs_replacement"===O.condition||"poor"===O.condition?"warning":"info";e.push({tone:t,title:`Condition: ${C(O.condition)}`,description:"needs_replacement"===O.condition?"Plan replacement to avoid downtime.":"Equipment ready for deployment.",icon:(0,i.jsx)(u.Wrench,{className:"size-4"})})}O.tool_serial&&e.push({tone:"info",title:`Serial ${O.tool_serial}`,description:"Tracked for warranty and service history."})}else{let t=I(O.next_service_due);if(null!==t&&e.push({tone:t<0?"critical":t<=30?"warning":"info",title:t<0?`Service overdue by ${Math.abs(t)} days`:`Service due in ${t} days`,description:`Next scheduled for ${$(O.next_service_due)}`,icon:(0,i.jsx)(n.Gauge,{className:"size-4"})}),O.is_under_warranty&&O.warranty_expiration){let t=I(O.warranty_expiration);null!==t&&e.push({tone:t<0||t<=60?"warning":"positive",title:t<0?"Warranty expired":`Warranty active (${t} days remaining)`,description:`Covers until ${$(O.warranty_expiration)}`,icon:(0,i.jsx)(d.ShieldCheck,{className:"size-4"})})}}return e},[O.condition,O.is_under_warranty,O.next_service_due,O.tool_calibration_due,O.tool_serial,O.vehicle_fuel_type,O.vehicle_inspection_due,O.vehicle_next_service_mileage,O.vehicle_odometer,O.vehicle_registration_expiration,es,et,O.warranty_expiration]),em=I(O.next_service_due),ep=I(O.warranty_expiration),ev=[{key:"install",label:"Install Date",value:$(O.install_date),helperText:O.installed_by?`Installed by ${O.installed_by}`:void 0,icon:(0,i.jsx)(s.Calendar,{className:"text-muted-foreground h-4 w-4"})},{key:"last-service",label:"Last Service",value:$(O.last_service_date),helperText:O.last_service_job_id?"Linked job on record":void 0,icon:(0,i.jsx)(u.Wrench,{className:"text-muted-foreground h-4 w-4"})},{key:"next-service",label:"Next Service Due",value:$(O.next_service_due),helperText:null!==em?em<0?`${Math.abs(em)} days overdue`:`Due in ${em} days`:void 0,icon:(0,i.jsx)(n.Gauge,{className:"text-muted-foreground h-4 w-4"})},{key:"warranty",label:"Warranty",value:O.is_under_warranty?"Active":"Expired",helperText:O.warranty_expiration&&null!==ep?ep<0?`Expired ${Math.abs(ep)} days ago`:`Expires in ${ep} days`:O.warranty_expiration?`Expires ${$(O.warranty_expiration)}`:void 0,icon:(0,i.jsx)(d.ShieldCheck,{className:"text-muted-foreground h-4 w-4"})}],ej=ev.length>0?(0,i.jsx)(j.DetailPageSurface,{className:"w-full",padding:"lg",variant:"muted",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-foreground text-base font-semibold",children:"Lifecycle Overview"}),(0,i.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:ev.map(({key:e,label:t,value:s,helperText:a,icon:n})=>(0,i.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[n,(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:t}),(0,i.jsx)("span",{className:"text-sm font-semibold",children:s}),a?(0,i.jsx)("span",{className:"text-muted-foreground text-xs",children:a}):null]})]})},e))})]})}):null,eg=ex.length>0?(0,i.jsx)(j.DetailPageSurface,{className:"w-full",padding:"lg",variant:"muted",children:(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsx)("h3",{className:"text-foreground text-base font-semibold",children:"Smart Insights"}),(0,i.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:ex.map(e=>(0,i.jsx)("div",{className:`rounded-md border p-3 text-sm ${ea[e.tone]}`,children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[e.icon&&(0,i.jsx)("div",{className:"text-muted-foreground mt-0.5",children:e.icon}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("p",{className:"text-foreground font-medium",children:e.title}),(0,i.jsx)("p",{className:"text-muted-foreground text-xs",children:e.description})]})]})},`${e.title}-${e.description}`))})]})}):null,eb=eg||ej?(0,i.jsxs)("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-4",children:[eg,ej]}):null,ey=(0,m.useMemo)(()=>{let e=[{id:"equipment-details",title:"Equipment Details",icon:(0,i.jsx)(r.Package,{className:"size-4"}),defaultOpen:!0,content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Equipment Number"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.equipment_number||O.id.slice(0,8)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Classification"}),(0,i.jsx)(f.Input,{readOnly:!0,value:X})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Type"}),(0,i.jsx)(f.Input,{readOnly:!0,value:"N/A"!==Z?Z:"Unspecified"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Manufacturer"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.manufacturer||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Model"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.model||"N/A"})]}),O.serial_number&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Serial Number"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.serial_number})]}),O.model_year&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Model Year"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.model_year.toString()})]}),O.location&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Location"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.location})]}),ee&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Asset Category"}),(0,i.jsx)(f.Input,{readOnly:!0,value:ee})]}),ei&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Asset Subcategory"}),(0,i.jsx)(f.Input,{readOnly:!0,value:ei})]}),O.capacity&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Capacity"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.capacity})]}),O.efficiency&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Efficiency"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.efficiency})]}),O.fuel_type&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Fuel Type"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.fuel_type})]})]})})}];if(et){let s="number"==typeof O.vehicle_next_service_mileage&&"number"==typeof O.vehicle_odometer?O.vehicle_next_service_mileage-O.vehicle_odometer:null;e.push({id:"fleet-profile",title:"Fleet Profile",icon:(0,i.jsx)(c.Truck,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Make"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_make||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Model"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_model||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Year"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_year?O.vehicle_year.toString():"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"VIN"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_vin||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"License / Unit"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_license_plate||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Fuel Type"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.vehicle_fuel_type?C(O.vehicle_fuel_type):"N/A"})]})]})})}),e.push({id:"fleet-service",title:"Service Metrics",icon:(0,i.jsx)(n.Gauge,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Odometer"}),(0,i.jsx)(f.Input,{readOnly:!0,value:L(O.vehicle_odometer,"mi")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Last Service Mileage"}),(0,i.jsx)(f.Input,{readOnly:!0,value:L(O.vehicle_last_service_mileage,"mi")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Next Service Mileage"}),(0,i.jsx)(f.Input,{readOnly:!0,value:L(O.vehicle_next_service_mileage,"mi")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Remaining Until Service"}),(0,i.jsx)(f.Input,{readOnly:!0,value:null===s?"N/A":s<0?`Past due by ${L(Math.abs(s),"mi")}`:L(s,"mi")})]})]})})}),e.push({id:"fleet-compliance",title:"Compliance & Renewals",icon:(0,i.jsx)(t.AlertTriangle,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Registration Expires"}),(0,i.jsx)(f.Input,{readOnly:!0,value:$(O.vehicle_registration_expiration)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Inspection Due"}),(0,i.jsx)(f.Input,{readOnly:!0,value:$(O.vehicle_inspection_due)})]})]})})})}return es&&(e.push({id:"tool-profile",title:"Tool Profile",icon:(0,i.jsx)(u.Wrench,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Tool Serial"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.tool_serial||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Primary Use"}),(0,i.jsx)(f.Input,{readOnly:!0,value:ei||ee||"N/A"})]})]})})}),e.push({id:"tool-calibration",title:"Calibration & Warranty",icon:(0,i.jsx)(n.Gauge,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Calibration Due"}),(0,i.jsx)(f.Input,{readOnly:!0,value:$(O.tool_calibration_due)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Warranty Expires"}),(0,i.jsx)(f.Input,{readOnly:!0,value:$(O.warranty_expiration)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Condition"}),(0,i.jsx)(f.Input,{readOnly:!0,value:C(O.condition)})]})]})})})),(O.install_date||O.installed_by||M)&&e.push({id:"installation",title:"Installation",icon:(0,i.jsx)(s.Calendar,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[O.install_date&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Install Date"}),(0,i.jsx)(f.Input,{readOnly:!0,value:new Date(O.install_date).toLocaleDateString()})]}),O.installed_by&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Installed By"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.installed_by})]})]}),M&&(0,i.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{className:"mb-2 block",children:"Install Job"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:M.title||`Job #${M.job_number}`}),(0,i.jsxs)("p",{className:"text-muted-foreground text-sm",children:["#",M.job_number]}),M.completed_at&&(0,i.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:["Completed:"," ",new Date(M.completed_at).toLocaleDateString()]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(b.Badge,{variant:"outline",children:M.status})})]}),(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsx)(h.default,{href:`/dashboard/work/${M.id}`,children:"View Job"})})]})})]})})}),P&&e.push({id:"last-service",title:"Last Service",icon:(0,i.jsx)(u.Wrench,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{className:"mb-2 block",children:"Most Recent Service"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:P.title||`Job #${P.job_number}`}),(0,i.jsxs)("p",{className:"text-muted-foreground text-sm",children:["#",P.job_number]}),P.completed_at&&(0,i.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:["Completed:"," ",new Date(P.completed_at).toLocaleDateString()]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(b.Badge,{variant:"outline",children:P.status})})]}),(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsx)(h.default,{href:`/dashboard/work/${P.id}`,children:"View Job"})})]})})})}),E.length>0&&e.push({id:"upcoming-maintenance",title:"Upcoming Maintenance",icon:(0,i.jsx)(s.Calendar,{className:"size-4"}),count:E.length,content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsx)("div",{className:"space-y-3",children:E.map(e=>(0,i.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:new Date(e.scheduled_start).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,i.jsx)("p",{className:"text-muted-foreground text-sm",children:new Date(e.scheduled_start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),e.job&&(0,i.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:e.job.title||`Job #${e.job.job_number}`}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(b.Badge,{variant:"outline",children:e.status})})]}),(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsx)(h.default,{href:`/dashboard/appointments/${e.id}`,children:"View"})})]})},e.id))})})}),(O.is_under_warranty||O.warranty_expiration)&&e.push({id:"warranty",title:"Warranty",icon:(0,i.jsx)(d.ShieldCheck,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Under Warranty"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.is_under_warranty?"Yes":"No"})]}),O.warranty_expiration&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Warranty Expiration"}),(0,i.jsx)(f.Input,{readOnly:!0,value:new Date(O.warranty_expiration).toLocaleDateString()})]}),O.warranty_provider&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Warranty Provider"}),(0,i.jsx)(f.Input,{readOnly:!0,value:O.warranty_provider})]}),O.warranty_notes&&(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)(_.Label,{children:"Warranty Notes"}),(0,i.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:O.warranty_notes})]})]})})}),B.length>0&&e.push({id:"service-history",title:"Service History",icon:(0,i.jsx)(u.Wrench,{className:"size-4"}),count:B.length,content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsx)("div",{className:"space-y-2",children:B.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:e.service_type||"Service"}),(0,i.jsx)("p",{className:"text-muted-foreground text-xs",children:e.serviced_at?new Date(e.serviced_at).toLocaleDateString():"Date unknown"})]}),e.job_id&&(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,i.jsx)(h.default,{href:`/dashboard/work/${e.job_id}`,children:"View Job"})})]},e.id))})})}),(O.last_service_date||O.next_service_due)&&e.push({id:"maintenance-schedule",title:"Maintenance Schedule",icon:(0,i.jsx)(s.Calendar,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[O.last_service_date&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Last Service"}),(0,i.jsx)(f.Input,{readOnly:!0,value:new Date(O.last_service_date).toLocaleDateString()})]}),O.next_service_due&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Next Service Due"}),(0,i.jsx)(f.Input,{readOnly:!0,value:new Date(O.next_service_due).toLocaleDateString()})]}),O.service_interval_days&&(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Service Interval"}),(0,i.jsx)(f.Input,{readOnly:!0,value:`${O.service_interval_days} days`})]})]})})}),D&&e.push({id:"customer-details",title:"Customer Details",icon:(0,i.jsx)(o.User,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,i.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Name"}),(0,i.jsx)("p",{className:"text-sm",children:D.display_name||`${D.first_name||""} ${D.last_name||""}`.trim()||"Unknown"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Email"}),(0,i.jsx)("p",{className:"text-sm",children:D.email||"N/A"})]})]}),(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,i.jsx)(h.default,{href:`/dashboard/customers/${D.id}`,children:"View Full Profile"})})]})})}),z&&e.push({id:"property-location",title:"Property Location",icon:(0,i.jsx)(l.MapPin,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.Label,{children:"Service Address"}),(0,i.jsxs)("p",{className:"text-sm",children:[z.address,z.address2&&`, ${z.address2}`]}),(0,i.jsxs)("p",{className:"text-muted-foreground text-sm",children:[z.city,", ",z.state," ",z.zip_code]})]}),(0,i.jsx)(y.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${z.address}, ${z.city}, ${z.state}`)}`,rel:"noopener noreferrer",target:"_blank",children:[(0,i.jsx)(l.MapPin,{className:"mr-2 size-4"}),"Open in Google Maps"]})})]})})}),e.push({id:"tags",title:"Tags",icon:(0,i.jsx)(r.Package,{className:"size-4"}),content:(0,i.jsx)(N.UnifiedAccordionContent,{children:(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)("div",{className:"bg-muted/50 rounded-md",children:(0,i.jsxs)("div",{className:"flex flex-col gap-3 p-4",children:[(0,i.jsx)("span",{className:"text-muted-foreground text-xs font-medium",children:"Organize equipment with tags:"}),(0,i.jsx)(g.EntityTags,{entityId:O.id,entityType:"equipment",onUpdateTags:async(e,i)=>{(await (0,p.updateEntityTags)("equipment",e,i)).success&&J.refresh()},tags:K})]})})})})}),e},[ee,ei,X,O,D,z,M,P,E,B,es,et,Z,K,J]),ef=(0,m.useMemo)(()=>{let e=[];return D&&e.push({id:`customer-${D.id}`,type:"customer",title:D.display_name||`${D.first_name||""} ${D.last_name||""}`.trim()||"Unknown Customer",subtitle:D.email||D.phone||void 0,href:`/dashboard/customers/${D.id}`}),z&&e.push({id:`property-${z.id}`,type:"property",title:z.address||z.name||"Property",subtitle:`${z.city||""}, ${z.state||""}`.trim()||void 0,href:`/dashboard/work/properties/${z.id}`}),U&&e.push({id:`service-plan-${U.id}`,type:"service_plan",title:U.name||`Plan ${U.plan_number||U.id.slice(0,8)}`,subtitle:U.status,href:`/dashboard/work/maintenance-plans/${U.id}`,badge:U.status?{label:U.status,variant:"outline"}:void 0}),e},[D,z,U]);return F?(0,i.jsx)(v.DetailPageContentLayout,{activities:W,attachments:R,beforeContent:eb,className:"mx-auto w-full max-w-7xl",customSections:ey,defaultOpenSection:"equipment-details",header:eh,notes:V,relatedItems:ef,showStandardSections:{activities:!0,notes:!0,attachments:!0,relatedItems:!0},storageKey:"equipment-details"}):(0,i.jsx)("div",{className:"flex-1 p-6",children:"Loading..."})}e.s(["EquipmentPageContent",()=>A],720582)},745259,e=>{"use strict";var i=e.i(111043),t=e.i(946672),s=e.i(66774),a=e.i(882525),n=e.i(501651),l=e.i(904653),r=e.i(970799),d=e.i(169820),c=e.i(528347);e.i(889265);var o=e.i(677607);e.i(539870);var u=e.i(846358);e.i(287133);var h=e.i(120109);e.i(794747);var x=e.i(513990),m=e.i(51052);function p(){let e=(0,l.usePathname)(),p=(0,l.useRouter)(),{toast:v}=(0,m.useToast)(),j=e?.split("/").pop(),[g,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),_=async()=>{if(!j)return void v.error("Equipment ID not found");f(!0);try{let e=await (0,d.archiveEquipment)(j);e.success?(v.success("Equipment archived successfully"),b(!1),p.push("/dashboard/work/equipment")):v.error(e.error||"Failed to archive equipment")}catch{v.error("Failed to archive equipment")}finally{f(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsxs)(x.TooltipProvider,{children:[(0,i.jsxs)(x.Tooltip,{children:[(0,i.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,i.jsx)(o.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsxs)("a",{href:`/dashboard/work/new?equipmentId=${j}`,children:[(0,i.jsx)(n.Wrench,{}),(0,i.jsx)("span",{className:"hidden md:inline",children:"Service Job"})]})})}),(0,i.jsx)(x.TooltipContent,{children:(0,i.jsx)("p",{children:"Create service job for this equipment"})})]}),(0,i.jsxs)(x.Tooltip,{children:[(0,i.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,i.jsx)(o.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsxs)("a",{href:`/dashboard/work/equipment/${j}?tab=maintenance`,children:[(0,i.jsx)(s.ClipboardList,{}),(0,i.jsx)("span",{className:"hidden lg:inline",children:"Maintenance"})]})})}),(0,i.jsx)(x.TooltipContent,{children:(0,i.jsx)("p",{children:"View maintenance log"})})]}),(0,i.jsxs)(x.Tooltip,{children:[(0,i.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,i.jsx)(o.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,i.jsxs)("a",{href:`/dashboard/work/equipment/new?cloneFrom=${j}`,children:[(0,i.jsx)(a.Copy,{}),(0,i.jsx)("span",{className:"hidden lg:inline",children:"Copy"})]})})}),(0,i.jsx)(x.TooltipContent,{children:(0,i.jsx)("p",{children:"Duplicate equipment record"})})]})]}),(0,i.jsx)(h.Separator,{className:"h-8",orientation:"vertical"}),(0,i.jsx)(c.ImportExportDropdownLazy,{dataType:"equipment"}),(0,i.jsx)(h.Separator,{className:"h-8",orientation:"vertical"}),(0,i.jsx)(x.TooltipProvider,{children:(0,i.jsxs)(x.Tooltip,{children:[(0,i.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,i.jsxs)(o.Button,{className:"border-destructive/40 text-destructive hover:bg-destructive/10 h-8 gap-1.5",onClick:()=>b(!0),size:"sm",variant:"outline",children:[(0,i.jsx)(t.Archive,{className:"size-3.5"}),(0,i.jsx)("span",{className:"hidden lg:inline",children:"Archive"})]})}),(0,i.jsx)(x.TooltipContent,{children:(0,i.jsx)("p",{children:"Archive equipment"})})]})})]}),(0,i.jsx)(u.Dialog,{onOpenChange:b,open:g,children:(0,i.jsxs)(u.DialogContent,{children:[(0,i.jsxs)(u.DialogHeader,{children:[(0,i.jsx)(u.DialogTitle,{children:"Archive Equipment"}),(0,i.jsx)(u.DialogDescription,{children:"Are you sure you want to archive this equipment? Archived records can be restored within 90 days."})]}),(0,i.jsxs)(u.DialogFooter,{children:[(0,i.jsx)(o.Button,{disabled:y,onClick:()=>b(!1),variant:"outline",children:"Cancel"}),(0,i.jsx)(o.Button,{disabled:y,onClick:_,variant:"destructive",children:y?"Archiving...":"Archive Equipment"})]})]})})]})}e.s(["EquipmentDetailToolbarActions",()=>p])}]);