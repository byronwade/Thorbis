(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,845766,t=>{"use strict";var e=t.i(607199),r=t.i(659885),a=t.i(760783),n=t.i(966150),i=t.i(654152),l=t.i(612938),o=t.i(697619),s=t.i(625393);t.i(991577);var d=t.i(352195),p=t.i(460605),c=t.i(488446),h=t.i(219412),f=t.i(334236),u=t.i(187580),g=t.i(114605),m=t.i(211986),y=t.i(12669),x=t.i(373593),k=t.i(814826),b=t.i(472737),_=t.i(358424),w=t.i(692423),M=t.i(570126),L=(0,s.__name)((t,e,r,a,n,i)=>{e.arrowTypeStart&&v(t,"start",e.arrowTypeStart,r,a,n,i),e.arrowTypeEnd&&v(t,"end",e.arrowTypeEnd,r,a,n,i)},"addEdgeMarkers"),S={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},v=(0,s.__name)((t,e,r,a,n,i,l)=>{let o=S[r];if(!o)return void s.log.warn(`Unknown arrow type: ${r}`);let d=o.type,p=`${n}_${i}-${d}${"start"===e?"Start":"End"}`;if(l&&""!==l.trim()){let r=l.replace(/[^\dA-Za-z]/g,"_"),n=`${p}_${r}`;if(!document.getElementById(n)){let t=document.getElementById(p);if(t){let e=t.cloneNode(!0);e.id=n,e.querySelectorAll("path, circle, line").forEach(t=>{t.setAttribute("stroke",l),o.fill&&t.setAttribute("fill",l)}),t.parentNode?.appendChild(e)}}t.attr(`marker-${e}`,`url(${a}#${n})`)}else t.attr(`marker-${e}`,`url(${a}#${p})`)},"addEdgeMarker"),O=new Map,$=new Map,T=(0,s.__name)(()=>{O.clear(),$.clear()},"clear"),E=(0,s.__name)(t=>t?t.reduce((t,e)=>t+";"+e,""):"","getLabelStyles"),C=(0,s.__name)(async(t,e)=>{let a,l=(0,o.evaluate)((0,o.getConfig2)().flowchart.htmlLabels),{labelStyles:d}=(0,n.styles2String)(e);e.labelStyle=d;let p=await (0,i.createText)(t,e.label,{style:e.labelStyle,useHtmlLabels:l,addSvgBackground:!0,isNode:!1});s.log.info("abc82",e,e.labelType);let c=t.insert("g").attr("class","edgeLabel"),h=c.insert("g").attr("class","label").attr("data-id",e.id);h.node().appendChild(p);let f=p.getBBox();if(l){let t=p.children[0],e=(0,w.select)(p);f=t.getBoundingClientRect(),e.attr("width",f.width),e.attr("height",f.height)}if(h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),O.set(e.id,c),e.width=f.width,e.height=f.height,e.startLabelLeft){let n=await (0,r.createLabel_default)(e.startLabelLeft,E(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),$.get(e.id)||$.set(e.id,{}),$.get(e.id).startLeft=i,W(a,e.startLabelLeft)}if(e.startLabelRight){let n=await (0,r.createLabel_default)(e.startLabelRight,E(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=i.node().appendChild(n),l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),$.get(e.id)||$.set(e.id,{}),$.get(e.id).startRight=i,W(a,e.startLabelRight)}if(e.endLabelLeft){let n=await (0,r.createLabel_default)(e.endLabelLeft,E(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),$.get(e.id)||$.set(e.id,{}),$.get(e.id).endLeft=i,W(a,e.endLabelLeft)}if(e.endLabelRight){let n=await (0,r.createLabel_default)(e.endLabelRight,E(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),$.get(e.id)||$.set(e.id,{}),$.get(e.id).endRight=i,W(a,e.endLabelRight)}return p},"insertEdgeLabel");function W(t,e){(0,o.getConfig2)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,s.__name)(W,"setTerminalWidth");var j=(0,s.__name)((t,e)=>{s.log.debug("Moving label abc88 ",t.id,t.label,O.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath,n=(0,o.getConfig2)(),{subGraphTitleTotalMargin:i}=(0,a.getSubGraphTitleMargins)(n);if(t.label){let a=O.get(t.id),n=t.x,o=t.y;if(r){let a=l.utils_default.calcLabelPosition(r);s.log.debug("Moving label "+t.label+" from (",n,",",o,") to (",a.x,",",a.y,") abc88"),e.updatedPath&&(n=a.x,o=a.y)}a.attr("transform",`translate(${n}, ${o+i/2})`)}if(t.startLabelLeft){let e=$.get(t.id).startLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.startLabelRight){let e=$.get(t.id).startRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.endLabelLeft){let e=$.get(t.id).endLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.endLabelRight){let e=$.get(t.id).endRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}},"positionEdgeLabel"),B=(0,s.__name)((t,e)=>{let r=t.x,a=t.y,n=Math.abs(e.x-r),i=Math.abs(e.y-a),l=t.width/2,o=t.height/2;return n>=l||i>=o},"outsideNode"),P=(0,s.__name)((t,e,r)=>{s.log.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let a=t.x,n=t.y,i=Math.abs(a-r.x),l=t.width/2,o=r.x<e.x?l-i:l+i,d=t.height/2,p=Math.abs(e.y-r.y),c=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*l>Math.abs(a-e.x)*d){let t=r.y<e.y?e.y-d-n:n-d-e.y;o=c*t/p;let a={x:r.x<e.x?r.x+o:r.x-c+o,y:r.y<e.y?r.y+p-t:r.y-p+t};return 0===o&&(a.x=e.x,a.y=e.y),0===c&&(a.x=e.x),0===p&&(a.y=e.y),s.log.debug(`abc89 top/bottom calc, Q ${p}, q ${t}, R ${c}, r ${o}`,a),a}{let t=p*(o=r.x<e.x?e.x-l-a:a-l-e.x)/c,n=r.x<e.x?r.x+c-o:r.x-c+o,i=r.y<e.y?r.y+t:r.y-t;return s.log.debug(`sides calc abc89, Q ${p}, q ${t}, R ${c}, r ${o}`,{_x:n,_y:i}),0===o&&(n=e.x,i=e.y),0===c&&(n=e.x),0===p&&(i=e.y),{x:n,y:i}}},"intersection"),X=(0,s.__name)((t,e)=>{s.log.warn("abc88 cutPathAtIntersect",t,e);let r=[],a=t[0],n=!1;return t.forEach(t=>{if(s.log.info("abc88 checking point",t,e),B(e,t)||n)s.log.warn("abc88 outside",t,a),a=t,n||r.push(t);else{let i=P(e,a,t);s.log.debug("abc88 inside",t,a,i),s.log.debug("abc88 intersection",i,e);let l=!1;r.forEach(t=>{l=l||t.x===i.x&&t.y===i.y}),r.some(t=>t.x===i.x&&t.y===i.y)?s.log.warn("abc88 no intersect",i,r):r.push(i),n=!0}}),s.log.debug("returning points",r),r},"cutPathAtIntersect");function Y(t){let e=[],r=[];for(let a=1;a<t.length-1;a++){let n=t[a-1],i=t[a],l=t[a+1];n.x===i.x&&i.y===l.y&&Math.abs(i.x-l.x)>5&&Math.abs(i.y-n.y)>5?(e.push(i),r.push(a)):n.y===i.y&&i.x===l.x&&Math.abs(i.x-n.x)>5&&Math.abs(i.y-l.y)>5&&(e.push(i),r.push(a))}return{cornerPoints:e,cornerPointPositions:r}}(0,s.__name)(Y,"extractCornerPoints");var A=(0,s.__name)(function(t,e,r){let a=e.x-t.x,n=e.y-t.y,i=r/Math.sqrt(a*a+n*n);return{x:e.x-i*a,y:e.y-i*n}},"findAdjacentPoint"),R=(0,s.__name)(function(t){let{cornerPointPositions:e}=Y(t),r=[];for(let a=0;a<t.length;a++)if(e.includes(a)){let e=t[a-1],n=t[a+1],i=t[a],l=A(e,i,5),o=A(n,i,5),d=o.x-l.x,p=o.y-l.y;r.push(l);let c=2*Math.sqrt(2),h={x:i.x,y:i.y};Math.abs(n.x-e.x)>10&&Math.abs(n.y-e.y)>=10?(s.log.debug("Corner point fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),h=i.x===l.x?{x:d<0?l.x-5+c:l.x+5-c,y:p<0?l.y-c:l.y+c}:{x:d<0?l.x-c:l.x+c,y:p<0?l.y-5+c:l.y+5-c}):s.log.debug("Corner point skipping fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),r.push(h,o)}else r.push(t[a]);return r},"fixCorners"),z=(0,s.__name)((t,e,r)=>{let a=Array(Math.floor((t-e-r)/4)).fill("2 2").join(" ");return`0 ${e} ${a} ${r}`},"generateDashArray"),H=(0,s.__name)(function(t,r,a,i,S,v,O,$=!1){let T,E,{handDrawnSeed:C}=(0,o.getConfig2)(),W=r.points,j=!1,B=[];for(let t in r.cssCompiledStyles)(0,n.isLabelStyle)(t)||B.push(r.cssCompiledStyles[t]);s.log.debug("UIO intersect check",r.points,v.x,S.x),v.intersect&&S.intersect&&!$&&((W=W.slice(1,r.points.length-1)).unshift(S.intersect(W[0])),s.log.debug("Last point UIO",r.start,"-->",r.end,W[W.length-1],v,v.intersect(W[W.length-1])),W.push(v.intersect(W[W.length-1])));let P=btoa(JSON.stringify(W));r.toCluster&&(s.log.info("to cluster abc88",a.get(r.toCluster)),W=X(r.points,a.get(r.toCluster).node),j=!0),r.fromCluster&&(s.log.debug("from cluster abc88",a.get(r.fromCluster),JSON.stringify(W,null,2)),W=X(W.reverse(),a.get(r.fromCluster).node).reverse(),j=!0);let Y=W.filter(t=>!Number.isNaN(t.y));Y=R(Y);let A=d.curveBasis;switch(A=p.curveLinear,r.curve){case"linear":A=p.curveLinear;break;case"basis":default:A=d.curveBasis;break;case"cardinal":A=c.curveCardinal;break;case"bumpX":A=h.curveBumpX;break;case"bumpY":A=f.curveBumpY;break;case"catmullRom":A=u.curveCatmullRom;break;case"monotoneX":A=g.curveMonotoneX;break;case"monotoneY":A=m.curveMonotoneY;break;case"natural":A=y.curveNatural;break;case"step":A=x.curveStep;break;case"stepAfter":A=k.curveStepAfter;break;case"stepBefore":A=b.curveStepBefore}let{x:H,y:N}=(0,e.getLineFunctionsWithOffset)(r),U=(0,_.line)().x(H).y(N).curve(A);switch(r.thickness){case"normal":default:T="edge-thickness-normal";break;case"thick":T="edge-thickness-thick";break;case"invisible":T="edge-thickness-invisible"}switch(r.pattern){case"solid":default:T+=" edge-pattern-solid";break;case"dotted":T+=" edge-pattern-dotted";break;case"dashed":T+=" edge-pattern-dashed"}let q="rounded"===r.curve?I(F(Y,r),5):U(Y),D=Array.isArray(r.style)?r.style:[r.style],Q=D.find(t=>t?.startsWith("stroke:")),Z=!1;if("handDrawn"===r.look){let e=M.default.svg(t);Object.assign([],Y);let a=e.path(q,{roughness:.3,seed:C});T+=" transition";let n=(E=(0,w.select)(a).select("path").attr("id",r.id).attr("class"," "+T+(r.classes?" "+r.classes:"")).attr("style",D?D.reduce((t,e)=>t+";"+e,""):"")).attr("d");E.attr("d",n),t.node().appendChild(E.node())}else{let a=B.join(";"),n=D?D.reduce((t,e)=>t+e+";",""):"",i="";r.animate&&(i=" edge-animation-fast"),r.animation&&(i=" edge-animation-"+r.animation);let l=(a?a+";"+n+";":n)+";"+(D?D.reduce((t,e)=>t+";"+e,""):"");E=t.append("path").attr("d",q).attr("id",r.id).attr("class"," "+T+(r.classes?" "+r.classes:"")+(i??"")).attr("style",l),Q=l.match(/stroke:([^;]+)/)?.[1],Z=!0===r.animate||!!r.animation||a.includes("animation");let o=E.node(),s="function"==typeof o.getTotalLength?o.getTotalLength():0,d=e.markerOffsets2[r.arrowTypeStart]||0,p=e.markerOffsets2[r.arrowTypeEnd]||0;if("neo"===r.look&&!Z){let t="dotted"===r.pattern||"dashed"===r.pattern?z(s,d,p):`0 ${d} ${s-d-p} ${p}`,e=`stroke-dasharray: ${t}; stroke-dashoffset: 0;`;E.attr("style",e+E.attr("style"))}}E.attr("data-edge",!0),E.attr("data-et","edge"),E.attr("data-id",r.id),E.attr("data-points",P),r.showPoints&&Y.forEach(e=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",e.x).attr("cy",e.y)});let G="";((0,o.getConfig2)().flowchart.arrowMarkerAbsolute||(0,o.getConfig2)().state.arrowMarkerAbsolute)&&(G=(G=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(").replace(/\)/g,"\\)")),s.log.info("arrowTypeStart",r.arrowTypeStart),s.log.info("arrowTypeEnd",r.arrowTypeEnd),L(E,r,G,O,i,Q);let K=Math.floor(W.length/2),J=W[K];l.utils_default.isLabelCoordinateInPath(J,E.attr("d"))||(j=!0);let V={};return j&&(V.updatedPath=W),V.originalPath=r.points,V},"insertEdge");function I(t,e){if(t.length<2)return"";let r="",a=t.length;for(let n=0;n<a;n++){let i=t[n],l=t[n-1],o=t[n+1];if(0===n)r+=`M${i.x},${i.y}`;else if(n===a-1)r+=`L${i.x},${i.y}`;else{let t=i.x-l.x,a=i.y-l.y,n=o.x-i.x,s=o.y-i.y,d=Math.hypot(t,a),p=Math.hypot(n,s);if(d<1e-5||p<1e-5){r+=`L${i.x},${i.y}`;continue}let c=t/d,h=a/d,f=n/p,u=s/p,g=Math.acos(Math.max(-1,Math.min(1,c*f+h*u)));if(g<1e-5||1e-5>Math.abs(Math.PI-g)){r+=`L${i.x},${i.y}`;continue}let m=Math.min(e/Math.sin(g/2),d/2,p/2),y=i.x-c*m,x=i.y-h*m,k=i.x+f*m,b=i.y+u*m;r+=`L${y},${x}Q${i.x},${i.y} ${k},${b}`}}return r}function N(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};let r=e.x-t.x,a=e.y-t.y;return{angle:Math.atan2(a,r),deltaX:r,deltaY:a}}function F(t,r){let a=t.map(t=>({...t}));if(t.length>=2&&e.markerOffsets[r.arrowTypeStart]){let n=e.markerOffsets[r.arrowTypeStart],i=t[0],{angle:l}=N(i,t[1]),o=n*Math.cos(l),s=n*Math.sin(l);a[0].x=i.x+o,a[0].y=i.y+s}let n=t.length;if(n>=2&&e.markerOffsets[r.arrowTypeEnd]){let i=e.markerOffsets[r.arrowTypeEnd],l=t[n-1],{angle:o}=N(t[n-2],l),s=i*Math.cos(o),d=i*Math.sin(o);a[n-1].x=l.x-s,a[n-1].y=l.y-d}return a}(0,s.__name)(I,"generateRoundedPath"),(0,s.__name)(N,"calculateDeltaAndAngle"),(0,s.__name)(F,"applyMarkerOffsetsToPoints");var U=(0,s.__name)((t,e,r,a)=>{e.forEach(e=>{ti[e](t,r,a)})},"insertMarkers"),q=(0,s.__name)((t,e,r)=>{s.log.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),D=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),Q=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Z=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),G=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),K=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),J=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),V=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),tt=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),te=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),tr=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),a.append("path").attr("d","M9,0 L9,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),ta=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),tn=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),a.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),ti={extension:q,composition:D,aggregation:Q,dependency:Z,lollipop:G,point:K,circle:J,cross:V,barb:tt,only_one:te,zero_or_one:tr,one_or_more:ta,zero_or_more:tn,requirement_arrow:(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),requirement_contains:(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");a.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),a.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),a.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")};t.s(["clear",()=>T,"insertEdge",()=>H,"insertEdgeLabel",()=>C,"markers_default",()=>U,"positionEdgeLabel",()=>j])},760783,t=>{"use strict";var e=(0,t.i(625393).__name)(({flowchart:t})=>{let e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:e+r}},"getSubGraphTitleMargins");t.s(["getSubGraphTitleMargins",()=>e])},966150,t=>{"use strict";var e=t.i(697619),r=t.i(625393),a=(0,r.__name)(t=>{let{handDrawnSeed:r}=(0,e.getConfig2)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:r}},"solidStateFill"),n=(0,r.__name)(t=>{let e=i([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),i=(0,r.__name)(t=>{let e=new Map;return t.forEach(t=>{let[r,a]=t.split(":");e.set(r.trim(),a?.trim())}),e},"styles2Map"),l=(0,r.__name)(t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t,"isLabelStyle"),o=(0,r.__name)(t=>{let{stylesArray:e}=n(t),r=[],a=[],i=[],o=[];return e.forEach(t=>{let e=t[0];l(e)?r.push(t.join(":")+" !important"):(a.push(t.join(":")+" !important"),e.includes("stroke")&&i.push(t.join(":")+" !important"),"fill"===e&&o.push(t.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:o}},"styles2String"),s=(0,r.__name)((t,r)=>{let{themeVariables:a,handDrawnSeed:i}=(0,e.getConfig2)(),{nodeBorder:l,mainBkg:o}=a,{stylesMap:s}=n(t);return Object.assign({roughness:.7,fill:s.get("fill")||o,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||l,seed:i,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:d(s.get("stroke-dasharray"))},r)},"userNodeOverrides"),d=(0,r.__name)(t=>{if(!t)return[0,0];let e=t.trim().split(/\s+/).map(Number);if(1===e.length){let t=isNaN(e[0])?0:e[0];return[t,t]}return[isNaN(e[0])?0:e[0],isNaN(e[1])?0:e[1]]},"getStrokeDashArray");t.s(["compileStyles",()=>n,"isLabelStyle",()=>l,"solidStateFill",()=>a,"styles2String",()=>o,"userNodeOverrides",()=>s])},251934,t=>{"use strict";Array.prototype.slice,t.s(["default",0,function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}])},358424,738404,895831,t=>{"use strict";var e=t.i(251934),r=t.i(459683),a=t.i(566635),n=t.i(199518);function i(t){return t[0]}function l(t){return t[1]}function o(t,o){var s=(0,r.default)(!0),d=null,p=a.default,c=null,h=(0,n.withPath)(f);function f(r){var a,n,i,l=(r=(0,e.default)(r)).length,f=!1;for(null==d&&(c=p(i=h())),a=0;a<=l;++a)!(a<l&&s(n=r[a],a,r))===f&&((f=!f)?c.lineStart():c.lineEnd()),f&&c.point(+t(n,a,r),+o(n,a,r));if(i)return c=null,i+""||null}return t="function"==typeof t?t:void 0===t?i:(0,r.default)(t),o="function"==typeof o?o:void 0===o?l:(0,r.default)(o),f.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)(+e),f):t},f.y=function(t){return arguments.length?(o="function"==typeof t?t:(0,r.default)(+t),f):o},f.defined=function(t){return arguments.length?(s="function"==typeof t?t:(0,r.default)(!!t),f):s},f.curve=function(t){return arguments.length?(p=t,null!=d&&(c=p(d)),f):p},f.context=function(t){return arguments.length?(null==t?d=c=null:c=p(d=t),f):d},f}t.s(["x",()=>i,"y",()=>l],738404),t.s(["default",0,o],895831),t.s(["line",0,o],358424)},654152,392380,t=>{"use strict";var e=t.i(612938),r=t.i(697619),a=t.i(625393);let n=Object.freeze({left:0,top:0,width:16,height:16}),i=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),l=Object.freeze({...n,...i}),o=Object.freeze({...l,body:"",hidden:!1});function s(t,e){let r,a,n=(r={},!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0),(a=((t.rotate||0)+(e.rotate||0))%4)&&(r.rotate=a),r);for(let r in o)r in i?r in t&&!(r in n)&&(n[r]=i[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function d(t,e,r){let a=t.icons,n=t.aliases||Object.create(null),i={};function l(t){i=s(a[t]||n[t],i)}return l(e),r.forEach(l),s(t,i)}let p=Object.freeze({...Object.freeze({width:null,height:null}),...i}),c=/(-?[0-9.]*[0-9]+[0-9.]*)/g,h=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function f(t,e,r){if(1===e)return t;if(r=r||100,"number"==typeof t)return Math.ceil(t*e*r)/r;if("string"!=typeof t)return t;let a=t.split(c);if(null===a||!a.length)return t;let n=[],i=a.shift(),l=h.test(i);for(;;){if(l){let t=parseFloat(i);isNaN(t)?n.push(i):n.push(Math.ceil(t*e*r)/r)}else n.push(i);if(void 0===(i=a.shift()))return n.join("");l=!l}}let u=/\sid="(\S+)"/g,g="IconifyId"+Date.now().toString(16)+(0x1000000*Math.random()|0).toString(16),m=0,y=(t,e)=>!!t&&!!((e&&""===t.prefix||t.prefix)&&t.name);t.i(991577);var x=t.i(692423),k=t.i(289506);function b(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var a=Array.from("string"==typeof t?[t]:t);a[a.length-1]=a[a.length-1].replace(/\r?\n([\t ]*)$/,"");var n=a.reduce(function(t,e){var r=e.match(/\n([\t ]+|(?!\s).)/g);return r?t.concat(r.map(function(t){var e,r;return null!=(r=null==(e=t.match(/[\t ]/g))?void 0:e.length)?r:0})):t},[]);if(n.length){var i=RegExp("\n[	 ]{"+Math.min.apply(Math,n)+"}","g");a=a.map(function(t){return t.replace(i,"\n")})}a[0]=a[0].replace(/^\r?\n/,"");var l=a[0];return e.forEach(function(t,e){var r=l.match(/(?:^|\n)( *)$/),n=r?r[1]:"",i=t;"string"==typeof t&&t.includes("\n")&&(i=String(t).split("\n").map(function(t,e){return 0===e?t:""+n+t}).join("\n")),l+=i+a[e+1]}),l}t.s(["dedent",()=>b],392380);var _={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},w=new Map,M=new Map,L=(0,a.__name)(t=>{for(let e of t){if(!e.name)throw Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(a.log.debug("Registering icon pack:",e.name),"loader"in e)M.set(e.name,e.loader);else if("icons"in e)w.set(e.name,e.icons);else throw a.log.error("Invalid icon loader:",e),Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),S=(0,a.__name)(async(t,e)=>{let r=((t,e,r,a="")=>{let n=t.split(":");if("@"===t.slice(0,1)){if(n.length<2||n.length>3)return null;a=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){let t=n.pop(),r=n.pop(),i={provider:n.length>0?n[0]:a,prefix:r,name:t};return e&&!y(i)?null:i}let i=n[0],l=i.split("-");if(l.length>1){let t={provider:a,prefix:l.shift(),name:l.join("-")};return e&&!y(t)?null:t}if(r&&""===a){let t={provider:a,prefix:"",name:i};return e&&!y(t,r)?null:t}return null})(t,!0,void 0!==e);if(!r)throw Error(`Invalid icon name: ${t}`);let n=r.prefix||e;if(!n)throw Error(`Icon name must contain a prefix: ${t}`);let i=w.get(n);if(!i){let t=M.get(n);if(!t)throw Error(`Icon set not found: ${r.prefix}`);try{i={...await t(),prefix:n},w.set(n,i)}catch(t){throw a.log.error(t),Error(`Failed to load icon set: ${r.prefix}`)}}let l=function(t,e){var r;let a,n,i;if(t.icons[e])return d(t,e,[]);let l=(r=[e],a=t.icons,n=t.aliases||Object.create(null),i=Object.create(null),(r||Object.keys(a).concat(Object.keys(n))).forEach(function t(e){if(a[e])return i[e]=[];if(!(e in i)){i[e]=null;let r=n[e]&&n[e].parent,a=r&&t(r);a&&(i[e]=[r].concat(a))}return i[e]}),i)[e];return l?d(t,e,l):null}(i,r.name);if(!l)throw Error(`Icon not found: ${t}`);return l},"getRegisteredIconData"),v=(0,a.__name)(async t=>{try{return await S(t),!0}catch{return!1}},"isIconAvailable"),O=(0,a.__name)(async(t,e,n)=>{var i;let o,s,d,c,h,y,x,k,b,w,M,L,v,O;try{o=await S(t,e?.fallbackPrefix)}catch(t){a.log.error(t),o=_}let $=(i=o,c={...l,...i},h={...p,...e},y={left:c.left,top:c.top,width:c.width,height:c.height},x=c.body,[c,h].forEach(t=>{var e,r,a,n;let i,l,o=[],s=t.hFlip,d=t.vFlip,p=t.rotate;switch(s?d?p+=2:(o.push("translate("+(y.width+y.left).toString()+" "+(0-y.top).toString()+")"),o.push("scale(-1 1)"),y.top=y.left=0):d&&(o.push("translate("+(0-y.left).toString()+" "+(y.height+y.top).toString()+")"),o.push("scale(1 -1)"),y.top=y.left=0),p<0&&(p-=4*Math.floor(p/4)),p%=4){case 1:o.unshift("rotate(90 "+(i=y.height/2+y.top).toString()+" "+i.toString()+")");break;case 2:o.unshift("rotate(180 "+(y.width/2+y.left).toString()+" "+(y.height/2+y.top).toString()+")");break;case 3:o.unshift("rotate(-90 "+(i=y.width/2+y.left).toString()+" "+i.toString()+")")}p%2==1&&(y.left!==y.top&&(i=y.left,y.left=y.top,y.top=i),y.width!==y.height&&(i=y.width,y.width=y.height,y.height=i)),o.length&&(e=x,r='<g transform="'+o.join(" ")+'">',a=(l=function(t,e="defs"){let r="",a=t.indexOf("<"+e);for(;a>=0;){let n=t.indexOf(">",a),i=t.indexOf("</"+e);if(-1===n||-1===i)break;let l=t.indexOf(">",i);if(-1===l)break;r+=t.slice(n+1,i).trim(),t=t.slice(0,a).trim()+t.slice(l+1)}return{defs:r,content:t}}(e)).defs,n=r+l.content+"</g>",x=a?"<defs>"+a+"</defs>"+n:n)}),k=h.width,b=h.height,w=y.width,M=y.height,null===k?s=f(d=null===b?"1em":"auto"===b?M:b,w/M):(s="auto"===k?w:k,d=null===b?f(s,M/w):"auto"===b?M:b),L={},(v=(t,e)=>{"unset"!==e&&"undefined"!==e&&"none"!==e&&(L[t]=e.toString())})("width",s),v("height",d),L.viewBox=(O=[y.left,y.top,w,M]).join(" "),{attributes:L,viewBox:O,body:x}),T=function(t,e){let r=-1===t.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let t in e)r+=" "+t+'="'+e[t]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}(function(t,e=g){let r,a=[];for(;r=u.exec(t);)a.push(r[1]);if(!a.length)return t;let n="suffix"+(0x1000000*Math.random()|Date.now()).toString(16);return a.forEach(r=>{let a="function"==typeof e?e(r):e+(m++).toString(),i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(RegExp('([#;"])('+i+')([")]|\\.[a-z])',"g"),"$1"+a+n+"$3")}),t=t.replace(RegExp(n,"g"),"")}($.body),{...$.attributes,...n});return(0,r.sanitizeText)(T,(0,r.getConfig)())},"getIconSVG");function $(t,{markdownAutoWrap:e}){let r=b(t.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"));return!1===e?r.replace(/ /g,"&nbsp;"):r}function T(t,e={}){let r=$(t,e),n=k.marked.lexer(r),i=[[]],l=0;function o(t,e="normal"){"text"===t.type?t.text.split("\n").forEach((t,r)=>{0!==r&&(l++,i.push([])),t.split(" ").forEach(t=>{(t=t.replace(/&#39;/g,"'"))&&i[l].push({content:t,type:e})})}):"strong"===t.type||"em"===t.type?t.tokens.forEach(e=>{o(e,t.type)}):"html"===t.type&&i[l].push({content:t.text,type:"normal"})}return(0,a.__name)(o,"processNode"),n.forEach(t=>{"paragraph"===t.type?t.tokens?.forEach(t=>{o(t)}):"html"===t.type?i[l].push({content:t.text,type:"normal"}):i[l].push({content:t.raw,type:"normal"})}),i}function E(t,{markdownAutoWrap:e}={}){let r=k.marked.lexer(t);function n(t){if("text"===t.type)return!1===e?t.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):t.text.replace(/\n */g,"<br/>");if("strong"===t.type)return`<strong>${t.tokens?.map(n).join("")}</strong>`;if("em"===t.type)return`<em>${t.tokens?.map(n).join("")}</em>`;if("paragraph"===t.type)return`<p>${t.tokens?.map(n).join("")}</p>`;if("space"===t.type)return"";else if("html"===t.type)return`${t.text}`;else if("escape"===t.type)return t.text;return a.log.warn(`Unsupported markdown: ${t.type}`),t.raw}return(0,a.__name)(n,"output"),r.map(n).join("")}function C(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(t=>t.segment):[...t]}function W(t,e){return j(t,[],C(e.content),e.type)}function j(t,e,r,a){if(0===r.length)return[{content:e.join(""),type:a},{content:"",type:a}];let[n,...i]=r,l=[...e,n];return t([{content:l.join(""),type:a}])?j(t,l,i,a):(0===e.length&&n&&(e.push(n),r.shift()),[{content:e.join(""),type:a},{content:r.join(""),type:a}])}function B(t,e){if(t.some(({content:t})=>t.includes("\n")))throw Error("splitLineToFitWidth does not support newlines in the line");return P(t,e)}function P(t,e,r=[],a=[]){if(0===t.length)return a.length>0&&r.push(a),r.length>0?r:[];let n="";" "===t[0].content&&(n=" ",t.shift());let i=t.shift()??{content:" ",type:"normal"},l=[...a];if(""!==n&&l.push({content:n,type:"normal"}),l.push(i),e(l))return P(t,e,r,l);if(a.length>0)r.push(a),t.unshift(i);else if(i.content){let[a,n]=W(e,i);r.push([a]),n.content&&t.unshift(n)}return P(t,e,r)}function X(t,e){e&&t.attr("style",e)}async function Y(t,e,a,n,i=!1,l=(0,r.getConfig)()){let o=t.append("foreignObject");o.attr("width",`${10*a}px`),o.attr("height",`${10*a}px`);let s=o.append("xhtml:div"),d=(0,r.hasKatex)(e.label)?await (0,r.renderKatexSanitized)(e.label.replace(r.common_default.lineBreakRegex,"\n"),l):(0,r.sanitizeText)(e.label,l),p=e.isNode?"nodeLabel":"edgeLabel",c=s.append("span");c.html(d),X(c,e.labelStyle),c.attr("class",`${p} ${n}`),X(s,e.labelStyle),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("line-height","1.5"),s.style("max-width",a+"px"),s.style("text-align","center"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&s.attr("class","labelBkg");let h=s.node().getBoundingClientRect();return h.width===a&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",a+"px"),h=s.node().getBoundingClientRect()),o.node()}function A(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}function R(t,e,r){let a=t.append("text"),n=A(a,1,e);I(n,r);let i=n.node().getComputedTextLength();return a.remove(),i}function z(t,e,r){let a=t.append("text"),n=A(a,1,e);I(n,[{content:r,type:"normal"}]);let i=n.node()?.getBoundingClientRect();return i&&a.remove(),i}function H(t,e,r,n=!1){let i=e.append("g"),l=i.insert("rect").attr("class","background").attr("style","stroke: none"),o=i.append("text").attr("y","-10.1"),s=0;for(let e of r){let r=(0,a.__name)(e=>R(i,1.1,e)<=t,"checkWidth");for(let t of r(e)?[e]:B(e,r))I(A(o,s,1.1),t),s++}if(!n)return o.node();{let t=o.node().getBBox();return l.attr("x",t.x-2).attr("y",t.y-2).attr("width",t.width+4).attr("height",t.height+4),i.node()}}function I(t,e){t.text(""),e.forEach((e,r)=>{let a=t.append("tspan").attr("font-style","em"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===r?a.text(e.content):a.text(" "+e.content)})}async function N(t,e={}){let a=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(t,n,i)=>(a.push((async()=>{let a=`${n}:${i}`;return await v(a)?await O(a,void 0,{class:"label-icon"}):`<i class='${(0,r.sanitizeText)(t,e).replace(":"," ")}'></i>`})()),t));let n=await Promise.all(a);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}(0,a.__name)($,"preprocessMarkdown"),(0,a.__name)(T,"markdownToLines"),(0,a.__name)(E,"markdownToHTML"),(0,a.__name)(C,"splitTextToChars"),(0,a.__name)(W,"splitWordToFitWidth"),(0,a.__name)(j,"splitWordToFitWidthRecursion"),(0,a.__name)(B,"splitLineToFitWidth"),(0,a.__name)(P,"splitLineToFitWidthRecursion"),(0,a.__name)(X,"applyStyle"),(0,a.__name)(Y,"addHtmlSpan"),(0,a.__name)(A,"createTspan"),(0,a.__name)(R,"computeWidthOfText"),(0,a.__name)(z,"computeDimensionOfText"),(0,a.__name)(H,"createFormattedText"),(0,a.__name)(I,"updateTextContentAndStyles"),(0,a.__name)(N,"replaceIconSubstring");var F=(0,a.__name)(async(t,n="",{style:i="",isTitle:l=!1,classes:o="",useHtmlLabels:s=!0,isNode:d=!0,width:p=200,addSvgBackground:c=!1}={},h)=>{if(a.log.debug("XYZ createText",n,i,l,o,s,d,"addSvgBackground: ",c),s){let a=E(n,h),l=await N((0,e.decodeEntities)(a),h),s=n.replace(/\\\\/g,"\\"),f={isNode:d,label:(0,r.hasKatex)(n)?s:l,labelStyle:i.replace("fill:","color:")};return await Y(t,f,p,o,c,h)}{let e=H(p,t,T(n.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),h),!!n&&c);if(d){/stroke:/.exec(i)&&(i=i.replace("stroke:","lineColor:"));let t=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,x.select)(e).attr("style",t)}else{let t=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");(0,x.select)(e).select("rect").attr("style",t.replace(/background:/g,"fill:"));let r=i.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,x.select)(e).select("text").attr("style",r)}return e}},"createText");t.s(["computeDimensionOfText",()=>z,"createText",()=>F,"getIconSVG",()=>O,"registerIconPacks",()=>L,"replaceIconSubstring",()=>N,"unknownIcon",()=>_],654152)},607199,t=>{"use strict";var e=t.i(625393),r={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},a={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function n(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=i(t),e=i(e);let[r,a]=[t.x,t.y],[n,l]=[e.x,e.y],o=n-r,s=l-a;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}(0,e.__name)(n,"calculateDeltaAndAngle");var i=(0,e.__name)(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),l=(0,e.__name)(t=>({x:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).x<i(l[l.length-1]).x?"left":"right";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaX:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.cos(e)*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaX:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.cos(e)*(a>=0?1:-1)}let d=Math.abs(i(e).x-i(l[l.length-1]).x),p=Math.abs(i(e).y-i(l[l.length-1]).y),c=Math.abs(i(e).x-i(l[0]).x),h=Math.abs(i(e).y-i(l[0]).y),f=r[t.arrowTypeStart],u=r[t.arrowTypeEnd];if(d<u&&d>0&&p<u){let t=u+1-d;t*="right"===s?-1:1,o-=t}if(c<f&&c>0&&h<f){let t=f+1-c;t*="right"===s?-1:1,o+=t}return i(e).x+o},"x"),y:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).y<i(l[l.length-1]).y?"down":"up";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaY:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.abs(Math.sin(e))*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaY:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(a>=0?1:-1)}let d=Math.abs(i(e).y-i(l[l.length-1]).y),p=Math.abs(i(e).x-i(l[l.length-1]).x),c=Math.abs(i(e).y-i(l[0]).y),h=Math.abs(i(e).x-i(l[0]).x),f=r[t.arrowTypeStart],u=r[t.arrowTypeEnd];if(d<u&&d>0&&p<u){let t=u+1-d;t*="up"===s?-1:1,o-=t}if(c<f&&c>0&&h<f){let t=f+1-c;t*="up"===s?-1:1,o+=t}return i(e).y+o},"y")}),"getLineFunctionsWithOffset");t.s(["getLineFunctionsWithOffset",()=>l,"markerOffsets",()=>r,"markerOffsets2",()=>a])}]);