(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,221999,e=>{"use strict";let t=(0,e.i(383206).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["default",()=>t])},560149,e=>{"use strict";var t=e.i(221999);e.s(["CalendarDays",()=>t.default])},686804,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>t])},550652,e=>{"use strict";var t=e.i(686804);e.s(["ArrowUpRight",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},287156,e=>{"use strict";var t=e.i(111043),a=e.i(970799),r=e.i(151213);function n({section:e,table:n,kanban:s,fallback:i=null,forceView:l}){let o=(0,r.useWorkView)(e),c=(0,r.useSetWorkView)(e),d=l??o;return((0,a.useEffect)(()=>{l&&o!==l&&c(l)},[l]),"kanban"===d)?(0,t.jsx)(t.Fragment,{children:s??i}):(0,t.jsx)(t.Fragment,{children:n??i})}e.s(["WorkDataView",()=>n])},430876,e=>{"use strict";var t=e.i(111043),a=e.i(970799);e.i(116233);var r=e.i(363712),n=e.i(999),s=e.i(691225),i=e.i(913532),l=e.i(605278),o=e.i(375308),c=e.i(989239);let d=(0,a.createContext)(null),u=(0,a.createContext)(null),h="kanban-column-";function m(e,t,a){let r=Object.fromEntries(e.map(e=>[e.id,[]]));return t.reduce((e,t)=>{let r=a(t);return e[r]||(e[r]=[]),e[r]=[...e[r],t],e},r)}function x({columns:e,data:r,onDataChange:i,onItemMove:o,getColumnId:u,children:x,className:p,pointerSensorOptions:g,renderDragOverlay:f}){let v=(0,a.useCallback)(u??(e=>e.columnId),[]),[b,y]=(0,a.useState)(()=>m(e,r,v)),[w,j]=(0,a.useState)(null),k=(0,a.useRef)(e);(0,a.useEffect)(()=>{k.current=e},[e]),(0,a.useEffect)(()=>{y(m(e,r,v))},[e,r,v]);let P=(0,n.useSensors)((0,n.useSensor)(n.PointerSensor,{activationConstraint:{distance:6},...g}),(0,n.useSensor)(n.KeyboardSensor,{coordinateGetter:s.sortableKeyboardCoordinates})),C=(0,a.useCallback)(e=>{for(let t of k.current){let a=b[t.id]??[],r=a.findIndex(t=>t.id===e);if(-1!==r)return{columnId:t.id,item:a[r],index:r}}return null},[b]),N=(0,a.useCallback)(e=>{let t=C(e.active.id);t&&j({item:t.item,columnId:t.columnId})},[C]),S=(0,a.useCallback)(e=>{var t;let{active:a,over:r}=e;if(j(null),!r)return;let n=C(a.id);if(!n)return;let s=null,l=null;if("string"==typeof r.id&&r.id.startsWith(h))l=(b[s=r.id.replace(h,"")]??[]).length;else{let e=C(r.id);e&&(s=e.columnId,l=(b[e.columnId]??[]).findIndex(t=>t.id===e.item.id))}if(null===s||null===l||s===n.columnId&&l===n.index)return;let c=Object.fromEntries(Object.entries(b).map(([e,t])=>[e,t.slice()])),d=c[n.columnId]??[],[u]=d.splice(n.index,1);c[n.columnId]=d;let m=c[s]??[],x=n.columnId===s&&n.index<l?l-1:l,p={...u,columnId:s};m.splice(x,0,p),c[s]=m,y(c);let g=(t=k.current,t.flatMap(e=>c[e.id]??[]));i?.(g),o&&o({item:p,fromColumnId:n.columnId,toColumnId:s,toIndex:x})},[C,b,i,o]),M=(0,a.useMemo)(()=>({columns:e,getItems:e=>b[e]??[],findItem:C,activeItem:w}),[e,b,C,w]);return(0,t.jsx)(d.Provider,{value:M,children:(0,t.jsxs)(n.DndContext,{collisionDetection:n.closestCorners,onDragCancel:()=>j(null),onDragEnd:S,onDragStart:N,sensors:P,children:[(0,t.jsx)("div",{className:(0,c.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",p),children:x}),(0,t.jsx)(n.DragOverlay,{children:w?f?f(w.item):(0,t.jsx)(l.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium",children:String(w.item.id)})}):null})]})})}function p({column:e,children:a,className:r}){return(0,t.jsx)(u.Provider,{value:e,children:(0,t.jsx)("section",{"aria-label":`${e.name} column`,className:(0,c.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",r),children:a})})}function g({children:e,className:a}){return(0,t.jsx)("header",{className:(0,c.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",a),children:e})}function f({columnId:e,children:r,emptyState:i,className:l,height:u="28rem"}){let{getItems:m}=function(){let e=(0,a.useContext)(d);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),x=m(e),{setNodeRef:p,isOver:g}=(0,n.useDroppable)({id:`${h}${e}`});return(0,t.jsx)(s.SortableContext,{items:x.map(e=>e.id),strategy:s.verticalListSortingStrategy,children:(0,t.jsx)(o.ScrollArea,{className:"kanban-scroll flex-1",children:(0,t.jsxs)("div",{className:(0,c.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",g&&"ring-primary/60 ring-2 ring-offset-2",l),"data-drop-state":g?"active":"inactive",ref:p,style:{minHeight:u},children:[0===x.length&&i,x.map((e,t)=>r(e,t))]})})})}function v({itemId:e,children:a,className:r}){let{attributes:n,listeners:o,setNodeRef:d,transform:u,transition:h,isDragging:m}=(0,s.useSortable)({id:e}),x={transform:i.CSS.Transform.toString(u),transition:h};return(0,t.jsx)(l.Card,{className:(0,c.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",m&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",r),"data-dragging":m?"":void 0,ref:d,style:x,...o,...n,children:a})}function b({data:e,columns:n,mapToKanbanItem:s,updateEntityStatus:i,renderCard:l,renderDragOverlay:o,calculateColumnMeta:c,onItemMove:d,entityName:u="items",emptyStateMessage:h,showTotals:m=!1,formatTotal:b}){let[y,w]=(0,a.useState)(()=>e.map(s)),j=c||((e,t)=>({count:t.filter(t=>t.columnId===e).length})),k=(0,a.useMemo)(()=>{let e={};return n.forEach(t=>{e[t.id]=j(t.id,y)}),e},[n,y,j]),P=(0,a.useMemo)(()=>n.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[n]),C=h||(e=>`No ${u} in ${e}`);return(0,t.jsx)(x,{className:"pb-4",columns:P,data:y,onDataChange:e=>{i?w(e.map(e=>({...e,entity:i(e.entity,e.columnId)}))):w(e)},onItemMove:d,renderDragOverlay:o||(e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:l(e)})),children:n.map(e=>{let a=k[e.id]??{count:0};return(0,t.jsxs)(p,{className:"min-h-[300px] flex-1",column:P.find(t=>t.id===e.id),children:[(0,t.jsx)(g,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,t.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,t.jsxs)(r.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[a.count," ",u]}),m&&void 0!==a.total&&b&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:b(a.total)}),m&&void 0!==a.value&&b&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:b(a.value)})]})}),(0,t.jsx)(f,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,t.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:C(e.name)}),children:e=>(0,t.jsx)(v,{itemId:e.id,children:l(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>b],430876)},626642,e=>{"use strict";let t=(0,e.i(383206).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["default",()=>t])},678170,e=>{"use strict";var t=e.i(626642);e.s(["UserCheck",()=>t.default])},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},222121,750966,e=>{"use strict";e.i(116233),e.s([],222121);var t=e.i(904653),a=e.i(995403);function r({entityType:e,basePath:r}){let n=(0,t.useRouter)(),s={jobs:"job",invoices:"invoice",estimates:"estimate",payments:"payment",contracts:"contract",appointments:"appointment",equipment:"equipment","maintenance-plans":"maintenance plan","service-agreements":"service agreement","purchase-orders":"purchase order",properties:"property",customers:"customer"}[e]||e,i=r||`/dashboard/work/${e}`,l=async(e,t)=>{try{return await t(e),a.toast.success(`${e.length} ${s}s archived successfully`),n.refresh(),!0}catch(e){return console.error(`Failed to archive ${s}s:`,e),a.toast.error(`Failed to archive ${s}s`),!1}};return{handleRowClick:e=>{n.push(`${i}/${e}`)},handleArchive:async(e,t)=>{try{return await t(e),a.toast.success(`${s} archived successfully`),n.refresh(),!0}catch(e){return console.error(`Failed to archive ${s}:`,e),a.toast.error(`Failed to archive ${s}`),!1}},handleBulkArchive:l,handleRestore:async(e,t)=>{try{return await t(e),a.toast.success(`${s} restored successfully`),n.refresh(),!0}catch(e){return console.error(`Failed to restore ${s}:`,e),a.toast.error(`Failed to restore ${s}`),!1}},handleRefresh:()=>{n.refresh(),a.toast.success("Refreshed")},createSearchFilter:e=>(t,a)=>{let r=a.toLowerCase().trim();return!r||e.some(e=>{let a=t[e];return null!=a&&String(a).toLowerCase().includes(r)})},createBulkActions:e=>{let t=[];return e.archive&&t.push({label:"Archive Selected",onClick:t=>l(t,e.archive)}),e.export&&t.push({label:"Export Selected",onClick:async t=>{try{await e.export(t),a.toast.success(`Exported ${t.length} ${s}s`)}catch(e){a.toast.error("Failed to export")}}}),e.delete&&t.push({label:"Delete Selected",onClick:async t=>{try{await e.delete(t),a.toast.success(`Deleted ${t.length} ${s}s`),n.refresh()}catch(e){a.toast.error("Failed to delete")}}}),t},entityLabel:s}}e.s(["useTableActions",()=>r],750966)},980739,e=>{"use strict";let t=(0,e.i(383206).default)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);e.s(["default",()=>t])},817451,e=>{"use strict";var t=e.i(980739);e.s(["Repeat",()=>t.default])},772450,e=>{"use strict";e.i(116233),e.s([])},462409,e=>{"use strict";var t=e.i(111043),a=e.i(550652),r=e.i(560149),n=e.i(817451),s=e.i(678170),i=e.i(176378);e.i(553153);var l=e.i(363712);e.i(889265);var o=e.i(677607),c=e.i(430876),d=e.i(152088);let u=[{id:"active",name:"Active",accentColor:"#22C55E"},{id:"pending",name:"Pending",accentColor:"#F59E0B"},{id:"paused",name:"Paused",accentColor:"#6B7280"},{id:"cancelled",name:"Cancelled",accentColor:"#EF4444"}],h=new Map(u.map(e=>[e.id,e.name])),m=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function x({plans:e}){return(0,t.jsx)(c.EntityKanban,{columns:u,data:e,entityName:"plans",mapToKanbanItem:e=>({id:e.id,columnId:e.status,entity:e,plan:e}),renderCard:e=>(0,t.jsx)(p,{item:{...e,plan:e.entity}}),renderDragOverlay:e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,t.jsx)(p,{item:{...e,plan:e.entity}})}),updateEntityStatus:(e,t)=>({...e,status:t})})}function p({item:e}){let{plan:c,columnId:u}=e;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-foreground text-sm font-semibold",children:c.planName}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:c.customer}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsx)(l.Badge,{className:(0,d.cn)("text-xs","cancelled"===u&&"bg-destructive/10 text-destructive","active"===u&&"bg-primary/10 text-primary"),variant:"active"===u?"secondary":"cancelled"===u?"destructive":"outline",children:h.get(u)??u}),(0,t.jsx)(l.Badge,{className:"text-xs",variant:"outline",children:c.frequency})]})]})}),(0,t.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.UserCheck,{className:"text-primary size-4"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:c.serviceType})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Repeat,{className:"text-primary size-4"}),(0,t.jsx)("span",{children:c.frequency})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.CalendarDays,{className:"text-primary size-4"}),(0,t.jsxs)("span",{children:["Next visit ",c.nextVisit]})]})]}),(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-xs",children:[(0,t.jsx)("span",{children:"Monthly fee"}),(0,t.jsx)("span",{className:"text-foreground font-semibold",children:m.format(c.monthlyFee/100)})]}),(0,t.jsx)(o.Button,{asChild:!0,className:"text-primary w-full justify-between text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)(i.default,{href:`/dashboard/work/maintenance-plans/${c.id}`,children:["Manage plan",(0,t.jsx)(a.ArrowUpRight,{className:"size-3.5"})]})})]})}e.s(["MaintenancePlansKanban",()=>x])},600145,e=>{"use strict";var t=e.i(111043),a=e.i(946672),r=e.i(276389),n=e.i(882896),s=e.i(606661),i=e.i(38614),l=e.i(532727),o=e.i(176378),c=e.i(904653),d=e.i(970799),u=e.i(552038),h=(0,u.createServerReference)("401ec8be029b0a5f4cc99a3e93a7ea7f61b4352f51",u.callServer,void 0,u.findSourceMapURL,"archiveMaintenancePlan");e.i(222121);var m=e.i(473485);e.i(889265);var x=e.i(677607);e.i(244242);var p=e.i(563078),g=e.i(527756);e.i(772450);var f=e.i(491168),v=e.i(750966),b=e.i(635709),y=e.i(871509),w=e.i(274220),j=e.i(995403);let k={active:{className:"bg-success hover:bg-success text-white",label:"Active"},pending:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Pending"},paused:{className:"bg-muted text-foreground dark:bg-foreground/20 dark:text-muted-foreground",label:"Paused"},cancelled:{className:"bg-destructive text-destructive dark:bg-destructive/20 dark:text-destructive",label:"Cancelled"}};function P({plans:e,itemsPerPage:u=50,currentPage:P=1,totalCount:C}){(0,c.useRouter)();let N=(0,w.useArchiveStore)(e=>e.filters.maintenance_plans),{handleRefresh:S}=(0,v.useTableActions)({entityType:"maintenance_plans"}),{openArchiveDialog:M,ArchiveDialogComponent:$}=(0,m.useArchiveDialog)({onConfirm:async e=>{(await h(e)).success&&S()},title:"Archive Maintenance Plan?",description:"This maintenance plan will be archived and can be restored within 90 days."}),[D,I]=(0,d.useState)(new Set),{openArchiveDialog:R,ArchiveDialogComponent:A}=(0,m.useArchiveDialog)({onConfirm:async()=>{let e=0;for(let t of D)(await h(t)).success&&e++;e>0&&S()},title:`Archive ${D.size} Maintenance Plan(s)?`,description:`${D.size} maintenance plan(s) will be archived and can be restored within 90 days.`}),F=e.filter(e=>{let t=!!(e.archived_at||e.deleted_at);return"active"===N?!t:"archived"!==N||t}),T=[{key:"planName",header:"Plan Name",width:"w-40",shrink:!0,sortable:!0,render:e=>(0,t.jsx)(o.default,{className:"text-foreground text-xs leading-tight font-medium hover:underline",href:`/dashboard/work/maintenance-plans/${e.id}`,onClick:e=>e.stopPropagation(),children:e.planName})},{key:"customer",header:"Customer",width:"flex-1",sortable:!0,render:e=>(0,t.jsxs)(o.default,{className:"block min-w-0",href:`/dashboard/work/maintenance-plans/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"text-foreground truncate text-xs leading-tight font-medium hover:underline",children:e.customer}),(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:e.serviceType})]})},{key:"frequency",header:"Frequency",width:"w-32",shrink:!0,sortable:!0,hideOnMobile:!0,render:e=>(0,t.jsx)("span",{className:"text-foreground text-xs",children:e.frequency})},{key:"nextVisit",header:"Next Visit",width:"w-32",shrink:!0,sortable:!0,hideOnMobile:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-xs tabular-nums",children:e.nextVisit})},{key:"monthlyFee",header:"Monthly Fee",width:"w-28",shrink:!0,sortable:!0,align:"right",render:e=>(0,t.jsxs)("span",{className:"font-semibold tabular-nums",children:[(0,y.formatCurrency)(e.monthlyFee),"/mo"]})},{key:"status",header:"Status",width:"w-28",shrink:!0,sortable:!0,render:e=>(0,t.jsx)(f.GenericStatusBadge,{config:k,defaultStatus:"pending",status:e.status})},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)("div",{"data-no-row-click":!0,children:(0,t.jsxs)(p.DropdownMenu,{children:[(0,t.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(x.Button,{size:"icon",variant:"ghost",children:(0,t.jsx)(i.MoreHorizontal,{className:"size-4"})})}),(0,t.jsxs)(p.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(p.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(p.DropdownMenuSeparator,{}),(0,t.jsxs)(p.DropdownMenuItem,{children:[(0,t.jsx)(r.Calendar,{className:"mr-2 size-4"}),"Schedule Visit"]}),(0,t.jsxs)(p.DropdownMenuItem,{children:[(0,t.jsx)(s.FileText,{className:"mr-2 size-4"}),"View Contract"]}),(0,t.jsx)(p.DropdownMenuSeparator,{}),(0,t.jsxs)(p.DropdownMenuItem,{className:"text-destructive",onClick:()=>{M(plan.id)},children:[(0,t.jsx)(a.Archive,{className:"mr-2 size-4"}),"Archive Plan"]}),(0,t.jsxs)(p.DropdownMenuItem,{className:"text-destructive",children:[(0,t.jsx)(l.Trash2,{className:"mr-2 size-4"}),"Cancel Plan"]})]})]})})}],z=[{label:"Schedule Visits",icon:(0,t.jsx)(r.Calendar,{className:"h-4 w-4"}),onClick:e=>{window.location.href=`/dashboard/work/appointments/new?plans=${Array.from(e).join(",")}`}},{label:"Export",icon:(0,t.jsx)(n.Download,{className:"h-4 w-4"}),onClick:e=>{let t=new Blob([["Plan Name,Customer,Service Type,Frequency,Next Visit,Monthly Fee,Status",...maintenancePlans.filter(t=>e.has(t.id)).map(e=>[`"${e.planName}"`,`"${e.customer}"`,e.serviceType,e.frequency,e.nextVisit,(0,y.formatCurrency)(e.monthlyFee),e.status].join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`maintenance-plans-export-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(a),j.toast.success(`Exported ${e.size} plan${e.size>1?"s":""}`)}},{label:"Archive Selected",icon:(0,t.jsx)(a.Archive,{className:"h-4 w-4"}),variant:"destructive",onClick:async e=>{I(e),R("")}},{label:"Cancel",icon:(0,t.jsx)(l.Trash2,{className:"h-4 w-4"}),onClick:e=>{j.toast.info(`Cancel functionality for ${e.size} plan${e.size>1?"s":""} coming soon`)},variant:"destructive"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.FullWidthDataTable,{...b.TablePresets.fullList(),bulkActions:z,columns:T,data:F,emptyIcon:(0,t.jsx)(r.Calendar,{className:"text-muted-foreground mx-auto h-12 w-12"}),emptyMessage:"No maintenance plans found",entity:"maintenance_plans",getHighlightClass:()=>"bg-success/30 dark:bg-success/10",getItemId:e=>e.id,isArchived:e=>!!(e.archived_at||e.deleted_at),isHighlighted:e=>"active"===e.status,currentPageFromServer:P,serverPagination:!0,onRefresh:S,onRowClick:e=>window.location.href=`/dashboard/work/maintenance-plans/${e.id}`,searchFilter:(e,t)=>{let a=t.toLowerCase();return e.planName.toLowerCase().includes(a)||e.customer.toLowerCase().includes(a)||e.serviceType.toLowerCase().includes(a)||e.frequency.toLowerCase().includes(a)||e.status.toLowerCase().includes(a)},searchPlaceholder:"Search plans by name, customer, service type, frequency, or status...",showArchived:"active"!==N,showRefresh:!1,totalCount:C??F.length}),(0,t.jsx)($,{}),(0,t.jsx)(A,{})]})}e.s(["MaintenancePlansTable",()=>P],600145)}]);