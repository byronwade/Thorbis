(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,306466,e=>{"use strict";let s=(0,e.i(383206).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>s])},598870,e=>{"use strict";var s=e.i(306466);e.s(["Save",()=>s.default])},923225,e=>{"use strict";let s=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>s])},630754,e=>{"use strict";var s=e.i(923225);e.s(["CheckCircle",()=>s.default])},479515,e=>{"use strict";let s=(0,e.i(383206).default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["default",()=>s])},929294,e=>{"use strict";var s=e.i(479515);e.s(["Link2",()=>s.default])},75919,e=>{"use strict";e.s([])},249925,e=>{"use strict";var s=e.i(111043),n=e.i(818796),a=e.i(79254),c=e.i(630754),t=e.i(288413),i=e.i(929294),r=e.i(641304),l=e.i(160424),d=e.i(598870),o=e.i(970799);e.i(75919);var u=e.i(552038),x=(0,u.createServerReference)("003f6ed399054a0791fd9f0d0113a86aa4e90e57ff",u.callServer,void 0,u.findSourceMapURL,"getAccountingSettings"),m=(0,u.createServerReference)("40f22259ba699198ced1c1ac73a5468a60a1387aaa",u.callServer,void 0,u.findSourceMapURL,"updateAccountingSettings");e.i(553153);var h=e.i(363712);e.i(889265);var p=e.i(677607);e.i(254851);var y=e.i(605278);e.i(51478);var j=e.i(635613);e.i(149989);var v=e.i(880177);e.i(868198);var g=e.i(798764);e.i(287133);var f=e.i(120109),S=e.i(220168);e.i(223342);var b=e.i(395645);e.i(794747);var C=e.i(513990),N=e.i(51052);function A(){let{toast:e}=(0,N.useToast)(),[u,A]=(0,o.useTransition)(),[k,F]=(0,o.useState)(!0),[w,I]=(0,o.useState)(!1),[E,_]=(0,o.useState)(null),[P,T]=(0,o.useState)({provider:"none",provider_enabled:!1,auto_sync_enabled:!1,sync_frequency:"daily",sync_invoices:!0,sync_payments:!0,sync_expenses:!0,sync_customers:!0}),[L,K]=(0,o.useState)({provider:"none",providerEnabled:!1,apiKey:"",apiSecret:"",autoSyncEnabled:!1,syncFrequency:"daily",incomeAccount:"",expenseAccount:"",assetAccount:"",liabilityAccount:"",syncInvoices:!0,syncPayments:!0,syncExpenses:!0,syncCustomers:!0}),[q,z]=(0,o.useState)({provider:"none",providerEnabled:!1,apiKey:"",apiSecret:"",autoSyncEnabled:!1,syncFrequency:"daily",incomeAccount:"",expenseAccount:"",assetAccount:"",liabilityAccount:"",syncInvoices:!0,syncPayments:!0,syncExpenses:!0,syncCustomers:!0}),M=(0,o.useMemo)(()=>JSON.stringify(q)!==JSON.stringify(L),[q,L]);return((0,o.useEffect)(()=>{!async function(){F(!0);try{let e=await x();if(e.success&&e.data){T(e.data);let s={provider:e.data.provider||"none",providerEnabled:e.data.provider_enabled,apiKey:"",apiSecret:"",autoSyncEnabled:e.data.auto_sync_enabled,syncFrequency:e.data.sync_frequency,incomeAccount:e.data.income_account||"",expenseAccount:e.data.expense_account||"",assetAccount:e.data.asset_account||"",liabilityAccount:e.data.liability_account||"",syncInvoices:e.data.sync_invoices,syncPayments:e.data.sync_payments,syncExpenses:e.data.sync_expenses,syncCustomers:e.data.sync_customers};z(s),K(s),e.data.provider_enabled&&_("connected")}}catch{e.error("Failed to load accounting settings")}finally{F(!1)}}()},[e]),k)?(0,s.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,s.jsx)(r.Loader2,{className:"text-muted-foreground size-8 animate-spin"})}):(0,s.jsxs)("div",{className:"space-y-8 py-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Accounting Integration"}),(0,s.jsxs)(C.Tooltip,{children:[(0,s.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("button",{type:"button",children:(0,s.jsx)(t.HelpCircle,{className:"text-muted-foreground h-3.5 w-3.5"})})}),(0,s.jsx)(C.TooltipContent,{className:"max-w-xs",children:(0,s.jsx)("p",{className:"text-sm",children:"Connect your accounting software for seamless financial data sync. Supports QuickBooks, Xero, Sage, and FreshBooks."})})]})]}),M&&(0,s.jsx)(h.Badge,{className:"bg-warning hover:bg-warning",children:"Unsaved Changes"})]}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Connect your accounting software for seamless financial data sync"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(y.Card,{children:[(0,s.jsxs)(y.CardHeader,{children:[(0,s.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.RefreshCw,{className:"text-primary size-5"}),"Provider Configuration"]}),(0,s.jsx)(y.CardDescription,{children:"Select and configure your accounting provider"})]}),(0,s.jsxs)(y.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[(0,s.jsx)(S.StandardFormField,{label:"Accounting Provider",htmlFor:"provider",children:(0,s.jsxs)(g.Select,{onValueChange:e=>z({...q,provider:e}),value:q.provider,children:[(0,s.jsx)(g.SelectTrigger,{id:"provider",children:(0,s.jsx)(g.SelectValue,{})}),(0,s.jsxs)(g.SelectContent,{children:[(0,s.jsx)(g.SelectItem,{value:"none",children:"None"}),(0,s.jsx)(g.SelectItem,{value:"quickbooks",children:"QuickBooks Online"}),(0,s.jsx)(g.SelectItem,{value:"xero",children:"Xero"}),(0,s.jsx)(g.SelectItem,{value:"sage",children:"Sage Intacct"}),(0,s.jsx)(g.SelectItem,{value:"freshbooks",children:"FreshBooks"}),(0,s.jsx)(g.SelectItem,{value:"manual",children:"Manual Entry"})]})]})}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["connected"===E&&(0,s.jsxs)("div",{className:"text-success flex items-center gap-2 text-sm",children:[(0,s.jsx)(c.CheckCircle,{className:"size-4"}),(0,s.jsx)("span",{children:"Connected"})]}),"disconnected"===E&&(0,s.jsxs)("div",{className:"text-destructive flex items-center gap-2 text-sm",children:[(0,s.jsx)(n.AlertCircle,{className:"size-4"}),(0,s.jsx)("span",{children:"Not Connected"})]})]})})]}),"none"!==q.provider&&"manual"!==q.provider&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"API Credentials"}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsx)(S.StandardFormField,{label:"API Key / Client ID",htmlFor:"apiKey",children:(0,s.jsx)(j.Input,{id:"apiKey",onChange:e=>z({...q,apiKey:e.target.value}),placeholder:"Enter your API key",type:"password",value:q.apiKey})}),(0,s.jsx)(S.StandardFormField,{label:"API Secret / Client Secret",htmlFor:"apiSecret",children:(0,s.jsx)(j.Input,{id:"apiSecret",onChange:e=>z({...q,apiSecret:e.target.value}),placeholder:"Enter your API secret",type:"password",value:q.apiSecret})})]}),(0,s.jsx)(p.Button,{disabled:w||!q.apiKey||!q.apiSecret,onClick:()=>{I(!0),setTimeout(()=>{I(!1),q.apiKey&&q.apiSecret?(_("connected"),e.success(`Successfully connected to ${q.provider}`)):(_("disconnected"),e.error("Please provide valid API credentials"))},2e3)},variant:"outline",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Loader2,{className:"mr-2 size-4 animate-spin"}),"Testing Connection..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Link2,{className:"mr-2 size-4"}),"Test Connection"]})})]}),(0,s.jsx)(f.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Enable Provider"}),(0,s.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Activate integration with ",q.provider]})]}),(0,s.jsx)(b.Switch,{checked:q.providerEnabled,onCheckedChange:e=>z({...q,providerEnabled:e})})]})]})]})]}),q.providerEnabled&&"none"!==q.provider&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.Card,{children:[(0,s.jsxs)(y.CardHeader,{children:[(0,s.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.RefreshCw,{className:"text-primary size-5"}),"Sync Settings"]}),(0,s.jsx)(y.CardDescription,{children:"Configure automatic data synchronization"})]}),(0,s.jsxs)(y.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Auto Sync"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Automatically sync data on schedule"})]}),(0,s.jsx)(b.Switch,{checked:q.autoSyncEnabled,onCheckedChange:e=>z({...q,autoSyncEnabled:e})})]}),q.autoSyncEnabled&&(0,s.jsx)(S.StandardFormField,{label:"Sync Frequency",htmlFor:"syncFrequency",children:(0,s.jsxs)(g.Select,{onValueChange:e=>z({...q,syncFrequency:e}),value:q.syncFrequency,children:[(0,s.jsx)(g.SelectTrigger,{id:"syncFrequency",children:(0,s.jsx)(g.SelectValue,{})}),(0,s.jsxs)(g.SelectContent,{children:[(0,s.jsx)(g.SelectItem,{value:"realtime",children:"Real-time"}),(0,s.jsx)(g.SelectItem,{value:"hourly",children:"Hourly"}),(0,s.jsx)(g.SelectItem,{value:"daily",children:"Daily"}),(0,s.jsx)(g.SelectItem,{value:"weekly",children:"Weekly"}),(0,s.jsx)(g.SelectItem,{value:"manual",children:"Manual Only"})]})]})}),(0,s.jsx)(f.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Data Sync Options"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Sync Invoices"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync invoice data to accounting system"})]}),(0,s.jsx)(b.Switch,{checked:q.syncInvoices,onCheckedChange:e=>z({...q,syncInvoices:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Sync Payments"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync payment transactions"})]}),(0,s.jsx)(b.Switch,{checked:q.syncPayments,onCheckedChange:e=>z({...q,syncPayments:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Sync Expenses"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync expense records"})]}),(0,s.jsx)(b.Switch,{checked:q.syncExpenses,onCheckedChange:e=>z({...q,syncExpenses:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.Label,{children:"Sync Customers"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Sync customer information"})]}),(0,s.jsx)(b.Switch,{checked:q.syncCustomers,onCheckedChange:e=>z({...q,syncCustomers:e})})]})]})]})]}),(0,s.jsxs)(y.Card,{children:[(0,s.jsxs)(y.CardHeader,{children:[(0,s.jsxs)(y.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.RefreshCw,{className:"text-primary size-5"}),"Account Mapping"]}),(0,s.jsx)(y.CardDescription,{children:"Map Thorbis accounts to your accounting chart of accounts"})]}),(0,s.jsxs)(y.CardContent,{className:"space-y-4",children:[(0,s.jsx)(S.StandardFormField,{label:"Income Account",htmlFor:"incomeAccount",children:(0,s.jsx)(j.Input,{id:"incomeAccount",onChange:e=>z({...q,incomeAccount:e.target.value}),placeholder:"e.g., 4000 - Service Revenue",value:q.incomeAccount})}),(0,s.jsx)(S.StandardFormField,{label:"Expense Account",htmlFor:"expenseAccount",children:(0,s.jsx)(j.Input,{id:"expenseAccount",onChange:e=>z({...q,expenseAccount:e.target.value}),placeholder:"e.g., 5000 - Operating Expenses",value:q.expenseAccount})}),(0,s.jsx)(S.StandardFormField,{label:"Asset Account",htmlFor:"assetAccount",children:(0,s.jsx)(j.Input,{id:"assetAccount",onChange:e=>z({...q,assetAccount:e.target.value}),placeholder:"e.g., 1200 - Accounts Receivable",value:q.assetAccount})}),(0,s.jsx)(S.StandardFormField,{label:"Liability Account",htmlFor:"liabilityAccount",children:(0,s.jsx)(j.Input,{id:"liabilityAccount",onChange:e=>z({...q,liabilityAccount:e.target.value}),placeholder:"e.g., 2000 - Accounts Payable",value:q.liabilityAccount})})]})]})]}),(0,s.jsx)(y.Card,{className:"border-primary/50 bg-primary/5",children:(0,s.jsxs)(y.CardContent,{className:"flex items-start gap-3 pt-6",children:[(0,s.jsx)(l.RefreshCw,{className:"text-primary mt-0.5 h-5 w-5 shrink-0"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-primary dark:text-primary text-sm font-medium",children:"Accounting Integration Benefits"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Connecting your accounting software enables automatic financial data sync, reduces manual data entry, ensures accuracy across systems, and provides real-time financial reporting. Your credentials are encrypted and securely stored."})]})]})})]}),(0,s.jsx)("div",{className:"bg-card sticky bottom-0 z-10 rounded-xl border p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:M?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-warning dark:bg-warning/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,s.jsx)("div",{className:"bg-warning h-2 w-2 animate-pulse rounded-full"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Unsaved Changes"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Save your changes or discard them"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-success dark:bg-success/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,s.jsx)(a.Check,{className:"text-success dark:text-success h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"All Changes Saved"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:P.last_sync_at?`Last synced: ${new Date(P.last_sync_at).toLocaleString()}`:"Your settings are up to date"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(p.Button,{disabled:u,onClick:()=>{z(L)},variant:"outline",children:"Cancel"}),(0,s.jsx)(p.Button,{disabled:u||!M,onClick:()=>{A(async()=>{let s=new FormData;s.append("provider",q.provider),s.append("providerEnabled",q.providerEnabled.toString()),q.apiKey&&s.append("apiKey",q.apiKey),q.apiSecret&&s.append("apiSecret",q.apiSecret),s.append("autoSyncEnabled",q.autoSyncEnabled.toString()),s.append("syncFrequency",q.syncFrequency),q.incomeAccount&&s.append("incomeAccount",q.incomeAccount),q.expenseAccount&&s.append("expenseAccount",q.expenseAccount),q.assetAccount&&s.append("assetAccount",q.assetAccount),q.liabilityAccount&&s.append("liabilityAccount",q.liabilityAccount),s.append("syncInvoices",q.syncInvoices.toString()),s.append("syncPayments",q.syncPayments.toString()),s.append("syncExpenses",q.syncExpenses.toString()),s.append("syncCustomers",q.syncCustomers.toString());let n=await m(s);n.success?(e.success("Accounting settings updated successfully"),K(q)):e.error(n.error||"Failed to update accounting settings")})},children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Loader2,{className:"mr-2 size-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Save,{className:"mr-2 size-4"}),"Save Settings"]})})]})]})})]})}e.s(["AccountingSettingsClient",()=>A],249925)}]);