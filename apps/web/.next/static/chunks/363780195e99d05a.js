(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,172506,e=>{"use strict";var s=e.i(306929);e.s(["ArrowDown",()=>s.default])},698684,e=>{"use strict";let s=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>s])},407205,e=>{"use strict";var s=e.i(698684);e.s(["ArrowUp",()=>s.default])},306929,e=>{"use strict";let s=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>s])},432716,e=>{"use strict";let s=(0,e.i(383206).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["default",()=>s])},882525,e=>{"use strict";var s=e.i(432716);e.s(["Copy",()=>s.default])},616291,e=>{"use strict";let s=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>s])},664136,e=>{"use strict";var s=e.i(616291);e.s(["Edit",()=>s.default])},413014,e=>{"use strict";let s=(0,e.i(383206).default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);e.s(["default",()=>s])},580733,807477,e=>{"use strict";var s=e.i(552038),a=(0,s.createServerReference)("607d0f958daf66b2a0d5277cdda17600dace5156bb",s.callServer,void 0,s.findSourceMapURL,"deleteCallRoutingRule");e.s(["deleteCallRoutingRule",()=>a],580733);var i=(0,s.createServerReference)("60853f1e409364f7e171e27229217994ff224414e6",s.callServer,void 0,s.findSourceMapURL,"toggleCallRoutingRule");e.s(["toggleCallRoutingRule",()=>i],807477)},834033,e=>{"use strict";var s=e.i(552038),a=(0,s.createServerReference)("40413bfa888916480edbc33ebb812158fddf960f89",s.callServer,void 0,s.findSourceMapURL,"updateCallRoutingRule");e.s(["updateCallRoutingRule",()=>a])},226626,e=>{"use strict";var s=e.i(111043),a=e.i(818796),i=e.i(852648),t=e.i(136764),r=e.i(882525),l=e.i(979731),n=e.i(371526),d=e.i(532727),c=e.i(970799);e.i(889265);var o=e.i(677607);e.i(254851);var u=e.i(605278);e.i(149989);var m=e.i(880177);e.i(868198);var h=e.i(798764),x=e.i(220168);e.i(223342);var p=e.i(395645),g=e.i(152088);let v=Array.from({length:96},(e,s)=>{let a=Math.floor(s/4),i=s%4*15,t=`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`,r=a%12||12,l=a<12?"AM":"PM";return{value:t,label:`${r}:${i.toString().padStart(2,"0")} ${l}`}}),j=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"}],f=[{name:"Standard (9 AM - 5 PM)",hours:{start:"09:00",end:"17:00"}},{name:"Extended (8 AM - 6 PM)",hours:{start:"08:00",end:"18:00"}},{name:"Early Bird (7 AM - 3 PM)",hours:{start:"07:00",end:"15:00"}},{name:"24/7",hours:{start:"00:00",end:"23:59"}}],y=[{dayOfWeek:0,dayName:"Sunday",isOpen:!1,timeRanges:[]},{dayOfWeek:1,dayName:"Monday",isOpen:!0,timeRanges:[{id:"1",startTime:"09:00",endTime:"17:00"}]},{dayOfWeek:2,dayName:"Tuesday",isOpen:!0,timeRanges:[{id:"2",startTime:"09:00",endTime:"17:00"}]},{dayOfWeek:3,dayName:"Wednesday",isOpen:!0,timeRanges:[{id:"3",startTime:"09:00",endTime:"17:00"}]},{dayOfWeek:4,dayName:"Thursday",isOpen:!0,timeRanges:[{id:"4",startTime:"09:00",endTime:"17:00"}]},{dayOfWeek:5,dayName:"Friday",isOpen:!0,timeRanges:[{id:"5",startTime:"09:00",endTime:"17:00"}]},{dayOfWeek:6,dayName:"Saturday",isOpen:!1,timeRanges:[]}];function C(){let[e,r]=(0,c.useState)({timezone:"America/Los_Angeles",schedule:y}),[n,d]=(0,c.useState)(null),p=e=>e.startTime<e.endTime;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsxs)(u.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(t.Clock,{className:"size-5"}),"Business Hours"]}),(0,s.jsx)(u.CardDescription,{children:"Configure when your business is available to receive calls"})]}),(0,s.jsxs)(u.CardContent,{className:"space-y-6",children:[(0,s.jsxs)(x.StandardFormField,{label:"Timezone",htmlFor:"timezone",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(l.Globe,{className:"size-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Select your business timezone"})]}),(0,s.jsxs)(h.Select,{onValueChange:e=>r(s=>({...s,timezone:e})),value:e.timezone,children:[(0,s.jsx)(h.SelectTrigger,{id:"timezone",children:(0,s.jsx)(h.SelectValue,{})}),(0,s.jsx)(h.SelectContent,{children:j.map(e=>(0,s.jsx)(h.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.Label,{children:"Quick Presets (Apply to Weekdays)"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:f.map(e=>(0,s.jsx)(o.Button,{onClick:()=>{var s;return s=e.hours,void r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek>=1&&e.dayOfWeek<=5?{...e,isOpen:!0,timeRanges:[{id:crypto.randomUUID(),startTime:s.start,endTime:s.end}]}:e)}))},size:"sm",variant:"outline",children:e.name},e.name))})]})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.schedule.map(e=>(0,s.jsx)(R,{canPaste:null!==n,day:e,onAddTimeRange:()=>{var s;return s=e.dayOfWeek,void r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek===s?{...e,timeRanges:[...e.timeRanges,{id:crypto.randomUUID(),startTime:"09:00",endTime:"17:00"}]}:e)}))},onCopy:()=>{d(e)},onPaste:()=>{var s;return s=e.dayOfWeek,void(n&&r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek===s?{...e,isOpen:n.isOpen,timeRanges:n.timeRanges.map(e=>({...e,id:crypto.randomUUID()}))}:e)})))},onRemoveTimeRange:s=>{var a;return a=e.dayOfWeek,void r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek===a?{...e,timeRanges:e.timeRanges.filter(e=>e.id!==s)}:e)}))},onToggle:()=>{var s;return s=e.dayOfWeek,void r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek===s?{...e,isOpen:!e.isOpen,timeRanges:e.isOpen?[]:[{id:crypto.randomUUID(),startTime:"09:00",endTime:"17:00"}]}:e)}))},onUpdateTimeRange:(s,a,i)=>{var t;return t=e.dayOfWeek,void r(e=>({...e,schedule:e.schedule.map(e=>e.dayOfWeek===t?{...e,timeRanges:e.timeRanges.map(e=>e.id===s?{...e,[a]:i}:e)}:e)}))},validateTimeRange:p},e.dayOfWeek))}),(0,s.jsxs)(u.Card,{children:[(0,s.jsx)(u.CardHeader,{children:(0,s.jsx)(u.CardTitle,{className:"text-base",children:"Schedule Summary"})}),(0,s.jsx)(u.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[e.schedule.filter(e=>e.isOpen).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium",children:e.dayName}),(0,s.jsx)("span",{className:"text-muted-foreground",children:e.timeRanges.map(e=>`${N(e.startTime)} - ${N(e.endTime)}`).join(", ")})]},e.dayOfWeek)),e.schedule.every(e=>!e.isOpen)&&(0,s.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(a.AlertCircle,{className:"size-4"}),"No business hours configured"]})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(o.Button,{variant:"outline",children:"Cancel"}),(0,s.jsxs)(o.Button,{children:[(0,s.jsx)(i.CheckCircle2,{className:"mr-2 size-4"}),"Save Business Hours"]})]})]})}function R({day:e,onToggle:i,onAddTimeRange:t,onRemoveTimeRange:l,onUpdateTimeRange:c,onCopy:m,onPaste:x,canPaste:j,validateTimeRange:f}){return(0,s.jsxs)(u.Card,{className:(0,g.cn)(!e.isOpen&&"opacity-60"),children:[(0,s.jsx)(u.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Switch,{checked:e.isOpen,onCheckedChange:i}),(0,s.jsxs)("div",{children:[(0,s.jsx)(u.CardTitle,{className:"text-base",children:e.dayName}),(0,s.jsx)(u.CardDescription,{className:"text-xs",children:e.isOpen?(0,s.jsxs)(s.Fragment,{children:[e.timeRanges.length," time"," ",1===e.timeRanges.length?"range":"ranges"]}):"Closed"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Button,{disabled:!e.isOpen,onClick:m,size:"sm",variant:"ghost",children:(0,s.jsx)(r.Copy,{className:"size-3"})}),(0,s.jsx)(o.Button,{disabled:!j,onClick:x,size:"sm",variant:"ghost",children:"Paste"})]})]})}),e.isOpen&&(0,s.jsxs)(u.CardContent,{className:"space-y-3",children:[e.timeRanges.map((a,i)=>{let t=f(a);return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(h.Select,{onValueChange:e=>c(a.id,"startTime",e),value:a.startTime,children:[(0,s.jsx)(h.SelectTrigger,{className:(0,g.cn)("h-9",!t&&"border-destructive"),children:(0,s.jsx)(h.SelectValue,{})}),(0,s.jsx)(h.SelectContent,{children:v.map(e=>(0,s.jsx)(h.SelectItem,{value:e.value,children:e.label},e.value))})]})}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"to"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(h.Select,{onValueChange:e=>c(a.id,"endTime",e),value:a.endTime,children:[(0,s.jsx)(h.SelectTrigger,{className:(0,g.cn)("h-9",!t&&"border-destructive"),children:(0,s.jsx)(h.SelectValue,{})}),(0,s.jsx)(h.SelectContent,{children:v.map(e=>(0,s.jsx)(h.SelectItem,{value:e.value,children:e.label},e.value))})]})})]}),e.timeRanges.length>1&&(0,s.jsx)(o.Button,{className:"size-9",onClick:()=>l(a.id),size:"icon",variant:"ghost",children:(0,s.jsx)(d.Trash2,{className:"size-4"})})]},a.id)}),(0,s.jsxs)(o.Button,{className:"w-full",onClick:t,size:"sm",variant:"outline",children:[(0,s.jsx)(n.Plus,{className:"mr-2 size-3"}),"Add Time Range (e.g., Lunch Break)"]}),e.timeRanges.some(e=>!f(e))&&(0,s.jsxs)("div",{className:"text-destructive flex items-center gap-2 text-sm",children:[(0,s.jsx)(a.AlertCircle,{className:"size-4"}),"End time must be after start time"]})]})]})}function N(e){let[s,a]=e.split(":").map(Number);return`${s%12||12}:${a.toString().padStart(2,"0")} ${s<12?"AM":"PM"}`}e.s(["BusinessHoursEditor",()=>C])},725066,e=>{"use strict";var s=e.i(111043),a=e.i(172506),i=e.i(407205),t=e.i(882525),r=e.i(664136),l=e.i(848475),n=e.i(413014),n=n,d=e.i(532727),c=e.i(904653),o=e.i(970799),u=e.i(580733),m=e.i(807477),h=e.i(834033);e.i(889265);var x=e.i(677607);e.i(539870);var p=e.i(846358);e.i(244242);var g=e.i(563078);e.i(223342);var v=e.i(395645),j=e.i(51052);function f({rule:e}){let f=(0,c.useRouter)(),{toast:y}=(0,j.useToast)(),[C,R]=(0,o.useState)(!1),[N,T]=(0,o.useState)(!1),[k,S]=(0,o.useState)(!1),b=async()=>{S(!0);let s=await (0,m.toggleCallRoutingRule)(e.id,!e.is_active);s.success?y.success(`Rule ${e.is_active?"deactivated":"activated"} successfully`):y.error(s.error||"Failed to update rule status"),S(!1)},w=async()=>{R(!0);let s=await (0,u.deleteCallRoutingRule)(e.id,"current-user-id");s.success?(y.success("Routing rule deleted successfully"),T(!1)):y.error(s.error||"Failed to delete routing rule"),R(!1)},O=async()=>{let s=await (0,h.updateCallRoutingRule)({ruleId:e.id,priority:(e.priority||0)+1});s.success?y.success("Priority increased"):y.error(s.error||"Failed to update priority")},M=async()=>{let s=await (0,h.updateCallRoutingRule)({ruleId:e.id,priority:Math.max(0,(e.priority||0)-1)});s.success?y.success("Priority decreased"):y.error(s.error||"Failed to update priority")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Switch,{"aria-label":"Toggle rule active status",checked:e.is_active,disabled:k,onCheckedChange:b}),(0,s.jsxs)(g.DropdownMenu,{children:[(0,s.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(x.Button,{size:"icon",variant:"ghost",children:[(0,s.jsx)(l.MoreVertical,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,s.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(g.DropdownMenuItem,{onClick:()=>f.push(`/dashboard/settings/communications/call-routing/${e.id}`),children:[(0,s.jsx)(r.Edit,{className:"mr-2 h-4 w-4"}),"Edit Rule"]}),(0,s.jsxs)(g.DropdownMenuItem,{disabled:k,onClick:b,children:[(0,s.jsx)(n.default,{className:"mr-2 h-4 w-4"}),e.is_active?"Deactivate":"Activate"]}),(0,s.jsx)(g.DropdownMenuSeparator,{}),(0,s.jsxs)(g.DropdownMenuItem,{onClick:O,children:[(0,s.jsx)(i.ArrowUp,{className:"mr-2 h-4 w-4"}),"Increase Priority"]}),(0,s.jsxs)(g.DropdownMenuItem,{onClick:M,children:[(0,s.jsx)(a.ArrowDown,{className:"mr-2 h-4 w-4"}),"Decrease Priority"]}),(0,s.jsx)(g.DropdownMenuSeparator,{}),(0,s.jsxs)(g.DropdownMenuItem,{onClick:()=>y.success("Duplicate rule functionality"),children:[(0,s.jsx)(t.Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,s.jsx)(g.DropdownMenuSeparator,{}),(0,s.jsxs)(g.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>T(!0),children:[(0,s.jsx)(d.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,s.jsx)(p.Dialog,{onOpenChange:T,open:N,children:(0,s.jsxs)(p.DialogContent,{children:[(0,s.jsxs)(p.DialogHeader,{children:[(0,s.jsx)(p.DialogTitle,{children:"Delete Routing Rule"}),(0,s.jsxs)(p.DialogDescription,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone. Calls will no longer be routed using this rule.']})]}),(0,s.jsxs)(p.DialogFooter,{children:[(0,s.jsx)(x.Button,{disabled:C,onClick:()=>T(!1),variant:"outline",children:"Cancel"}),(0,s.jsx)(x.Button,{disabled:C,onClick:w,variant:"destructive",children:C?"Deleting...":"Delete Rule"})]})]})})]})}e.s(["CallRoutingRuleActions",()=>f],725066)}]);