(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,686787,e=>{"use strict";e.i(116233),e.s([])},306466,e=>{"use strict";let s=(0,e.i(383206).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>s])},598870,e=>{"use strict";var s=e.i(306466);e.s(["Save",()=>s.default])},330557,e=>{"use strict";let s=(0,e.i(383206).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["default",()=>s])},181893,e=>{"use strict";var s=e.i(330557);e.s(["Zap",()=>s.default])},160973,e=>{"use strict";e.i(116233),e.s([])},728947,e=>{"use strict";let s=(0,e.i(383206).default)("voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]);e.s(["default",()=>s])},398598,e=>{"use strict";var s=e.i(728947);e.s(["Voicemail",()=>s.default])},75919,e=>{"use strict";e.s([])},224216,e=>{"use strict";let s=(0,e.i(383206).default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);e.s(["default",()=>s])},578154,e=>{"use strict";var s=e.i(224216);e.s(["Volume2",()=>s.default])},32164,e=>{"use strict";let s=(0,e.i(383206).default)("file-headphone",[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]]);e.s(["default",()=>s])},601426,e=>{"use strict";let s=(0,e.i(383206).default)("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);e.s(["default",()=>s])},847301,914239,575373,e=>{"use strict";var s=e.i(111043),a=e.i(79254),i=e.i(288413),t=e.i(641304),r=e.i(598870),l=e.i(904653);e.i(553153);var n=e.i(363712);e.i(889265);var c=e.i(677607);e.i(794747);var d=e.i(513990);function o({title:e,description:o,helpText:m,hasChanges:u=!1,isPending:x=!1,isLoading:h=!1,onSave:j,onCancel:g,saveButtonText:p="Save Settings",children:v}){let f=(0,l.useRouter)();return h?(0,s.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,s.jsx)(t.Loader2,{className:"text-muted-foreground size-8 animate-spin"})}):(0,s.jsxs)("div",{className:"space-y-8 py-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:e}),m&&(0,s.jsxs)(d.Tooltip,{children:[(0,s.jsx)(d.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("button",{className:"flex-shrink-0",type:"button",children:(0,s.jsx)(i.HelpCircle,{className:"text-muted-foreground h-3.5 w-3.5"})})}),(0,s.jsx)(d.TooltipContent,{className:"max-w-xs",children:(0,s.jsx)("p",{className:"text-sm",children:m})})]})]}),u&&(0,s.jsx)(n.Badge,{className:"bg-warning hover:bg-warning",children:"Unsaved Changes"})]}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:o})]}),(0,s.jsx)("div",{className:"space-y-6",children:v}),(0,s.jsx)("div",{className:"bg-card sticky bottom-0 z-10 rounded-xl border p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-warning dark:bg-warning/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,s.jsx)("div",{className:"bg-warning h-2 w-2 animate-pulse rounded-full"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Unsaved Changes"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Save your changes or discard them"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-success dark:bg-success/30 flex h-8 w-8 items-center justify-center rounded-full",children:(0,s.jsx)(a.Check,{className:"text-success dark:text-success h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"All Changes Saved"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Your settings are up to date"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(c.Button,{disabled:x,onClick:g||(()=>f.refresh()),type:"button",variant:"outline",children:"Cancel"}),(0,s.jsx)(c.Button,{disabled:x||!u,onClick:j,type:"button",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Loader2,{className:"mr-2 size-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Save,{className:"mr-2 size-4"}),p]})})]})]})})]})}e.i(254851),e.i(605278),e.s(["SettingsPageLayout",()=>o],847301),e.i(116233),e.s([],914239);var m=e.i(970799),u=e.i(51052);function x({getter:e,setter:s,initialState:a,settingsName:i,transformLoad:t,transformSave:r,prefetchedData:l}){let{toast:n}=(0,u.useToast)(),[c,d]=(0,m.useTransition)(),o=(0,m.useRef)(!!l),x=(0,m.useRef)({...a,...l??{}}),[h,j]=(0,m.useState)(x.current),[g,p]=(0,m.useState)(x.current),[v,f]=(0,m.useState)(!l),[b,N]=(0,m.useState)(!1);async function y(){f(!0);try{let s=await e();if(s.success&&s.data){let e=t?t(s.data):s.data,i={...a,...e};j(i),p(i),N(!1)}}catch(e){n.error(`Failed to load ${i} settings`)}finally{f(!1)}}(0,m.useEffect)(()=>{if(o.current){o.current=!1;return}y()},[y]);let C=async e=>{d(async()=>{try{let a=e||(r?r(h):new FormData),t=await s(a);t.success?(p(h),N(!1),n.success(`${i.charAt(0).toUpperCase()+i.slice(1)} settings saved successfully`)):n.error(t.error||`Failed to save ${i} settings`)}catch(e){n.error(`An unexpected error occurred while saving ${i} settings`)}})};return{settings:h,isLoading:v,isPending:c,hasUnsavedChanges:b,updateSetting:(e,s)=>{j(a=>({...a,[e]:s})),N(!0)},updateSettings:e=>{j(s=>({...s,...e})),N(!0)},saveSettings:C,reset:()=>{j(g),N(!1)},reload:async()=>{await y()}}}e.s(["useSettings",()=>x],575373)},791645,e=>{"use strict";var s=e.i(111043),a=e.i(818796),i=e.i(852648),t=e.i(136764),r=e.i(32164),r=r,l=e.i(559586),n=e.i(747146),c=e.i(311003),d=e.i(224262),o=e.i(532727),m=e.i(826463),u=e.i(398598),x=e.i(578154),h=e.i(970799);e.i(686787);var j=e.i(519539);e.i(889265);var g=e.i(677607);e.i(254851);var p=e.i(605278);e.i(51478);var v=e.i(635613);e.i(149989);var f=e.i(880177);e.i(868198);var b=e.i(798764),N=e.i(220168);e.i(223342);var y=e.i(395645);e.i(526120);var C=e.i(610120);let S=[{value:"female-1",label:"Female - Professional"},{value:"male-1",label:"Male - Professional"},{value:"female-2",label:"Female - Friendly"},{value:"male-2",label:"Male - Friendly"}];function w(){let[e,w]=(0,h.useState)({type:"default"}),[k,F]=(0,h.useState)({emailEnabled:!0,emailAddresses:["user@example.com"],smsEnabled:!1,smsNumbers:[],transcriptionEnabled:!0}),[T,P]=(0,h.useState)({maxMessageLength:180,maxMessages:100,deleteAfterDays:30,requirePin:!1}),[E,A]=(0,h.useState)(!1),[M,z]=(0,h.useState)(0),I=(0,h.useRef)(null),B=()=>{A(!E),setTimeout(()=>A(!1),3e3)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{children:[(0,s.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Voicemail,{className:"size-5"}),"Voicemail Greeting"]}),(0,s.jsx)(p.CardDescription,{children:"Configure the greeting message that callers hear when they reach your voicemail"})]}),(0,s.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,s.jsx)(N.StandardFormField,{label:"Greeting Type",htmlFor:"greetingType",children:(0,s.jsxs)(b.Select,{onValueChange:s=>w({...e,type:s}),value:e.type,children:[(0,s.jsx)(b.SelectTrigger,{id:"greetingType",children:(0,s.jsx)(b.SelectValue,{})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"default",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Volume2,{className:"size-4"}),"Default System Greeting"]})}),(0,s.jsx)(b.SelectItem,{value:"text-to-speech",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.MessageSquare,{className:"size-4"}),"Text-to-Speech"]})}),(0,s.jsx)(b.SelectItem,{value:"audio-file",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.default,{className:"size-4"}),"Upload Audio File"]})})]})]})}),"default"===e.type&&(0,s.jsxs)(j.Alert,{children:[(0,s.jsx)(a.AlertCircle,{className:"size-4"}),(0,s.jsx)(j.AlertTitle,{children:"Default Greeting"}),(0,s.jsx)(j.AlertDescription,{children:'"You have reached the voicemail of [Your Business Name]. Please leave a message after the tone."'})]}),"text-to-speech"===e.type&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.StandardFormField,{label:"Greeting Text",htmlFor:"ttsText",description:"Keep it concise (15-30 seconds when spoken)",children:(0,s.jsx)(C.Textarea,{id:"ttsText",onChange:s=>w({...e,content:s.target.value}),placeholder:"Enter your custom greeting message...",rows:4,value:e.content||""})}),(0,s.jsx)(N.StandardFormField,{label:"Voice",htmlFor:"ttsVoice",children:(0,s.jsxs)(b.Select,{onValueChange:s=>w({...e,voice:s}),value:e.voice,children:[(0,s.jsx)(b.SelectTrigger,{id:"ttsVoice",children:(0,s.jsx)(b.SelectValue,{placeholder:"Select voice"})}),(0,s.jsx)(b.SelectContent,{children:S.map(e=>(0,s.jsx)(b.SelectItem,{value:e.value,children:e.label},e.value))})]})}),e.content&&(0,s.jsx)(g.Button,{onClick:B,variant:"outline",children:E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Pause,{className:"mr-2 size-4"}),"Pause Preview"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Play,{className:"mr-2 size-4"}),"Preview Greeting"]})})]}),"audio-file"===e.type&&(0,s.jsxs)("div",{className:"space-y-4",children:[e.content?(0,s.jsx)(p.Card,{className:"border-success bg-success dark:border-success dark:bg-success/20",children:(0,s.jsx)(p.CardContent,{className:"pt-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(r.default,{className:"text-success dark:text-success size-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.fileName}),(0,s.jsxs)("div",{className:"text-muted-foreground text-sm",children:[function(e){if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/1024**s*100)/100} ${["Bytes","KB","MB"][s]}`}(e.fileSize||0),e.duration&&` • ${e.duration}s`]}),(0,s.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,s.jsx)(g.Button,{onClick:B,size:"sm",variant:"outline",children:E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Pause,{className:"mr-2 size-3"}),"Pause"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Play,{className:"mr-2 size-3"}),"Play"]})})})]})]}),(0,s.jsx)(g.Button,{onClick:()=>{w({type:"default"}),I.current&&(I.current.value="")},size:"icon",variant:"ghost",children:(0,s.jsx)(o.Trash2,{className:"size-4"})})]})})}):(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{accept:"audio/*",className:"hidden",onChange:e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("audio/"))return void alert("Please upload an audio file (MP3, WAV, M4A)");if(s.size>5242880)return void alert("File size must be less than 5MB");z(0);let a=setInterval(()=>{z(e=>e>=100?(clearInterval(a),w({type:"audio-file",content:URL.createObjectURL(s),fileName:s.name,fileSize:s.size,duration:0}),100):e+10)},100)},ref:I,type:"file"}),(0,s.jsxs)(g.Button,{className:"w-full",onClick:()=>I.current?.click(),variant:"outline",children:[(0,s.jsx)(m.Upload,{className:"mr-2 size-4"}),"Upload Audio File"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-xs",children:"Supported formats: MP3, WAV, M4A • Max file size: 5MB"}),M>0&&M<100&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"text-muted-foreground flex justify-between text-xs",children:[(0,s.jsx)("span",{children:"Uploading..."}),(0,s.jsxs)("span",{children:[M,"%"]})]}),(0,s.jsx)("div",{className:"bg-muted mt-1 h-2 overflow-hidden rounded-full",children:(0,s.jsx)("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${M}%`}})})]})]}),(0,s.jsxs)(j.Alert,{children:[(0,s.jsx)(a.AlertCircle,{className:"size-4"}),(0,s.jsx)(j.AlertTitle,{children:"Recording Tips"}),(0,s.jsx)(j.AlertDescription,{children:(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,s.jsx)("li",{children:"• Record in a quiet environment"}),(0,s.jsx)("li",{children:"• Speak clearly and at a moderate pace"}),(0,s.jsx)("li",{children:"• Keep the greeting under 30 seconds"}),(0,s.jsx)("li",{children:"• Include your business name and instructions"})]})})]})]})]})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{children:[(0,s.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Mail,{className:"size-5"}),"Notifications"]}),(0,s.jsx)(p.CardDescription,{children:"Get notified when you receive new voicemail messages"})]}),(0,s.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(f.Label,{htmlFor:"emailNotifications",children:"Email Notifications"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Receive voicemail notifications via email"})]}),(0,s.jsx)(y.Switch,{checked:k.emailEnabled,id:"emailNotifications",onCheckedChange:e=>F({...k,emailEnabled:e})})]}),k.emailEnabled&&(0,s.jsx)(N.StandardFormField,{label:"Email Addresses",htmlFor:"emailAddresses",description:"Separate multiple addresses with commas",children:(0,s.jsx)(v.Input,{id:"emailAddresses",onChange:e=>F({...k,emailAddresses:[e.target.value]}),placeholder:"user@example.com",type:"email",value:k.emailAddresses[0]||""})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(f.Label,{htmlFor:"smsNotifications",children:"SMS Notifications"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Receive voicemail notifications via text message"})]}),(0,s.jsx)(y.Switch,{checked:k.smsEnabled,id:"smsNotifications",onCheckedChange:e=>F({...k,smsEnabled:e})})]}),k.smsEnabled&&(0,s.jsx)(N.StandardFormField,{label:"Phone Number",htmlFor:"smsNumbers",children:(0,s.jsx)(v.Input,{id:"smsNumbers",onChange:e=>F({...k,smsNumbers:[e.target.value]}),placeholder:"+1 (555) 123-4567",type:"tel",value:k.smsNumbers[0]||""})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(f.Label,{htmlFor:"transcription",children:"Voicemail Transcription"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Automatically transcribe voicemail messages to text"})]}),(0,s.jsx)(y.Switch,{checked:k.transcriptionEnabled,id:"transcription",onCheckedChange:e=>F({...k,transcriptionEnabled:e})})]})]})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{children:[(0,s.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(t.Clock,{className:"size-5"}),"Voicemail Box Settings"]}),(0,s.jsx)(p.CardDescription,{children:"Configure voicemail storage and security settings"})]}),(0,s.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsx)(N.StandardFormField,{label:"Max Message Length",htmlFor:"maxLength",children:(0,s.jsxs)(b.Select,{onValueChange:e=>P({...T,maxMessageLength:Number.parseInt(e,10)}),value:T.maxMessageLength.toString(),children:[(0,s.jsx)(b.SelectTrigger,{id:"maxLength",children:(0,s.jsx)(b.SelectValue,{})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"60",children:"1 minute"}),(0,s.jsx)(b.SelectItem,{value:"120",children:"2 minutes"}),(0,s.jsx)(b.SelectItem,{value:"180",children:"3 minutes"}),(0,s.jsx)(b.SelectItem,{value:"300",children:"5 minutes"})]})]})}),(0,s.jsx)(N.StandardFormField,{label:"Max Messages",htmlFor:"maxMessages",children:(0,s.jsxs)(b.Select,{onValueChange:e=>P({...T,maxMessages:Number.parseInt(e,10)}),value:T.maxMessages.toString(),children:[(0,s.jsx)(b.SelectTrigger,{id:"maxMessages",children:(0,s.jsx)(b.SelectValue,{})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"50",children:"50 messages"}),(0,s.jsx)(b.SelectItem,{value:"100",children:"100 messages"}),(0,s.jsx)(b.SelectItem,{value:"200",children:"200 messages"}),(0,s.jsx)(b.SelectItem,{value:"500",children:"500 messages"})]})]})}),(0,s.jsx)(N.StandardFormField,{label:"Auto-Delete After",htmlFor:"deleteAfter",children:(0,s.jsxs)(b.Select,{onValueChange:e=>P({...T,deleteAfterDays:Number.parseInt(e,10)}),value:T.deleteAfterDays.toString(),children:[(0,s.jsx)(b.SelectTrigger,{id:"deleteAfter",children:(0,s.jsx)(b.SelectValue,{})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"7",children:"7 days"}),(0,s.jsx)(b.SelectItem,{value:"30",children:"30 days"}),(0,s.jsx)(b.SelectItem,{value:"60",children:"60 days"}),(0,s.jsx)(b.SelectItem,{value:"90",children:"90 days"}),(0,s.jsx)(b.SelectItem,{value:"0",children:"Never"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(f.Label,{htmlFor:"requirePin",children:"Require PIN for Access"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Protect voicemail access with a PIN code"})]}),(0,s.jsx)(y.Switch,{checked:T.requirePin,id:"requirePin",onCheckedChange:e=>P({...T,requirePin:e})})]}),T.requirePin&&(0,s.jsx)(N.StandardFormField,{label:"PIN Code",htmlFor:"pin",children:(0,s.jsx)(v.Input,{id:"pin",maxLength:6,onChange:e=>P({...T,pin:e.target.value}),placeholder:"Enter 4-6 digit PIN",type:"password",value:T.pin||""})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(g.Button,{variant:"outline",children:"Cancel"}),(0,s.jsxs)(g.Button,{children:[(0,s.jsx)(i.CheckCircle2,{className:"mr-2 size-4"}),"Save Voicemail Settings"]})]})]})}e.s(["VoicemailSettings",()=>w],791645)},221352,e=>{"use strict";var s=e.i(111043),a=e.i(751139),i=e.i(288413),t=e.i(939397),r=e.i(365707),l=e.i(511172),n=e.i(121085),c=e.i(398598),d=e.i(176378),o=e.i(970799);e.i(75919);var m=e.i(552038),u=(0,m.createServerReference)("007c45bbaae250a392ed7853919c1b624ff934f164",m.callServer,void 0,m.findSourceMapURL,"getPhoneSettings"),x=(0,m.createServerReference)("401cca6845d548abda02f3bdcdb3ab42d40d854807",m.callServer,void 0,m.findSourceMapURL,"updatePhoneSettings"),h=e.i(847301),j=e.i(224262),g=e.i(371526),p=e.i(601426),p=p,v=e.i(181893);e.i(553153);var f=e.i(363712);e.i(889265);var b=e.i(677607);e.i(254851);var N=e.i(605278);function y(){let[e,a]=(0,o.useState)([{id:"1",name:"Main Reception",type:"ivr",status:"active",steps:5},{id:"2",name:"After Hours",type:"voicemail",status:"active",steps:2},{id:"3",name:"Sales Team",type:"routing",status:"draft",steps:3}]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(N.Card,{children:[(0,s.jsx)(N.CardHeader,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(p.default,{className:"size-5"}),"Call Flows"]}),(0,s.jsx)(N.CardDescription,{children:"Design and manage visual call routing flows"})]}),(0,s.jsxs)(b.Button,{children:[(0,s.jsx)(g.Plus,{className:"mr-2 size-4"}),"Create Flow"]})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)(N.Card,{children:[(0,s.jsx)(N.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(N.CardTitle,{className:"text-base",children:e.name}),(0,s.jsxs)(N.CardDescription,{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)(f.Badge,{className:"text-xs",variant:"outline",children:e.type}),(0,s.jsxs)("span",{className:"text-xs",children:[e.steps," steps"]})]})]}),"active"===e.status?(0,s.jsx)(f.Badge,{variant:"default",children:"Active"}):(0,s.jsx)(f.Badge,{variant:"secondary",children:"Draft"})]})}),(0,s.jsxs)(N.CardContent,{className:"space-y-2",children:[(0,s.jsxs)(b.Button,{className:"w-full",size:"sm",variant:"outline",children:[(0,s.jsx)(v.Zap,{className:"mr-2 size-4"}),"Edit Flow"]}),(0,s.jsxs)(b.Button,{className:"w-full",size:"sm",variant:"outline",children:[(0,s.jsx)(j.Play,{className:"mr-2 size-4"}),"Test Flow"]})]})]},e.id))})})]}),(0,s.jsx)(N.Card,{className:"border-dashed",children:(0,s.jsxs)(N.CardContent,{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)(p.default,{className:"text-muted-foreground mb-4 size-12"}),(0,s.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"Visual Flow Builder"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 max-w-sm text-sm",children:"Design complex call routing with our drag-and-drop flow builder. Create IVR menus, conditional routing, and multi-step workflows."}),(0,s.jsxs)(b.Button,{children:[(0,s.jsx)(g.Plus,{className:"mr-2 size-4"}),"Create Your First Flow"]})]})}),(0,s.jsx)(N.Card,{className:"border-primary/50 bg-primary/5",children:(0,s.jsxs)(N.CardContent,{className:"flex items-start gap-3 pt-6",children:[(0,s.jsx)(t.Phone,{className:"text-primary mt-0.5 h-5 w-5 shrink-0"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-primary dark:text-primary text-sm font-medium",children:"Flow Design Best Practices"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Keep IVR menus simple with 3-4 options maximum. Always provide an option to reach a live person. Test your flows before publishing. Use clear, concise voice prompts. Consider peak hours when designing call capacity."})]})]})})]})}var C=e.i(791645);e.i(914239);var S=e.i(342640);e.i(51478);var w=e.i(635613);e.i(149989);var k=e.i(880177);e.i(287133);var F=e.i(120109),T=e.i(220168);e.i(223342);var P=e.i(395645);e.i(160973);var E=e.i(871124);e.i(526120);var A=e.i(610120);e.i(794747);var M=e.i(513990),z=e.i(575373),I=e.i(152088);let B={routingStrategy:"round_robin",fallbackNumber:"",businessHoursOnly:!1,voicemailEnabled:!0,voicemailGreetingUrl:"",voicemailEmailNotifications:!0,voicemailTranscriptionEnabled:!1,recordingEnabled:!1,recordingAnnouncement:"This call may be recorded for quality assurance purposes.",recordingConsentRequired:!0,ivrEnabled:!1,ivrMenu:"{}"};function V({initialSettings:e}){let{settings:m,isLoading:j,isPending:g,hasUnsavedChanges:p,updateSetting:v,saveSettings:f,reload:V}=(0,z.useSettings)({getter:u,setter:x,initialState:B,settingsName:"phone",prefetchedData:e??void 0,transformLoad:e=>e?{routingStrategy:e.routing_strategy??"round_robin",fallbackNumber:e.fallback_number??"",businessHoursOnly:e.business_hours_only??!1,voicemailEnabled:e.voicemail_enabled??!0,voicemailGreetingUrl:e.voicemail_greeting_url??"",voicemailEmailNotifications:e.voicemail_email_notifications??!0,voicemailTranscriptionEnabled:e.voicemail_transcription_enabled??!1,recordingEnabled:e.recording_enabled??!1,recordingAnnouncement:e.recording_announcement||"This call may be recorded for quality assurance purposes.",recordingConsentRequired:e.recording_consent_required??!0,ivrEnabled:e.ivr_enabled??!1,ivrMenu:e.ivr_menu?JSON.stringify(e.ivr_menu):"{}"}:{},transformSave:e=>{let s=new FormData;return s.append("routingStrategy",e.routingStrategy),s.append("fallbackNumber",e.fallbackNumber),s.append("businessHoursOnly",e.businessHoursOnly.toString()),s.append("voicemailEnabled",e.voicemailEnabled.toString()),s.append("voicemailGreetingUrl",e.voicemailGreetingUrl),s.append("voicemailEmailNotifications",e.voicemailEmailNotifications.toString()),s.append("voicemailTranscriptionEnabled",e.voicemailTranscriptionEnabled.toString()),s.append("recordingEnabled",e.recordingEnabled.toString()),s.append("recordingAnnouncement",e.recordingAnnouncement),s.append("recordingConsentRequired",e.recordingConsentRequired.toString()),s.append("ivrEnabled",e.ivrEnabled.toString()),s.append("ivrMenu",e.ivrMenu),s}}),R=(0,o.useCallback)(()=>{f().catch(()=>{})},[f]),L=(0,o.useCallback)(()=>{V().catch(()=>{})},[V]);return(0,s.jsx)(M.TooltipProvider,{children:(0,s.jsxs)(h.SettingsPageLayout,{description:"Manage routing, voicemail, and plan for the upcoming React Flow VOIP system.",hasChanges:p,helpText:"Changes apply to all inbound calls immediately.",isLoading:j,isPending:g,onCancel:L,onSave:R,saveButtonText:"Save phone settings",title:"Phone & Voice",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsx)(S.Breadcrumb,{children:(0,s.jsxs)(S.BreadcrumbList,{children:[(0,s.jsx)(S.BreadcrumbItem,{children:(0,s.jsx)(S.BreadcrumbLink,{asChild:!0,children:(0,s.jsx)(d.default,{href:"/dashboard/settings",children:"Settings"})})}),(0,s.jsx)(S.BreadcrumbSeparator,{}),(0,s.jsx)(S.BreadcrumbItem,{children:(0,s.jsx)(S.BreadcrumbLink,{asChild:!0,children:(0,s.jsx)(d.default,{href:"/dashboard/settings/communications",children:"Communications"})})}),(0,s.jsx)(S.BreadcrumbSeparator,{}),(0,s.jsx)(S.BreadcrumbItem,{children:(0,s.jsx)(S.BreadcrumbPage,{children:"Phone"})})]})}),(0,s.jsx)(b.Button,{asChild:!0,variant:"ghost",children:(0,s.jsxs)(d.default,{href:"/dashboard/settings/communications",children:[(0,s.jsx)(n.Settings,{className:"mr-2 size-4"}),"Back to communications"]})})]}),(0,s.jsxs)(E.Tabs,{className:"mt-6 space-y-6",defaultValue:"overview",children:[(0,s.jsxs)(E.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(E.TabsTrigger,{value:"overview",children:"Routing & Compliance"}),(0,s.jsx)(E.TabsTrigger,{value:"voicemail",children:"Company Voicemail"}),(0,s.jsx)(E.TabsTrigger,{value:"flows",children:"Call Flows (Beta)"})]}),(0,s.jsxs)(E.TabsContent,{className:"space-y-6",value:"overview",children:[(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(t.Phone,{className:"size-4"}),"Routing & fallback"]}),(0,s.jsx)(N.CardDescription,{children:"Where inbound calls go when they reach your main number"})]}),(0,s.jsxs)(N.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:(0,I.cn)("grid","md:grid-cols-2","gap-4"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(k.Label,{className:"text-sm font-medium",children:"Routing strategy"}),(0,s.jsxs)("select",{className:"border-input bg-background mt-2 block w-full rounded-md border px-3 py-2 text-sm",onChange:e=>v("routingStrategy",e.target.value),value:m.routingStrategy,children:[(0,s.jsx)("option",{value:"round_robin",children:"Round robin"}),(0,s.jsx)("option",{value:"skills_based",children:"Skills-based"}),(0,s.jsx)("option",{value:"priority",children:"Priority"}),(0,s.jsx)("option",{value:"simultaneous",children:"Simultaneous ring"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Determines how Thorbis assigns inbound calls."})]}),(0,s.jsxs)(T.StandardFormField,{label:"Fallback number",htmlFor:"phone-fallback",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsxs)(M.Tooltip,{children:[(0,s.jsx)(M.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(i.HelpCircle,{className:"text-muted-foreground size-3"})}),(0,s.jsx)(M.TooltipContent,{children:"Phone number used if no teammates are available."})]}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Phone number used if no teammates are available"})]}),(0,s.jsx)(w.Input,{id:"phone-fallback",onChange:e=>v("fallbackNumber",e.target.value),placeholder:"(555) 987-6543",type:"tel",value:m.fallbackNumber})]})]}),(0,s.jsx)(F.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(k.Label,{className:"text-sm font-medium",children:"Business hours only"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Send callers to voicemail outside of configured business hours."})]}),(0,s.jsx)(P.Switch,{checked:m.businessHoursOnly,onCheckedChange:e=>v("businessHoursOnly",e)})]})]})]}),(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Voicemail,{className:"size-4"}),"Voicemail"]}),(0,s.jsx)(N.CardDescription,{children:"Greetings, transcription, and email notifications"})]}),(0,s.jsxs)(N.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Enable voicemail"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Allow callers to leave a message when no one answers."})]}),(0,s.jsx)(P.Switch,{checked:m.voicemailEnabled,onCheckedChange:e=>v("voicemailEnabled",e)})]}),m.voicemailEnabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Separator,{}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(T.StandardFormField,{label:"Greeting URL",htmlFor:"phone-greeting-url",children:[(0,s.jsx)(w.Input,{id:"phone-greeting-url",onChange:e=>v("voicemailGreetingUrl",e.target.value),placeholder:"https://cdn.yourcompany.com/greetings/vm.mp3",value:m.voicemailGreetingUrl}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Provide an MP3/OGG file for your greeting."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Email notifications for new voicemail"}),(0,s.jsx)(P.Switch,{checked:m.voicemailEmailNotifications,onCheckedChange:e=>v("voicemailEmailNotifications",e)})]})]}),(0,s.jsx)(F.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Transcribe voicemail"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Include transcription in notification emails."})]}),(0,s.jsx)(P.Switch,{checked:m.voicemailTranscriptionEnabled,onCheckedChange:e=>v("voicemailTranscriptionEnabled",e)})]})]})]})]}),(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(r.PhoneIncoming,{className:"size-4"}),"Call recording"]}),(0,s.jsx)(N.CardDescription,{children:"Capture calls for QA and maintain compliance"})]}),(0,s.jsxs)(N.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:(0,I.cn)("flex items-center justify-between","rounded-lg border","p-3"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Enable recording"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Applies to all inbound and outbound calls."})]}),(0,s.jsx)(P.Switch,{checked:m.recordingEnabled,onCheckedChange:e=>v("recordingEnabled",e)})]}),m.recordingEnabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Separator,{}),(0,s.jsx)(T.StandardFormField,{label:"Announcement message",htmlFor:"phone-recording-announcement",children:(0,s.jsx)(A.Textarea,{id:"phone-recording-announcement",className:"min-h-[80px] resize-none",onChange:e=>v("recordingAnnouncement",e.target.value),value:m.recordingAnnouncement})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Consent required"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Pauses recording if customer declines consent."})]}),(0,s.jsx)(P.Switch,{checked:m.recordingConsentRequired,onCheckedChange:e=>v("recordingConsentRequired",e)})]})]})]})]}),(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.PhoneOutgoing,{className:"size-4"}),"IVR & call flows"]}),(0,s.jsx)(N.CardDescription,{children:"Menu options and directed routing"})]}),(0,s.jsxs)(N.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:(0,I.cn)("flex items-center justify-between","rounded-lg border","p-3"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Enable IVR menu"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Present callers with “Press 1 for Sales” style prompts."})]}),(0,s.jsx)(P.Switch,{checked:m.ivrEnabled,onCheckedChange:e=>v("ivrEnabled",e)})]}),m.ivrEnabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Separator,{}),(0,s.jsxs)(T.StandardFormField,{label:"IVR JSON definition",htmlFor:"phone-ivr-menu",children:[(0,s.jsx)(A.Textarea,{id:"phone-ivr-menu",className:"min-h-[160px] font-mono text-sm",onChange:e=>v("ivrMenu",e.target.value),value:m.ivrMenu}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Provide call flow definition (we'll validate JSON on save)."})]})]})]})]}),(0,s.jsx)(N.Card,{className:"border-warning/40 bg-warning/5",children:(0,s.jsxs)(N.CardContent,{className:(0,I.cn)("flex items-start","gap-3","pt-6"),children:[(0,s.jsx)(a.AlertTriangle,{className:"text-warning size-5"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-warning text-sm font-semibold",children:"Regulatory reminder"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Recording and IVR features may carry legal obligations in your jurisdiction (GDPR, HIPAA, state consent laws). Confirm with legal counsel before enabling and keep callers informed via the announcement message."})]})]})})]}),(0,s.jsx)(E.TabsContent,{value:"voicemail",children:(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsx)(N.CardTitle,{children:"Company Voicemail Experience"}),(0,s.jsx)(N.CardDescription,{children:"Configure greetings, notifications, and mailbox rules for every Telnyx number."})]}),(0,s.jsx)(N.CardContent,{className:"pt-0",children:(0,s.jsx)(C.VoicemailSettings,{})})]})}),(0,s.jsx)(E.TabsContent,{value:"flows",children:(0,s.jsxs)(N.Card,{children:[(0,s.jsxs)(N.CardHeader,{children:[(0,s.jsx)(N.CardTitle,{children:"Visual Call Flow Builder"}),(0,s.jsx)(N.CardDescription,{children:"Experiment with the React Flow designer that will power future VOIP automation."})]}),(0,s.jsx)(N.CardContent,{className:"pt-0",children:(0,s.jsx)(y,{})})]})})]})]})})}e.s(["default",()=>V],221352)}]);