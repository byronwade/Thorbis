(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,519131,e=>{"use strict";let t=(0,e.i(383206).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["default",()=>t])},233654,e=>{"use strict";var t=e.i(519131);e.s(["Paperclip",()=>t.default])},52573,e=>{"use strict";let t=(0,e.i(383206).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>t])},694288,e=>{"use strict";var t=e.i(52573);e.s(["Link",()=>t.default])},235670,e=>{"use strict";e.i(116233),e.s([])},415872,e=>{"use strict";let t=(0,e.i(383206).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["default",()=>t])},613240,e=>{"use strict";var t=e.i(415872);e.s(["Printer",()=>t.default])},960876,e=>{"use strict";function t(e,t){if(!e)return t||"Unknown Customer";if(e.display_name)return e.display_name;let a=e.first_name?.trim(),s=e.last_name?.trim();return a&&s?`${a} ${s}`:a||s||(e.company_name?e.company_name:e.email?e.email:t||"Unknown Customer")}function a(e){if(!e)return"?";let a=t(e).split(/\s+/).filter(Boolean);return a.length>=2?(a[0][0]+a[1][0]).toUpperCase():1===a.length&&a[0].length>=2?a[0].slice(0,2).toUpperCase():1===a.length?a[0][0].toUpperCase():"?"}e.s(["getCustomerDisplayName",()=>t,"getCustomerInitials",()=>a])},127243,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["default",()=>t])},263699,e=>{"use strict";var t=e.i(127243);e.s(["ChevronUp",()=>t.default])},231476,e=>{"use strict";var t=e.i(819260);e.s(["PanelLeft",()=>t.default])},665123,e=>{"use strict";var t=e.i(905501);e.s(["ImageIcon",()=>t.default])},926624,e=>{"use strict";let t=(0,e.i(383206).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["default",()=>t])},623380,e=>{"use strict";var t=e.i(926624);e.s(["List",()=>t.default])},905167,e=>{"use strict";let t=(0,e.i(383206).default)("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]);e.s(["default",()=>t])},103047,e=>{"use strict";let t=(0,e.i(383206).default)("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]);e.s(["default",()=>t])},79370,e=>{"use strict";var t=e.i(103047);e.s(["StickyNote",()=>t.default])},126776,e=>{"use strict";var t=e.i(905167);e.s(["Reply",()=>t.default])},474500,e=>{"use strict";var t=e.i(111043);e.i(889265);var a=e.i(677607),s=e.i(152088),l=e.i(882896),i=e.i(507769),r=e.i(218074),d=e.i(818796),n=e.i(970799),c=e.i(995403);e.i(794747);var o=e.i(513990);function h({html:a,text:l,attachments:r,className:d}){let[c,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{e.A(161886).then(e=>{o(()=>e.default)})},[]);let h=(0,n.useMemo)(()=>a&&c?c.sanitize(a,{ALLOWED_TAGS:["p","br","strong","em","u","b","i","s","strike","a","ul","ol","li","h1","h2","h3","h4","h5","h6","blockquote","img","table","thead","tbody","tfoot","tr","th","td","div","span","hr","pre","code","font","center","section","article","header","footer","main","style"],ALLOWED_ATTR:["href","src","alt","title","width","height","style","class","id","align","valign","border","cellpadding","cellspacing","bgcolor","color","face","size","colspan","rowspan","target","rel"],ALLOW_DATA_ATTR:!1,ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,KEEP_CONTENT:!0,ADD_TAGS:["style"],ADD_ATTR:["media","type"]}):null,[a,c]),u=(0,n.useMemo)(()=>l?l.split(/\n\n+/).map((e,a)=>(0,t.jsx)("p",{className:"mb-4 last:mb-0",children:e.split("\n").map((e,a,s)=>(0,t.jsxs)("span",{children:[e,a<s.length-1&&(0,t.jsx)("br",{})]},a))},a)):null,[l]),p=r&&r.length>0;return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col gap-4",d),children:[(0,t.jsx)("div",{className:"email-content-wrapper prose prose-sm dark:prose-invert max-w-none",children:h?(0,t.jsx)("div",{className:"email-content-html text-sm leading-relaxed",style:{fontSize:"14px",lineHeight:"1.6",color:"inherit"},dangerouslySetInnerHTML:{__html:h}}):a&&!c?u?(0,t.jsx)("div",{className:"text-sm leading-relaxed text-foreground",children:u}):(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground italic",children:"Loading email content..."})}):u?(0,t.jsx)("div",{className:"text-sm leading-relaxed text-foreground",children:u}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 192 192",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto mb-4 opacity-30",children:(0,t.jsx)("rect",{width:"192",height:"192",rx:"96",fill:"currentColor",fillOpacity:"0.15"})}),(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No content available"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This email may have been deleted or expired"})]})})}),p&&(0,t.jsxs)("div",{className:"border-t border-border/50 pt-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2 text-foreground",children:[(0,t.jsx)(i.File,{className:"h-4 w-4"}),"Attachments (",r.length,")"]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:r.map((e,a)=>(0,t.jsx)(m,{attachment:e},e.id||e.path||a))})]})]})}function m({attachment:e}){let s=e.filename||e.name||"attachment",h=e.content_type||e.type||"",m=h.startsWith("image/"),u=e.storage_url||null,p=!!u&&"#"!==u,f=(0,n.useCallback)(()=>{c.toast.error("Attachment unavailable",{description:"This attachment cannot be downloaded. The file may have expired or been removed."})},[]);return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:m?(0,t.jsx)(r.Image,{className:"h-5 w-5 text-muted-foreground"}):(0,t.jsx)(i.File,{className:"h-5 w-5 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:s}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[h&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:h}),!p&&(0,t.jsxs)(o.Tooltip,{children:[(0,t.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("span",{className:"text-xs text-orange-500 flex items-center gap-0.5",children:[(0,t.jsx)(d.AlertCircle,{className:"h-3 w-3"}),"Unavailable"]})}),(0,t.jsx)(o.TooltipContent,{children:(0,t.jsx)("p",{children:"This attachment cannot be downloaded"})})]})]})]}),p?(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"flex-shrink-0",asChild:!0,children:(0,t.jsxs)("a",{href:u,download:s,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(l.Download,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Download ",s]})]})}):(0,t.jsxs)(o.Tooltip,{children:[(0,t.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",className:"flex-shrink-0 opacity-50",onClick:f,children:[(0,t.jsx)(l.Download,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Download ",s]})]})}),(0,t.jsx)(o.TooltipContent,{children:(0,t.jsx)("p",{children:"Attachment unavailable for download"})})]})]})}e.s(["EmailContent",()=>h])},26839,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("40fce90de48a3dc3624e62d6ae8fe22c5d103d1f6b",t.callServer,void 0,t.findSourceMapURL,"archiveEmailAction");e.s(["archiveEmailAction",()=>a])},411494,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("406861cd5224a1d7b671811bfed22c95dd73829df5",t.callServer,void 0,t.findSourceMapURL,"markEmailAsReadAction");e.s(["markEmailAsReadAction",()=>a])},171887,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("4072a3f09fd79f89952570ec80a7c57e18f5dadea3",t.callServer,void 0,t.findSourceMapURL,"toggleStarEmailAction");e.s(["toggleStarEmailAction",()=>a])},58893,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("405ece0ba656f365847d37de3eec9016362a453a0b",t.callServer,void 0,t.findSourceMapURL,"sendCustomerEmailAction");e.s(["sendCustomerEmailAction",()=>a])},874023,e=>{"use strict";let t=(0,e.i(383206).default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);e.s(["default",()=>t])},586870,e=>{"use strict";var t=e.i(874023);e.s(["Flag",()=>t.default])},937343,923192,e=>{"use strict";var t=e.i(383206);let a=(0,t.default)("forward",[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);e.s(["default",()=>a],937343);let s=(0,t.default)("reply-all",[["path",{d:"m12 17-5-5 5-5",key:"1s3y5u"}],["path",{d:"M22 18v-2a4 4 0 0 0-4-4H7",key:"1fcyog"}],["path",{d:"m7 17-5-5 5-5",key:"1ed8i2"}]]);e.s(["default",()=>s],923192)},123215,631237,787817,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("406d2674c7205459d9f4f40892380fb085c342fe1c",t.callServer,void 0,t.findSourceMapURL,"getEmailsAction");e.s(["getEmailsAction",()=>a],123215);var s=e.i(937343);e.s(["Forward",()=>s.default],631237);var l=e.i(923192);e.s(["ReplyAll",()=>l.default],787817)},426168,355336,178429,e=>{"use strict";var t=e.i(383206);let a=(0,t.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);e.s(["default",()=>a],426168);let s=(0,t.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);e.s(["default",()=>s],355336);let l=(0,t.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);e.s(["default",()=>l],178429)},780679,e=>{"use strict";let t=(0,e.i(383206).default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);e.s(["default",()=>t])},134003,e=>{"use strict";let t=(0,e.i(383206).default)("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);e.s(["default",()=>t])},161886,e=>{e.v(t=>Promise.all(["static/chunks/30bf752a4ae14562.js"].map(t=>e.l(t))).then(()=>t(112867)))},781796,e=>{e.v(t=>Promise.all(["static/chunks/1d31d92d332be4c2.js"].map(t=>e.l(t))).then(()=>t(321019)))}]);