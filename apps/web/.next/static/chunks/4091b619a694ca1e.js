(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,432716,e=>{"use strict";let r=(0,e.i(383206).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["default",()=>r])},882525,e=>{"use strict";var r=e.i(432716);e.s(["Copy",()=>r.default])},616291,e=>{"use strict";let r=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>r])},664136,e=>{"use strict";var r=e.i(616291);e.s(["Edit",()=>r.default])},926991,e=>{"use strict";let r=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>r])},51866,e=>{"use strict";var r=e.i(926991);e.s(["ChevronLeft",()=>r.default])},172506,e=>{"use strict";var r=e.i(306929);e.s(["ArrowDown",()=>r.default])},698684,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>r])},407205,e=>{"use strict";var r=e.i(698684);e.s(["ArrowUp",()=>r.default])},306929,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>r])},573951,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>r])},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},222121,750966,e=>{"use strict";e.i(116233),e.s([],222121);var r=e.i(904653),t=e.i(995403);function a({entityType:e,basePath:a}){let s=(0,r.useRouter)(),i={jobs:"job",invoices:"invoice",estimates:"estimate",payments:"payment",contracts:"contract",appointments:"appointment",equipment:"equipment","maintenance-plans":"maintenance plan","service-agreements":"service agreement","purchase-orders":"purchase order",properties:"property",customers:"customer"}[e]||e,n=a||`/dashboard/work/${e}`,o=async(e,r)=>{try{return await r(e),t.toast.success(`${e.length} ${i}s archived successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to archive ${i}s:`,e),t.toast.error(`Failed to archive ${i}s`),!1}};return{handleRowClick:e=>{s.push(`${n}/${e}`)},handleArchive:async(e,r)=>{try{return await r(e),t.toast.success(`${i} archived successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to archive ${i}:`,e),t.toast.error(`Failed to archive ${i}`),!1}},handleBulkArchive:o,handleRestore:async(e,r)=>{try{return await r(e),t.toast.success(`${i} restored successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to restore ${i}:`,e),t.toast.error(`Failed to restore ${i}`),!1}},handleRefresh:()=>{s.refresh(),t.toast.success("Refreshed")},createSearchFilter:e=>(r,t)=>{let a=t.toLowerCase().trim();return!a||e.some(e=>{let t=r[e];return null!=t&&String(t).toLowerCase().includes(a)})},createBulkActions:e=>{let r=[];return e.archive&&r.push({label:"Archive Selected",onClick:r=>o(r,e.archive)}),e.export&&r.push({label:"Export Selected",onClick:async r=>{try{await e.export(r),t.toast.success(`Exported ${r.length} ${i}s`)}catch(e){t.toast.error("Failed to export")}}}),e.delete&&r.push({label:"Delete Selected",onClick:async r=>{try{await e.delete(r),t.toast.success(`Deleted ${r.length} ${i}s`),s.refresh()}catch(e){t.toast.error("Failed to delete")}}}),r},entityLabel:i}}e.s(["useTableActions",()=>a],750966)},800364,e=>{"use strict";let r=(0,e.i(383206).default)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);e.s(["default",()=>r])},922809,e=>{"use strict";var r=e.i(800364);e.s(["Box",()=>r.default])},313342,e=>{"use strict";var r=e.i(111043),t=e.i(946672),a=e.i(922809),s=e.i(882525),i=e.i(982686),n=e.i(664136),o=e.i(367571),c=e.i(38614),l=e.i(60179),d=e.i(697029),h=e.i(823167),u=e.i(176378),m=e.i(970799),g=e.i(552038),x=(0,g.createServerReference)("407b4c1fe4d280f59e21f5c9f74d7df6e4f134ef32",g.callServer,void 0,g.findSourceMapURL,"archivePriceBookItem");e.i(222121);var p=e.i(473485);e.i(553153);var f=e.i(363712);e.i(889265);var v=e.i(677607);e.i(244242);var w=e.i(563078),y=e.i(527756),P=e.i(750966),b=e.i(635709),k=e.i(871509),j=e.i(611532),S=e.i(152088);function N({items:e,itemsPerPage:g=50,onRefresh:N}){let C=(0,j.usePriceBookStore)(e=>e.itemTypeFilter),M=(0,j.usePriceBookStore)(e=>e.categoryFilter),A=(0,j.usePriceBookStore)(e=>e.getFilterSummary),{handleRefresh:$}=(0,P.useTableActions)({entityType:"price_book"}),{openArchiveDialog:R,ArchiveDialogComponent:T}=(0,p.useArchiveDialog)({onConfirm:async e=>{(await x(e)).success&&$()},title:"Archive Price Book Item?",description:"This item will be archived and can be restored within 90 days."}),[D,F]=(0,m.useState)(new Set),{openArchiveDialog:B,ArchiveDialogComponent:I}=(0,p.useArchiveDialog)({onConfirm:async()=>{let e=0;for(let r of D)(await x(r)).success&&e++;e>0&&$()},title:`Archive ${D.size} Item(s)?`,description:`${D.size} item(s) will be archived and can be restored within 90 days.`}),L=e.filter(e=>("all"===C||e.itemType===C)&&(!M.category||e.category===M.category&&(!M.subcategory||!!e.subcategory?.includes(M.subcategory)))&&!0),O=[{key:"image",header:"",width:"w-12",shrink:!0,hideOnMobile:!0,render:e=>(0,r.jsx)("div",{className:"bg-muted flex h-10 w-10 items-center justify-center overflow-hidden rounded-md border",children:e.imageUrl?(0,r.jsx)(h.default,{alt:e.name,className:"h-full w-full object-cover",src:e.imageUrl,width:40,height:40}):(0,r.jsx)(l.Package,{className:"text-muted-foreground h-4 w-4"})})},{key:"name",header:"Item Name",width:"flex-1",render:e=>(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.default,{className:"text-foreground truncate text-xs leading-tight font-medium hover:underline",href:`/dashboard/work/pricebook/${e.id}`,onClick:e=>e.stopPropagation(),children:e.name}),e.priceTier&&"standard"!==e.priceTier&&(0,r.jsxs)("span",{className:"text-muted-foreground text-xs",children:["- ","good"===e.priceTier&&"Good","better"===e.priceTier&&"Better","best"===e.priceTier&&"Best"]})]}),(0,r.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-xs",children:[(0,r.jsxs)("span",{className:"truncate font-mono",children:["SKU: ",e.sku]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"service"===e.itemType?"Service":"material"===e.itemType?"Material":"Equipment"}),e.isFlatRate&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Flat Rate"})]})]})]})},{key:"category",header:"Category",width:"w-48",shrink:!0,hideOnMobile:!0,render:e=>{let t=e.subcategory?`${e.category} › ${e.subcategory}`:e.category;return(0,r.jsx)("div",{className:"text-muted-foreground truncate text-xs",children:t})}},{key:"labor",header:"Labor",width:"w-20",shrink:!0,align:"right",hideOnMobile:!0,render:e=>"service"===e.itemType&&e.laborHours?(0,r.jsxs)("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[(0,r.jsx)("span",{className:"font-medium",children:e.laborHours}),(0,r.jsx)("span",{className:"text-xs",children:"hrs"})]}):(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:"—"})},{key:"cost",header:"Cost",width:"w-24",shrink:!0,align:"right",hideOnMobile:!0,render:e=>(0,r.jsx)("div",{className:"text-muted-foreground text-xs font-medium",children:(0,k.formatCurrency)(e.cost)})},{key:"price",header:"Price",width:"w-28",shrink:!0,align:"right",render:e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-foreground text-xs font-semibold",children:(0,k.formatCurrency)(e.price)}),(0,r.jsx)("div",{className:"text-muted-foreground text-xs",children:e.unit})]})},{key:"markup",header:"Markup",width:"w-20",shrink:!0,align:"right",hideOnMobile:!0,render:e=>(0,r.jsxs)("div",{className:"text-success dark:text-success text-xs font-medium",children:[e.markupPercent,"%"]})},{key:"status",header:"Status",width:"w-24",shrink:!0,hideOnMobile:!0,render:e=>e.isActive?null:(0,r.jsx)(f.Badge,{className:(0,S.cn)("text-xs font-medium","border-border/50 bg-background text-muted-foreground"),variant:"outline",children:"Inactive"})},{key:"actions",header:"",width:"w-12",shrink:!0,align:"right",render:e=>(0,r.jsx)("div",{"data-no-row-click":!0,children:(0,r.jsxs)(w.DropdownMenu,{children:[(0,r.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsxs)(v.Button,{className:"h-8 w-8 p-0",variant:"ghost",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(c.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,r.jsxs)(w.DropdownMenuContent,{align:"end",children:[(0,r.jsx)(w.DropdownMenuLabel,{children:"Actions"}),(0,r.jsx)(w.DropdownMenuItem,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(u.default,{href:`/dashboard/work/pricebook/${e.id}`,children:[(0,r.jsx)(o.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]})}),(0,r.jsx)(w.DropdownMenuItem,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(u.default,{href:`/dashboard/work/pricebook/${e.id}/edit`,children:[(0,r.jsx)(n.Edit,{className:"mr-2 h-4 w-4"}),"Edit Item"]})}),(0,r.jsxs)(w.DropdownMenuItem,{onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(s.Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,r.jsx)(w.DropdownMenuSeparator,{}),(0,r.jsxs)(w.DropdownMenuItem,{className:"text-warning dark:text-warning",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(t.Archive,{className:"mr-2 h-4 w-4"}),e.isActive?"Deactivate":"Activate"]}),(0,r.jsxs)(w.DropdownMenuItem,{className:"text-destructive",onClick:()=>{R(e.id)},children:[(0,r.jsx)(t.Archive,{className:"mr-2 size-4"}),"Archive Item"]})]})]})})}],U=[{label:"Mass Price Update",icon:(0,r.jsx)(d.TrendingUp,{className:"h-4 w-4"}),onClick:()=>{}},{label:"Change Category",icon:(0,r.jsx)(l.Package,{className:"h-4 w-4"}),onClick:()=>{}},{label:"Bulk Export",icon:(0,r.jsx)(i.DollarSign,{className:"h-4 w-4"}),onClick:()=>{}},{label:"Archive Selected",icon:(0,r.jsx)(t.Archive,{className:"h-4 w-4"}),variant:"destructive",onClick:async e=>{F(e),B("")}}],q=A(),E="All Items"!==q?`No items found for: ${q}`:"No price book items found";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex h-full flex-col",children:["All Items"!==q&&(0,r.jsx)("div",{className:"bg-muted/30 shrink-0 border-b px-6 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:"Showing:"}),(0,r.jsx)(f.Badge,{className:"font-medium",variant:"secondary",children:q}),(0,r.jsxs)("span",{className:"text-muted-foreground text-xs",children:["(",L.length," ",1===L.length?"item":"items",")"]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)(y.FullWidthDataTable,{...b.TablePresets.fullList(),bulkActions:U,columns:O,data:L,emptyIcon:(0,r.jsx)(a.Box,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:E,getItemId:e=>e.id,onRefresh:$,onRowClick:e=>{window.location.href=`/dashboard/work/pricebook/${e.id}`},searchFilter:(e,r)=>{let t=r.toLowerCase();return e.name.toLowerCase().includes(t)||e.sku.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)||(e.subcategory?.toLowerCase()||"").includes(t)||(e.description?.toLowerCase()||"").includes(t)||(e.supplierName?.toLowerCase()||"").includes(t)||(e.tags?.some(e=>e.toLowerCase().includes(t))??!1)},searchPlaceholder:"Search by name, SKU, category, or tags...",showPagination:!0,showRefresh:!0})})]}),(0,r.jsx)(T,{}),(0,r.jsx)(I,{})]})}e.s(["PriceBookTable",()=>N],313342)}]);