(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,871509,e=>{"use strict";function t(e,r={}){let{minimumFractionDigits:a=0,maximumFractionDigits:s=r.decimals??2,showZero:l=!0,decimals:i}=r,n=void 0!==i?i:s,o=void 0!==i?i:a;return null==e?l?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(0):"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:o,maximumFractionDigits:n}).format(e/100)}function r(e,t={}){let{minimumFractionDigits:a=0,maximumFractionDigits:s=t.decimals??2,showZero:l=!0,decimals:i}=t,n=void 0!==i?i:s,o=void 0!==i?i:a;return null==e||Number.isNaN(e)?l?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(0):"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:o,maximumFractionDigits:n}).format(e)}function a(e,t={}){let r;if(!e)return"—";let s="number"==typeof e||"string"==typeof e?new Date(e):e;if(Number.isNaN(s.getTime()))return"—";let l="table";"string"==typeof t?l=t||"table":(l=t.preset||"table",r=t.custom);let i=r||({short:{month:"short",day:"numeric",year:"numeric"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"},table:{month:"short",day:"numeric",year:"numeric"},time:{hour:"numeric",minute:"2-digit",hour12:!0},datetime:{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}})[l];return new Intl.DateTimeFormat("en-US",i).format(s)}function s(e){return a(e,{preset:"datetime"})}function l(e,t){if(!e)return"—";let r="number"==typeof e||"string"==typeof e?new Date(e):e;if(Number.isNaN(r.getTime()))return"—";if(!t)return a(r,{preset:"short"});let s="number"==typeof t||"string"==typeof t?new Date(t):t;if(Number.isNaN(s.getTime())||r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()&&r.getDate()===s.getDate())return a(r,{preset:"short"});let l=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(r),i=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s);return`${l} → ${i}`}e.s(["formatCurrency",()=>t,"formatCurrencyFromDollars",()=>r,"formatDate",()=>a,"formatDateRange",()=>l,"formatDateTime",()=>s])},616291,e=>{"use strict";let t=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>t])},664136,e=>{"use strict";var t=e.i(616291);e.s(["Edit",()=>t.default])},274220,e=>{"use strict";var t=e.i(399168),r=e.i(781403);let a={team_members:"active",customers:"active",jobs:"active",equipment:"active",materials:"active",payments:"active",invoices:"active",estimates:"active",contracts:"active",purchase_orders:"active",service_agreements:"active",maintenance_plans:"active",appointments:"active",properties:"active"},s=(0,t.create)()((0,r.devtools)((0,r.persist)((e,t)=>({filters:{...a},setFilter:(t,r)=>e(e=>({filters:{...e.filters,[t]:r}})),getFilter:e=>t().filters[e]||"active",resetFilter:t=>e(e=>({filters:{...e.filters,[t]:"active"}})),resetAllFilters:()=>e({filters:{...a}})}),{name:"archive-filters",skipHydration:!0,partialize:e=>({filters:e.filters})}),{name:"ArchiveStore"}));e.s(["useArchiveStore",0,s])},686804,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>t])},550652,e=>{"use strict";var t=e.i(686804);e.s(["ArrowUpRight",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},287156,e=>{"use strict";var t=e.i(111043),r=e.i(970799),a=e.i(151213);function s({section:e,table:s,kanban:l,fallback:i=null,forceView:n}){let o=(0,a.useWorkView)(e),d=(0,a.useSetWorkView)(e),c=n??o;return((0,r.useEffect)(()=>{n&&o!==n&&d(n)},[n]),"kanban"===c)?(0,t.jsx)(t.Fragment,{children:l??i}):(0,t.jsx)(t.Fragment,{children:s??i})}e.s(["WorkDataView",()=>s])},430876,e=>{"use strict";var t=e.i(111043),r=e.i(970799);e.i(116233);var a=e.i(363712),s=e.i(999),l=e.i(691225),i=e.i(913532),n=e.i(605278),o=e.i(375308),d=e.i(989239);let c=(0,r.createContext)(null),u=(0,r.createContext)(null),m="kanban-column-";function b(e,t,r){let a=Object.fromEntries(e.map(e=>[e.id,[]]));return t.reduce((e,t)=>{let a=r(t);return e[a]||(e[a]=[]),e[a]=[...e[a],t],e},a)}function g({columns:e,data:a,onDataChange:i,onItemMove:o,getColumnId:u,children:g,className:h,pointerSensorOptions:x,renderDragOverlay:p}){let f=(0,r.useCallback)(u??(e=>e.columnId),[]),[v,y]=(0,r.useState)(()=>b(e,a,f)),[w,k]=(0,r.useState)(null),N=(0,r.useRef)(e);(0,r.useEffect)(()=>{N.current=e},[e]),(0,r.useEffect)(()=>{y(b(e,a,f))},[e,a,f]);let j=(0,s.useSensors)((0,s.useSensor)(s.PointerSensor,{activationConstraint:{distance:6},...x}),(0,s.useSensor)(s.KeyboardSensor,{coordinateGetter:l.sortableKeyboardCoordinates})),C=(0,r.useCallback)(e=>{for(let t of N.current){let r=v[t.id]??[],a=r.findIndex(t=>t.id===e);if(-1!==a)return{columnId:t.id,item:r[a],index:a}}return null},[v]),P=(0,r.useCallback)(e=>{let t=C(e.active.id);t&&k({item:t.item,columnId:t.columnId})},[C]),S=(0,r.useCallback)(e=>{var t;let{active:r,over:a}=e;if(k(null),!a)return;let s=C(r.id);if(!s)return;let l=null,n=null;if("string"==typeof a.id&&a.id.startsWith(m))n=(v[l=a.id.replace(m,"")]??[]).length;else{let e=C(a.id);e&&(l=e.columnId,n=(v[e.columnId]??[]).findIndex(t=>t.id===e.item.id))}if(null===l||null===n||l===s.columnId&&n===s.index)return;let d=Object.fromEntries(Object.entries(v).map(([e,t])=>[e,t.slice()])),c=d[s.columnId]??[],[u]=c.splice(s.index,1);d[s.columnId]=c;let b=d[l]??[],g=s.columnId===l&&s.index<n?n-1:n,h={...u,columnId:l};b.splice(g,0,h),d[l]=b,y(d);let x=(t=N.current,t.flatMap(e=>d[e.id]??[]));i?.(x),o&&o({item:h,fromColumnId:s.columnId,toColumnId:l,toIndex:g})},[C,v,i,o]),D=(0,r.useMemo)(()=>({columns:e,getItems:e=>v[e]??[],findItem:C,activeItem:w}),[e,v,C,w]);return(0,t.jsx)(c.Provider,{value:D,children:(0,t.jsxs)(s.DndContext,{collisionDetection:s.closestCorners,onDragCancel:()=>k(null),onDragEnd:S,onDragStart:P,sensors:j,children:[(0,t.jsx)("div",{className:(0,d.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",h),children:g}),(0,t.jsx)(s.DragOverlay,{children:w?p?p(w.item):(0,t.jsx)(n.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium",children:String(w.item.id)})}):null})]})})}function h({column:e,children:r,className:a}){return(0,t.jsx)(u.Provider,{value:e,children:(0,t.jsx)("section",{"aria-label":`${e.name} column`,className:(0,d.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",a),children:r})})}function x({children:e,className:r}){return(0,t.jsx)("header",{className:(0,d.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",r),children:e})}function p({columnId:e,children:a,emptyState:i,className:n,height:u="28rem"}){let{getItems:b}=function(){let e=(0,r.useContext)(c);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),g=b(e),{setNodeRef:h,isOver:x}=(0,s.useDroppable)({id:`${m}${e}`});return(0,t.jsx)(l.SortableContext,{items:g.map(e=>e.id),strategy:l.verticalListSortingStrategy,children:(0,t.jsx)(o.ScrollArea,{className:"kanban-scroll flex-1",children:(0,t.jsxs)("div",{className:(0,d.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",x&&"ring-primary/60 ring-2 ring-offset-2",n),"data-drop-state":x?"active":"inactive",ref:h,style:{minHeight:u},children:[0===g.length&&i,g.map((e,t)=>a(e,t))]})})})}function f({itemId:e,children:r,className:a}){let{attributes:s,listeners:o,setNodeRef:c,transform:u,transition:m,isDragging:b}=(0,l.useSortable)({id:e}),g={transform:i.CSS.Transform.toString(u),transition:m};return(0,t.jsx)(n.Card,{className:(0,d.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",b&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",a),"data-dragging":b?"":void 0,ref:c,style:g,...o,...s,children:r})}function v({data:e,columns:s,mapToKanbanItem:l,updateEntityStatus:i,renderCard:n,renderDragOverlay:o,calculateColumnMeta:d,onItemMove:c,entityName:u="items",emptyStateMessage:m,showTotals:b=!1,formatTotal:v}){let[y,w]=(0,r.useState)(()=>e.map(l)),k=d||((e,t)=>({count:t.filter(t=>t.columnId===e).length})),N=(0,r.useMemo)(()=>{let e={};return s.forEach(t=>{e[t.id]=k(t.id,y)}),e},[s,y,k]),j=(0,r.useMemo)(()=>s.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[s]),C=m||(e=>`No ${u} in ${e}`);return(0,t.jsx)(g,{className:"pb-4",columns:j,data:y,onDataChange:e=>{i?w(e.map(e=>({...e,entity:i(e.entity,e.columnId)}))):w(e)},onItemMove:c,renderDragOverlay:o||(e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:n(e)})),children:s.map(e=>{let r=N[e.id]??{count:0};return(0,t.jsxs)(h,{className:"min-h-[300px] flex-1",column:j.find(t=>t.id===e.id),children:[(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,t.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,t.jsxs)(a.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[r.count," ",u]}),b&&void 0!==r.total&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(r.total)}),b&&void 0!==r.value&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(r.value)})]})}),(0,t.jsx)(p,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,t.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:C(e.name)}),children:e=>(0,t.jsx)(f,{itemId:e.id,children:n(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>v],430876)},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},923225,e=>{"use strict";let t=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},630754,e=>{"use strict";var t=e.i(923225);e.s(["CheckCircle",()=>t.default])},321561,e=>{"use strict";let t=(0,e.i(383206).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["default",()=>t])},794712,e=>{"use strict";var t=e.i(111043);e.i(116233);var r=e.i(363712),a=e.i(989239),s=e.i(818796),l=e.i(276389),i=e.i(630754),n=e.i(136764),o=e.i(606661),d=e.i(321561),d=d,c=e.i(559586),u=e.i(900007);function m(e){return({quoted:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Quoted",icon:o.FileText,ariaLabel:"Job status: Quoted"},scheduled:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Scheduled",icon:l.Calendar,ariaLabel:"Job status: Scheduled"},in_progress:{className:"border-blue-500/50 bg-blue-500 text-white hover:bg-blue-600",label:"In Progress",icon:d.default,ariaLabel:"Job status: In Progress"},completed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Completed",icon:i.CheckCircle,ariaLabel:"Job status: Completed"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled",icon:u.XCircle,ariaLabel:"Job status: Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}function b({status:e,type:l,priority:d,contractType:u,className:b,variant:g="outline"}){let h,x=(h=u?({service:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Service"},maintenance:{className:"border-green-200/50 bg-green-50/50 text-green-700 dark:border-green-900/50 dark:bg-green-950/30 dark:text-green-400",label:"Maintenance"},custom:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Custom"}})[u]||{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:u.replace(/_/g," ")}:d?({low:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Low"},medium:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Medium"},high:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"High"},urgent:{className:"border-red-200/50 bg-red-50/50 text-red-700 dark:border-red-900/50 dark:bg-red-950/30 dark:text-red-400",label:"Urgent"}})[d]||{className:"border-border/50 bg-background text-muted-foreground",label:d.replace(/_/g," ")}:"purchase_order"===l?({draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},pending:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Pending"},approved:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Approved"},partially_received:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Partially Received"},received:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Received"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}:l?function(e,t){switch(t){case"job":return m(e);case"invoice":return({paid:{className:"border-green-500/30 bg-green-500 text-white hover:bg-green-600 shadow-sm",label:"Paid",icon:i.CheckCircle,ariaLabel:"Invoice status: Paid"},unpaid:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400 shadow-sm",label:"Unpaid",icon:n.Clock,ariaLabel:"Invoice status: Unpaid"},overdue:{className:"border-red-500/30 bg-red-500 text-white hover:bg-red-600 shadow-sm ring-1 ring-red-500/20",label:"Overdue",icon:s.AlertCircle,ariaLabel:"Invoice status: Overdue - requires immediate attention"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50 shadow-sm",label:"Draft",icon:o.FileText,ariaLabel:"Invoice status: Draft"},sent:{className:"border-blue-200/50 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400 shadow-sm",label:"Sent",icon:c.Mail,ariaLabel:"Invoice status: Sent"},pending:{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 shadow-sm",label:"Pending",icon:n.Clock,ariaLabel:"Invoice status: Pending"}})[e]||{className:"border-border/50 bg-background text-muted-foreground shadow-sm",label:e.replace(/_/g," ")};case"estimate":return({accepted:{className:"bg-green-500 hover:bg-green-600 text-white",label:"Accepted"},sent:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Sent"},draft:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Draft"},declined:{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",label:"Declined"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};case"contract":return({signed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Signed"},sent:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Sent"},viewed:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Viewed"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},rejected:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Rejected"},expired:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"Expired"}})[e]||{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:e.replace(/_/g," ")};case"customer":return({active:{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",label:"Active"},inactive:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Inactive"},prospect:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Prospect"},lead:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Lead"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};default:return{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}}(e,l):m(e)).icon;return(0,t.jsxs)(r.Badge,{className:(0,a.cn)("inline-flex items-center gap-1 px-2 py-0.5 text-[11px] font-medium transition-all duration-200",h.className,b),variant:g,"aria-label":h.ariaLabel||h.label,children:[x&&(0,t.jsx)(x,{className:"h-3 w-3","aria-hidden":"true"}),h.label]})}function g({status:e,className:r}){return(0,t.jsx)(b,{className:r,status:e,type:"job"})}function h({status:e,className:r}){return(0,t.jsx)(b,{className:r,status:e,type:"invoice"})}function x({status:e,className:r}){return(0,t.jsx)(b,{className:r,status:e,type:"estimate"})}function p({status:e,className:r}){return(0,t.jsx)(b,{className:r,status:e,type:"contract"})}function f({status:e,className:r}){return(0,t.jsx)(b,{className:r,status:e,type:"customer"})}function v({priority:e,className:r}){return(0,t.jsx)(b,{className:r,priority:e,status:""})}function y({type:e,className:r}){return(0,t.jsx)(b,{className:r,contractType:e,status:""})}e.s(["ContractStatusBadge",()=>p,"ContractTypeBadge",()=>y,"CustomerStatusBadge",()=>f,"EstimateStatusBadge",()=>x,"InvoiceStatusBadge",()=>h,"JobStatusBadge",()=>g,"PriorityBadge",()=>v,"StatusBadge",()=>b],794712)},534631,e=>{"use strict";e.i(116233),e.s([])},829304,e=>{"use strict";function t(e){let t=(e?.status??"").toString().toLowerCase();return["bad","overdue","error","failed","rejected"].includes(t)?{isHighlighted:!0,highlightClass:"bg-destructive/10 text-destructive"}:["good","completed","success","ok","active","approved"].includes(t)?{isHighlighted:!0,highlightClass:"bg-success/10 text-success"}:{isHighlighted:!1,highlightClass:""}}e.s(["getRowHighlight",()=>t])},309103,e=>{"use strict";var t=e.i(552038),r=(0,t.createServerReference)("4082b52123c24a95685a53c36313418a95c259c65b",t.callServer,void 0,t.findSourceMapURL,"deleteCustomer");e.s(["deleteCustomer",()=>r])},857436,e=>{"use strict";var t=e.i(111043),r=e.i(550652),a=e.i(559586),s=e.i(939397),l=e.i(202724),i=e.i(176378);e.i(553153);var n=e.i(363712);e.i(889265);var o=e.i(677607),d=e.i(430876),c=e.i(152088);let u=[{id:"active",name:"Active",accentColor:"#22C55E"},{id:"prospect",name:"Prospect",accentColor:"#3B82F6"},{id:"inactive",name:"Inactive",accentColor:"#6B7280"}],m=new Map(u.map(e=>[e.id,e.name])),b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function g({customers:e}){return(0,t.jsx)(d.EntityKanban,{calculateColumnMeta:(e,t)=>{let r=t.filter(t=>t.columnId===e),a=r.reduce((e,t)=>e+t.entity.totalValue,0);return{count:r.length,total:a}},columns:u,data:e,entityName:"customers",formatTotal:e=>b.format(e/100),mapToKanbanItem:e=>({id:e.id,columnId:e.status,entity:e,customer:e}),renderCard:e=>(0,t.jsx)(h,{item:{...e,customer:e.entity}}),renderDragOverlay:e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,t.jsx)(h,{item:{...e,customer:e.entity}})}),showTotals:!0,updateEntityStatus:(e,t)=>({...e,status:t})})}function h({item:e}){let{customer:d,columnId:u}=e;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-foreground text-sm font-semibold",children:d.name}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:d.contact}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(n.Badge,{className:(0,c.cn)("text-xs","active"===u&&"bg-primary/10 text-primary","prospect"===u&&"bg-primary/10 text-primary"),variant:"active"===u?"secondary":"outline",children:m.get(u)??u}),d.totalValue>0&&(0,t.jsx)(n.Badge,{className:"bg-muted/60 text-muted-foreground",variant:"outline",children:b.format(d.totalValue/100)})]})]})}),(0,t.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[d.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Mail,{className:"text-primary size-4"}),(0,t.jsx)("span",{className:"truncate",children:d.email})]}),d.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Phone,{className:"text-primary size-4"}),(0,t.jsx)("span",{children:d.phone})]}),d.address&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Users,{className:"text-primary size-4"}),(0,t.jsx)("span",{className:"truncate",children:[d.address,d.city,d.state].filter(Boolean).join(", ")})]})]}),(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-xs",children:[(0,t.jsx)("span",{children:"None"!==d.lastService?`Last: ${d.lastService}`:"No services"}),(0,t.jsx)(o.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)(i.default,{href:`/dashboard/customers/${d.id}`,children:["View",(0,t.jsx)(r.ArrowUpRight,{className:"size-3.5"})]})})]})]})}e.s(["CustomersKanban",()=>g])},181610,e=>{"use strict";var t=e.i(111043),r=e.i(946672),a=e.i(559586),s=e.i(939397),l=e.i(532727),i=e.i(202724),n=e.i(176378),o=e.i(904653);e.i(670258);var d=e.i(921251);e.i(889265);var c=e.i(677607),u=e.i(527756);e.i(534631);var m=e.i(122942);e.i(664136),e.i(367571);var b=e.i(794712),g=e.i(871509),h=e.i(829304),x=e.i(635709),p=e.i(309103),f=e.i(274220),v=e.i(995403);function y({customers:e,itemsPerPage:y=50,totalCount:w,currentPage:k=1,onCustomerClick:N,enableVirtualization:j="auto",showRefresh:C=!1}){let P=(0,o.useRouter)(),S=(0,f.useArchiveStore)(e=>e.filters.customers),D=e.filter(e=>{let t=!!(e.archived_at||e.deleted_at);return"active"===S?!t:"archived"!==S||t}),I=[{key:"customer",header:"Customer",width:"flex-1",sortable:!0,render:e=>(0,t.jsxs)(n.default,{className:"flex items-center gap-3",href:`/dashboard/customers/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(d.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(d.AvatarFallback,{className:"text-xs",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-foreground truncate font-medium leading-tight hover:underline",children:e.name}),(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:e.contact})]})]})},{key:"contact",header:"Contact",width:"w-56",shrink:!0,sortable:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"text-foreground flex items-center gap-1.5",children:[(0,t.jsx)(a.Mail,{className:"text-muted-foreground h-3 w-3"}),(0,t.jsx)("span",{className:"truncate text-xs",children:e.email})]}),(0,t.jsxs)("div",{className:"text-foreground flex items-center gap-1.5",children:[(0,t.jsx)(s.Phone,{className:"text-muted-foreground h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs tabular-nums",children:e.phone})]})]})},{key:"address",header:"Address",width:"w-56",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>e.address||e.city||e.state?(0,t.jsxs)("div",{className:"space-y-1",children:[e.address&&(0,t.jsx)("div",{className:"text-foreground truncate text-xs",children:e.address}),(e.city||e.state||e.zipCode)&&(0,t.jsx)("div",{className:"text-muted-foreground truncate text-xs",children:[e.city,e.state,e.zipCode].filter(Boolean).join(", ")})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs italic",children:"No address"})},function(e,r,a,s={}){return{key:e,header:r,width:s.width||"w-28",sortable:s.sortable??!0,hideOnMobile:s.hideOnMobile??!1,render:e=>{let r=a(e);return r?(0,t.jsx)(b.CustomerStatusBadge,{status:r}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}}}("status","Status",e=>e.status,{width:"w-28"}),{key:"service",header:"Service",sortable:!0,width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"text-foreground text-xs",children:["Last:"," ",(0,t.jsx)("span",{className:"text-muted-foreground",children:e.lastService})]}),(0,t.jsxs)("div",{className:"text-foreground text-xs",children:["Next:"," ",(0,t.jsx)("span",{className:"text-muted-foreground",children:e.nextService})]})]})},{key:"value",header:"Total Value",width:"w-32",shrink:!0,align:"right",render:e=>(0,t.jsx)("span",{className:"text-xs font-semibold tabular-nums",children:(0,g.formatCurrencyFromDollars)(e.totalValue)})},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)(m.RowActionsDropdown,{actions:[{label:"View Details",icon:i.Users,href:`/dashboard/customers/${e.id}`},{label:"Send Email",icon:a.Mail,href:`mailto:${e.email}`},{label:"Call Customer",icon:s.Phone,href:`tel:${e.phone}`},{label:"Delete Customer",icon:l.Trash2,variant:"destructive",separatorBefore:!0,onClick:async()=>{let t=await (0,p.deleteCustomer)(e.id);t.success?(v.toast.success("Customer deleted"),window.location.reload()):v.toast.error(t.error||"Failed to delete customer")}}]})}],L=[{label:"Export",icon:(0,t.jsx)(r.Archive,{className:"h-4 w-4"}),onClick:t=>{let r=new Blob([["Name,Contact,Email,Phone,Status,Total Value",...e.filter(e=>t.has(e.id)).map(e=>[e.name,e.contact,e.email,e.phone,e.status,e.totalValue].join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`customers-export-${new Date().toISOString().split("T")[0]}.csv`,s.click(),URL.revokeObjectURL(a),v.toast.success(`Exported ${t.size} customer${t.size>1?"s":""}`)}},{label:"Delete",icon:(0,t.jsx)(l.Trash2,{className:"h-4 w-4"}),onClick:async e=>{let t=0,r=0;for(let a of e){let e=await (0,p.deleteCustomer)(a);e.success?t++:(r++,console.error(`Failed to delete customer ${a}:`,e.error))}t>0&&v.toast.success(`Deleted ${t} customer${t>1?"s":""}`),r>0&&v.toast.error(`Failed to delete ${r} customer${r>1?"s":""}`),window.location.reload()},variant:"destructive"}];return(0,t.jsx)(u.FullWidthDataTable,{...x.TablePresets.fullList({entity:"customers",enableSelection:!0,searchPlaceholder:"Search customers by name, email, phone, address, or status...",itemsPerPage:y,showRefresh:C}),data:D,columns:I,getItemId:e=>e.id,bulkActions:L,searchFilter:(e,t)=>{let r=t.toLowerCase();return e.name.toLowerCase().includes(r)||e.contact.toLowerCase().includes(r)||e.email.toLowerCase().includes(r)||e.phone.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)||(e.address?.toLowerCase().includes(r)??!1)||(e.city?.toLowerCase().includes(r)??!1)||(e.state?.toLowerCase().includes(r)??!1)||(e.zipCode?.toLowerCase().includes(r)??!1)},onRowClick:e=>{N?N(e):window.location.href=`/dashboard/customers/${e.id}`},totalCount:w??D.length,currentPageFromServer:k,serverPagination:!0,onRefresh:()=>P.refresh(),emptyMessage:"No customers found",emptyIcon:(0,t.jsx)(i.Users,{className:"text-muted-foreground h-8 w-8"}),emptyAction:(0,t.jsxs)(c.Button,{onClick:()=>window.location.href="/dashboard/customers/new",size:"sm",children:[(0,t.jsx)(i.Users,{className:"mr-2 size-4"}),"Add Customer"]}),isArchived:e=>!!(e.archived_at||e.deleted_at),showArchived:"active"!==S,isHighlighted:e=>{let{isHighlighted:t,highlightClass:r}=(0,h.getRowHighlight)(e);return!r.includes("bg-success")&&t},getHighlightClass:e=>(0,h.getRowHighlight)(e).highlightClass,enableVirtualization:j})}e.s(["CustomersTable",()=>y],181610)}]);