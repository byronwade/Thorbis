(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,383206,910799,e=>{"use strict";var r=e.i(970799);let a=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},t=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:n,...o},u)=>(0,r.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:t("lucide",c),...!d&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(o)&&{"aria-hidden":"true"},...o},[...n.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(d)?d:[d]]));e.s(["default",()=>i],910799);let l=(e,s)=>{let l=(0,r.forwardRef)(({className:l,...c},d)=>(0,r.createElement)(i,{ref:d,iconNode:s,className:t(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...c}));return l.displayName=a(e),l};e.s(["default",()=>l],383206)},889265,e=>{"use strict";e.i(116233),e.s([])},254851,e=>{"use strict";e.i(116233),e.s([])},51478,e=>{"use strict";e.i(116233),e.s([])},149989,e=>{"use strict";e.i(116233),e.s([])},220168,e=>{"use strict";var r=e.i(111043);e.i(116233);var a=e.i(880177),t=e.i(989239);function s({label:e,htmlFor:s,error:i,description:l,required:c,children:d,className:n}){return(0,r.jsxs)("div",{className:(0,t.cn)("space-y-2",n),"data-slot":"form-field",children:[e&&(0,r.jsxs)(a.Label,{htmlFor:s,className:(0,t.cn)(i&&"text-destructive"),"data-error":!!i,children:[e,c&&(0,r.jsx)("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),d,l&&!i&&(0,r.jsx)("p",{className:"text-muted-foreground text-[0.8rem] leading-relaxed",children:l}),i&&(0,r.jsx)("p",{className:"text-destructive text-[0.8rem] font-medium",role:"alert",children:i})]})}function i({children:e,cols:a=2,className:s}){return(0,r.jsx)("div",{className:(0,t.cn)("grid gap-4",{"sm:grid-cols-2":2===a,"sm:grid-cols-2 lg:grid-cols-3":3===a,"sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":4===a},s),children:e})}e.s(["StandardFormField",()=>s,"StandardFormRow",()=>i])},552038,(e,r,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={callServer:function(){return i.callServer},createServerReference:function(){return c.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var s in t)Object.defineProperty(a,s,{enumerable:!0,get:t[s]});let i=e.r(447802),l=e.r(528674),c=e.r(504331)},911194,e=>{"use strict";let r=(0,e.i(383206).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>r])},641304,e=>{"use strict";var r=e.i(911194);e.s(["Loader2",()=>r.default])},767194,e=>{"use strict";let r=(0,e.i(383206).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["default",()=>r])},263942,e=>{"use strict";var r=e.i(767194);e.s(["Building2",()=>r.default])},749012,e=>{"use strict";let r=(0,e.i(383206).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["default",()=>r])},403468,e=>{"use strict";var r=e.i(749012);e.s(["CreditCard",()=>r.default])},923225,e=>{"use strict";let r=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>r])},630754,e=>{"use strict";var r=e.i(923225);e.s(["CheckCircle",()=>r.default])},997035,e=>{"use strict";e.i(116233),e.s([])},624326,e=>{"use strict";var r=e.i(111043),a=e.i(263942),t=e.i(630754),s=e.i(403468),i=e.i(641304),l=e.i(904653),c=e.i(970799),d=e.i(995403),n=e.i(552038),o=(0,n.createServerReference)("4077d2f57527e7371b466b60fd322576f930d6cd64",n.callServer,void 0,n.findSourceMapURL,"processInvoicePayment");e.i(889265);var u=e.i(677607);e.i(254851);var m=e.i(605278);e.i(51478);var h=e.i(635613);e.i(149989);var p=e.i(880177);e.i(997035);var x=e.i(226571),g=e.i(220168);function v({invoice:e,token:n,company:v,customer:f}){let y=(0,l.useRouter)(),[j,b]=(0,c.useTransition)(),[N,C]=(0,c.useState)("card"),[S,F]=(0,c.useState)(!1),[w,k]=(0,c.useState)(!1),[L,P]=(0,c.useState)(""),[R,q]=(0,c.useState)(""),[M,A]=(0,c.useState)(""),[D,I]=(0,c.useState)(f.display_name||`${f.first_name} ${f.last_name}`),[$,_]=(0,c.useState)(""),[U,T]=(0,c.useState)(""),[B,E]=(0,c.useState)(f.display_name||`${f.first_name} ${f.last_name}`),z=async r=>{r.preventDefault(),S||(F(!0),b(async()=>{try{let r=await o({invoiceId:e.id,token:n,paymentMethod:N,amount:e.total_amount,paymentDetails:"card"===N?{cardNumber:L.replace(/\s/g,""),cardExpiry:R,cardCvc:M,cardName:D}:{accountNumber:$,routingNumber:U,accountName:B}});r.success?(k(!0),d.toast.success("Payment successful!",{description:"Your payment has been processed. You will receive a confirmation email shortly."}),setTimeout(()=>{y.push(`/pay/${e.id}/success`)},2e3)):d.toast.error("Payment failed",{description:r.error||"Unable to process payment. Please try again."})}catch(e){d.toast.error("Payment error",{description:"An unexpected error occurred. Please try again."})}finally{F(!1)}}))};return w?(0,r.jsx)(m.Card,{className:"border-green-200 bg-green-50",children:(0,r.jsx)(m.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(t.CheckCircle,{className:"h-8 w-8 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.CardTitle,{className:"text-green-900",children:"Payment Successful!"}),(0,r.jsx)(m.CardDescription,{className:"text-green-700",children:"Your payment has been processed successfully."})]})]})})}):(0,r.jsx)("form",{onSubmit:z,children:(0,r.jsxs)(m.Card,{children:[(0,r.jsxs)(m.CardHeader,{children:[(0,r.jsx)(m.CardTitle,{children:"Payment Information"}),(0,r.jsx)(m.CardDescription,{children:"Select your payment method and enter your details"})]}),(0,r.jsxs)(m.CardContent,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(p.Label,{children:"Payment Method"}),(0,r.jsxs)(x.RadioGroup,{onValueChange:e=>C(e),value:N,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.RadioGroupItem,{id:"card",value:"card"}),(0,r.jsxs)(p.Label,{className:"flex cursor-pointer items-center gap-2",htmlFor:"card",children:[(0,r.jsx)(s.CreditCard,{className:"h-4 w-4"}),"Credit or Debit Card"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.RadioGroupItem,{id:"ach",value:"ach"}),(0,r.jsxs)(p.Label,{className:"flex cursor-pointer items-center gap-2",htmlFor:"ach",children:[(0,r.jsx)(a.Building2,{className:"h-4 w-4"}),"Bank Account (ACH)"]})]})]})]}),"card"===N&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(g.StandardFormField,{label:"Cardholder Name",htmlFor:"cardName",required:!0,children:(0,r.jsx)(h.Input,{id:"cardName",onChange:e=>I(e.target.value),placeholder:"John Doe",required:!0,value:D})}),(0,r.jsx)(g.StandardFormField,{label:"Card Number",htmlFor:"cardNumber",required:!0,children:(0,r.jsx)(h.Input,{id:"cardNumber",maxLength:19,onChange:e=>{let r=e.target.value.replace(/\s/g,"");P(r.match(/.{1,4}/g)?.join(" ")||r)},placeholder:"1234 5678 9012 3456",required:!0,value:L})}),(0,r.jsxs)(g.StandardFormRow,{cols:2,children:[(0,r.jsx)(g.StandardFormField,{label:"Expiry Date",htmlFor:"cardExpiry",required:!0,children:(0,r.jsx)(h.Input,{id:"cardExpiry",maxLength:5,onChange:e=>{let r=e.target.value.replace(/\D/g,"");r.length>=2?q(`${r.slice(0,2)}/${r.slice(2,4)}`):q(r)},placeholder:"MM/YY",required:!0,value:R})}),(0,r.jsx)(g.StandardFormField,{label:"CVC",htmlFor:"cardCvc",required:!0,children:(0,r.jsx)(h.Input,{id:"cardCvc",maxLength:4,onChange:e=>A(e.target.value.replace(/\D/g,"")),placeholder:"123",required:!0,value:M})})]})]}),"ach"===N&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(g.StandardFormField,{label:"Account Holder Name",htmlFor:"accountName",required:!0,children:(0,r.jsx)(h.Input,{id:"accountName",onChange:e=>E(e.target.value),placeholder:"John Doe",required:!0,value:B})}),(0,r.jsx)(g.StandardFormField,{label:"Routing Number",htmlFor:"routingNumber",required:!0,children:(0,r.jsx)(h.Input,{id:"routingNumber",maxLength:9,onChange:e=>T(e.target.value.replace(/\D/g,"")),placeholder:"110000000",required:!0,value:U})}),(0,r.jsx)(g.StandardFormField,{label:"Account Number",htmlFor:"accountNumber",required:!0,children:(0,r.jsx)(h.Input,{id:"accountNumber",onChange:e=>_(e.target.value.replace(/\D/g,"")),placeholder:"000123456789",required:!0,value:$})})]}),(0,r.jsx)(u.Button,{className:"w-full",disabled:S||j,size:"lg",type:"submit",children:S||j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Payment..."]}):`Pay ${(e.total_amount/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}`})]})]})})}e.s(["InvoicePaymentForm",()=>v],624326)}]);