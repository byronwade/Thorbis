(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,686787,e=>{"use strict";e.i(116233),e.s([])},486882,e=>{"use strict";let s=(0,e.i(383206).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["default",()=>s])},486506,e=>{"use strict";var s=e.i(486882);e.s(["ArrowRight",()=>s.default])},510651,e=>{"use strict";let s=(0,e.i(383206).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>s])},123891,e=>{"use strict";var s=e.i(510651);e.s(["ShieldCheck",()=>s.default])},997035,e=>{"use strict";e.i(116233),e.s([])},580770,e=>{"use strict";var s=e.i(111043),i=e.i(970799),a=e.i(559586),r=e.i(852648),t=e.i(751139),l=e.i(969098),d=e.i(641304),n=e.i(121085),c=e.i(263942),o=e.i(123891),m=e.i(486506);e.i(889265);var u=e.i(677607);e.i(254851);var h=e.i(605278);e.i(553153);var x=e.i(363712);e.i(997035);var p=e.i(226571);e.i(149989);var j=e.i(880177);e.i(287133);var g=e.i(120109);e.i(686787);var f=e.i(519539),v=e.i(152088),N=e.i(552038),w=(0,N.createServerReference)("40040627a89b021de232bf9d66f07c58011f51a739",N.callServer,void 0,N.findSourceMapURL,"updateEmailProvider"),y=e.i(995403);let b=[{id:"managed",name:"Platform Managed (Resend)",description:"Fully managed email infrastructure with automatic setup",icon:c.Building2,features:["Automatic domain setup and verification","99.9% delivery guarantee","Built-in spam protection","Team member email addresses included","Support for custom domains"],recommended:!0,setupRequired:!1},{id:"gmail",name:"Google Workspace",description:"Use your existing Google Workspace for email",icon:a.Mail,features:["Use your existing Gmail addresses","No vendor lock-in - use Gmail directly","All emails tracked in Stratos","Send via Gmail API","Automatic inbox sync"],recommended:!1,setupRequired:!0},{id:"disabled",name:"Disabled",description:"Turn off email sending capabilities",icon:o.ShieldCheck,features:["No emails will be sent from the platform","Existing emails remain accessible","Can be re-enabled at any time"],recommended:!1,setupRequired:!1}];function C({currentProvider:e,isConnected:a,companyId:c}){let[o,N]=(0,i.useState)(e),[C,k]=(0,i.useState)(!1),[S,A]=(0,i.useState)(!1),R=o!==e,T=async()=>{if(R&&"disabled"!==e&&!S)return void A(!0);k(!0);try{let e=await w({provider:o});e.success?(y.toast.success("Email provider updated successfully"),A(!1),"gmail"===o?window.location.href="/dashboard/settings/communications/email-provider/setup-gmail":window.location.reload()):y.toast.error(e.error||"Failed to update email provider")}catch(e){console.error("Error updating email provider:",e),y.toast.error("An unexpected error occurred")}finally{k(!1)}},B=b.find(e=>e.id===o);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Email Provider"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Choose how your company sends and receives emails"})]}),"disabled"!==e&&(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Settings,{className:"h-5 w-5"}),"Current Provider Status"]})}),(0,s.jsx)(h.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,v.cn)("h-12 w-12 rounded-full flex items-center justify-center",a?"bg-green-500/10 text-green-600":"bg-yellow-500/10 text-yellow-600"),children:a?(0,s.jsx)(r.CheckCircle2,{className:"h-6 w-6"}):(0,s.jsx)(t.AlertTriangle,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:b.find(s=>s.id===e)?.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:a?"Connected and active":"Not connected - setup required"})]})]}),a?(0,s.jsxs)(x.Badge,{variant:"secondary",className:"gap-1",children:[(0,s.jsx)(r.CheckCircle2,{className:"h-3 w-3"}),"Active"]}):(0,s.jsxs)(x.Badge,{variant:"outline",className:"gap-1 border-yellow-500 text-yellow-600",children:[(0,s.jsx)(t.AlertTriangle,{className:"h-3 w-3"}),"Setup Required"]})]})})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsx)(h.CardTitle,{children:"Select Email Provider"}),(0,s.jsx)(h.CardDescription,{children:"Choose the email infrastructure that works best for your business"})]}),(0,s.jsx)(h.CardContent,{children:(0,s.jsx)(p.RadioGroup,{value:o,onValueChange:e=>N(e),className:"grid gap-4",children:b.map(e=>{let i=e.icon,a=o===e.id;return(0,s.jsxs)("div",{children:[(0,s.jsx)(p.RadioGroupItem,{value:e.id,id:e.id,className:"peer sr-only"}),(0,s.jsxs)(j.Label,{htmlFor:e.id,className:(0,v.cn)("flex flex-col gap-4 p-4 rounded-lg border-2 cursor-pointer transition-all","peer-data-[state=checked]:border-primary peer-data-[state=checked]:bg-primary/5","hover:border-primary/50"),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:(0,v.cn)("h-10 w-10 rounded-lg flex items-center justify-center",a?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:(0,s.jsx)(i,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-semibold",children:e.name}),e.recommended&&(0,s.jsx)(x.Badge,{variant:"secondary",className:"text-xs",children:"Recommended"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),a&&(0,s.jsx)(r.CheckCircle2,{className:"h-5 w-5 text-primary"})]}),(0,s.jsx)(g.Separator,{}),(0,s.jsx)("ul",{className:"space-y-2",children:e.features.map((e,i)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)(r.CheckCircle2,{className:"h-4 w-4 text-green-500 shrink-0 mt-0.5"}),(0,s.jsx)("span",{children:e})]},i))}),e.setupRequired&&a&&(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)(x.Badge,{variant:"outline",className:"gap-1",children:[(0,s.jsx)(n.Settings,{className:"h-3 w-3"}),"Setup wizard required after saving"]})})]})]},e.id)})})})]}),S&&R&&(0,s.jsxs)(f.Alert,{variant:"destructive",children:[(0,s.jsx)(t.AlertTriangle,{className:"h-4 w-4"}),(0,s.jsx)(f.AlertTitle,{children:"Switching Email Providers"}),(0,s.jsxs)(f.AlertDescription,{className:"space-y-2",children:[(0,s.jsxs)("p",{children:["You are about to switch from"," ",(0,s.jsx)("strong",{children:b.find(s=>s.id===e)?.name})," to"," ",(0,s.jsx)("strong",{children:B?.name}),"."]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,s.jsx)("li",{children:"All existing emails will remain accessible"}),(0,s.jsx)("li",{children:"Future emails will be sent using the new provider"}),(0,s.jsx)("li",{children:"You may need to update DNS records or complete setup"}),(0,s.jsx)("li",{children:"Email sending will be disabled until setup is complete"})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsxs)(u.Button,{variant:"destructive",size:"sm",onClick:T,disabled:C,children:[C&&(0,s.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirm and Switch"]}),(0,s.jsx)(u.Button,{variant:"outline",size:"sm",onClick:()=>{A(!1),N(e)},children:"Cancel"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:R?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(t.AlertTriangle,{className:"h-4 w-4 text-yellow-600"}),"You have unsaved changes"]}):(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.CheckCircle2,{className:"h-4 w-4 text-green-600"}),"No changes to save"]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:["gmail"===o&&"gmail"!==e&&R&&(0,s.jsx)(u.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)("a",{href:"/docs/email/gmail-setup",target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(l.ExternalLink,{className:"h-4 w-4 mr-2"}),"Setup Guide"]})}),(0,s.jsxs)(u.Button,{onClick:T,disabled:!R||C,children:[C&&(0,s.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),o!==e&&B?.setupRequired?"Save and Continue to Setup":"Save Changes",o!==e&&B?.setupRequired&&(0,s.jsx)(m.ArrowRight,{className:"h-4 w-4 ml-2"})]})]})]})]})}e.s(["EmailProviderContent",()=>C],580770)}]);