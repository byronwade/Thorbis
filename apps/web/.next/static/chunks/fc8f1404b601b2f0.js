(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52573,e=>{"use strict";let s=(0,e.i(383206).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>s])},694288,e=>{"use strict";var s=e.i(52573);e.s(["Link",()=>s.default])},519131,e=>{"use strict";let s=(0,e.i(383206).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["default",()=>s])},233654,e=>{"use strict";var s=e.i(519131);e.s(["Paperclip",()=>s.default])},711448,e=>{"use strict";e.i(116233),e.s([])},305549,585506,e=>{"use strict";var s=e.i(111043),t=e.i(868422),a=e.i(227009);e.i(670258);var i=e.i(921251);e.i(711448);var l=e.i(157222);function n({activities:e}){return e&&0!==e.length?(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:e.map(e=>(0,s.jsxs)("div",{className:"hover:bg-muted/50 flex gap-3 rounded-lg border p-3 transition-colors",children:[(0,s.jsxs)(i.Avatar,{className:"size-8 flex-shrink-0",children:[(0,s.jsx)(i.AvatarImage,{src:e.user?.avatar}),(0,s.jsx)(i.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm break-words",children:e.description}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[e.user?.name," •"," ",(0,t.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})]})]})]},e.id))})}):(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(a.Activity,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No activity yet"})]})})})}e.s(["ActivityLogSection",()=>n],305549);var r=e.i(882896),d=e.i(606661),c=e.i(233654),o=e.i(371526),m=e.i(826463),x=e.i(970799);e.i(889265);var u=e.i(677607),h=e.i(51052);function j({attachments:e,entityType:t,entityId:a,onUpload:i}){let{toast:n}=(0,h.useToast)(),[j,f]=(0,x.useState)(!1),p=async e=>{let s=e.target.files;if(s&&0!==s.length){f(!0);try{i&&await i(s),n.success(`${s.length} file(s) uploaded successfully`)}catch(e){n.error("Failed to upload files")}finally{f(!1),e.target.value=""}}};return(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{className:"hidden",disabled:j,id:"file-upload",multiple:!0,onChange:p,type:"file"}),(0,s.jsx)("label",{htmlFor:"file-upload",children:(0,s.jsx)(u.Button,{asChild:!0,className:"w-full cursor-pointer",disabled:j,size:"sm",variant:"outline",children:(0,s.jsx)("span",{children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Upload,{className:"mr-2 size-4 animate-pulse"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Plus,{className:"mr-2 size-4"}),"Upload Files"]})})})})]}),e&&e.length>0?(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",children:[(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,s.jsx)(d.FileText,{className:"text-muted-foreground size-4 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium",children:e.original_file_name||e.file_name||"Untitled"}),(0,s.jsxs)("p",{className:"text-muted-foreground text-xs",children:[e.file_size?`${(e.file_size/1024).toFixed(1)} KB`:"",e.category&&` • ${e.category}`]})]})]}),(0,s.jsx)(u.Button,{asChild:!0,className:"flex-shrink-0",size:"sm",variant:"ghost",children:(0,s.jsx)("a",{download:!0,href:e.storage_url||e.url,rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.Download,{className:"size-4"})})})]},e.id))}):(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Paperclip,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No attachments yet"})]})})]})})}e.s(["AttachmentsSection",()=>j],585506)},821305,278633,e=>{"use strict";var s=e.i(111043),t=e.i(227009),a=e.i(606661),i=e.i(694288),l=e.i(233654),n=e.i(702948),r=e.i(152088);function d({header:e,customHeader:t,metadata:a,beforeContent:i,afterContent:l,children:n,className:d,contentGapClassName:c,statsBar:o}){let m=a??e?.metadata??[];return(0,s.jsxs)("div",{className:(0,r.cn)("flex w-full flex-col gap-4 pb-24 lg:gap-5",d),"data-detail-shell":"",children:[o,t??(e?(0,s.jsx)(x,{section:e}):null),m.length>0?(0,s.jsx)(u,{items:m}):null,i,n?(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col gap-4",c),children:n}):null,l]})}let c={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},o={default:"border border-border/60 bg-card shadow-sm",muted:"border border-border/60 bg-muted/40 shadow-sm",subtle:"border border-border/40 bg-card/80 shadow-sm",ghost:"border border-border/50 bg-transparent shadow-none"};function m({children:e,className:t,padding:a="md",variant:i="default"}){return(0,s.jsx)("section",{className:(0,r.cn)("rounded-xl",o[i],t),children:(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col gap-4",c[a]),children:e})})}function x({section:e}){var t;let{breadcrumbs:a,leadingVisual:i,title:l,subtitle:n,description:r,badges:d,actions:c,secondaryActions:o}=e;return(0,s.jsxs)("header",{className:"flex flex-col gap-4 lg:gap-6",children:[a?(0,s.jsx)("div",{className:"text-muted-foreground text-sm",children:a}):null,(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between lg:gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"flex flex-col gap-3",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[i?(0,s.jsx)("div",{className:"flex items-center justify-center",children:i}):null,(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(t=l)?"string"==typeof t?(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:t}):(0,s.jsx)("div",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:t}):null,n?(0,s.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm md:text-base",children:n}):null]})]}),r?(0,s.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm",children:r}):null]})}),d&&d.length>0?(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:d}):null]}),h(c,o)?(0,s.jsxs)("div",{className:"hidden flex-wrap items-center gap-2 lg:flex",children:[c?.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex",children:e},t)),o?.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex",children:e},`secondary-${t}`))]}):null]}),h(c,o)?(0,s.jsxs)("div",{className:"flex flex-col gap-2 lg:hidden",children:[c&&c.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((e,t)=>(0,s.jsx)("span",{className:"flex-1",children:e},t))}):null,o&&o.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,s.jsx)("span",{className:"flex-1",children:e},`secondary-mobile-${t}`))}):null]}):null]})}function u({items:e}){return(0,s.jsx)("section",{className:"@xl-page:grid-cols-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"border-border/50 bg-card/60 flex flex-col gap-1 rounded-lg border px-4 py-3 shadow-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2 text-xs font-medium tracking-wide uppercase",children:[e.icon,e.label]}),(0,s.jsx)("div",{className:"text-foreground text-sm font-semibold",children:e.value}),e.helperText?(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:e.helperText}):null]},t))})}function h(e,s){return!!(e&&e.length>0||s&&s.length>0)}e.s(["DetailPageShell",()=>d,"DetailPageSurface",()=>m],278633);var j=e.i(305549),f=e.i(585506),p=e.i(868422),v=e.i(371526),g=e.i(970799);e.i(670258);var N=e.i(921251);e.i(889265);var b=e.i(677607);e.i(526120);var y=e.i(610120);e.i(711448);var w=e.i(157222),_=e.i(51052);function C({notes:e,entityType:t,entityId:i,onAddNote:l}){let{toast:n}=(0,_.useToast)(),[r,d]=(0,g.useState)(!1),[c,o]=(0,g.useState)(""),[m,x]=(0,g.useState)(!1),u=async()=>{if(l){if(!c.trim())return void n.error("Please enter a note");x(!0);try{await l(c),n.success("Note added successfully"),o(""),d(!1)}catch(e){n.error("Failed to add note")}finally{x(!1)}}};return(0,s.jsx)(w.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[l&&(r?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Textarea,{autoFocus:!0,onChange:e=>o(e.target.value),placeholder:"Enter your note...",rows:3,value:c}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b.Button,{disabled:m,onClick:u,size:"sm",children:m?"Saving...":"Save Note"}),(0,s.jsx)(b.Button,{onClick:()=>{d(!1),o("")},size:"sm",variant:"outline",children:"Cancel"})]})]}):(0,s.jsxs)(b.Button,{className:"w-full",onClick:()=>d(!0),size:"sm",variant:"outline",children:[(0,s.jsx)(v.Plus,{className:"mr-2 size-4"}),"Add Note"]})),e&&e.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)("div",{className:"hover:bg-muted/50 rounded-lg border p-3 transition-colors",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(N.Avatar,{className:"size-8 flex-shrink-0",children:[(0,s.jsx)(N.AvatarImage,{src:e.user?.avatar}),(0,s.jsx)(N.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium",children:e.user?.name}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:(0,p.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})})]}),(0,s.jsx)("p",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:e.content||e.note})]})]})},e.id))}):(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(a.FileText,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No notes yet"})]})})]})})}var k=e.i(87912),A=e.i(176378);e.i(553153);var P=e.i(363712);function L({relatedItems:e}){return e&&0!==e.length?(0,s.jsx)(w.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)(A.default,{className:"group hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",href:e.href,children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium",children:e.title}),e.badge&&(0,s.jsx)(P.Badge,{className:"flex-shrink-0",variant:e.badge.variant||"default",children:e.badge.label})]}),e.subtitle&&(0,s.jsx)("p",{className:"text-muted-foreground truncate text-xs",children:e.subtitle})]}),(0,s.jsx)(k.ChevronRight,{className:"text-muted-foreground size-4 flex-shrink-0 transition-transform group-hover:translate-x-0.5"})]},e.id))})}):(0,s.jsx)(w.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.Link,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No related items"})]})})})}let z=(0,n.default)(()=>e.A(134181).then(e=>e.UnifiedAccordion),{loadableGenerated:{modules:[388024]},ssr:!1});function S({header:e,customHeader:n,customSections:c,activities:o=[],notes:x=[],attachments:u=[],relatedItems:h=[],showStandardSections:p={activities:!0,notes:!0,attachments:!0,relatedItems:!0},className:v,defaultOpenSection:g,beforeContent:N,afterContent:b,statsBar:y,contentGapClassName:w,surfacePadding:_="none",surfaceVariant:k="default",surfaceClassName:A,storageKey:P,enableReordering:S=!0}){let I=[];!1!==p.activities&&I.push({id:"activity-log",title:"Activity Log",icon:(0,s.jsx)(t.Activity,{className:"size-4"}),count:o.length,content:(0,s.jsx)(j.ActivityLogSection,{activities:o})}),!1!==p.notes&&I.push({id:"notes",title:"Notes",icon:(0,s.jsx)(a.FileText,{className:"size-4"}),count:x.length,content:(0,s.jsx)(C,{notes:x})}),!1!==p.attachments&&I.push({id:"attachments",title:"Attachments",icon:(0,s.jsx)(l.Paperclip,{className:"size-4"}),count:u.length,content:(0,s.jsx)(f.AttachmentsSection,{attachments:u})}),!1!==p.relatedItems&&h.length>0&&I.push({id:"related-items",title:"Related Items",icon:(0,s.jsx)(i.Link,{className:"size-4"}),count:h.length,content:(0,s.jsx)(L,{relatedItems:h})});let $=[...c||[],...I];return(0,s.jsx)(d,{afterContent:b,beforeContent:N,className:(0,r.cn)("w-full",v),contentGapClassName:w??"gap-4",customHeader:n,header:e,statsBar:y,children:(0,s.jsx)(m,{className:(0,r.cn)("overflow-hidden",A),padding:_,variant:k,children:(0,s.jsx)(z,{defaultOpenSection:g||$[0]?.id,enableReordering:S,sections:$,storageKey:P})})})}e.s(["DetailPageContentLayout",()=>S],821305)},431111,e=>{"use strict";var s=e.i(111043),t=e.i(904653),a=e.i(970799),i=e.i(146798);function l({stats:e,children:l}){let n=(0,t.usePathname)()||"/dashboard",r=(0,i.useToolbarStatsStore)(e=>e.setStats),d=(0,i.useToolbarStatsStore)(e=>e.clearStats);return(0,a.useLayoutEffect)(()=>(e?r(n,e):d(n),()=>{d(n)}),[n,e,r,d]),(0,s.jsx)(s.Fragment,{children:l})}e.s(["ToolbarStatsProvider",()=>l])},213075,e=>{"use strict";let s=(0,e.i(383206).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["default",()=>s])},868106,e=>{"use strict";var s=e.i(213075);e.s(["Receipt",()=>s.default])},798271,e=>{"use strict";var s=e.i(111043),t=e.i(263942),a=e.i(276389),i=e.i(403468),l=e.i(982686),n=e.i(606661),r=e.i(868106),d=e.i(160424),c=e.i(14435),o=e.i(176378),m=e.i(970799),x=e.i(821305);e.i(553153);var u=e.i(363712);e.i(889265);var h=e.i(677607);e.i(51478);var j=e.i(635613);e.i(149989);var f=e.i(880177);e.i(711448);var p=e.i(157222);function v(e){return null==e?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100)}function g(e){return({cash:"Cash",check:"Check",credit_card:"Credit Card",debit_card:"Debit Card",ach:"ACH",wire:"Wire Transfer",venmo:"Venmo",paypal:"PayPal",other:"Other"})[e]||e}function N(e,t){let a={pending:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Pending"},processing:{className:"bg-primary text-primary dark:bg-primary/20 dark:text-primary",label:"Processing"},completed:{className:"bg-success text-white",label:"Completed"},failed:{className:"bg-destructive text-white",label:"Failed"},refunded:{className:"bg-warning text-white",label:"Refunded"},partially_refunded:{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Partially Refunded"},cancelled:{className:"bg-secondary0 text-white",label:"Cancelled"}}[e]||{className:"bg-muted text-foreground",label:e};return(0,s.jsx)(u.Badge,{className:a.className,variant:"outline",children:a.label},t)}function b({entityData:e}){let{payment:b,customer:y,invoice:w,job:_,paymentPlanSchedule:C,financingProvider:k,notes:A=[],activities:P=[],attachments:L=[]}=e,z=[N(b.status||"pending","status"),(0,s.jsx)(u.Badge,{variant:"outline",children:g(b.payment_method||"other")},"method")],S=(0,s.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,s.jsx)("div",{className:"bg-muted/50 rounded-md shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:p-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:z}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("h1",{className:"text-2xl font-semibold sm:text-3xl",children:["Payment ",b.payment_number||b.id.slice(0,8)]}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:v(b.amount)})]})]})}),y&&(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,s.jsxs)(o.default,{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors",href:`/dashboard/customers/${y.id}`,children:[(0,s.jsx)(c.User,{className:"size-4"}),y.display_name||`${y.first_name||""} ${y.last_name||""}`.trim()||"Unknown Customer"]})})]})})}),I=(0,m.useMemo)(()=>{let e=[{id:"payment-details",title:"Payment Details",icon:(0,s.jsx)(i.CreditCard,{className:"size-4"}),defaultOpen:!0,content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Payment Number"}),(0,s.jsx)(j.Input,{readOnly:!0,value:b.payment_number||b.id.slice(0,8)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Amount"}),(0,s.jsx)(j.Input,{readOnly:!0,value:v(b.amount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Payment Method"}),(0,s.jsx)(j.Input,{readOnly:!0,value:g(b.payment_method||"other")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Status"}),(0,s.jsx)("div",{children:N(b.status||"pending")})]}),b.processed_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Processed At"}),(0,s.jsx)(j.Input,{readOnly:!0,value:new Date(b.processed_at).toLocaleString()})]}),b.completed_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Completed At"}),(0,s.jsx)(j.Input,{readOnly:!0,value:new Date(b.completed_at).toLocaleString()})]}),b.reference_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Reference Number"}),(0,s.jsx)(j.Input,{readOnly:!0,value:b.reference_number})]}),b.check_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Check Number"}),(0,s.jsx)(j.Input,{readOnly:!0,value:b.check_number})]}),b.card_last4&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Card"}),(0,s.jsx)(j.Input,{readOnly:!0,value:`${b.card_brand||"Card"} •••• ${b.card_last4}`})]})]})})}];if((b.processor_name||b.processor_transaction_id)&&e.push({id:"processor-info",title:"Processor Information",icon:(0,s.jsx)(t.Building2,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[b.processor_name&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Processor"}),(0,s.jsx)(j.Input,{readOnly:!0,value:b.processor_name})]}),b.processor_transaction_id&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Transaction ID"}),(0,s.jsx)(j.Input,{readOnly:!0,value:b.processor_transaction_id})]}),null!==b.processor_fee&&void 0!==b.processor_fee&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Processor Fee"}),(0,s.jsx)(j.Input,{readOnly:!0,value:v(b.processor_fee)})]}),null!==b.net_amount&&void 0!==b.net_amount&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Net Amount"}),(0,s.jsx)(j.Input,{readOnly:!0,value:v(b.net_amount)})]})]})})}),b.refunded_amount>0&&e.push({id:"refunds",title:"Refunds",icon:(0,s.jsx)(d.RefreshCw,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Refunded Amount"}),(0,s.jsx)("p",{className:"text-sm font-semibold",children:v(b.refunded_amount)})]}),b.refund_reason&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Refund Reason"}),(0,s.jsx)("p",{className:"text-sm",children:b.refund_reason})]}),b.refunded_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Refunded At"}),(0,s.jsx)("p",{className:"text-sm",children:new Date(b.refunded_at).toLocaleString()})]})]})})}),y&&e.push({id:"customer-details",title:"Customer Details",icon:(0,s.jsx)(c.User,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Name"}),(0,s.jsx)("p",{className:"text-sm",children:y.display_name||`${y.first_name||""} ${y.last_name||""}`.trim()||"Unknown"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Email"}),(0,s.jsx)("p",{className:"text-sm",children:y.email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Phone"}),(0,s.jsx)("p",{className:"text-sm",children:y.phone||"N/A"})]})]}),(0,s.jsx)(h.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsx)(o.default,{href:`/dashboard/customers/${y.id}`,children:"View Full Profile"})})]})})}),w&&e.push({id:"invoice-details",title:"Related Invoice",icon:(0,s.jsx)(r.Receipt,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Invoice Number"}),(0,s.jsxs)("p",{className:"text-sm",children:["#",w.invoice_number||w.id.slice(0,8)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Invoice Amount"}),(0,s.jsx)("p",{className:"text-sm",children:v(w.total_amount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Status"}),(0,s.jsx)(u.Badge,{variant:"outline",children:w.status||"N/A"})]})]}),(0,s.jsx)(h.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsx)(o.default,{href:`/dashboard/work/invoices/${w.id}`,children:"View Invoice"})})]})})}),_&&e.push({id:"job-details",title:"Related Job",icon:(0,s.jsx)(n.FileText,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Job Number"}),(0,s.jsxs)("p",{className:"text-sm",children:["#",_.job_number||_.id.slice(0,8)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{children:"Title"}),(0,s.jsx)("p",{className:"text-sm",children:_.title||"N/A"})]})]}),(0,s.jsx)(h.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsx)(o.default,{href:`/dashboard/work/${_.id}`,children:"View Job"})})]})})}),C){let t=Array.isArray(C.payment_plan)?C.payment_plan[0]:C.payment_plan;e.push({id:"payment-plan",title:"Payment Plan",icon:(0,s.jsx)(a.Calendar,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-card rounded-lg border p-4",children:[(0,s.jsx)(f.Label,{className:"mb-2 block text-xs",children:"Plan Details"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Plan Name:"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:t?.name||"Payment Plan"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Total Amount:"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:v(t?.total_amount)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Total Payments:"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:t?.number_of_payments||0})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"This Payment:"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:["#",C.installment_number," of"," ",t?.number_of_payments]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Due Date:"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:C.due_date?new Date(C.due_date).toLocaleDateString():"-"})]})]})]}),t?.invoice&&(0,s.jsx)(h.Button,{asChild:!0,className:"w-full",variant:"outline",children:(0,s.jsxs)(o.default,{href:`/dashboard/work/invoices/${t.invoice.id}`,children:["View Related Invoice #",t.invoice.invoice_number]})})]})})})}return k&&e.push({id:"financing",title:"Financing Provider",icon:(0,s.jsx)(l.DollarSign,{className:"size-4"}),content:(0,s.jsx)(p.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{className:"text-xs",children:"Provider Name"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:k.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{className:"text-xs",children:"Type"}),(0,s.jsx)(u.Badge,{className:"capitalize",variant:"outline",children:k.provider_type})]}),k.contact_email&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{className:"text-xs",children:"Contact Email"}),(0,s.jsx)("a",{className:"text-primary block text-sm hover:underline",href:`mailto:${k.contact_email}`,children:k.contact_email})]}),k.contact_phone&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{className:"text-xs",children:"Contact Phone"}),(0,s.jsx)("a",{className:"text-primary block text-sm hover:underline",href:`tel:${k.contact_phone}`,children:k.contact_phone})]})]})})})}),e},[b,y,w,_,C,k]),$=(0,m.useMemo)(()=>{let e=[];return y&&e.push({id:`customer-${y.id}`,type:"customer",title:y.display_name||`${y.first_name||""} ${y.last_name||""}`.trim()||"Unknown Customer",subtitle:y.email||y.phone||void 0,href:`/dashboard/customers/${y.id}`}),w&&e.push({id:`invoice-${w.id}`,type:"invoice",title:`Invoice #${w.invoice_number||w.id.slice(0,8)}`,subtitle:v(w.total_amount),href:`/dashboard/work/invoices/${w.id}`,badge:w.status?{label:w.status,variant:"outline"}:void 0}),_&&e.push({id:`job-${_.id}`,type:"job",title:_.title||`Job #${_.job_number||_.id.slice(0,8)}`,subtitle:_.status,href:`/dashboard/work/${_.id}`,badge:_.status?{label:_.status,variant:"outline"}:void 0}),e},[y,w,_]);return(0,s.jsx)(x.DetailPageContentLayout,{activities:P,attachments:L,customHeader:S,customSections:I,defaultOpenSection:"payment-details",notes:A,relatedItems:$,showStandardSections:{activities:!0,notes:!0,attachments:!0,relatedItems:!0}})}e.s(["PaymentPageContent",()=>b])},134181,e=>{e.v(s=>Promise.all(["static/chunks/6680116ea3e49da7.js"].map(s=>e.l(s))).then(()=>s(388024)))}]);