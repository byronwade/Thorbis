(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,931621,e=>{"use strict";var a=e.i(111043),s=e.i(946672),t=e.i(148580),t=t,l=e.i(327149),r=e.i(263942),i=e.i(276389),n=e.i(136764),o=e.i(982686),d=e.i(882896),c=e.i(559586),m=e.i(15751),h=e.i(848475),x=e.i(939397),u=e.i(371526),p=e.i(613240),j=e.i(598870),g=e.i(121085),v=e.i(614726),b=e.i(710575),f=e.i(697029),y=e.i(14435),_=e.i(123331),N=e.i(501651),C=e.i(176378),F=e.i(904653),w=e.i(970799),k=e.i(821305),S=e.i(278633);e.i(670258);var T=e.i(921251);e.i(553153);var A=e.i(363712);e.i(889265);var I=e.i(677607);e.i(244242);var M=e.i(563078);e.i(51478);var P=e.i(635613);e.i(149989);var D=e.i(880177);e.i(287133);var z=e.i(120109),B=e.i(220168);e.i(6130);var U=e.i(506806);e.i(526120);var J=e.i(610120);e.i(711448);var R=e.i(157222),H=e.i(51052),E=e.i(871509),$=e.i(237833),O=e.i(152088);function W({entityData:e,metrics:W}){let L=(0,F.useRouter)(),{toast:V}=(0,H.useToast)(),K=(0,F.usePathname)(),[Z,q]=(0,w.useState)(e.teamMember),[G,Q]=(0,w.useState)(!1),[X,Y]=(0,w.useState)(!1),ee=(0,$.useToolbarActionsStore)(e=>e.setActions),{teamMember:ea,user:es,assignedJobs:et=[],timeEntries:el=[],certifications:er=[],activities:ei=[],attachments:en=[],permissions:eo=[]}=e,ed=(e,a)=>{q(s=>({...s,[e]:a})),Q(!0)},ec=(0,w.useMemo)(()=>es?.name||Z?.name||ea?.name||`${es?.email||"Unknown User"}`,[es,Z,ea]),em=(Z?.status||ea?.status||"active")?.toLowerCase(),eh=Z?.role?.name||ea?.role?.name||Z?.job_title||ea?.job_title||"Team Member",ex=Z?.department?.name||ea?.department?.name||null,eu=Z?.joined_at??ea?.joined_at??Z?.created_at??ea?.created_at??null,ep=Z?.last_active_at??ea?.last_active_at??null,ej=async()=>{Y(!0);try{V.success("Team member updated successfully"),Q(!1)}catch(e){V.error("Failed to update team member")}finally{Y(!1)}},eg=()=>{q(ea),Q(!1)},ev=[(0,a.jsxs)(A.Badge,{className:"font-mono",variant:"outline",children:["#",ea?.id?.slice(0,8).toUpperCase()||"MEMBER"]},"identifier"),(0,a.jsx)(A.Badge,{variant:(e=>{switch(e){case"active":return"default";case"invited":default:return"secondary";case"suspended":case"inactive":return"destructive"}})(em||"active"),children:"active"===em?"Active":"invited"===em?"Invited":"suspended"===em?"Suspended":"Inactive"},"status"),Z?.role?.name?(0,a.jsx)(A.Badge,{style:{backgroundColor:Z.role.color||void 0},variant:Z.role.color?"default":"secondary",children:Z.role.name},"role"):ea?.role?.name?(0,a.jsx)(A.Badge,{style:{backgroundColor:ea.role.color||void 0},variant:ea.role.color?"default":"secondary",children:ea.role.name},"role"):null,ex?(0,a.jsxs)(A.Badge,{variant:"outline",children:[(0,a.jsx)(r.Building2,{className:"mr-1 h-3 w-3"})," ",ex]},"department"):null].filter(Boolean),eb=[{key:"assign-job",label:"Assign Job",icon:N.Wrench,onClick:()=>L.push(`/dashboard/work/new?teamMemberId=${ea.id}`)},{key:"view-schedule",label:"View Schedule",icon:i.Calendar,variant:"secondary",onClick:()=>L.push(`/dashboard/schedule?teamMemberId=${ea.id}`)},{key:"edit-permissions",label:"Edit Permissions",icon:b.Shield,variant:"outline",onClick:()=>L.push(`/dashboard/settings/team/${ea.id}#permissions`)}],ef=()=>eb.map(e=>{let{key:s,label:t,icon:l,onClick:r}=e,i="variant"in e?e.variant:void 0;return(0,a.jsxs)(I.Button,{onClick:r,size:"sm",variant:i??"default",children:[(0,a.jsx)(l,{className:"mr-2 h-4 w-4"}),t]},s)}),ey=(0,w.useCallback)(()=>G?(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsxs)(I.Button,{disabled:X,onClick:ej,size:"sm",children:[(0,a.jsx)(j.Save,{className:"mr-2 h-4 w-4"}),X?"Saving...":"Save Changes"]}),(0,a.jsx)(I.Button,{onClick:eg,size:"sm",variant:"outline",children:"Cancel"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[ef(),(0,a.jsx)(z.Separator,{className:"h-6",orientation:"vertical"}),(0,a.jsxs)(M.DropdownMenu,{children:[(0,a.jsx)(M.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(I.Button,{className:"h-8 w-8",size:"icon",variant:"outline",children:[(0,a.jsx)(h.MoreVertical,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More actions"})]})}),(0,a.jsxs)(M.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,a.jsx)(M.DropdownMenuLabel,{className:"text-muted-foreground text-xs font-medium tracking-wide uppercase",children:"Actions"}),(0,a.jsx)(M.DropdownMenuSeparator,{}),(0,a.jsxs)(M.DropdownMenuItem,{onClick:()=>L.push(`/dashboard/settings/team/${ea.id}`),children:[(0,a.jsx)(_.UserCog,{className:"mr-2 size-3.5"}),"Edit Full Profile"]}),(0,a.jsx)(M.DropdownMenuSeparator,{}),(0,a.jsxs)(M.DropdownMenuItem,{onClick:()=>{},children:[(0,a.jsx)(d.Download,{className:"mr-2 size-3.5"}),"Export to CSV"]}),(0,a.jsxs)(M.DropdownMenuItem,{onClick:()=>{},children:[(0,a.jsx)(p.Printer,{className:"mr-2 size-3.5"}),"Print Profile"]}),(0,a.jsxs)(M.DropdownMenuItem,{onClick:()=>{},children:[(0,a.jsx)(v.Share2,{className:"mr-2 size-3.5"}),"Share Profile Link"]}),(0,a.jsx)(M.DropdownMenuSeparator,{}),(0,a.jsxs)(M.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>{},children:[(0,a.jsx)(s.Archive,{className:"mr-2 size-3.5"}),"Archive Member"]})]})]})]}),[G,X,ej,eg,ef,L,ea.id]);(0,w.useEffect)(()=>{K&&ee(K,ey())},[K,ee,ey]);let e_=[{label:"Active Jobs",icon:(0,a.jsx)(N.Wrench,{className:"h-3.5 w-3.5"}),value:W?.activeJobs??0,helperText:"Currently assigned"},{label:"Total Jobs",icon:(0,a.jsx)(f.TrendingUp,{className:"h-3.5 w-3.5"}),value:W?.totalJobs??et.length,helperText:"All time"},{label:"Hours Worked",icon:(0,a.jsx)(n.Clock,{className:"h-3.5 w-3.5"}),value:`${Math.floor(W?.totalHours??0)}h`},{label:"Certifications",icon:(0,a.jsx)(t.default,{className:"h-3.5 w-3.5"}),value:W?.activeCertifications??er.length,helperText:"Active"}],eN=(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(l.Briefcase,{className:"h-4 w-4"}),eh]}),eu?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)(i.Calendar,{className:"h-4 w-4"}),"Joined ",(0,E.formatDate)(eu,"short")]})]}):null,ep?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,a.jsxs)("span",{className:"text-muted-foreground inline-flex items-center gap-1",children:[(0,a.jsx)(n.Clock,{className:"h-4 w-4"}),"Active ",(0,E.formatDate)(ep,"relative")]})]}):null]}),eC=ec.split(" ").map(e=>e?.[0]).filter(Boolean).join("").slice(0,2).toUpperCase(),eF={title:ec,subtitle:eN,badges:ev,metadata:e_,leadingVisual:(0,a.jsxs)(T.Avatar,{className:"h-12 w-12",children:[(0,a.jsx)(T.AvatarImage,{alt:ec,src:es?.avatar??void 0}),(0,a.jsx)(T.AvatarFallback,{children:eC||"TM"})]})},ew=[{key:"email",icon:c.Mail,label:"Email",value:es?.email??"Not provided",href:es?.email?`mailto:${es.email}`:void 0},{key:"phone",icon:x.Phone,label:"Phone",value:ea?.phone??es?.phone??"Not provided",href:ea?.phone?`tel:${ea.phone}`:void 0},{key:"role",icon:l.Briefcase,label:"Role",value:eh},{key:"department",icon:r.Building2,label:"Department",value:ex??"Not assigned"}],ek=[{key:"active-jobs",icon:N.Wrench,label:"Active Jobs",value:W?.activeJobs??0},{key:"completed-jobs",icon:f.TrendingUp,label:"Completed",value:W?.completedJobs??0},{key:"hours",icon:n.Clock,label:"Hours Worked",value:`${Math.floor(W?.totalHours??0)}h`},{key:"certifications",icon:t.default,label:"Certifications",value:`${W?.activeCertifications??0}/${W?.totalCertifications??0}`}],eS=(0,a.jsx)(S.DetailPageSurface,{padding:"lg",variant:"muted",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(D.Label,{className:"text-muted-foreground text-xs font-medium uppercase",children:"Display Name"}),(0,a.jsx)(P.Input,{className:(0,O.cn)("border-border/40 bg-background focus-visible:ring-primary/50 h-12 rounded-lg border px-4 text-xl font-semibold shadow-none focus-visible:ring-2 sm:text-2xl"),onChange:e=>ed("name",e.target.value),placeholder:"Enter member name...",value:ec}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Update how this team member appears across Thorbis. Changes are saved when you select Save changes."})]}),(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:ew.map(({key:e,icon:s,label:t,value:l,href:r})=>(0,a.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(s,{className:"text-muted-foreground h-4 w-4"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:t}),r?(0,a.jsx)("a",{className:"text-sm font-semibold hover:underline",href:r,children:l}):(0,a.jsx)("span",{className:"text-sm font-semibold",children:l})]})]})},e))}),(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:ek.map(({key:e,icon:s,label:t,value:l})=>(0,a.jsx)("div",{className:"border-border/40 bg-background rounded-lg border px-3 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(s,{className:"text-muted-foreground h-4 w-4"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-xs font-medium uppercase",children:t}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:l})]})]})},e))})]})}),eT=(0,w.useMemo)(()=>[{id:"personal-info",title:"Personal Information",icon:(0,a.jsx)(y.User,{className:"size-4"}),defaultOpen:!0,content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(B.StandardFormField,{label:"Email",htmlFor:"email",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(P.Input,{id:"email",readOnly:!0,type:"email",value:es?.email||""}),es?.email&&(0,a.jsx)(I.Button,{asChild:!0,size:"icon",variant:"outline",children:(0,a.jsx)("a",{href:`mailto:${es.email}`,children:(0,a.jsx)(c.Mail,{className:"size-4"})})})]})}),(0,a.jsx)(B.StandardFormField,{label:"Phone",htmlFor:"phone",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(P.Input,{id:"phone",onChange:e=>ed("phone",e.target.value),type:"tel",value:Z.phone||""}),Z.phone&&(0,a.jsx)(I.Button,{asChild:!0,size:"icon",variant:"outline",children:(0,a.jsx)("a",{href:`tel:${Z.phone}`,children:(0,a.jsx)(x.Phone,{className:"size-4"})})})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(B.StandardFormField,{label:"Job Title",htmlFor:"job_title",children:(0,a.jsx)(P.Input,{id:"job_title",onChange:e=>ed("job_title",e.target.value),value:Z.job_title||""})}),(0,a.jsx)(B.StandardFormField,{label:"Notes",htmlFor:"notes",children:(0,a.jsx)(J.Textarea,{id:"notes",onChange:e=>ed("notes",e.target.value),placeholder:"Internal notes about this team member",rows:3,value:Z.notes||""})})]})]})})})},{id:"emergency-contact",title:"Emergency Contact",icon:(0,a.jsx)(x.Phone,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(B.StandardFormRow,{cols:3,children:[(0,a.jsx)(B.StandardFormField,{label:"Contact Name",htmlFor:"emergency_contact_name",children:(0,a.jsx)(P.Input,{id:"emergency_contact_name",onChange:e=>ed("emergency_contact_name",e.target.value),placeholder:"Full name",value:Z.emergency_contact_name||""})}),(0,a.jsx)(B.StandardFormField,{label:"Contact Phone",htmlFor:"emergency_contact_phone",children:(0,a.jsx)(P.Input,{id:"emergency_contact_phone",onChange:e=>ed("emergency_contact_phone",e.target.value),placeholder:"(555) 123-4567",type:"tel",value:Z.emergency_contact_phone||""})}),(0,a.jsx)(B.StandardFormField,{label:"Relationship",htmlFor:"emergency_contact_relationship",children:(0,a.jsx)(P.Input,{id:"emergency_contact_relationship",onChange:e=>ed("emergency_contact_relationship",e.target.value),placeholder:"Spouse, Parent, etc.",value:Z.emergency_contact_relationship||""})})]})})})},{id:"employment-details",title:"Employment Details",icon:(0,a.jsx)(l.Briefcase,{className:"size-4"}),defaultOpen:!1,content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Employee ID",htmlFor:"employee_id",children:(0,a.jsx)(P.Input,{id:"employee_id",onChange:e=>ed("employee_id",e.target.value),placeholder:"EMP-001",value:Z.employee_id||""})}),(0,a.jsx)(B.StandardFormField,{label:"Hire Date",htmlFor:"hire_date",children:(0,a.jsx)(P.Input,{id:"hire_date",onChange:e=>ed("hire_date",e.target.value),type:"date",value:Z.hire_date||""})})]}),(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Employment Type",htmlFor:"employment_type",children:(0,a.jsx)(P.Input,{id:"employment_type",onChange:e=>ed("employment_type",e.target.value),placeholder:"Full Time, Part Time, Contractor",value:Z.employment_type||""})}),(0,a.jsx)(B.StandardFormField,{label:"Work Location",htmlFor:"work_location",children:(0,a.jsx)(P.Input,{id:"work_location",onChange:e=>ed("work_location",e.target.value),placeholder:"Office, Field, Remote",value:Z.work_location||""})})]}),(0,a.jsx)(B.StandardFormField,{label:"Work Schedule",htmlFor:"work_schedule",children:(0,a.jsx)(J.Textarea,{id:"work_schedule",onChange:e=>ed("work_schedule",e.target.value),placeholder:"Mon-Fri 8am-5pm, etc.",rows:2,value:Z.work_schedule||""})})]})})},{id:"compensation",title:"Compensation",icon:(0,a.jsx)(o.DollarSign,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Pay Type",htmlFor:"pay_type",children:(0,a.jsx)(P.Input,{id:"pay_type",onChange:e=>ed("pay_type",e.target.value),placeholder:"Hourly, Salary, Commission",value:Z.pay_type||""})}),(0,a.jsx)(B.StandardFormField,{label:"Hourly Rate",htmlFor:"hourly_rate",children:(0,a.jsx)(P.Input,{id:"hourly_rate",onChange:e=>ed("hourly_rate",e.target.value),placeholder:"25.00",type:"number",step:"0.01",value:Z.hourly_rate||""})})]}),(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Annual Salary",htmlFor:"annual_salary",children:(0,a.jsx)(P.Input,{id:"annual_salary",onChange:e=>ed("annual_salary",e.target.value),placeholder:"50000.00",type:"number",step:"0.01",value:Z.annual_salary||""})}),(0,a.jsx)(B.StandardFormField,{label:"Commission Rate (%)",htmlFor:"commission_rate",children:(0,a.jsx)(P.Input,{id:"commission_rate",onChange:e=>ed("commission_rate",e.target.value),placeholder:"5.00",type:"number",step:"0.01",value:Z.commission_rate||""})})]}),(0,a.jsx)(B.StandardFormField,{label:"Overtime Eligible",htmlFor:"overtime_eligible",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{id:"overtime_eligible",type:"checkbox",checked:Z.overtime_eligible??!0,onChange:e=>ed("overtime_eligible",e.target.checked),className:"h-4 w-4"}),(0,a.jsx)(D.Label,{htmlFor:"overtime_eligible",children:"Employee is eligible for overtime pay"})]})}),(0,a.jsxs)(B.StandardFormField,{label:"Commission Structure (JSON)",htmlFor:"commission_structure",children:[(0,a.jsx)(J.Textarea,{id:"commission_structure",onChange:e=>ed("commission_structure",e.target.value),placeholder:'{"tiers": [{"min": 0, "max": 10000, "rate": 5}]}',rows:3,value:Z.commission_structure?JSON.stringify(Z.commission_structure,null,2):""}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Advanced commission structure in JSON format"})]})]})})},{id:"address",title:"Address",icon:(0,a.jsx)(m.MapPin,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(B.StandardFormField,{label:"Street Address",htmlFor:"street_address",children:(0,a.jsx)(P.Input,{id:"street_address",onChange:e=>ed("street_address",e.target.value),placeholder:"123 Main St",value:Z.street_address||""})}),(0,a.jsxs)(B.StandardFormRow,{cols:3,children:[(0,a.jsx)(B.StandardFormField,{label:"City",htmlFor:"city",children:(0,a.jsx)(P.Input,{id:"city",onChange:e=>ed("city",e.target.value),placeholder:"San Francisco",value:Z.city||""})}),(0,a.jsx)(B.StandardFormField,{label:"State",htmlFor:"state",children:(0,a.jsx)(P.Input,{id:"state",onChange:e=>ed("state",e.target.value),placeholder:"CA",value:Z.state||""})}),(0,a.jsx)(B.StandardFormField,{label:"Zip Code",htmlFor:"postal_code",children:(0,a.jsx)(P.Input,{id:"postal_code",onChange:e=>ed("postal_code",e.target.value),placeholder:"94102",value:Z.postal_code||""})})]}),(0,a.jsx)(B.StandardFormField,{label:"Country",htmlFor:"country",children:(0,a.jsx)(P.Input,{id:"country",onChange:e=>ed("country",e.target.value),placeholder:"US",value:Z.country||"US"})})]})})},{id:"work-preferences",title:"Work Preferences",icon:(0,a.jsx)(g.Settings,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(B.StandardFormField,{label:"Skills",htmlFor:"skills",children:[(0,a.jsx)(J.Textarea,{id:"skills",onChange:e=>ed("skills",e.target.value.split(",").map(e=>e.trim())),placeholder:"HVAC, Plumbing, Electrical (comma separated)",rows:2,value:Array.isArray(Z.skills)?Z.skills.join(", "):""}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Enter skills separated by commas"})]}),(0,a.jsxs)(B.StandardFormField,{label:"Service Areas",htmlFor:"service_areas",children:[(0,a.jsx)(J.Textarea,{id:"service_areas",onChange:e=>ed("service_areas",e.target.value.split(",").map(e=>e.trim())),placeholder:"San Francisco, Oakland, Berkeley (comma separated)",rows:2,value:Array.isArray(Z.service_areas)?Z.service_areas.join(", "):""}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Enter service areas separated by commas"})]}),(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Max Weekly Hours",htmlFor:"max_weekly_hours",children:(0,a.jsx)(P.Input,{id:"max_weekly_hours",onChange:e=>ed("max_weekly_hours",e.target.value),placeholder:"40",type:"number",value:Z.max_weekly_hours||""})}),(0,a.jsx)(B.StandardFormField,{label:"Preferred Job Types",htmlFor:"preferred_job_types",children:(0,a.jsx)(P.Input,{id:"preferred_job_types",onChange:e=>ed("preferred_job_types",e.target.value.split(",").map(e=>e.trim())),placeholder:"Repair, Maintenance, Installation",value:Array.isArray(Z.preferred_job_types)?Z.preferred_job_types.join(", "):""})})]}),(0,a.jsxs)(B.StandardFormField,{label:"Availability Schedule (JSON)",htmlFor:"availability_schedule",children:[(0,a.jsx)(J.Textarea,{id:"availability_schedule",onChange:e=>ed("availability_schedule",e.target.value),placeholder:'{"monday": {"start": "08:00", "end": "17:00"}}',rows:4,value:Z.availability_schedule?JSON.stringify(Z.availability_schedule,null,2):""}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Weekly availability in JSON format"})]})]})})},{id:"performance-tracking",title:"Performance Tracking",icon:(0,a.jsx)(f.TrendingUp,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(B.StandardFormRow,{cols:2,children:[(0,a.jsx)(B.StandardFormField,{label:"Last Review Date",htmlFor:"last_review_date",children:(0,a.jsx)(P.Input,{id:"last_review_date",onChange:e=>ed("last_review_date",e.target.value),type:"date",value:Z.last_review_date||""})}),(0,a.jsx)(B.StandardFormField,{label:"Next Review Date",htmlFor:"next_review_date",children:(0,a.jsx)(P.Input,{id:"next_review_date",onChange:e=>ed("next_review_date",e.target.value),type:"date",value:Z.next_review_date||""})})]}),(0,a.jsxs)(B.StandardFormField,{label:"Performance Notes",htmlFor:"performance_notes",children:[(0,a.jsx)(J.Textarea,{id:"performance_notes",onChange:e=>ed("performance_notes",e.target.value),placeholder:"Internal performance notes and feedback...",rows:6,value:Z.performance_notes||""}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Private notes for manager use only"})]})]})})},{id:"certifications",title:"Skills & Certifications",icon:(0,a.jsx)(t.default,{className:"size-4"}),count:er.length,actions:(0,a.jsxs)(I.Button,{onClick:()=>{},size:"sm",variant:"outline",children:[(0,a.jsx)(u.Plus,{className:"mr-2 h-4 w-4"})," Add Certification"]}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:er.length>0?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:er.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,a.jsx)(t.default,{className:"text-primary h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:e.issuing_organization||"Certification"})]})]}),(0,a.jsxs)("div",{className:"mt-3 space-y-1 text-sm",children:[e.issue_date&&(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Issued: ",(0,E.formatDate)(e.issue_date,"short")]}),e.expiry_date&&(0,a.jsxs)("p",{className:(0,O.cn)("text-muted-foreground",new Date(e.expiry_date)<new Date&&"text-destructive"),children:[new Date(e.expiry_date)<new Date?"Expired":"Expires",": ",(0,E.formatDate)(e.expiry_date,"short")]}),e.credential_id&&(0,a.jsxs)("p",{className:"text-muted-foreground",children:["ID: ",e.credential_id]})]})]},e.id))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-6 text-center",children:[(0,a.jsx)(t.default,{className:"text-muted-foreground h-6 w-6"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No certifications on record for this team member yet."})]})})},{id:"assigned-jobs",title:"Assigned Jobs",icon:(0,a.jsx)(N.Wrench,{className:"size-4"}),count:et.length,actions:(0,a.jsxs)(I.Button,{onClick:()=>L.push(`/dashboard/work/new?teamMemberId=${ea.id}`),size:"sm",variant:"outline",children:[(0,a.jsx)(u.Plus,{className:"mr-2 h-4 w-4"})," Assign Job"]}),content:(0,a.jsxs)(R.UnifiedAccordionContent,{className:"p-0",children:[(0,a.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Jobs currently assigned to this team member."}),et.length>0?(0,a.jsxs)(U.Table,{children:[(0,a.jsx)(U.TableHeader,{children:(0,a.jsxs)(U.TableRow,{children:[(0,a.jsx)(U.TableHead,{children:"Job #"}),(0,a.jsx)(U.TableHead,{children:"Title"}),(0,a.jsx)(U.TableHead,{children:"Customer"}),(0,a.jsx)(U.TableHead,{children:"Status"}),(0,a.jsx)(U.TableHead,{children:"Scheduled"}),(0,a.jsx)(U.TableHead,{children:"Actions"})]})}),(0,a.jsx)(U.TableBody,{children:et.map(e=>{let s=e.job;if(!s)return null;let t=s.customer?.display_name||s.customer?.company_name||[s.customer?.first_name,s.customer?.last_name].filter(Boolean).join(" ")||"Unknown Customer";return(0,a.jsxs)(U.TableRow,{children:[(0,a.jsxs)(U.TableCell,{className:"font-mono",children:["#",s.job_number]}),(0,a.jsx)(U.TableCell,{children:s.title||"Untitled Job"}),(0,a.jsx)(U.TableCell,{children:t}),(0,a.jsx)(U.TableCell,{children:(0,a.jsx)(A.Badge,{variant:"outline",children:s.status})}),(0,a.jsx)(U.TableCell,{className:"text-muted-foreground text-sm",children:s.scheduled_start?(0,E.formatDate)(s.scheduled_start,"short"):"Not scheduled"}),(0,a.jsx)(U.TableCell,{children:(0,a.jsx)(I.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,a.jsx)(C.default,{href:`/dashboard/work/${s.id}`,children:"View"})})})]},e.id)})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)(N.Wrench,{className:"text-muted-foreground/50 mb-3 size-12"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"No jobs currently assigned"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Assign jobs to track this member's work"})]})]})},{id:"time-entries",title:"Time Entries",icon:(0,a.jsx)(n.Clock,{className:"size-4"}),count:el.length,content:(0,a.jsxs)(R.UnifiedAccordionContent,{className:"p-0",children:[(0,a.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Recent time entries and clock in/out history."}),el.length>0?(0,a.jsxs)(U.Table,{children:[(0,a.jsx)(U.TableHeader,{children:(0,a.jsxs)(U.TableRow,{children:[(0,a.jsx)(U.TableHead,{children:"Date"}),(0,a.jsx)(U.TableHead,{children:"Job"}),(0,a.jsx)(U.TableHead,{children:"Clock In"}),(0,a.jsx)(U.TableHead,{children:"Clock Out"}),(0,a.jsx)(U.TableHead,{children:"Hours"})]})}),(0,a.jsx)(U.TableBody,{children:el.slice(0,20).map(e=>(0,a.jsxs)(U.TableRow,{children:[(0,a.jsx)(U.TableCell,{children:(0,E.formatDate)(e.clock_in,"short")}),(0,a.jsx)(U.TableCell,{children:e.job?(0,a.jsxs)(C.default,{className:"text-primary hover:underline",href:`/dashboard/work/${e.job.id}`,children:["#",e.job.job_number||"Unknown"]}):"No job"}),(0,a.jsx)(U.TableCell,{children:new Date(e.clock_in).toLocaleTimeString()}),(0,a.jsx)(U.TableCell,{children:e.clock_out?new Date(e.clock_out).toLocaleTimeString():(0,a.jsx)(A.Badge,{variant:"secondary",children:"In progress"})}),(0,a.jsx)(U.TableCell,{children:e.total_hours?`${e.total_hours.toFixed(2)}h`:"—"})]},e.id))})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)(n.Clock,{className:"text-muted-foreground/50 mb-3 size-12"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"No time entries recorded"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:"Time entries will appear here when work begins"})]})]})},{id:"performance",title:"Performance Metrics",icon:(0,a.jsx)(f.TrendingUp,{className:"size-4"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,a.jsx)(N.Wrench,{className:"text-primary h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Jobs Completed"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-bold",children:W?.completedJobs??0})]})]})}),(0,a.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,a.jsx)(n.Clock,{className:"text-primary h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Hours"}),(0,a.jsxs)("p",{className:"mt-1 text-2xl font-bold",children:[Math.floor(W?.totalHours??0),"h"]})]})]})}),(0,a.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary/10 rounded-md p-2",children:(0,a.jsx)(f.TrendingUp,{className:"text-primary h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Active Jobs"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-bold",children:W?.activeJobs??0})]})]})})]})})},{id:"permissions",title:"Permissions & Access",icon:(0,a.jsx)(b.Shield,{className:"size-4"}),count:eo?.length??0,actions:(0,a.jsx)(I.Button,{onClick:()=>L.push(`/dashboard/settings/team/${ea.id}`),size:"sm",variant:"outline",children:"Edit Permissions"}),content:(0,a.jsx)(R.UnifiedAccordionContent,{children:(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsxs)("p",{className:"text-muted-foreground text-sm",children:["Permissions are managed at the role level. This team member has the ",(0,a.jsx)("strong",{children:eh})," role",ex?(0,a.jsxs)(a.Fragment,{children:[" ","and is assigned to the ",(0,a.jsx)("strong",{children:ex})," ","department"]}):"","."]}),eo&&eo.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("p",{className:"mb-2 text-sm font-medium",children:["Role Permissions (",eo.length,"):"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[eo.slice(0,10).map(e=>(0,a.jsx)(A.Badge,{variant:"secondary",children:e.permission_name||e.name||"Permission"},e.id)),eo.length>10&&(0,a.jsxs)(A.Badge,{variant:"outline",children:["+",eo.length-10," more"]})]})]})]})})}],[es,Z,ea,ed,er,et,el,eo,W,eh,ex,L]),eA=(0,w.useMemo)(()=>{let e=[];if(et.length>0){let a=et[0]?.job;a&&e.push({id:`job-${a.id}`,type:"job",title:a.title||`Job #${a.job_number}`,subtitle:a.status,href:`/dashboard/work/${a.id}`,badge:a.status?{label:a.status,variant:"outline"}:void 0})}return es?.email&&e.push({id:`user-${ea.id}`,type:"contact",title:"Primary Email",subtitle:es.email,href:`mailto:${es.email}`}),e},[et,ea.id,es?.email]);return(0,a.jsx)(k.DetailPageContentLayout,{activities:ei,attachments:en,beforeContent:eS,customSections:eT,defaultOpenSection:"personal-info",enableReordering:!0,header:eF,notes:[],relatedItems:eA,showStandardSections:{notes:!1},storageKey:"team-member-details"})}e.s(["TeamMemberPageContent",()=>W],931621)}]);