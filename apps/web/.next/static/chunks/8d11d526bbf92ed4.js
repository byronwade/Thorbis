(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,616291,e=>{"use strict";let t=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>t])},664136,e=>{"use strict";var t=e.i(616291);e.s(["Edit",()=>t.default])},221999,e=>{"use strict";let t=(0,e.i(383206).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["default",()=>t])},560149,e=>{"use strict";var t=e.i(221999);e.s(["CalendarDays",()=>t.default])},686804,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>t])},550652,e=>{"use strict";var t=e.i(686804);e.s(["ArrowUpRight",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},287156,e=>{"use strict";var t=e.i(111043),r=e.i(970799),a=e.i(151213);function s({section:e,table:s,kanban:n,fallback:i=null,forceView:o}){let l=(0,a.useWorkView)(e),d=(0,a.useSetWorkView)(e),c=o??l;return((0,r.useEffect)(()=>{o&&l!==o&&d(o)},[o]),"kanban"===c)?(0,t.jsx)(t.Fragment,{children:n??i}):(0,t.jsx)(t.Fragment,{children:s??i})}e.s(["WorkDataView",()=>s])},430876,e=>{"use strict";var t=e.i(111043),r=e.i(970799);e.i(116233);var a=e.i(363712),s=e.i(999),n=e.i(691225),i=e.i(913532),o=e.i(605278),l=e.i(375308),d=e.i(989239);let c=(0,r.createContext)(null),u=(0,r.createContext)(null),m="kanban-column-";function h(e,t,r){let a=Object.fromEntries(e.map(e=>[e.id,[]]));return t.reduce((e,t)=>{let a=r(t);return e[a]||(e[a]=[]),e[a]=[...e[a],t],e},a)}function p({columns:e,data:a,onDataChange:i,onItemMove:l,getColumnId:u,children:p,className:g,pointerSensorOptions:x,renderDragOverlay:f}){let v=(0,r.useCallback)(u??(e=>e.columnId),[]),[b,y]=(0,r.useState)(()=>h(e,a,v)),[w,j]=(0,r.useState)(null),k=(0,r.useRef)(e);(0,r.useEffect)(()=>{k.current=e},[e]),(0,r.useEffect)(()=>{y(h(e,a,v))},[e,a,v]);let P=(0,s.useSensors)((0,s.useSensor)(s.PointerSensor,{activationConstraint:{distance:6},...x}),(0,s.useSensor)(s.KeyboardSensor,{coordinateGetter:n.sortableKeyboardCoordinates})),S=(0,r.useCallback)(e=>{for(let t of k.current){let r=b[t.id]??[],a=r.findIndex(t=>t.id===e);if(-1!==a)return{columnId:t.id,item:r[a],index:a}}return null},[b]),N=(0,r.useCallback)(e=>{let t=S(e.active.id);t&&j({item:t.item,columnId:t.columnId})},[S]),C=(0,r.useCallback)(e=>{var t;let{active:r,over:a}=e;if(j(null),!a)return;let s=S(r.id);if(!s)return;let n=null,o=null;if("string"==typeof a.id&&a.id.startsWith(m))o=(b[n=a.id.replace(m,"")]??[]).length;else{let e=S(a.id);e&&(n=e.columnId,o=(b[e.columnId]??[]).findIndex(t=>t.id===e.item.id))}if(null===n||null===o||n===s.columnId&&o===s.index)return;let d=Object.fromEntries(Object.entries(b).map(([e,t])=>[e,t.slice()])),c=d[s.columnId]??[],[u]=c.splice(s.index,1);d[s.columnId]=c;let h=d[n]??[],p=s.columnId===n&&s.index<o?o-1:o,g={...u,columnId:n};h.splice(p,0,g),d[n]=h,y(d);let x=(t=k.current,t.flatMap(e=>d[e.id]??[]));i?.(x),l&&l({item:g,fromColumnId:s.columnId,toColumnId:n,toIndex:p})},[S,b,i,l]),D=(0,r.useMemo)(()=>({columns:e,getItems:e=>b[e]??[],findItem:S,activeItem:w}),[e,b,S,w]);return(0,t.jsx)(c.Provider,{value:D,children:(0,t.jsxs)(s.DndContext,{collisionDetection:s.closestCorners,onDragCancel:()=>j(null),onDragEnd:C,onDragStart:N,sensors:P,children:[(0,t.jsx)("div",{className:(0,d.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",g),children:p}),(0,t.jsx)(s.DragOverlay,{children:w?f?f(w.item):(0,t.jsx)(o.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium",children:String(w.item.id)})}):null})]})})}function g({column:e,children:r,className:a}){return(0,t.jsx)(u.Provider,{value:e,children:(0,t.jsx)("section",{"aria-label":`${e.name} column`,className:(0,d.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",a),children:r})})}function x({children:e,className:r}){return(0,t.jsx)("header",{className:(0,d.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",r),children:e})}function f({columnId:e,children:a,emptyState:i,className:o,height:u="28rem"}){let{getItems:h}=function(){let e=(0,r.useContext)(c);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),p=h(e),{setNodeRef:g,isOver:x}=(0,s.useDroppable)({id:`${m}${e}`});return(0,t.jsx)(n.SortableContext,{items:p.map(e=>e.id),strategy:n.verticalListSortingStrategy,children:(0,t.jsx)(l.ScrollArea,{className:"kanban-scroll flex-1",children:(0,t.jsxs)("div",{className:(0,d.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",x&&"ring-primary/60 ring-2 ring-offset-2",o),"data-drop-state":x?"active":"inactive",ref:g,style:{minHeight:u},children:[0===p.length&&i,p.map((e,t)=>a(e,t))]})})})}function v({itemId:e,children:r,className:a}){let{attributes:s,listeners:l,setNodeRef:c,transform:u,transition:m,isDragging:h}=(0,n.useSortable)({id:e}),p={transform:i.CSS.Transform.toString(u),transition:m};return(0,t.jsx)(o.Card,{className:(0,d.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",h&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",a),"data-dragging":h?"":void 0,ref:c,style:p,...l,...s,children:r})}function b({data:e,columns:s,mapToKanbanItem:n,updateEntityStatus:i,renderCard:o,renderDragOverlay:l,calculateColumnMeta:d,onItemMove:c,entityName:u="items",emptyStateMessage:m,showTotals:h=!1,formatTotal:b}){let[y,w]=(0,r.useState)(()=>e.map(n)),j=d||((e,t)=>({count:t.filter(t=>t.columnId===e).length})),k=(0,r.useMemo)(()=>{let e={};return s.forEach(t=>{e[t.id]=j(t.id,y)}),e},[s,y,j]),P=(0,r.useMemo)(()=>s.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[s]),S=m||(e=>`No ${u} in ${e}`);return(0,t.jsx)(p,{className:"pb-4",columns:P,data:y,onDataChange:e=>{i?w(e.map(e=>({...e,entity:i(e.entity,e.columnId)}))):w(e)},onItemMove:c,renderDragOverlay:l||(e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:o(e)})),children:s.map(e=>{let r=k[e.id]??{count:0};return(0,t.jsxs)(g,{className:"min-h-[300px] flex-1",column:P.find(t=>t.id===e.id),children:[(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,t.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,t.jsxs)(a.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[r.count," ",u]}),h&&void 0!==r.total&&b&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:b(r.total)}),h&&void 0!==r.value&&b&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:b(r.value)})]})}),(0,t.jsx)(f,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,t.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:S(e.name)}),children:e=>(0,t.jsx)(v,{itemId:e.id,children:o(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>b],430876)},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},222121,750966,e=>{"use strict";e.i(116233),e.s([],222121);var t=e.i(904653),r=e.i(995403);function a({entityType:e,basePath:a}){let s=(0,t.useRouter)(),n={jobs:"job",invoices:"invoice",estimates:"estimate",payments:"payment",contracts:"contract",appointments:"appointment",equipment:"equipment","maintenance-plans":"maintenance plan","service-agreements":"service agreement","purchase-orders":"purchase order",properties:"property",customers:"customer"}[e]||e,i=a||`/dashboard/work/${e}`,o=async(e,t)=>{try{return await t(e),r.toast.success(`${e.length} ${n}s archived successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to archive ${n}s:`,e),r.toast.error(`Failed to archive ${n}s`),!1}};return{handleRowClick:e=>{s.push(`${i}/${e}`)},handleArchive:async(e,t)=>{try{return await t(e),r.toast.success(`${n} archived successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to archive ${n}:`,e),r.toast.error(`Failed to archive ${n}`),!1}},handleBulkArchive:o,handleRestore:async(e,t)=>{try{return await t(e),r.toast.success(`${n} restored successfully`),s.refresh(),!0}catch(e){return console.error(`Failed to restore ${n}:`,e),r.toast.error(`Failed to restore ${n}`),!1}},handleRefresh:()=>{s.refresh(),r.toast.success("Refreshed")},createSearchFilter:e=>(t,r)=>{let a=r.toLowerCase().trim();return!a||e.some(e=>{let r=t[e];return null!=r&&String(r).toLowerCase().includes(a)})},createBulkActions:e=>{let t=[];return e.archive&&t.push({label:"Archive Selected",onClick:t=>o(t,e.archive)}),e.export&&t.push({label:"Export Selected",onClick:async t=>{try{await e.export(t),r.toast.success(`Exported ${t.length} ${n}s`)}catch(e){r.toast.error("Failed to export")}}}),e.delete&&t.push({label:"Delete Selected",onClick:async t=>{try{await e.delete(t),r.toast.success(`Deleted ${t.length} ${n}s`),s.refresh()}catch(e){r.toast.error("Failed to delete")}}}),t},entityLabel:n}}e.s(["useTableActions",()=>a],750966)},502627,e=>{"use strict";var t=e.i(111043),r=e.i(550652),a=e.i(560149),s=e.i(136764),n=e.i(14435),i=e.i(176378),o=e.i(970799);e.i(889265);var l=e.i(677607),d=e.i(430876),c=e.i(51052);let u=[{id:"scheduled",name:"Scheduled",accentColor:"#2563EB"},{id:"confirmed",name:"Confirmed",accentColor:"#22C55E"},{id:"in_progress",name:"In Progress",accentColor:"#F97316"},{id:"completed",name:"Completed",accentColor:"#10B981"},{id:"cancelled",name:"Cancelled",accentColor:"#EF4444"},{id:"no_show",name:"No Show",accentColor:"#F59E0B"}],m=new Map(u.map(e=>[e.id,e.name])),h="scheduled",p=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),g=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}),x=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"});function f(e){if(!e)return"—";let t="string"==typeof e?new Date(e):e;return x.format(t)}function v({item:e}){let{appointment:o,columnId:d}=e,c=o.start_time?new Date(o.start_time):null,u=o.end_time?new Date(o.end_time):null;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)("h3",{className:"text-foreground text-sm leading-snug font-semibold",children:o.title})})}),o.description&&(0,t.jsx)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:o.description}),(0,t.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.User,{className:"text-primary size-4"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:o.customer?.display_name?o.customer.display_name:o.customer?.first_name||o.customer?.last_name?`${o.customer.first_name||""} ${o.customer.last_name||""}`.trim():"Unknown Customer"})]}),c&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.CalendarDays,{className:"text-primary size-4"}),(0,t.jsx)("span",{children:function(e){if(!e)return"—";let t="string"==typeof e?new Date(e):e;return p.format(t)}(c)})]}),c&&u&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Clock,{className:"text-primary size-4"}),(0,t.jsxs)("span",{children:[f(c)," - ",f(u)]})]}),o.assigned_user?.name&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.User,{className:"text-primary size-4"}),(0,t.jsx)("span",{children:o.assigned_user.name})]})]}),(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-[11px] tracking-wide",children:[(0,t.jsx)("span",{children:c&&g.format(c)}),(0,t.jsx)("span",{className:"uppercase",children:m.get(d)??d})]}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-1",children:(0,t.jsx)(l.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)(i.default,{href:`/dashboard/work/appointments/${o.id}`,children:["View",(0,t.jsx)(r.ArrowUpRight,{className:"size-3.5"})]})})})]})}function b({appointments:e}){let{toast:r}=(0,c.useToast)(),[a,s]=(0,o.useTransition)(),n=async({item:e,fromColumnId:t,toColumnId:a})=>{t!==a&&s(()=>{(async()=>{r.success(`Appointment moved to ${m.get(a)}`)})()})};return(0,t.jsx)(d.EntityKanban,{calculateColumnMeta:(e,t)=>({count:t.filter(t=>t.columnId===e).length}),columns:u,data:e,entityName:"appointments",mapToKanbanItem:e=>{var t;return{id:e.id,columnId:(t=e.status)&&m.has(t)?t:h,entity:e,appointment:e}},onItemMove:n,renderCard:e=>(0,t.jsx)(v,{item:{...e,appointment:e.entity}}),renderDragOverlay:e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-md border p-3 shadow-lg",children:(0,t.jsx)(v,{item:{...e,appointment:e.entity}})}),updateEntityStatus:(e,t)=>({...e,status:t})})}e.s(["AppointmentsKanban",()=>b])},185067,e=>{"use strict";var t=e.i(111043),r=e.i(904653),a=e.i(552038),s=(0,a.createServerReference)("4011aa566ca79fb24d9075e5c8afddde5f0ff63c2c",a.callServer,void 0,a.findSourceMapURL,"archiveAppointment"),n=e.i(946672),i=e.i(276389),o=e.i(664136),l=e.i(367571),d=e.i(38614),c=e.i(371526),u=e.i(176378),m=e.i(970799);e.i(222121);var h=e.i(473485);e.i(553153);var p=e.i(363712);e.i(889265);var g=e.i(677607);e.i(244242);var x=e.i(563078),f=e.i(527756),v=e.i(750966),b=e.i(635709),y=e.i(274220),w=e.i(152088);function j(e){if(!e)return"—";let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"}).format(t)}function k({appointments:e,itemsPerPage:a=50,onAppointmentClick:k,showRefresh:P=!1,totalCount:S,currentPage:N=1,initialSearchQuery:C=""}){(0,r.useRouter)();let D=(0,y.useArchiveStore)(e=>e.filters.appointments),{handleRefresh:I}=(0,v.useTableActions)({entityType:"appointments"}),{openArchiveDialog:A,ArchiveDialogComponent:M}=(0,h.useArchiveDialog)({onConfirm:async e=>{(await s(e)).success&&I()},title:"Archive Appointment?",description:"This appointment will be archived and can be restored within 90 days."}),[$,_]=(0,m.useState)(!1),[R,T]=(0,m.useState)(null),[F,E]=(0,m.useState)(new Set),{openArchiveDialog:z,ArchiveDialogComponent:U}=(0,h.useArchiveDialog)({onConfirm:async()=>{let e=0;for(let t of F)(await s(t)).success&&e++;e>0&&I()},title:`Archive ${F.size} Appointment(s)?`,description:`${F.size} appointment(s) will be archived and can be restored within 90 days.`}),O=e.filter(e=>{let t=!!(e.archived_at||e.deleted_at);return"active"===D?!t:"archived"!==D||t}),B=[{key:"title",header:"Title",width:"flex-1",render:e=>(0,t.jsxs)(u.default,{className:"block min-w-0",href:`/dashboard/work/appointments/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"truncate text-xs leading-tight font-medium hover:underline",children:e.title}),e.description&&(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:e.description})]})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.customer?.display_name?e.customer.display_name:e.customer?.first_name||e.customer?.last_name?`${e.customer.first_name||""} ${e.customer.last_name||""}`.trim():"Unknown Customer"})},{key:"start_time",header:"Date & Time",width:"w-40",shrink:!0,hideable:!1,render:e=>(0,t.jsxs)("div",{className:"text-muted-foreground text-xs tabular-nums",children:[(0,t.jsx)("div",{className:"leading-tight",children:function(e){if(!e)return"—";let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(t)}(e.start_time)}),(0,t.jsxs)("div",{className:"text-xs leading-tight",children:[j(e.start_time)," -"," ",j(e.end_time)]})]})},{key:"status",header:"Status",width:"w-32",shrink:!0,hideable:!1,render:e=>{var r;let a;return a=({scheduled:{className:"border-primary bg-primary text-primary-foreground hover:bg-primary/90 dark:border-primary dark:bg-primary dark:text-primary-foreground",label:"Scheduled"},confirmed:{className:"border-success bg-success text-white hover:bg-success/90 dark:border-success dark:bg-success dark:text-white",label:"Confirmed"},in_progress:{className:"border-primary/50 bg-primary text-white hover:bg-primary",label:"In Progress"},completed:{className:"border-success/50 bg-success text-white hover:bg-success",label:"Completed"},cancelled:{className:"border-destructive/50 bg-destructive text-white hover:bg-destructive",label:"Cancelled"},no_show:{className:"border-warning/50 bg-warning text-white hover:bg-warning",label:"No Show"}})[r=e.status]||{className:"border-border/50 bg-background text-muted-foreground",label:r},(0,t.jsx)(p.Badge,{className:(0,w.cn)("text-xs font-medium",a.className),variant:"outline",children:a.label})}},{key:"assigned_user",header:"Assigned To",width:"w-36",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.assigned_user?.name||"Unassigned"})},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)("div",{"data-no-row-click":!0,children:(0,t.jsxs)(x.DropdownMenu,{children:[(0,t.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(g.Button,{size:"icon",variant:"ghost",children:[(0,t.jsx)(d.MoreHorizontal,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,t.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(x.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(x.DropdownMenuSeparator,{}),(0,t.jsx)(x.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(u.default,{href:`/dashboard/work/appointments/${e.id}`,children:[(0,t.jsx)(l.Eye,{className:"mr-2 size-4"}),"View Details"]})}),(0,t.jsx)(x.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(u.default,{href:`/dashboard/work/appointments/${e.id}/edit`,children:[(0,t.jsx)(o.Edit,{className:"mr-2 size-4"}),"Edit Appointment"]})}),(0,t.jsx)(x.DropdownMenuSeparator,{}),(0,t.jsxs)(x.DropdownMenuItem,{className:"text-destructive",onClick:()=>{A(e.id)},children:[(0,t.jsx)(n.Archive,{className:"mr-2 size-4"}),"Archive Appointment"]})]})]})})}],K=[{label:"Archive Selected",icon:(0,t.jsx)(n.Archive,{className:"h-4 w-4"}),onClick:async e=>{E(e),z("")},variant:"destructive"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FullWidthDataTable,{...b.TablePresets.fullList({entity:"appointments",enableSelection:!0,searchPlaceholder:"Search appointments by title, description, or status...",itemsPerPage:a,showRefresh:P}),data:O,columns:B,getItemId:e=>e.id,bulkActions:K,onRowClick:e=>{k?k(e):window.location.href=`/dashboard/work/appointments/${e.id}`},totalCount:S,currentPageFromServer:N,initialSearchQuery:C,serverPagination:!0,serverSearch:!0,searchParamKey:"search",onRefresh:I,emptyMessage:"No appointments found",emptyIcon:(0,t.jsx)(i.Calendar,{className:"text-muted-foreground h-8 w-8"}),emptyAction:(0,t.jsxs)(g.Button,{onClick:()=>{window.location.href="/dashboard/work/appointments/new"},size:"sm",children:[(0,t.jsx)(c.Plus,{className:"mr-2 size-4"}),"Add Appointment"]}),isArchived:e=>!!(e.archived_at||e.deleted_at),showArchived:"active"!==D}),(0,t.jsx)(M,{}),(0,t.jsx)(U,{})]})}e.s(["AppointmentsTable",()=>k],185067)}]);