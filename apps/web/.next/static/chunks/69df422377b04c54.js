(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,954673,e=>{"use strict";var s=e.i(111043),a=e.i(970799),t=e.i(176378),l=e.i(230902),r=e.i(119470),i=e.i(495794),n=e.i(432286),c=e.i(936765),d=e.i(921127),o=e.i(84108);e.i(889265);var x=e.i(677607);e.i(847361);var m=e.i(949538);e.i(220474);var h=e.i(171056);e.i(868198);var u=e.i(798764);e.i(287133);var j=e.i(120109);e.i(539870);var p=e.i(846358);e.i(51478);var g=e.i(635613);e.i(149989);var v=e.i(880177);e.i(160973);var f=e.i(871124);e.i(769588);var y=e.i(1414),b=e.i(882896),N=e.i(45834),S=e.i(606661),w=e.i(218074),C=e.i(559586),k=e.i(641304),D=e.i(79254),T=e.i(154115),L=e.i(136764),F=e.i(995403),I=e.i(785535);let B=[{id:"csv",label:"CSV",icon:N.FileSpreadsheet,description:"Spreadsheet compatible"},{id:"excel",label:"Excel",icon:N.FileSpreadsheet,description:"Full formatting"},{id:"pdf",label:"PDF",icon:S.FileText,description:"Print-ready document"},{id:"png",label:"Image",icon:w.Image,description:"Chart screenshot"}];function R({reportType:e,reportTitle:t,days:l=90,trigger:r}){let[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)("download"),[o,m]=(0,a.useState)("csv"),[h,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)(""),[w,R]=(0,a.useState)(`${t} - ${new Date().toLocaleDateString()}`),[V,M]=(0,a.useState)(!0),[A,P]=(0,a.useState)(!1),[z,$]=(0,a.useState)("weekly"),O=async()=>{j(!0);try{if("download"===c)if("csv"===o){let s=await (0,I.exportReportToCSV)(e,l);if(!s.success||!s.data)return void F.toast.error(s.error||"Failed to export report");let a=new Blob([s.data],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=s.filename||`${e}-report.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),F.toast.success("Report downloaded successfully"),n(!1)}else if("pdf"===o)window.print(),F.toast.success("Print dialog opened - select 'Save as PDF'"),n(!1);else if("excel"===o){let s=await (0,I.exportReportToCSV)(e,l);if(!s.success||!s.data)return void F.toast.error(s.error||"Failed to export report");let a=new Blob([s.data],{type:"application/vnd.ms-excel;charset=utf-8;"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`${e}-report.xlsx`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),F.toast.success("Excel file downloaded"),n(!1)}else"png"===o&&F.toast.info("Chart image export coming soon");else{if(!N)return void F.toast.error("Please enter an email address");await new Promise(e=>setTimeout(e,1500)),A?F.toast.success(`Report scheduled for ${z} delivery to ${N}`):F.toast.success(`Report sent to ${N}`),n(!1)}}catch(e){console.error("Export error:",e),F.toast.error("Failed to export report")}finally{j(!1)}};return(0,s.jsxs)(p.Dialog,{open:i,onOpenChange:n,children:[(0,s.jsx)(p.DialogTrigger,{asChild:!0,children:r||(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(b.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,s.jsxs)(p.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(p.DialogHeader,{children:[(0,s.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Download,{className:"h-5 w-5"}),"Export Report"]}),(0,s.jsxs)(p.DialogDescription,{children:['Download or email "',t,'"']})]}),(0,s.jsxs)(f.Tabs,{value:c,onValueChange:e=>d(e),className:"mt-4",children:[(0,s.jsxs)(f.TabsList,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(f.TabsTrigger,{value:"download",className:"gap-2",children:[(0,s.jsx)(b.Download,{className:"h-4 w-4"}),"Download"]}),(0,s.jsxs)(f.TabsTrigger,{value:"email",className:"gap-2",children:[(0,s.jsx)(C.Mail,{className:"h-4 w-4"}),"Email"]})]}),(0,s.jsxs)(f.TabsContent,{value:"download",className:"space-y-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Select Format"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:B.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>m(e.id),className:`flex items-center gap-3 rounded-lg border-2 p-3 text-left transition-all ${o===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,s.jsx)("div",{className:`flex h-9 w-9 items-center justify-center rounded-md ${o===e.id?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,s.jsx)(e.icon,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]}),o===e.id&&(0,s.jsx)(D.Check,{className:"ml-auto h-4 w-4 text-primary"})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border bg-muted/30 p-3",children:[(0,s.jsx)(y.Checkbox,{id:"includeCharts",checked:V,onCheckedChange:e=>M(e)}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{htmlFor:"includeCharts",className:"cursor-pointer",children:"Include charts and visualizations"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visual elements to the export"})]})]})]}),(0,s.jsxs)(f.TabsContent,{value:"email",className:"space-y-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{htmlFor:"emailTo",children:"Send to"}),(0,s.jsx)(g.Input,{id:"emailTo",type:"email",placeholder:"email@example.com",value:N,onChange:e=>S(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Separate multiple emails with commas"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{htmlFor:"emailSubject",children:"Subject"}),(0,s.jsx)(g.Input,{id:"emailSubject",value:w,onChange:e=>R(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Format"}),(0,s.jsxs)(u.Select,{value:o,onValueChange:e=>m(e),children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"pdf",children:"PDF Document"}),(0,s.jsx)(u.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,s.jsx)(u.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 rounded-lg border p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.Checkbox,{id:"scheduleDelivery",checked:A,onCheckedChange:e=>P(e)}),(0,s.jsx)("div",{children:(0,s.jsxs)(v.Label,{htmlFor:"scheduleDelivery",className:"cursor-pointer flex items-center gap-2",children:[(0,s.jsx)(L.Clock,{className:"h-4 w-4"}),"Schedule recurring delivery"]})})]}),A&&(0,s.jsxs)("div",{className:"ml-6 mt-3 space-y-2",children:[(0,s.jsxs)(u.Select,{value:z,onValueChange:$,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"daily",children:"Daily"}),(0,s.jsx)(u.SelectItem,{value:"weekly",children:"Weekly (Mondays)"}),(0,s.jsx)(u.SelectItem,{value:"monthly",children:"Monthly (1st)"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Reports will be sent automatically at 8:00 AM"})]})]})]})]}),(0,s.jsxs)(p.DialogFooter,{className:"mt-4",children:[(0,s.jsx)(x.Button,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)(x.Button,{onClick:O,disabled:h,children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"email"===c?"Sending...":"Exporting..."]}):(0,s.jsx)(s.Fragment,{children:"email"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Send,{className:"mr-2 h-4 w-4"}),A?"Schedule":"Send"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Download,{className:"mr-2 h-4 w-4"}),"Download"]})})})]})]})]})}e.i(553153);var V=e.i(363712);e.i(223342);var M=e.i(395645),A=e.i(276389),P=e.i(371526),z=e.i(212409);let $=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],O=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"];function E({reportTitle:e,reportType:t,trigger:l,onScheduled:r}){let[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)("weekly"),[h,j]=(0,a.useState)(1),[f,y]=(0,a.useState)(1),[b,N]=(0,a.useState)("08:00"),[S,w]=(0,a.useState)("pdf"),[T,I]=(0,a.useState)(!0),[B,R]=(0,a.useState)([]),[E,U]=(0,a.useState)(""),[H,q]=(0,a.useState)(!0),W=()=>{E&&E.includes("@")?(B.includes(E)||R([...B,E]),U("")):F.toast.error("Please enter a valid email address")},Y=async()=>{if(0===B.length)return void F.toast.error("Please add at least one recipient");d(!0);try{await new Promise(e=>setTimeout(e,1e3));let e={frequency:o,dayOfWeek:"weekly"===o?h:void 0,dayOfMonth:"monthly"===o||"quarterly"===o?f:void 0,time:b,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,recipients:B,format:S,includeCharts:T,isActive:H};r?.(e),F.toast.success("Report schedule saved successfully"),n(!1)}catch(e){F.toast.error("Failed to save schedule")}finally{d(!1)}},Q=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};return(0,s.jsxs)(p.Dialog,{open:i,onOpenChange:n,children:[(0,s.jsx)(p.DialogTrigger,{asChild:!0,children:l||(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(A.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,s.jsxs)(p.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(p.DialogHeader,{children:[(0,s.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(A.Calendar,{className:"h-5 w-5"}),"Schedule Report"]}),(0,s.jsxs)(p.DialogDescription,{children:['Set up automatic delivery for "',e,'"']})]}),(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Delivery Frequency"}),(0,s.jsxs)(u.Select,{value:o,onValueChange:e=>m(e),children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"daily",children:"Daily"}),(0,s.jsx)(u.SelectItem,{value:"weekly",children:"Weekly"}),(0,s.jsx)(u.SelectItem,{value:"monthly",children:"Monthly"}),(0,s.jsx)(u.SelectItem,{value:"quarterly",children:"Quarterly"})]})]})]}),"weekly"===o&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Day of Week"}),(0,s.jsxs)(u.Select,{value:h.toString(),onValueChange:e=>j(parseInt(e)),children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:$.map(e=>(0,s.jsx)(u.SelectItem,{value:e.value.toString(),children:e.label},e.value))})]})]}),("monthly"===o||"quarterly"===o)&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Day of Month"}),(0,s.jsxs)(u.Select,{value:f.toString(),onValueChange:e=>y(parseInt(e)),children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:Array.from({length:28},(e,s)=>s+1).map(e=>(0,s.jsxs)(u.SelectItem,{value:e.toString(),children:[e,Q(e)]},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Delivery Time"}),(0,s.jsxs)(u.Select,{value:b,onValueChange:N,children:[(0,s.jsxs)(u.SelectTrigger,{children:[(0,s.jsx)(L.Clock,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(u.SelectValue,{})]}),(0,s.jsx)(u.SelectContent,{children:O.map(e=>(0,s.jsx)(u.SelectItem,{value:e,children:e},e))})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Times are in your local timezone (",Intl.DateTimeFormat().resolvedOptions().timeZone,")"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Recipients"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g.Input,{type:"email",placeholder:"email@example.com",value:E,onChange:e=>U(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),W())}),(0,s.jsx)(x.Button,{type:"button",variant:"outline",onClick:W,children:(0,s.jsx)(P.Plus,{className:"h-4 w-4"})})]}),B.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:B.map(e=>(0,s.jsxs)(V.Badge,{variant:"secondary",className:"gap-1 pr-1",children:[(0,s.jsx)(C.Mail,{className:"h-3 w-3"}),e,(0,s.jsx)("button",{type:"button",onClick:()=>{R(B.filter(s=>s!==e))},className:"ml-1 rounded-full hover:bg-muted p-0.5",children:(0,s.jsx)(z.X,{className:"h-3 w-3"})})]},e))})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(v.Label,{children:"Report Format"}),(0,s.jsxs)(u.Select,{value:S,onValueChange:e=>w(e),children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"pdf",children:"PDF Document"}),(0,s.jsx)(u.SelectItem,{value:"csv",children:"CSV Spreadsheet"}),(0,s.jsx)(u.SelectItem,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Include Charts"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add visualizations to the report"})]}),(0,s.jsx)(M.Switch,{checked:T,onCheckedChange:I})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Schedule Active"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable automatic delivery"})]}),(0,s.jsx)(M.Switch,{checked:H,onCheckedChange:q})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(D.Check,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{className:"font-medium",children:(()=>{let e="";switch(o){case"daily":e=`Daily at ${b}`;break;case"weekly":e=`Every ${$.find(e=>e.value===h)?.label} at ${b}`;break;case"monthly":e=`Monthly on the ${f}${Q(f)} at ${b}`;break;case"quarterly":e=`Quarterly on the ${f}${Q(f)} at ${b}`}return e})()})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["to ",B.length," recipient",1!==B.length?"s":""," as ",S.toUpperCase()]})]})]}),(0,s.jsxs)(p.DialogFooter,{children:[(0,s.jsx)(x.Button,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)(x.Button,{onClick:Y,disabled:c||0===B.length,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Check,{className:"mr-2 h-4 w-4"}),"Save Schedule"]})})]})]})]})}var U=e.i(230666),H=e.i(193434),H=H,q=e.i(927498),W=e.i(532727),Y=e.i(751139),Q=e.i(129932),_=e.i(697029);let G=[{id:"revenue",label:"Revenue"},{id:"jobs_completed",label:"Jobs Completed"},{id:"conversion_rate",label:"Conversion Rate"},{id:"customer_count",label:"Customer Count"},{id:"avg_ticket",label:"Average Ticket"},{id:"utilization",label:"Team Utilization"}],K=[{id:"above",label:"Goes above",icon:_.TrendingUp},{id:"below",label:"Falls below",icon:Q.TrendingDown},{id:"change",label:"Changes by",icon:Y.AlertTriangle}];function J({reportTitle:e,reportType:t,trigger:l,onSaved:r}){let[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)(!0),[h,j]=(0,a.useState)(!0),[f,y]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),[S,w]=(0,a.useState)("22:00"),[T,L]=(0,a.useState)("08:00"),[I,B]=(0,a.useState)([{id:"1",metric:"revenue",operator:"below",value:1e3,isActive:!0}]),R=(e,s)=>{B(I.map(a=>a.id===e?{...a,...s}:a))},V=async()=>{d(!0);try{await new Promise(e=>setTimeout(e,1e3)),r?.({alerts:I,channels:{inApp:o,email:h,sms:f},quietHours:{enabled:b,start:S,end:T}}),F.toast.success("Notification preferences saved"),n(!1)}catch(e){F.toast.error("Failed to save preferences")}finally{d(!1)}};return(0,s.jsxs)(p.Dialog,{open:i,onOpenChange:n,children:[(0,s.jsx)(p.DialogTrigger,{asChild:!0,children:l||(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(U.Bell,{className:"mr-2 h-4 w-4"}),"Notifications"]})}),(0,s.jsxs)(p.DialogContent,{className:"sm:max-w-5xl max-h-[85vh] overflow-y-auto",children:[(0,s.jsxs)(p.DialogHeader,{children:[(0,s.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(H.default,{className:"h-5 w-5"}),"Notification Preferences"]}),(0,s.jsxs)(p.DialogDescription,{children:['Get alerts when "',e,'" metrics hit certain thresholds']})]}),(0,s.jsx)("div",{className:"py-4",children:(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"text-base font-semibold",children:"Alert Conditions"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when metrics hit thresholds"})]}),(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>{B([...I,{id:Date.now().toString(),metric:"revenue",operator:"below",value:0,isActive:!0}])},children:[(0,s.jsx)(P.Plus,{className:"mr-1 h-3 w-3"}),"Add Alert"]})]}),(0,s.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:[I.map(e=>(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border bg-card p-3",children:[(0,s.jsx)(M.Switch,{checked:e.isActive,onCheckedChange:s=>R(e.id,{isActive:s})}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"When"}),(0,s.jsxs)(u.Select,{value:e.metric,onValueChange:s=>R(e.id,{metric:s}),children:[(0,s.jsx)(u.SelectTrigger,{className:"w-[140px] h-8",children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:G.map(e=>(0,s.jsx)(u.SelectItem,{value:e.id,children:e.label},e.id))})]}),(0,s.jsxs)(u.Select,{value:e.operator,onValueChange:s=>R(e.id,{operator:s}),children:[(0,s.jsx)(u.SelectTrigger,{className:"w-[130px] h-8",children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:K.map(e=>(0,s.jsx)(u.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e.icon,{className:"h-3 w-3"}),e.label]})},e.id))})]}),(0,s.jsx)(g.Input,{type:"number",value:e.value,onChange:s=>R(e.id,{value:parseFloat(s.target.value)||0}),className:"w-[100px] h-8"}),(0,s.jsx)(x.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive ml-auto",onClick:()=>{var s;return s=e.id,void B(I.filter(e=>e.id!==s))},children:(0,s.jsx)(W.Trash2,{className:"h-4 w-4"})})]},e.id)),0===I.length&&(0,s.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,s.jsx)(Y.AlertTriangle,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"No alerts configured"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Add Alert" to create your first alert condition'})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium mb-2",children:"Example alerts:"}),(0,s.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"â€¢ Revenue falls below $10,000"}),(0,s.jsx)("li",{children:"â€¢ Jobs completed goes above 50"}),(0,s.jsx)("li",{children:"â€¢ Conversion rate changes by 10%"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"text-base font-semibold",children:"Notification Channels"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose how you want to be notified"})]}),(0,s.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10",children:(0,s.jsx)(U.Bell,{className:"h-5 w-5 text-blue-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"font-medium",children:"In-App Notifications"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show in notification center"})]})]}),(0,s.jsx)(M.Switch,{checked:o,onCheckedChange:m})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:(0,s.jsx)(C.Mail,{className:"h-5 w-5 text-green-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"font-medium",children:"Email Alerts"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Send to your registered email"})]})]}),(0,s.jsx)(M.Switch,{checked:h,onCheckedChange:j})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-500/10",children:(0,s.jsx)(q.Smartphone,{className:"h-5 w-5 text-purple-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"font-medium",children:"SMS Alerts"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Text message for urgent alerts"})]})]}),(0,s.jsx)(M.Switch,{checked:f,onCheckedChange:y})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{className:"text-base font-semibold",children:"Quiet Hours"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pause notifications during specific times"})]}),(0,s.jsx)(M.Switch,{checked:b,onCheckedChange:N})]}),b&&(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(v.Label,{className:"text-xs text-muted-foreground",children:"Start Time"}),(0,s.jsxs)(u.Select,{value:S,onValueChange:w,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:Array.from({length:24},(e,a)=>{let t=a.toString().padStart(2,"0");return(0,s.jsxs)(u.SelectItem,{value:`${t}:00`,children:[t,":00"]},t)})})]})]}),(0,s.jsx)("div",{className:"pt-6",children:(0,s.jsx)("span",{className:"text-muted-foreground",children:"â†’"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(v.Label,{className:"text-xs text-muted-foreground",children:"End Time"}),(0,s.jsxs)(u.Select,{value:T,onValueChange:L,children:[(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{})}),(0,s.jsx)(u.SelectContent,{children:Array.from({length:24},(e,a)=>{let t=a.toString().padStart(2,"0");return(0,s.jsxs)(u.SelectItem,{value:`${t}:00`,children:[t,":00"]},t)})})]})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Notifications will be queued and delivered when quiet hours end"})]})]})]})]})}),(0,s.jsxs)(p.DialogFooter,{children:[(0,s.jsx)(x.Button,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)(x.Button,{onClick:V,disabled:c,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Check,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})})]})]})]})}var Z=e.i(956062),X=e.i(160424),ee=e.i(512710),es=e.i(24079),ea=e.i(152088);let et=[{label:"Today",value:"today",days:0},{label:"Yesterday",value:"yesterday",days:1},{label:"Last 7 days",value:"7d",days:7},{label:"Last 14 days",value:"14d",days:14},{label:"Last 30 days",value:"30d",days:30},{label:"Last 90 days",value:"90d",days:90},{label:"Last 12 months",value:"12m",days:365},{label:"Month to date",value:"mtd",days:-1},{label:"Year to date",value:"ytd",days:-2},{label:"Last year",value:"ly",days:-3}],el=[{label:"7D",value:"7d",days:7},{label:"30D",value:"30d",days:30},{label:"90D",value:"90d",days:90},{label:"1Y",value:"12m",days:365}];function er(e){let s=new Date;switch(s.setHours(23,59,59,999),e){case"today":let a=new Date;return a.setHours(0,0,0,0),{from:a,to:s};case"yesterday":let t=(0,r.subDays)(s,1);t.setHours(0,0,0,0);let l=(0,r.subDays)(s,1);return l.setHours(23,59,59,999),{from:t,to:l};case"7d":return{from:(0,r.subDays)(s,7),to:s};case"14d":return{from:(0,r.subDays)(s,14),to:s};case"30d":default:return{from:(0,r.subDays)(s,30),to:s};case"90d":return{from:(0,r.subDays)(s,90),to:s};case"12m":return{from:(0,r.subDays)(s,365),to:s};case"mtd":return{from:(0,n.startOfMonth)(s),to:s};case"ytd":return{from:(0,d.startOfYear)(s),to:s};case"ly":var x;return{from:(0,d.startOfYear)((0,o.addYears)(s,-1,void 0)),to:(0,c.endOfMonth)((x=(0,d.startOfYear)(s),(0,i.addMonths)(x,-1,void 0)))}}}function ei({onDateChange:e,onRefresh:r,showRefresh:i=!0}){let[n,c]=(0,a.useState)("30d"),[d,o]=(0,a.useState)(()=>er("30d")),[p,g]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1),y=(0,a.useCallback)(s=>{c(s),f(!1);let a=er(s);o(a),e?.(a)},[e]),N=(0,a.useCallback)(s=>{s&&(o(s),f(!0),c("custom"),e?.(s))},[e]),S=(0,a.useCallback)(e=>{y(e)},[y]),w=d?.from?d.to?(0,s.jsxs)(s.Fragment,{children:[(0,l.format)(d.from,"MMM d, yyyy")," - ",(0,l.format)(d.to,"MMM d, yyyy")]}):(0,l.format)(d.from,"MMM d, yyyy"):"Select date range",C=v?"Custom":et.find(e=>e.value===n)?.label||"Last 30 days";return(0,s.jsxs)("div",{className:"flex flex-col gap-4 border-b bg-background px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(es.SidebarTrigger,{className:"-ml-1"}),(0,s.jsx)(j.Separator,{orientation:"vertical",className:"h-6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Business Intelligence"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Real-time analytics and insights for your business"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,s.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:r,title:"Refresh data",children:(0,s.jsx)(X.RefreshCw,{className:"h-4 w-4"})}),(0,s.jsx)(J,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,s.jsx)(x.Button,{variant:"ghost",size:"icon",title:"Notification preferences",children:(0,s.jsx)(U.Bell,{className:"h-4 w-4"})})}),(0,s.jsx)(j.Separator,{orientation:"vertical",className:"h-6"}),(0,s.jsx)(E,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(A.Calendar,{className:"mr-2 h-4 w-4"}),"Schedule"]})}),(0,s.jsx)(R,{reportType:"financial",reportTitle:"Business Intelligence",trigger:(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(b.Download,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,s.jsx)(x.Button,{size:"sm",asChild:!0,children:(0,s.jsxs)(t.default,{href:"/dashboard/reporting/builder",children:[(0,s.jsx)(P.Plus,{className:"mr-2 h-4 w-4"}),"Custom Report Builder"]})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:el.map(e=>(0,s.jsx)(x.Button,{variant:n!==e.value||v?"ghost":"secondary",size:"sm",className:(0,ea.cn)("h-7 px-3 text-xs font-medium",n===e.value&&!v&&"bg-background shadow-sm"),onClick:()=>S(e.value),children:e.label},e.value))}),(0,s.jsx)(j.Separator,{orientation:"vertical",className:"h-6"}),(0,s.jsxs)(u.Select,{value:n,onValueChange:y,children:[(0,s.jsxs)(u.SelectTrigger,{className:"h-8 w-[140px] text-xs",children:[(0,s.jsx)(L.Clock,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)(u.SelectValue,{placeholder:"Select range"})]}),(0,s.jsx)(u.SelectContent,{children:et.map(e=>(0,s.jsx)(u.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)(h.Popover,{open:p,onOpenChange:g,children:[(0,s.jsx)(h.PopoverTrigger,{asChild:!0,children:(0,s.jsxs)(x.Button,{variant:"outline",size:"sm",className:(0,ea.cn)("h-8 justify-start text-left font-normal",!d&&"text-muted-foreground",v&&"border-primary"),children:[(0,s.jsx)(Z.CalendarIcon,{className:"mr-2 h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"text-xs",children:w}),(0,s.jsx)(ee.ChevronDown,{className:"ml-2 h-3.5 w-3.5 opacity-50"})]})}),(0,s.jsx)(h.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"w-[130px] border-r p-2 space-y-0.5",children:[(0,s.jsx)("p",{className:"px-2 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wide",children:"Quick Select"}),et.map(e=>(0,s.jsx)(x.Button,{variant:n!==e.value||v?"ghost":"secondary",size:"sm",className:"w-full justify-start text-xs h-7 px-2",onClick:()=>{y(e.value),g(!1)},children:e.label},e.value))]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)(m.Calendar,{mode:"range",defaultMonth:d?.from,selected:d,onSelect:N,numberOfMonths:2}),(0,s.jsxs)("div",{className:"mt-3 flex items-center justify-between border-t pt-3",children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:d?.from&&d?.to&&(0,s.jsxs)(s.Fragment,{children:[Math.ceil((d.to.getTime()-d.from.getTime())/864e5)," days selected"]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>{y("30d"),g(!1)},children:"Reset"}),(0,s.jsx)(x.Button,{size:"sm",onClick:()=>g(!1),children:"Apply"})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:"Showing:"}),(0,s.jsx)("span",{className:"font-medium text-foreground",children:C})]})]})]})}function en({children:e}){let[t,l]=(0,a.useState)(),[r,i]=(0,a.useState)(0),n=(0,a.useCallback)(e=>{l(e)},[]),c=(0,a.useCallback)(()=>{i(e=>e+1)},[]);return(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsx)(ei,{onDateChange:n,onRefresh:c,showRefresh:!0}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:e})]},r)}e.s(["ReportingPageWrapper",()=>en],954673)}]);