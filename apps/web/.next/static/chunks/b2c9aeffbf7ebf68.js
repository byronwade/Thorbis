(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,235670,e=>{"use strict";e.i(116233),e.s([])},221999,e=>{"use strict";let r=(0,e.i(383206).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["default",()=>r])},560149,e=>{"use strict";var r=e.i(221999);e.s(["CalendarDays",()=>r.default])},686804,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>r])},550652,e=>{"use strict";var r=e.i(686804);e.s(["ArrowUpRight",()=>r.default])},926991,e=>{"use strict";let r=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>r])},51866,e=>{"use strict";var r=e.i(926991);e.s(["ChevronLeft",()=>r.default])},172506,e=>{"use strict";var r=e.i(306929);e.s(["ArrowDown",()=>r.default])},698684,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>r])},407205,e=>{"use strict";var r=e.i(698684);e.s(["ArrowUp",()=>r.default])},306929,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>r])},573951,e=>{"use strict";let r=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>r])},287156,e=>{"use strict";var r=e.i(111043),t=e.i(970799),a=e.i(151213);function l({section:e,table:l,kanban:s,fallback:n=null,forceView:d}){let i=(0,a.useWorkView)(e),o=(0,a.useSetWorkView)(e),c=d??i;return((0,t.useEffect)(()=>{d&&i!==d&&o(d)},[d]),"kanban"===c)?(0,r.jsx)(r.Fragment,{children:s??n}):(0,r.jsx)(r.Fragment,{children:l??n})}e.s(["WorkDataView",()=>l])},430876,e=>{"use strict";var r=e.i(111043),t=e.i(970799);e.i(116233);var a=e.i(363712),l=e.i(999),s=e.i(691225),n=e.i(913532),d=e.i(605278),i=e.i(375308),o=e.i(989239);let c=(0,t.createContext)(null),u=(0,t.createContext)(null),b="kanban-column-";function g(e,r,t){let a=Object.fromEntries(e.map(e=>[e.id,[]]));return r.reduce((e,r)=>{let a=t(r);return e[a]||(e[a]=[]),e[a]=[...e[a],r],e},a)}function m({columns:e,data:a,onDataChange:n,onItemMove:i,getColumnId:u,children:m,className:h,pointerSensorOptions:x,renderDragOverlay:p}){let f=(0,t.useCallback)(u??(e=>e.columnId),[]),[v,k]=(0,t.useState)(()=>g(e,a,f)),[y,w]=(0,t.useState)(null),j=(0,t.useRef)(e);(0,t.useEffect)(()=>{j.current=e},[e]),(0,t.useEffect)(()=>{k(g(e,a,f))},[e,a,f]);let N=(0,l.useSensors)((0,l.useSensor)(l.PointerSensor,{activationConstraint:{distance:6},...x}),(0,l.useSensor)(l.KeyboardSensor,{coordinateGetter:s.sortableKeyboardCoordinates})),C=(0,t.useCallback)(e=>{for(let r of j.current){let t=v[r.id]??[],a=t.findIndex(r=>r.id===e);if(-1!==a)return{columnId:r.id,item:t[a],index:a}}return null},[v]),S=(0,t.useCallback)(e=>{let r=C(e.active.id);r&&w({item:r.item,columnId:r.columnId})},[C]),D=(0,t.useCallback)(e=>{var r;let{active:t,over:a}=e;if(w(null),!a)return;let l=C(t.id);if(!l)return;let s=null,d=null;if("string"==typeof a.id&&a.id.startsWith(b))d=(v[s=a.id.replace(b,"")]??[]).length;else{let e=C(a.id);e&&(s=e.columnId,d=(v[e.columnId]??[]).findIndex(r=>r.id===e.item.id))}if(null===s||null===d||s===l.columnId&&d===l.index)return;let o=Object.fromEntries(Object.entries(v).map(([e,r])=>[e,r.slice()])),c=o[l.columnId]??[],[u]=c.splice(l.index,1);o[l.columnId]=c;let g=o[s]??[],m=l.columnId===s&&l.index<d?d-1:d,h={...u,columnId:s};g.splice(m,0,h),o[s]=g,k(o);let x=(r=j.current,r.flatMap(e=>o[e.id]??[]));n?.(x),i&&i({item:h,fromColumnId:l.columnId,toColumnId:s,toIndex:m})},[C,v,n,i]),A=(0,t.useMemo)(()=>({columns:e,getItems:e=>v[e]??[],findItem:C,activeItem:y}),[e,v,C,y]);return(0,r.jsx)(c.Provider,{value:A,children:(0,r.jsxs)(l.DndContext,{collisionDetection:l.closestCorners,onDragCancel:()=>w(null),onDragEnd:D,onDragStart:S,sensors:N,children:[(0,r.jsx)("div",{className:(0,o.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",h),children:m}),(0,r.jsx)(l.DragOverlay,{children:y?p?p(y.item):(0,r.jsx)(d.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:String(y.item.id)})}):null})]})})}function h({column:e,children:t,className:a}){return(0,r.jsx)(u.Provider,{value:e,children:(0,r.jsx)("section",{"aria-label":`${e.name} column`,className:(0,o.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",a),children:t})})}function x({children:e,className:t}){return(0,r.jsx)("header",{className:(0,o.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",t),children:e})}function p({columnId:e,children:a,emptyState:n,className:d,height:u="28rem"}){let{getItems:g}=function(){let e=(0,t.useContext)(c);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),m=g(e),{setNodeRef:h,isOver:x}=(0,l.useDroppable)({id:`${b}${e}`});return(0,r.jsx)(s.SortableContext,{items:m.map(e=>e.id),strategy:s.verticalListSortingStrategy,children:(0,r.jsx)(i.ScrollArea,{className:"kanban-scroll flex-1",children:(0,r.jsxs)("div",{className:(0,o.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",x&&"ring-primary/60 ring-2 ring-offset-2",d),"data-drop-state":x?"active":"inactive",ref:h,style:{minHeight:u},children:[0===m.length&&n,m.map((e,r)=>a(e,r))]})})})}function f({itemId:e,children:t,className:a}){let{attributes:l,listeners:i,setNodeRef:c,transform:u,transition:b,isDragging:g}=(0,s.useSortable)({id:e}),m={transform:n.CSS.Transform.toString(u),transition:b};return(0,r.jsx)(d.Card,{className:(0,o.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",g&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",a),"data-dragging":g?"":void 0,ref:c,style:m,...i,...l,children:t})}function v({data:e,columns:l,mapToKanbanItem:s,updateEntityStatus:n,renderCard:d,renderDragOverlay:i,calculateColumnMeta:o,onItemMove:c,entityName:u="items",emptyStateMessage:b,showTotals:g=!1,formatTotal:v}){let[k,y]=(0,t.useState)(()=>e.map(s)),w=o||((e,r)=>({count:r.filter(r=>r.columnId===e).length})),j=(0,t.useMemo)(()=>{let e={};return l.forEach(r=>{e[r.id]=w(r.id,k)}),e},[l,k,w]),N=(0,t.useMemo)(()=>l.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[l]),C=b||(e=>`No ${u} in ${e}`);return(0,r.jsx)(m,{className:"pb-4",columns:N,data:k,onDataChange:e=>{n?y(e.map(e=>({...e,entity:n(e.entity,e.columnId)}))):y(e)},onItemMove:c,renderDragOverlay:i||(e=>(0,r.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:d(e)})),children:l.map(e=>{let t=j[e.id]??{count:0};return(0,r.jsxs)(h,{className:"min-h-[300px] flex-1",column:N.find(r=>r.id===e.id),children:[(0,r.jsx)(x,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,r.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,r.jsxs)(a.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[t.count," ",u]}),g&&void 0!==t.total&&v&&(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:v(t.total)}),g&&void 0!==t.value&&v&&(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:v(t.value)})]})}),(0,r.jsx)(p,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,r.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:C(e.name)}),children:e=>(0,r.jsx)(f,{itemId:e.id,children:d(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>v],430876)},923225,e=>{"use strict";let r=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>r])},630754,e=>{"use strict";var r=e.i(923225);e.s(["CheckCircle",()=>r.default])},321561,e=>{"use strict";let r=(0,e.i(383206).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["default",()=>r])},794712,e=>{"use strict";var r=e.i(111043);e.i(116233);var t=e.i(363712),a=e.i(989239),l=e.i(818796),s=e.i(276389),n=e.i(630754),d=e.i(136764),i=e.i(606661),o=e.i(321561),o=o,c=e.i(559586),u=e.i(900007);function b(e){return({quoted:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Quoted",icon:i.FileText,ariaLabel:"Job status: Quoted"},scheduled:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Scheduled",icon:s.Calendar,ariaLabel:"Job status: Scheduled"},in_progress:{className:"border-blue-500/50 bg-blue-500 text-white hover:bg-blue-600",label:"In Progress",icon:o.default,ariaLabel:"Job status: In Progress"},completed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Completed",icon:n.CheckCircle,ariaLabel:"Job status: Completed"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled",icon:u.XCircle,ariaLabel:"Job status: Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}function g({status:e,type:s,priority:o,contractType:u,className:g,variant:m="outline"}){let h,x=(h=u?({service:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Service"},maintenance:{className:"border-green-200/50 bg-green-50/50 text-green-700 dark:border-green-900/50 dark:bg-green-950/30 dark:text-green-400",label:"Maintenance"},custom:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Custom"}})[u]||{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:u.replace(/_/g," ")}:o?({low:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Low"},medium:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Medium"},high:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"High"},urgent:{className:"border-red-200/50 bg-red-50/50 text-red-700 dark:border-red-900/50 dark:bg-red-950/30 dark:text-red-400",label:"Urgent"}})[o]||{className:"border-border/50 bg-background text-muted-foreground",label:o.replace(/_/g," ")}:"purchase_order"===s?({draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},pending:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Pending"},approved:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Approved"},partially_received:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Partially Received"},received:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Received"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}:s?function(e,r){switch(r){case"job":return b(e);case"invoice":return({paid:{className:"border-green-500/30 bg-green-500 text-white hover:bg-green-600 shadow-sm",label:"Paid",icon:n.CheckCircle,ariaLabel:"Invoice status: Paid"},unpaid:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400 shadow-sm",label:"Unpaid",icon:d.Clock,ariaLabel:"Invoice status: Unpaid"},overdue:{className:"border-red-500/30 bg-red-500 text-white hover:bg-red-600 shadow-sm ring-1 ring-red-500/20",label:"Overdue",icon:l.AlertCircle,ariaLabel:"Invoice status: Overdue - requires immediate attention"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50 shadow-sm",label:"Draft",icon:i.FileText,ariaLabel:"Invoice status: Draft"},sent:{className:"border-blue-200/50 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400 shadow-sm",label:"Sent",icon:c.Mail,ariaLabel:"Invoice status: Sent"},pending:{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 shadow-sm",label:"Pending",icon:d.Clock,ariaLabel:"Invoice status: Pending"}})[e]||{className:"border-border/50 bg-background text-muted-foreground shadow-sm",label:e.replace(/_/g," ")};case"estimate":return({accepted:{className:"bg-green-500 hover:bg-green-600 text-white",label:"Accepted"},sent:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Sent"},draft:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Draft"},declined:{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",label:"Declined"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};case"contract":return({signed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Signed"},sent:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Sent"},viewed:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Viewed"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},rejected:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Rejected"},expired:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"Expired"}})[e]||{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:e.replace(/_/g," ")};case"customer":return({active:{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",label:"Active"},inactive:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Inactive"},prospect:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Prospect"},lead:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Lead"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};default:return{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}}(e,s):b(e)).icon;return(0,r.jsxs)(t.Badge,{className:(0,a.cn)("inline-flex items-center gap-1 px-2 py-0.5 text-[11px] font-medium transition-all duration-200",h.className,g),variant:m,"aria-label":h.ariaLabel||h.label,children:[x&&(0,r.jsx)(x,{className:"h-3 w-3","aria-hidden":"true"}),h.label]})}function m({status:e,className:t}){return(0,r.jsx)(g,{className:t,status:e,type:"job"})}function h({status:e,className:t}){return(0,r.jsx)(g,{className:t,status:e,type:"invoice"})}function x({status:e,className:t}){return(0,r.jsx)(g,{className:t,status:e,type:"estimate"})}function p({status:e,className:t}){return(0,r.jsx)(g,{className:t,status:e,type:"contract"})}function f({status:e,className:t}){return(0,r.jsx)(g,{className:t,status:e,type:"customer"})}function v({priority:e,className:t}){return(0,r.jsx)(g,{className:t,priority:e,status:""})}function k({type:e,className:t}){return(0,r.jsx)(g,{className:t,contractType:e,status:""})}e.s(["ContractStatusBadge",()=>p,"ContractTypeBadge",()=>k,"CustomerStatusBadge",()=>f,"EstimateStatusBadge",()=>x,"InvoiceStatusBadge",()=>h,"JobStatusBadge",()=>m,"PriorityBadge",()=>v,"StatusBadge",()=>g],794712)},85480,e=>{"use strict";var r=e.i(111043),t=e.i(550652),a=e.i(560149),l=e.i(202724),s=e.i(176378);e.i(553153);var n=e.i(363712);e.i(889265);var d=e.i(677607),i=e.i(430876),o=e.i(152088);let c=[{id:"draft",name:"Draft",accentColor:"#6B7280"},{id:"sent",name:"Sent",accentColor:"#2563EB"},{id:"viewed",name:"Viewed",accentColor:"#9333EA"},{id:"signed",name:"Signed",accentColor:"#22C55E"},{id:"rejected",name:"Rejected",accentColor:"#EF4444"},{id:"expired",name:"Expired",accentColor:"#F97316"}],u=new Map(c.map(e=>[e.id,e.name]));function b({contracts:e}){return(0,r.jsx)(i.EntityKanban,{columns:c,data:e,entityName:"contracts",mapToKanbanItem:e=>({id:e.id,columnId:e.status,entity:e,contract:e}),renderCard:e=>(0,r.jsx)(g,{item:{...e,contract:e.entity}}),renderDragOverlay:e=>(0,r.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,r.jsx)(g,{item:{...e,contract:e.entity}})}),updateEntityStatus:(e,r)=>({...e,status:r})})}function g({item:e}){let{contract:i,columnId:c}=e;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:i.contractNumber}),(0,r.jsx)("h3",{className:"text-foreground text-sm leading-snug font-semibold",children:i.title}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)(n.Badge,{className:(0,o.cn)("text-xs","rejected"===c&&"bg-destructive/10 text-destructive","signed"===c&&"bg-primary/10 text-primary"),variant:"signed"===c?"secondary":"rejected"===c?"destructive":"outline",children:u.get(c)??c}),(0,r.jsx)(n.Badge,{className:"text-xs",variant:"outline",children:i.contractType})]})]})}),(0,r.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Users,{className:"text-primary size-4"}),(0,r.jsx)("span",{className:"text-foreground font-medium",children:i.customer})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(a.CalendarDays,{className:"text-primary size-4"}),(0,r.jsxs)("span",{children:[i.date," â†’ ",i.validUntil]})]}),(0,r.jsxs)("p",{children:["Signer:"," ",(0,r.jsx)("span",{className:"text-foreground font-medium",children:i.signerName??"Unassigned"})]})]}),(0,r.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-xs",children:[(0,r.jsxs)("span",{children:["Status: ",u.get(c)]}),(0,r.jsx)(d.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,r.jsxs)(s.default,{href:`/dashboard/work/contracts/${i.id}`,children:["View",(0,r.jsx)(t.ArrowUpRight,{className:"size-3.5"})]})})]})]})}e.s(["ContractsKanban",()=>b])},215722,e=>{"use strict";var r=e.i(111043),t=e.i(946672),a=e.i(882896),l=e.i(367571),s=e.i(695877),n=e.i(38614),d=e.i(371526),i=e.i(154115),o=e.i(176378),c=e.i(970799);e.i(235670);var u=e.i(360648);e.i(889265);var b=e.i(677607);e.i(244242);var g=e.i(563078),m=e.i(527756),h=e.i(794712),x=e.i(552038),p=(0,x.createServerReference)("40801de9f07a4e8d8a8588c620f484e4e252c231ca",x.callServer,void 0,x.findSourceMapURL,"archiveContract"),f=e.i(274220),v=e.i(995403);function k({contracts:e,itemsPerPage:x=50,currentPage:k=1,totalCount:y}){let w=(0,f.useArchiveStore)(e=>e.filters.contracts),[j,N]=(0,c.useState)(!1),[C,S]=(0,c.useState)(!1),[D,A]=(0,c.useState)(null),[M,I]=(0,c.useState)(new Set),L=e.filter(e=>{let r=!!(e.archived_at||e.deleted_at);return"active"===w?!r:"archived"!==w||r}),T=[{key:"contractNumber",header:"Contract #",width:"w-36",shrink:!0,sortable:!0,hideable:!1,render:e=>(0,r.jsx)(o.default,{className:"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline",href:`/dashboard/work/contracts/${e.id}`,onClick:e=>e.stopPropagation(),children:e.contractNumber})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,sortable:!0,hideable:!1,render:e=>(0,r.jsx)("div",{className:"min-w-0",children:(0,r.jsx)("div",{className:"truncate leading-tight font-medium",children:e.customer})})},{key:"title",header:"Title",width:"flex-1",sortable:!0,hideable:!1,render:e=>(0,r.jsx)(o.default,{className:"block min-w-0",href:`/dashboard/work/contracts/${e.id}`,onClick:e=>e.stopPropagation(),children:(0,r.jsx)("div",{className:"truncate text-sm leading-tight font-medium hover:underline",children:e.title})})},{key:"contractType",header:"Type",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:e=>(0,r.jsx)(h.ContractTypeBadge,{type:e.contractType})},{key:"signerName",header:"Signer",width:"w-40",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:e=>(0,r.jsx)("span",{className:"text-muted-foreground text-sm leading-tight",children:e.signerName||(0,r.jsx)("span",{className:"text-muted-foreground",children:"Not assigned"})})},{key:"date",header:"Created",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:e=>(0,r.jsx)("span",{className:"text-muted-foreground text-sm leading-tight tabular-nums",children:e.date})},{key:"validUntil",header:"Valid Until",width:"w-32",shrink:!0,hideOnMobile:!0,sortable:!0,hideable:!0,render:e=>(0,r.jsx)("span",{className:"text-muted-foreground text-sm leading-tight tabular-nums",children:e.validUntil})},{key:"status",header:"Status",width:"w-28",shrink:!0,sortable:!0,hideable:!1,render:e=>(0,r.jsx)(h.ContractStatusBadge,{status:e.status})},{key:"actions",header:"",width:"w-10",shrink:!0,sortable:!1,hideable:!1,render:e=>(0,r.jsx)("div",{"data-no-row-click":!0,children:(0,r.jsxs)(g.DropdownMenu,{children:[(0,r.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsx)(b.Button,{size:"icon",variant:"ghost",children:(0,r.jsx)(n.MoreHorizontal,{className:"size-4"})})}),(0,r.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,r.jsx)(g.DropdownMenuLabel,{children:"Actions"}),(0,r.jsx)(g.DropdownMenuSeparator,{}),(0,r.jsxs)(g.DropdownMenuItem,{children:[(0,r.jsx)(l.Eye,{className:"mr-2 size-4"}),"View Contract"]}),"draft"===e.status&&(0,r.jsxs)(g.DropdownMenuItem,{children:[(0,r.jsx)(i.Send,{className:"mr-2 size-4"}),"Send for Signature"]}),(0,r.jsxs)(g.DropdownMenuItem,{children:[(0,r.jsx)(a.Download,{className:"mr-2 size-4"}),"Download PDF"]}),(0,r.jsx)(g.DropdownMenuSeparator,{}),(0,r.jsxs)(g.DropdownMenuItem,{className:"text-destructive",onClick:()=>{A(e.id),N(!0)},children:[(0,r.jsx)(t.Archive,{className:"mr-2 size-4"}),"Archive Contract"]})]})]})})}],P=[{label:"Send",icon:(0,r.jsx)(i.Send,{className:"h-4 w-4"}),onClick:e=>{v.toast.info(`Send functionality for ${e.size} contract${e.size>1?"s":""} coming soon`)}},{label:"Export",icon:(0,r.jsx)(a.Download,{className:"h-4 w-4"}),onClick:r=>{let t=new Blob([["Contract #,Customer,Title,Type,Signer,Created,Valid Until,Status",...e.filter(e=>r.has(e.id)).map(e=>[e.contractNumber,`"${e.customer}"`,`"${e.title}"`,e.contractType,e.signerName||"",e.date,e.validUntil,e.status].join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=`contracts-export-${new Date().toISOString().split("T")[0]}.csv`,l.click(),URL.revokeObjectURL(a),v.toast.success(`Exported ${r.size} contract${r.size>1?"s":""}`)}},{label:"Archive Selected",icon:(0,r.jsx)(t.Archive,{className:"h-4 w-4"}),onClick:async e=>{I(e),S(!0)},variant:"destructive"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.FullWidthDataTable,{bulkActions:P,columns:T,data:L,emptyAction:(0,r.jsxs)(b.Button,{onClick:()=>window.location.href="/dashboard/work/contracts/new",size:"sm",children:[(0,r.jsx)(d.Plus,{className:"mr-2 size-4"}),"Create Contract"]}),emptyIcon:(0,r.jsx)(s.FileSignature,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No contracts found",enableSelection:!0,entity:"contracts",getHighlightClass:()=>"bg-success/30 dark:bg-success/10",getItemId:e=>e.id,isArchived:e=>!!(e.archived_at||e.deleted_at),isHighlighted:e=>"signed"===e.status,itemsPerPage:x,currentPageFromServer:k,serverPagination:!0,onRefresh:()=>window.location.reload(),onRowClick:e=>window.location.href=`/dashboard/work/contracts/${e.id}`,searchFilter:(e,r)=>{let t=r.toLowerCase();return e.contractNumber.toLowerCase().includes(t)||e.customer.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||e.contractType.toLowerCase().includes(t)||(e.signerName?.toLowerCase().includes(t)??!1)},searchPlaceholder:"Search contracts by number, customer, title, or status...",showArchived:"active"!==w,showRefresh:!1,totalCount:y??L.length}),(0,r.jsx)(u.AlertDialog,{onOpenChange:N,open:j,children:(0,r.jsxs)(u.AlertDialogContent,{children:[(0,r.jsxs)(u.AlertDialogHeader,{children:[(0,r.jsx)(u.AlertDialogTitle,{children:"Archive Contract?"}),(0,r.jsx)(u.AlertDialogDescription,{children:"This contract will be archived and can be restored within 90 days. After 90 days, it will be permanently deleted."})]}),(0,r.jsxs)(u.AlertDialogFooter,{children:[(0,r.jsx)(u.AlertDialogCancel,{children:"Cancel"}),(0,r.jsx)(u.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{D&&window.location.reload()},children:"Archive"})]})]})}),(0,r.jsx)(u.AlertDialog,{onOpenChange:S,open:C,children:(0,r.jsxs)(u.AlertDialogContent,{children:[(0,r.jsxs)(u.AlertDialogHeader,{children:[(0,r.jsxs)(u.AlertDialogTitle,{children:["Archive ",M.size," Contract(s)?"]}),(0,r.jsx)(u.AlertDialogDescription,{children:"These contracts will be archived and can be restored within 90 days. After 90 days, they will be permanently deleted."})]}),(0,r.jsxs)(u.AlertDialogFooter,{children:[(0,r.jsx)(u.AlertDialogCancel,{children:"Cancel"}),(0,r.jsx)(u.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{let e=0,r=0;for(let t of M){let a=await p(t);a.success?e++:(r++,console.error(`Failed to archive contract ${t}:`,a.error))}e>0&&v.toast.success(`Archived ${e} contract${e>1?"s":""}`),r>0&&v.toast.error(`Failed to archive ${r} contract${r>1?"s":""}`),window.location.reload()},children:"Archive All"})]})]})})]})}e.s(["ContractsTable",()=>k],215722)}]);