(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,306466,e=>{"use strict";let s=(0,e.i(383206).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>s])},598870,e=>{"use strict";var s=e.i(306466);e.s(["Save",()=>s.default])},193418,e=>{"use strict";var s=e.i(111043),i=e.i(288413),t=e.i(371526),l=e.i(598870),r=e.i(540374),d=e.i(532727),a=e.i(904653),c=e.i(970799),n=e.i(552038),o=(0,n.createServerReference)("4036632815ee447be0b690fa966ba11e7ca0a382c2",n.callServer,void 0,n.findSourceMapURL,"createCustomField"),m=(0,n.createServerReference)("407584f20f531d64f7617f8f80c8434a5c5ff89fba",n.callServer,void 0,n.findSourceMapURL,"deleteCustomField"),x=(0,n.createServerReference)("600e50e57320cf7399cc51698795ed6bfa3000b670",n.callServer,void 0,n.findSourceMapURL,"updateCustomField");e.i(553153);var u=e.i(363712);e.i(889265);var h=e.i(677607);e.i(254851);var p=e.i(605278);e.i(51478);var f=e.i(635613);e.i(149989);var j=e.i(880177);e.i(868198);var v=e.i(798764);e.i(287133);var g=e.i(120109),N=e.i(220168);e.i(223342);var y=e.i(395645);e.i(794747);var b=e.i(513990),C=e.i(51052);function S({initialFields:e}){let[n,S]=(0,c.useTransition)();(0,a.useRouter)();let{toast:_}=(0,C.useToast)(),[w,T]=(0,c.useState)(e),[F,k]=(0,c.useState)(!1),q=async e=>{if(e.startsWith("temp-")){T(s=>s.filter(s=>s.id!==e)),k(!0);return}S(async()=>{let s=await m(e);s.success?(_.success("Custom field deleted successfully"),T(s=>s.filter(s=>s.id!==e))):_.error(s.error||"Failed to delete custom field")})},P=(e,s,i)=>{T(t=>t.map(t=>{if(t.id===e){let e={...t,[s]:i};return"field_name"===s&&"string"==typeof i&&(e.field_key=i.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")),e}return t})),k(!0)},R=async()=>{S(async()=>{let e=!1;for(let s of w){let i;if(!(s.field_name&&s.field_key)){_.error("Field name is required for all custom fields"),e=!0;break}let t=new FormData;if(t.append("fieldName",s.field_name),t.append("fieldKey",s.field_key),t.append("fieldType",s.field_type),t.append("isRequired",String(s.is_required)),t.append("showInList",String(s.show_in_list)),t.append("displayOrder",String(s.display_order)),t.append("isActive",String(s.is_active)),s.field_options&&s.field_options.length>0&&t.append("fieldOptions",JSON.stringify(s.field_options)),!(i=s.id.startsWith("temp-")?await o(t):await x(s.id,t)).success){_.error(i.error||"Failed to save custom field"),e=!0;break}}e||(_.success("Custom fields saved successfully"),k(!1))})};return(0,s.jsx)(b.TooltipProvider,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Custom Fields"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Add custom fields to collect additional customer information"})]}),F&&(0,s.jsxs)(h.Button,{disabled:n,onClick:R,children:[(0,s.jsx)(l.Save,{className:"mr-2 size-4"}),n?"Saving...":"Save Changes"]})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsx)(p.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(p.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,s.jsx)(r.Tag,{className:"size-4"}),"Customer Custom Fields"]}),(0,s.jsx)(p.CardDescription,{children:"Create custom fields to capture business-specific information"})]}),(0,s.jsxs)(h.Button,{disabled:n,onClick:()=>{let e={id:`temp-${Date.now()}`,field_name:"",field_key:"",field_type:"text",is_required:!1,show_in_list:!1,display_order:w.length,is_active:!0};T(s=>[...s,e]),k(!0)},size:"sm",variant:"outline",children:[(0,s.jsx)(t.Plus,{className:"mr-2 size-4"}),"Add Field"]})]})}),(0,s.jsxs)(p.CardContent,{className:"space-y-4",children:[w.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"space-y-4 rounded-lg border p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsx)(N.StandardFormField,{label:"Field Name",htmlFor:`field-name-${e.id}`,children:(0,s.jsx)(f.Input,{id:`field-name-${e.id}`,disabled:n,onChange:s=>P(e.id,"field_name",s.target.value),placeholder:"e.g., Gate Code",value:e.field_name})}),(0,s.jsxs)(N.StandardFormField,{label:"Field Type",htmlFor:`field-type-${e.id}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Type of input for this field"}),(0,s.jsxs)(b.Tooltip,{children:[(0,s.jsx)(b.TooltipTrigger,{children:(0,s.jsx)(i.HelpCircle,{className:"text-muted-foreground h-3 w-3"})}),(0,s.jsx)(b.TooltipContent,{children:(0,s.jsx)("p",{className:"max-w-xs",children:"Type of input for this field"})})]})]}),(0,s.jsxs)(v.Select,{disabled:n,onValueChange:s=>P(e.id,"field_type",s),value:e.field_type,children:[(0,s.jsx)(v.SelectTrigger,{id:`field-type-${e.id}`,children:(0,s.jsx)(v.SelectValue,{})}),(0,s.jsxs)(v.SelectContent,{children:[(0,s.jsx)(v.SelectItem,{value:"text",children:"Text"}),(0,s.jsx)(v.SelectItem,{value:"number",children:"Number"}),(0,s.jsx)(v.SelectItem,{value:"date",children:"Date"}),(0,s.jsx)(v.SelectItem,{value:"boolean",children:"Boolean"}),(0,s.jsx)(v.SelectItem,{value:"select",children:"Dropdown"}),(0,s.jsx)(v.SelectItem,{value:"multi_select",children:"Multi-Select"}),(0,s.jsx)(v.SelectItem,{value:"textarea",children:"Text Area"})]})]})]})]}),("select"===e.field_type||"multi_select"===e.field_type)&&(0,s.jsxs)(N.StandardFormField,{label:"Options (comma-separated)",htmlFor:`field-options-${e.id}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Separate options with commas"}),(0,s.jsxs)(b.Tooltip,{children:[(0,s.jsx)(b.TooltipTrigger,{children:(0,s.jsx)(i.HelpCircle,{className:"text-muted-foreground h-3 w-3"})}),(0,s.jsx)(b.TooltipContent,{children:(0,s.jsx)("p",{className:"max-w-xs",children:"Separate options with commas"})})]})]}),(0,s.jsx)(f.Input,{id:`field-options-${e.id}`,disabled:n,onChange:s=>P(e.id,"field_options",s.target.value.split(",").map(e=>e.trim())),placeholder:"Option 1, Option 2, Option 3",value:e.field_options?.join(", ")||""}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.field_options?.map((e,i)=>(0,s.jsx)(u.Badge,{variant:"secondary",children:e},i))})]}),(0,s.jsx)(g.Separator,{}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(j.Label,{className:"text-sm",children:"Required"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Customer must fill"})]}),(0,s.jsx)(y.Switch,{checked:e.is_required,disabled:n,onCheckedChange:s=>P(e.id,"is_required",s)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(j.Label,{className:"text-sm",children:"Show in List"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Display in tables"})]}),(0,s.jsx)(y.Switch,{checked:e.show_in_list,disabled:n,onCheckedChange:s=>P(e.id,"show_in_list",s)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(j.Label,{className:"text-sm",children:"Active"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Enable this field"})]}),(0,s.jsx)(y.Switch,{checked:e.is_active,disabled:n,onCheckedChange:s=>P(e.id,"is_active",s)})]})]})]}),(0,s.jsx)(h.Button,{className:"ml-4",disabled:n,onClick:()=>q(e.id),size:"sm",variant:"ghost",children:(0,s.jsx)(d.Trash2,{className:"size-4"})})]})}),t<w.length-1&&(0,s.jsx)(g.Separator,{className:"my-4"})]},e.id)),0===w.length&&(0,s.jsxs)("div",{className:"rounded-lg border border-dashed py-12 text-center",children:[(0,s.jsx)(r.Tag,{className:"text-muted-foreground mx-auto h-12 w-12"}),(0,s.jsx)("p",{className:"mt-4 font-medium",children:"No Custom Fields"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:'Click "Add Field" to create your first custom field'})]})]})]}),(0,s.jsxs)(p.Card,{children:[(0,s.jsxs)(p.CardHeader,{children:[(0,s.jsx)(p.CardTitle,{children:"Field Examples"}),(0,s.jsx)(p.CardDescription,{children:"Common custom fields for field service businesses"})]}),(0,s.jsx)(p.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Property Information"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Gate code or access instructions"}),(0,s.jsx)("li",{children:"• Parking instructions"}),(0,s.jsx)("li",{children:"• Property square footage"}),(0,s.jsx)("li",{children:"• Year built"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Service Details"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Equipment brand/model"}),(0,s.jsx)("li",{children:"• Previous service provider"}),(0,s.jsx)("li",{children:"• Service history"}),(0,s.jsx)("li",{children:"• Warranty information"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Customer Preferences"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Preferred contact method"}),(0,s.jsx)("li",{children:"• Best time to call"}),(0,s.jsx)("li",{children:"• Language preference"}),(0,s.jsx)("li",{children:"• Special instructions"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Safety & Access"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Pet information"}),(0,s.jsx)("li",{children:"• Alarm system details"}),(0,s.jsx)("li",{children:"• Emergency contact"}),(0,s.jsx)("li",{children:"• Special access requirements"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Business Information"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Referral source"}),(0,s.jsx)("li",{children:"• Customer type (residential/commercial)"}),(0,s.jsx)("li",{children:"• Tax ID/business license"}),(0,s.jsx)("li",{children:"• PO number requirements"})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Scheduling"}),(0,s.jsxs)("ul",{className:"text-muted-foreground mt-2 space-y-1 text-xs",children:[(0,s.jsx)("li",{children:"• Preferred technician"}),(0,s.jsx)("li",{children:"• Availability windows"}),(0,s.jsx)("li",{children:"• Recurring service frequency"}),(0,s.jsx)("li",{children:"• Seasonal service preferences"})]})]})]})})]}),(0,s.jsx)(p.Card,{className:"border-primary/50 bg-primary/5",children:(0,s.jsxs)(p.CardContent,{className:"flex items-start gap-3 pt-6",children:[(0,s.jsx)(r.Tag,{className:"text-primary mt-0.5 h-5 w-5 shrink-0"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-primary dark:text-primary text-sm font-medium",children:"Custom Field Best Practices"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Keep custom fields focused and relevant to avoid overwhelming customers during booking. Use dropdown menus instead of text fields when possible for easier reporting. Limit required fields to only essential information. Review and remove unused custom fields quarterly to maintain a clean customer experience."})]})]})})]})})}e.s(["CustomFieldsContent",()=>S],193418)}]);