(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,672573,e=>{"use strict";let t=(0,e.i(383206).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["default",()=>t])},15751,e=>{"use strict";var t=e.i(672573);e.s(["MapPin",()=>t.default])},923225,e=>{"use strict";let t=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},630754,e=>{"use strict";var t=e.i(923225);e.s(["CheckCircle",()=>t.default])},486882,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["default",()=>t])},486506,e=>{"use strict";var t=e.i(486882);e.s(["ArrowRight",()=>t.default])},52573,e=>{"use strict";let t=(0,e.i(383206).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>t])},694288,e=>{"use strict";var t=e.i(52573);e.s(["Link",()=>t.default])},519131,e=>{"use strict";let t=(0,e.i(383206).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["default",()=>t])},233654,e=>{"use strict";var t=e.i(519131);e.s(["Paperclip",()=>t.default])},711448,e=>{"use strict";e.i(116233),e.s([])},305549,585506,e=>{"use strict";var t=e.i(111043),s=e.i(868422),a=e.i(227009);e.i(670258);var r=e.i(921251);e.i(711448);var i=e.i(157222);function l({activities:e}){return e&&0!==e.length?(0,t.jsx)(i.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:e.map(e=>(0,t.jsxs)("div",{className:"hover:bg-muted/50 flex gap-3 rounded-lg border p-3 transition-colors",children:[(0,t.jsxs)(r.Avatar,{className:"size-8 flex-shrink-0",children:[(0,t.jsx)(r.AvatarImage,{src:e.user?.avatar}),(0,t.jsx)(r.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-sm break-words",children:e.description}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[e.user?.name," •"," ",(0,s.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})]})]})]},e.id))})}):(0,t.jsx)(i.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(a.Activity,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No activity yet"})]})})})}e.s(["ActivityLogSection",()=>l],305549);var n=e.i(882896),d=e.i(606661),c=e.i(233654),o=e.i(371526),m=e.i(826463),x=e.i(970799);e.i(889265);var u=e.i(677607),h=e.i(51052);function p({attachments:e,entityType:s,entityId:a,onUpload:r}){let{toast:l}=(0,h.useToast)(),[p,g]=(0,x.useState)(!1),f=async e=>{let t=e.target.files;if(t&&0!==t.length){g(!0);try{r&&await r(t),l.success(`${t.length} file(s) uploaded successfully`)}catch(e){l.error("Failed to upload files")}finally{g(!1),e.target.value=""}}};return(0,t.jsx)(i.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[r&&(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{className:"hidden",disabled:p,id:"file-upload",multiple:!0,onChange:f,type:"file"}),(0,t.jsx)("label",{htmlFor:"file-upload",children:(0,t.jsx)(u.Button,{asChild:!0,className:"w-full cursor-pointer",disabled:p,size:"sm",variant:"outline",children:(0,t.jsx)("span",{children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Upload,{className:"mr-2 size-4 animate-pulse"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Plus,{className:"mr-2 size-4"}),"Upload Files"]})})})})]}),e&&e.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,t.jsx)(d.FileText,{className:"text-muted-foreground size-4 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.original_file_name||e.file_name||"Untitled"}),(0,t.jsxs)("p",{className:"text-muted-foreground text-xs",children:[e.file_size?`${(e.file_size/1024).toFixed(1)} KB`:"",e.category&&` • ${e.category}`]})]})]}),(0,t.jsx)(u.Button,{asChild:!0,className:"flex-shrink-0",size:"sm",variant:"ghost",children:(0,t.jsx)("a",{download:!0,href:e.storage_url||e.url,rel:"noopener noreferrer",target:"_blank",children:(0,t.jsx)(n.Download,{className:"size-4"})})})]},e.id))}):(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.Paperclip,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No attachments yet"})]})})]})})}e.s(["AttachmentsSection",()=>p],585506)},821305,278633,e=>{"use strict";var t=e.i(111043),s=e.i(227009),a=e.i(606661),r=e.i(694288),i=e.i(233654),l=e.i(702948),n=e.i(152088);function d({header:e,customHeader:s,metadata:a,beforeContent:r,afterContent:i,children:l,className:d,contentGapClassName:c,statsBar:o}){let m=a??e?.metadata??[];return(0,t.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4 pb-24 lg:gap-5",d),"data-detail-shell":"",children:[o,s??(e?(0,t.jsx)(x,{section:e}):null),m.length>0?(0,t.jsx)(u,{items:m}):null,r,l?(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",c),children:l}):null,i]})}let c={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},o={default:"border border-border/60 bg-card shadow-sm",muted:"border border-border/60 bg-muted/40 shadow-sm",subtle:"border border-border/40 bg-card/80 shadow-sm",ghost:"border border-border/50 bg-transparent shadow-none"};function m({children:e,className:s,padding:a="md",variant:r="default"}){return(0,t.jsx)("section",{className:(0,n.cn)("rounded-xl",o[r],s),children:(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",c[a]),children:e})})}function x({section:e}){var s;let{breadcrumbs:a,leadingVisual:r,title:i,subtitle:l,description:n,badges:d,actions:c,secondaryActions:o}=e;return(0,t.jsxs)("header",{className:"flex flex-col gap-4 lg:gap-6",children:[a?(0,t.jsx)("div",{className:"text-muted-foreground text-sm",children:a}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between lg:gap-8",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[r?(0,t.jsx)("div",{className:"flex items-center justify-center",children:r}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(s=i)?"string"==typeof s?(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:s}):(0,t.jsx)("div",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:s}):null,l?(0,t.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm md:text-base",children:l}):null]})]}),n?(0,t.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm",children:n}):null]})}),d&&d.length>0?(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:d}):null]}),h(c,o)?(0,t.jsxs)("div",{className:"hidden flex-wrap items-center gap-2 lg:flex",children:[c?.map((e,s)=>(0,t.jsx)("span",{className:"inline-flex",children:e},s)),o?.map((e,s)=>(0,t.jsx)("span",{className:"inline-flex",children:e},`secondary-${s}`))]}):null]}),h(c,o)?(0,t.jsxs)("div",{className:"flex flex-col gap-2 lg:hidden",children:[c&&c.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((e,s)=>(0,t.jsx)("span",{className:"flex-1",children:e},s))}):null,o&&o.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,s)=>(0,t.jsx)("span",{className:"flex-1",children:e},`secondary-mobile-${s}`))}):null]}):null]})}function u({items:e}){return(0,t.jsx)("section",{className:"@xl-page:grid-cols-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:e.map((e,s)=>(0,t.jsxs)("div",{className:"border-border/50 bg-card/60 flex flex-col gap-1 rounded-lg border px-4 py-3 shadow-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2 text-xs font-medium tracking-wide uppercase",children:[e.icon,e.label]}),(0,t.jsx)("div",{className:"text-foreground text-sm font-semibold",children:e.value}),e.helperText?(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.helperText}):null]},s))})}function h(e,t){return!!(e&&e.length>0||t&&t.length>0)}e.s(["DetailPageShell",()=>d,"DetailPageSurface",()=>m],278633);var p=e.i(305549),g=e.i(585506),f=e.i(868422),j=e.i(371526),v=e.i(970799);e.i(670258);var N=e.i(921251);e.i(889265);var b=e.i(677607);e.i(526120);var y=e.i(610120);e.i(711448);var w=e.i(157222),k=e.i(51052);function C({notes:e,entityType:s,entityId:r,onAddNote:i}){let{toast:l}=(0,k.useToast)(),[n,d]=(0,v.useState)(!1),[c,o]=(0,v.useState)(""),[m,x]=(0,v.useState)(!1),u=async()=>{if(i){if(!c.trim())return void l.error("Please enter a note");x(!0);try{await i(c),l.success("Note added successfully"),o(""),d(!1)}catch(e){l.error("Failed to add note")}finally{x(!1)}}};return(0,t.jsx)(w.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[i&&(n?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Textarea,{autoFocus:!0,onChange:e=>o(e.target.value),placeholder:"Enter your note...",rows:3,value:c}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(b.Button,{disabled:m,onClick:u,size:"sm",children:m?"Saving...":"Save Note"}),(0,t.jsx)(b.Button,{onClick:()=>{d(!1),o("")},size:"sm",variant:"outline",children:"Cancel"})]})]}):(0,t.jsxs)(b.Button,{className:"w-full",onClick:()=>d(!0),size:"sm",variant:"outline",children:[(0,t.jsx)(j.Plus,{className:"mr-2 size-4"}),"Add Note"]})),e&&e.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsx)("div",{className:"hover:bg-muted/50 rounded-lg border p-3 transition-colors",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(N.Avatar,{className:"size-8 flex-shrink-0",children:[(0,t.jsx)(N.AvatarImage,{src:e.user?.avatar}),(0,t.jsx)(N.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium",children:e.user?.name}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:(0,f.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})})]}),(0,t.jsx)("p",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:e.content||e.note})]})]})},e.id))}):(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(a.FileText,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No notes yet"})]})})]})})}var S=e.i(87912),z=e.i(176378);e.i(553153);var P=e.i(363712);function T({relatedItems:e}){return e&&0!==e.length?(0,t.jsx)(w.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)(z.default,{className:"group hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",href:e.href,children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.title}),e.badge&&(0,t.jsx)(P.Badge,{className:"flex-shrink-0",variant:e.badge.variant||"default",children:e.badge.label})]}),e.subtitle&&(0,t.jsx)("p",{className:"text-muted-foreground truncate text-xs",children:e.subtitle})]}),(0,t.jsx)(S.ChevronRight,{className:"text-muted-foreground size-4 flex-shrink-0 transition-transform group-hover:translate-x-0.5"})]},e.id))})}):(0,t.jsx)(w.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(r.Link,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No related items"})]})})})}let _=(0,l.default)(()=>e.A(134181).then(e=>e.UnifiedAccordion),{loadableGenerated:{modules:[388024]},ssr:!1});function M({header:e,customHeader:l,customSections:c,activities:o=[],notes:x=[],attachments:u=[],relatedItems:h=[],showStandardSections:f={activities:!0,notes:!0,attachments:!0,relatedItems:!0},className:j,defaultOpenSection:v,beforeContent:N,afterContent:b,statsBar:y,contentGapClassName:w,surfacePadding:k="none",surfaceVariant:S="default",surfaceClassName:z,storageKey:P,enableReordering:M=!0}){let A=[];!1!==f.activities&&A.push({id:"activity-log",title:"Activity Log",icon:(0,t.jsx)(s.Activity,{className:"size-4"}),count:o.length,content:(0,t.jsx)(p.ActivityLogSection,{activities:o})}),!1!==f.notes&&A.push({id:"notes",title:"Notes",icon:(0,t.jsx)(a.FileText,{className:"size-4"}),count:x.length,content:(0,t.jsx)(C,{notes:x})}),!1!==f.attachments&&A.push({id:"attachments",title:"Attachments",icon:(0,t.jsx)(i.Paperclip,{className:"size-4"}),count:u.length,content:(0,t.jsx)(g.AttachmentsSection,{attachments:u})}),!1!==f.relatedItems&&h.length>0&&A.push({id:"related-items",title:"Related Items",icon:(0,t.jsx)(r.Link,{className:"size-4"}),count:h.length,content:(0,t.jsx)(T,{relatedItems:h})});let D=[...c||[],...A];return(0,t.jsx)(d,{afterContent:b,beforeContent:N,className:(0,n.cn)("w-full",j),contentGapClassName:w??"gap-4",customHeader:l,header:e,statsBar:y,children:(0,t.jsx)(m,{className:(0,n.cn)("overflow-hidden",z),padding:k,variant:S,children:(0,t.jsx)(_,{defaultOpenSection:v||D[0]?.id,enableReordering:M,sections:D,storageKey:P})})})}e.s(["DetailPageContentLayout",()=>M],821305)},431111,e=>{"use strict";var t=e.i(111043),s=e.i(904653),a=e.i(970799),r=e.i(146798);function i({stats:e,children:i}){let l=(0,s.usePathname)()||"/dashboard",n=(0,r.useToolbarStatsStore)(e=>e.setStats),d=(0,r.useToolbarStatsStore)(e=>e.clearStats);return(0,a.useLayoutEffect)(()=>(e?n(l,e):d(l),()=>{d(l)}),[l,e,n,d]),(0,t.jsx)(t.Fragment,{children:i})}e.s(["ToolbarStatsProvider",()=>i])},160973,e=>{"use strict";e.i(116233),e.s([])},213075,e=>{"use strict";let t=(0,e.i(383206).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["default",()=>t])},868106,e=>{"use strict";var t=e.i(213075);e.s(["Receipt",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},969249,e=>{"use strict";let t=(0,e.i(383206).default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);e.s(["default",()=>t])},332845,e=>{"use strict";var t=e.i(969249);e.s(["Navigation",()=>t.default])},235670,e=>{"use strict";e.i(116233),e.s([])},49718,307033,e=>{"use strict";var t=e.i(552038),s=(0,t.createServerReference)("70ff12ee81a60340f786414d0baa7af58484dd7488",t.callServer,void 0,t.findSourceMapURL,"updateEntityTags");e.s(["updateEntityTags",()=>s],49718);var a=e.i(111043),r=e.i(371526),i=e.i(540374),l=e.i(212409),n=e.i(904653),d=e.i(970799),c=e.i(995403);e.i(235670);var o=e.i(360648);e.i(889265);var m=e.i(677607);e.i(51478);var x=e.i(635613);e.i(149989);var u=e.i(880177);e.i(220474);var h=e.i(171056);e.i(868198);var p=e.i(798764),g=e.i(220168);let f=[{name:"Red",value:"red",class:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30"},{name:"Orange",value:"orange",class:"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900/30"},{name:"Amber",value:"amber",class:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-900/30"},{name:"Yellow",value:"yellow",class:"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-900/30"},{name:"Green",value:"green",class:"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/30"},{name:"Emerald",value:"emerald",class:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-900/30"},{name:"Teal",value:"teal",class:"bg-teal-100 text-teal-700 border-teal-200 dark:bg-teal-900/20 dark:text-teal-400 dark:border-teal-900/30"},{name:"Blue",value:"blue",class:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900/30"},{name:"Indigo",value:"indigo",class:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-900/30"},{name:"Purple",value:"purple",class:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900/30"},{name:"Pink",value:"pink",class:"bg-pink-100 text-pink-700 border-pink-200 dark:bg-pink-900/20 dark:text-pink-400 dark:border-pink-900/30"},{name:"Gray",value:"gray",class:"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-900/30"}],j=f.reduce((e,t)=>({...e,[t.value]:t.class}),{});function v({entityId:e,entityType:t,tags:s,onUpdateTags:v,readOnly:N=!1}){(0,n.useRouter)();let[b,y]=(0,d.useState)(!1),[w,k]=(0,d.useState)(""),[C,S]=(0,d.useState)("blue"),[z,P]=(0,d.useState)(!1),[T,_]=(0,d.useState)(null),M=e=>"string"==typeof e?e:e.label,A=async()=>{if(!w.trim())return void c.toast.error("Please enter a tag name");P(!0);try{let t={label:w.trim(),color:C},a=[...s,t],r=await v(e,a);r.success?(c.toast.success("Tag added"),y(!1),k(""),S("blue")):c.toast.error(r.error||"Failed to add tag")}catch(e){c.toast.error("Failed to add tag")}finally{P(!1)}},D=async t=>{try{let a=s.filter(e=>{let s=M(e),a=M(t);return s!==a}),r=await v(e,a);r.success?c.toast.success("Tag removed"):c.toast.error(r.error||"Failed to remove tag")}catch(e){c.toast.error("Failed to remove tag")}finally{_(null)}},B=f.find(e=>e.value===C);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[s.map((e,t)=>{let s=M(e),r="string"==typeof e?void 0:e.color,n=r&&j[r]?j[r]:j.blue;return(0,a.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium transition-colors ${n}`,children:[(0,a.jsx)(i.Tag,{className:"size-3"}),(0,a.jsx)("span",{children:s}),!N&&(0,a.jsx)(m.Button,{className:"ml-1 size-4 p-0 hover:bg-black/10 dark:hover:bg-white/10",onClick:()=>_(e),size:"icon",variant:"ghost",children:(0,a.jsx)(l.X,{className:"size-3"})})]},`${s}-${t}`)}),!N&&(0,a.jsxs)(h.Popover,{onOpenChange:y,open:b,children:[(0,a.jsx)(h.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)("button",{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-1.5 rounded-full border border-dashed px-3 py-1.5 text-sm font-medium transition-colors",children:[(0,a.jsx)(r.Plus,{className:"size-3"}),(0,a.jsx)("span",{children:"Add Tag"})]})}),(0,a.jsx)(h.PopoverContent,{align:"start",className:"w-80",side:"bottom",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Create Custom Tag"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Add a custom tag for this ",t]})]}),(0,a.jsx)(g.StandardFormField,{label:"Tag Name",htmlFor:"tag-label",children:(0,a.jsx)(x.Input,{id:"tag-label",onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key&&A()},placeholder:"e.g., High Priority, VIP, etc.",value:w})}),(0,a.jsx)(g.StandardFormField,{label:"Color",htmlFor:"tag-color",children:(0,a.jsxs)(p.Select,{onValueChange:S,value:C,children:[(0,a.jsx)(p.SelectTrigger,{id:"tag-color",children:(0,a.jsx)(p.SelectValue,{children:B&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`h-4 w-4 rounded-full ${B.class}`}),(0,a.jsx)("span",{children:B.name})]})})}),(0,a.jsx)(p.SelectContent,{children:f.map(e=>(0,a.jsx)(p.SelectItem,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`h-4 w-4 rounded-full ${e.class}`}),(0,a.jsx)("span",{children:e.name})]})},e.value))})]})}),w&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{children:"Preview"}),(0,a.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium ${B?.class}`,children:[(0,a.jsx)(i.Tag,{className:"size-3"}),(0,a.jsx)("span",{children:w})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m.Button,{className:"flex-1",onClick:()=>y(!1),variant:"outline",children:"Cancel"}),(0,a.jsx)(m.Button,{className:"flex-1",disabled:z||!w.trim(),onClick:A,children:z?"Saving...":"Add Tag"})]})]})})]})]}),(0,a.jsx)(o.AlertDialog,{onOpenChange:()=>_(null),open:!!T,children:(0,a.jsxs)(o.AlertDialogContent,{children:[(0,a.jsxs)(o.AlertDialogHeader,{children:[(0,a.jsx)(o.AlertDialogTitle,{children:"Remove Tag"}),(0,a.jsxs)(o.AlertDialogDescription,{children:['Are you sure you want to remove the tag "',T?M(T):"",'"? This action cannot be undone.']})]}),(0,a.jsxs)(o.AlertDialogFooter,{children:[(0,a.jsx)(o.AlertDialogCancel,{children:"Cancel"}),(0,a.jsx)(o.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>T&&D(T),children:"Remove"})]})]})})]})}e.s(["EntityTags",()=>v],307033)},510651,e=>{"use strict";let t=(0,e.i(383206).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},123891,e=>{"use strict";var t=e.i(510651);e.s(["ShieldCheck",()=>t.default])},281595,e=>{"use strict";let t=(0,e.i(383206).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["default",()=>t])},133279,e=>{"use strict";var t=e.i(281595);e.s(["Camera",()=>t.default])},456788,e=>{"use strict";let t=(0,e.i(383206).default)("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);e.s(["default",()=>t])},44104,e=>{"use strict";let t=(0,e.i(383206).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);e.s(["default",()=>t])},598329,e=>{"use strict";let t=(0,e.i(383206).default)("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);e.s(["default",()=>t])},951801,e=>{"use strict";e.i(116233),e.s([])},435916,e=>{"use strict";let t=(0,e.i(383206).default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);e.s(["default",()=>t])},797566,e=>{"use strict";var t=e.i(435916);e.s(["Maximize2",()=>t.default])},555739,e=>{"use strict";var t=e.i(44104);e.s(["Store",()=>t.default])},520824,e=>{"use strict";var t=e.i(456788);e.s(["Route",()=>t.default])},258978,487236,e=>{"use strict";var t=e.i(111043),s=e.i(818796),a=e.i(486506),r=e.i(136764),i=e.i(641304),l=e.i(15751),n=e.i(160424),d=e.i(520824),c=e.i(970799);e.i(951801);var o=e.i(622608),m=e.i(152088);let x=e=>{if(!e)return{primary:"Address unavailable",secondary:""};let t=e.split(",").map(e=>e.trim());return{primary:t[0]??e,secondary:t.slice(1).join(", ")}};function u({property:e,className:u}){let[h,p]=(0,c.useState)(null),[g,f]=(0,c.useState)(!0),[j,v]=(0,c.useState)(null),[N,b]=(0,c.useState)(null),y=(0,c.useRef)(!1),w=(0,c.useCallback)(async()=>{if(!(e?.address&&e?.city&&e?.state))return void f(!1);f(!0),v(null);try{let t=(e=>{let t=new URLSearchParams;if(e.lat&&e.lon)t.set("destinationLat",e.lat.toString()),t.set("destinationLon",e.lon.toString());else{let s,a=(s=[e.city,e.state].filter(e=>"string"==typeof e&&e.trim().length>0).join(", "),[e.address,e.address2,s||void 0,e.zipCode??e.zip_code??void 0].filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim()).join(", "));t.set("destination",a)}return t})(e),s=await fetch(`/api/travel-time?${t.toString()}`,{credentials:"same-origin"});if(!s.ok){let e=await s.json().catch(()=>({error:"Failed to fetch travel time"}));throw Error(e.error||"Failed to fetch travel time")}let a=await s.json();p(a),b(new Date),v(null)}catch(e){v(e instanceof Error?e.message:"Failed to fetch travel time"),p(null)}finally{f(!1)}},[e?.address,e?.address2,e?.city,e?.state,e?.zipCode,e?.zip_code,e?.lat,e?.lon]),k=(0,c.useRef)(w);if((0,c.useEffect)(()=>{k.current=w},[w]),(0,c.useEffect)(()=>{if(!e?.address)return void f(!1);if(!y.current){y.current=!0,k.current();let e=setInterval(()=>{k.current()},3e5);return()=>{clearInterval(e),y.current=!1}}},[]),!e?.address)return null;let C=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`},S=h?x(h.origin):null,z=h?x(h.destination):null;return g||j||!h?(0,t.jsxs)("div",{className:(0,m.cn)("bg-muted/50 flex h-7 items-center gap-2 rounded-md px-2.5 text-xs",u),children:[g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Loader2,{className:"text-muted-foreground h-3 w-3 animate-spin"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Calculating..."})]}),j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.AlertCircle,{className:"text-destructive h-3 w-3"}),(0,t.jsx)("span",{className:"text-destructive",children:"Travel time unavailable"})]}),!(j||h||g)&&(0,t.jsx)("span",{className:"text-muted-foreground",children:"No travel data"})]}):(0,t.jsxs)(o.HoverCard,{openDelay:200,children:[(0,t.jsx)(o.HoverCardTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,m.cn)("bg-muted/50 hover:bg-muted flex h-7 cursor-help items-center gap-2 rounded-md px-2.5 text-xs transition-colors",u),children:[(0,t.jsx)(r.Clock,{className:"text-muted-foreground h-3 w-3"}),(0,t.jsx)("span",{className:"font-medium tabular-nums",children:C(h.duration)}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,t.jsx)(d.Route,{className:"text-muted-foreground h-3 w-3"}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[h.distance.toFixed(1)," mi"]}),(0,t.jsx)("button",{"aria-label":"Refresh travel time",className:"text-muted-foreground hover:text-foreground ml-auto flex items-center gap-1 transition",onClick:w,type:"button",children:(0,t.jsx)(n.RefreshCw,{className:"h-3 w-3"})})]})}),(0,t.jsx)(o.HoverCardContent,{align:"start",className:"w-80",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-md",children:(0,t.jsx)(r.Clock,{className:"text-primary h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Travel Time"}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:"From company HQ"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"border-border/50 bg-muted/20 rounded-lg border p-3",children:[(0,t.jsx)("div",{className:"text-muted-foreground text-[10px] font-medium tracking-wide uppercase",children:"Duration"}),(0,t.jsx)("div",{className:"text-foreground mt-1 text-2xl font-bold tabular-nums",children:C(h.duration)}),(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 text-xs",children:h.durationText})]}),(0,t.jsxs)("div",{className:"border-border/50 bg-muted/20 rounded-lg border p-3",children:[(0,t.jsx)("div",{className:"text-muted-foreground text-[10px] font-medium tracking-wide uppercase",children:"Distance"}),(0,t.jsxs)("div",{className:"text-foreground mt-1 text-2xl font-bold tabular-nums",children:[h.distance.toFixed(1)," mi"]}),(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 text-xs",children:h.distanceText})]})]}),(0,t.jsxs)("div",{className:"border-border/50 bg-muted/20 space-y-1.5 rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center gap-1.5 text-[10px] font-medium tracking-wide uppercase",children:[(0,t.jsx)(d.Route,{className:"h-3 w-3"}),"Route"]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)(a.ArrowRight,{className:"text-muted-foreground mt-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-foreground font-medium",children:S?.primary}),S?.secondary&&(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:S.secondary})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)(l.MapPin,{className:"text-primary mt-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-foreground font-medium",children:z?.primary}),z?.secondary&&(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:z.secondary})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md bg-emerald-500/10 px-2 py-1",children:[(0,t.jsx)("span",{className:"inline-flex h-1.5 w-1.5 animate-pulse rounded-full bg-emerald-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400",children:"Live traffic data"})]}),N&&(0,t.jsxs)("div",{className:"text-muted-foreground text-xs",children:["Updated ",(e=>{if(!e)return null;let t=Math.round((e.getTime()-Date.now())/6e4),s=new Intl.RelativeTimeFormat("en",{numeric:"auto"});if(60>Math.abs(t))return s.format(t,"minute");let a=Math.round(t/60);if(24>Math.abs(a))return s.format(a,"hour");let r=Math.round(a/24);return s.format(r,"day")})(N)]})]})]})})]})}e.s(["TravelTime",()=>u],258978),e.i(313550);var h=e.i(133279),p=e.i(979731),g=e.i(797566),f=e.i(332845),j=e.i(555739);e.i(553153);var v=e.i(363712);e.i(889265);var N=e.i(677607);e.i(539870);var b=e.i(846358);e.i(160973);var y=e.i(871124);function w({property:e,nearbySuppliers:s=[]}){let[a,r]=(0,c.useState)(!1),[i,n]=(0,c.useState)("map"),d=[e.address,e.address2,`${e.city}, ${e.state} ${e.zip_code}`].filter(Boolean).join("\n"),o=encodeURIComponent([e.address,e.address2,e.city,e.state,e.zip_code].filter(Boolean).join(", ")),m=e.lat&&e.lon?`${e.lat},${e.lon}`:o,x=`https://www.google.com/maps/embed/v1/directions?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&origin=current+location&destination=${m}&mode=driving`,u=`https://www.google.com/maps/dir/?api=1&destination=${m}`,w=!!(e.lat&&e.lon),k=w?`https://www.google.com/maps/embed/v1/streetview?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&location=${e.lat},${e.lon}&heading=0&pitch=0&fov=90`:null,C=w?`https://www.google.com/maps/embed/v1/view?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&center=${e.lat},${e.lon}&zoom=18&maptype=satellite`:`https://www.google.com/maps/embed/v1/search?key=AIzaSyCVKN0pddG230vvjT0EMP9sSIR31j1q2t0&q=${o}&zoom=18&maptype=satellite`,S=e.lat&&e.lon?`https://earth.google.com/web/@${e.lat},${e.lon},0a,1000d,35y,0h,0t,0r`:`https://earth.google.com/web/search/${o}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-3 p-4 sm:p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-muted-foreground text-xxs font-semibold tracking-wider uppercase",children:"Service Location"}),(0,t.jsx)(N.Button,{asChild:!0,className:"h-7 gap-1.5 px-2 text-xs",size:"sm",variant:"outline",children:(0,t.jsxs)("a",{href:u,rel:"noopener noreferrer",target:"_blank",children:[(0,t.jsx)(f.Navigation,{className:"size-3"}),"Open in Maps"]})})]}),(0,t.jsx)("div",{className:"text-foreground text-sm leading-relaxed whitespace-pre-line",children:d})]}),(0,t.jsxs)(y.Tabs,{className:"w-full",onValueChange:n,value:i,children:[(0,t.jsxs)(y.TabsList,{className:"grid h-9 w-full grid-cols-3",children:[(0,t.jsxs)(y.TabsTrigger,{className:"gap-1.5 text-xs",value:"map",children:[(0,t.jsx)(f.Navigation,{className:"size-3.5"}),"Map"]}),(0,t.jsxs)(y.TabsTrigger,{className:"gap-1.5 text-xs",disabled:!k,value:"street",children:[(0,t.jsx)(h.Camera,{className:"size-3.5"}),"Street"]}),(0,t.jsxs)(y.TabsTrigger,{className:"gap-1.5 text-xs",value:"earth",children:[(0,t.jsx)(p.Globe,{className:"size-3.5"}),"Earth"]})]}),(0,t.jsxs)(y.TabsContent,{className:"mt-3 space-y-3",value:"map",children:[(0,t.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,t.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:x,style:{border:0},title:"Property Map with Directions"}),(0,t.jsx)(N.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{n("map"),r(!0)},size:"icon",variant:"ghost",children:(0,t.jsx)(g.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Shows route from your current location"}),s.length>0&&(0,t.jsxs)(v.Badge,{className:"gap-1",variant:"secondary",children:[(0,t.jsx)(j.Store,{className:"size-3"}),s.length," nearby"]})]})]}),(0,t.jsx)(y.TabsContent,{className:"mt-3 space-y-3",value:"street",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,t.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:k,style:{border:0},title:"Property Street View"}),(0,t.jsx)(N.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{n("street"),r(!0)},size:"icon",variant:"ghost",children:(0,t.jsx)(g.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"360° ground-level view of the property"})]}):(0,t.jsxs)("div",{className:"bg-muted/50 flex h-[200px] flex-col items-center justify-center rounded-lg border p-6 text-center",children:[(0,t.jsx)(h.Camera,{className:"text-muted-foreground mx-auto mb-3 size-10 opacity-30"}),(0,t.jsx)("p",{className:"text-foreground mb-1 text-sm font-medium",children:"Street View Unavailable"}),(0,t.jsx)("p",{className:"text-muted-foreground max-w-xs text-xs",children:"Add GPS coordinates (latitude/longitude) to the property to enable street-level imagery"})]})}),(0,t.jsxs)(y.TabsContent,{className:"mt-3 space-y-3",value:"earth",children:[(0,t.jsx)("div",{className:"group bg-muted relative overflow-hidden rounded-lg border",children:(0,t.jsxs)("div",{className:"relative h-[200px] w-full",children:[(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:C,style:{border:0},title:"Satellite View"}),(0,t.jsx)(N.Button,{className:"bg-card/90 hover:bg-card absolute top-2 right-2 h-8 w-8 shadow-md",onClick:()=>{n("earth"),r(!0)},size:"icon",variant:"ghost",children:(0,t.jsx)(g.Maximize2,{className:"text-foreground h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Satellite imagery view"}),(0,t.jsx)(N.Button,{asChild:!0,className:"h-6 gap-1 px-2 text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)("a",{href:S,rel:"noopener noreferrer",target:"_blank",children:[(0,t.jsx)(p.Globe,{className:"size-3"}),"Open Google Earth"]})})]})]})]}),e.lat&&e.lon&&(0,t.jsx)("div",{className:"bg-muted/50 rounded-lg px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Coordinates:"}),(0,t.jsxs)("span",{className:"text-foreground font-mono font-medium",children:[e.lat.toFixed(4),", ",e.lon.toFixed(4)]})]})})]}),(0,t.jsx)(b.Dialog,{onOpenChange:r,open:a,children:(0,t.jsxs)(b.DialogContent,{className:"max-w-5xl p-0",children:[(0,t.jsxs)(b.DialogHeader,{className:"border-b px-6 py-4",children:[(0,t.jsxs)(b.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.MapPin,{className:"text-primary h-5 w-5"}),"Service Location"]}),(0,t.jsx)("div",{className:"text-muted-foreground mt-2 text-sm whitespace-pre-line",children:d})]}),(0,t.jsxs)(y.Tabs,{className:"w-full",onValueChange:n,value:i,children:[(0,t.jsx)("div",{className:"border-b px-6",children:(0,t.jsxs)(y.TabsList,{className:"h-10",children:[(0,t.jsxs)(y.TabsTrigger,{className:"gap-2",value:"map",children:[(0,t.jsx)(f.Navigation,{className:"size-4"}),"Map & Route"]}),(0,t.jsxs)(y.TabsTrigger,{className:"gap-2",disabled:!k,value:"street",children:[(0,t.jsx)(h.Camera,{className:"size-4"}),"Street View"]}),(0,t.jsxs)(y.TabsTrigger,{className:"gap-2",value:"earth",children:[(0,t.jsx)(p.Globe,{className:"size-4"}),"Satellite"]})]})}),(0,t.jsx)(y.TabsContent,{className:"m-0",value:"map",children:(0,t.jsx)("div",{className:"h-[600px] w-full",children:(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:x,style:{border:0},title:"Property Map with Directions - Expanded"})})}),(0,t.jsx)(y.TabsContent,{className:"m-0",value:"street",children:k?(0,t.jsx)("div",{className:"h-[600px] w-full",children:(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:k,style:{border:0},title:"Property Street View - Expanded"})}):(0,t.jsxs)("div",{className:"bg-muted/50 flex h-[600px] flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)(h.Camera,{className:"text-muted-foreground mx-auto mb-4 size-16 opacity-20"}),(0,t.jsx)("p",{className:"text-foreground mb-2 text-lg font-semibold",children:"Street View Unavailable"}),(0,t.jsx)("p",{className:"text-muted-foreground max-w-md text-sm",children:"Add GPS coordinates (latitude/longitude) to the property to enable street-level imagery"})]})}),(0,t.jsx)(y.TabsContent,{className:"m-0",value:"earth",children:(0,t.jsx)("div",{className:"h-[600px] w-full",children:(0,t.jsx)("iframe",{className:"h-full w-full",frameBorder:"0",loading:"lazy",src:C,style:{border:0},title:"Satellite View - Expanded"})})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4 text-sm",children:e.lat&&e.lon&&(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(l.MapPin,{className:"size-4"}),(0,t.jsxs)("span",{className:"font-mono text-xs",children:[e.lat.toFixed(6),", ",e.lon.toFixed(6)]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Button,{asChild:!0,className:"gap-2",size:"sm",variant:"outline",children:(0,t.jsxs)("a",{href:S,rel:"noopener noreferrer",target:"_blank",children:[(0,t.jsx)(p.Globe,{className:"size-4"}),"Open in Google Earth"]})}),(0,t.jsx)(N.Button,{asChild:!0,className:"gap-2",size:"sm",children:(0,t.jsxs)("a",{href:u,rel:"noopener noreferrer",target:"_blank",children:[(0,t.jsx)(f.Navigation,{className:"size-4"}),"Open in Google Maps"]})})]})]})]})})]})}e.s(["PropertyLocationVisual",()=>w],487236)},594829,e=>{"use strict";var t=e.i(111043),s=e.i(818796),a=e.i(327149),r=e.i(263942),i=e.i(276389),l=e.i(136764),n=e.i(982686),d=e.i(606661),c=e.i(201710),o=e.i(8392),m=e.i(559586),x=e.i(15751),u=e.i(747146),h=e.i(332845),p=e.i(233654),g=e.i(939397),f=e.i(868106),j=e.i(598329),j=j,v=e.i(121085),N=e.i(123891),b=e.i(14435),y=e.i(176378),w=e.i(904653),k=e.i(970799),C=e.i(49718),S=e.i(552038);S.callServer,S.findSourceMapURL;var z=e.i(821305),P=e.i(307033);e.i(553153);var T=e.i(363712);e.i(889265);var _=e.i(677607);e.i(711448);var M=e.i(157222),A=e.i(258978),D=e.i(487236),B=e.i(51052),F=e.i(367571),$=e.i(38614),q=e.i(501651);e.i(244242);var L=e.i(563078),U=e.i(527756),R=e.i(635709);function I({equipment:e}){let s=e=>e&&({active:"bg-success/10 text-success hover:bg-success/20",inactive:"bg-secondary0/10 text-muted-foreground hover:bg-secondary0/20",maintenance:"bg-warning/10 text-warning hover:bg-warning/20",retired:"bg-destructive/10 text-destructive hover:bg-destructive/20"})[e.toLowerCase()]||"bg-secondary0/10 text-muted-foreground",a=(0,k.useMemo)(()=>[{key:"equipment_number",header:"Equipment #",width:"w-32",shrink:!0,render:e=>(0,t.jsx)(y.default,{className:"font-mono text-xs font-medium hover:underline",href:`/dashboard/work/equipment/${e.id}`,children:e.equipment_number})},{key:"name",header:"Name",render:e=>(0,t.jsx)(y.default,{className:"block min-w-0",href:`/dashboard/work/equipment/${e.id}`,onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-xs leading-tight font-medium hover:underline",children:e.name}),e.type&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.type})]})})},{key:"manufacturer",header:"Manufacturer",width:"w-48",hideOnMobile:!0,render:e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[(0,t.jsx)("span",{children:e.manufacturer||"-"}),e.model&&(0,t.jsxs)("span",{className:"text-muted-foreground text-xs",children:["Model: ",e.model]})]})},{key:"serial_number",header:"Serial Number",width:"w-40",hideOnMobile:!0,render:e=>(0,t.jsx)("span",{className:"font-mono text-xs",children:e.serial_number||"-"})},{key:"location",header:"Location",width:"w-32",hideOnMobile:!0,render:e=>(0,t.jsx)("span",{className:"text-xs",children:e.location||"-"})},{key:"install_date",header:"Installed",width:"w-32",shrink:!0,render:e=>{let s=e.install_date;return s?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(i.Calendar,{className:"text-muted-foreground size-4"}),(0,t.jsx)("span",{children:new Date(s).toLocaleDateString(void 0,{month:"short",year:"numeric"})})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})}},{key:"status",header:"Status",width:"w-28",shrink:!0,render:e=>{let a=e.status||"active";return(0,t.jsx)(T.Badge,{className:s(a),children:a})}},{key:"actions",header:"",width:"w-12",shrink:!0,align:"right",render:e=>(0,t.jsxs)(L.DropdownMenu,{children:[(0,t.jsx)(L.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(_.Button,{size:"sm",variant:"ghost",children:(0,t.jsx)($.MoreHorizontal,{className:"size-4"})})}),(0,t.jsxs)(L.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(L.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(y.default,{href:`/dashboard/work/equipment/${e.id}`,children:[(0,t.jsx)(F.Eye,{className:"mr-2 size-4"}),"View Equipment"]})}),(0,t.jsx)(L.DropdownMenuSeparator,{}),(0,t.jsxs)(L.DropdownMenuItem,{children:[(0,t.jsx)(q.Wrench,{className:"mr-2 size-4"}),"Schedule Maintenance"]})]})]})}],[s]);return(0,t.jsx)(U.FullWidthDataTable,{...R.TablePresets.compact(),columns:a,data:e,emptyMessage:"No equipment installed at this property",getItemId:e=>e.id,searchFilter:(e,t)=>e.name.toLowerCase().includes(t.toLowerCase())||e.equipment_number.toLowerCase().includes(t.toLowerCase())||(e.serial_number?.toLowerCase().includes(t.toLowerCase())??!1),searchPlaceholder:"Search equipment..."})}var E=e.i(630754);function V({jobs:e}){let s=e=>({pending:"bg-warning/10 text-warning hover:bg-warning/20",scheduled:"bg-primary/10 text-primary hover:bg-primary/20",in_progress:"bg-accent/10 text-accent-foreground hover:bg-accent/20",completed:"bg-success/10 text-success hover:bg-success/20",cancelled:"bg-destructive/10 text-destructive hover:bg-destructive/20"})[e.toLowerCase()]||"bg-secondary0/10 text-muted-foreground",a=e=>e&&({low:"bg-primary/10 text-primary",medium:"bg-warning/10 text-warning",high:"bg-warning/10 text-warning",urgent:"bg-destructive/10 text-destructive"})[e.toLowerCase()]||"bg-secondary0/10 text-muted-foreground",r=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e/100):"-",l=(0,k.useMemo)(()=>[{key:"job_number",header:"Job #",width:"w-32",shrink:!0,render:e=>(0,t.jsx)(y.default,{className:"font-mono text-xs font-medium hover:underline",href:`/dashboard/work/${e.id}`,children:e.job_number})},{key:"title",header:"Title",render:e=>(0,t.jsx)(y.default,{className:"block min-w-0",href:`/dashboard/work/${e.id}`,onClick:e=>e.stopPropagation(),children:(0,t.jsx)("span",{className:"text-xs leading-tight font-medium hover:underline",children:e.title})})},{key:"customer",header:"Customer",width:"w-48",hideOnMobile:!0,render:e=>{let s=e.customer;return s?(0,t.jsxs)(y.default,{className:"flex items-center gap-2 hover:underline",href:`/dashboard/sales/customers/${s.id}`,children:[(0,t.jsx)(b.User,{className:"text-muted-foreground size-4"}),(0,t.jsxs)("span",{children:[s.first_name," ",s.last_name]})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"No customer"})}},{key:"status",header:"Status",width:"w-32",shrink:!0,render:e=>(0,t.jsx)(T.Badge,{className:s(e.status),children:e.status})},{key:"priority",header:"Priority",width:"w-24",shrink:!0,hideOnMobile:!0,render:e=>{let s=e.priority;return s?(0,t.jsx)(T.Badge,{className:a(s),children:s}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})}},{key:"value",header:"Value",width:"w-32",shrink:!0,align:"right",render:e=>(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium",children:r(e.financial?.total_amount??0)}),e.financial?.paid_amount&&e.financial?.total_amount&&(0,t.jsxs)("span",{className:"text-muted-foreground text-xs",children:[r(e.financial.paid_amount)," paid"]})]})},{key:"scheduled",header:"Scheduled",width:"w-36",shrink:!0,render:e=>{let s=e.scheduled_start;return s?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(i.Calendar,{className:"text-muted-foreground size-4"}),(0,t.jsx)("span",{children:new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"Not scheduled"})}},{key:"actions",header:"",width:"w-12",shrink:!0,align:"right",render:e=>(0,t.jsxs)(L.DropdownMenu,{children:[(0,t.jsx)(L.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(_.Button,{size:"sm",variant:"ghost",children:(0,t.jsx)($.MoreHorizontal,{className:"size-4"})})}),(0,t.jsxs)(L.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(L.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(y.default,{href:`/dashboard/work/${e.id}`,children:[(0,t.jsx)(F.Eye,{className:"mr-2 size-4"}),"View Job"]})}),(0,t.jsx)(L.DropdownMenuSeparator,{}),(0,t.jsxs)(L.DropdownMenuItem,{children:[(0,t.jsx)(E.CheckCircle,{className:"mr-2 size-4"}),"Mark Complete"]})]})]})}],[r,a,s]);return(0,t.jsx)(U.FullWidthDataTable,{...R.TablePresets.compact(),columns:l,data:e,emptyMessage:"No jobs found for this property",getItemId:e=>e.id,searchFilter:(e,t)=>e.title.toLowerCase().includes(t.toLowerCase())||e.job_number.toLowerCase().includes(t.toLowerCase()),searchPlaceholder:"Search jobs..."})}function O({entityData:e,metrics:S}){(0,w.useRouter)();let{toast:F}=(0,B.useToast)(),[$,q]=(0,k.useState)(!1);(0,k.useEffect)(()=>{q(!0)},[]);let{property:L,customer:U,jobs:R=[],equipment:E=[],schedules:O=[],estimates:H=[],invoices:G=[],maintenancePlans:J=[],communications:K=[],activities:W=[],notes:Z=[],attachments:Q=[]}=e,X=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e/100);c.Home,L.name,x.MapPin,L.address,L.city,L.state,L.zip_code,r.Building2,L.property_type,j.default,L.square_footage?.toString(),L.square_footage&&L.square_footage.toLocaleString(),i.Calendar,L.year_built?.toString(),l.Clock,L.best_access_time,L.requires_appointment,b.User,U&&(U.first_name,U.last_name),U?.email,x.MapPin,L.lat&&L.lon&&(L.lat.toFixed(6),L.lon.toFixed(6)),L.lat&&L.lon,a.Briefcase,S.totalJobs.toString(),S.activeJobs,n.DollarSign,X(S.totalRevenue),S.totalJobs,S.totalJobs,v.Settings,S.equipmentCount,S.equipmentCount>0&&(S.equipmentCount,S.equipmentCount),l.Clock,S.lastServiceDate&&new Date(S.lastServiceDate).toLocaleDateString(),S.lastServiceDate&&(Date.now()-new Date(S.lastServiceDate).getTime())/864e5,L.name||L.address,L.city,L.state,L.zip_code,r.Building2;let Y=[{id:"location",title:"Location & Maps",icon:(0,t.jsx)(x.MapPin,{className:"size-4"}),defaultOpen:!0,content:(0,t.jsx)(M.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(D.PropertyLocationVisual,{nearbySuppliers:[],property:L}),(L.directions||L.parking_instructions||L.service_entrance_notes)&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"Access Information"}),(0,t.jsxs)("div",{className:"space-y-2",children:[L.directions&&(0,t.jsxs)("div",{className:"bg-muted/50 rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,t.jsx)(h.Navigation,{className:"text-muted-foreground size-4"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Directions"})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:L.directions})]}),L.parking_instructions&&(0,t.jsxs)("div",{className:"bg-muted/50 rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,t.jsx)(o.Info,{className:"text-muted-foreground size-4"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Parking Instructions"})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:L.parking_instructions})]}),L.service_entrance_notes&&(0,t.jsxs)("div",{className:"bg-muted/50 rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,t.jsx)(s.AlertCircle,{className:"text-muted-foreground size-4"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Service Entrance"})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:L.service_entrance_notes})]})]})]})]})})},{id:"communications",title:"Communications",icon:(0,t.jsx)(u.MessageSquare,{className:"size-4"}),content:(0,t.jsx)(M.UnifiedAccordionContent,{children:0===K.length?(0,t.jsxs)("div",{className:"text-muted-foreground flex flex-col items-center justify-center py-12 text-center text-sm",children:[(0,t.jsx)(u.MessageSquare,{className:"text-muted-foreground mb-4 size-10"}),"No communications logged for this property yet."]}):(0,t.jsx)("div",{className:"space-y-3",children:K.slice(0,25).map(e=>{let s=e.customer?.first_name||e.customer?.last_name?`${e.customer?.first_name??""} ${e.customer?.last_name??""}`.trim():"inbound"===e.direction?e.from_address:e.to_address,a=e.subject||e.body?.slice(0,160)||"No additional details",r=new Date(e.created_at).toLocaleString();return(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(T.Badge,{variant:"outline",children:e.type?.toUpperCase()}),(0,t.jsx)(T.Badge,{variant:"inbound"===e.direction?"secondary":"default",children:"inbound"===e.direction?"Inbound":"Outbound"}),e.status&&(0,t.jsx)(T.Badge,{variant:"outline",children:e.status}),(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:r})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:s||"Contact"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:a})]})]},e.id)})})})},{id:"jobs",title:"Job History",icon:(0,t.jsx)(a.Briefcase,{className:"size-4"}),count:R.length,actions:(0,t.jsx)(_.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(y.default,{href:`/dashboard/work/new?propertyId=${L.id}`,children:[(0,t.jsx)(a.Briefcase,{className:"mr-2 size-4"}),"Create Job"]})}),content:0===R.length?(0,t.jsx)(M.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(a.Briefcase,{className:"text-muted-foreground mb-4 size-12"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No jobs found for this property"}),(0,t.jsx)(_.Button,{asChild:!0,className:"mt-4",size:"sm",children:(0,t.jsx)(y.default,{href:`/dashboard/work/new?propertyId=${L.id}`,children:"Create First Job"})})]})}):(0,t.jsx)(M.UnifiedAccordionContent,{className:"p-0",children:(0,t.jsx)(V,{jobs:R})})},{id:"equipment",title:"Equipment",icon:(0,t.jsx)(v.Settings,{className:"size-4"}),count:E.length,actions:(0,t.jsx)(_.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(y.default,{href:`/dashboard/work/equipment/new?propertyId=${L.id}`,children:[(0,t.jsx)(v.Settings,{className:"mr-2 size-4"}),"Add Equipment"]})}),content:0===E.length?(0,t.jsx)(M.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(v.Settings,{className:"text-muted-foreground mb-4 size-12"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No equipment installed at this property"}),(0,t.jsx)(_.Button,{asChild:!0,className:"mt-4",size:"sm",variant:"outline",children:(0,t.jsx)(y.default,{href:`/dashboard/work/equipment/new?propertyId=${L.id}`,children:"Add Equipment"})})]})}):(0,t.jsx)(M.UnifiedAccordionContent,{className:"p-0",children:(0,t.jsx)(I,{equipment:E})})},{id:"estimates",title:"Estimates",icon:(0,t.jsx)(d.FileText,{className:"size-4"}),count:H.length,content:(0,t.jsxs)(M.UnifiedAccordionContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Estimates and quotes for work at this property."}),H.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Estimate #"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:H.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,t.jsxs)("td",{className:"px-6 py-4 text-sm",children:["#",e.estimate_number||e.id.slice(0,8)]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:e.title||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:X(e.total_amount)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(T.Badge,{variant:"outline",children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(y.default,{className:"text-primary hover:underline",href:`/dashboard/work/estimates/${e.id}`,children:"View"})})]},e.id))})]})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)(d.FileText,{className:"text-muted-foreground h-8 w-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No estimates for this property yet."})]})]})},{id:"invoices",title:"Invoices",icon:(0,t.jsx)(f.Receipt,{className:"size-4"}),count:G.length,content:(0,t.jsxs)(M.UnifiedAccordionContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Billing and invoices for work at this property."}),G.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Invoice #"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Balance"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:G.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,t.jsxs)("td",{className:"px-6 py-4 text-sm",children:["#",e.invoice_number||e.id.slice(0,8)]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:e.title||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:X(e.total_amount)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:X(e.balance_amount)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(T.Badge,{variant:"paid"===e.status?"default":"outline",children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(y.default,{className:"text-primary hover:underline",href:`/dashboard/work/invoices/${e.id}`,children:"View"})})]},e.id))})]})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)(f.Receipt,{className:"text-muted-foreground h-8 w-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No invoices for this property yet."})]})]})},{id:"maintenance-plans",title:"Maintenance Plans",icon:(0,t.jsx)(N.ShieldCheck,{className:"size-4"}),count:J.length,content:(0,t.jsxs)(M.UnifiedAccordionContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"text-muted-foreground border-b px-6 py-4 text-sm",children:"Active maintenance plans for this property."}),J.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Plan Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Frequency"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Next Service"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:J.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30 border-b",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-medium",children:e.name||`Plan ${e.id.slice(0,8)}`}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm capitalize",children:e.frequency||"Monthly"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:e.next_service_date?new Date(e.next_service_date).toLocaleDateString():"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(T.Badge,{variant:"outline",children:e.status||"active"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)(y.default,{className:"text-primary hover:underline",href:`/dashboard/work/maintenance-plans/${e.id}`,children:"View"})})]},e.id))})]})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)(N.ShieldCheck,{className:"text-muted-foreground h-8 w-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No maintenance plans for this property."})]})]})},{id:"notes",title:"Notes",icon:(0,t.jsx)(d.FileText,{className:"size-4"}),count:Z.length,actions:(0,t.jsxs)(_.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(d.FileText,{className:"mr-2 size-4"}),"Add Note"]}),content:(0,t.jsx)(M.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:0===Z.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(d.FileText,{className:"text-muted-foreground mb-4 size-12"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No notes yet"})]}):(0,t.jsx)("div",{className:"space-y-2",children:Z.map((e,s)=>(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("p",{className:"text-sm",children:e.content||e.note}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[e.user&&(0,t.jsxs)("p",{className:"text-muted-foreground text-xs",children:["by ",e.user.name||e.user.email]}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:new Date(e.created_at).toLocaleString()})]})]},s))})})})},{id:"attachments",title:"Attachments",icon:(0,t.jsx)(p.Paperclip,{className:"size-4"}),count:Q.length,actions:(0,t.jsxs)(_.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(p.Paperclip,{className:"mr-2 size-4"}),"Upload File"]}),content:(0,t.jsx)(M.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:0===Q.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(p.Paperclip,{className:"text-muted-foreground mb-4 size-12"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No attachments yet"})]}):(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-3",children:Q.map((e,s)=>(0,t.jsxs)("div",{className:"hover:bg-accent flex items-center gap-3 rounded-lg border p-4",children:[(0,t.jsx)(p.Paperclip,{className:"text-muted-foreground size-4"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.filename||"Untitled"}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:e.file_size?`${(e.file_size/1024).toFixed(1)} KB`:"Unknown size"})]})]},s))})})})},{id:"customer",title:"Customer Information",icon:(0,t.jsx)(b.User,{className:"size-4"}),actions:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[U?.email&&(0,t.jsx)(_.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(y.default,{href:`mailto:${U.email}`,children:[(0,t.jsx)(m.Mail,{className:"mr-2 size-4"}),"Email Customer"]})}),U?.phone&&(0,t.jsx)(_.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(y.default,{href:`tel:${U.phone}`,children:[(0,t.jsx)(g.Phone,{className:"mr-2 size-4"}),"Call Customer"]})}),U?.id&&(0,t.jsx)(_.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(y.default,{href:`/dashboard/customers/${U.id}`,children:[(0,t.jsx)(b.User,{className:"mr-2 size-4"}),"View Full Profile"]})})]}),content:(0,t.jsx)(M.UnifiedAccordionContent,{children:U?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-primary/10 flex size-12 items-center justify-center rounded-full",children:(0,t.jsx)(b.User,{className:"text-primary size-6"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:U.display_name||`${U.first_name||""} ${U.last_name||""}`.trim()||"Customer"}),U.company_name&&(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:U.company_name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[U.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(m.Mail,{className:"text-muted-foreground size-4 shrink-0"}),(0,t.jsx)("a",{href:`mailto:${U.email}`,className:"text-primary hover:underline",children:U.email})]}),U.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(g.Phone,{className:"text-muted-foreground size-4 shrink-0"}),(0,t.jsx)("a",{href:`tel:${U.phone}`,className:"text-primary hover:underline",children:U.phone})]}),!U.email&&!U.phone&&(0,t.jsx)("p",{className:"text-muted-foreground text-sm italic",children:"No contact information available"})]})]})]})}):(0,t.jsxs)("div",{className:"text-muted-foreground flex flex-col items-center justify-center py-12 text-center text-sm",children:[(0,t.jsx)(b.User,{className:"text-muted-foreground mb-4 size-10"}),"No customer information available"]})})}],ee=L?.metadata?.tags&&Array.isArray(L.metadata.tags)&&L.metadata.tags||[],et=(0,t.jsx)("div",{className:"w-full px-2 sm:px-0",children:(0,t.jsx)("div",{className:"bg-muted/50 mx-auto max-w-7xl rounded-md shadow-sm",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:p-6",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-primary/10 ring-border flex size-16 items-center justify-center rounded-lg ring-2",children:(0,t.jsx)(r.Building2,{className:"text-primary size-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:L.name||L.address}),(0,t.jsxs)("p",{className:"text-muted-foreground text-sm",children:[L.city,", ",L.state," ",L.zip_code]})]})]})})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(T.Badge,{className:"gap-1.5",variant:"secondary",children:[(0,t.jsx)(r.Building2,{className:"size-3.5"}),L.property_type||"Residential"]}),L.square_footage&&(0,t.jsxs)(T.Badge,{className:"gap-1.5",variant:"secondary",children:[(0,t.jsx)(j.default,{className:"size-3.5"}),L.square_footage.toLocaleString()," sq ft"]}),S.equipmentCount>0&&(0,t.jsxs)(T.Badge,{className:"gap-1.5",variant:"secondary",children:[(0,t.jsx)(v.Settings,{className:"size-3.5"}),S.equipmentCount," Equipment"]}),S.activeJobs>0&&(0,t.jsxs)(T.Badge,{className:"gap-1.5",variant:"secondary",children:[(0,t.jsx)(a.Briefcase,{className:"size-3.5"}),S.activeJobs," Active Jobs"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground text-xs font-medium",children:"Tags:"}),(0,t.jsx)(P.EntityTags,{entityId:L.id,entityType:"property",onUpdateTags:(e,t)=>(0,C.updateEntityTags)("property",e,t),tags:ee})]}),L&&(0,t.jsx)(A.TravelTime,{property:{address:L.address??void 0,city:L.city??void 0,state:L.state??void 0,zip_code:L.zip_code??void 0,lat:L.lat??void 0,lon:L.lon??void 0}})]})})});return(0,t.jsx)(z.DetailPageContentLayout,{activities:W,attachments:[],customHeader:et,customSections:Y,defaultOpenSection:"location",enableReordering:!0,notes:[],showStandardSections:{activities:!0,notes:!1,attachments:!1,relatedItems:!1},storageKey:"property-details"})}e.s(["PropertyPageContent",()=>O],594829)},134181,e=>{e.v(t=>Promise.all(["static/chunks/6680116ea3e49da7.js"].map(t=>e.l(t))).then(()=>t(388024)))}]);