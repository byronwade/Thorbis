(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,616291,e=>{"use strict";let s=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>s])},664136,e=>{"use strict";var s=e.i(616291);e.s(["Edit",()=>s.default])},769588,e=>{"use strict";e.i(116233),e.s([])},920312,e=>{"use strict";let s=(0,e.i(383206).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["default",()=>s])},148347,e=>{"use strict";var s=e.i(920312);e.s(["Filter",()=>s.default])},405373,e=>{"use strict";var s=e.i(552038),a=(0,s.createServerReference)("40fd6a80b32792fab749933f98f07503d8e94c0305",s.callServer,void 0,s.findSourceMapURL,"purchasePhoneNumber");e.s(["purchasePhoneNumber",()=>a])},297175,e=>{"use strict";var s=e.i(552038),a=(0,s.createServerReference)("406864ae05b8b51c66cc2c335999e5011a41cb521f",s.callServer,void 0,s.findSourceMapURL,"searchPhoneNumbers");e.s(["searchPhoneNumbers",()=>a])},364537,e=>{"use strict";var s=e.i(111043),a=e.i(982686),r=e.i(664136),t=e.i(747146),n=e.i(848475),i=e.i(939397),l=e.i(121085),c=e.i(532727),d=e.i(826463);e.i(553153);var o=e.i(363712);e.i(889265);var m=e.i(677607);e.i(254851);var u=e.i(605278);e.i(244242);var x=e.i(563078);function h({numbers:e}){return(0,s.jsx)("div",{className:"space-y-4 p-6",children:0===e.length?(0,s.jsx)(g,{}):e.map(e=>(0,s.jsx)(j,{number:e},e.id))})}function j({number:e}){return(0,s.jsxs)(u.Card,{children:[(0,s.jsx)(u.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.CardTitle,{className:"text-2xl font-semibold",children:e.formattedNumber}),(0,s.jsx)(o.Badge,{variant:function(e){switch(e){case"active":return"default";case"porting":return"secondary";case"suspended":return"destructive";default:return"outline"}}(e.status),children:function(e){if(!e)return"Unknown";switch(e){case"active":return"Active";case"pending":return"Pending Setup";case"porting":return"Porting";case"suspended":case"suspended":return"Suspended";default:return e}}(e.status)}),"toll-free"===e.numberType&&(0,s.jsx)(o.Badge,{variant:"secondary",children:"Toll-Free"})]}),(0,s.jsxs)(u.CardDescription,{children:[e.routingRule??"Routing not configured"," ",e.voicemailEnabled&&"â€¢ Voicemail enabled"]}),(0,s.jsx)("div",{className:"text-muted-foreground flex flex-wrap items-center gap-2 text-xs",children:e.metadata?.ten_dlc_campaign_id?(0,s.jsx)(o.Badge,{variant:"secondary",children:"10DLC Linked"}):(0,s.jsx)(o.Badge,{variant:"outline",children:"10DLC Pending"})})]}),(0,s.jsxs)(x.DropdownMenu,{children:[(0,s.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(m.Button,{size:"icon",variant:"ghost",children:(0,s.jsx)(n.MoreVertical,{className:"size-4"})})}),(0,s.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(x.DropdownMenuItem,{children:[(0,s.jsx)(r.Edit,{className:"mr-2 size-4"}),"Configure Routing"]}),(0,s.jsxs)(x.DropdownMenuItem,{children:[(0,s.jsx)(l.Settings,{className:"mr-2 size-4"}),"Settings"]}),(0,s.jsx)(x.DropdownMenuSeparator,{}),(0,s.jsxs)(x.DropdownMenuItem,{className:"text-destructive",children:[(0,s.jsx)(c.Trash2,{className:"mr-2 size-4"}),"Release Number"]})]})]})]})}),(0,s.jsxs)(u.CardContent,{children:["porting"===e.status&&(0,s.jsx)("div",{className:"border-primary bg-primary dark:border-primary dark:bg-primary/20 mb-4 rounded-lg border p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-primary dark:text-primary font-medium",children:["Porting ",e.portingStatus]}),(0,s.jsxs)("div",{className:"text-primary dark:text-primary text-sm",children:["Estimated completion: ",e.portingEta]})]}),(0,s.jsx)(m.Button,{size:"sm",variant:"outline",children:"View Status"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[(0,s.jsx)(p,{color:"text-success dark:text-success",icon:i.Phone,label:"Incoming Calls",value:e.incomingCallsCount.toLocaleString()}),(0,s.jsx)(p,{color:"text-primary dark:text-primary",icon:i.Phone,label:"Outgoing Calls",value:e.outgoingCallsCount.toLocaleString()}),(0,s.jsx)(p,{color:"text-accent-foreground dark:text-accent-foreground",icon:t.MessageSquare,label:"SMS Sent",value:e.smsSentCount.toLocaleString()}),(0,s.jsx)(p,{color:"text-warning dark:text-warning",icon:a.DollarSign,label:"Monthly Cost",value:`$${(e.monthlyCost??0).toFixed(2)}`})]}),(0,s.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:e.features.map(e=>(0,s.jsx)(o.Badge,{className:"capitalize",variant:"outline",children:e},e))})]})]})}function p({icon:e,label:a,value:r,color:t}){return(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[(0,s.jsx)(e,{className:`size-4 ${t}`}),a]}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:r})]})}function g(){return(0,s.jsx)(u.Card,{children:(0,s.jsxs)(u.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(i.Phone,{className:"text-muted-foreground mb-4 size-12"}),(0,s.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"No phone numbers yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 text-center text-sm",children:"Get started by purchasing a new number or porting an existing one"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(m.Button,{variant:"outline",children:[(0,s.jsx)(d.Upload,{className:"mr-2 size-4"}),"Port Number"]}),(0,s.jsxs)(m.Button,{children:[(0,s.jsx)(i.Phone,{className:"mr-2 size-4"}),"Purchase Number"]})]})]})})}e.s(["PhoneNumbersList",()=>h])},934291,e=>{"use strict";var s=e.i(111043),a=e.i(136764),r=e.i(148347),t=e.i(939397),n=e.i(287268),i=e.i(826463),l=e.i(176378),c=e.i(970799);e.i(889265);var d=e.i(677607);e.i(51478);var o=e.i(635613);e.i(868198);var m=e.i(798764),u=e.i(641304),x=e.i(702948);e.i(539870);var h=e.i(846358);let j=(0,x.default)(()=>e.A(244070).then(e=>({default:e.NumberPortingWizard})),{loadableGenerated:{modules:[252368]},loading:()=>(0,s.jsx)(h.Dialog,{open:!0,children:(0,s.jsx)(h.DialogContent,{children:(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:"Loading Port Number Wizard..."}),(0,s.jsx)(h.DialogDescription,{children:(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(u.Loader2,{className:"text-muted-foreground size-8 animate-spin"})})})]})})}),ssr:!1});function p({open:e,onOpenChange:a,onSuccess:r}){return e?(0,s.jsx)(j,{open:e,onOpenChange:a,onSuccess:r}):null}var g=e.i(79254),f=e.i(982686),v=e.i(904653),b=e.i(405373),N=e.i(297175);e.i(553153);var S=e.i(363712);e.i(769588);var y=e.i(1414);e.i(149989);var C=e.i(880177),w=e.i(220168);function P({open:e,onOpenChange:a,onSuccess:r,companyId:i}){let l=(0,v.useRouter)(),[x,j]=(0,c.useState)("831"),[p,P]=(0,c.useState)("local"),[z,k]=(0,c.useState)(!0),[D,F]=(0,c.useState)(!0),[M,L]=(0,c.useState)(!1),[T,B]=(0,c.useState)(null),[I,R]=(0,c.useState)([]),A=async()=>{L(!0);let e=[];z&&e.push("voice"),D&&(e.push("sms"),e.push("mms"));let{data:s}=await (0,N.searchPhoneNumbers)({areaCode:x||void 0,numberType:p,features:e,limit:10});R(s||[]),L(!1)},$=async e=>{B(e),await (0,b.purchasePhoneNumber)({phoneNumber:e,companyId:i}),B(null),r?r(e):(a(!1),l.refresh())};return(0,s.jsx)(h.Dialog,{onOpenChange:a,open:e,children:(0,s.jsxs)(h.DialogContent,{className:"max-w-2xl",children:[(0,s.jsxs)(h.DialogHeader,{children:[(0,s.jsx)(h.DialogTitle,{children:"Search Phone Numbers"}),(0,s.jsx)(h.DialogDescription,{children:"Find and purchase a new phone number for your business"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(w.StandardFormRow,{cols:2,children:[(0,s.jsx)(w.StandardFormField,{label:"Area Code",htmlFor:"areaCode",description:"Leave empty to search all area codes",children:(0,s.jsx)(o.Input,{id:"areaCode",maxLength:3,onChange:e=>j(e.target.value),placeholder:"e.g., 831, 650, 415",value:x})}),(0,s.jsx)(w.StandardFormField,{label:"Number Type",htmlFor:"numberType",children:(0,s.jsxs)(m.Select,{onValueChange:e=>P(e),value:p,children:[(0,s.jsx)(m.SelectTrigger,{id:"numberType",children:(0,s.jsx)(m.SelectValue,{})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"local",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("span",{children:"Local Number"}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"$1/month"})]})}),(0,s.jsx)(m.SelectItem,{value:"toll-free",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("span",{children:"Toll-Free (800/888/877/866/855)"}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"$2/month"})]})})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.Label,{children:"Required Features"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(y.Checkbox,{checked:z,id:"voice",onCheckedChange:e=>k(!!e)}),(0,s.jsx)("label",{className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"voice",children:"Voice Calling"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(y.Checkbox,{checked:D,id:"sms",onCheckedChange:e=>F(!!e)}),(0,s.jsx)("label",{className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"sms",children:"SMS/MMS Messaging"})]})]})]}),(0,s.jsx)(d.Button,{className:"w-full",disabled:M,onClick:A,size:"lg",children:M?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Loader2,{className:"mr-2 size-4 animate-spin"}),"Searching..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Search,{className:"mr-2 size-4"}),"Search Available Numbers"]})}),I.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(C.Label,{children:["Available Numbers (",I.length,")"]}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:"Click to purchase instantly"})]}),(0,s.jsx)("div",{className:"max-h-[400px] space-y-2 overflow-y-auto rounded-lg border p-2",children:I.map(e=>{var a;let r;return(0,s.jsxs)("div",{className:"bg-card hover:bg-accent flex items-center justify-between rounded-md border p-3 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(t.Phone,{className:"text-muted-foreground size-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:(r=(a=e.phone_number).replace(/\D/g,"").match(/^1?(\d{3})(\d{3})(\d{4})$/))?`(${r[1]}) ${r[2]}-${r[3]}`:a}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.features?.map(e=>{let a="string"==typeof e?e:e?.name||String(e);return(0,s.jsx)(S.Badge,{className:"text-xs",variant:"secondary",children:a.toUpperCase()},a)})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,s.jsx)(f.DollarSign,{className:"size-3"}),"toll-free"===p?"2.00":"1.00","/mo"]}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:"$0 setup fee"})]}),(0,s.jsx)(d.Button,{disabled:!!T,onClick:()=>$(e.phone_number),size:"sm",children:T===e.phone_number?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Loader2,{className:"mr-2 size-3 animate-spin"}),"Purchasing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Check,{className:"mr-2 size-3"}),"Purchase"]})})]})]},e.phone_number)})})]}),!M&&0===I.length&&x&&(0,s.jsxs)("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[(0,s.jsx)(t.Phone,{className:"text-muted-foreground mx-auto mb-2 size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No numbers found. Try a different area code or search all areas."})]})]})]})})}function z({companyId:e}){let[u,x]=(0,c.useState)(!1),[h,j]=(0,c.useState)(!1),[g,f]=(0,c.useState)("all");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-background border-b px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,s.jsx)(n.Search,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),(0,s.jsx)(o.Input,{className:"pl-9",placeholder:"Search phone numbers..."})]}),(0,s.jsxs)(m.Select,{onValueChange:f,value:g,children:[(0,s.jsxs)(m.SelectTrigger,{className:"w-[180px]",children:[(0,s.jsx)(r.Filter,{className:"mr-2 size-4"}),(0,s.jsx)(m.SelectValue,{placeholder:"Filter by status"})]}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"all",children:"All Numbers"}),(0,s.jsx)(m.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(m.SelectItem,{value:"pending",children:"Pending Setup"}),(0,s.jsx)(m.SelectItem,{value:"porting",children:"Porting"}),(0,s.jsx)(m.SelectItem,{value:"suspended",children:"Suspended"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsxs)(l.default,{href:"/dashboard/settings/communications/porting-status",children:[(0,s.jsx)(a.Clock,{className:"mr-2 size-4"}),"Porting Status"]})}),(0,s.jsxs)(d.Button,{onClick:()=>j(!0),variant:"outline",children:[(0,s.jsx)(i.Upload,{className:"mr-2 size-4"}),"Port Number"]}),(0,s.jsxs)(d.Button,{onClick:()=>x(!0),children:[(0,s.jsx)(t.Phone,{className:"mr-2 size-4"}),"Purchase Number"]})]})]}),(0,s.jsxs)("div",{className:"text-muted-foreground mt-3 flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:"3"})," active numbers"]}),(0,s.jsx)("div",{className:"bg-border h-4 w-px"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:"$3.00"}),"/month total cost"]}),(0,s.jsx)("div",{className:"bg-border h-4 w-px"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:"1,247"})," minutes this month"]}),(0,s.jsx)("div",{className:"bg-border h-4 w-px"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:"423"})," SMS sent"]})]})]}),(0,s.jsx)(P,{companyId:e,onOpenChange:x,open:u}),(0,s.jsx)(p,{onOpenChange:j,open:h})]})}e.s(["PhoneNumbersToolbar",()=>z],934291)},244070,e=>{e.v(s=>Promise.all(["static/chunks/dfb8a4deb547bec8.js"].map(s=>e.l(s))).then(()=>s(252368)))}]);