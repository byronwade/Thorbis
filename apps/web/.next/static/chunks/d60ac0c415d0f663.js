(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,686804,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["default",()=>t])},550652,e=>{"use strict";var t=e.i(686804);e.s(["ArrowUpRight",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},287156,e=>{"use strict";var t=e.i(111043),r=e.i(970799),a=e.i(151213);function n({section:e,table:n,kanban:s,fallback:i=null,forceView:o}){let l=(0,a.useWorkView)(e),d=(0,a.useSetWorkView)(e),c=o??l;return((0,r.useEffect)(()=>{o&&l!==o&&d(o)},[o]),"kanban"===c)?(0,t.jsx)(t.Fragment,{children:s??i}):(0,t.jsx)(t.Fragment,{children:n??i})}e.s(["WorkDataView",()=>n])},430876,e=>{"use strict";var t=e.i(111043),r=e.i(970799);e.i(116233);var a=e.i(363712),n=e.i(999),s=e.i(691225),i=e.i(913532),o=e.i(605278),l=e.i(375308),d=e.i(989239);let c=(0,r.createContext)(null),u=(0,r.createContext)(null),m="kanban-column-";function h(e,t,r){let a=Object.fromEntries(e.map(e=>[e.id,[]]));return t.reduce((e,t)=>{let a=r(t);return e[a]||(e[a]=[]),e[a]=[...e[a],t],e},a)}function x({columns:e,data:a,onDataChange:i,onItemMove:l,getColumnId:u,children:x,className:f,pointerSensorOptions:g,renderDragOverlay:p}){let b=(0,r.useCallback)(u??(e=>e.columnId),[]),[v,w]=(0,r.useState)(()=>h(e,a,b)),[j,y]=(0,r.useState)(null),k=(0,r.useRef)(e);(0,r.useEffect)(()=>{k.current=e},[e]),(0,r.useEffect)(()=>{w(h(e,a,b))},[e,a,b]);let C=(0,n.useSensors)((0,n.useSensor)(n.PointerSensor,{activationConstraint:{distance:6},...g}),(0,n.useSensor)(n.KeyboardSensor,{coordinateGetter:s.sortableKeyboardCoordinates})),N=(0,r.useCallback)(e=>{for(let t of k.current){let r=v[t.id]??[],a=r.findIndex(t=>t.id===e);if(-1!==a)return{columnId:t.id,item:r[a],index:a}}return null},[v]),S=(0,r.useCallback)(e=>{let t=N(e.active.id);t&&y({item:t.item,columnId:t.columnId})},[N]),I=(0,r.useCallback)(e=>{var t;let{active:r,over:a}=e;if(y(null),!a)return;let n=N(r.id);if(!n)return;let s=null,o=null;if("string"==typeof a.id&&a.id.startsWith(m))o=(v[s=a.id.replace(m,"")]??[]).length;else{let e=N(a.id);e&&(s=e.columnId,o=(v[e.columnId]??[]).findIndex(t=>t.id===e.item.id))}if(null===s||null===o||s===n.columnId&&o===n.index)return;let d=Object.fromEntries(Object.entries(v).map(([e,t])=>[e,t.slice()])),c=d[n.columnId]??[],[u]=c.splice(n.index,1);d[n.columnId]=c;let h=d[s]??[],x=n.columnId===s&&n.index<o?o-1:o,f={...u,columnId:s};h.splice(x,0,f),d[s]=h,w(d);let g=(t=k.current,t.flatMap(e=>d[e.id]??[]));i?.(g),l&&l({item:f,fromColumnId:n.columnId,toColumnId:s,toIndex:x})},[N,v,i,l]),M=(0,r.useMemo)(()=>({columns:e,getItems:e=>v[e]??[],findItem:N,activeItem:j}),[e,v,N,j]);return(0,t.jsx)(c.Provider,{value:M,children:(0,t.jsxs)(n.DndContext,{collisionDetection:n.closestCorners,onDragCancel:()=>y(null),onDragEnd:I,onDragStart:S,sensors:C,children:[(0,t.jsx)("div",{className:(0,d.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",f),children:x}),(0,t.jsx)(n.DragOverlay,{children:j?p?p(j.item):(0,t.jsx)(o.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium",children:String(j.item.id)})}):null})]})})}function f({column:e,children:r,className:a}){return(0,t.jsx)(u.Provider,{value:e,children:(0,t.jsx)("section",{"aria-label":`${e.name} column`,className:(0,d.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",a),children:r})})}function g({children:e,className:r}){return(0,t.jsx)("header",{className:(0,d.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",r),children:e})}function p({columnId:e,children:a,emptyState:i,className:o,height:u="28rem"}){let{getItems:h}=function(){let e=(0,r.useContext)(c);if(!e)throw Error("useKanbanContext must be used within a KanbanProvider");return e}(),x=h(e),{setNodeRef:f,isOver:g}=(0,n.useDroppable)({id:`${m}${e}`});return(0,t.jsx)(s.SortableContext,{items:x.map(e=>e.id),strategy:s.verticalListSortingStrategy,children:(0,t.jsx)(l.ScrollArea,{className:"kanban-scroll flex-1",children:(0,t.jsxs)("div",{className:(0,d.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",g&&"ring-primary/60 ring-2 ring-offset-2",o),"data-drop-state":g?"active":"inactive",ref:f,style:{minHeight:u},children:[0===x.length&&i,x.map((e,t)=>a(e,t))]})})})}function b({itemId:e,children:r,className:a}){let{attributes:n,listeners:l,setNodeRef:c,transform:u,transition:m,isDragging:h}=(0,s.useSortable)({id:e}),x={transform:i.CSS.Transform.toString(u),transition:m};return(0,t.jsx)(o.Card,{className:(0,d.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",h&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",a),"data-dragging":h?"":void 0,ref:c,style:x,...l,...n,children:r})}function v({data:e,columns:n,mapToKanbanItem:s,updateEntityStatus:i,renderCard:o,renderDragOverlay:l,calculateColumnMeta:d,onItemMove:c,entityName:u="items",emptyStateMessage:m,showTotals:h=!1,formatTotal:v}){let[w,j]=(0,r.useState)(()=>e.map(s)),y=d||((e,t)=>({count:t.filter(t=>t.columnId===e).length})),k=(0,r.useMemo)(()=>{let e={};return n.forEach(t=>{e[t.id]=y(t.id,w)}),e},[n,w,y]),C=(0,r.useMemo)(()=>n.map(e=>({id:e.id,name:e.name,accentColor:e.accentColor})),[n]),N=m||(e=>`No ${u} in ${e}`);return(0,t.jsx)(x,{className:"pb-4",columns:C,data:w,onDataChange:e=>{i?j(e.map(e=>({...e,entity:i(e.entity,e.columnId)}))):j(e)},onItemMove:c,renderDragOverlay:l||(e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:o(e)})),children:n.map(e=>{let r=k[e.id]??{count:0};return(0,t.jsxs)(f,{className:"min-h-[300px] flex-1",column:C.find(t=>t.id===e.id),children:[(0,t.jsx)(g,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{"aria-hidden":"true",className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.accentColor}}),(0,t.jsx)("span",{className:"text-foreground text-sm font-semibold",children:e.name}),(0,t.jsxs)(a.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[r.count," ",u]}),h&&void 0!==r.total&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(r.total)}),h&&void 0!==r.value&&v&&(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:v(r.value)})]})}),(0,t.jsx)(p,{className:"min-h-[200px]",columnId:e.id,emptyState:(0,t.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:N(e.name)}),children:e=>(0,t.jsx)(b,{itemId:e.id,children:o(e)},e.id)})]},e.id)})})}e.s(["EntityKanban",()=>v],430876)},118888,e=>{"use strict";let t=(0,e.i(383206).default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["default",()=>t])},525551,e=>{"use strict";var t=e.i(118888);e.s(["ShoppingCart",()=>t.default])},241645,e=>{"use strict";var t=e.i(111043),r=e.i(550652),a=e.i(176378);e.i(553153);var n=e.i(363712);e.i(889265);var s=e.i(677607),i=e.i(430876),o=e.i(152088);let l=[{id:"in-stock",name:"In Stock",accentColor:"#22C55E"},{id:"low-stock",name:"Low Stock",accentColor:"#F59E0B"},{id:"on-order",name:"On Order",accentColor:"#2563EB"},{id:"out-of-stock",name:"Out of Stock",accentColor:"#EF4444"}],d=new Map(l.map(e=>[e.id,e.name])),c=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function u({materials:e}){return(0,t.jsx)(i.EntityKanban,{calculateColumnMeta:(e,t)=>{let r=t.filter(t=>t.columnId===e),a=r.reduce((e,t)=>e+t.entity.totalValue,0);return{count:r.length,value:a}},columns:l,data:e,entityName:"items",formatTotal:e=>c.format(e/100),mapToKanbanItem:e=>({id:e.id,columnId:e.status,entity:e,material:e}),renderCard:e=>(0,t.jsx)(m,{item:{...e,material:e.entity}}),renderDragOverlay:e=>(0,t.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:(0,t.jsx)(m,{item:{...e,material:e.entity}})}),showTotals:!0,updateEntityStatus:(e,t)=>({...e,status:t})})}function m({item:e}){let{material:i,columnId:l}=e;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground text-xs font-semibold tracking-wide uppercase",children:i.itemCode}),(0,t.jsx)("h3",{className:"text-foreground text-sm font-semibold",children:i.description}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsx)(n.Badge,{className:(0,o.cn)("text-xs","out-of-stock"===l&&"bg-destructive/10 text-destructive","in-stock"===l&&"bg-primary/10 text-primary"),variant:"in-stock"===l?"secondary":"out-of-stock"===l?"destructive":"outline",children:d.get(l)??l}),(0,t.jsx)(n.Badge,{className:"text-xs",variant:"outline",children:i.category})]})]})}),(0,t.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Quantity"}),(0,t.jsxs)("span",{className:"text-foreground font-medium",children:[i.quantity," ",i.unit]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Unit Cost"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:c.format(i.unitCost/100)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Total Value"}),(0,t.jsx)("span",{className:"text-foreground font-semibold",children:c.format(i.totalValue/100)})]})]}),(0,t.jsx)(s.Button,{asChild:!0,className:"text-primary w-full justify-between text-xs",size:"sm",variant:"ghost",children:(0,t.jsxs)(a.default,{href:`/dashboard/work/materials/${i.id}`,children:["Manage inventory",(0,t.jsx)(r.ArrowUpRight,{className:"size-3.5"})]})})]})}e.s(["MaterialsKanban",()=>u])},971877,e=>{"use strict";var t=e.i(111043),r=e.i(946672),a=e.i(882896),n=e.i(38614),s=e.i(60179),i=e.i(525551),o=e.i(176378);e.i(553153);var l=e.i(363712);e.i(889265);var d=e.i(677607);e.i(244242);var c=e.i(563078),u=e.i(527756),m=e.i(871509),h=e.i(274220),x=e.i(995403);let f={"in-stock":{className:"bg-success hover:bg-success text-white",label:"In Stock"},"low-stock":{className:"bg-warning text-warning dark:bg-warning/20 dark:text-warning",label:"Low Stock"},"out-of-stock":{className:"bg-destructive hover:bg-destructive text-white",label:"Out of Stock"},"on-order":{className:"bg-primary text-primary dark:bg-primary/20 dark:text-primary",label:"On Order"}};function g({materials:e,itemsPerPage:g=50,totalCount:p,currentPage:b=1}){let v=(0,h.useArchiveStore)(e=>e.filters.materials),w=e.filter(e=>{let t=!!(e.archived_at||e.deleted_at);return"active"===v?!t:"archived"!==v||t}),j=[{key:"itemCode",header:"Item Code",width:"w-32",sortable:!0,shrink:!0,render:e=>(0,t.jsx)(o.default,{className:"text-foreground text-sm leading-tight font-medium hover:underline",href:`/dashboard/work/materials/${e.id}`,onClick:e=>e.stopPropagation(),children:e.itemCode})},{key:"description",sortable:!0,header:"Description",width:"flex-1",render:e=>(0,t.jsxs)(o.default,{className:"block min-w-0",href:`/dashboard/work/materials/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"text-foreground truncate text-sm leading-tight font-medium hover:underline",children:e.description}),(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:e.category})]})},{key:"quantity",header:"Quantity",width:"w-28",shrink:!0,align:"right",hideOnMobile:!0,render:e=>(0,t.jsxs)("span",{className:"text-foreground text-sm tabular-nums",children:[e.quantity," ",e.unit]})},{key:"unitCost",header:"Unit Cost",width:"w-28",shrink:!0,align:"right",hideOnMobile:!0,render:e=>(0,t.jsx)("span",{className:"text-foreground text-sm tabular-nums",children:(0,m.formatCurrency)(e.unitCost)})},{key:"totalValue",header:"Total Value",width:"w-32",shrink:!0,align:"right",render:e=>(0,t.jsx)("span",{className:"font-semibold tabular-nums",children:(0,m.formatCurrency)(e.totalValue)})},{key:"status",header:"Status",width:"w-32",shrink:!0,render:e=>{var r;let a,n;return a={className:"bg-muted text-muted-foreground",label:(r=e.status).replace(/[-_]/g," ")},n=f[r]??a,(0,t.jsx)(l.Badge,{className:`text-xs ${n.className}`,variant:"outline",children:n.label})}},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)("div",{"data-no-row-click":!0,children:(0,t.jsxs)(c.DropdownMenu,{children:[(0,t.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",children:(0,t.jsx)(n.MoreHorizontal,{className:"size-4"})})}),(0,t.jsxs)(c.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(c.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(c.DropdownMenuSeparator,{}),(0,t.jsxs)(c.DropdownMenuItem,{children:[(0,t.jsx)(i.ShoppingCart,{className:"mr-2 size-4"}),"Reorder"]}),(0,t.jsxs)(c.DropdownMenuItem,{children:[(0,t.jsx)(s.Package,{className:"mr-2 size-4"}),"Adjust Stock"]}),(0,t.jsx)(c.DropdownMenuSeparator,{}),(0,t.jsxs)(c.DropdownMenuItem,{children:[(0,t.jsx)(r.Archive,{className:"mr-2 size-4"}),"Archive"]})]})]})})}],y=[{label:"Reorder",icon:(0,t.jsx)(i.ShoppingCart,{className:"h-4 w-4"}),onClick:e=>{window.location.href=`/dashboard/work/purchase-orders/new?materials=${Array.from(e).join(",")}`}},{label:"Export",icon:(0,t.jsx)(a.Download,{className:"h-4 w-4"}),onClick:t=>{let r=new Blob([["Item Code,Description,Category,Quantity,Unit,Unit Cost,Total Value,Status",...e.filter(e=>t.has(e.id)).map(e=>[e.itemCode,`"${e.description}"`,e.category,e.quantity,e.unit,(0,m.formatCurrency)(e.unitCost),(0,m.formatCurrency)(e.totalValue),e.status].join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=`materials-export-${new Date().toISOString().split("T")[0]}.csv`,n.click(),URL.revokeObjectURL(a),x.toast.success(`Exported ${t.size} material${t.size>1?"s":""}`)}},{label:"Archive",icon:(0,t.jsx)(r.Archive,{className:"h-4 w-4"}),variant:"destructive",onClick:e=>{x.toast.info(`Archive functionality for ${e.size} material${e.size>1?"s":""} coming soon`)}}];return(0,t.jsx)(u.FullWidthDataTable,{bulkActions:y,columns:j,data:w,emptyIcon:(0,t.jsx)(s.Package,{className:"text-muted-foreground mx-auto h-12 w-12"}),emptyMessage:"No materials found",enableSelection:!0,entity:"materials",getHighlightClass:()=>"bg-destructive/30 dark:bg-destructive/10",getItemId:e=>e.id,isArchived:e=>!!(e.archived_at||e.deleted_at),isHighlighted:e=>"out-of-stock"===e.status,itemsPerPage:g,totalCount:p??w.length,currentPageFromServer:b,serverPagination:!0,onRefresh:()=>window.location.reload(),onRowClick:e=>window.location.href=`/dashboard/work/materials/${e.id}`,searchFilter:(e,t)=>{let r=t.toLowerCase();return e.itemCode.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)},searchPlaceholder:"Search materials by code, description, category, or status...",showArchived:"active"!==v,showRefresh:!1})}e.s(["MaterialsTable",()=>g])}]);