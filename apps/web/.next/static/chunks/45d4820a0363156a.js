(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,672573,e=>{"use strict";let t=(0,e.i(383206).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["default",()=>t])},15751,e=>{"use strict";var t=e.i(672573);e.s(["MapPin",()=>t.default])},871509,e=>{"use strict";function t(e,a={}){let{minimumFractionDigits:r=0,maximumFractionDigits:s=a.decimals??2,showZero:l=!0,decimals:i}=a,n=void 0!==i?i:s,d=void 0!==i?i:r;return null==e?l?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(0):"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:d,maximumFractionDigits:n}).format(e/100)}function a(e,t={}){let{minimumFractionDigits:r=0,maximumFractionDigits:s=t.decimals??2,showZero:l=!0,decimals:i}=t,n=void 0!==i?i:s,d=void 0!==i?i:r;return null==e||Number.isNaN(e)?l?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(0):"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:d,maximumFractionDigits:n}).format(e)}function r(e,t={}){let a;if(!e)return"—";let s="number"==typeof e||"string"==typeof e?new Date(e):e;if(Number.isNaN(s.getTime()))return"—";let l="table";"string"==typeof t?l=t||"table":(l=t.preset||"table",a=t.custom);let i=a||({short:{month:"short",day:"numeric",year:"numeric"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"},table:{month:"short",day:"numeric",year:"numeric"},time:{hour:"numeric",minute:"2-digit",hour12:!0},datetime:{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}})[l];return new Intl.DateTimeFormat("en-US",i).format(s)}function s(e){return r(e,{preset:"datetime"})}function l(e,t){if(!e)return"—";let a="number"==typeof e||"string"==typeof e?new Date(e):e;if(Number.isNaN(a.getTime()))return"—";if(!t)return r(a,{preset:"short"});let s="number"==typeof t||"string"==typeof t?new Date(t):t;if(Number.isNaN(s.getTime())||a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()&&a.getDate()===s.getDate())return r(a,{preset:"short"});let l=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(a),i=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s);return`${l} → ${i}`}e.s(["formatCurrency",()=>t,"formatCurrencyFromDollars",()=>a,"formatDate",()=>r,"formatDateRange",()=>l,"formatDateTime",()=>s])},686787,e=>{"use strict";e.i(116233),e.s([])},306466,e=>{"use strict";let t=(0,e.i(383206).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>t])},598870,e=>{"use strict";var t=e.i(306466);e.s(["Save",()=>t.default])},616291,e=>{"use strict";let t=(0,e.i(383206).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>t])},664136,e=>{"use strict";var t=e.i(616291);e.s(["Edit",()=>t.default])},52573,e=>{"use strict";let t=(0,e.i(383206).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>t])},694288,e=>{"use strict";var t=e.i(52573);e.s(["Link",()=>t.default])},519131,e=>{"use strict";let t=(0,e.i(383206).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["default",()=>t])},233654,e=>{"use strict";var t=e.i(519131);e.s(["Paperclip",()=>t.default])},711448,e=>{"use strict";e.i(116233),e.s([])},305549,585506,e=>{"use strict";var t=e.i(111043),a=e.i(868422),r=e.i(227009);e.i(670258);var s=e.i(921251);e.i(711448);var l=e.i(157222);function i({activities:e}){return e&&0!==e.length?(0,t.jsx)(l.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:e.map(e=>(0,t.jsxs)("div",{className:"hover:bg-muted/50 flex gap-3 rounded-lg border p-3 transition-colors",children:[(0,t.jsxs)(s.Avatar,{className:"size-8 flex-shrink-0",children:[(0,t.jsx)(s.AvatarImage,{src:e.user?.avatar}),(0,t.jsx)(s.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-sm break-words",children:e.description}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[e.user?.name," •"," ",(0,a.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})]})]})]},e.id))})}):(0,t.jsx)(l.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(r.Activity,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No activity yet"})]})})})}e.s(["ActivityLogSection",()=>i],305549);var n=e.i(882896),d=e.i(606661),o=e.i(233654),c=e.i(371526),u=e.i(826463),m=e.i(970799);e.i(889265);var h=e.i(677607),g=e.i(51052);function x({attachments:e,entityType:a,entityId:r,onUpload:s}){let{toast:i}=(0,g.useToast)(),[x,b]=(0,m.useState)(!1),p=async e=>{let t=e.target.files;if(t&&0!==t.length){b(!0);try{s&&await s(t),i.success(`${t.length} file(s) uploaded successfully`)}catch(e){i.error("Failed to upload files")}finally{b(!1),e.target.value=""}}};return(0,t.jsx)(l.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{className:"hidden",disabled:x,id:"file-upload",multiple:!0,onChange:p,type:"file"}),(0,t.jsx)("label",{htmlFor:"file-upload",children:(0,t.jsx)(h.Button,{asChild:!0,className:"w-full cursor-pointer",disabled:x,size:"sm",variant:"outline",children:(0,t.jsx)("span",{children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Upload,{className:"mr-2 size-4 animate-pulse"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Plus,{className:"mr-2 size-4"}),"Upload Files"]})})})})]}),e&&e.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,t.jsx)(d.FileText,{className:"text-muted-foreground size-4 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.original_file_name||e.file_name||"Untitled"}),(0,t.jsxs)("p",{className:"text-muted-foreground text-xs",children:[e.file_size?`${(e.file_size/1024).toFixed(1)} KB`:"",e.category&&` • ${e.category}`]})]})]}),(0,t.jsx)(h.Button,{asChild:!0,className:"flex-shrink-0",size:"sm",variant:"ghost",children:(0,t.jsx)("a",{download:!0,href:e.storage_url||e.url,rel:"noopener noreferrer",target:"_blank",children:(0,t.jsx)(n.Download,{className:"size-4"})})})]},e.id))}):(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Paperclip,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No attachments yet"})]})})]})})}e.s(["AttachmentsSection",()=>x],585506)},821305,278633,e=>{"use strict";var t=e.i(111043),a=e.i(227009),r=e.i(606661),s=e.i(694288),l=e.i(233654),i=e.i(702948),n=e.i(152088);function d({header:e,customHeader:a,metadata:r,beforeContent:s,afterContent:l,children:i,className:d,contentGapClassName:o,statsBar:c}){let u=r??e?.metadata??[];return(0,t.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4 pb-24 lg:gap-5",d),"data-detail-shell":"",children:[c,a??(e?(0,t.jsx)(m,{section:e}):null),u.length>0?(0,t.jsx)(h,{items:u}):null,s,i?(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",o),children:i}):null,l]})}let o={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},c={default:"border border-border/60 bg-card shadow-sm",muted:"border border-border/60 bg-muted/40 shadow-sm",subtle:"border border-border/40 bg-card/80 shadow-sm",ghost:"border border-border/50 bg-transparent shadow-none"};function u({children:e,className:a,padding:r="md",variant:s="default"}){return(0,t.jsx)("section",{className:(0,n.cn)("rounded-xl",c[s],a),children:(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",o[r]),children:e})})}function m({section:e}){var a;let{breadcrumbs:r,leadingVisual:s,title:l,subtitle:i,description:n,badges:d,actions:o,secondaryActions:c}=e;return(0,t.jsxs)("header",{className:"flex flex-col gap-4 lg:gap-6",children:[r?(0,t.jsx)("div",{className:"text-muted-foreground text-sm",children:r}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between lg:gap-8",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[s?(0,t.jsx)("div",{className:"flex items-center justify-center",children:s}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(a=l)?"string"==typeof a?(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:a}):(0,t.jsx)("div",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:a}):null,i?(0,t.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm md:text-base",children:i}):null]})]}),n?(0,t.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm",children:n}):null]})}),d&&d.length>0?(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:d}):null]}),g(o,c)?(0,t.jsxs)("div",{className:"hidden flex-wrap items-center gap-2 lg:flex",children:[o?.map((e,a)=>(0,t.jsx)("span",{className:"inline-flex",children:e},a)),c?.map((e,a)=>(0,t.jsx)("span",{className:"inline-flex",children:e},`secondary-${a}`))]}):null]}),g(o,c)?(0,t.jsxs)("div",{className:"flex flex-col gap-2 lg:hidden",children:[o&&o.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,a)=>(0,t.jsx)("span",{className:"flex-1",children:e},a))}):null,c&&c.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((e,a)=>(0,t.jsx)("span",{className:"flex-1",children:e},`secondary-mobile-${a}`))}):null]}):null]})}function h({items:e}){return(0,t.jsx)("section",{className:"@xl-page:grid-cols-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:e.map((e,a)=>(0,t.jsxs)("div",{className:"border-border/50 bg-card/60 flex flex-col gap-1 rounded-lg border px-4 py-3 shadow-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2 text-xs font-medium tracking-wide uppercase",children:[e.icon,e.label]}),(0,t.jsx)("div",{className:"text-foreground text-sm font-semibold",children:e.value}),e.helperText?(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.helperText}):null]},a))})}function g(e,t){return!!(e&&e.length>0||t&&t.length>0)}e.s(["DetailPageShell",()=>d,"DetailPageSurface",()=>u],278633);var x=e.i(305549),b=e.i(585506),p=e.i(868422),f=e.i(371526),v=e.i(970799);e.i(670258);var y=e.i(921251);e.i(889265);var k=e.i(677607);e.i(526120);var j=e.i(610120);e.i(711448);var N=e.i(157222),w=e.i(51052);function P({notes:e,entityType:a,entityId:s,onAddNote:l}){let{toast:i}=(0,w.useToast)(),[n,d]=(0,v.useState)(!1),[o,c]=(0,v.useState)(""),[u,m]=(0,v.useState)(!1),h=async()=>{if(l){if(!o.trim())return void i.error("Please enter a note");m(!0);try{await l(o),i.success("Note added successfully"),c(""),d(!1)}catch(e){i.error("Failed to add note")}finally{m(!1)}}};return(0,t.jsx)(N.UnifiedAccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[l&&(n?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j.Textarea,{autoFocus:!0,onChange:e=>c(e.target.value),placeholder:"Enter your note...",rows:3,value:o}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(k.Button,{disabled:u,onClick:h,size:"sm",children:u?"Saving...":"Save Note"}),(0,t.jsx)(k.Button,{onClick:()=>{d(!1),c("")},size:"sm",variant:"outline",children:"Cancel"})]})]}):(0,t.jsxs)(k.Button,{className:"w-full",onClick:()=>d(!0),size:"sm",variant:"outline",children:[(0,t.jsx)(f.Plus,{className:"mr-2 size-4"}),"Add Note"]})),e&&e.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsx)("div",{className:"hover:bg-muted/50 rounded-lg border p-3 transition-colors",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(y.Avatar,{className:"size-8 flex-shrink-0",children:[(0,t.jsx)(y.AvatarImage,{src:e.user?.avatar}),(0,t.jsx)(y.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium",children:e.user?.name}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:(0,p.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})})]}),(0,t.jsx)("p",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:e.content||e.note})]})]})},e.id))}):(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(r.FileText,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No notes yet"})]})})]})})}var S=e.i(87912),C=e.i(176378);e.i(553153);var A=e.i(363712);function D({relatedItems:e}){return e&&0!==e.length?(0,t.jsx)(N.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)(C.default,{className:"group hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",href:e.href,children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.title}),e.badge&&(0,t.jsx)(A.Badge,{className:"flex-shrink-0",variant:e.badge.variant||"default",children:e.badge.label})]}),e.subtitle&&(0,t.jsx)("p",{className:"text-muted-foreground truncate text-xs",children:e.subtitle})]}),(0,t.jsx)(S.ChevronRight,{className:"text-muted-foreground size-4 flex-shrink-0 transition-transform group-hover:translate-x-0.5"})]},e.id))})}):(0,t.jsx)(N.UnifiedAccordionContent,{children:(0,t.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(s.Link,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No related items"})]})})})}let F=(0,i.default)(()=>e.A(134181).then(e=>e.UnifiedAccordion),{loadableGenerated:{modules:[388024]},ssr:!1});function T({header:e,customHeader:i,customSections:o,activities:c=[],notes:m=[],attachments:h=[],relatedItems:g=[],showStandardSections:p={activities:!0,notes:!0,attachments:!0,relatedItems:!0},className:f,defaultOpenSection:v,beforeContent:y,afterContent:k,statsBar:j,contentGapClassName:N,surfacePadding:w="none",surfaceVariant:S="default",surfaceClassName:C,storageKey:A,enableReordering:T=!0}){let M=[];!1!==p.activities&&M.push({id:"activity-log",title:"Activity Log",icon:(0,t.jsx)(a.Activity,{className:"size-4"}),count:c.length,content:(0,t.jsx)(x.ActivityLogSection,{activities:c})}),!1!==p.notes&&M.push({id:"notes",title:"Notes",icon:(0,t.jsx)(r.FileText,{className:"size-4"}),count:m.length,content:(0,t.jsx)(P,{notes:m})}),!1!==p.attachments&&M.push({id:"attachments",title:"Attachments",icon:(0,t.jsx)(l.Paperclip,{className:"size-4"}),count:h.length,content:(0,t.jsx)(b.AttachmentsSection,{attachments:h})}),!1!==p.relatedItems&&g.length>0&&M.push({id:"related-items",title:"Related Items",icon:(0,t.jsx)(s.Link,{className:"size-4"}),count:g.length,content:(0,t.jsx)(D,{relatedItems:g})});let z=[...o||[],...M];return(0,t.jsx)(d,{afterContent:k,beforeContent:y,className:(0,n.cn)("w-full",f),contentGapClassName:N??"gap-4",customHeader:i,header:e,statsBar:j,children:(0,t.jsx)(u,{className:(0,n.cn)("overflow-hidden",C),padding:w,variant:S,children:(0,t.jsx)(F,{defaultOpenSection:v||z[0]?.id,enableReordering:T,sections:z,storageKey:A})})})}e.s(["DetailPageContentLayout",()=>T],821305)},431111,e=>{"use strict";var t=e.i(111043),a=e.i(904653),r=e.i(970799),s=e.i(146798);function l({stats:e,children:l}){let i=(0,a.usePathname)()||"/dashboard",n=(0,s.useToolbarStatsStore)(e=>e.setStats),d=(0,s.useToolbarStatsStore)(e=>e.clearStats);return(0,r.useLayoutEffect)(()=>(e?n(i,e):d(i),()=>{d(i)}),[i,e,n,d]),(0,t.jsx)(t.Fragment,{children:l})}e.s(["ToolbarStatsProvider",()=>l])},213075,e=>{"use strict";let t=(0,e.i(383206).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["default",()=>t])},868106,e=>{"use strict";var t=e.i(213075);e.s(["Receipt",()=>t.default])},926991,e=>{"use strict";let t=(0,e.i(383206).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},51866,e=>{"use strict";var t=e.i(926991);e.s(["ChevronLeft",()=>t.default])},172506,e=>{"use strict";var t=e.i(306929);e.s(["ArrowDown",()=>t.default])},698684,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["default",()=>t])},407205,e=>{"use strict";var t=e.i(698684);e.s(["ArrowUp",()=>t.default])},306929,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["default",()=>t])},573951,e=>{"use strict";let t=(0,e.i(383206).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["default",()=>t])},274220,e=>{"use strict";var t=e.i(399168),a=e.i(781403);let r={team_members:"active",customers:"active",jobs:"active",equipment:"active",materials:"active",payments:"active",invoices:"active",estimates:"active",contracts:"active",purchase_orders:"active",service_agreements:"active",maintenance_plans:"active",appointments:"active",properties:"active"},s=(0,t.create)()((0,a.devtools)((0,a.persist)((e,t)=>({filters:{...r},setFilter:(t,a)=>e(e=>({filters:{...e.filters,[t]:a}})),getFilter:e=>t().filters[e]||"active",resetFilter:t=>e(e=>({filters:{...e.filters,[t]:"active"}})),resetAllFilters:()=>e({filters:{...r}})}),{name:"archive-filters",skipHydration:!0,partialize:e=>({filters:e.filters})}),{name:"ArchiveStore"}));e.s(["useArchiveStore",0,s])},415872,e=>{"use strict";let t=(0,e.i(383206).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["default",()=>t])},613240,e=>{"use strict";var t=e.i(415872);e.s(["Printer",()=>t.default])},789067,e=>{"use strict";e.i(116233),e.s([])},635709,e=>{"use strict";e.s(["TablePresets",0,{fullList:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),compact:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),nested:(e={})=>({variant:"nested",enableSelection:e.enableSelection??!1,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:e.serverPagination??!1,serverSearch:e.serverSearch??!1,entity:e.entity,noPadding:e.noPadding??!0}),serverPaginated:(e={})=>({variant:"full",enableSelection:e.enableSelection??!0,showRefresh:e.showRefresh??!1,showPagination:e.showPagination??!0,itemsPerPage:e.itemsPerPage??50,serverPagination:!0,serverSearch:!0,searchPlaceholder:e.searchPlaceholder??"Search...",entity:e.entity,noPadding:e.noPadding??!1}),readOnly:(e={})=>({variant:e.itemsPerPage?"full":"compact",enableSelection:!1,showRefresh:!1,showPagination:e.showPagination??!!e.itemsPerPage,itemsPerPage:e.itemsPerPage??20,serverPagination:e.serverPagination??!1,serverSearch:!1,entity:e.entity,noPadding:e.noPadding??!1}),modal:(e={})=>({variant:"compact",enableSelection:e.enableSelection??!0,showRefresh:!1,showPagination:e.showPagination??!1,itemsPerPage:e.itemsPerPage??10,serverPagination:!1,serverSearch:!1,searchPlaceholder:e.searchPlaceholder??"Search...",noPadding:!0})}])},969249,e=>{"use strict";let t=(0,e.i(383206).default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);e.s(["default",()=>t])},332845,e=>{"use strict";var t=e.i(969249);e.s(["Navigation",()=>t.default])},960876,e=>{"use strict";function t(e,t){if(!e)return t||"Unknown Customer";if(e.display_name)return e.display_name;let a=e.first_name?.trim(),r=e.last_name?.trim();return a&&r?`${a} ${r}`:a||r||(e.company_name?e.company_name:e.email?e.email:t||"Unknown Customer")}function a(e){if(!e)return"?";let a=t(e).split(/\s+/).filter(Boolean);return a.length>=2?(a[0][0]+a[1][0]).toUpperCase():1===a.length&&a[0].length>=2?a[0].slice(0,2).toUpperCase():1===a.length?a[0][0].toUpperCase():"?"}e.s(["getCustomerDisplayName",()=>t,"getCustomerInitials",()=>a])},748887,e=>{"use strict";let t=(0,e.i(383206).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["default",()=>t])},614726,e=>{"use strict";var t=e.i(748887);e.s(["Share2",()=>t.default])},281595,e=>{"use strict";let t=(0,e.i(383206).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["default",()=>t])},133279,e=>{"use strict";var t=e.i(281595);e.s(["Camera",()=>t.default])},510651,e=>{"use strict";let t=(0,e.i(383206).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},123891,e=>{"use strict";var t=e.i(510651);e.s(["ShieldCheck",()=>t.default])},120053,e=>{"use strict";let t=(0,e.i(383206).default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["default",()=>t])},123331,e=>{"use strict";var t=e.i(120053);e.s(["UserCog",()=>t.default])},235670,e=>{"use strict";e.i(116233),e.s([])},49718,307033,e=>{"use strict";var t=e.i(552038),a=(0,t.createServerReference)("70ff12ee81a60340f786414d0baa7af58484dd7488",t.callServer,void 0,t.findSourceMapURL,"updateEntityTags");e.s(["updateEntityTags",()=>a],49718);var r=e.i(111043),s=e.i(371526),l=e.i(540374),i=e.i(212409),n=e.i(904653),d=e.i(970799),o=e.i(995403);e.i(235670);var c=e.i(360648);e.i(889265);var u=e.i(677607);e.i(51478);var m=e.i(635613);e.i(149989);var h=e.i(880177);e.i(220474);var g=e.i(171056);e.i(868198);var x=e.i(798764),b=e.i(220168);let p=[{name:"Red",value:"red",class:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30"},{name:"Orange",value:"orange",class:"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-900/30"},{name:"Amber",value:"amber",class:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-900/30"},{name:"Yellow",value:"yellow",class:"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-900/30"},{name:"Green",value:"green",class:"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/30"},{name:"Emerald",value:"emerald",class:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-900/30"},{name:"Teal",value:"teal",class:"bg-teal-100 text-teal-700 border-teal-200 dark:bg-teal-900/20 dark:text-teal-400 dark:border-teal-900/30"},{name:"Blue",value:"blue",class:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-900/30"},{name:"Indigo",value:"indigo",class:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-900/30"},{name:"Purple",value:"purple",class:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-900/30"},{name:"Pink",value:"pink",class:"bg-pink-100 text-pink-700 border-pink-200 dark:bg-pink-900/20 dark:text-pink-400 dark:border-pink-900/30"},{name:"Gray",value:"gray",class:"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900/20 dark:text-gray-400 dark:border-gray-900/30"}],f=p.reduce((e,t)=>({...e,[t.value]:t.class}),{});function v({entityId:e,entityType:t,tags:a,onUpdateTags:v,readOnly:y=!1}){(0,n.useRouter)();let[k,j]=(0,d.useState)(!1),[N,w]=(0,d.useState)(""),[P,S]=(0,d.useState)("blue"),[C,A]=(0,d.useState)(!1),[D,F]=(0,d.useState)(null),T=e=>"string"==typeof e?e:e.label,M=async()=>{if(!N.trim())return void o.toast.error("Please enter a tag name");A(!0);try{let t={label:N.trim(),color:P},r=[...a,t],s=await v(e,r);s.success?(o.toast.success("Tag added"),j(!1),w(""),S("blue")):o.toast.error(s.error||"Failed to add tag")}catch(e){o.toast.error("Failed to add tag")}finally{A(!1)}},z=async t=>{try{let r=a.filter(e=>{let a=T(e),r=T(t);return a!==r}),s=await v(e,r);s.success?o.toast.success("Tag removed"):o.toast.error(s.error||"Failed to remove tag")}catch(e){o.toast.error("Failed to remove tag")}finally{F(null)}},_=p.find(e=>e.value===P);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[a.map((e,t)=>{let a=T(e),s="string"==typeof e?void 0:e.color,n=s&&f[s]?f[s]:f.blue;return(0,r.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium transition-colors ${n}`,children:[(0,r.jsx)(l.Tag,{className:"size-3"}),(0,r.jsx)("span",{children:a}),!y&&(0,r.jsx)(u.Button,{className:"ml-1 size-4 p-0 hover:bg-black/10 dark:hover:bg-white/10",onClick:()=>F(e),size:"icon",variant:"ghost",children:(0,r.jsx)(i.X,{className:"size-3"})})]},`${a}-${t}`)}),!y&&(0,r.jsxs)(g.Popover,{onOpenChange:j,open:k,children:[(0,r.jsx)(g.PopoverTrigger,{asChild:!0,children:(0,r.jsxs)("button",{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-1.5 rounded-full border border-dashed px-3 py-1.5 text-sm font-medium transition-colors",children:[(0,r.jsx)(s.Plus,{className:"size-3"}),(0,r.jsx)("span",{children:"Add Tag"})]})}),(0,r.jsx)(g.PopoverContent,{align:"start",className:"w-80",side:"bottom",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold",children:"Create Custom Tag"}),(0,r.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Add a custom tag for this ",t]})]}),(0,r.jsx)(b.StandardFormField,{label:"Tag Name",htmlFor:"tag-label",children:(0,r.jsx)(m.Input,{id:"tag-label",onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&M()},placeholder:"e.g., High Priority, VIP, etc.",value:N})}),(0,r.jsx)(b.StandardFormField,{label:"Color",htmlFor:"tag-color",children:(0,r.jsxs)(x.Select,{onValueChange:S,value:P,children:[(0,r.jsx)(x.SelectTrigger,{id:"tag-color",children:(0,r.jsx)(x.SelectValue,{children:_&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`h-4 w-4 rounded-full ${_.class}`}),(0,r.jsx)("span",{children:_.name})]})})}),(0,r.jsx)(x.SelectContent,{children:p.map(e=>(0,r.jsx)(x.SelectItem,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`h-4 w-4 rounded-full ${e.class}`}),(0,r.jsx)("span",{children:e.name})]})},e.value))})]})}),N&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.Label,{children:"Preview"}),(0,r.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-medium ${_?.class}`,children:[(0,r.jsx)(l.Tag,{className:"size-3"}),(0,r.jsx)("span",{children:N})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.Button,{className:"flex-1",onClick:()=>j(!1),variant:"outline",children:"Cancel"}),(0,r.jsx)(u.Button,{className:"flex-1",disabled:C||!N.trim(),onClick:M,children:C?"Saving...":"Add Tag"})]})]})})]})]}),(0,r.jsx)(c.AlertDialog,{onOpenChange:()=>F(null),open:!!D,children:(0,r.jsxs)(c.AlertDialogContent,{children:[(0,r.jsxs)(c.AlertDialogHeader,{children:[(0,r.jsx)(c.AlertDialogTitle,{children:"Remove Tag"}),(0,r.jsxs)(c.AlertDialogDescription,{children:['Are you sure you want to remove the tag "',D?T(D):"",'"? This action cannot be undone.']})]}),(0,r.jsxs)(c.AlertDialogFooter,{children:[(0,r.jsx)(c.AlertDialogCancel,{children:"Cancel"}),(0,r.jsx)(c.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>D&&z(D),children:"Remove"})]})]})})]})}e.s(["EntityTags",()=>v],307033)},933234,e=>{"use strict";var t=e.i(970799);function a(e){(0,t.useEffect)(()=>{let t=t=>{if(!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return;let a=e[t.key];a&&(t.preventDefault(),a())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e])}e.s(["useSectionShortcuts",()=>a])},799296,e=>{"use strict";var t=e.i(113891);e.s(["UserX",()=>t.default])},951801,e=>{"use strict";e.i(116233),e.s([])},435916,e=>{"use strict";let t=(0,e.i(383206).default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);e.s(["default",()=>t])},797566,e=>{"use strict";var t=e.i(435916);e.s(["Maximize2",()=>t.default])},555739,e=>{"use strict";var t=e.i(44104);e.s(["Store",()=>t.default])},923225,e=>{"use strict";let t=(0,e.i(383206).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},630754,e=>{"use strict";var t=e.i(923225);e.s(["CheckCircle",()=>t.default])},321561,e=>{"use strict";let t=(0,e.i(383206).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["default",()=>t])},794712,e=>{"use strict";var t=e.i(111043);e.i(116233);var a=e.i(363712),r=e.i(989239),s=e.i(818796),l=e.i(276389),i=e.i(630754),n=e.i(136764),d=e.i(606661),o=e.i(321561),o=o,c=e.i(559586),u=e.i(900007);function m(e){return({quoted:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Quoted",icon:d.FileText,ariaLabel:"Job status: Quoted"},scheduled:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Scheduled",icon:l.Calendar,ariaLabel:"Job status: Scheduled"},in_progress:{className:"border-blue-500/50 bg-blue-500 text-white hover:bg-blue-600",label:"In Progress",icon:o.default,ariaLabel:"Job status: In Progress"},completed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Completed",icon:i.CheckCircle,ariaLabel:"Job status: Completed"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled",icon:u.XCircle,ariaLabel:"Job status: Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}function h({status:e,type:l,priority:o,contractType:u,className:h,variant:g="outline"}){let x,b=(x=u?({service:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Service"},maintenance:{className:"border-green-200/50 bg-green-50/50 text-green-700 dark:border-green-900/50 dark:bg-green-950/30 dark:text-green-400",label:"Maintenance"},custom:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Custom"}})[u]||{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:u.replace(/_/g," ")}:o?({low:{className:"border-blue-200/50 bg-blue-50/50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/30 dark:text-blue-400",label:"Low"},medium:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Medium"},high:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"High"},urgent:{className:"border-red-200/50 bg-red-50/50 text-red-700 dark:border-red-900/50 dark:bg-red-950/30 dark:text-red-400",label:"Urgent"}})[o]||{className:"border-border/50 bg-background text-muted-foreground",label:o.replace(/_/g," ")}:"purchase_order"===l?({draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},pending:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400",label:"Pending"},approved:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Approved"},partially_received:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Partially Received"},received:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Received"},cancelled:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Cancelled"}})[e]||{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}:l?function(e,t){switch(t){case"job":return m(e);case"invoice":return({paid:{className:"border-green-500/30 bg-green-500 text-white hover:bg-green-600 shadow-sm",label:"Paid",icon:i.CheckCircle,ariaLabel:"Invoice status: Paid"},unpaid:{className:"border-yellow-200/50 bg-yellow-50/50 text-yellow-700 dark:border-yellow-900/50 dark:bg-yellow-950/30 dark:text-yellow-400 shadow-sm",label:"Unpaid",icon:n.Clock,ariaLabel:"Invoice status: Unpaid"},overdue:{className:"border-red-500/30 bg-red-500 text-white hover:bg-red-600 shadow-sm ring-1 ring-red-500/20",label:"Overdue",icon:s.AlertCircle,ariaLabel:"Invoice status: Overdue - requires immediate attention"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50 shadow-sm",label:"Draft",icon:d.FileText,ariaLabel:"Invoice status: Draft"},sent:{className:"border-blue-200/50 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400 shadow-sm",label:"Sent",icon:c.Mail,ariaLabel:"Invoice status: Sent"},pending:{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 shadow-sm",label:"Pending",icon:n.Clock,ariaLabel:"Invoice status: Pending"}})[e]||{className:"border-border/50 bg-background text-muted-foreground shadow-sm",label:e.replace(/_/g," ")};case"estimate":return({accepted:{className:"bg-green-500 hover:bg-green-600 text-white",label:"Accepted"},sent:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Sent"},draft:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Draft"},declined:{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",label:"Declined"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};case"contract":return({signed:{className:"border-green-500/50 bg-green-500 text-white hover:bg-green-600",label:"Signed"},sent:{className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:border-blue-900 dark:bg-blue-950/50 dark:text-blue-400",label:"Sent"},viewed:{className:"border-purple-200/50 bg-purple-50/50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/30 dark:text-purple-400",label:"Viewed"},draft:{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:"Draft"},rejected:{className:"border-red-500/50 bg-red-500 text-white hover:bg-red-600",label:"Rejected"},expired:{className:"border-orange-200/50 bg-orange-50/50 text-orange-700 dark:border-orange-900/50 dark:bg-orange-950/30 dark:text-orange-400",label:"Expired"}})[e]||{className:"border-border/50 bg-background text-muted-foreground hover:bg-muted/50",label:e.replace(/_/g," ")};case"customer":return({active:{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",label:"Active"},inactive:{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:"Inactive"},prospect:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Prospect"},lead:{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",label:"Lead"}})[e]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",label:e.replace(/_/g," ")};default:return{className:"border-border/50 bg-background text-muted-foreground",label:e.replace(/_/g," ")}}}(e,l):m(e)).icon;return(0,t.jsxs)(a.Badge,{className:(0,r.cn)("inline-flex items-center gap-1 px-2 py-0.5 text-[11px] font-medium transition-all duration-200",x.className,h),variant:g,"aria-label":x.ariaLabel||x.label,children:[b&&(0,t.jsx)(b,{className:"h-3 w-3","aria-hidden":"true"}),x.label]})}function g({status:e,className:a}){return(0,t.jsx)(h,{className:a,status:e,type:"job"})}function x({status:e,className:a}){return(0,t.jsx)(h,{className:a,status:e,type:"invoice"})}function b({status:e,className:a}){return(0,t.jsx)(h,{className:a,status:e,type:"estimate"})}function p({status:e,className:a}){return(0,t.jsx)(h,{className:a,status:e,type:"contract"})}function f({status:e,className:a}){return(0,t.jsx)(h,{className:a,status:e,type:"customer"})}function v({priority:e,className:a}){return(0,t.jsx)(h,{className:a,priority:e,status:""})}function y({type:e,className:a}){return(0,t.jsx)(h,{className:a,contractType:e,status:""})}e.s(["ContractStatusBadge",()=>p,"ContractTypeBadge",()=>y,"CustomerStatusBadge",()=>f,"EstimateStatusBadge",()=>b,"InvoiceStatusBadge",()=>x,"JobStatusBadge",()=>g,"PriorityBadge",()=>v,"StatusBadge",()=>h],794712)},534631,e=>{"use strict";e.i(116233),e.s([])},55029,e=>{"use strict";var t=e.i(111043),a=e.i(946672),r=e.i(327149),s=e.i(664136),l=e.i(367571),i=e.i(606661),n=e.i(371526),d=e.i(176378),o=e.i(970799),c=e.i(8392),u=e.i(559586),m=e.i(939397),h=e.i(14435);e.i(889265);var g=e.i(677607);e.i(951801);var x=e.i(622608);e.i(220474);var b=e.i(171056),p=e.i(960876);function f({customer:e}){let a=(0,p.getCustomerDisplayName)(e);return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full shrink-0",children:(0,t.jsx)(h.User,{className:"text-primary h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:a}),e.company_name&&(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:e.company_name})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(u.Mail,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,t.jsx)("a",{href:`mailto:${e.email}`,className:"text-primary hover:underline truncate",onClick:e=>e.stopPropagation(),children:e.email})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(m.Phone,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,t.jsx)("a",{href:`tel:${e.phone}`,className:"text-primary hover:underline",onClick:e=>e.stopPropagation(),children:e.phone})]})]})]})}function v({customer:e,className:a}){let[r,s]=(0,o.useState)(!1),l=(0,p.getCustomerDisplayName)(e);return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(x.HoverCard,{children:[(0,t.jsx)(x.HoverCardTrigger,{asChild:!0,children:(0,t.jsxs)(d.default,{href:`/dashboard/customers/${e.id}`,onClick:e=>e.stopPropagation(),className:"text-sm hover:underline hover:text-primary flex items-center gap-1.5 truncate",children:[(0,t.jsx)(h.User,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"}),(0,t.jsx)("span",{className:"truncate",children:l})]})}),(0,t.jsx)(x.HoverCardContent,{className:"w-80",align:"start",children:(0,t.jsx)(f,{customer:e})})]}),(0,t.jsxs)(b.Popover,{open:r,onOpenChange:s,children:[(0,t.jsx)(b.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 shrink-0","aria-label":`View ${l} contact information`,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(c.Info,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),(0,t.jsx)(b.PopoverContent,{className:"w-80",align:"start",children:(0,t.jsx)(f,{customer:e})})]})]})}e.i(235670);var y=e.i(360648),k=e.i(527756);e.i(534631);var j=e.i(122942),N=e.i(794712),w=e.i(871509),P=e.i(274220);function S({jobs:c,itemsPerPage:u=50,totalCount:m,currentPage:h=1,onJobClick:x,showRefresh:b=!1,initialSearchQuery:f=""}){let S=(0,P.useArchiveStore)(e=>e.filters.jobs),[C,A]=(0,o.useState)(!1),[D,F]=(0,o.useState)(null),[T,M]=(0,o.useState)(!1),[z,_]=(0,o.useState)(new Set),U=c.filter(e=>{let t=!!(e.archived_at??e.deleted_at);return"active"===S?!t:"archived"!==S||t}),I=[{key:"jobNumber",header:"Job Number",width:"w-36",shrink:!0,render:e=>(0,t.jsx)(d.default,{className:"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline",href:`/dashboard/work/${e.id}`,onClick:e=>e.stopPropagation(),children:e.jobNumber??"—"})},{key:"title",header:"Title",width:"flex-1",render:e=>(0,t.jsxs)(d.default,{className:"block min-w-0",href:`/dashboard/work/${e.id}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"truncate text-sm leading-tight font-medium hover:underline",children:e.title??"Untitled Job"}),e.description?(0,t.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:e.description}):null]})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>{let a=e.customer||e.customers;return a?((0,p.getCustomerDisplayName)(a),(0,t.jsx)(v,{customer:a})):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}},{key:"status",header:"Status",width:"w-32",shrink:!0,hideable:!1,render:e=>(0,t.jsx)(N.JobStatusBadge,{status:e.status??"quoted"})},{key:"priority",header:"Priority",width:"w-28",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsx)(N.PriorityBadge,{priority:e.priority??"medium"})},{key:"scheduledStart",header:"Scheduled",width:"w-32",shrink:!0,hideOnMobile:!0,hideable:!0,render:e=>(0,t.jsx)("span",{className:"text-muted-foreground text-sm tabular-nums",children:(0,w.formatDate)(e.scheduledStart??null,"short")})},{key:"totalAmount",header:"Amount",width:"w-32",shrink:!0,align:"right",hideable:!1,render:e=>(0,t.jsx)("span",{className:"font-semibold tabular-nums",children:(0,w.formatCurrency)(e.totalAmount||0,{decimals:2})})},{key:"actions",header:"",width:"w-10",shrink:!0,render:e=>(0,t.jsx)(j.RowActionsDropdown,{actions:[{label:"View Details",icon:l.Eye,href:`/dashboard/work/${e.id}`},{label:"Edit Job",icon:s.Edit,href:`/dashboard/work/${e.id}/edit`},{label:"Create Invoice",icon:i.FileText,href:`/dashboard/work/invoices/new?jobId=${e.id}`,separatorBefore:!0},{label:"Archive Job",icon:a.Archive,variant:"destructive",separatorBefore:!0,onClick:()=>{F(e.id),A(!0)}}]})}],B=[{label:"Archive Selected",icon:(0,t.jsx)(a.Archive,{className:"h-4 w-4"}),onClick:e=>{_(e),M(!0)},variant:"destructive"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.FullWidthDataTable,{bulkActions:B,columns:I,data:U,totalCount:m,currentPageFromServer:h,initialSearchQuery:f,serverPagination:!0,emptyAction:(0,t.jsxs)(g.Button,{onClick:()=>{window.location.href="/dashboard/work/new"},size:"sm",children:[(0,t.jsx)(n.Plus,{className:"mr-2 size-4"}),"Add Job"]}),emptyIcon:(0,t.jsx)(r.Briefcase,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No jobs found",enableSelection:!0,entity:"jobs",getItemId:e=>e.id,isArchived:e=>!!(e.archived_at??e.deleted_at),itemsPerPage:u,onRefresh:()=>{window.location.reload()},onRowClick:e=>{x?x(e):window.location.href=`/dashboard/work/${e.id}`},serverSearch:!0,searchParamKey:"search",searchPlaceholder:"Search jobs by customer, category, equipment, service type...",showArchived:"active"!==S,showRefresh:b}),(0,t.jsx)(y.AlertDialog,{onOpenChange:A,open:C,children:(0,t.jsxs)(y.AlertDialogContent,{children:[(0,t.jsxs)(y.AlertDialogHeader,{children:[(0,t.jsx)(y.AlertDialogTitle,{children:"Archive Job?"}),(0,t.jsx)(y.AlertDialogDescription,{children:"This job will be archived and can be restored within 90 days."})]}),(0,t.jsxs)(y.AlertDialogFooter,{children:[(0,t.jsx)(y.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(y.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{if(D){let{archiveJob:t}=await e.A(805737);(await t(D)).success&&window.location.reload()}},children:"Archive"})]})]})}),(0,t.jsx)(y.AlertDialog,{onOpenChange:M,open:T,children:(0,t.jsxs)(y.AlertDialogContent,{children:[(0,t.jsxs)(y.AlertDialogHeader,{children:[(0,t.jsxs)(y.AlertDialogTitle,{children:["Archive ",z.size," Job(s)?"]}),(0,t.jsxs)(y.AlertDialogDescription,{children:[z.size," job(s) will be archived and can be restored within 90 days."]})]}),(0,t.jsxs)(y.AlertDialogFooter,{children:[(0,t.jsx)(y.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(y.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{let{archiveJob:t}=await e.A(805737),a=0;for(let e of z)(await t(e)).success&&a++;a>0&&window.location.reload()},children:"Archive"})]})]})})]})}e.s(["JobsTable",()=>S],55029)},784601,e=>{"use strict";let t=(0,e.i(383206).default)("cloud-rain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);e.s(["default",()=>t])},964529,e=>{"use strict";var t=e.i(784601);e.s(["CloudRain",()=>t.default])},396987,e=>{"use strict";var t=e.i(111043),a=e.i(904653),r=e.i(970799),s=e.i(237833);function l({actions:e,children:l}){let i=(0,a.usePathname)()||"/dashboard",n=(0,s.useToolbarActionsStore)(e=>e.setActions),d=(0,s.useToolbarActionsStore)(e=>e.clearActions);return(0,r.useLayoutEffect)(()=>(e?n(i,e):d(i),()=>{d(i)}),[i,e,n,d]),(0,t.jsx)(t.Fragment,{children:l})}e.s(["ToolbarActionsProvider",()=>l])},113891,e=>{"use strict";let t=(0,e.i(383206).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);e.s(["default",()=>t])},44104,e=>{"use strict";let t=(0,e.i(383206).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);e.s(["default",()=>t])},160063,e=>{"use strict";let t=(0,e.i(383206).default)("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);e.s(["default",()=>t])},167542,e=>{"use strict";let t=(0,e.i(383206).default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);e.s(["default",()=>t])},902302,e=>{"use strict";let t=(0,e.i(383206).default)("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);e.s(["default",()=>t])},134181,e=>{e.v(t=>Promise.all(["static/chunks/6680116ea3e49da7.js"].map(t=>e.l(t))).then(()=>t(388024)))},805737,e=>{e.v(t=>Promise.all(["static/chunks/b38eb0e05b763b4c.js"].map(t=>e.l(t))).then(()=>t(773915)))}]);