(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,149989,e=>{"use strict";e.i(116233),e.s([])},526120,e=>{"use strict";e.i(116233),e.s([])},199491,e=>{"use strict";let s=(0,e.i(383206).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["default",()=>s])},826463,e=>{"use strict";var s=e.i(199491);e.s(["Upload",()=>s.default])},497490,e=>{"use strict";let s=(0,e.i(383206).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["default",()=>s])},882896,e=>{"use strict";var s=e.i(497490);e.s(["Download",()=>s.default])},737038,667062,e=>{"use strict";function s(e){return s=>{let t=(e?Math[e]:Math.trunc)(s);return 0===t?0:t}}e.s(["getRoundingMethod",()=>s],737038);var t=e.i(516467);function a(e,s){return(0,t.toDate)(e)-(0,t.toDate)(s)}e.s(["differenceInMilliseconds",()=>a],667062)},868422,e=>{"use strict";var s=e.i(238153),t=e.i(492421),a=e.i(632713),i=e.i(539392),l=e.i(516467);function r(e,s){let t=(0,l.toDate)(e)-(0,l.toDate)(s);return t<0?-1:t>0?1:t}var n=e.i(511518),d=e.i(731285),c=e.i(936765),o=e.i(737038),m=e.i(667062);function x(e,x,u){let h,f,p=(0,t.getDefaultOptions)(),j=u?.locale??p.locale??s.defaultLocale,g=r(e,x);if(isNaN(g))throw RangeError("Invalid time value");let v=Object.assign({},u,{addSuffix:u?.addSuffix,comparison:g}),[N,b]=(0,i.normalizeDates)(u?.in,...g>0?[x,e]:[e,x]),y=(f=(0,m.differenceInMilliseconds)(b,N)/1e3,(0,o.getRoundingMethod)(void 0)(f)),S=Math.round((y-((0,a.getTimezoneOffsetInMilliseconds)(b)-(0,a.getTimezoneOffsetInMilliseconds)(N))/1e3)/60);if(S<2)if(u?.includeSeconds)if(y<5)return j.formatDistance("lessThanXSeconds",5,v);else if(y<10)return j.formatDistance("lessThanXSeconds",10,v);else if(y<20)return j.formatDistance("lessThanXSeconds",20,v);else if(y<40)return j.formatDistance("halfAMinute",0,v);else if(y<60)return j.formatDistance("lessThanXMinutes",1,v);else return j.formatDistance("xMinutes",1,v);else if(0===S)return j.formatDistance("lessThanXMinutes",1,v);else return j.formatDistance("xMinutes",S,v);if(S<45)return j.formatDistance("xMinutes",S,v);if(S<90)return j.formatDistance("aboutXHours",1,v);if(S<n.minutesInDay){let e=Math.round(S/60);return j.formatDistance("aboutXHours",e,v)}if(S<2520)return j.formatDistance("xDays",1,v);else if(S<n.minutesInMonth){let e=Math.round(S/n.minutesInDay);return j.formatDistance("xDays",e,v)}else if(S<2*n.minutesInMonth)return h=Math.round(S/n.minutesInMonth),j.formatDistance("aboutXMonths",h,v);if((h=function(e,s,t){var a;let n,o,[m,x,u]=(0,i.normalizeDates)(void 0,e,e,s),h=r(x,u),f=Math.abs((0,d.differenceInCalendarMonths)(x,u));if(f<1)return 0;1===x.getMonth()&&x.getDate()>27&&x.setDate(30),x.setMonth(x.getMonth()-h*f);let p=r(x,u)===-h;+(n=(0,l.toDate)(m,void 0),a=void 0,(o=(0,l.toDate)(n,a?.in)).setHours(23,59,59,999),o)==+(0,c.endOfMonth)(n,void 0)&&1===f&&1===r(m,u)&&(p=!1);let j=h*(f-p);return 0===j?0:j}(b,N))<12){let e=Math.round(S/n.minutesInMonth);return j.formatDistance("xMonths",e,v)}{let e=h%12,s=Math.trunc(h/12);return e<3?j.formatDistance("aboutXYears",s,v):e<9?j.formatDistance("overXYears",s,v):j.formatDistance("almostXYears",s+1,v)}}e.s(["formatDistance",()=>x],868422)},667722,e=>{"use strict";let s=(0,e.i(383206).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["default",()=>s])},227009,e=>{"use strict";var s=e.i(667722);e.s(["Activity",()=>s.default])},220168,e=>{"use strict";var s=e.i(111043);e.i(116233);var t=e.i(880177),a=e.i(989239);function i({label:e,htmlFor:i,error:l,description:r,required:n,children:d,className:c}){return(0,s.jsxs)("div",{className:(0,a.cn)("space-y-2",c),"data-slot":"form-field",children:[e&&(0,s.jsxs)(t.Label,{htmlFor:i,className:(0,a.cn)(l&&"text-destructive"),"data-error":!!l,children:[e,n&&(0,s.jsx)("span",{className:"text-destructive ml-1","aria-label":"required",children:"*"})]}),d,r&&!l&&(0,s.jsx)("p",{className:"text-muted-foreground text-[0.8rem] leading-relaxed",children:r}),l&&(0,s.jsx)("p",{className:"text-destructive text-[0.8rem] font-medium",role:"alert",children:l})]})}function l({children:e,cols:t=2,className:i}){return(0,s.jsx)("div",{className:(0,a.cn)("grid gap-4",{"sm:grid-cols-2":2===t,"sm:grid-cols-2 lg:grid-cols-3":3===t,"sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":4===t},i),children:e})}e.s(["StandardFormField",()=>i,"StandardFormRow",()=>l])},146798,e=>{"use strict";let s=(0,e.i(399168).create)((e,s)=>({stats:{},setStats:(s,t)=>e(e=>({stats:{...e.stats,[s]:t}})),getStats:e=>s().stats[e],clearStats:s=>e(e=>{let{[s]:t,...a}=e.stats;return{stats:a}})}));e.s(["useToolbarStatsStore",0,s])},672573,e=>{"use strict";let s=(0,e.i(383206).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["default",()=>s])},15751,e=>{"use strict";var s=e.i(672573);e.s(["MapPin",()=>s.default])},306466,e=>{"use strict";let s=(0,e.i(383206).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>s])},598870,e=>{"use strict";var s=e.i(306466);e.s(["Save",()=>s.default])},52573,e=>{"use strict";let s=(0,e.i(383206).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>s])},694288,e=>{"use strict";var s=e.i(52573);e.s(["Link",()=>s.default])},519131,e=>{"use strict";let s=(0,e.i(383206).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);e.s(["default",()=>s])},233654,e=>{"use strict";var s=e.i(519131);e.s(["Paperclip",()=>s.default])},711448,e=>{"use strict";e.i(116233),e.s([])},305549,585506,e=>{"use strict";var s=e.i(111043),t=e.i(868422),a=e.i(227009);e.i(670258);var i=e.i(921251);e.i(711448);var l=e.i(157222);function r({activities:e}){return e&&0!==e.length?(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:e.map(e=>(0,s.jsxs)("div",{className:"hover:bg-muted/50 flex gap-3 rounded-lg border p-3 transition-colors",children:[(0,s.jsxs)(i.Avatar,{className:"size-8 flex-shrink-0",children:[(0,s.jsx)(i.AvatarImage,{src:e.user?.avatar}),(0,s.jsx)(i.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm break-words",children:e.description}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[e.user?.name," •"," ",(0,t.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})]})]})]},e.id))})}):(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(a.Activity,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No activity yet"})]})})})}e.s(["ActivityLogSection",()=>r],305549);var n=e.i(882896),d=e.i(606661),c=e.i(233654),o=e.i(371526),m=e.i(826463),x=e.i(970799);e.i(889265);var u=e.i(677607),h=e.i(51052);function f({attachments:e,entityType:t,entityId:a,onUpload:i}){let{toast:r}=(0,h.useToast)(),[f,p]=(0,x.useState)(!1),j=async e=>{let s=e.target.files;if(s&&0!==s.length){p(!0);try{i&&await i(s),r.success(`${s.length} file(s) uploaded successfully`)}catch(e){r.error("Failed to upload files")}finally{p(!1),e.target.value=""}}};return(0,s.jsx)(l.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{className:"hidden",disabled:f,id:"file-upload",multiple:!0,onChange:j,type:"file"}),(0,s.jsx)("label",{htmlFor:"file-upload",children:(0,s.jsx)(u.Button,{asChild:!0,className:"w-full cursor-pointer",disabled:f,size:"sm",variant:"outline",children:(0,s.jsx)("span",{children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Upload,{className:"mr-2 size-4 animate-pulse"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Plus,{className:"mr-2 size-4"}),"Upload Files"]})})})})]}),e&&e.length>0?(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",children:[(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,s.jsx)(d.FileText,{className:"text-muted-foreground size-4 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium",children:e.original_file_name||e.file_name||"Untitled"}),(0,s.jsxs)("p",{className:"text-muted-foreground text-xs",children:[e.file_size?`${(e.file_size/1024).toFixed(1)} KB`:"",e.category&&` • ${e.category}`]})]})]}),(0,s.jsx)(u.Button,{asChild:!0,className:"flex-shrink-0",size:"sm",variant:"ghost",children:(0,s.jsx)("a",{download:!0,href:e.storage_url||e.url,rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(n.Download,{className:"size-4"})})})]},e.id))}):(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Paperclip,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No attachments yet"})]})})]})})}e.s(["AttachmentsSection",()=>f],585506)},821305,278633,e=>{"use strict";var s=e.i(111043),t=e.i(227009),a=e.i(606661),i=e.i(694288),l=e.i(233654),r=e.i(702948),n=e.i(152088);function d({header:e,customHeader:t,metadata:a,beforeContent:i,afterContent:l,children:r,className:d,contentGapClassName:c,statsBar:o}){let m=a??e?.metadata??[];return(0,s.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4 pb-24 lg:gap-5",d),"data-detail-shell":"",children:[o,t??(e?(0,s.jsx)(x,{section:e}):null),m.length>0?(0,s.jsx)(u,{items:m}):null,i,r?(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",c),children:r}):null,l]})}let c={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},o={default:"border border-border/60 bg-card shadow-sm",muted:"border border-border/60 bg-muted/40 shadow-sm",subtle:"border border-border/40 bg-card/80 shadow-sm",ghost:"border border-border/50 bg-transparent shadow-none"};function m({children:e,className:t,padding:a="md",variant:i="default"}){return(0,s.jsx)("section",{className:(0,n.cn)("rounded-xl",o[i],t),children:(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col gap-4",c[a]),children:e})})}function x({section:e}){var t;let{breadcrumbs:a,leadingVisual:i,title:l,subtitle:r,description:n,badges:d,actions:c,secondaryActions:o}=e;return(0,s.jsxs)("header",{className:"flex flex-col gap-4 lg:gap-6",children:[a?(0,s.jsx)("div",{className:"text-muted-foreground text-sm",children:a}):null,(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between lg:gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"flex flex-col gap-3",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[i?(0,s.jsx)("div",{className:"flex items-center justify-center",children:i}):null,(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(t=l)?"string"==typeof t?(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:t}):(0,s.jsx)("div",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:t}):null,r?(0,s.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm md:text-base",children:r}):null]})]}),n?(0,s.jsx)("div",{className:"text-muted-foreground max-w-3xl text-sm",children:n}):null]})}),d&&d.length>0?(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:d}):null]}),h(c,o)?(0,s.jsxs)("div",{className:"hidden flex-wrap items-center gap-2 lg:flex",children:[c?.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex",children:e},t)),o?.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex",children:e},`secondary-${t}`))]}):null]}),h(c,o)?(0,s.jsxs)("div",{className:"flex flex-col gap-2 lg:hidden",children:[c&&c.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((e,t)=>(0,s.jsx)("span",{className:"flex-1",children:e},t))}):null,o&&o.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,s.jsx)("span",{className:"flex-1",children:e},`secondary-mobile-${t}`))}):null]}):null]})}function u({items:e}){return(0,s.jsx)("section",{className:"@xl-page:grid-cols-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"border-border/50 bg-card/60 flex flex-col gap-1 rounded-lg border px-4 py-3 shadow-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2 text-xs font-medium tracking-wide uppercase",children:[e.icon,e.label]}),(0,s.jsx)("div",{className:"text-foreground text-sm font-semibold",children:e.value}),e.helperText?(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:e.helperText}):null]},t))})}function h(e,s){return!!(e&&e.length>0||s&&s.length>0)}e.s(["DetailPageShell",()=>d,"DetailPageSurface",()=>m],278633);var f=e.i(305549),p=e.i(585506),j=e.i(868422),g=e.i(371526),v=e.i(970799);e.i(670258);var N=e.i(921251);e.i(889265);var b=e.i(677607);e.i(526120);var y=e.i(610120);e.i(711448);var S=e.i(157222),w=e.i(51052);function D({notes:e,entityType:t,entityId:i,onAddNote:l}){let{toast:r}=(0,w.useToast)(),[n,d]=(0,v.useState)(!1),[c,o]=(0,v.useState)(""),[m,x]=(0,v.useState)(!1),u=async()=>{if(l){if(!c.trim())return void r.error("Please enter a note");x(!0);try{await l(c),r.success("Note added successfully"),o(""),d(!1)}catch(e){r.error("Failed to add note")}finally{x(!1)}}};return(0,s.jsx)(S.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[l&&(n?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Textarea,{autoFocus:!0,onChange:e=>o(e.target.value),placeholder:"Enter your note...",rows:3,value:c}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b.Button,{disabled:m,onClick:u,size:"sm",children:m?"Saving...":"Save Note"}),(0,s.jsx)(b.Button,{onClick:()=>{d(!1),o("")},size:"sm",variant:"outline",children:"Cancel"})]})]}):(0,s.jsxs)(b.Button,{className:"w-full",onClick:()=>d(!0),size:"sm",variant:"outline",children:[(0,s.jsx)(g.Plus,{className:"mr-2 size-4"}),"Add Note"]})),e&&e.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)("div",{className:"hover:bg-muted/50 rounded-lg border p-3 transition-colors",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(N.Avatar,{className:"size-8 flex-shrink-0",children:[(0,s.jsx)(N.AvatarImage,{src:e.user?.avatar}),(0,s.jsx)(N.AvatarFallback,{children:e.user?.name?.charAt(0)||"?"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium",children:e.user?.name}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:(0,j.formatDistance)(new Date(e.created_at),new Date,{addSuffix:!0})})]}),(0,s.jsx)("p",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:e.content||e.note})]})]})},e.id))}):(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(a.FileText,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No notes yet"})]})})]})})}var M=e.i(87912),k=e.i(176378);e.i(553153);var z=e.i(363712);function C({relatedItems:e}){return e&&0!==e.length?(0,s.jsx)(S.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)(k.default,{className:"group hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors",href:e.href,children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium",children:e.title}),e.badge&&(0,s.jsx)(z.Badge,{className:"flex-shrink-0",variant:e.badge.variant||"default",children:e.badge.label})]}),e.subtitle&&(0,s.jsx)("p",{className:"text-muted-foreground truncate text-xs",children:e.subtitle})]}),(0,s.jsx)(M.ChevronRight,{className:"text-muted-foreground size-4 flex-shrink-0 transition-transform group-hover:translate-x-0.5"})]},e.id))})}):(0,s.jsx)(S.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.Link,{className:"text-muted-foreground/50 mx-auto size-8"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"No related items"})]})})})}let A=(0,r.default)(()=>e.A(134181).then(e=>e.UnifiedAccordion),{loadableGenerated:{modules:[388024]},ssr:!1});function T({header:e,customHeader:r,customSections:c,activities:o=[],notes:x=[],attachments:u=[],relatedItems:h=[],showStandardSections:j={activities:!0,notes:!0,attachments:!0,relatedItems:!0},className:g,defaultOpenSection:v,beforeContent:N,afterContent:b,statsBar:y,contentGapClassName:S,surfacePadding:w="none",surfaceVariant:M="default",surfaceClassName:k,storageKey:z,enableReordering:T=!0}){let F=[];!1!==j.activities&&F.push({id:"activity-log",title:"Activity Log",icon:(0,s.jsx)(t.Activity,{className:"size-4"}),count:o.length,content:(0,s.jsx)(f.ActivityLogSection,{activities:o})}),!1!==j.notes&&F.push({id:"notes",title:"Notes",icon:(0,s.jsx)(a.FileText,{className:"size-4"}),count:x.length,content:(0,s.jsx)(D,{notes:x})}),!1!==j.attachments&&F.push({id:"attachments",title:"Attachments",icon:(0,s.jsx)(l.Paperclip,{className:"size-4"}),count:u.length,content:(0,s.jsx)(p.AttachmentsSection,{attachments:u})}),!1!==j.relatedItems&&h.length>0&&F.push({id:"related-items",title:"Related Items",icon:(0,s.jsx)(i.Link,{className:"size-4"}),count:h.length,content:(0,s.jsx)(C,{relatedItems:h})});let I=[...c||[],...F];return(0,s.jsx)(d,{afterContent:b,beforeContent:N,className:(0,n.cn)("w-full",g),contentGapClassName:S??"gap-4",customHeader:r,header:e,statsBar:y,children:(0,s.jsx)(m,{className:(0,n.cn)("overflow-hidden",k),padding:w,variant:M,children:(0,s.jsx)(A,{defaultOpenSection:v||I[0]?.id,enableReordering:T,sections:I,storageKey:z})})})}e.s(["DetailPageContentLayout",()=>T],821305)},431111,e=>{"use strict";var s=e.i(111043),t=e.i(904653),a=e.i(970799),i=e.i(146798);function l({stats:e,children:l}){let r=(0,t.usePathname)()||"/dashboard",n=(0,i.useToolbarStatsStore)(e=>e.setStats),d=(0,i.useToolbarStatsStore)(e=>e.clearStats);return(0,a.useLayoutEffect)(()=>(e?n(r,e):d(r),()=>{d(r)}),[r,e,n,d]),(0,s.jsx)(s.Fragment,{children:l})}e.s(["ToolbarStatsProvider",()=>l])},864861,e=>{"use strict";var s=e.i(111043),t=e.i(276389),a=e.i(136764),i=e.i(559586),l=e.i(15751),r=e.i(939397),n=e.i(598870),d=e.i(14435),c=e.i(202724),o=e.i(501651),m=e.i(212409),x=e.i(176378),u=e.i(970799),h=e.i(821305);e.i(670258);var f=e.i(921251);e.i(553153);var p=e.i(363712);e.i(889265);var j=e.i(677607);e.i(51478);var g=e.i(635613);e.i(149989);var v=e.i(880177);e.i(868198);var N=e.i(798764),b=e.i(220168);e.i(711448);var y=e.i(157222);function S({entityData:e}){let[S,w]=(0,u.useState)(!1),[D,M]=(0,u.useState)(!1),{appointment:k,customer:z,property:C,job:A,teamAssignments:T=[],notes:F=[],activities:I=[]}=e,_=new Date(k.start_time),U=new Date(k.end_time),$=Math.max(0,Math.floor((U.getTime()-_.getTime())/6e4)),P="confirmed"===k.status?"default":"completed"===k.status?"secondary":"outline",L=[(0,s.jsxs)(p.Badge,{variant:"outline",children:["APT-",k.id.slice(0,8).toUpperCase()]},"id"),(0,s.jsx)(p.Badge,{variant:P,children:k.status},"status"),k.appointment_type?(0,s.jsx)(p.Badge,{variant:"outline",children:k.appointment_type},"type"):null].filter(Boolean),B=(0,s.jsx)("div",{className:"px-2 sm:px-0",children:(0,s.jsx)("div",{className:"bg-muted/50 rounded-md shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:L}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold sm:text-3xl",children:_.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm sm:text-base",children:[_.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," ","-"," ",U.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]})]}),S&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(j.Button,{onClick:()=>w(!1),size:"sm",variant:"ghost",children:[(0,s.jsx)(m.X,{className:"mr-2 size-4"}),"Cancel"]}),(0,s.jsxs)(j.Button,{disabled:D,onClick:()=>{},size:"sm",children:[(0,s.jsx)(n.Save,{className:"mr-2 size-4"}),D?"Saving...":"Save Changes"]})]})]}),z&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)(x.default,{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors",href:`/dashboard/customers/${z.id}`,children:[(0,s.jsx)(d.User,{className:"size-4"}),z.first_name," ",z.last_name]}),z.email&&(0,s.jsxs)("a",{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors",href:`mailto:${z.email}`,children:[(0,s.jsx)(i.Mail,{className:"size-4"}),z.email]}),z.phone&&(0,s.jsxs)("a",{className:"border-border/60 bg-background hover:border-primary/50 hover:bg-primary/5 inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition-colors",href:`tel:${z.phone}`,children:[(0,s.jsx)(r.Phone,{className:"size-4"}),z.phone]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("div",{className:"bg-muted inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm",children:[(0,s.jsx)(a.Clock,{className:"text-muted-foreground size-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[$," minutes"]})]}),T.length>0&&(0,s.jsxs)("div",{className:"bg-muted inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm",children:[(0,s.jsx)(c.Users,{className:"text-muted-foreground size-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[T.length," team member",1===T.length?"":"s"]})]}),A&&(0,s.jsxs)(x.default,{className:"bg-muted hover:bg-muted/80 inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm transition-colors",href:`/dashboard/work/${A.id}`,children:[(0,s.jsx)(o.Wrench,{className:"text-muted-foreground size-4"}),(0,s.jsxs)("span",{className:"font-medium",children:["Job #",A.job_number]})]})]})]})})}),O=(0,u.useMemo)(()=>{let e=[{id:"appointment-info",title:"Appointment Information",icon:(0,s.jsx)(t.Calendar,{className:"size-4"}),defaultOpen:!0,content:(0,s.jsx)(y.UnifiedAccordionContent,{children:(0,s.jsxs)(b.StandardFormRow,{cols:2,children:[(0,s.jsx)(b.StandardFormField,{label:"Start Time",htmlFor:"appt-start-time",children:(0,s.jsx)(g.Input,{id:"appt-start-time",readOnly:!0,type:"datetime-local",value:new Date(k.start_time).toISOString().slice(0,16)})}),(0,s.jsx)(b.StandardFormField,{label:"End Time",htmlFor:"appt-end-time",children:(0,s.jsx)(g.Input,{id:"appt-end-time",readOnly:!0,type:"datetime-local",value:new Date(k.end_time).toISOString().slice(0,16)})}),(0,s.jsx)(b.StandardFormField,{label:"Status",htmlFor:"appt-status",children:(0,s.jsxs)(N.Select,{value:k.status,children:[(0,s.jsx)(N.SelectTrigger,{id:"appt-status",children:(0,s.jsx)(N.SelectValue,{})}),(0,s.jsxs)(N.SelectContent,{children:[(0,s.jsx)(N.SelectItem,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(N.SelectItem,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(N.SelectItem,{value:"in_progress",children:"In Progress"}),(0,s.jsx)(N.SelectItem,{value:"completed",children:"Completed"}),(0,s.jsx)(N.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})}),(0,s.jsx)(b.StandardFormField,{label:"Type",htmlFor:"appt-type",children:(0,s.jsx)(g.Input,{id:"appt-type",readOnly:!0,value:k.appointment_type||"Service"})})]})})}];return z&&e.push({id:"customer-details",title:"Customer Details",icon:(0,s.jsx)(d.User,{className:"size-4"}),content:(0,s.jsx)(y.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Name"}),(0,s.jsxs)("p",{className:"text-sm",children:[z.first_name," ",z.last_name]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Email"}),(0,s.jsx)("p",{className:"text-sm",children:z.email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Phone"}),(0,s.jsx)("p",{className:"text-sm",children:z.phone||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Company"}),(0,s.jsx)("p",{className:"text-sm",children:z.company_name||"N/A"})]})]}),(0,s.jsx)(j.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsx)(x.default,{href:`/dashboard/customers/${z.id}`,children:"View Full Profile"})})]})})}),C&&e.push({id:"property-location",title:"Property Location",icon:(0,s.jsx)(l.MapPin,{className:"size-4"}),content:(0,s.jsx)(y.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Service Address"}),(0,s.jsxs)("p",{className:"text-sm",children:[C.address,C.address2&&`, ${C.address2}`]}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:[C.city,", ",C.state," ",C.zip_code]})]}),(0,s.jsx)(j.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,s.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${C.address}, ${C.city}, ${C.state}`)}`,rel:"noopener noreferrer",target:"_blank",children:[(0,s.jsx)(l.MapPin,{className:"mr-2 size-4"}),"Open in Google Maps"]})})]})})}),e.push({id:"team-assignments",title:"Team Assignments",icon:(0,s.jsx)(c.Users,{className:"size-4"}),count:T.length,content:(0,s.jsx)(y.UnifiedAccordionContent,{children:(0,s.jsx)("div",{className:"space-y-3",children:T.length>0?T.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-lg border p-4",children:[(0,s.jsxs)(f.Avatar,{children:[(0,s.jsx)(f.AvatarImage,{src:e.user?.avatar}),(0,s.jsx)(f.AvatarFallback,{children:e.user?.name?.split(" ").map(e=>e[0]).join("").toUpperCase()||"TM"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.user?.name||"Unknown"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:e.role||"Technician"})]}),(0,s.jsx)(p.Badge,{variant:"outline",children:e.status||"assigned"})]},e.id)):(0,s.jsx)("p",{className:"text-muted-foreground text-center text-sm",children:"No team members assigned"})})})}),A&&e.push({id:"job-details",title:"Job Details",icon:(0,s.jsx)(o.Wrench,{className:"size-4"}),content:(0,s.jsx)(y.UnifiedAccordionContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"grid flex-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Job Number"}),(0,s.jsxs)("p",{className:"text-sm",children:["#",A.job_number]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Title"}),(0,s.jsx)("p",{className:"text-sm",children:A.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Status"}),(0,s.jsx)(p.Badge,{variant:"outline",children:A.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Label,{children:"Priority"}),(0,s.jsx)(p.Badge,{variant:"outline",children:A.priority})]})]}),(0,s.jsx)(j.Button,{asChild:!0,size:"sm",variant:"ghost",children:(0,s.jsx)(x.default,{href:`/dashboard/work/${A.id}`,children:"View Full Job"})})]})})}),e},[k,z,A,C,T]),X=(0,u.useMemo)(()=>{let e=[];return z&&e.push({id:`customer-${z.id}`,type:"customer",title:`${z.first_name} ${z.last_name}`,subtitle:z.email||z.phone||void 0,href:`/dashboard/customers/${z.id}`}),C&&e.push({id:`property-${C.id}`,type:"property",title:C.address,subtitle:`${C.city}, ${C.state}`,href:`/dashboard/work/properties/${C.id}`}),A&&e.push({id:`job-${A.id}`,type:"job",title:A.title||`Job #${A.job_number}`,subtitle:A.status,href:`/dashboard/work/${A.id}`,badge:A.status?{label:A.status,variant:"outline"}:void 0}),e},[z,C,A]);return(0,s.jsx)(h.DetailPageContentLayout,{activities:I,customHeader:B,customSections:O,defaultOpenSection:"appointment-info",notes:F,relatedItems:X,showStandardSections:{attachments:!1}})}e.s(["AppointmentPageContent",()=>S])},134181,e=>{e.v(s=>Promise.all(["static/chunks/6680116ea3e49da7.js"].map(s=>e.l(s))).then(()=>s(388024)))}]);