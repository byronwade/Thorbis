(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,199258,(e,t,r)=>{"use strict";var a=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={},l={SYMBOL_FOR_REQ_CONTEXT:()=>d,getContext:()=>c};for(var u in l)a(o,u,{get:l[u],enumerable:!0});t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of s(t))i.call(e,l)||l===r||a(e,l,{get:()=>t[l],enumerable:!(o=n(t,l))||o.enumerable});return e})(a({},"__esModule",{value:!0}),o);let d=Symbol.for("@vercel/request-context");function c(){let e=globalThis;return e[d]?.get?.()??{}}},560773,(e,t,r)=>{"use strict";var a=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={},l={getContext:()=>d.getContext,getVercelOidcToken:()=>c,getVercelOidcTokenSync:()=>p};for(var u in l)a(o,u,{get:l[u],enumerable:!0});t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of s(t))i.call(e,l)||l===r||a(e,l,{get:()=>t[l],enumerable:!(o=n(t,l))||o.enumerable});return e})(a({},"__esModule",{value:!0}),o);var d=e.r(199258);async function c(){return""}function p(){return""}},561030,(e,t,r)=>{t.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let a=0;return function(...n){clearTimeout(r);let s=Date.now(),i=t-(s-a);i<=0?(a=s,e.apply(this,n)):r=setTimeout(()=>{a=Date.now(),e.apply(this,n)},i)}}},607930,e=>{"use strict";let t;var r,a,n,s,i,o,l,u,d,c,p,h,f,m,g,y,v,_,b,w,k,x,E,z,I,T,S,A,O,C,R,N,j,M,P,Z,$,L,F,D,V,U,B,W,q=e.i(970799),K=e.i(486534),J=e.i(313550),G="vercel.ai.error",H=Symbol.for(G),Y=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[l]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,G)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};l=H;var Q=Y,X="AI_APICallError",ee=`vercel.ai.error.${X}`,et=Symbol.for(ee),er=class extends Q{constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:i,isRetryable:o=null!=a&&(408===a||409===a||429===a||a>=500),data:l}){super({name:X,message:e,cause:i}),this[u]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=o,this.data=l}static isInstance(e){return Q.hasMarker(e,ee)}};u=et;var ea="AI_EmptyResponseBodyError",en=`vercel.ai.error.${ea}`,es=Symbol.for(en),ei=class extends Q{constructor({message:e="Empty response body"}={}){super({name:ea,message:e}),this[d]=!0}static isInstance(e){return Q.hasMarker(e,en)}};function eo(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}d=es;var el="AI_InvalidArgumentError",eu=`vercel.ai.error.${el}`,ed=Symbol.for(eu),ec=class extends Q{constructor({message:e,cause:t,argument:r}){super({name:el,message:e,cause:t}),this[c]=!0,this.argument=r}static isInstance(e){return Q.hasMarker(e,eu)}};c=ed,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var ep="AI_JSONParseError",eh=`vercel.ai.error.${ep}`,ef=Symbol.for(eh),em=class extends Q{constructor({text:e,cause:t}){super({name:ep,message:`JSON parsing failed: Text: ${e}.
Error message: ${eo(t)}`,cause:t}),this[p]=!0,this.text=e}static isInstance(e){return Q.hasMarker(e,eh)}};p=ef,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var eg="AI_TypeValidationError",ey=`vercel.ai.error.${eg}`,ev=Symbol.for(ey),e_=class e extends Q{constructor({value:e,cause:t}){super({name:eg,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eo(t)}`,cause:t}),this[h]=!0,this.value=e}static isInstance(e){return Q.hasMarker(e,ey)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};h=ev;Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");class eb extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function ew(e){}class ek extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let a;super({start(n){a=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=ew,onError:r=ew,onRetry:a=ew,onComment:n}=e,s="",i=!0,o,l="",u="";function d(e){if(""===e)return void(l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u="");if(e.startsWith(":")){n&&n(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),a=" "===e[r+1]?2:1;c(t,e.slice(r+a),e);return}c(e,"",e)}function c(e,t,n){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?a(parseInt(t,10)):r(new eb(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:n}));break;default:r(new eb(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:n}))}}return{feed:function(e){let t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[r,a]=function(e){let t=[],r="",a=0;for(;a<e.length;){let n=e.indexOf("\r",a),s=e.indexOf(`
`,a),i=-1;if(-1!==n&&-1!==s?i=Math.min(n,s):-1!==n?i=n===e.length-1?-1:n:-1!==s&&(i=s),-1===i){r=e.slice(a);break}{let r=e.slice(a,i);t.push(r),"\r"===e[(a=i+1)-1]&&e[a]===`
`&&a++}}return[t,r]}(`${s}${t}`);for(let e of r)d(e);s=a,i=!1},reset:function(e={}){s&&e.consume&&d(s),i=!0,o=void 0,l="",u="",s=""}}}({onEvent:e=>{n.enqueue(e)},onError(t){"terminate"===e?n.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){a.feed(e)}})}}var ex=e.i(929058),eE=e.i(482429);(r=f||(f={})).assertEqual=e=>{},r.assertIs=function(e){},r.assertNever=function(e){throw Error()},r.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},r.getValidEnumValues=e=>{let t=r.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),a={};for(let r of t)a[r]=e[r];return r.objectValues(a)},r.objectValues=e=>r.objectKeys(e).map(function(t){return e[t]}),r.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},r.find=(e,t)=>{for(let r of e)if(t(r))return r},r.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,r.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},r.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(m||(m={})).mergeShapes=(e,t)=>({...e,...t});let ez=f.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eI=e=>{switch(typeof e){case"undefined":return ez.undefined;case"string":return ez.string;case"number":return Number.isNaN(e)?ez.nan:ez.number;case"boolean":return ez.boolean;case"function":return ez.function;case"bigint":return ez.bigint;case"symbol":return ez.symbol;case"object":if(Array.isArray(e))return ez.array;if(null===e)return ez.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return ez.promise;if("undefined"!=typeof Map&&e instanceof Map)return ez.map;if("undefined"!=typeof Set&&e instanceof Set)return ez.set;if("undefined"!=typeof Date&&e instanceof Date)return ez.date;return ez.object;default:return ez.unknown}},eT=f.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class eS extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(e){if(!(e instanceof eS))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,f.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}eS.create=e=>new eS(e);let eA=(e,t)=>{let r;switch(e.code){case eT.invalid_type:r=e.received===ez.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case eT.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,f.jsonStringifyReplacer)}`;break;case eT.unrecognized_keys:r=`Unrecognized key(s) in object: ${f.joinValues(e.keys,", ")}`;break;case eT.invalid_union:r="Invalid input";break;case eT.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${f.joinValues(e.options)}`;break;case eT.invalid_enum_value:r=`Invalid enum value. Expected ${f.joinValues(e.options)}, received '${e.received}'`;break;case eT.invalid_arguments:r="Invalid function arguments";break;case eT.invalid_return_type:r="Invalid function return type";break;case eT.invalid_date:r="Invalid date";break;case eT.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:f.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case eT.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case eT.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case eT.custom:r="Invalid input";break;case eT.invalid_intersection_types:r="Intersection results could not be merged";break;case eT.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case eT.not_finite:r="Number must be finite";break;default:r=t.defaultError,f.assertNever(e)}return{message:r}};(a=g||(g={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},a.toString=e=>"string"==typeof e?e:e?.message;let eO=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function eC(e,t){let r=eO({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,eA,void 0].filter(e=>!!e)});e.common.issues.push(r)}class eR{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return eN;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,a=await e.value;r.push({key:t,value:a})}return eR.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return eN;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let eN=Object.freeze({status:"aborted"}),ej=e=>({status:"dirty",value:e}),eM=e=>({status:"valid",value:e}),eP=e=>"undefined"!=typeof Promise&&e instanceof Promise;class eZ{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let e$=(e,t)=>{if("valid"===t.status)return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new eS(e.common.issues);return this._error=t,this._error}}};function eL(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??a??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class eF{get description(){return this._def.description}_getType(e){return eI(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:eI(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new eR,ctx:{common:e.parent.common,data:e.data,parsedType:eI(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eP(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eI(e)},a=this._parseSync({data:e,path:r.path,parent:r});return e$(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eI(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return"valid"===r.status?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>"valid"===e.status?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eI(e)},a=this._parse({data:e,path:r.path,parent:r});return e$(r,await (eP(a)?a:Promise.resolve(a)))}refine(e,t){return this._refinement((r,a)=>{let n=e(r),s=()=>a.addIssue({code:eT.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new tx({schema:this,typeName:y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tE.create(this,this._def)}nullable(){return tz.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ti.create(this)}promise(){return tk.create(this,this._def)}or(e){return tl.create([this,e],this._def)}and(e){return tc.create(this,e,this._def)}transform(e){return new tx({...eL(this._def),schema:this,typeName:y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new tI({...eL(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:y.ZodDefault})}brand(){return new tA({typeName:y.ZodBranded,type:this,...eL(this._def)})}catch(e){return new tT({...eL(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:y.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return tO.create(this,e)}readonly(){return tC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let eD=/^c[^\s-]{8,}$/i,eV=/^[0-9a-z]+$/,eU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eW=/^[a-z0-9_-]{21}$/i,eq=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,eJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,e0=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e9=RegExp(`^${e1}$`);function e4(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class e2 extends eF{_parse(e){var r,a,n,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ez.string){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.string,received:t.parsedType}),eN}let o=new eR;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(eC(i=this._getOrReturnCtx(e,i),{code:eT.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(eC(i=this._getOrReturnCtx(e,i),{code:eT.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?eC(i,{code:eT.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&eC(i,{code:eT.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)eJ.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"email",code:eT.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)t||(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:eT.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)eB.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:eT.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)eW.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:eT.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)eD.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:eT.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)eV.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:eT.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)eU.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:eT.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{eC(i=this._getOrReturnCtx(e,i),{validation:"url",code:eT.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"regex",code:eT.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?(function(e){let t=`${e1}T${e4(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?e9.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${e4(l)}$`).test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{code:eT.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?eK.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"duration",code:eT.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(r=e.data,!(("v4"===(a=l.version)||!a)&&eG.test(r)||("v6"===a||!a)&&eY.test(r))&&1&&(eC(i=this._getOrReturnCtx(e,i),{validation:"ip",code:eT.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!eq.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(eC(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:eT.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(n=e.data,!(("v4"===(s=l.version)||!s)&&eH.test(n)||("v6"===s||!s)&&eQ.test(n))&&1&&(eC(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:eT.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?eX.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"base64",code:eT.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?e0.test(e.data)||(eC(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:eT.invalid_string,message:l.message}),o.dirty()):f.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:eT.invalid_string,...g.errToObj(r)})}_addCheck(e){return new e2({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...g.errToObj(e)})}url(e){return this._addCheck({kind:"url",...g.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...g.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...g.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...g.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...g.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...g.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...g.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...g.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...g.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...g.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...g.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...g.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...g.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...g.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...g.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...g.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...g.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...g.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...g.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...g.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...g.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...g.errToObj(t)})}nonempty(e){return this.min(1,g.errToObj(e))}trim(){return new e2({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e2({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e2({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}e2.create=e=>new e2({checks:[],typeName:y.ZodString,coerce:e?.coerce??!1,...eL(e)});class e5 extends eF{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ez.number){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.number,received:t.parsedType}),eN}let r=new eR;for(let a of this._def.checks)"int"===a.kind?f.isInteger(e.data)||(eC(t=this._getOrReturnCtx(e,t),{code:eT.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,a.value)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(eC(t=this._getOrReturnCtx(e,t),{code:eT.not_finite,message:a.message}),r.dirty()):f.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,r,a){return new e5({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:g.toString(a)}]})}_addCheck(e){return new e5({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&f.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}e5.create=e=>new e5({checks:[],typeName:y.ZodNumber,coerce:e?.coerce||!1,...eL(e)});class e3 extends eF{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ez.bigint)return this._getInvalidInput(e);let r=new eR;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):f.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.bigint,received:t.parsedType}),eN}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,r,a){return new e3({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:g.toString(a)}]})}_addCheck(e){return new e3({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}e3.create=e=>new e3({checks:[],typeName:y.ZodBigInt,coerce:e?.coerce??!1,...eL(e)});class e6 extends eF{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ez.boolean){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.boolean,received:t.parsedType}),eN}return eM(e.data)}}e6.create=e=>new e6({typeName:y.ZodBoolean,coerce:e?.coerce||!1,...eL(e)});class e8 extends eF{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ez.date){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.date,received:t.parsedType}),eN}if(Number.isNaN(e.data.getTime()))return eC(this._getOrReturnCtx(e),{code:eT.invalid_date}),eN;let r=new eR;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(eC(t=this._getOrReturnCtx(e,t),{code:eT.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):f.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new e8({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}e8.create=e=>new e8({checks:[],coerce:e?.coerce||!1,typeName:y.ZodDate,...eL(e)});class e7 extends eF{_parse(e){if(this._getType(e)!==ez.symbol){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.symbol,received:t.parsedType}),eN}return eM(e.data)}}e7.create=e=>new e7({typeName:y.ZodSymbol,...eL(e)});class te extends eF{_parse(e){if(this._getType(e)!==ez.undefined){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.undefined,received:t.parsedType}),eN}return eM(e.data)}}te.create=e=>new te({typeName:y.ZodUndefined,...eL(e)});class tt extends eF{_parse(e){if(this._getType(e)!==ez.null){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.null,received:t.parsedType}),eN}return eM(e.data)}}tt.create=e=>new tt({typeName:y.ZodNull,...eL(e)});class tr extends eF{constructor(){super(...arguments),this._any=!0}_parse(e){return eM(e.data)}}tr.create=e=>new tr({typeName:y.ZodAny,...eL(e)});class ta extends eF{constructor(){super(...arguments),this._unknown=!0}_parse(e){return eM(e.data)}}ta.create=e=>new ta({typeName:y.ZodUnknown,...eL(e)});class tn extends eF{_parse(e){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.never,received:t.parsedType}),eN}}tn.create=e=>new tn({typeName:y.ZodNever,...eL(e)});class ts extends eF{_parse(e){if(this._getType(e)!==ez.undefined){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.void,received:t.parsedType}),eN}return eM(e.data)}}ts.create=e=>new ts({typeName:y.ZodVoid,...eL(e)});class ti extends eF{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==ez.array)return eC(t,{code:eT.invalid_type,expected:ez.array,received:t.parsedType}),eN;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(eC(t,{code:e?eT.too_big:eT.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(eC(t,{code:eT.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(eC(t,{code:eT.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new eZ(t,e,t.path,r)))).then(e=>eR.mergeArray(r,e));let n=[...t.data].map((e,r)=>a.type._parseSync(new eZ(t,e,t.path,r)));return eR.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new ti({...this._def,minLength:{value:e,message:g.toString(t)}})}max(e,t){return new ti({...this._def,maxLength:{value:e,message:g.toString(t)}})}length(e,t){return new ti({...this._def,exactLength:{value:e,message:g.toString(t)}})}nonempty(e){return this.min(1,e)}}ti.create=(e,t)=>new ti({type:e,minLength:null,maxLength:null,exactLength:null,typeName:y.ZodArray,...eL(t)});class to extends eF{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=f.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ez.object){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.object,received:t.parsedType}),eN}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof tn&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new eZ(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof tn){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(eC(r,{code:eT.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new eZ(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>eR.mergeObjectSync(t,e)):eR.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new to({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let a=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:g.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new to({...this._def,unknownKeys:"strip"})}passthrough(){return new to({...this._def,unknownKeys:"passthrough"})}extend(e){return new to({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new to({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new to({...this._def,catchall:e})}pick(e){let t={};for(let r of f.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new to({...this._def,shape:()=>t})}omit(e){let t={};for(let r of f.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new to({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof to){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=tE.create(e(n))}return new to({...t._def,shape:()=>r})}if(t instanceof ti)return new ti({...t._def,type:e(t.element)});if(t instanceof tE)return tE.create(e(t.unwrap()));if(t instanceof tz)return tz.create(e(t.unwrap()));if(t instanceof tp)return tp.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of f.objectKeys(this.shape)){let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}return new to({...this._def,shape:()=>t})}required(e){let t={};for(let r of f.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof tE;)e=e._def.innerType;t[r]=e}return new to({...this._def,shape:()=>t})}keyof(){return t_(f.objectKeys(this.shape))}}to.create=(e,t)=>new to({shape:()=>e,unknownKeys:"strip",catchall:tn.create(),typeName:y.ZodObject,...eL(t)}),to.strictCreate=(e,t)=>new to({shape:()=>e,unknownKeys:"strict",catchall:tn.create(),typeName:y.ZodObject,...eL(t)}),to.lazycreate=(e,t)=>new to({shape:e,unknownKeys:"strip",catchall:tn.create(),typeName:y.ZodObject,...eL(t)});class tl extends eF{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new eS(e.ctx.common.issues));return eC(t,{code:eT.invalid_union,unionErrors:r}),eN});{let e,a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new eS(e));return eC(t,{code:eT.invalid_union,unionErrors:n}),eN}}get options(){return this._def.options}}tl.create=(e,t)=>new tl({options:e,typeName:y.ZodUnion,...eL(t)});let tu=e=>{if(e instanceof ty)return tu(e.schema);if(e instanceof tx)return tu(e.innerType());if(e instanceof tv)return[e.value];if(e instanceof tb)return e.options;if(e instanceof tw)return f.objectValues(e.enum);else if(e instanceof tI)return tu(e._def.innerType);else if(e instanceof te)return[void 0];else if(e instanceof tt)return[null];else if(e instanceof tE)return[void 0,...tu(e.unwrap())];else if(e instanceof tz)return[null,...tu(e.unwrap())];else if(e instanceof tA)return tu(e.unwrap());else if(e instanceof tC)return tu(e.unwrap());else if(e instanceof tT)return tu(e._def.innerType);else return[]};class td extends eF{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ez.object)return eC(t,{code:eT.invalid_type,expected:ez.object,received:t.parsedType}),eN;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(eC(t,{code:eT.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),eN)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=tu(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new td({typeName:y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...eL(r)})}}class tc extends eF{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if("aborted"===e.status||"aborted"===a.status)return eN;let n=function e(t,r){let a=eI(t),n=eI(r);if(t===r)return{valid:!0,data:t};if(a===ez.object&&n===ez.object){let a=f.objectKeys(r),n=f.objectKeys(t).filter(e=>-1!==a.indexOf(e)),s={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};s[a]=n.data}return{valid:!0,data:s}}if(a===ez.array&&n===ez.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}if(a===ez.date&&n===ez.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,a.value);return n.valid?(("dirty"===e.status||"dirty"===a.status)&&t.dirty(),{status:t.value,value:n.data}):(eC(r,{code:eT.invalid_intersection_types}),eN)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}tc.create=(e,t,r)=>new tc({left:e,right:t,typeName:y.ZodIntersection,...eL(r)});class tp extends eF{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ez.array)return eC(r,{code:eT.invalid_type,expected:ez.array,received:r.parsedType}),eN;if(r.data.length<this._def.items.length)return eC(r,{code:eT.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eN;!this._def.rest&&r.data.length>this._def.items.length&&(eC(r,{code:eT.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new eZ(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>eR.mergeArray(t,e)):eR.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new tp({...this._def,rest:e})}}tp.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new tp({items:e,typeName:y.ZodTuple,rest:null,...eL(t)})};class th extends eF{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ez.object)return eC(r,{code:eT.invalid_type,expected:ez.object,received:r.parsedType}),eN;let a=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new eZ(r,e,r.path,e)),value:s._parse(new eZ(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?eR.mergeObjectAsync(t,a):eR.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new th(t instanceof eF?{keyType:e,valueType:t,typeName:y.ZodRecord,...eL(r)}:{keyType:e2.create(),valueType:e,typeName:y.ZodRecord,...eL(t)})}}class tf extends eF{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ez.map)return eC(r,{code:eT.invalid_type,expected:ez.map,received:r.parsedType}),eN;let a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new eZ(r,e,r.path,[s,"key"])),value:n._parse(new eZ(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return eN;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return eN;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}tf.create=(e,t,r)=>new tf({valueType:t,keyType:e,typeName:y.ZodMap,...eL(r)});class tm extends eF{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ez.set)return eC(r,{code:eT.invalid_type,expected:ez.set,received:r.parsedType}),eN;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(eC(r,{code:eT.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(eC(r,{code:eT.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return eN;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new eZ(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new tm({...this._def,minSize:{value:e,message:g.toString(t)}})}max(e,t){return new tm({...this._def,maxSize:{value:e,message:g.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tm.create=(e,t)=>new tm({valueType:e,minSize:null,maxSize:null,typeName:y.ZodSet,...eL(t)});class tg extends eF{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ez.function)return eC(t,{code:eT.invalid_type,expected:ez.function,received:t.parsedType}),eN;function r(e,r){return eO({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eA,eA].filter(e=>!!e),issueData:{code:eT.invalid_arguments,argumentsError:r}})}function a(e,r){return eO({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eA,eA].filter(e=>!!e),issueData:{code:eT.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof tk){let e=this;return eM(async function(...t){let i=new eS([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(a(l,e)),i})})}{let e=this;return eM(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new eS([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new eS([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tg({...this._def,args:tp.create(e).rest(ta.create())})}returns(e){return new tg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new tg({args:e||tp.create([]).rest(ta.create()),returns:t||ta.create(),typeName:y.ZodFunction,...eL(r)})}}class ty extends eF{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ty.create=(e,t)=>new ty({getter:e,typeName:y.ZodLazy,...eL(t)});class tv extends eF{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return eC(t,{received:t.data,code:eT.invalid_literal,expected:this._def.value}),eN}return{status:"valid",value:e.data}}get value(){return this._def.value}}function t_(e,t){return new tb({values:e,typeName:y.ZodEnum,...eL(t)})}tv.create=(e,t)=>new tv({value:e,typeName:y.ZodLiteral,...eL(t)});class tb extends eF{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return eC(t,{expected:f.joinValues(r),received:t.parsedType,code:eT.invalid_type}),eN}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return eC(t,{received:t.data,code:eT.invalid_enum_value,options:r}),eN}return eM(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return tb.create(e,{...this._def,...t})}exclude(e,t=this._def){return tb.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}tb.create=t_;class tw extends eF{_parse(e){let t=f.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ez.string&&r.parsedType!==ez.number){let e=f.objectValues(t);return eC(r,{expected:f.joinValues(e),received:r.parsedType,code:eT.invalid_type}),eN}if(this._cache||(this._cache=new Set(f.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=f.objectValues(t);return eC(r,{received:r.data,code:eT.invalid_enum_value,options:e}),eN}return eM(e.data)}get enum(){return this._def.values}}tw.create=(e,t)=>new tw({values:e,typeName:y.ZodNativeEnum,...eL(t)});class tk extends eF{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==ez.promise&&!1===t.common.async?(eC(t,{code:eT.invalid_type,expected:ez.promise,received:t.parsedType}),eN):eM((t.parsedType===ez.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}tk.create=(e,t)=>new tk({type:e,typeName:y.ZodPromise,...eL(t)});class tx extends eF{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{eC(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return eN;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?eN:"dirty"===a.status||"dirty"===t.value?ej(a.value):a});{if("aborted"===t.value)return eN;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?eN:"dirty"===a.status||"dirty"===t.value?ej(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?eN:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?eN:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>"valid"!==e.status?eN:Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})));else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if("valid"!==e.status)return eN;let s=a.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}f.assertNever(a)}}tx.create=(e,t,r)=>new tx({schema:e,typeName:y.ZodEffects,effect:t,...eL(r)}),tx.createWithPreprocess=(e,t,r)=>new tx({schema:t,effect:{type:"preprocess",transform:e},typeName:y.ZodEffects,...eL(r)});class tE extends eF{_parse(e){return this._getType(e)===ez.undefined?eM(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tE.create=(e,t)=>new tE({innerType:e,typeName:y.ZodOptional,...eL(t)});class tz extends eF{_parse(e){return this._getType(e)===ez.null?eM(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tz.create=(e,t)=>new tz({innerType:e,typeName:y.ZodNullable,...eL(t)});class tI extends eF{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===ez.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tI.create=(e,t)=>new tI({innerType:e,typeName:y.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...eL(t)});class tT extends eF{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return eP(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new eS(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new eS(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tT.create=(e,t)=>new tT({innerType:e,typeName:y.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...eL(t)});class tS extends eF{_parse(e){if(this._getType(e)!==ez.nan){let t=this._getOrReturnCtx(e);return eC(t,{code:eT.invalid_type,expected:ez.nan,received:t.parsedType}),eN}return{status:"valid",value:e.data}}}tS.create=e=>new tS({typeName:y.ZodNaN,...eL(e)}),Symbol("zod_brand");class tA extends eF{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class tO extends eF{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eN:"dirty"===e.status?(t.dirty(),ej(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eN:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new tO({in:e,out:t,typeName:y.ZodPipeline})}}class tC extends eF{_parse(e){let t=this._def.innerType._parse(e),r=e=>("valid"===e.status&&(e.value=Object.freeze(e.value)),e);return eP(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function tR(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function tN(e){return Object.fromEntries([...e.headers])}tC.create=(e,t)=>new tC({innerType:e,typeName:y.ZodReadonly,...eL(t)}),to.lazycreate,(n=y||(y={})).ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly",e2.create,e5.create,tS.create,e3.create,e6.create,e8.create,e7.create,te.create,tt.create,tr.create,ta.create,tn.create,ts.create,ti.create,to.create,to.strictCreate,tl.create,td.create,tc.create,tp.create,th.create,tf.create,tm.create,tg.create,ty.create,tv.create,tb.create,tw.create,tk.create,tx.create,tE.create,tz.create,tx.createWithPreprocess,tO.create;var tj=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let n=()=>{let e=r.length,a=Array(t);for(let n=0;n<t;n++)a[n]=r[Math.random()*e|0];return a.join("")};if(null==e)return n;if(r.includes(a))throw new ec({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${n()}`},tM=tj();function tP(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var tZ=["fetch failed","failed to fetch"];function t$({error:e,url:t,requestBodyValues:r}){if(tP(e))return e;if(e instanceof TypeError&&tZ.includes(e.message.toLowerCase())){let a=e.cause;if(null!=a)return new er({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return e}function tL(e=globalThis){var t,r,a;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(a=null==(r=e.process)?void 0:r.versions)?void 0:a.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function tF(e){if(null==e)return{};let t={};if(e instanceof Headers)e.forEach((e,r)=>{t[r.toLowerCase()]=e});else for(let[r,a]of(Array.isArray(e)||(e=Object.entries(e)),e))null!=a&&(t[r.toLowerCase()]=a);return t}function tD(e,...t){let r=new Headers(tF(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var tV="3.0.17",tU=()=>globalThis.fetch,tB=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:a,abortSignal:n,fetch:s=tU()})=>{try{let i=await s(e,{method:"GET",headers:tD(t,`ai-sdk/provider-utils/${tV}`,tL()),signal:n}),o=tN(i);if(!i.ok){let t;try{t=await a({response:i,url:e,requestBodyValues:{}})}catch(t){if(tP(t)||er.isInstance(t))throw t;throw new er({message:"Failed to process error response",cause:t,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}throw t.value}try{return await r({response:i,url:e,requestBodyValues:{}})}catch(t){if(t instanceof Error&&(tP(t)||er.isInstance(t)))throw t;throw new er({message:"Failed to process successful response",cause:t,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}}catch(t){throw t$({error:t,url:e,requestBodyValues:{}})}};function tW({settingValue:e,environmentVariableName:t}){return"string"==typeof e?e:null!=e||void 0===J.default?void 0:null!=(e=J.default.env[t])&&"string"==typeof e?e:void 0}var tq=/"__proto__"\s*:/,tK=/"constructor"\s*:/;function tJ(e){let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===tq.test(e)&&!1===tK.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let r of(t=[],e)){if(Object.prototype.hasOwnProperty.call(r,"__proto__")||Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in r){let a=r[e];a&&"object"==typeof a&&t.push(a)}}}return e}(t)}function tG(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(t){return tJ(e)}try{return tJ(e)}finally{Error.stackTraceLimit=t}}var tH=Symbol.for("vercel.ai.validator");function tY(e){let t;return()=>(null==t&&(t=e()),t)}async function tQ({value:e,schema:t}){let r=await tX({value:e,schema:t});if(!r.success)throw e_.wrap({value:e,cause:r.error});return r.value}async function tX({value:e,schema:t}){var r;let a="object"==typeof t&&null!==t&&tH in t&&!0===t[tH]&&"validate"in t?t:"function"==typeof t?t():(r=t,{[tH]:!0,validate:async e=>{let t=await r["~standard"].validate(e);return null==t.issues?{success:!0,value:t.value}:{success:!1,error:new e_({value:e,cause:t.issues})}}});try{if(null==a.validate)return{success:!0,value:e,rawValue:e};let t=await a.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:e_.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:e_.wrap({value:e,cause:t}),rawValue:e}}}async function t0({text:e,schema:t}){try{let r=tG(e);if(null==t)return r;return tQ({value:r,schema:t})}catch(t){if(em.isInstance(t)||e_.isInstance(t))throw t;throw new em({text:e,cause:t})}}async function t1({text:e,schema:t}){try{let r=tG(e);if(null==t)return{success:!0,value:r,rawValue:r};return await tX({value:r,schema:t})}catch(t){return{success:!1,error:em.isInstance(t)?t:new em({text:e,cause:t}),rawValue:void 0}}}function t9({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new ek).pipeThrough(new TransformStream({async transform({data:e},r){"[DONE]"!==e&&r.enqueue(await t1({text:e,schema:t}))}}))}var t4=()=>globalThis.fetch,t2=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>t5({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),t5=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=t4()})=>{try{let o=await i(e,{method:"POST",headers:tD(t,`ai-sdk/provider-utils/${tV}`,tL()),body:r.content,signal:s}),l=tN(o);if(!o.ok){let t;try{t=await n({response:o,url:e,requestBodyValues:r.values})}catch(t){if(tP(t)||er.isInstance(t))throw t;throw new er({message:"Failed to process error response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await a({response:o,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(tP(t)||er.isInstance(t)))throw t;throw new er({message:"Failed to process successful response",cause:t,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){throw t$({error:t,url:e,requestBodyValues:r.values})}};async function t3(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var t6=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{let i=await a.text(),o=tN(a);if(""===i.trim())return{responseHeaders:o,value:new er({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(a)})};try{let l=await t0({text:i,schema:e});return{responseHeaders:o,value:new er({message:t(l),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,data:l,isRetryable:null==r?void 0:r(a,l)})}}catch(e){return{responseHeaders:o,value:new er({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(a)})}}},t8=e=>async({response:t,url:r,requestBodyValues:a})=>{let n=await t.text(),s=await t1({text:n,schema:e}),i=tN(t);if(!s.success)throw new er({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},t7=Symbol("Let zodToJsonSchema decide on which parser to use"),re={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function rt(e,t){return rk(e.type._def,t)}var rr=void 0,ra=/^[cC][^\s-]{8,}$/,rn=/^[0-9a-z]+$/,rs=/^[0-9A-HJKMNP-TV-Z]{26}$/,ri=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,ro=()=>(void 0===rr&&(rr=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),rr),rl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ru=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,rp=/^[a-zA-Z0-9_-]{21}$/,rh=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function rf(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":ry(r,"email",a.message,t);break;case"format:idn-email":ry(r,"idn-email",a.message,t);break;case"pattern:zod":rv(r,ri,a.message,t)}break;case"url":ry(r,"uri",a.message,t);break;case"uuid":ry(r,"uuid",a.message,t);break;case"regex":rv(r,a.regex,a.message,t);break;case"cuid":rv(r,ra,a.message,t);break;case"cuid2":rv(r,rn,a.message,t);break;case"startsWith":rv(r,RegExp(`^${rm(a.value,t)}`),a.message,t);break;case"endsWith":rv(r,RegExp(`${rm(a.value,t)}$`),a.message,t);break;case"datetime":ry(r,"date-time",a.message,t);break;case"date":ry(r,"date",a.message,t);break;case"time":ry(r,"time",a.message,t);break;case"duration":ry(r,"duration",a.message,t);break;case"length":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value;break;case"includes":rv(r,RegExp(rm(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&ry(r,"ipv4",a.message,t),"v4"!==a.version&&ry(r,"ipv6",a.message,t);break;case"base64url":rv(r,rc,a.message,t);break;case"jwt":rv(r,rh,a.message,t);break;case"cidr":"v6"!==a.version&&rv(r,rl,a.message,t),"v4"!==a.version&&rv(r,ru,a.message,t);break;case"emoji":rv(r,ro(),a.message,t);break;case"ulid":rv(r,rs,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":ry(r,"binary",a.message,t);break;case"contentEncoding:base64":r.contentEncoding="base64";break;case"pattern:zod":rv(r,rd,a.message,t)}break;case"nanoid":rv(r,rp,a.message,t)}return r}function rm(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)rg.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}var rg=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ry(e,t,r,a){var n;e.format||(null==(n=e.anyOf)?void 0:n.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function rv(e,t,r,a){var n;e.pattern||(null==(n=e.allOf)?void 0:n.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:r_(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=r_(t,a)}function r_(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=a.i?e.source.toLowerCase():e.source,s="",i=!1,o=!1,l=!1;for(let e=0;e<n.length;e++){if(i){s+=n[e],i=!1;continue}if(a.i){if(o){if(n[e].match(/[a-z]/)){l?(s+=n[e],s+=`${n[e-2]}-${n[e]}`.toUpperCase(),l=!1):"-"===n[e+1]&&(null==(r=n[e+2])?void 0:r.match(/[a-z]/))?(s+=n[e],l=!0):s+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){s+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(a.m){if("^"===n[e]){s+=`(^|(?<=[\r
]))`;continue}else if("$"===n[e]){s+=`($|(?=[\r
]))`;continue}}if(a.s&&"."===n[e]){s+=o?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}s+=n[e],"\\"===n[e]?i=!0:o&&"]"===n[e]?o=!1:o||"["!==n[e]||(o=!0)}try{new RegExp(s)}catch(r){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function rb(e,t){var r,a,n,s,i,o;let l={type:"object",additionalProperties:null!=(r=rk(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?r:t.allowedAdditionalProperties};if((null==(a=e.keyType)?void 0:a._def.typeName)===y.ZodString&&(null==(n=e.keyType._def.checks)?void 0:n.length)){let{type:r,...a}=rf(e.keyType._def,t);return{...l,propertyNames:a}}if((null==(s=e.keyType)?void 0:s._def.typeName)===y.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if((null==(i=e.keyType)?void 0:i._def.typeName)===y.ZodBranded&&e.keyType._def.type._def.typeName===y.ZodString&&(null==(o=e.keyType._def.type._def.checks)?void 0:o.length)){let{type:r,...a}=rt(e.keyType._def,t);return{...l,propertyNames:a}}return l}var rw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function rk(e,t,r=!1){var a;let n=t.seen.get(e);if(t.override){let s=null==(a=t.override)?void 0:a.call(t,e,t,n,r);if(s!==t7)return s}if(n&&!r){let e=rx(n,t);if(void 0!==e)return e}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let i=((e,t,r)=>{var a,n,s,i,o,l;switch(t){case y.ZodString:return rf(e,r);case y.ZodNumber:let u={type:"number"};if(!e.checks)return u;for(let t of e.checks)switch(t.kind){case"int":u.type="integer";break;case"min":t.inclusive?u.minimum=t.value:u.exclusiveMinimum=t.value;break;case"max":t.inclusive?u.maximum=t.value:u.exclusiveMaximum=t.value;break;case"multipleOf":u.multipleOf=t.value}return u;case y.ZodObject:return function(e,t){let r={type:"object",properties:{}},a=[],n=e.shape();for(let e in n){let s=n[e];if(void 0===s||void 0===s._def)continue;let i=function(e){try{return e.isOptional()}catch(e){return!0}}(s),o=rk(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==o&&(r.properties[e]=o,i||a.push(e))}a.length&&(r.required=a);let s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return rk(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(r.additionalProperties=s),r}(e,r);case y.ZodBigInt:let d={type:"integer",format:"int64"};if(!e.checks)return d;for(let t of e.checks)switch(t.kind){case"min":t.inclusive?d.minimum=t.value:d.exclusiveMinimum=t.value;break;case"max":t.inclusive?d.maximum=t.value:d.exclusiveMaximum=t.value;break;case"multipleOf":d.multipleOf=t.value}return d;case y.ZodBoolean:return{type:"boolean"};case y.ZodDate:return function e(t,r,a){let n=null!=a?a:r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,n)=>e(t,r,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var s=t;let i={type:"integer",format:"unix-time"};for(let e of s.checks)switch(e.kind){case"min":i.minimum=e.value;break;case"max":i.maximum=e.value}return i}}(e,r);case y.ZodUndefined:return{not:{}};case y.ZodNull:return{type:"null"};case y.ZodArray:let c;return c={type:"array"},(null==(s=e.type)?void 0:s._def)&&(null==(o=null==(i=e.type)?void 0:i._def)?void 0:o.typeName)!==y.ZodAny&&(c.items=rk(e.type._def,{...r,currentPath:[...r.currentPath,"items"]})),e.minLength&&(c.minItems=e.minLength.value),e.maxLength&&(c.maxItems=e.maxLength.value),e.exactLength&&(c.minItems=e.exactLength.value,c.maxItems=e.exactLength.value),c;case y.ZodUnion:case y.ZodDiscriminatedUnion:let p,h=e.options instanceof Map?Array.from(e.options.values()):e.options;if(h.every(e=>e._def.typeName in rw&&(!e._def.checks||!e._def.checks.length))){let e=h.reduce((e,t)=>{let r=rw[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(h.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=h.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===h.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:h.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(h.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:h.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a=e,n=r,(p=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((e,t)=>rk(e._def,{...n,currentPath:[...n.currentPath,"anyOf",`${t}`]})).filter(e=>!!e&&(!n.strictUnions||"object"==typeof e&&Object.keys(e).length>0))).length?{anyOf:p}:void 0;case y.ZodIntersection:let f,m;return f=[rk(e.left._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),rk(e.right._def,{...r,currentPath:[...r.currentPath,"allOf","1"]})].filter(e=>!!e),m=[],f.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)m.push(...e.allOf);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}m.push(t)}}),m.length?{allOf:m}:void 0;case y.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>rk(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:rk(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>rk(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case y.ZodRecord:return rb(e,r);case y.ZodLiteral:let g;return"bigint"!=(g=typeof e.value)&&"number"!==g&&"boolean"!==g&&"string"!==g?{type:Array.isArray(e.value)?"array":"object"}:{type:"bigint"===g?"integer":g,const:e.value};case y.ZodEnum:return{type:"string",enum:Array.from(e.values)};case y.ZodNativeEnum:let v,_,b;return v=e.values,{type:1===(b=Array.from(new Set((_=Object.keys(e.values).filter(e=>"number"!=typeof v[v[e]]).map(e=>v[e])).map(e=>typeof e)))).length?"string"===b[0]?"string":"number":["string","number"],enum:_};case y.ZodNullable:if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[rw[e.innerType._def.typeName],"null"]};let w=rk(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return w&&{anyOf:[w,{type:"null"}]};case y.ZodOptional:if(r.currentPath.toString()===(null==(l=r.propertyPath)?void 0:l.toString()))return rk(e.innerType._def,r);let k=rk(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return k?{anyOf:[{not:{}},k]}:{};case y.ZodMap:if("record"===r.mapStrategy)return rb(e,r);return{type:"array",maxItems:125,items:{type:"array",items:[rk(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||{},rk(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case y.ZodSet:let x;return x={type:"array",uniqueItems:!0,items:rk(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})},e.minSize&&(x.minItems=e.minSize.value),e.maxSize&&(x.maxItems=e.maxSize.value),x;case y.ZodLazy:return()=>e.getter()._def;case y.ZodPromise:return rk(e.type._def,r);case y.ZodNaN:case y.ZodNever:return{not:{}};case y.ZodEffects:return"input"===r.effectStrategy?rk(e.schema._def,r):{};case y.ZodAny:case y.ZodUnknown:return{};case y.ZodDefault:return{...rk(e.innerType._def,r),default:e.defaultValue()};case y.ZodBranded:return rt(e,r);case y.ZodReadonly:case y.ZodCatch:return rk(e.innerType._def,r);case y.ZodPipeline:if("input"===r.pipeStrategy)return rk(e.in._def,r);if("output"===r.pipeStrategy)return rk(e.out._def,r);let E=rk(e.in._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),z=rk(e.out._def,{...r,currentPath:[...r.currentPath,"allOf",E?"1":"0"]});return{allOf:[E,z].filter(e=>void 0!==e)};case y.ZodFunction:case y.ZodVoid:case y.ZodSymbol:default:return}})(e,e.typeName,t),o="function"==typeof i?rk(i(),t):i;if(o&&rE(e,t,o),t.postProcess){let r=t.postProcess(o,e,t);return s.jsonSchema=o,r}return s.jsonSchema=o,o}var rx=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:((e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")})(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},rE=(e,t,r)=>(e.description&&(r.description=e.description),r);function rz(e,t){var r,a;let n;if("_zod"in e){let a;return a=null!=(r=null==t?void 0:t.useReferences)&&r,rT(()=>eE.toJSONSchema(e,{target:"draft-7",io:"output",reused:a?"ref":"inline"}),{validate:async t=>{let r=await ex.safeParseAsync(e,t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}return n=null!=(a=null==t?void 0:t.useReferences)&&a,rT(()=>((e,t)=>{var r;let a,n,s=(n=void 0!==(a="string"==typeof t?{...re,name:t}:{...re,...t}).name?[...a.basePath,a.definitionPath,a.name]:a.basePath,{...a,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(a.definitions).map(([e,t])=>[t._def,{def:t._def,path:[...a.basePath,a.definitionPath,e],jsonSchema:void 0}]))}),i="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>{var a;return{...e,[t]:null!=(a=rk(r._def,{...s,currentPath:[...s.basePath,s.definitionPath,t]},!0))?a:{}}},{}):void 0,o="string"==typeof t?t:(null==t?void 0:t.nameStrategy)==="title"||null==t?void 0:t.name,l=null!=(r=rk(e._def,void 0===o?s:{...s,currentPath:[...s.basePath,s.definitionPath,o]},!1))?r:{},u="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==u&&(l.title=u);let d=void 0===o?i?{...l,[s.definitionPath]:i}:l:{$ref:[..."relative"===s.$refStrategy?[]:s.basePath,s.definitionPath,o].join("/"),[s.definitionPath]:{...i,[o]:l}};return d.$schema="http://json-schema.org/draft-07/schema#",d})(e,{$refStrategy:n?"root":"none"}),{validate:async t=>{let r=await e.safeParseAsync(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var rI=Symbol.for("vercel.ai.schema");function rT(e,{validate:t}={}){return{[rI]:!0,_type:void 0,[tH]:!0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}var{btoa:rS,atob:rA}=globalThis,rO=e.i(290583),rC=e.i(560773),rR=Symbol.for("vercel.ai.gateway.error"),rN=class e extends(_=Error,v=rR,_){constructor({message:e,statusCode:t=500,cause:r}){super(e),this[v]=!0,this.statusCode=t,this.cause=r}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return"object"==typeof e&&null!==e&&rR in e&&!0===e[rR]}},rj="GatewayAuthenticationError",rM=Symbol.for(`vercel.ai.gateway.error.${rj}`),rP=class e extends(w=rN,b=rM,w){constructor({message:e="Authentication failed",statusCode:t=401,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[b]=!0,this.name=rj,this.type="authentication_error"}static isInstance(e){return rN.hasMarker(e)&&rM in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:a="Authentication failed",statusCode:n=401,cause:s}){return new e({message:t?`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,statusCode:n,cause:s})}},rZ="GatewayInvalidRequestError",r$=Symbol.for(`vercel.ai.gateway.error.${rZ}`),rL=class extends(x=rN,k=r$,x){constructor({message:e="Invalid request",statusCode:t=400,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[k]=!0,this.name=rZ,this.type="invalid_request_error"}static isInstance(e){return rN.hasMarker(e)&&r$ in e}},rF="GatewayRateLimitError",rD=Symbol.for(`vercel.ai.gateway.error.${rF}`),rV=class extends(z=rN,E=rD,z){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[E]=!0,this.name=rF,this.type="rate_limit_exceeded"}static isInstance(e){return rN.hasMarker(e)&&rD in e}},rU="GatewayModelNotFoundError",rB=Symbol.for(`vercel.ai.gateway.error.${rU}`),rW=tY(()=>rz(rO.z.object({modelId:rO.z.string()}))),rq=class extends(T=rN,I=rB,T){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[I]=!0,this.name=rU,this.type="model_not_found",this.modelId=r}static isInstance(e){return rN.hasMarker(e)&&rB in e}},rK="GatewayInternalServerError",rJ=Symbol.for(`vercel.ai.gateway.error.${rK}`),rG=class extends(A=rN,S=rJ,A){constructor({message:e="Internal server error",statusCode:t=500,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[S]=!0,this.name=rK,this.type="internal_server_error"}static isInstance(e){return rN.hasMarker(e)&&rJ in e}},rH="GatewayResponseError",rY=Symbol.for(`vercel.ai.gateway.error.${rH}`),rQ=class extends(C=rN,O=rY,C){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:a,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[O]=!0,this.name=rH,this.type="response_error",this.response=r,this.validationError=a}static isInstance(e){return rN.hasMarker(e)&&rY in e}};async function rX({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:a,authMethod:n}){let s=await tX({value:e,schema:r0});if(!s.success)return new rQ({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:s.error,cause:a});let i=s.value,o=i.error.type,l=i.error.message;switch(o){case"authentication_error":return rP.createContextualError({apiKeyProvided:"api-key"===n,oidcTokenProvided:"oidc"===n,statusCode:t,cause:a});case"invalid_request_error":return new rL({message:l,statusCode:t,cause:a});case"rate_limit_exceeded":return new rV({message:l,statusCode:t,cause:a});case"model_not_found":{let e=await tX({value:i.error.param,schema:rW});return new rq({message:l,statusCode:t,modelId:e.success?e.value.modelId:void 0,cause:a})}default:return new rG({message:l,statusCode:t,cause:a})}}var r0=tY(()=>rz(rO.z.object({error:rO.z.object({message:rO.z.string(),type:rO.z.string().nullish(),param:rO.z.unknown().nullish(),code:rO.z.union([rO.z.string(),rO.z.number()]).nullish()})})));function r1(e,t){var r;return rN.isInstance(e)?e:er.isInstance(e)?rX({response:function(e){if(void 0!==e.data)return e.data;if(null!=e.responseBody)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}(e),statusCode:null!=(r=e.statusCode)?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):rX({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}var r9="ai-gateway-auth-method";async function r4(e){let t=await tX({value:e[r9],schema:r2});return t.success?t.value:void 0}var r2=tY(()=>rz(rO.z.union([rO.z.literal("api-key"),rO.z.literal("oidc")]))),r5=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await tB({url:`${this.config.baseURL}/config`,headers:await t3(this.config.headers()),successfulResponseHandler:t8(r3),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await r1(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await tB({url:`${e.origin}/v1/credits`,headers:await t3(this.config.headers()),successfulResponseHandler:t8(r6),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return t}catch(e){throw await r1(e)}}},r3=tY(()=>rz(rO.z.object({models:rO.z.array(rO.z.object({id:rO.z.string(),name:rO.z.string(),description:rO.z.string().nullish(),pricing:rO.z.object({input:rO.z.string(),output:rO.z.string(),input_cache_read:rO.z.string().nullish(),input_cache_write:rO.z.string().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:a})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...a?{cacheCreationInputTokens:a}:{}})).nullish(),specification:rO.z.object({specificationVersion:rO.z.literal("v2"),provider:rO.z.string(),modelId:rO.z.string()}),modelType:rO.z.enum(["language","embedding","image"]).nullish()}))}))),r6=tY(()=>rz(rO.z.object({balance:rO.z.string(),total_used:rO.z.string()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),r8=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,n=await t3(this.config.headers());try{let{responseHeaders:s,value:i,rawValue:o}=await t2({url:this.getUrl(),headers:tR(n,e.headers,this.getModelConfigHeaders(this.modelId,!1),await t3(this.config.o11yHeaders)),body:t,successfulResponseHandler:t8(rO.z.any()),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),...a&&{abortSignal:a},fetch:this.config.fetch});return{...i,request:{body:t},response:{headers:s,body:o},warnings:r}}catch(e){throw await r1(e,await r4(n))}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,n=await t3(this.config.headers());try{let s,{value:i,responseHeaders:o}=await t2({url:this.getUrl(),headers:tR(n,e.headers,this.getModelConfigHeaders(this.modelId,!0),await t3(this.config.o11yHeaders)),body:t,successfulResponseHandler:(s=rO.z.any(),async({response:e})=>{let t=tN(e);if(null==e.body)throw new ei({});return{responseHeaders:t,value:t9({stream:e.body,schema:s})}}),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),...a&&{abortSignal:a},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(e){r.length>0&&e.enqueue({type:"stream-start",warnings:r})},transform(t,r){if(t.success){let a=t.value;("raw"!==a.type||e.includeRawChunks)&&("response-metadata"===a.type&&a.timestamp&&"string"==typeof a.timestamp&&(a.timestamp=new Date(a.timestamp)),r.enqueue(a))}else r.error(t.error)}})),request:{body:t},response:{headers:o}}}catch(e){throw await r1(e,await r4(n))}}isFilePart(e){return e&&"object"==typeof e&&"type"in e&&"file"===e.type}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)&&e.data instanceof Uint8Array){let t=Uint8Array.from(e.data),r=K.Buffer.from(t).toString("base64");e.data=new URL(`data:${e.mediaType||"application/octet-stream"};base64,${r}`)}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},r7=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){var n;let s=await t3(this.config.headers());try{let{responseHeaders:i,value:o,rawValue:l}=await t2({url:this.getUrl(),headers:tR(s,null!=t?t:{},this.getModelConfigHeaders(),await t3(this.config.o11yHeaders)),body:{input:1===e.length?e[0]:e,...a?{providerOptions:a}:{}},successfulResponseHandler:t8(ae),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:o.embeddings,usage:null!=(n=o.usage)?n:void 0,providerMetadata:o.providerMetadata,response:{headers:i,body:l}}}catch(e){throw await r1(e,await r4(s))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},ae=tY(()=>rz(rO.z.object({embeddings:rO.z.array(rO.z.array(rO.z.number())),usage:rO.z.object({tokens:rO.z.number()}).nullish(),providerMetadata:rO.z.record(rO.z.string(),rO.z.record(rO.z.string(),rO.z.unknown())).optional()}))),at=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=4}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:a,seed:n,providerOptions:s,headers:i,abortSignal:o}){var l;let u=await t3(this.config.headers());try{let{responseHeaders:d,value:c,rawValue:p}=await t2({url:this.getUrl(),headers:tR(u,null!=i?i:{},this.getModelConfigHeaders(),await t3(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{size:r},...a&&{aspectRatio:a},...n&&{seed:n},...null!=s?s:{}},successfulResponseHandler:t8(aa),failedResponseHandler:t6({errorSchema:rO.z.any(),errorToMessage:e=>e}),...o&&{abortSignal:o},fetch:this.config.fetch});return{images:c.images,warnings:null!=(l=c.warnings)?l:[],providerMetadata:c.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:d}}}catch(e){throw r1(e,await r4(u))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},ar=rO.z.object({images:rO.z.array(rO.z.unknown()).optional()}).catchall(rO.z.unknown()),aa=rO.z.object({images:rO.z.array(rO.z.string()),warnings:rO.z.array(rO.z.object({type:rO.z.literal("other"),message:rO.z.string()})).optional(),providerMetadata:rO.z.record(rO.z.string(),ar).optional()});async function an(){var e;return null==(e=(0,rC.getContext)().headers)?void 0:e["x-vercel-id"]}async function as(e){let t=tW({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await (0,rC.getVercelOidcToken)(),authMethod:"oidc"}}catch(e){return null}}!function(e={}){var t,r,a;let n=null,s=null,i=null!=(t=e.metadataCacheRefreshMillis)?t:3e5,o=0,l=null!=(r=null==(a=e.baseURL)?void 0:a.replace(/\/$/,""))?r:"https://ai-gateway.vercel.sh/v1/ai",u=async()=>{let t=await as(e);if(t)return tD({Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":"0.0.1",[r9]:t.authMethod,...e.headers},"ai-sdk/gateway/2.0.13");throw rP.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},d=()=>{let e=tW({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),t=tW({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),r=tW({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let a=await an();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...r&&{"ai-o11y-region":r},...a&&{"ai-o11y-request-id":a}}}},c=t=>new r8(t,{provider:"gateway",baseURL:l,headers:u,fetch:e.fetch,o11yHeaders:d()}),p=async()=>new r5({baseURL:l,headers:u,fetch:e.fetch}).getCredits().catch(async e=>{throw await r1(e,await r4(await u()))}),h=function(e){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return c(e)};h.getAvailableModels=async()=>{var t,r,a;let d=null!=(a=null==(r=null==(t=e._internal)?void 0:t.currentDate)?void 0:r.call(t).getTime())?a:Date.now();return(!n||d-o>i)&&(o=d,n=new r5({baseURL:l,headers:u,fetch:e.fetch}).getAvailableModels().then(e=>(s=e,e)).catch(async e=>{throw await r1(e,await r4(await u()))})),s?Promise.resolve(s):n},h.getCredits=p,h.imageModel=t=>new at(t,{provider:"gateway",baseURL:l,headers:u,fetch:e.fetch,o11yHeaders:d()}),h.languageModel=c,h.textEmbeddingModel=t=>new r7(t,{provider:"gateway",baseURL:l,headers:u,fetch:e.fetch,o11yHeaders:d()})}();var ai="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:e.g,ao="1.9.0",al=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,au=function(e){var t=new Set([e]),r=new Set,a=e.match(al);if(!a)return function(){return!1};var n={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(null!=n.prerelease)return function(t){return t===e};function s(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var a=e.match(al);if(!a)return s(e);var i={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(null!=i.prerelease||n.major!==i.major)return s(e);if(0===n.major)return n.minor===i.minor&&n.patch<=i.patch?(t.add(e),!0):s(e);return n.minor<=i.minor?(t.add(e),!0):s(e)}}(ao),ad=Symbol.for("opentelemetry.js.api."+ao.split(".")[0]);function ac(e,t,r,a){void 0===a&&(a=!1);var n,s=ai[ad]=null!=(n=ai[ad])?n:{version:ao};if(!a&&s[e]){var i=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(i.stack||i.message),!1}if(s.version!==ao){var i=Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+ao);return r.error(i.stack||i.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+ao+"."),!0}function ap(e){var t,r,a=null==(t=ai[ad])?void 0:t.version;if(a&&au(a))return null==(r=ai[ad])?void 0:r[e]}function ah(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ao+".");var r=ai[ad];r&&delete r[e]}var af=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,a){var n=new e(r._currentContext);return n._currentContext.set(t,a),n},r.deleteValue=function(t){var a=new e(r._currentContext);return a._currentContext.delete(t),a}},am=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},ag=function(e,t,r){if(r||2==arguments.length)for(var a,n=0,s=t.length;n<s;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},ay=function(){function e(){}return e.prototype.active=function(){return af},e.prototype.with=function(e,t,r){for(var a=[],n=3;n<arguments.length;n++)a[n-3]=arguments[n];return t.call.apply(t,ag([r],am(a),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),av=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},a_=function(e,t,r){if(r||2==arguments.length)for(var a,n=0,s=t.length;n<s;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},ab=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aw("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aw("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aw("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aw("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aw("verbose",this._namespace,e)},e}();function aw(e,t,r){var a=ap("diag");if(a)return r.unshift(t),a[e].apply(a,a_([],av(r),!1))}(s=R||(R={}))[s.NONE=0]="NONE",s[s.ERROR=30]="ERROR",s[s.WARN=50]="WARN",s[s.INFO=60]="INFO",s[s.DEBUG=70]="DEBUG",s[s.VERBOSE=80]="VERBOSE",s[s.ALL=9999]="ALL";var ak=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},ax=function(e,t,r){if(r||2==arguments.length)for(var a,n=0,s=t.length;n<s;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},aE=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=ap("diag");if(a)return a[e].apply(a,ax([],ak(t),!1))}}var t=this;t.setLogger=function(e,r){if(void 0===r&&(r={logLevel:R.INFO}),e===t){var a,n,s,i=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(a=i.stack)?a:i.message),!1}"number"==typeof r&&(r={logLevel:r});var o=ap("diag"),l=function(e,t){function r(r,a){var n=t[r];return"function"==typeof n&&e>=a?n.bind(t):function(){}}return e<R.NONE?e=R.NONE:e>R.ALL&&(e=R.ALL),t=t||{},{error:r("error",R.ERROR),warn:r("warn",R.WARN),info:r("info",R.INFO),debug:r("debug",R.DEBUG),verbose:r("verbose",R.VERBOSE)}}(null!=(n=r.logLevel)?n:R.INFO,e);if(o&&!r.suppressOverrideMessage){var u=null!=(s=Error().stack)?s:"<failed to generate stacktrace>";o.warn("Current logger will be overwritten from "+u),l.warn("Current logger will overwrite one already registered from "+u)}return ac("diag",l,t,!0)},t.disable=function(){ah("diag",t)},t.createComponentLogger=function(e){return new ab(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),az=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},aI=function(e,t,r){if(r||2==arguments.length)for(var a,n=0,s=t.length;n<s;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},aT="context",aS=new ay,aA=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return ac(aT,e,aE.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var a,n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,aI([e,t,r],az(n),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return ap(aT)||aS},e.prototype.disable=function(){this._getContextManager().disable(),ah(aT,aE.instance())},e}();(i=N||(N={}))[i.NONE=0]="NONE",i[i.SAMPLED=1]="SAMPLED";var aO="0000000000000000",aC="00000000000000000000000000000000",aR={traceId:aC,spanId:aO,traceFlags:N.NONE},aN=function(){function e(e){void 0===e&&(e=aR),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),aj=Symbol.for("OpenTelemetry Context Key SPAN");function aM(e){return e.getValue(aj)||void 0}function aP(){return aM(aA.getInstance().active())}function aZ(e,t){return e.setValue(aj,t)}function a$(e){return e.deleteValue(aj)}function aL(e,t){return aZ(e,new aN(t))}function aF(e){var t;return null==(t=aM(e))?void 0:t.spanContext()}var aD=/^([0-9a-f]{32})$/i,aV=/^[0-9a-f]{16}$/i;function aU(e){var t,r;return t=e.traceId,aD.test(t)&&t!==aC&&(r=e.spanId,aV.test(r)&&r!==aO)}function aB(e){return new aN(e)}var aW=aA.getInstance(),aq=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=aW.active()),null==t?void 0:t.root)return new aN;var a,n=r&&aF(r);return"object"==typeof(a=n)&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags&&aU(n)?new aN(n):new aN},e.prototype.startActiveSpan=function(e,t,r,a){if(!(arguments.length<2)){2==arguments.length?i=t:3==arguments.length?(n=t,i=r):(n=t,s=r,i=a);var n,s,i,o=null!=s?s:aW.active(),l=this.startSpan(e,n,o),u=aZ(o,l);return aW.with(u,i,void 0,l)}},e}(),aK=new aq,aJ=function(){function e(e,t,r,a){this._provider=e,this.name=t,this.version=r,this.options=a}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,a){var n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):aK},e}(),aG=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new aq},e}()),aH=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var a;return null!=(a=this.getDelegateTracer(e,t,r))?a:new aJ(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:aG},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var a;return null==(a=this._delegate)?void 0:a.getTracer(e,t,r)},e}(),aY="trace";(function(){function e(){this._proxyTracerProvider=new aH,this.wrapSpanContext=aB,this.isSpanContextValid=aU,this.deleteSpan=a$,this.getSpan=aM,this.getActiveSpan=aP,this.getSpanContext=aF,this.setSpan=aZ,this.setSpanContext=aL}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=ac(aY,this._proxyTracerProvider,aE.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return ap(aY)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){ah(aY,aE.instance()),this._proxyTracerProvider=new aH},e})().getInstance(),(o=j||(j={}))[o.UNSET=0]="UNSET",o[o.OK=1]="OK",o[o.ERROR=2]="ERROR";var aQ=Object.defineProperty,aX=(Symbol.for("vercel.ai.error.AI_NoOutputSpecifiedError"),Symbol.for("vercel.ai.error.AI_InvalidArgumentError"),Symbol.for("vercel.ai.error.AI_InvalidStreamPartError"),Symbol.for("vercel.ai.error.AI_InvalidToolInputError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError"),"AI_NoObjectGeneratedError"),a0=`vercel.ai.error.${aX}`,a1=Symbol.for(a0),a9=class extends Q{constructor({message:e="No object generated.",cause:t,text:r,response:a,usage:n,finishReason:s}){super({name:aX,message:e,cause:t}),this[M]=!0,this.text=r,this.response=a,this.usage=n,this.finishReason=s}static isInstance(e){return Q.hasMarker(e,a0)}};M=a1,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchToolError"),Symbol.for("vercel.ai.error.AI_ToolCallRepairError"),Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),Symbol.for("vercel.ai.error.AI_InvalidMessageRoleError"),Symbol.for("vercel.ai.error.AI_MessageConversionError"),Symbol.for("vercel.ai.error.AI_DownloadError"),Symbol.for("vercel.ai.error.AI_RetryError");var a4="5.0.98",a2=rO.z.union([rO.z.string(),rO.z.instanceof(Uint8Array),rO.z.instanceof(ArrayBuffer),rO.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]),a5=rO.z.lazy(()=>rO.z.union([rO.z.null(),rO.z.string(),rO.z.number(),rO.z.boolean(),rO.z.record(rO.z.string(),a5),rO.z.array(a5)])),a3=rO.z.record(rO.z.string(),rO.z.record(rO.z.string(),a5)),a6=rO.z.object({type:rO.z.literal("text"),text:rO.z.string(),providerOptions:a3.optional()}),a8=rO.z.object({type:rO.z.literal("image"),image:rO.z.union([a2,rO.z.instanceof(URL)]),mediaType:rO.z.string().optional(),providerOptions:a3.optional()}),a7=rO.z.object({type:rO.z.literal("file"),data:rO.z.union([a2,rO.z.instanceof(URL)]),filename:rO.z.string().optional(),mediaType:rO.z.string(),providerOptions:a3.optional()}),ne=rO.z.object({type:rO.z.literal("reasoning"),text:rO.z.string(),providerOptions:a3.optional()}),nt=rO.z.object({type:rO.z.literal("tool-call"),toolCallId:rO.z.string(),toolName:rO.z.string(),input:rO.z.unknown(),providerOptions:a3.optional(),providerExecuted:rO.z.boolean().optional()}),nr=rO.z.discriminatedUnion("type",[rO.z.object({type:rO.z.literal("text"),value:rO.z.string()}),rO.z.object({type:rO.z.literal("json"),value:a5}),rO.z.object({type:rO.z.literal("error-text"),value:rO.z.string()}),rO.z.object({type:rO.z.literal("error-json"),value:a5}),rO.z.object({type:rO.z.literal("content"),value:rO.z.array(rO.z.union([rO.z.object({type:rO.z.literal("text"),text:rO.z.string()}),rO.z.object({type:rO.z.literal("media"),data:rO.z.string(),mediaType:rO.z.string()})]))})]),na=rO.z.object({type:rO.z.literal("tool-result"),toolCallId:rO.z.string(),toolName:rO.z.string(),output:nr,providerOptions:a3.optional()}),nn=rO.z.object({role:rO.z.literal("system"),content:rO.z.string(),providerOptions:a3.optional()}),ns=rO.z.object({role:rO.z.literal("user"),content:rO.z.union([rO.z.string(),rO.z.array(rO.z.union([a6,a8,a7]))]),providerOptions:a3.optional()}),ni=rO.z.object({role:rO.z.literal("assistant"),content:rO.z.union([rO.z.string(),rO.z.array(rO.z.union([a6,a7,ne,nt,na]))]),providerOptions:a3.optional()}),no=rO.z.object({role:rO.z.literal("tool"),content:rO.z.array(na),providerOptions:a3.optional()});rO.z.union([nn,ns,ni,no]),tj({prefix:"aitxt",size:24}),TransformStream;var nl=tY(()=>rz(rO.z.union([rO.z.strictObject({type:rO.z.literal("text-start"),id:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("text-delta"),id:rO.z.string(),delta:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("text-end"),id:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("error"),errorText:rO.z.string()}),rO.z.strictObject({type:rO.z.literal("tool-input-start"),toolCallId:rO.z.string(),toolName:rO.z.string(),providerExecuted:rO.z.boolean().optional(),dynamic:rO.z.boolean().optional()}),rO.z.strictObject({type:rO.z.literal("tool-input-delta"),toolCallId:rO.z.string(),inputTextDelta:rO.z.string()}),rO.z.strictObject({type:rO.z.literal("tool-input-available"),toolCallId:rO.z.string(),toolName:rO.z.string(),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),providerMetadata:a3.optional(),dynamic:rO.z.boolean().optional()}),rO.z.strictObject({type:rO.z.literal("tool-input-error"),toolCallId:rO.z.string(),toolName:rO.z.string(),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),providerMetadata:a3.optional(),dynamic:rO.z.boolean().optional(),errorText:rO.z.string()}),rO.z.strictObject({type:rO.z.literal("tool-output-available"),toolCallId:rO.z.string(),output:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),dynamic:rO.z.boolean().optional(),preliminary:rO.z.boolean().optional()}),rO.z.strictObject({type:rO.z.literal("tool-output-error"),toolCallId:rO.z.string(),errorText:rO.z.string(),providerExecuted:rO.z.boolean().optional(),dynamic:rO.z.boolean().optional()}),rO.z.strictObject({type:rO.z.literal("reasoning-start"),id:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("reasoning-delta"),id:rO.z.string(),delta:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("reasoning-end"),id:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("source-url"),sourceId:rO.z.string(),url:rO.z.string(),title:rO.z.string().optional(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("source-document"),sourceId:rO.z.string(),mediaType:rO.z.string(),title:rO.z.string(),filename:rO.z.string().optional(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.literal("file"),url:rO.z.string(),mediaType:rO.z.string(),providerMetadata:a3.optional()}),rO.z.strictObject({type:rO.z.custom(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:rO.z.string().optional(),data:rO.z.unknown(),transient:rO.z.boolean().optional()}),rO.z.strictObject({type:rO.z.literal("start-step")}),rO.z.strictObject({type:rO.z.literal("finish-step")}),rO.z.strictObject({type:rO.z.literal("start"),messageId:rO.z.string().optional(),messageMetadata:rO.z.unknown().optional()}),rO.z.strictObject({type:rO.z.literal("finish"),finishReason:rO.z.enum(["stop","length","content-filter","tool-calls","error","other","unknown"]).optional(),messageMetadata:rO.z.unknown().optional()}),rO.z.strictObject({type:rO.z.literal("abort")}),rO.z.strictObject({type:rO.z.literal("message-metadata"),messageMetadata:rO.z.unknown()})])));async function nu(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await t1({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await t1({text:function(e){let t=["ROOT"],r=-1,a=null;function n(e,n,s){switch(e){case'"':r=n,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=n,a=n,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=n,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":r=n,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":r=n,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,a){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=a,t.pop()}}function i(e,a){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=a,t.pop()}}for(let o=0;o<e.length;o++){let l=e[o];switch(t[t.length-1]){case"ROOT":n(l,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(l,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,o);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=o}break;case"INSIDE_ARRAY_START":"]"===l?(r=o,t.pop()):(r=o,n(l,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop();break;default:r=o}break;case"INSIDE_ARRAY_AFTER_COMMA":n(l,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=o;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(a,o+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?r=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o))}}}let o=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(a,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}return o}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}function nd(e){return e.type.startsWith("tool-")}function nc(e){return nd(e)||"dynamic-tool"===e.type}function np(e){return e.type.split("-").slice(1).join("-")}async function nh({stream:e,onError:t}){let r=e.getReader();try{for(;;){let{done:e}=await r.read();if(e)break}}catch(e){null==t||t(e)}finally{r.releaseLock()}}tj({prefix:"aitxt",size:24}),tj({prefix:"aiobj",size:24});var nf=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,r)=>{this.queue.push(async()=>{try{await e(),t()}catch(e){r(e)}}),this.processQueue()})}};tj({prefix:"aiobj",size:24});var nm={},ng={object:()=>n_,text:()=>nv};for(var ny in ng)aQ(nm,ny,{get:ng[ny],enumerable:!0});var nv=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:e})=>({partial:e}),parseOutput:async({text:e})=>e}),n_=({schema:e})=>{let t=null==e?rT({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&rI in e&&!0===e[rI]&&"jsonSchema"in e&&"validate"in e?e:"function"==typeof e?e():rz(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:e}){let t=await nu(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},r){let a=await t1({text:e});if(!a.success)throw new a9({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let n=await tX({value:a.value,schema:t});if(!n.success)throw new a9({message:"No object generated: response did not match schema.",cause:n.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return n.value}}};async function nb(e){if(null==e)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async e=>{let{name:t,type:r}=e;return{type:"file",mediaType:r,filename:t,url:await new Promise((t,r)=>{let a=new FileReader;a.onload=e=>{var r;t(null==(r=e.target)?void 0:r.result)},a.onerror=e=>r(e),a.readAsDataURL(e)})}}))}Symbol.for("vercel.ai.error.AI_NoSuchProviderError");var nw=class{constructor({api:e="/api/chat",credentials:t,headers:r,body:a,fetch:n,prepareSendMessagesRequest:s,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=r,this.body=a,this.fetch=n,this.prepareSendMessagesRequest=s,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var r,a,n,s,i;let o=await t3(this.body),l=await t3(this.headers),u=await t3(this.credentials),d={...tF(l),...tF(t.headers)},c=await (null==(r=this.prepareSendMessagesRequest)?void 0:r.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:d,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),p=null!=(a=null==c?void 0:c.api)?a:this.api,h=(null==c?void 0:c.headers)!==void 0?tF(c.headers):d,f=(null==c?void 0:c.body)!==void 0?c.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},m=null!=(n=null==c?void 0:c.credentials)?n:u,g=null!=(s=this.fetch)?s:globalThis.fetch,y=await g(p,{method:"POST",headers:tD({"Content-Type":"application/json",...h},`ai-sdk/${a4}`,tL()),body:JSON.stringify(f),credentials:m,signal:e});if(!y.ok)throw Error(null!=(i=await y.text())?i:"Failed to fetch the chat response.");if(!y.body)throw Error("The response body is empty.");return this.processResponseStream(y.body)}async reconnectToStream(e){var t,r,a,n,s;let i=await t3(this.body),o=await t3(this.headers),l=await t3(this.credentials),u={...tF(o),...tF(e.headers)},d=await (null==(t=this.prepareReconnectToStreamRequest)?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:u,credentials:l,requestMetadata:e.metadata})),c=null!=(r=null==d?void 0:d.api)?r:`${this.api}/${e.chatId}/stream`,p=(null==d?void 0:d.headers)!==void 0?tF(d.headers):u,h=null!=(a=null==d?void 0:d.credentials)?a:l,f=null!=(n=this.fetch)?n:globalThis.fetch,m=await f(c,{method:"GET",headers:tD(p,`ai-sdk/${a4}`,tL()),credentials:h});if(204===m.status)return null;if(!m.ok)throw Error(null!=(s=await m.text())?s:"Failed to fetch the chat response.");if(!m.body)throw Error("The response body is empty.");return this.processResponseStream(m.body)}},nk=class extends nw{constructor(e={}){super(e)}processResponseStream(e){return t9({stream:e,schema:nl}).pipeThrough(new TransformStream({async transform(e,t){if(!e.success)throw e.error;t.enqueue(e.value)}}))}},nx=class{constructor({generateId:e=tM,id:t=e(),transport:r=new nk,messageMetadataSchema:a,dataPartSchemas:n,state:s,onError:i,onToolCall:o,onFinish:l,onData:u,sendAutomaticallyWhen:d}){this.activeResponse=void 0,this.jobExecutor=new nf,this.sendMessage=async(e,t)=>{var r,a,n,s;let i;if(null==e)return void await this.makeRequest({trigger:"submit-message",messageId:null==(r=this.lastMessage)?void 0:r.id,...t});if(i="text"in e||"files"in e?{parts:[...Array.isArray(e.files)?e.files:await nb(e.files),..."text"in e&&null!=e.text?[{type:"text",text:e.text}]:[]]}:e,null!=e.messageId){let t=this.state.messages.findIndex(t=>t.id===e.messageId);if(-1===t)throw Error(`message with id ${e.messageId} not found`);if("user"!==this.state.messages[t].role)throw Error(`message with id ${e.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,t+1),this.state.replaceMessage(t,{...i,id:e.messageId,role:null!=(a=i.role)?a:"user",metadata:e.metadata})}else this.state.pushMessage({...i,id:null!=(n=i.id)?n:this.generateId(),role:null!=(s=i.role)?s:"user",metadata:e.metadata});await this.makeRequest({trigger:"submit-message",messageId:e.messageId,...t})},this.regenerate=async({messageId:e,...t}={})=>{let r=null==e?this.state.messages.length-1:this.state.messages.findIndex(t=>t.id===e);if(-1===r)throw Error(`message ${e} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[r].role?r:r+1),await this.makeRequest({trigger:"regenerate-message",messageId:e,...t})},this.resumeStream=async(e={})=>{await this.makeRequest({trigger:"resume-stream",...e})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolOutput=async({state:e="output-available",tool:t,toolCallId:r,output:a,errorText:n})=>this.jobExecutor.run(async()=>{var t,s;let i=this.state.messages,o=i[i.length-1];this.state.replaceMessage(i.length-1,{...o,parts:o.parts.map(t=>nc(t)&&t.toolCallId===r?{...t,state:e,output:a,errorText:n}:t)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(t=>nc(t)&&t.toolCallId===r?{...t,state:e,output:a,errorText:n}:t)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(t=this.sendAutomaticallyWhen)?void 0:t.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(s=this.lastMessage)?void 0:s.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var e;("streaming"===this.status||"submitted"===this.status)&&(null==(e=this.activeResponse)?void 0:e.abortController)&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=a,this.dataPartSchemas=n,this.state=s,this.onError=i,this.onToolCall=o,this.onFinish=l,this.onData=u,this.sendAutomaticallyWhen=d}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:r,body:a,messageId:n}){var s,i,o,l;this.setStatus({status:"submitted",error:void 0});let u=this.lastMessage,d=!1,c=!1,p=!1;try{let s,i={state:function({lastMessage:e,messageId:t}){return{message:(null==e?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}({lastMessage:this.state.snapshot(u),messageId:this.generateId()}),abortController:new AbortController};if(i.abortController.signal.addEventListener("abort",()=>{d=!0}),this.activeResponse=i,"resume-stream"===e){let e=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:r,body:a});if(null==e)return void this.setStatus({status:"ready"});s=e}else s=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:i.abortController.signal,metadata:t,headers:r,body:a,trigger:e,messageId:n});let o=e=>this.jobExecutor.run(()=>e({state:i.state,write:()=>{var e;this.setStatus({status:"streaming"}),i.state.message.id===(null==(e=this.lastMessage)?void 0:e.id)?this.state.replaceMessage(this.state.messages.length-1,i.state.message):this.state.pushMessage(i.state.message)}}));await nh({stream:function({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:a,onError:n,onToolCall:s,onData:i}){return e.pipeThrough(new TransformStream({async transform(e,o){await a(async({state:a,write:l})=>{var u,d,c,p;function h(e){let t=a.message.parts.filter(nd).find(t=>t.toolCallId===e);if(null==t)throw Error("tool-output-error must be preceded by a tool-input-available");return t}function f(e){let t=a.message.parts.filter(e=>"dynamic-tool"===e.type).find(t=>t.toolCallId===e);if(null==t)throw Error("tool-output-error must be preceded by a tool-input-available");return t}function m(e){var t;let r=a.message.parts.find(t=>nd(t)&&t.toolCallId===e.toolCallId);null!=r?(r.state=e.state,r.input=e.input,r.output=e.output,r.errorText=e.errorText,r.rawInput=e.rawInput,r.preliminary=e.preliminary,r.providerExecuted=null!=(t=e.providerExecuted)?t:r.providerExecuted,null!=e.providerMetadata&&"input-available"===r.state&&(r.callProviderMetadata=e.providerMetadata)):a.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,rawInput:e.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted,preliminary:e.preliminary,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}function g(e){var t,r;let n=a.message.parts.find(t=>"dynamic-tool"===t.type&&t.toolCallId===e.toolCallId);null!=n?(n.state=e.state,n.toolName=e.toolName,n.input=e.input,n.output=e.output,n.errorText=e.errorText,n.rawInput=null!=(t=e.rawInput)?t:n.rawInput,n.preliminary=e.preliminary,n.providerExecuted=null!=(r=e.providerExecuted)?r:n.providerExecuted,null!=e.providerMetadata&&"input-available"===n.state&&(n.callProviderMetadata=e.providerMetadata)):a.message.parts.push({type:"dynamic-tool",toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,errorText:e.errorText,preliminary:e.preliminary,providerExecuted:e.providerExecuted,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}async function y(e){if(null!=e){let r=null!=a.message.metadata?function e(t,r){if(void 0===t&&void 0===r)return;if(void 0===t)return r;if(void 0===r)return t;let a={...t};for(let n in r)if(Object.prototype.hasOwnProperty.call(r,n)){let s=r[n];if(void 0===s)continue;let i=n in t?t[n]:void 0,o=null!==s&&"object"==typeof s&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),l=null!=i&&"object"==typeof i&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);o&&l?a[n]=e(i,s):a[n]=s}return a}(a.message.metadata,e):e;null!=t&&await tQ({value:r,schema:t}),a.message.metadata=r}}switch(e.type){case"text-start":{let t={type:"text",text:"",providerMetadata:e.providerMetadata,state:"streaming"};a.activeTextParts[e.id]=t,a.message.parts.push(t),l();break}case"text-delta":{let t=a.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(u=e.providerMetadata)?u:t.providerMetadata,l();break}case"text-end":{let t=a.activeTextParts[e.id];t.state="done",t.providerMetadata=null!=(d=e.providerMetadata)?d:t.providerMetadata,delete a.activeTextParts[e.id],l();break}case"reasoning-start":{let t={type:"reasoning",text:"",providerMetadata:e.providerMetadata,state:"streaming"};a.activeReasoningParts[e.id]=t,a.message.parts.push(t),l();break}case"reasoning-delta":{let t=a.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(c=e.providerMetadata)?c:t.providerMetadata,l();break}case"reasoning-end":{let t=a.activeReasoningParts[e.id];t.providerMetadata=null!=(p=e.providerMetadata)?p:t.providerMetadata,t.state="done",delete a.activeReasoningParts[e.id],l();break}case"file":a.message.parts.push({type:"file",mediaType:e.mediaType,url:e.url}),l();break;case"source-url":a.message.parts.push({type:"source-url",sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),l();break;case"source-document":a.message.parts.push({type:"source-document",sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),l();break;case"tool-input-start":{let t=a.message.parts.filter(nd);a.partialToolCalls[e.toolCallId]={text:"",toolName:e.toolName,index:t.length,dynamic:e.dynamic},e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted}),l();break}case"tool-input-delta":{let t=a.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:r}=await nu(t.text);t.dynamic?g({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:r}):m({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:r}),l();break}case"tool-input-available":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),l(),s&&!e.providerExecuted&&await s({toolCall:e});break;case"tool-input-error":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),l();break;case"tool-output-available":if(e.dynamic){let t=f(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-available",input:t.input,output:e.output,preliminary:e.preliminary})}else{let t=h(e.toolCallId);m({toolCallId:e.toolCallId,toolName:np(t),state:"output-available",input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary})}l();break;case"tool-output-error":if(e.dynamic){let t=f(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-error",input:t.input,errorText:e.errorText,providerExecuted:e.providerExecuted})}else{let t=h(e.toolCallId);m({toolCallId:e.toolCallId,toolName:np(t),state:"output-error",input:t.input,rawInput:t.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted})}l();break;case"start-step":a.message.parts.push({type:"step-start"});break;case"finish-step":a.activeTextParts={},a.activeReasoningParts={};break;case"start":null!=e.messageId&&(a.message.id=e.messageId),await y(e.messageMetadata),(null!=e.messageId||null!=e.messageMetadata)&&l();break;case"finish":null!=e.finishReason&&(a.finishReason=e.finishReason),await y(e.messageMetadata),null!=e.messageMetadata&&l();break;case"message-metadata":await y(e.messageMetadata),null!=e.messageMetadata&&l();break;case"error":null==n||n(Error(e.errorText));break;default:if(e.type.startsWith("data-")){if((null==r?void 0:r[e.type])!=null&&await tQ({value:e.data,schema:r[e.type]}),e.transient){null==i||i(e);break}let t=null!=e.id?a.message.parts.find(t=>e.type===t.type&&e.id===t.id):void 0;null!=t?t.data=e.data:a.message.parts.push(e),null==i||i(e),l()}}o.enqueue(e)})}}))}({stream:s,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:o,onError:e=>{throw e}}),onError:e=>{throw e}}),this.setStatus({status:"ready"})}catch(e){if(d||"AbortError"===e.name)return d=!0,this.setStatus({status:"ready"}),null;p=!0,e instanceof TypeError&&(e.message.toLowerCase().includes("fetch")||e.message.toLowerCase().includes("network"))&&(c=!0),this.onError&&e instanceof Error&&this.onError(e),this.setStatus({status:"error",error:e})}finally{try{null==(i=this.onFinish)||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:d,isDisconnect:c,isError:p,finishReason:null==(s=this.activeResponse)?void 0:s.state.finishReason})}catch(e){console.error(e)}this.activeResponse=void 0}(null==(o=this.sendAutomaticallyWhen)?void 0:o.call(this,{messages:this.state.messages}))&&!p&&await this.makeRequest({trigger:"submit-message",messageId:null==(l=this.lastMessage)?void 0:l.id,metadata:t,headers:r,body:a})}};tY(()=>rz(rO.z.array(rO.z.object({id:rO.z.string(),role:rO.z.enum(["system","user","assistant"]),metadata:rO.z.unknown().optional(),parts:rO.z.array(rO.z.union([rO.z.object({type:rO.z.literal("text"),text:rO.z.string(),state:rO.z.enum(["streaming","done"]).optional(),providerMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("reasoning"),text:rO.z.string(),state:rO.z.enum(["streaming","done"]).optional(),providerMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("source-url"),sourceId:rO.z.string(),url:rO.z.string(),title:rO.z.string().optional(),providerMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("source-document"),sourceId:rO.z.string(),mediaType:rO.z.string(),title:rO.z.string(),filename:rO.z.string().optional(),providerMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("file"),mediaType:rO.z.string(),filename:rO.z.string().optional(),url:rO.z.string(),providerMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("step-start")}),rO.z.object({type:rO.z.string().startsWith("data-"),id:rO.z.string().optional(),data:rO.z.unknown()}),rO.z.object({type:rO.z.literal("dynamic-tool"),toolName:rO.z.string(),toolCallId:rO.z.string(),state:rO.z.literal("input-streaming"),input:rO.z.unknown().optional(),providerExecuted:rO.z.boolean().optional(),output:rO.z.never().optional(),errorText:rO.z.never().optional()}),rO.z.object({type:rO.z.literal("dynamic-tool"),toolName:rO.z.string(),toolCallId:rO.z.string(),state:rO.z.literal("input-available"),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional()}),rO.z.object({type:rO.z.literal("dynamic-tool"),toolName:rO.z.string(),toolCallId:rO.z.string(),state:rO.z.literal("output-available"),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),output:rO.z.unknown(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),preliminary:rO.z.boolean().optional()}),rO.z.object({type:rO.z.literal("dynamic-tool"),toolName:rO.z.string(),toolCallId:rO.z.string(),state:rO.z.literal("output-error"),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),output:rO.z.never().optional(),errorText:rO.z.string(),callProviderMetadata:a3.optional()}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("input-streaming"),providerExecuted:rO.z.boolean().optional(),input:rO.z.unknown().optional(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),approval:rO.z.never().optional()}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("input-available"),providerExecuted:rO.z.boolean().optional(),input:rO.z.unknown(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),approval:rO.z.never().optional()}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("approval-requested"),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),approval:rO.z.object({id:rO.z.string(),approved:rO.z.never().optional(),reason:rO.z.never().optional()})}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("approval-responded"),input:rO.z.unknown(),providerExecuted:rO.z.boolean().optional(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),approval:rO.z.object({id:rO.z.string(),approved:rO.z.boolean(),reason:rO.z.string().optional()})}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("output-available"),providerExecuted:rO.z.boolean().optional(),input:rO.z.unknown(),output:rO.z.unknown(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),preliminary:rO.z.boolean().optional(),approval:rO.z.object({id:rO.z.string(),approved:rO.z.literal(!0),reason:rO.z.string().optional()}).optional()}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("output-error"),providerExecuted:rO.z.boolean().optional(),input:rO.z.unknown(),output:rO.z.never().optional(),errorText:rO.z.string(),callProviderMetadata:a3.optional(),approval:rO.z.object({id:rO.z.string(),approved:rO.z.literal(!0),reason:rO.z.string().optional()}).optional()}),rO.z.object({type:rO.z.string().startsWith("tool-"),toolCallId:rO.z.string(),state:rO.z.literal("output-denied"),providerExecuted:rO.z.boolean().optional(),input:rO.z.unknown(),output:rO.z.never().optional(),errorText:rO.z.never().optional(),callProviderMetadata:a3.optional(),approval:rO.z.object({id:rO.z.string(),approved:rO.z.literal(!1),reason:rO.z.string().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty")));var nE=e.i(561030),nz=e.i(334960);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],89601);var nI=Object.prototype.hasOwnProperty;let nT=new WeakMap,nS=()=>{},nA=nS(),nO=Object,nC=e=>e===nA,nR=(e,t)=>({...e,...t}),nN={},nj={},nM="undefined",nP=typeof window!=nM,nZ=typeof document!=nM,n$=nP&&"Deno"in window,nL=(e,t)=>{let r=nT.get(e);return[()=>!nC(t)&&e.get(t)||nN,a=>{if(!nC(t)){let n=e.get(t);t in nj||(nj[t]=n),r[5](t,nR(n,a),n||nN)}},r[6],()=>!nC(t)&&t in nj?nj[t]:!nC(t)&&e.get(t)||nN]},nF=!0,[nD,nV]=nP&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[nS,nS],nU={initFocus:e=>(nZ&&document.addEventListener("visibilitychange",e),nD("focus",e),()=>{nZ&&document.removeEventListener("visibilitychange",e),nV("focus",e)}),initReconnect:e=>{let t=()=>{nF=!0,e()},r=()=>{nF=!1};return nD("online",t),nD("offline",r),()=>{nV("online",t),nV("offline",r)}}},nB=!q.default.useId,nW=!nP||n$,nq=nW?q.useEffect:q.useLayoutEffect,nK="undefined"!=typeof navigator&&navigator.connection,nJ=!nW&&nK&&(["slow-2g","2g"].includes(nK.effectiveType)||nK.saveData),nG=new WeakMap,nH=(e,t)=>e===`[object ${t}]`,nY=0,nQ=e=>{let t,r,a=typeof e,n=nO.prototype.toString.call(e),s=nH(n,"Date"),i=nH(n,"RegExp"),o=nH(n,"Object");if(nO(e)!==e||s||i)t=s?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=nG.get(e))return t;if(t=++nY+"~",nG.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=nQ(e[r])+",";nG.set(e,t)}if(o){t="#";let a=nO.keys(e).sort();for(;!nC(r=a.pop());)nC(e[r])||(t+=r+":"+nQ(e[r])+",");nG.set(e,t)}}return t},nX=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?nQ(e):"",t]},n0=0,n1=()=>++n0;async function n9(...e){let[t,r,a,n]=e,s=nR({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{}),i=s.populateCache,o=s.rollbackOnError,l=s.optimisticData,u=s.throwOnError;if("function"==typeof r){let e=[];for(let a of t.keys())!/^\$(inf|sub)\$/.test(a)&&r(t.get(a)._k)&&e.push(a);return Promise.all(e.map(d))}return d(r);async function d(r){let n,[d]=nX(r);if(!d)return;let[c,p]=nL(t,d),[h,f,m,g]=nT.get(t),y=()=>{let e=h[d];return("function"==typeof s.revalidate?s.revalidate(c().data,r):!1!==s.revalidate)&&(delete m[d],delete g[d],e&&e[0])?e[0](2).then(()=>c().data):c().data};if(e.length<3)return y();let v=a,_=!1,b=n1();f[d]=[b,0];let w=!nC(l),k=c(),x=k.data,E=k._c,z=nC(E)?x:E;if(w&&p({data:l="function"==typeof l?l(z,x):l,_c:z}),"function"==typeof v)try{v=v(z)}catch(e){n=e,_=!0}if(v&&"function"==typeof v.then){let e;if(v=await v.catch(e=>{n=e,_=!0}),b!==f[d][0]){if(_)throw n;return v}_&&w&&(e=n,"function"==typeof o?o(e):!1!==o)&&(i=!0,p({data:z,_c:nA}))}if(i&&!_&&("function"==typeof i?p({data:i(v,z),error:nA,_c:nA}):p({data:v,error:nA,_c:nA})),f[d][1]=n1(),Promise.resolve(y()).then(()=>{p({_c:nA})}),_){if(u)throw n;return}return v}}let n4=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},n2=(e,t)=>{if(!nT.has(e)){let r=nR(nU,t),a=Object.create(null),n=n9.bind(nA,e),s=nS,i=Object.create(null),o=(e,t)=>{let r=i[e]||[];return i[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},l=(t,r,a)=>{e.set(t,r);let n=i[t];if(n)for(let e of n)e(r,a)},u=()=>{if(!nT.has(e)&&(nT.set(e,[a,Object.create(null),Object.create(null),Object.create(null),n,l,o]),!nW)){let t=r.initFocus(setTimeout.bind(nA,n4.bind(nA,a,0))),n=r.initReconnect(setTimeout.bind(nA,n4.bind(nA,a,1)));s=()=>{t&&t(),n&&n(),nT.delete(e)}}};return u(),[e,n,u,s]}return[e,nT.get(e)[4]]},[n5,n3]=n2(new Map),n6=nR({onLoadingSlow:nS,onSuccess:nS,onError:nS,onErrorRetry:(e,t,r,a,n)=>{let s=r.errorRetryCount,i=n.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(nC(s)||!(i>s))&&setTimeout(a,o,n)},onDiscarded:nS,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:nJ?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:nJ?5e3:3e3,compare:function e(t,r){var a,n;if(t===r)return!0;if(t&&r&&(a=t.constructor)===r.constructor){if(a===Date)return t.getTime()===r.getTime();if(a===RegExp)return t.toString()===r.toString();if(a===Array){if((n=t.length)===r.length)for(;n--&&e(t[n],r[n]););return -1===n}if(!a||"object"==typeof t){for(a in n=0,t)if(nI.call(t,a)&&++n&&!nI.call(r,a)||!(a in r)||!e(t[a],r[a]))return!1;return Object.keys(r).length===n}}return t!=t&&r!=r},isPaused:()=>!1,cache:n5,mutate:n3,fallback:{}},{isOnline:()=>nF,isVisible:()=>{let e=nZ&&document.visibilityState;return nC(e)||"hidden"!==e}}),n8=(0,q.createContext)({});e.i(89601);let n7=nP&&window.__SWR_DEVTOOLS_USE__;(n7?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,a)=>{let n=r&&((...e)=>{let[a]=nX(t),[,,,n]=nT.get(n5);if(a.startsWith("$inf$"))return r(...e);let s=n[a];return nC(s)?r(...e):(delete n[a],s)});return e(t,n,a)}),n7&&(window.__SWR_DEVTOOLS_REACT__=q.default);let se=()=>{},st=se(),sr=(new WeakMap,q.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),sa={dedupe:!0},sn=Promise.resolve(nA);nO.defineProperty(e=>{let{value:t}=e,r=(0,q.useContext)(n8),a="function"==typeof t,n=(0,q.useMemo)(()=>a?t(r):t,[a,r,t]),s=(0,q.useMemo)(()=>a?n:((e,t)=>{let r=nR(e,t);if(t){let{use:a,fallback:n}=e,{use:s,fallback:i}=t;a&&s&&(r.use=a.concat(s)),n&&i&&(r.fallback=nR(n,i))}return r})(r,n),[a,r,n]),i=n&&n.provider,o=(0,q.useRef)(nA);i&&!o.current&&(o.current=n2(i(s.cache||n5),n));let l=o.current;return l&&(s.cache=l[0],s.mutate=l[1]),nq(()=>{if(l)return l[2]&&l[2](),l[3]},[]),(0,q.createElement)(n8.Provider,nR(e,{value:s}))},"defaultValue",{value:n6});var ss=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},si=(e,t,r)=>(ss(e,t,"read from private field"),r?r.call(e):t.get(e)),so=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},sl=(e,t,r,a)=>(ss(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),su=class{constructor(e=[]){so(this,P,void 0),so(this,Z,"ready"),so(this,$,void 0),so(this,L,new Set),so(this,F,new Set),so(this,D,new Set),this.pushMessage=e=>{sl(this,P,si(this,P).concat(e)),si(this,V).call(this)},this.popMessage=()=>{sl(this,P,si(this,P).slice(0,-1)),si(this,V).call(this)},this.replaceMessage=(e,t)=>{sl(this,P,[...si(this,P).slice(0,e),this.snapshot(t),...si(this,P).slice(e+1)]),si(this,V).call(this)},this.snapshot=e=>structuredClone(e),this["~registerMessagesCallback"]=(e,t)=>{let r=t?null!=t?(0,nE.default)(e,t):e:e;return si(this,L).add(r),()=>{si(this,L).delete(r)}},this["~registerStatusCallback"]=e=>(si(this,F).add(e),()=>{si(this,F).delete(e)}),this["~registerErrorCallback"]=e=>(si(this,D).add(e),()=>{si(this,D).delete(e)}),so(this,V,()=>{si(this,L).forEach(e=>e())}),so(this,U,()=>{si(this,F).forEach(e=>e())}),so(this,B,()=>{si(this,D).forEach(e=>e())}),sl(this,P,e)}get status(){return si(this,Z)}set status(e){sl(this,Z,e),si(this,U).call(this)}get error(){return si(this,$)}set error(e){sl(this,$,e),si(this,B).call(this)}get messages(){return si(this,P)}set messages(e){sl(this,P,[...e]),si(this,V).call(this)}};P=new WeakMap,Z=new WeakMap,$=new WeakMap,L=new WeakMap,F=new WeakMap,D=new WeakMap,V=new WeakMap,U=new WeakMap,B=new WeakMap;var sd=class extends nx{constructor({messages:e,...t}){const r=new su(e);super({...t,state:r}),so(this,W,void 0),this["~registerMessagesCallback"]=(e,t)=>si(this,W)["~registerMessagesCallback"](e,t),this["~registerStatusCallback"]=e=>si(this,W)["~registerStatusCallback"](e),this["~registerErrorCallback"]=e=>si(this,W)["~registerErrorCallback"](e),sl(this,W,r)}};function sc({experimental_throttle:e,resume:t=!1,...r}={}){let a=(0,q.useRef)("chat"in r?r.chat:new sd(r));("chat"in r&&r.chat!==a.current||"id"in r&&a.current.id!==r.id)&&(a.current="chat"in r?r.chat:new sd(r));let n="id"in r?r.id:null,s=(0,q.useCallback)(t=>a.current["~registerMessagesCallback"](t,e),[e,n]),i=(0,q.useSyncExternalStore)(s,()=>a.current.messages,()=>a.current.messages),o=(0,q.useSyncExternalStore)(a.current["~registerStatusCallback"],()=>a.current.status,()=>a.current.status),l=(0,q.useSyncExternalStore)(a.current["~registerErrorCallback"],()=>a.current.error,()=>a.current.error),u=(0,q.useCallback)(e=>{"function"==typeof e&&(e=e(a.current.messages)),a.current.messages=e},[a]);return(0,q.useEffect)(()=>{t&&a.current.resumeStream()},[t,a]),{id:a.current.id,messages:i,setMessages:u,sendMessage:a.current.sendMessage,regenerate:a.current.regenerate,clearError:a.current.clearError,stop:a.current.stop,error:l,resumeStream:a.current.resumeStream,status:o,addToolResult:a.current.addToolOutput,addToolOutput:a.current.addToolOutput}}W=new WeakMap,e.s(["useChat",()=>sc],607930)}]);