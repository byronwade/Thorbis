{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/ui/input.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC","debugId":null}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/ui/popover.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC","debugId":null}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/ui/label.tsx"],"sourcesContent":["// Re-export from @stratos/ui package\nexport * from \"@stratos/ui\";\n"],"names":[],"mappings":"AAAA,qCAAqC;;AACrC","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/hooks/use-toast.ts"],"sourcesContent":["/**\n * Toast Hook - Wrapper around Sonner\n *\n * Provides a consistent interface for displaying toast notifications\n * across the application with success, error, loading, and promise states.\n *\n * @example\n * const { toast } = useToast();\n *\n * // Success\n * toast.success(\"Customer created successfully!\");\n *\n * // Error\n * toast.error(\"Failed to save changes\");\n *\n * // Loading\n * const id = toast.loading(\"Saving...\");\n * toast.success(\"Saved!\", { id });\n *\n * // Promise\n * toast.promise(createCustomer(data), {\n *   loading: \"Creating customer...\",\n *   success: \"Customer created!\",\n *   error: \"Failed to create customer\"\n * });\n */\n\nimport { toast as sonnerToast } from \"sonner\";\n\nexport function useToast() {\n\treturn {\n\t\ttoast: {\n\t\t\tsuccess: (message: string, options?: any) =>\n\t\t\t\tsonnerToast.success(message, {\n\t\t\t\t\tduration: 3000,\n\t\t\t\t\t...options,\n\t\t\t\t}),\n\n\t\t\terror: (message: string, options?: any) =>\n\t\t\t\tsonnerToast.error(message, {\n\t\t\t\t\tduration: 5000,\n\t\t\t\t\t...options,\n\t\t\t\t}),\n\n\t\t\tloading: (message: string, options?: any) =>\n\t\t\t\tsonnerToast.loading(message, options),\n\n\t\t\tinfo: (message: string, options?: any) =>\n\t\t\t\tsonnerToast.info(message, {\n\t\t\t\t\tduration: 3000,\n\t\t\t\t\t...options,\n\t\t\t\t}),\n\n\t\t\twarning: (message: string, options?: any) =>\n\t\t\t\tsonnerToast.warning(message, {\n\t\t\t\t\tduration: 4000,\n\t\t\t\t\t...options,\n\t\t\t\t}),\n\n\t\t\tpromise: <T>(\n\t\t\t\tpromise: Promise<T>,\n\t\t\t\tmessages: {\n\t\t\t\t\tloading: string;\n\t\t\t\t\tsuccess: string | ((data: T) => string);\n\t\t\t\t\terror: string | ((error: any) => string);\n\t\t\t\t},\n\t\t\t) => sonnerToast.promise(promise, messages),\n\n\t\t\tdismiss: (id?: string | number) => {\n\t\t\t\tsonnerToast.dismiss(id);\n\t\t\t},\n\n\t\t\t// Shorthand for Server Action responses\n\t\t\tfromActionResult: (result: {\n\t\t\t\tsuccess: boolean;\n\t\t\t\terror?: string;\n\t\t\t\tmessage?: string;\n\t\t\t}) => {\n\t\t\t\tif (result.success) {\n\t\t\t\t\tsonnerToast.success(\n\t\t\t\t\t\tresult.message || \"Operation completed successfully\",\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsonnerToast.error(result.error || \"Operation failed\");\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;CAyBC;;;;AAED;;AAEO,SAAS;IACf,OAAO;QACN,OAAO;YACN,SAAS,CAAC,SAAiB,UAC1B,oRAAW,CAAC,OAAO,CAAC,SAAS;oBAC5B,UAAU;oBACV,GAAG,OAAO;gBACX;YAED,OAAO,CAAC,SAAiB,UACxB,oRAAW,CAAC,KAAK,CAAC,SAAS;oBAC1B,UAAU;oBACV,GAAG,OAAO;gBACX;YAED,SAAS,CAAC,SAAiB,UAC1B,oRAAW,CAAC,OAAO,CAAC,SAAS;YAE9B,MAAM,CAAC,SAAiB,UACvB,oRAAW,CAAC,IAAI,CAAC,SAAS;oBACzB,UAAU;oBACV,GAAG,OAAO;gBACX;YAED,SAAS,CAAC,SAAiB,UAC1B,oRAAW,CAAC,OAAO,CAAC,SAAS;oBAC5B,UAAU;oBACV,GAAG,OAAO;gBACX;YAED,SAAS,CACR,SACA,WAKI,oRAAW,CAAC,OAAO,CAAC,SAAS;YAElC,SAAS,CAAC;gBACT,oRAAW,CAAC,OAAO,CAAC;YACrB;YAEA,wCAAwC;YACxC,kBAAkB,CAAC;gBAKlB,IAAI,OAAO,OAAO,EAAE;oBACnB,oRAAW,CAAC,OAAO,CAClB,OAAO,OAAO,IAAI;gBAEpB,OAAO;oBACN,oRAAW,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI;gBACnC;YACD;QACD;IACD;AACD","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/communication/admin-email-reply-composer.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { AdminCommunication } from \"@/types/entities\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tBold,\n\tCalendar,\n\tChevronDown,\n\tChevronUp,\n\tClock,\n\tImageIcon,\n\tItalic,\n\tLink as LinkIcon,\n\tList,\n\tListOrdered,\n\tLoader2,\n\tMoreHorizontal,\n\tPaperclip,\n\tSend,\n\tSparkles,\n\tTrash2,\n\tUnderline,\n\tX,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nexport type EmailReplyMode = \"reply\" | \"reply-all\" | \"forward\";\n\ntype EmailAttachment = {\n\tfilename: string;\n\tcontent: string;\n\tcontentType?: string;\n\tsize: number;\n};\n\ntype Recipient = {\n\tid: string;\n\tname: string;\n\temail: string;\n\ttype: \"company\" | \"user\" | \"custom\";\n};\n\nconst templateDefinitions = [\n\t{\n\t\tid: \"follow-up\",\n\t\tlabel: \"Friendly follow-up\",\n\t\tbody: \"Hi there,\\n\\nJust checking in - let me know if you have any questions or if you'd like to see anything else from my side.\\n\\nBest,\",\n\t},\n\t{\n\t\tid: \"thank-you\",\n\t\tlabel: \"Thank you note\",\n\t\tbody: \"Hi there,\\n\\nThanks again for your patience while we sorted this out. Let me know if there's anything else I can help with.\\n\\nWarm regards,\",\n\t},\n\t{\n\t\tid: \"next-steps\",\n\t\tlabel: \"Outline next steps\",\n\t\tbody: \"Hi there,\\n\\nI've outlined the next steps:\\n1. Review the details above.\\n2. Confirm when you'd like to move forward.\\n3. I'll lock everything in once you reply.\\n\\nLet me know if you want to adjust anything.\",\n\t},\n\t{\n\t\tid: \"resolution\",\n\t\tlabel: \"Issue resolved\",\n\t\tbody: \"Hi there,\\n\\nI wanted to let you know that we've resolved the issue you reported. Here's a summary of what was done:\\n\\n[Summary]\\n\\nPlease let us know if you experience any further issues.\\n\\nBest regards,\",\n\t},\n];\n\nconst signatureOptions = [\n\t{ id: \"none\", label: \"No signature\", value: \"\" },\n\t{ id: \"support\", label: \"Stratos Support\", value: \"\\n\\nThanks,\\nStratos Support Team\" },\n\t{ id: \"admin\", label: \"Admin Team\", value: \"\\n\\nBest regards,\\nStratos Admin\" },\n];\n\ninterface AdminEmailReplyComposerProps {\n\tmode: EmailReplyMode;\n\tselectedMessage: AdminCommunication | null;\n\tonClose: () => void;\n\tonSent?: (data: Record<string, unknown>) => void;\n\tclassName?: string;\n}\n\nexport function AdminEmailReplyComposer({ mode, selectedMessage, onClose, onSent, className }: AdminEmailReplyComposerProps) {\n\tconst { toast: toastApi } = useToast();\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null);\n\tconst fileInputRef = useRef<HTMLInputElement>(null);\n\tconst [body, setBody] = useState(\"\");\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst [isSending, setIsSending] = useState(false);\n\tconst [signatureId, setSignatureId] = useState(\"support\");\n\tconst [showQuote, setShowQuote] = useState(false);\n\tconst [recipients, setRecipients] = useState<Recipient[]>([]);\n\tconst [ccRecipients, setCcRecipients] = useState<Recipient[]>([]);\n\tconst [bccRecipients, setBccRecipients] = useState<Recipient[]>([]);\n\tconst [showCc, setShowCc] = useState(false);\n\tconst [showBcc, setShowBcc] = useState(false);\n\tconst [subject, setSubject] = useState(\"\");\n\tconst [attachments, setAttachments] = useState<EmailAttachment[]>([]);\n\tconst [newRecipientEmail, setNewRecipientEmail] = useState(\"\");\n\n\t// Schedule send state\n\tconst [scheduleOpen, setScheduleOpen] = useState(false);\n\tconst [scheduledDate, setScheduledDate] = useState<string>(\"\");\n\tconst [scheduledTime, setScheduledTime] = useState<string>(\"\");\n\n\t// Undo send state\n\tconst UNDO_SEND_DELAY = 5000;\n\tconst [isPendingSend, setIsPendingSend] = useState(false);\n\tconst [undoCountdown, setUndoCountdown] = useState(5);\n\tconst sendTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\tconst countdownIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n\tconst signature = useMemo(() => signatureOptions.find((opt) => opt.id === signatureId) ?? signatureOptions[0], [signatureId]);\n\n\t// Build default subject and initial recipients\n\tuseEffect(() => {\n\t\tif (!selectedMessage) return;\n\n\t\tconst base = selectedMessage.subject?.trim() || \"No subject\";\n\t\tconst prefix = mode === \"forward\" ? \"Fwd:\" : \"Re:\";\n\t\tconst newSubject = base.toLowerCase().startsWith(prefix.toLowerCase()) ? base : `${prefix} ${base}`;\n\t\tsetSubject(newSubject);\n\n\t\t// Set default recipient based on mode\n\t\tif (mode !== \"forward\" && selectedMessage.from) {\n\t\t\tconst recipient: Recipient = {\n\t\t\t\tid: `recipient-${selectedMessage.from}`,\n\t\t\t\tname: selectedMessage.userName || selectedMessage.companyName || selectedMessage.from,\n\t\t\t\temail: selectedMessage.from,\n\t\t\t\ttype: selectedMessage.companyId ? \"company\" : \"custom\",\n\t\t\t};\n\t\t\tsetRecipients([recipient]);\n\t\t}\n\t}, [mode, selectedMessage]);\n\n\t// Auto-resize textarea\n\tconst handleInput = useCallback(() => {\n\t\tconst textarea = textareaRef.current;\n\t\tif (textarea) {\n\t\t\ttextarea.style.height = \"auto\";\n\t\t\ttextarea.style.height = `${Math.min(textarea.scrollHeight, 200)}px`;\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\thandleInput();\n\t}, [body, handleInput]);\n\n\tuseEffect(() => {\n\t\tsetTimeout(() => textareaRef.current?.focus(), 100);\n\t}, []);\n\n\tconst applyTemplate = (templateId: string) => {\n\t\tconst template = templateDefinitions.find((t) => t.id === templateId);\n\t\tif (template) {\n\t\t\tsetBody(template.body);\n\t\t}\n\t};\n\n\t// Cancel the pending send\n\tconst cancelSend = useCallback(() => {\n\t\tif (sendTimeoutRef.current) {\n\t\t\tclearTimeout(sendTimeoutRef.current);\n\t\t\tsendTimeoutRef.current = null;\n\t\t}\n\t\tif (countdownIntervalRef.current) {\n\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\tcountdownIntervalRef.current = null;\n\t\t}\n\t\tsetIsPendingSend(false);\n\t\tsetUndoCountdown(5);\n\t\ttoastApi.info(\"Email cancelled\");\n\t}, [toastApi]);\n\n\t// Cleanup timeouts on unmount\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (sendTimeoutRef.current) clearTimeout(sendTimeoutRef.current);\n\t\t\tif (countdownIntervalRef.current) clearInterval(countdownIntervalRef.current);\n\t\t};\n\t}, []);\n\n\t// Schedule send presets\n\tconst getSchedulePreset = (preset: \"tomorrow_morning\" | \"tomorrow_afternoon\" | \"monday_morning\") => {\n\t\tconst now = new Date();\n\t\tlet date: Date;\n\n\t\tswitch (preset) {\n\t\t\tcase \"tomorrow_morning\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\tdate.setHours(8, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"tomorrow_afternoon\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\tdate.setHours(13, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"monday_morning\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tconst dayOfWeek = date.getDay();\n\t\t\t\tconst daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n\t\t\t\tdate.setDate(date.getDate() + daysUntilMonday);\n\t\t\t\tdate.setHours(8, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn date;\n\t};\n\n\tconst handleScheduleSend = async (scheduledFor: Date) => {\n\t\tif (!selectedMessage) {\n\t\t\ttoastApi.error(\"Missing context\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (recipients.length === 0) {\n\t\t\ttoastApi.error(\"Add at least one recipient\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!body.trim()) {\n\t\t\ttoastApi.error(\"Please write a message\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (scheduledFor <= new Date()) {\n\t\t\ttoastApi.error(\"Schedule time must be in the future\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsSending(true);\n\n\t\t// Simulate scheduling\n\t\tsetTimeout(() => {\n\t\t\tconst formattedTime = scheduledFor.toLocaleString(\"en-US\", {\n\t\t\t\tweekday: \"short\",\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t});\n\t\t\ttoastApi.success(`Email scheduled - Will be sent ${formattedTime}`);\n\t\t\tonSent?.({});\n\t\t\tonClose();\n\t\t\tsetIsSending(false);\n\t\t\tsetScheduleOpen(false);\n\t\t}, 1000);\n\t};\n\n\tconst handleCustomSchedule = () => {\n\t\tif (!scheduledDate || !scheduledTime) {\n\t\t\ttoastApi.error(\"Please select both date and time\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst scheduledFor = new Date(`${scheduledDate}T${scheduledTime}`);\n\t\thandleScheduleSend(scheduledFor);\n\t};\n\n\tconst handleSend = async () => {\n\t\tif (!selectedMessage) {\n\t\t\ttoastApi.error(\"Missing context\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (recipients.length === 0) {\n\t\t\ttoastApi.error(\"Add at least one recipient\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!body.trim()) {\n\t\t\ttoastApi.error(\"Please write a message\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Start undo countdown\n\t\tsetIsPendingSend(true);\n\t\tsetUndoCountdown(5);\n\n\t\ttoastApi.loading(\"Sending email...\");\n\n\t\tlet countdown = 5;\n\t\tcountdownIntervalRef.current = setInterval(() => {\n\t\t\tcountdown--;\n\t\t\tsetUndoCountdown(countdown);\n\t\t\tif (countdown <= 0) {\n\t\t\t\tif (countdownIntervalRef.current) {\n\t\t\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\t\t\tcountdownIntervalRef.current = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, 1000);\n\n\t\tsendTimeoutRef.current = setTimeout(() => {\n\t\t\tif (countdownIntervalRef.current) {\n\t\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\t\tcountdownIntervalRef.current = null;\n\t\t\t}\n\t\t\t// Execute send\n\t\t\tsetIsSending(true);\n\t\t\tsetIsPendingSend(false);\n\n\t\t\t// Simulate sending\n\t\t\tsetTimeout(() => {\n\t\t\t\ttoastApi.success(\"Email sent successfully\");\n\t\t\t\tonSent?.({});\n\t\t\t\tonClose();\n\t\t\t\tsetIsSending(false);\n\t\t\t}, 500);\n\t\t}, UNDO_SEND_DELAY);\n\t};\n\n\tconst handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\tif (e.key === \"Enter\" && (e.metaKey || e.ctrlKey)) {\n\t\t\te.preventDefault();\n\t\t\thandleSend();\n\t\t}\n\t};\n\n\tconst handleFileSelect = useCallback(\n\t\tasync (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst files = e.target.files;\n\t\t\tif (!files || files.length === 0) return;\n\n\t\t\tconst maxSize = 10 * 1024 * 1024;\n\t\t\tconst newAttachments: EmailAttachment[] = [];\n\n\t\t\tfor (const file of Array.from(files)) {\n\t\t\t\tif (file.size > maxSize) {\n\t\t\t\t\ttoastApi.error(`File \"${file.name}\" is too large (max 10MB)`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tconst content = await new Promise<string>((resolve, reject) => {\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.onload = () => {\n\t\t\t\t\t\t\tconst base64 = (reader.result as string).split(\",\")[1];\n\t\t\t\t\t\t\tresolve(base64);\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.onerror = reject;\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t});\n\n\t\t\t\t\tnewAttachments.push({\n\t\t\t\t\t\tfilename: file.name,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tcontentType: file.type,\n\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\ttoastApi.error(`Failed to read file \"${file.name}\"`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newAttachments.length > 0) {\n\t\t\t\tsetAttachments((prev) => [...prev, ...newAttachments]);\n\t\t\t}\n\n\t\t\tif (fileInputRef.current) {\n\t\t\t\tfileInputRef.current.value = \"\";\n\t\t\t}\n\t\t},\n\t\t[toastApi]\n\t);\n\n\tconst removeAttachment = useCallback((filename: string) => {\n\t\tsetAttachments((prev) => prev.filter((a) => a.filename !== filename));\n\t}, []);\n\n\tconst formatFileSize = (bytes: number) => {\n\t\tif (bytes < 1024) return `${bytes} B`;\n\t\tif (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n\t\treturn `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n\t};\n\n\tconst addRecipient = (email: string) => {\n\t\tif (!email || !email.includes(\"@\")) return;\n\t\tif (recipients.some((r) => r.email.toLowerCase() === email.toLowerCase())) return;\n\n\t\tsetRecipients((prev) => [\n\t\t\t...prev,\n\t\t\t{\n\t\t\t\tid: `custom-${email}`,\n\t\t\t\tname: email,\n\t\t\t\temail,\n\t\t\t\ttype: \"custom\",\n\t\t\t},\n\t\t]);\n\t\tsetNewRecipientEmail(\"\");\n\t};\n\n\tconst removeRecipient = (email: string) => {\n\t\tsetRecipients((prev) => prev.filter((r) => r.email !== email));\n\t};\n\n\tconst quoteText = useMemo(() => {\n\t\tif (!selectedMessage) return \"\";\n\t\tconst fromName = selectedMessage.userName || selectedMessage.companyName || selectedMessage.from || \"Unknown\";\n\t\tconst date = new Date(selectedMessage.createdAt).toLocaleString(\"en-US\", {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\thour: \"numeric\",\n\t\t\tminute: \"2-digit\",\n\t\t});\n\t\treturn `On ${date}, ${fromName} wrote:\\n${selectedMessage.preview || \"\"}`;\n\t}, [selectedMessage]);\n\n\t// Smart reply suggestions\n\tconst smartReplies = useMemo(() => {\n\t\tif (!selectedMessage?.preview && !selectedMessage?.subject) return [];\n\n\t\tconst content = `${selectedMessage.subject || \"\"} ${selectedMessage.preview || \"\"}`.toLowerCase();\n\t\tconst suggestions: string[] = [];\n\n\t\tif (content.includes(\"?\") || content.includes(\"when\") || content.includes(\"can you\")) {\n\t\t\tif (content.includes(\"schedule\") || content.includes(\"appointment\") || content.includes(\"when\")) {\n\t\t\t\tsuggestions.push(\"Yes, I can schedule that. What time works best for you?\");\n\t\t\t}\n\t\t\tif (content.includes(\"price\") || content.includes(\"cost\") || content.includes(\"quote\")) {\n\t\t\t\tsuggestions.push(\"I'll prepare a quote and send it over shortly.\");\n\t\t\t}\n\t\t}\n\n\t\tif (content.includes(\"thank\") || content.includes(\"thanks\")) {\n\t\t\tsuggestions.push(\"You're welcome! Let me know if you need anything else.\");\n\t\t}\n\n\t\tif (content.includes(\"urgent\") || content.includes(\"asap\")) {\n\t\t\tsuggestions.push(\"I understand the urgency. I'm on it right now.\");\n\t\t}\n\n\t\tif (content.includes(\"issue\") || content.includes(\"problem\") || content.includes(\"error\")) {\n\t\t\tsuggestions.push(\"I'll look into this and get back to you shortly.\");\n\t\t\tsuggestions.push(\"Can you provide more details about the issue?\");\n\t\t}\n\n\t\tif (suggestions.length === 0) {\n\t\t\tsuggestions.push(\"Thanks for reaching out. I'll get back to you shortly.\");\n\t\t\tsuggestions.push(\"Got it, thanks for the update.\");\n\t\t}\n\n\t\treturn suggestions.slice(0, 3);\n\t}, [selectedMessage]);\n\n\tconst applySmartReply = (suggestion: string) => {\n\t\tsetBody(suggestion);\n\t\ttextareaRef.current?.focus();\n\t};\n\n\tif (!selectedMessage) return null;\n\n\treturn (\n\t\t<TooltipProvider>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"w-full overflow-hidden rounded-xl border border-border bg-background shadow-sm transition-all duration-200\",\n\t\t\t\t\t\"focus-within:border-primary/50 focus-within:shadow-md\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{/* Collapsed Header */}\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\n\t\t\t\t\tclassName=\"flex w-full items-center justify-between gap-2 px-3 py-2 text-left hover:bg-muted/50 transition-colors\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2 min-w-0 flex-1\">\n\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide shrink-0\">\n\t\t\t\t\t\t\t{mode === \"forward\" ? \"Forward\" : mode === \"reply-all\" ? \"Reply All\" : \"Reply\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"text-sm text-foreground truncate\">\n\t\t\t\t\t\t\t{recipients.length > 0 ? recipients.map((r) => r.name).join(\", \") : \"Add recipients...\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{isExpanded ? <ChevronUp className=\"h-4 w-4 text-muted-foreground shrink-0\" /> : <ChevronDown className=\"h-4 w-4 text-muted-foreground shrink-0\" />}\n\t\t\t\t</button>\n\n\t\t\t\t{/* Expanded Recipients/Subject */}\n\t\t\t\t{isExpanded && (\n\t\t\t\t\t<div className=\"border-t border-border/50 px-3 py-2 space-y-2 bg-muted/30\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-2\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12 pt-2\">To:</span>\n\t\t\t\t\t\t\t<div className=\"flex-1 flex flex-wrap gap-1 items-center\">\n\t\t\t\t\t\t\t\t{recipients.map((r) => (\n\t\t\t\t\t\t\t\t\t<span key={r.id} className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full\">\n\t\t\t\t\t\t\t\t\t\t{r.name}\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => removeRecipient(r.email)} className=\"hover:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tvalue={newRecipientEmail}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewRecipientEmail(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \",\") {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\taddRecipient(newRecipientEmail.trim());\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonBlur={() => addRecipient(newRecipientEmail.trim())}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add email...\"\n\t\t\t\t\t\t\t\t\tclassName=\"flex-1 min-w-[120px] bg-transparent text-sm outline-none placeholder:text-muted-foreground\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-1 pt-1.5\">\n\t\t\t\t\t\t\t\t{!showCc && (\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowCc(true)} className=\"text-xs text-muted-foreground hover:text-foreground px-1.5 py-0.5 rounded hover:bg-muted transition-colors\">\n\t\t\t\t\t\t\t\t\t\tCc\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!showBcc && (\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowBcc(true)} className=\"text-xs text-muted-foreground hover:text-foreground px-1.5 py-0.5 rounded hover:bg-muted transition-colors\">\n\t\t\t\t\t\t\t\t\t\tBcc\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{showCc && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Cc:</span>\n\t\t\t\t\t\t\t\t<input type=\"email\" placeholder=\"Add Cc recipients...\" className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetShowCc(false);\n\t\t\t\t\t\t\t\t\t\tsetCcRecipients([]);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showBcc && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Bcc:</span>\n\t\t\t\t\t\t\t\t<input type=\"email\" placeholder=\"Add Bcc recipients...\" className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetShowBcc(false);\n\t\t\t\t\t\t\t\t\t\tsetBccRecipients([]);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Subject:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={subject}\n\t\t\t\t\t\t\t\tonChange={(e) => setSubject(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"Subject\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Smart Reply Suggestions */}\n\t\t\t\t{smartReplies.length > 0 && !body && (\n\t\t\t\t\t<div className=\"px-3 py-2 border-b border-border/50\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5 flex-wrap\">\n\t\t\t\t\t\t\t<Sparkles className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\n\t\t\t\t\t\t\t{smartReplies.map((suggestion, index) => (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => applySmartReply(suggestion)}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs px-2.5 py-1 rounded-full border border-border bg-muted/50 hover:bg-muted hover:border-primary/50 transition-colors truncate max-w-[200px]\"\n\t\t\t\t\t\t\t\t\ttitle={suggestion}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{suggestion.length > 40 ? `${suggestion.slice(0, 40)}...` : suggestion}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Message Body */}\n\t\t\t\t<div className=\"px-3 py-2\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tref={textareaRef}\n\t\t\t\t\t\tvalue={body}\n\t\t\t\t\t\tonChange={(e) => setBody(e.target.value)}\n\t\t\t\t\t\tonInput={handleInput}\n\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\tplaceholder=\"Write your reply...\"\n\t\t\t\t\t\tclassName={cn(\"w-full resize-none bg-transparent outline-none\", \"text-sm\", \"placeholder:text-muted-foreground\", \"min-h-[80px] max-h-[200px]\")}\n\t\t\t\t\t\trows={3}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{signature.value && (\n\t\t\t\t\t\t<div className=\"mt-2 pt-2 border-t border-dashed border-border/50\">\n\t\t\t\t\t\t\t<div className=\"text-xs text-muted-foreground mb-1 flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<span>Signature</span>\n\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setSignatureId(\"none\")} className=\"text-[10px] hover:text-foreground transition-colors\">\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"text-sm text-muted-foreground whitespace-pre-wrap\">{signature.value.trim()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Quoted Text Toggle */}\n\t\t\t\t{selectedMessage.preview && (\n\t\t\t\t\t<div className=\"px-3 pb-2\">\n\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowQuote(!showQuote)} className=\"text-xs text-muted-foreground hover:text-foreground flex items-center gap-1\">\n\t\t\t\t\t\t\t<MoreHorizontal className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t{showQuote ? \"Hide\" : \"Show\"} quoted text\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{showQuote && <div className=\"mt-2 pl-3 border-l-2 border-muted text-xs text-muted-foreground whitespace-pre-wrap max-h-[100px] overflow-y-auto\">{quoteText}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Attachments Display */}\n\t\t\t\t{attachments.length > 0 && (\n\t\t\t\t\t<div className=\"px-3 py-2 border-t border-border/50 bg-muted/20\">\n\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t{attachments.map((attachment) => (\n\t\t\t\t\t\t\t\t<div key={attachment.filename} className=\"flex items-center gap-1.5 px-2 py-1 bg-background border rounded-md text-xs\">\n\t\t\t\t\t\t\t\t\t<Paperclip className=\"h-3 w-3 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"max-w-[120px] truncate\">{attachment.filename}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">({formatFileSize(attachment.size)})</span>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => removeAttachment(attachment.filename)} className=\"ml-1 text-muted-foreground hover:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<input ref={fileInputRef} type=\"file\" multiple className=\"hidden\" onChange={handleFileSelect} accept=\"*/*\" />\n\n\t\t\t\t{/* Footer Toolbar */}\n\t\t\t\t<div className=\"flex items-center justify-between gap-1 border-t border-border/50 px-2 py-1.5 bg-muted/30\">\n\t\t\t\t\t<div className=\"flex items-center gap-0.5\">\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\" onClick={() => fileInputRef.current?.click()}>\n\t\t\t\t\t\t\t\t\t<Paperclip className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Attach file</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\">\n\t\t\t\t\t\t\t\t\t<ImageIcon className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Insert image</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\">\n\t\t\t\t\t\t\t\t\t<LinkIcon className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Insert link</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<div className=\"w-px h-4 bg-border mx-1\" />\n\n\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 px-2 gap-1\">\n\t\t\t\t\t\t\t\t\t<Bold className=\"h-3.5 w-3.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<ChevronDown className=\"h-3 w-3 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t<DropdownMenuContent align=\"start\" className=\"w-40\">\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Bold className=\"h-4 w-4 mr-2\" /> Bold\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Italic className=\"h-4 w-4 mr-2\" /> Italic\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Underline className=\"h-4 w-4 mr-2\" /> Underline\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<List className=\"h-4 w-4 mr-2\" /> Bullet list\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<ListOrdered className=\"h-4 w-4 mr-2\" /> Numbered list\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t</DropdownMenu>\n\n\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 px-2 gap-1\">\n\t\t\t\t\t\t\t\t\t<Sparkles className=\"h-3.5 w-3.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground hidden sm:inline\">Templates</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t<DropdownMenuContent align=\"start\" className=\"w-48\">\n\t\t\t\t\t\t\t\t{templateDefinitions.map((template) => (\n\t\t\t\t\t\t\t\t\t<DropdownMenuItem key={template.id} onClick={() => applyTemplate(template.id)}>\n\t\t\t\t\t\t\t\t\t\t{template.label}\n\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t<DropdownMenuItem className=\"text-muted-foreground text-xs\">Signature: {signature.label}</DropdownMenuItem>\n\t\t\t\t\t\t\t\t{signatureOptions.map((opt) => (\n\t\t\t\t\t\t\t\t\t<DropdownMenuItem key={opt.id} onClick={() => setSignatureId(opt.id)} className={cn(\"pl-6\", signatureId === opt.id && \"font-medium text-primary\")}>\n\t\t\t\t\t\t\t\t\t\t{opt.label}\n\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0 text-muted-foreground hover:text-destructive\" onClick={onClose}>\n\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Discard</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{isPendingSend ? (\n\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-3 gap-1.5 rounded-full bg-amber-500 hover:bg-amber-600\" onClick={cancelSend}>\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium\">Undo ({undoCountdown}s)</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-3 gap-1.5 rounded-l-full rounded-r-none\" onClick={handleSend} disabled={isSending || !body.trim()}>\n\t\t\t\t\t\t\t\t\t{isSending ? <Loader2 className=\"h-3.5 w-3.5 animate-spin\" /> : <Send className=\"h-3.5 w-3.5\" />}\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium\">Send</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Popover open={scheduleOpen} onOpenChange={setScheduleOpen}>\n\t\t\t\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-1.5 rounded-l-none rounded-r-full border-l border-primary-foreground/20\" disabled={isSending || !body.trim()}>\n\t\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t\t\t\t<PopoverContent className=\"w-72 p-2\" align=\"end\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">Schedule send</p>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"tomorrow_morning\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tTomorrow morning (8:00 AM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"tomorrow_afternoon\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tTomorrow afternoon (1:00 PM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"monday_morning\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Calendar className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonday morning (8:00 AM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-t border-border pt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">Pick date & time</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2 px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"schedule-date\" className=\"sr-only\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"schedule-date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={scheduledDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setScheduledDate(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={new Date().toISOString().split(\"T\")[0]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"schedule-time\" className=\"sr-only\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTime\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"schedule-time\" type=\"time\" value={scheduledTime} onChange={(e) => setScheduledTime(e.target.value)} className=\"h-8 text-xs\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"w-full mt-2 h-8 text-xs\" onClick={handleCustomSchedule} disabled={!scheduledDate || !scheduledTime}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSchedule\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"px-3 pb-1.5 text-[10px] text-muted-foreground/60 text-right\">Cmd/Ctrl + Enter to send</div>\n\t\t\t</div>\n\t\t</TooltipProvider>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1806, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\";\n\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction ScrollArea({\n\tclassName,\n\tchildren,\n\t...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n\treturn (\n\t\t<ScrollAreaPrimitive.Root\n\t\t\tclassName={cn(\"relative overflow-hidden\", className)}\n\t\t\tdata-slot=\"scroll-area\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<ScrollAreaPrimitive.Viewport\n\t\t\t\tclassName=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n\t\t\t\tdata-slot=\"scroll-area-viewport\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ScrollAreaPrimitive.Viewport>\n\t\t\t<ScrollBar />\n\t\t\t<ScrollAreaPrimitive.Corner />\n\t\t</ScrollAreaPrimitive.Root>\n\t);\n}\n\nfunction ScrollBar({\n\tclassName,\n\torientation = \"vertical\",\n\t...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n\treturn (\n\t\t<ScrollAreaPrimitive.ScrollAreaScrollbar\n\t\t\tclassName={cn(\n\t\t\t\t\"flex touch-none p-px transition-colors select-none\",\n\t\t\t\torientation === \"vertical\" &&\n\t\t\t\t\t\"h-full w-2.5 border-l border-l-transparent\",\n\t\t\t\torientation === \"horizontal\" &&\n\t\t\t\t\t\"h-2.5 flex-col border-t border-t-transparent\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tdata-slot=\"scroll-area-scrollbar\"\n\t\t\torientation={orientation}\n\t\t\t{...props}\n\t\t>\n\t\t\t<ScrollAreaPrimitive.ScrollAreaThumb\n\t\t\t\tclassName=\"bg-border relative flex-1 rounded-full\"\n\t\t\t\tdata-slot=\"scroll-area-thumb\"\n\t\t\t/>\n\t\t</ScrollAreaPrimitive.ScrollAreaScrollbar>\n\t);\n}\n\nexport { ScrollArea, ScrollBar };\n"],"names":[],"mappings":";;;;;;;AAEA;AAGA;AALA;;;;AAOA,SAAS,WAAW,EACnB,SAAS,EACT,QAAQ,EACR,GAAG,OACoD;IACvD,qBACC,oWAAC,4YAAwB;QACxB,WAAW,IAAA,6IAAE,EAAC,4BAA4B;QAC1C,aAAU;QACT,GAAG,KAAK;;0BAET,oWAAC,gZAA4B;gBAC5B,WAAU;gBACV,aAAU;0BAET;;;;;;0BAEF,oWAAC;;;;;0BACD,oWAAC,8YAA0B;;;;;;;;;;;AAG9B;KArBS;AAuBT,SAAS,UAAU,EAClB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACmE;IACtE,qBACC,oWAAC,2ZAAuC;QACvC,WAAW,IAAA,6IAAE,EACZ,sDACA,gBAAgB,cACf,8CACD,gBAAgB,gBACf,gDACD;QAED,aAAU;QACV,aAAa;QACZ,GAAG,KAAK;kBAET,cAAA,oWAAC,uZAAmC;YACnC,WAAU;YACV,aAAU;;;;;;;;;;;AAId;MAzBS","debugId":null}},
    {"offset": {"line": 1884, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/communication/admin-sms-conversation.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Admin SMS Conversation View Component\n *\n * iPhone-style chat bubble display for SMS conversations\n * Features:\n * - Chat bubbles (outbound = right/primary, inbound = left/muted)\n * - Message timestamps grouped by day\n * - Delivery status indicators\n * - Auto-scroll to latest message\n * - Typing indicator support\n */\n\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\nimport { format, isToday, isYesterday, isSameDay } from \"date-fns\";\nimport { Check, CheckCheck, Clock, AlertCircle, Building2, User } from \"lucide-react\";\nimport { useEffect, useRef } from \"react\";\n\ntype MessageDirection = \"inbound\" | \"outbound\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type SmsMessage = {\n\tid: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus?: MessageStatus;\n\tsenderName?: string;\n\tsenderAvatar?: string;\n};\n\nexport type SmsConversation = {\n\tid: string;\n\tcontactName: string;\n\tcontactPhone: string;\n\tcompanyName?: string;\n\tcompanyId?: string;\n\tmessages: SmsMessage[];\n\tisTyping?: boolean;\n};\n\ntype AdminSmsConversationProps = {\n\tconversation: SmsConversation;\n\tclassName?: string;\n};\n\nfunction formatMessageTime(timestamp: string): string {\n\tconst date = new Date(timestamp);\n\treturn format(date, \"h:mm a\");\n}\n\nfunction formatDateDivider(timestamp: string): string {\n\tconst date = new Date(timestamp);\n\tif (isToday(date)) return \"Today\";\n\tif (isYesterday(date)) return \"Yesterday\";\n\treturn format(date, \"EEEE, MMMM d\");\n}\n\nfunction getStatusIcon(status?: MessageStatus) {\n\tswitch (status) {\n\t\tcase \"sending\":\n\t\t\treturn <Clock className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"sent\":\n\t\t\treturn <Check className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"delivered\":\n\t\t\treturn <CheckCheck className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"read\":\n\t\t\treturn <CheckCheck className=\"size-3 text-primary\" />;\n\t\tcase \"failed\":\n\t\t\treturn <AlertCircle className=\"size-3 text-destructive\" />;\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\nfunction MessageBubble({ message, isFirst, isLast, showAvatar }: { message: SmsMessage; isFirst: boolean; isLast: boolean; showAvatar: boolean }) {\n\tconst isOutbound = message.direction === \"outbound\";\n\n\treturn (\n\t\t<div className={cn(\"flex gap-2\", isOutbound ? \"flex-row-reverse\" : \"flex-row\", !isFirst && \"mt-0.5\")}>\n\t\t\t{/* Avatar placeholder for alignment */}\n\t\t\t{!isOutbound && (\n\t\t\t\t<div className=\"w-7 shrink-0\">\n\t\t\t\t\t{showAvatar && (\n\t\t\t\t\t\t<Avatar className=\"size-7\">\n\t\t\t\t\t\t\t<AvatarFallback className=\"bg-muted text-[10px]\">{message.senderName?.charAt(0) || \"?\"}</AvatarFallback>\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Message bubble */}\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"max-w-[75%] px-3 py-2 text-sm\",\n\t\t\t\t\tisOutbound ? \"bg-primary text-primary-foreground\" : \"bg-muted text-foreground\",\n\t\t\t\t\t// Rounded corners based on position in group\n\t\t\t\t\tisFirst && isLast && \"rounded-2xl\",\n\t\t\t\t\tisFirst && !isLast && (isOutbound ? \"rounded-2xl rounded-br-md\" : \"rounded-2xl rounded-bl-md\"),\n\t\t\t\t\t!isFirst && !isLast && (isOutbound ? \"rounded-2xl rounded-r-md\" : \"rounded-2xl rounded-l-md\"),\n\t\t\t\t\t!isFirst && isLast && (isOutbound ? \"rounded-2xl rounded-tr-md\" : \"rounded-2xl rounded-tl-md\")\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<p className=\"whitespace-pre-wrap break-words leading-relaxed\">{message.content}</p>\n\t\t\t</div>\n\n\t\t\t{/* Outbound spacer for alignment */}\n\t\t\t{isOutbound && <div className=\"w-7 shrink-0\" />}\n\t\t</div>\n\t);\n}\n\nfunction MessageGroup({ messages, showDateDivider, dateLabel }: { messages: SmsMessage[]; showDateDivider: boolean; dateLabel: string }) {\n\tconst isOutbound = messages[0]?.direction === \"outbound\";\n\tconst lastMessage = messages[messages.length - 1];\n\n\treturn (\n\t\t<div className=\"space-y-0.5\">\n\t\t\t{showDateDivider && (\n\t\t\t\t<div className=\"flex justify-center py-3\">\n\t\t\t\t\t<span className=\"rounded-full bg-muted px-3 py-1 text-[10px] font-medium text-muted-foreground\">{dateLabel}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{messages.map((message, idx) => (\n\t\t\t\t<MessageBubble key={message.id} message={message} isFirst={idx === 0} isLast={idx === messages.length - 1} showAvatar={!isOutbound && idx === messages.length - 1} />\n\t\t\t))}\n\n\t\t\t{/* Timestamp and status for last message in group */}\n\t\t\t<div className={cn(\"flex items-center gap-1 px-9 pt-1\", isOutbound ? \"justify-end\" : \"justify-start\")}>\n\t\t\t\t<span className=\"text-[10px] text-muted-foreground\">{formatMessageTime(lastMessage?.timestamp || \"\")}</span>\n\t\t\t\t{isOutbound && getStatusIcon(lastMessage?.status)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction TypingIndicator() {\n\treturn (\n\t\t<div className=\"flex gap-2\">\n\t\t\t<div className=\"w-7 shrink-0\">\n\t\t\t\t<Avatar className=\"size-7\">\n\t\t\t\t\t<AvatarFallback className=\"bg-muted text-[10px]\">...</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t</div>\n\t\t\t<div className=\"rounded-2xl rounded-bl-md bg-muted px-4 py-3\">\n\t\t\t\t<div className=\"flex gap-1\">\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50 [animation-delay:-0.3s]\" />\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50 [animation-delay:-0.15s]\" />\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function AdminSmsConversation({ conversation, className }: AdminSmsConversationProps) {\n\tconst scrollRef = useRef<HTMLDivElement>(null);\n\tconst bottomRef = useRef<HTMLDivElement>(null);\n\n\t// Auto-scroll to bottom when messages change\n\tuseEffect(() => {\n\t\tbottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n\t}, [conversation.messages.length, conversation.isTyping]);\n\n\t// Group messages by sender and time proximity (within 2 minutes)\n\tconst groupedMessages: { messages: SmsMessage[]; showDateDivider: boolean; dateLabel: string }[] = [];\n\tlet currentGroup: SmsMessage[] = [];\n\tlet lastDate: Date | null = null;\n\n\tconversation.messages.forEach((message, idx) => {\n\t\tconst messageDate = new Date(message.timestamp);\n\t\tconst prevMessage = conversation.messages[idx - 1];\n\t\tconst showDateDivider = !lastDate || !isSameDay(messageDate, lastDate);\n\n\t\t// Start new group if:\n\t\t// - Different direction\n\t\t// - More than 2 minutes gap\n\t\t// - Different day\n\t\tconst shouldStartNewGroup =\n\t\t\t!prevMessage ||\n\t\t\tprevMessage.direction !== message.direction ||\n\t\t\tmessageDate.getTime() - new Date(prevMessage.timestamp).getTime() > 2 * 60 * 1000 ||\n\t\t\tshowDateDivider;\n\n\t\tif (shouldStartNewGroup && currentGroup.length > 0) {\n\t\t\tgroupedMessages.push({\n\t\t\t\tmessages: currentGroup,\n\t\t\t\tshowDateDivider: !lastDate || !isSameDay(new Date(currentGroup[0]?.timestamp || \"\"), lastDate),\n\t\t\t\tdateLabel: formatDateDivider(currentGroup[0]?.timestamp || \"\"),\n\t\t\t});\n\t\t\tlastDate = new Date(currentGroup[0]?.timestamp || \"\");\n\t\t\tcurrentGroup = [];\n\t\t}\n\n\t\tcurrentGroup.push(message);\n\t});\n\n\t// Push last group\n\tif (currentGroup.length > 0) {\n\t\tgroupedMessages.push({\n\t\t\tmessages: currentGroup,\n\t\t\tshowDateDivider: !lastDate || !isSameDay(new Date(currentGroup[0]?.timestamp || \"\"), lastDate),\n\t\t\tdateLabel: formatDateDivider(currentGroup[0]?.timestamp || \"\"),\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className={cn(\"flex h-full flex-col\", className)}>\n\t\t\t{/* Conversation Header */}\n\t\t\t<div className=\"flex items-center gap-3 border-b border-border/50 bg-card px-4 py-3\">\n\t\t\t\t<Avatar className=\"size-10\">\n\t\t\t\t\t<AvatarFallback className=\"bg-primary/10 text-primary\">\n\t\t\t\t\t\t{conversation.contactName\n\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t.substring(0, 2)}\n\t\t\t\t\t</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<h3 className=\"truncate font-semibold\">{conversation.contactName}</h3>\n\t\t\t\t\t\t{conversation.companyName && (\n\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"shrink-0 gap-1 text-[10px]\">\n\t\t\t\t\t\t\t\t<Building2 className=\"size-2.5\" />\n\t\t\t\t\t\t\t\t{conversation.companyName}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"truncate text-xs text-muted-foreground\">{conversation.contactPhone}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Messages Area */}\n\t\t\t<ScrollArea ref={scrollRef} className=\"flex-1\">\n\t\t\t\t<div className=\"space-y-4 p-4\">\n\t\t\t\t\t{groupedMessages.length === 0 ? (\n\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\n\t\t\t\t\t\t\t<div className=\"mb-3 rounded-full bg-muted p-4\">\n\t\t\t\t\t\t\t\t<User className=\"size-8 text-muted-foreground\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h4 className=\"font-medium\">No messages yet</h4>\n\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-muted-foreground\">Start the conversation by sending a message below</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tgroupedMessages.map((group, idx) => <MessageGroup key={`group-${idx}`} messages={group.messages} showDateDivider={group.showDateDivider} dateLabel={group.dateLabel} />)\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Typing indicator */}\n\t\t\t\t\t{conversation.isTyping && (\n\t\t\t\t\t\t<div className=\"pt-2\">\n\t\t\t\t\t\t\t<TypingIndicator />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Scroll anchor */}\n\t\t\t\t\t<div ref={bottomRef} />\n\t\t\t\t</div>\n\t\t\t</ScrollArea>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2398, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/communication/admin-sms-input.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Admin SMS Message Input Component\n *\n * iPhone-style message input with emoji picker,\n * quick reply templates, and SMS segment counter\n */\n\nimport { Button } from \"@/components/ui/button\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\nimport { ArrowUp, Loader2, MessageSquareText, Smile } from \"lucide-react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\ntype SmsTemplate = {\n\tid: string;\n\tlabel: string;\n\tpreview: string;\n\ttext: string;\n};\n\nconst SMS_TEMPLATES: SmsTemplate[] = [\n\t{\n\t\tid: \"follow-up\",\n\t\tlabel: \"Follow Up\",\n\t\tpreview: \"Service follow-up request\",\n\t\ttext: \"Hi, just following up on our recent communication. Is there anything else I can help you with?\",\n\t},\n\t{\n\t\tid: \"thank-you\",\n\t\tlabel: \"Thank You\",\n\t\tpreview: \"Thank you message\",\n\t\ttext: \"Thank you for reaching out! We appreciate your business and are here to help.\",\n\t},\n\t{\n\t\tid: \"escalated\",\n\t\tlabel: \"Escalated\",\n\t\tpreview: \"Issue escalation notice\",\n\t\ttext: \"I've escalated your issue to our senior support team. Someone will be in touch shortly.\",\n\t},\n\t{\n\t\tid: \"resolved\",\n\t\tlabel: \"Issue Resolved\",\n\t\tpreview: \"Resolution confirmation\",\n\t\ttext: \"Great news - the issue has been resolved. Please let us know if you experience any further problems.\",\n\t},\n];\n\n// SMS segment calculation\nconst SMS_SEGMENT_LENGTH_GSM = 160;\nconst SMS_SEGMENT_LENGTH_UNICODE = 70;\nconst SMS_CONCAT_LENGTH_GSM = 153;\nconst SMS_CONCAT_LENGTH_UNICODE = 67;\n\nfunction isGSM7(text: string): boolean {\n\tconst gsm7Regex = /^[@$\\n\\r_\\x1B !\"#%&'()*+,\\-./0-9:;<=>?A-Za-z]*$/;\n\treturn gsm7Regex.test(text);\n}\n\nfunction calculateSegments(text: string): { segments: number; charsPerSegment: number; isUnicode: boolean } {\n\tif (!text) return { segments: 0, charsPerSegment: 160, isUnicode: false };\n\n\tconst isUnicode = !isGSM7(text);\n\tconst singleLimit = isUnicode ? SMS_SEGMENT_LENGTH_UNICODE : SMS_SEGMENT_LENGTH_GSM;\n\tconst concatLimit = isUnicode ? SMS_CONCAT_LENGTH_UNICODE : SMS_CONCAT_LENGTH_GSM;\n\n\tif (text.length <= singleLimit) {\n\t\treturn { segments: 1, charsPerSegment: singleLimit, isUnicode };\n\t}\n\n\tconst segments = Math.ceil(text.length / concatLimit);\n\treturn { segments, charsPerSegment: concatLimit, isUnicode };\n}\n\n// Common emojis\nconst EMOJI_CATEGORIES = [\n\t{\n\t\tname: \"Frequently Used\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Smileys\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Gestures\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Symbols\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n];\n\ntype AdminSmsInputProps = {\n\tvalue: string;\n\tonChange: (value: string) => void;\n\tonSend: () => void;\n\tsending?: boolean;\n\tdisabled?: boolean;\n\tplaceholder?: string;\n};\n\nexport function AdminSmsInput({ value, onChange, onSend, sending = false, disabled = false, placeholder = \"Type a message...\" }: AdminSmsInputProps) {\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false);\n\tconst [isFocused, setIsFocused] = useState(false);\n\tconst inputRef = useRef<HTMLTextAreaElement>(null);\n\n\t// Calculate SMS segments\n\tconst segmentInfo = calculateSegments(value);\n\tconst showCounter = value.length > 0 && (isFocused || value.length > 100);\n\n\t// Auto-resize textarea\n\tuseEffect(() => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.style.height = \"auto\";\n\t\t\tinputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n\t\t}\n\t}, [value]);\n\n\tconst handleEmojiSelect = useCallback(\n\t\t(emoji: string) => {\n\t\t\tconst textarea = inputRef.current;\n\t\t\tif (textarea) {\n\t\t\t\tconst start = textarea.selectionStart;\n\t\t\t\tconst end = textarea.selectionEnd;\n\t\t\t\tconst newValue = value.substring(0, start) + emoji + value.substring(end);\n\t\t\t\tonChange(newValue);\n\t\t\t\t// Move cursor after emoji\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttextarea.selectionStart = start + emoji.length;\n\t\t\t\t\ttextarea.selectionEnd = start + emoji.length;\n\t\t\t\t\ttextarea.focus();\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tonChange(value + emoji);\n\t\t\t}\n\t\t\tsetShowEmojiPicker(false);\n\t\t},\n\t\t[value, onChange]\n\t);\n\n\tconst handleTemplateSelect = useCallback(\n\t\t(template: SmsTemplate) => {\n\t\t\tonChange(template.text);\n\t\t\tinputRef.current?.focus();\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleSend = useCallback(() => {\n\t\tif (!value.trim() || sending || disabled) return;\n\t\tonSend();\n\t}, [value, sending, disabled, onSend]);\n\n\tconst handleKeyDown = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\t// Enter to send, Shift+Enter for new line\n\t\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\t\te.preventDefault();\n\t\t\t\thandleSend();\n\t\t\t}\n\t\t},\n\t\t[handleSend]\n\t);\n\n\treturn (\n\t\t<div className=\"bg-card border-t border-border/50\">\n\t\t\t{/* Segment Counter */}\n\t\t\t{showCounter && (\n\t\t\t\t<div className=\"flex items-center justify-end gap-2 px-3 pt-2 pb-1\">\n\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\">{value.length} chars</span>\n\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\"></span>\n\t\t\t\t\t<span className={cn(\"text-[10px] font-medium\", segmentInfo.segments > 1 ? \"text-amber-500\" : \"text-muted-foreground\")}>\n\t\t\t\t\t\t{segmentInfo.segments} segment{segmentInfo.segments !== 1 ? \"s\" : \"\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t{segmentInfo.isUnicode && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\"></span>\n\t\t\t\t\t\t\t<span className=\"text-[10px] text-amber-500\">Unicode</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Input Area */}\n\t\t\t<div className=\"flex items-end gap-1.5 p-2\">\n\t\t\t\t{/* Templates Button */}\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t<Button type=\"button\" variant=\"ghost\" size=\"icon\" className=\"mb-0.5 size-10 md:size-8 shrink-0 rounded-full hover:bg-muted\" disabled={disabled} title=\"Quick replies\">\n\t\t\t\t\t\t\t<MessageSquareText className=\"size-5 md:size-4 text-muted-foreground\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent align=\"start\" side=\"top\" className=\"w-56\">\n\t\t\t\t\t\t<div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">Quick Replies</div>\n\t\t\t\t\t\t{SMS_TEMPLATES.map((template) => (\n\t\t\t\t\t\t\t<DropdownMenuItem key={template.id} onClick={() => handleTemplateSelect(template)} className=\"flex-col items-start gap-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">{template.label}</span>\n\t\t\t\t\t\t\t\t<span className=\"line-clamp-1 text-xs text-muted-foreground\">{template.preview}</span>\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\n\t\t\t\t{/* Text Input with Emoji and Send */}\n\t\t\t\t<div className=\"relative min-w-0 flex-1\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex w-full items-center overflow-y-auto rounded-[18px] border border-border bg-muted/50 pl-3 pr-1 py-1 transition-colors\",\n\t\t\t\t\t\t\t\"min-h-[44px] md:min-h-[36px] max-h-[120px]\",\n\t\t\t\t\t\t\t\"focus-within:border-primary/30 focus-within:bg-background focus-within:ring-1 focus-within:ring-primary/20\",\n\t\t\t\t\t\t\t(disabled || sending) && \"cursor-not-allowed opacity-50\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\tonChange={(e) => onChange(e.target.value)}\n\t\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\t\tonFocus={() => setIsFocused(true)}\n\t\t\t\t\t\t\tonBlur={() => setIsFocused(false)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tdisabled={disabled || sending}\n\t\t\t\t\t\t\trows={1}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"w-full min-w-0 resize-none bg-transparent py-1 leading-5 outline-none\",\n\t\t\t\t\t\t\t\t\"text-base md:text-sm\",\n\t\t\t\t\t\t\t\t\"placeholder:text-muted-foreground/60\",\n\t\t\t\t\t\t\t\t(disabled || sending) && \"pointer-events-none\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* Right side buttons */}\n\t\t\t\t\t\t<div className=\"flex shrink-0 items-center gap-0.5 pl-1\">\n\t\t\t\t\t\t\t{/* Emoji Button */}\n\t\t\t\t\t\t\t<Popover open={showEmojiPicker} onOpenChange={setShowEmojiPicker}>\n\t\t\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\"flex size-9 md:size-7 items-center justify-center rounded-full transition-colors\", \"hover:bg-muted/80\", showEmojiPicker && \"bg-muted\")}\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Add emoji\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Smile className=\"size-5 md:size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t\t\t<PopoverContent side=\"top\" align=\"end\" className=\"w-[300px] p-0\">\n\t\t\t\t\t\t\t\t\t<ScrollArea className=\"h-[220px]\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t\t\t\t\t\t\t{EMOJI_CATEGORIES.map((category, idx) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={category.name} className={idx > 0 ? \"mt-3\" : \"\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"mb-1.5 px-1 text-[10px] font-semibold uppercase tracking-wider text-muted-foreground\">{category.name}</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-8 gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{category.emojis.map((emoji, emojiIdx) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${emoji}-${emojiIdx}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex size-8 items-center justify-center rounded-lg text-lg transition-colors hover:bg-muted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEmojiSelect(emoji)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{emoji}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t</Popover>\n\n\t\t\t\t\t\t\t{/* Send Button */}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={handleSend}\n\t\t\t\t\t\t\t\tdisabled={!value.trim() || sending || disabled}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex size-9 md:size-7 items-center justify-center rounded-full transition-all duration-200\",\n\t\t\t\t\t\t\t\t\tvalue.trim() ? \"bg-primary hover:bg-primary/90 scale-100 active:scale-95\" : \"bg-muted/50 scale-90\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{sending ? (\n\t\t\t\t\t\t\t\t\t<Loader2 className={cn(\"size-5 md:size-4 animate-spin\", value.trim() ? \"text-primary-foreground\" : \"text-muted-foreground\")} />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ArrowUp className={cn(\"size-5 md:size-4\", value.trim() ? \"text-primary-foreground\" : \"text-muted-foreground\")} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2974, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/lib/stores/admin-communication-store.ts"],"sourcesContent":["/**\n * Admin Communication Store - Zustand state management\n *\n * Manages communication state for the admin panel:\n * - Active filter (email, sms, call, ticket, all)\n * - Selected message for detail view\n * - Composer state (new message, reply, forward)\n * - Pending messages queue\n */\n\nimport { create } from \"zustand\";\n\ntype MessageType = \"email\" | \"sms\" | \"call\" | \"voicemail\" | \"ticket\";\ntype ActiveFilter = MessageType | \"all\";\ntype ComposerType = \"email\" | \"sms\" | \"call\";\ntype ComposerMode = \"new\" | \"reply\" | \"reply-all\" | \"forward\";\ntype MessageDirection = \"inbound\" | \"outbound\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type ComposerContext = {\n\tcompanyId?: string;\n\tcompanyName?: string;\n\tuserId?: string;\n\tuserName?: string;\n\temail?: string;\n\tphone?: string;\n\tthreadId?: string;\n\tmessageId?: string;\n\tsubject?: string;\n\toriginalContent?: string;\n};\n\nexport type PendingMessage = {\n\tid: string;\n\tconversationId: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus: MessageStatus;\n\tcontactName?: string;\n\tcontactEmail?: string;\n\tcontactPhone?: string;\n\tcompanyId?: string;\n};\n\ntype PendingMessageMap = Record<string, PendingMessage[]>;\n\ntype AdminCommunicationStore = {\n\t// Filter state\n\tactiveFilter: ActiveFilter;\n\tsetActiveFilter: (filter: ActiveFilter) => void;\n\n\t// Selection state\n\tselectedMessageId: string | null;\n\tsetSelectedMessageId: (id: string | null) => void;\n\n\t// View state\n\tisDetailView: boolean;\n\tsetIsDetailView: (isDetailView: boolean) => void;\n\tactiveThreadId: string | null;\n\tsetActiveThreadId: (threadId: string | null) => void;\n\n\t// Composer state\n\tcomposer: {\n\t\tisOpen: boolean;\n\t\ttype: ComposerType | null;\n\t\tmode: ComposerMode;\n\t\tcontext?: ComposerContext;\n\t};\n\topenComposer: (type: ComposerType, mode?: ComposerMode, context?: ComposerContext) => void;\n\tcloseComposer: () => void;\n\n\t// Reply state\n\treplyMode: ComposerMode | null;\n\tsetReplyMode: (mode: ComposerMode | null) => void;\n\n\t// Pending messages (optimistic updates)\n\tpendingMessages: PendingMessageMap;\n\taddPendingMessage: (message: PendingMessage) => void;\n\tresolvePendingMessage: (conversationId: string, messageId: string, replacement?: PendingMessage) => void;\n\tresetPendingMessages: (conversationId: string) => void;\n\n\t// Undo send state\n\tundoSend: {\n\t\tmessageId: string | null;\n\t\ttimeoutId: NodeJS.Timeout | null;\n\t\tsecondsRemaining: number;\n\t};\n\tsetUndoSend: (messageId: string | null, timeoutId?: NodeJS.Timeout | null) => void;\n\tdecrementUndoTimer: () => void;\n\tcancelUndoSend: () => void;\n};\n\nexport const useAdminCommunicationStore = create<AdminCommunicationStore>((set, get) => ({\n\t// Filter state\n\tactiveFilter: \"all\",\n\tsetActiveFilter: (filter) => set({ activeFilter: filter }),\n\n\t// Selection state\n\tselectedMessageId: null,\n\tsetSelectedMessageId: (id) => set({ selectedMessageId: id }),\n\n\t// View state\n\tisDetailView: false,\n\tsetIsDetailView: (isDetailView) => set({ isDetailView }),\n\tactiveThreadId: null,\n\tsetActiveThreadId: (threadId) => set({ activeThreadId: threadId }),\n\n\t// Composer state\n\tcomposer: {\n\t\tisOpen: false,\n\t\ttype: null,\n\t\tmode: \"new\",\n\t},\n\topenComposer: (type, mode = \"new\", context) => {\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\tisOpen: true,\n\t\t\t\ttype,\n\t\t\t\tmode,\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t},\n\tcloseComposer: () =>\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\tisOpen: false,\n\t\t\t\ttype: null,\n\t\t\t\tmode: \"new\",\n\t\t\t},\n\t\t}),\n\n\t// Reply state\n\treplyMode: null,\n\tsetReplyMode: (mode) => set({ replyMode: mode }),\n\n\t// Pending messages\n\tpendingMessages: {},\n\taddPendingMessage: (message) =>\n\t\tset((state) => {\n\t\t\tconst existing = state.pendingMessages[message.conversationId] ?? [];\n\t\t\treturn {\n\t\t\t\tpendingMessages: {\n\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t[message.conversationId]: [...existing, message],\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n\tresolvePendingMessage: (conversationId, messageId, replacement) =>\n\t\tset((state) => {\n\t\t\tconst current = state.pendingMessages[conversationId] ?? [];\n\t\t\tconst filtered = current.filter((msg) => msg.id !== messageId);\n\t\t\tif (replacement) {\n\t\t\t\tfiltered.push(replacement);\n\t\t\t}\n\t\t\tconst nextPending =\n\t\t\t\tfiltered.length > 0\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t\t\t[conversationId]: filtered,\n\t\t\t\t\t\t}\n\t\t\t\t\t: Object.fromEntries(Object.entries(state.pendingMessages).filter(([key]) => key !== conversationId));\n\t\t\treturn {\n\t\t\t\tpendingMessages: nextPending,\n\t\t\t};\n\t\t}),\n\tresetPendingMessages: (conversationId) =>\n\t\tset((state) => {\n\t\t\tif (!state.pendingMessages[conversationId]) {\n\t\t\t\treturn { pendingMessages: state.pendingMessages };\n\t\t\t}\n\t\t\tconst nextEntries = Object.entries(state.pendingMessages).filter(([key]) => key !== conversationId);\n\t\t\treturn {\n\t\t\t\tpendingMessages: Object.fromEntries(nextEntries),\n\t\t\t};\n\t\t}),\n\n\t// Undo send state\n\tundoSend: {\n\t\tmessageId: null,\n\t\ttimeoutId: null,\n\t\tsecondsRemaining: 5,\n\t},\n\tsetUndoSend: (messageId, timeoutId = null) =>\n\t\tset({\n\t\t\tundoSend: {\n\t\t\t\tmessageId,\n\t\t\t\ttimeoutId,\n\t\t\t\tsecondsRemaining: 5,\n\t\t\t},\n\t\t}),\n\tdecrementUndoTimer: () =>\n\t\tset((state) => ({\n\t\t\tundoSend: {\n\t\t\t\t...state.undoSend,\n\t\t\t\tsecondsRemaining: Math.max(0, state.undoSend.secondsRemaining - 1),\n\t\t\t},\n\t\t})),\n\tcancelUndoSend: () => {\n\t\tconst { undoSend } = get();\n\t\tif (undoSend.timeoutId) {\n\t\t\tclearTimeout(undoSend.timeoutId);\n\t\t}\n\t\tset({\n\t\t\tundoSend: {\n\t\t\t\tmessageId: null,\n\t\t\t\ttimeoutId: null,\n\t\t\t\tsecondsRemaining: 5,\n\t\t\t},\n\t\t});\n\t},\n}));\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3115, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/communication/admin-sms-panel.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * Admin SMS Panel Component\n *\n * Complete SMS conversation panel combining:\n * - Conversation header with contact info\n * - iPhone-style message bubbles\n * - Message input with emoji picker\n * - Optimistic updates for sent messages\n */\n\nimport { useCallback, useState, useTransition } from \"react\";\nimport { AdminSmsConversation, type SmsConversation, type SmsMessage } from \"./admin-sms-conversation\";\nimport { AdminSmsInput } from \"./admin-sms-input\";\nimport { cn } from \"@/lib/utils\";\nimport { useAdminCommunicationStore } from \"@/lib/stores/admin-communication-store\";\nimport type { AdminCommunication } from \"@/types/entities\";\n\ntype AdminSmsPanelProps = {\n\tcommunication: AdminCommunication;\n\tonMessageSent?: (message: SmsMessage) => void;\n\tclassName?: string;\n};\n\n// Convert AdminCommunication to SmsConversation format\nfunction toSmsConversation(comm: AdminCommunication): SmsConversation {\n\t// For demo, create a conversation from the communication\n\t// In production, this would fetch the full thread from the server\n\tconst messages: SmsMessage[] = [\n\t\t{\n\t\t\tid: comm.id,\n\t\t\tdirection: comm.direction,\n\t\t\tcontent: comm.preview || \"\",\n\t\t\ttimestamp: comm.createdAt,\n\t\t\tstatus: comm.direction === \"outbound\" ? \"delivered\" : undefined,\n\t\t\tsenderName: comm.direction === \"inbound\" ? comm.userName : \"You\",\n\t\t},\n\t];\n\n\treturn {\n\t\tid: comm.id,\n\t\tcontactName: comm.userName || comm.from || \"Unknown\",\n\t\tcontactPhone: comm.direction === \"inbound\" ? comm.from || \"\" : comm.to || \"\",\n\t\tcompanyName: comm.companyName,\n\t\tcompanyId: comm.companyId,\n\t\tmessages,\n\t\tisTyping: false,\n\t};\n}\n\nexport function AdminSmsPanel({ communication, onMessageSent, className }: AdminSmsPanelProps) {\n\tconst [messageText, setMessageText] = useState(\"\");\n\tconst [isPending, startTransition] = useTransition();\n\tconst [localMessages, setLocalMessages] = useState<SmsMessage[]>([]);\n\tconst { addPendingMessage, resolvePendingMessage } = useAdminCommunicationStore();\n\n\t// Combine original messages with local optimistic messages\n\tconst baseConversation = toSmsConversation(communication);\n\tconst conversation: SmsConversation = {\n\t\t...baseConversation,\n\t\tmessages: [...baseConversation.messages, ...localMessages],\n\t};\n\n\tconst handleSend = useCallback(() => {\n\t\tif (!messageText.trim() || isPending) return;\n\n\t\tconst tempId = `temp_${Date.now()}`;\n\t\tconst newMessage: SmsMessage = {\n\t\t\tid: tempId,\n\t\t\tdirection: \"outbound\",\n\t\t\tcontent: messageText.trim(),\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t\tstatus: \"sending\",\n\t\t\tsenderName: \"You\",\n\t\t};\n\n\t\t// Optimistic update - add to local state immediately\n\t\tsetLocalMessages((prev) => [...prev, newMessage]);\n\t\tsetMessageText(\"\");\n\n\t\t// Add to pending messages store\n\t\taddPendingMessage({\n\t\t\tid: tempId,\n\t\t\tconversationId: communication.id,\n\t\t\tdirection: \"outbound\",\n\t\t\tcontent: newMessage.content,\n\t\t\ttimestamp: newMessage.timestamp,\n\t\t\tstatus: \"sending\",\n\t\t\tcontactName: conversation.contactName,\n\t\t\tcontactPhone: conversation.contactPhone,\n\t\t\tcompanyId: communication.companyId,\n\t\t});\n\n\t\t// Simulate sending (replace with actual API call)\n\t\tstartTransition(async () => {\n\t\t\ttry {\n\t\t\t\t// Simulate network delay\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 1000));\n\n\t\t\t\t// Update message status to sent\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"sent\" as const } : msg)));\n\n\t\t\t\t// Simulate delivery after another delay\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 500));\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"delivered\" as const } : msg)));\n\n\t\t\t\t// Resolve pending message in store\n\t\t\t\tresolvePendingMessage(communication.id, tempId);\n\n\t\t\t\t// Notify parent\n\t\t\t\tonMessageSent?.(newMessage);\n\t\t\t} catch {\n\t\t\t\t// Mark as failed\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"failed\" as const } : msg)));\n\t\t\t}\n\t\t});\n\t}, [messageText, isPending, communication.id, conversation.contactName, conversation.contactPhone, communication.companyId, addPendingMessage, resolvePendingMessage, onMessageSent]);\n\n\treturn (\n\t\t<div className={cn(\"flex h-full flex-col\", className)}>\n\t\t\t{/* Conversation View */}\n\t\t\t<div className=\"min-h-0 flex-1\">\n\t\t\t\t<AdminSmsConversation conversation={conversation} />\n\t\t\t</div>\n\n\t\t\t{/* Input Area */}\n\t\t\t<AdminSmsInput value={messageText} onChange={setMessageText} onSend={handleSend} sending={isPending} placeholder={`Message ${conversation.contactName}...`} />\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3321, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/components/communication/admin-unified-inbox.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * AdminUnifiedInbox - Platform-wide communication inbox\n *\n * Shows all communications across all companies with filtering,\n * search, and detail view. Matches web dashboard patterns.\n */\n\nimport { useState, useCallback } from \"react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tArchive,\n\tArrowLeft,\n\tBuilding2,\n\tForward,\n\tMail,\n\tMessageSquare,\n\tMoreHorizontal,\n\tPenSquare,\n\tPhone,\n\tRefreshCw,\n\tReply,\n\tReplyAll,\n\tSearch,\n\tStar,\n\tTicket,\n\tTrash2,\n\tVoicemail,\n\tX,\n\tPanelLeft,\n} from \"lucide-react\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useSidebar } from \"@/components/ui/sidebar\";\nimport type { AdminCommunication } from \"@/types/entities\";\nimport { AdminEmailReplyComposer, type EmailReplyMode } from \"./admin-email-reply-composer\";\nimport { AdminSmsPanel } from \"./admin-sms-panel\";\n\n/**\n * Extract initials from email or name\n */\nconst getInitials = (email?: string): string => {\n\tif (!email) return \"?\";\n\n\t// Extract the part before @ symbol\n\tconst localPart = email.split(\"@\")[0];\n\n\t// If it contains a dot, assume first.last format\n\tif (localPart.includes(\".\")) {\n\t\tconst parts = localPart.split(\".\");\n\t\treturn parts\n\t\t\t.map((part) => part[0])\n\t\t\t.join(\"\")\n\t\t\t.toUpperCase()\n\t\t\t.slice(0, 2);\n\t}\n\n\t// Otherwise, take first two characters\n\treturn localPart.substring(0, 2).toUpperCase();\n};\n\ntype CommunicationType = \"all\" | \"email\" | \"sms\" | \"call\" | \"voicemail\" | \"ticket\";\n\ntype AdminUnifiedInboxProps = {\n\tcommunications: AdminCommunication[];\n\tonRefresh?: () => void;\n};\n\nconst TYPE_CONFIG: Record<string, { icon: typeof Mail; color: string; bg: string; label: string }> = {\n\temail: { icon: Mail, color: \"text-blue-500\", bg: \"bg-blue-500/10\", label: \"Email\" },\n\tsms: { icon: MessageSquare, color: \"text-green-500\", bg: \"bg-green-500/10\", label: \"SMS\" },\n\tcall: { icon: Phone, color: \"text-purple-500\", bg: \"bg-purple-500/10\", label: \"Call\" },\n\tvoicemail: { icon: Voicemail, color: \"text-orange-500\", bg: \"bg-orange-500/10\", label: \"Voicemail\" },\n\tticket: { icon: Ticket, color: \"text-amber-500\", bg: \"bg-amber-500/10\", label: \"Ticket\" },\n};\n\nconst TYPE_FILTERS: { type: CommunicationType; label: string }[] = [\n\t{ type: \"all\", label: \"All\" },\n\t{ type: \"email\", label: \"Email\" },\n\t{ type: \"sms\", label: \"SMS\" },\n\t{ type: \"call\", label: \"Calls\" },\n\t{ type: \"voicemail\", label: \"Voicemail\" },\n\t{ type: \"ticket\", label: \"Tickets\" },\n];\n\nexport function AdminUnifiedInbox({ communications, onRefresh }: AdminUnifiedInboxProps) {\n\tconst { toggleSidebar } = useSidebar();\n\tconst [searchInput, setSearchInput] = useState(\"\");\n\tconst [typeFilter, setTypeFilter] = useState<CommunicationType>(\"all\");\n\tconst [selectedCommunication, setSelectedCommunication] = useState<AdminCommunication | null>(null);\n\tconst [refreshing, setRefreshing] = useState(false);\n\tconst [replyMode, setReplyMode] = useState<EmailReplyMode | null>(null);\n\n\t// Filter communications\n\tconst filteredCommunications = communications.filter((comm) => {\n\t\t// Type filter\n\t\tif (typeFilter !== \"all\" && comm.type !== typeFilter) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Search filter\n\t\tif (searchInput) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tconst matchesSubject = comm.subject?.toLowerCase().includes(query);\n\t\t\tconst matchesBody = comm.preview?.toLowerCase().includes(query);\n\t\t\tconst matchesFrom = comm.from?.toLowerCase().includes(query);\n\t\t\tconst matchesTo = comm.to?.toLowerCase().includes(query);\n\t\t\tconst matchesCompany = comm.companyName?.toLowerCase().includes(query);\n\t\t\treturn matchesSubject || matchesBody || matchesFrom || matchesTo || matchesCompany;\n\t\t}\n\n\t\treturn true;\n\t});\n\n\t// Count by type\n\tconst typeCounts = communications.reduce((acc, comm) => {\n\t\tacc[comm.type] = (acc[comm.type] || 0) + 1;\n\t\treturn acc;\n\t}, {} as Record<string, number>);\n\n\tconst handleRefresh = useCallback(() => {\n\t\tsetRefreshing(true);\n\t\tonRefresh?.();\n\t\tsetTimeout(() => setRefreshing(false), 1000);\n\t}, [onRefresh]);\n\n\tconst handleSelectCommunication = useCallback((comm: AdminCommunication) => {\n\t\tsetSelectedCommunication(comm);\n\t\tsetReplyMode(null); // Close reply when switching messages\n\t}, []);\n\n\tconst handleCloseCommunication = useCallback(() => {\n\t\tsetSelectedCommunication(null);\n\t\tsetReplyMode(null);\n\t}, []);\n\n\tconst handleCloseReply = useCallback(() => {\n\t\tsetReplyMode(null);\n\t}, []);\n\n\tconst handleReplySent = useCallback(() => {\n\t\tsetReplyMode(null);\n\t\t// Could refresh the list here\n\t}, []);\n\n\tconst getTypeConfig = (type: string) => {\n\t\treturn TYPE_CONFIG[type] || TYPE_CONFIG.email;\n\t};\n\n\tconst formatTime = (dateString: string) => {\n\t\tconst date = new Date(dateString);\n\t\treturn date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n\t};\n\n\tconst formatDate = (dateString: string) => {\n\t\tconst date = new Date(dateString);\n\t\tconst now = new Date();\n\t\tconst diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n\n\t\tif (diffDays === 0) return \"Today\";\n\t\tif (diffDays === 1) return \"Yesterday\";\n\t\tif (diffDays < 7) return date.toLocaleDateString([], { weekday: \"short\" });\n\t\treturn date.toLocaleDateString([], { month: \"short\", day: \"numeric\" });\n\t};\n\n\t// Mobile: show list when no communication selected\n\tconst showListOnMobile = !selectedCommunication;\n\tconst showDetailOnMobile = selectedCommunication;\n\n\treturn (\n\t\t<div className=\"flex h-full w-full flex-col overflow-hidden bg-sidebar\">\n\t\t\t<div className=\"flex flex-1 overflow-hidden min-h-0 md:gap-2\">\n\t\t\t\t{/* Left Panel - Communications List */}\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"bg-card mb-1 shadow-sm flex flex-col overflow-hidden\",\n\t\t\t\t\t\t\"w-full h-full\",\n\t\t\t\t\t\t\"md:w-[400px] lg:w-[480px] md:rounded-tr-2xl\",\n\t\t\t\t\t\tshowListOnMobile ? \"flex\" : \"hidden md:flex\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"w-full h-full flex flex-col\">\n\t\t\t\t\t\t{/* Header with search and filters */}\n\t\t\t\t\t\t<div className=\"sticky top-0 z-15 flex flex-col gap-2 p-2 pb-0 transition-colors bg-card\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-12 gap-2 mt-1\">\n\t\t\t\t\t\t\t\t<div className=\"col-span-12 flex gap-2\">\n\t\t\t\t\t\t\t\t\t{/* Sidebar toggle */}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\tonClick={toggleSidebar}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8 shrink-0\"\n\t\t\t\t\t\t\t\t\t\ttitle=\"Toggle sidebar\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PanelLeft className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t{/* Search input */}\n\t\t\t\t\t\t\t\t\t<div className=\"relative flex-1\">\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search communications...\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setSearchInput(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 md:h-8 pl-9 pr-8 text-base md:text-sm border-input bg-background\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t{searchInput && (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setSearchInput(\"\")}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* Refresh button */}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t\tdisabled={refreshing}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\ttitle=\"Refresh\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<RefreshCw\n\t\t\t\t\t\t\t\t\t\t\tclassName={`h-5 w-5 md:h-4 md:w-4 text-muted-foreground ${refreshing ? \"animate-spin\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Type filter buttons */}\n\t\t\t\t\t\t\t<div className=\"flex gap-1 overflow-x-auto pb-2 scrollbar-none\">\n\t\t\t\t\t\t\t\t{TYPE_FILTERS.map(({ type, label }) => {\n\t\t\t\t\t\t\t\t\tconst count = type === \"all\" ? communications.length : (typeCounts[type] || 0);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tkey={type}\n\t\t\t\t\t\t\t\t\t\t\tvariant={typeFilter === type ? \"default\" : \"ghost\"}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setTypeFilter(type)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 gap-1 whitespace-nowrap text-xs shrink-0\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t\t{count > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={typeFilter === type ? \"secondary\" : \"outline\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-0.5 h-4 px-1 text-[10px]\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{count}\n\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Progress bar */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"bg-primary relative z-5 h-0.5 w-full transition-opacity\",\n\t\t\t\t\t\t\t\trefreshing ? \"opacity-100 animate-pulse\" : \"opacity-0\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* Communications List */}\n\t\t\t\t\t\t<div className=\"relative z-1 flex-1 overflow-y-auto pt-0 min-h-0\">\n\t\t\t\t\t\t\t<div className=\"flex h-full w-full\">\n\t\t\t\t\t\t\t\t<div className=\"flex flex-1 flex-col\">\n\t\t\t\t\t\t\t\t\t{filteredCommunications.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-h-[200px] px-2\">\n\t\t\t\t\t\t\t\t\t\t\t{filteredCommunications.map((communication) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst isSelected = selectedCommunication?.id === communication.id;\n\t\t\t\t\t\t\t\t\t\t\t\tconst isUnread = communication.status === \"unread\" || communication.status === \"new\";\n\t\t\t\t\t\t\t\t\t\t\t\tconst typeConfig = getTypeConfig(communication.type);\n\t\t\t\t\t\t\t\t\t\t\t\tconst TypeIcon = typeConfig.icon;\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={communication.id} className=\"select-none md:my-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"hover:bg-accent group flex cursor-pointer flex-col items-start rounded-lg py-2 text-left text-sm transition-all hover:opacity-100 relative\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected ? \"bg-accent opacity-100\" : \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisUnread ? \"opacity-100\" : \"opacity-60\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleSelectCommunication(communication)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Hover Action Toolbar */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute right-2 z-25 flex -translate-y-1/2 items-center gap-1 rounded-xl border bg-popover p-1 opacity-0 shadow-sm group-hover:opacity-100 top-[-1] transition-opacity duration-200\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 overflow-visible p-0 hover:bg-accent group/star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-4 w-4 text-muted-foreground transition-colors group-hover/star:text-yellow-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 p-0 hover:bg-accent group/archive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Archive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Archive className=\"h-4 w-4 text-muted-foreground transition-colors group-hover/archive:text-blue-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Communication Card Content */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"relative flex w-full items-center justify-between gap-4 px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Avatar with type badge */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-8 w-8 shrink-0 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback className=\"bg-primary/10 text-primary font-bold text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getInitials(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? communication.from\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: communication.to\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"absolute -bottom-1 -right-1 rounded-full p-0.5 border border-background\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeConfig.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TypeIcon className={cn(\"h-2.5 w-2.5\", typeConfig.color)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex w-full justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex w-full flex-row items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-row items-center gap-[4px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-bold text-md flex items-baseline gap-1 group-hover:opacity-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"line-clamp-1 overflow-hidden text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.direction === \"outbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? communication.to || \"Unknown recipient\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: communication.from || \"Unknown sender\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isUnread && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-0.5 size-2 rounded-full bg-primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-nowrap text-xs font-normal opacity-70 transition-opacity group-hover:opacity-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(communication.createdAt)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-1 line-clamp-1 min-w-0 overflow-hidden text-sm text-muted-foreground flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.subject || communication.preview || \"No content\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Company badge */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.companyName && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"px-1.5 py-0.5 rounded text-[10px] bg-muted text-muted-foreground flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-2.5 w-2.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.companyName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center p-8 h-full\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">No communications found</p>\n\t\t\t\t\t\t\t\t\t\t\t\t{searchInput && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTry adjusting your search\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Right Panel - Communication Detail */}\n\t\t\t\t{selectedCommunication ? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"bg-card mb-1 shadow-sm flex flex-col min-w-0 overflow-hidden\",\n\t\t\t\t\t\t\t\"w-full h-full\",\n\t\t\t\t\t\t\t\"md:rounded-tl-2xl md:flex-1\",\n\t\t\t\t\t\t\tshowDetailOnMobile ? \"flex\" : \"hidden md:flex\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative flex-1 min-h-0 flex flex-col\">\n\t\t\t\t\t\t\t<div className=\"bg-card relative flex flex-col overflow-hidden transition-all duration-300 h-full flex-1 min-h-0\">\n\t\t\t\t\t\t\t\t{/* Communication Header Toolbar */}\n\t\t\t\t\t\t\t\t<div className=\"sticky top-0 z-15 flex shrink-0 items-center justify-between gap-1.5 p-2 pb-0 transition-colors bg-card\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-1 items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t{/* Back button (mobile) / Close button (desktop) */}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCloseCommunication}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Back to list\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ArrowLeft className=\"h-5 w-5 md:hidden text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-4 w-4 hidden md:block text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t{/* Reply buttons */}\n\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.type === \"email\" || selectedCommunication.type === \"sms\" || selectedCommunication.type === \"ticket\") && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={replyMode === \"reply\" ? \"default\" : \"ghost\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-auto md:px-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Reply\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setReplyMode(replyMode === \"reply\" ? null : \"reply\")}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Reply className=\"h-5 w-5 md:h-4 md:w-4 md:mr-1.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm leading-none font-medium hidden md:inline\">Reply</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8\" title=\"More reply options\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReplyAll className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-40\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"reply\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Reply className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReply\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"reply-all\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReplyAll className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReply All\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"forward\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Forward className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tForward\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{/* Star */}\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8 group/star\" title=\"Star\">\n\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground transition-colors group-hover/star:text-yellow-500\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{/* Archive */}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Archive\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Archive className=\"h-5 w-5 md:h-4 md:w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{/* More menu */}\n\t\t\t\t\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8\" title=\"More\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MoreHorizontal className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-48\">\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem className=\"text-destructive focus:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Communication Content */}\n\t\t\t\t\t\t\t\t<div className=\"flex min-h-0 flex-1 flex-col overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t{/* SMS Panel - Full iPhone-style view */}\n\t\t\t\t\t\t\t\t\t{selectedCommunication.type === \"sms\" ? (\n\t\t\t\t\t\t\t\t\t\t<AdminSmsPanel\n\t\t\t\t\t\t\t\t\t\t\tcommunication={selectedCommunication}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t/* Email/Call/Ticket/Voicemail View */\n\t\t\t\t\t\t\t\t\t\t<div className=\"relative overflow-hidden flex-1 h-full min-h-0 flex flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-b border-border/50 px-4 py-4 space-y-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"text-base font-semibold text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.subject || \"No Subject\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</h1>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-9 w-9 shrink-0 rounded-md cursor-pointer\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback className=\"bg-muted text-muted-foreground font-semibold text-sm rounded-md\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? selectedCommunication.from?.[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: selectedCommunication.to?.[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)?.toUpperCase() || \"?\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-sm text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? selectedCommunication.from || \"Unknown\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: selectedCommunication.to || \"Unknown\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.status === \"unread\" ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCommunication.status === \"new\") && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `from ${selectedCommunication.from?.split(\"@\")[0] || \"unknown\"}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `to ${selectedCommunication.to?.split(\"@\")[0] || \"unknown\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.companyName && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-2.5 w-2.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.companyName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(selectedCommunication.createdAt)} at{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(selectedCommunication.createdAt)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Type and status badges */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.type && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getTypeConfig(selectedCommunication.type).label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.status && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Message Content */}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 px-4 py-4 overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"prose prose-sm max-w-none dark:prose-invert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.preview || \"No content\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Reply Composer */}\n\t\t\t\t\t\t\t\t\t\t\t{replyMode && (selectedCommunication.type === \"email\" || selectedCommunication.type === \"ticket\") && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-t border-border/50 p-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AdminEmailReplyComposer\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode={replyMode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedMessage={selectedCommunication}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={handleCloseReply}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSent={handleReplySent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"bg-card mb-1 shadow-sm hidden md:flex md:flex-col md:items-center md:justify-center md:rounded-tl-2xl md:flex-1\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Mail className=\"h-16 w-16 text-muted-foreground mb-4\" />\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">No communication selected</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tSelect a communication from the list to view details\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4562, "column": 0}, "map": {"version":3,"sources":["file:///Users/byronwade/Stratos/apps/admin/src/app/%28dashboard%29/dashboard/communication/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { AdminUnifiedInbox } from \"@/components/communication/admin-unified-inbox\";\nimport type { AdminCommunication } from \"@/types/entities\";\n\n// Mock data for development - replace with real data fetching\nconst mockCommunications: AdminCommunication[] = [\n\t{\n\t\tid: \"comm_1\",\n\t\ttype: \"email\",\n\t\tdirection: \"inbound\",\n\t\tsubject: \"Account upgrade inquiry\",\n\t\tpreview: \"Hi, I would like to know more about upgrading our account to the enterprise plan. We currently have 20 users...\",\n\t\tfrom: \"john@acmeplumbing.com\",\n\t\tto: \"support@stratos.com\",\n\t\tcompanyId: \"1\",\n\t\tcompanyName: \"Acme Plumbing Co.\",\n\t\tstatus: \"unread\",\n\t\tcreatedAt: \"2024-11-11T10:30:00Z\",\n\t},\n\t{\n\t\tid: \"comm_2\",\n\t\ttype: \"sms\",\n\t\tdirection: \"inbound\",\n\t\tpreview: \"Hey, the app is showing an error when I try to create a new job. Can someone help?\",\n\t\tfrom: \"+1 (555) 234-5678\",\n\t\tto: \"+1 (800) 555-0199\",\n\t\tcompanyId: \"2\",\n\t\tcompanyName: \"Elite HVAC Services\",\n\t\tstatus: \"read\",\n\t\tcreatedAt: \"2024-11-11T10:15:00Z\",\n\t},\n\t{\n\t\tid: \"comm_3\",\n\t\ttype: \"call\",\n\t\tdirection: \"inbound\",\n\t\tfrom: \"+1 (555) 123-4567\",\n\t\tto: \"+1 (800) 555-0199\",\n\t\tcompanyId: \"1\",\n\t\tcompanyName: \"Acme Plumbing Co.\",\n\t\tstatus: \"read\",\n\t\tduration: 345,\n\t\tcreatedAt: \"2024-11-11T09:45:00Z\",\n\t},\n\t{\n\t\tid: \"comm_4\",\n\t\ttype: \"email\",\n\t\tdirection: \"outbound\",\n\t\tsubject: \"Welcome to Stratos!\",\n\t\tpreview: \"Thank you for signing up for Stratos. Here's everything you need to get started with our platform...\",\n\t\tfrom: \"onboarding@stratos.com\",\n\t\tto: \"mike@quickfixelectric.com\",\n\t\tcompanyId: \"3\",\n\t\tcompanyName: \"Quick Fix Electric\",\n\t\tstatus: \"delivered\",\n\t\tcreatedAt: \"2024-11-11T09:15:00Z\",\n\t},\n\t{\n\t\tid: \"comm_5\",\n\t\ttype: \"voicemail\",\n\t\tdirection: \"inbound\",\n\t\tfrom: \"+1 (555) 456-7890\",\n\t\tto: \"+1 (800) 555-0199\",\n\t\tcompanyId: \"4\",\n\t\tcompanyName: \"Johnson & Sons Roofing\",\n\t\tstatus: \"new\",\n\t\tduration: 45,\n\t\trecordingUrl: \"https://recordings.example.com/vm_1.mp3\",\n\t\tcreatedAt: \"2024-11-10T17:20:00Z\",\n\t},\n\t{\n\t\tid: \"comm_6\",\n\t\ttype: \"ticket\",\n\t\tdirection: \"inbound\",\n\t\tsubject: \"Payment failed notification\",\n\t\tpreview: \"We received a notification that our last payment attempt failed. Can you help us update our payment method?\",\n\t\tfrom: \"billing@metrolandscaping.com\",\n\t\tto: \"billing@stratos.com\",\n\t\tcompanyId: \"5\",\n\t\tcompanyName: \"Metro Landscaping\",\n\t\tstatus: \"unread\",\n\t\tpriority: \"high\",\n\t\tcreatedAt: \"2024-11-10T16:45:00Z\",\n\t},\n\t{\n\t\tid: \"comm_7\",\n\t\ttype: \"sms\",\n\t\tdirection: \"outbound\",\n\t\tpreview: \"Your trial period ends in 3 days. To continue using Stratos, please select a subscription plan.\",\n\t\tfrom: \"+1 (800) 555-0199\",\n\t\tto: \"+1 (555) 567-8901\",\n\t\tcompanyId: \"3\",\n\t\tcompanyName: \"Quick Fix Electric\",\n\t\tstatus: \"sent\",\n\t\tcreatedAt: \"2024-11-10T08:00:00Z\",\n\t},\n\t{\n\t\tid: \"comm_8\",\n\t\ttype: \"call\",\n\t\tdirection: \"outbound\",\n\t\tfrom: \"+1 (800) 555-0199\",\n\t\tto: \"+1 (555) 678-9012\",\n\t\tcompanyId: \"2\",\n\t\tcompanyName: \"Elite HVAC Services\",\n\t\tstatus: \"read\",\n\t\tduration: 180,\n\t\tcreatedAt: \"2024-11-09T15:30:00Z\",\n\t},\n\t{\n\t\tid: \"comm_9\",\n\t\ttype: \"email\",\n\t\tdirection: \"inbound\",\n\t\tsubject: \"Feature request: Calendar integration\",\n\t\tpreview: \"It would be great if Stratos could integrate with Google Calendar and Outlook for scheduling jobs...\",\n\t\tfrom: \"sarah@elitehvac.com\",\n\t\tto: \"feedback@stratos.com\",\n\t\tcompanyId: \"2\",\n\t\tcompanyName: \"Elite HVAC Services\",\n\t\tstatus: \"read\",\n\t\tcreatedAt: \"2024-11-09T14:20:00Z\",\n\t},\n\t{\n\t\tid: \"comm_10\",\n\t\ttype: \"ticket\",\n\t\tdirection: \"inbound\",\n\t\tsubject: \"Cannot export invoices to PDF\",\n\t\tpreview: \"When I try to export invoices to PDF, I get an error message. This has been happening since yesterday.\",\n\t\tfrom: \"support@acmeplumbing.com\",\n\t\tto: \"support@stratos.com\",\n\t\tcompanyId: \"1\",\n\t\tcompanyName: \"Acme Plumbing Co.\",\n\t\tstatus: \"read\",\n\t\tpriority: \"medium\",\n\t\tcreatedAt: \"2024-11-09T11:00:00Z\",\n\t},\n];\n\n/**\n * Communication Hub Page\n *\n * Unified inbox showing all platform communications\n */\nexport default function CommunicationPage() {\n\treturn (\n\t\t<AdminUnifiedInbox\n\t\t\tcommunications={mockCommunications}\n\t\t\tonRefresh={() => {\n\t\t\t\t// TODO: Implement real data refresh\n\t\t\t\tconsole.log(\"Refreshing communications...\");\n\t\t\t}}\n\t\t/>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKA,8DAA8D;AAC9D,MAAM,qBAA2C;IAChD;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,UAAU;QACV,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,UAAU;QACV,cAAc;QACd,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,UAAU;QACV,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,UAAU;QACV,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,WAAW;IACZ;IACA;QACC,IAAI;QACJ,MAAM;QACN,WAAW;QACX,SAAS;QACT,SAAS;QACT,MAAM;QACN,IAAI;QACJ,WAAW;QACX,aAAa;QACb,QAAQ;QACR,UAAU;QACV,WAAW;IACZ;CACA;AAOc,SAAS;IACvB,qBACC,oWAAC,yMAAiB;QACjB,gBAAgB;QAChB,WAAW;YACV,oCAAoC;YACpC,QAAQ,GAAG,CAAC;QACb;;;;;;AAGH;KAVwB","debugId":null}}]
}