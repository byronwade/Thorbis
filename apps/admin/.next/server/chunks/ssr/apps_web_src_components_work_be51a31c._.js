module.exports=[41502,a=>{"use strict";var b=a.i(45139),c=a.i(3431);let d=(0,c.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),e=(0,c.default)("briefcase-business",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),f=(0,c.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),g=(0,c.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var h=a.i(76568),i=a.i(47473);a.i(25434);var j=a.i(86990);a.i(29891);var k=a.i(18170);a.i(56120);var l=a.i(39039),m=a.i(90100),n=a.i(18195),o=a.i(47421),p=a.i(81938),q=a.i(54210);let r=(0,i.createContext)(null),s=(0,i.createContext)(null),t="kanban-column-";function u(a,b,c){let d=Object.fromEntries(a.map(a=>[a.id,[]]));return b.reduce((a,b)=>{let d=c(b);return a[d]||(a[d]=[]),a[d]=[...a[d],b],a},d)}function v({columns:a,data:c,onDataChange:d,onItemMove:e,getColumnId:f,children:g,className:h,pointerSensorOptions:j,renderDragOverlay:k}){let n=(0,i.useCallback)(f??(a=>a.columnId),[]),[q,s]=(0,i.useState)(()=>u(a,c,n)),[v,w]=(0,i.useState)(null),x=(0,i.useRef)(a);(0,i.useEffect)(()=>{x.current=a},[a]),(0,i.useEffect)(()=>{s(u(a,c,n))},[a,c,n]);let y=(0,l.useSensors)((0,l.useSensor)(l.PointerSensor,{activationConstraint:{distance:6},...j}),(0,l.useSensor)(l.KeyboardSensor,{coordinateGetter:m.sortableKeyboardCoordinates})),z=(0,i.useCallback)(a=>{for(let b of x.current){let c=q[b.id]??[],d=c.findIndex(b=>b.id===a);if(-1!==d)return{columnId:b.id,item:c[d],index:d}}return null},[q]),A=(0,i.useCallback)(a=>{let b=z(a.active.id);b&&w({item:b.item,columnId:b.columnId})},[z]),B=(0,i.useCallback)(a=>{var b;let{active:c,over:f}=a;if(w(null),!f)return;let g=z(c.id);if(!g)return;let h=null,i=null;if("string"==typeof f.id&&f.id.startsWith(t))i=(q[h=f.id.replace(t,"")]??[]).length;else{let a=z(f.id);a&&(h=a.columnId,i=(q[a.columnId]??[]).findIndex(b=>b.id===a.item.id))}if(null===h||null===i||h===g.columnId&&i===g.index)return;let j=Object.fromEntries(Object.entries(q).map(([a,b])=>[a,b.slice()])),k=j[g.columnId]??[],[l]=k.splice(g.index,1);j[g.columnId]=k;let m=j[h]??[],n=g.columnId===h&&g.index<i?i-1:i,o={...l,columnId:h};m.splice(n,0,o),j[h]=m,s(j);let p=(b=x.current,b.flatMap(a=>j[a.id]??[]));d?.(p),e&&e({item:o,fromColumnId:g.columnId,toColumnId:h,toIndex:n})},[z,q,d,e]),C=(0,i.useMemo)(()=>({columns:a,getItems:a=>q[a]??[],findItem:z,activeItem:v}),[a,q,z,v]);return(0,b.jsx)(r.Provider,{value:C,children:(0,b.jsxs)(l.DndContext,{collisionDetection:l.closestCorners,onDragCancel:()=>w(null),onDragEnd:B,onDragStart:A,sensors:y,children:[(0,b.jsx)("div",{className:(0,p.cn)("flex w-full gap-4 overflow-x-auto px-6 py-4 md:px-8 lg:px-10",h),children:g}),(0,b.jsx)(l.DragOverlay,{children:v?k?k(v.item):(0,b.jsx)(o.Card,{className:"border-border/70 bg-background/95 w-[280px] max-w-[320px] border p-3 shadow-lg",children:(0,b.jsx)("p",{className:"text-sm font-medium",children:String(v.item.id)})}):null})]})})}function w({column:a,children:c,className:d}){return(0,b.jsx)(s.Provider,{value:a,children:(0,b.jsx)("section",{"aria-label":`${a.name} column`,className:(0,p.cn)("kanban-column border-border/60 from-background via-background/60 to-muted/40 flex h-full min-w-[320px] flex-1 flex-col rounded-2xl border bg-gradient-to-b shadow-sm ring-1 ring-black/5 backdrop-blur-sm transition hover:shadow-md",d),children:c})})}function x({children:a,className:c}){return(0,b.jsx)("header",{className:(0,p.cn)("bg-background/90 sticky top-0 z-10 flex items-center justify-between gap-2 rounded-t-2xl px-4 py-3 backdrop-blur-sm",c),children:a})}function y({columnId:a,children:c,emptyState:d,className:e,height:f="28rem"}){let{getItems:g}=function(){let a=(0,i.useContext)(r);if(!a)throw Error("useKanbanContext must be used within a KanbanProvider");return a}(),h=g(a),{setNodeRef:j,isOver:k}=(0,l.useDroppable)({id:`${t}${a}`});return(0,b.jsx)(m.SortableContext,{items:h.map(a=>a.id),strategy:m.verticalListSortingStrategy,children:(0,b.jsx)(q.ScrollArea,{className:"kanban-scroll flex-1",children:(0,b.jsxs)("div",{className:(0,p.cn)("kanban-column-cards bg-muted/30 flex min-h-[120px] flex-col gap-3 rounded-2xl p-3 transition",k&&"ring-primary/60 ring-2 ring-offset-2",e),"data-drop-state":k?"active":"inactive",ref:j,style:{minHeight:f},children:[0===h.length&&d,h.map((a,b)=>c(a,b))]})})})}function z({itemId:a,children:c,className:d}){let{attributes:e,listeners:f,setNodeRef:g,transform:h,transition:i,isDragging:j}=(0,m.useSortable)({id:a}),k={transform:n.CSS.Transform.toString(h),transition:i};return(0,b.jsx)(o.Card,{className:(0,p.cn)("border-border/70 bg-background/95 focus-visible:ring-ring grid gap-3 rounded-xl border p-4 text-left shadow-sm ring-0 transition-all outline-none hover:-translate-y-0.5 hover:shadow-md focus-visible:ring-2",j&&"border-primary/60 scale-[1.01] opacity-80 shadow-lg",d),"data-dragging":j?"":void 0,ref:g,style:k,...f,...e,children:c})}function A({data:a,columns:c,mapToKanbanItem:d,updateEntityStatus:e,renderCard:f,renderDragOverlay:g,calculateColumnMeta:h,onItemMove:k,entityName:l="items",emptyStateMessage:m,showTotals:n=!1,formatTotal:o}){let[p,q]=(0,i.useState)(()=>a.map(d)),r=h||((a,b)=>({count:b.filter(b=>b.columnId===a).length})),s=(0,i.useMemo)(()=>{let a={};return c.forEach(b=>{a[b.id]=r(b.id,p)}),a},[c,p,r]),t=(0,i.useMemo)(()=>c.map(a=>({id:a.id,name:a.name,accentColor:a.accentColor,bgClass:a.bgClass})),[c]),u=m||(a=>`No ${l} in ${a}`);return(0,b.jsx)(v,{className:"pb-4",columns:t,data:p,onDataChange:a=>{e?q(a.map(a=>({...a,entity:e(a.entity,a.columnId)}))):q(a)},onItemMove:k,renderDragOverlay:g||(a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-xl border p-4 shadow-lg",children:f(a)})),children:c.map(a=>{let c=s[a.id]??{count:0};return(0,b.jsxs)(w,{className:"min-h-[300px] flex-1",column:t.find(b=>b.id===a.id),children:[(0,b.jsx)(x,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{"aria-hidden":"true",className:`h-2.5 w-2.5 rounded-full ${a.bgClass||""}`,style:a.bgClass?void 0:{backgroundColor:a.accentColor}}),(0,b.jsx)("span",{className:"text-foreground text-sm font-semibold",children:a.name}),(0,b.jsxs)(j.Badge,{className:"bg-muted text-muted-foreground rounded-full px-2 py-0 text-xs font-medium",variant:"secondary",children:[c.count," ",l]}),n&&void 0!==c.total&&o&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:o(c.total)}),n&&void 0!==c.value&&o&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:o(c.value)})]})}),(0,b.jsx)(y,{className:"min-h-[200px]",columnId:a.id,emptyState:(0,b.jsx)("div",{className:"border-border/60 bg-background/60 text-muted-foreground rounded-xl border border-dashed p-4 text-center text-xs",children:u(a.name)}),children:a=>(0,b.jsx)(z,{itemId:a.id,children:f(a)},a.id)})]},a.id)})})}var B=a.i(86233);a.i(49029);var C=a.i(92268),D=a.i(22471);let E=[{id:"quoted",name:"Quoted",accentColor:"#6B7280"},{id:"scheduled",name:"Scheduled",accentColor:"#2563EB"},{id:"in_progress",name:"In Progress",accentColor:"#F97316"},{id:"on_hold",name:"On Hold",accentColor:"#F59E0B"},{id:"completed",name:"Completed",accentColor:"#22C55E"},{id:"cancelled",name:"Cancelled",accentColor:"#EF4444"}],F=new Map(E.map(a=>[a.id,a.name])),G="quoted";function H({priority:a}){let{label:c,className:d}={low:{label:"Low",className:"border-primary/60 bg-primary/60 text-primary dark:border-primary/40 dark:bg-primary/40 dark:text-primary"},medium:{label:"Medium",className:"border-warning/60 bg-warning/60 text-warning dark:border-warning/40 dark:bg-warning/40 dark:text-warning"},high:{label:"High",className:"border-warning/60 bg-warning/60 text-warning dark:border-warning/40 dark:bg-warning/40 dark:text-warning"},urgent:{label:"Urgent",className:"border-destructive/60 bg-destructive/60 text-destructive dark:border-destructive/40 dark:bg-destructive/40 dark:text-destructive"}}[a??"medium"];return(0,b.jsx)(j.Badge,{className:(0,D.cn)("text-xs font-medium",d),variant:"outline",children:c})}function I({item:a}){let c=a.entity,i=a.columnId,l=c.scheduledStart?(0,C.formatDateRange)(c.scheduledStart,c.scheduledEnd??void 0):null,m=function(a){let b=a.properties;if(!b)return null;let c=[b.address],d=[b.city,b.state].filter(Boolean).join(", ");return d&&c.push(d),c.filter(Boolean).join(" • ")}(c);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.default,{className:"text-muted-foreground hover:text-primary block text-xs font-semibold tracking-wide uppercase",href:`/dashboard/work/${c.id}`,children:String(c.jobNumber??"—")}),(0,b.jsx)("h3",{className:"text-foreground text-sm leading-snug font-semibold",children:c.title??"Untitled Job"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[c.jobType&&(0,b.jsx)(j.Badge,{className:"bg-primary/10 text-primary",variant:"secondary",children:c.jobType}),(0,b.jsx)(H,{priority:c.priority??"medium"}),"number"==typeof c.aiPriorityScore&&(0,b.jsxs)(j.Badge,{className:"border-primary/40 bg-primary/5 text-primary border-dashed",variant:"outline",children:["AI Score ",c.aiPriorityScore]})]})]}),(0,b.jsx)("span",{className:"text-foreground text-sm font-semibold",children:(0,C.formatCurrency)(c.totalAmount)})]}),c.description&&(0,b.jsx)("p",{className:"text-muted-foreground line-clamp-3 text-xs",children:c.description}),(0,b.jsxs)("div",{className:"text-muted-foreground space-y-2 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e,{className:"text-primary size-4"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:function(a){let b=a.customers;if(!b)return"Unassigned customer";if(b.display_name)return b.display_name;let c=[b.first_name,b.last_name].filter(Boolean);return c.length>0?c.join(" "):b.company_name||"Unassigned customer"}(c)})]}),m&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:"text-primary size-4"}),(0,b.jsx)("span",{children:m})]}),l&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f,{className:"text-primary size-4"}),(0,b.jsx)("span",{children:l})]})]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center justify-between pt-2 text-[11px] tracking-wide",children:[(0,b.jsxs)("span",{children:["Updated ",(0,C.formatDate)(c.updatedAt,{preset:"short"})]}),(0,b.jsx)("span",{className:"uppercase",children:i?F.get(i)??i:"—"})]}),(0,b.jsx)("div",{className:"flex items-center justify-end pt-1",children:(0,b.jsx)(k.Button,{asChild:!0,className:"text-primary gap-1 text-xs",size:"sm",variant:"ghost",children:(0,b.jsxs)(h.default,{href:`/dashboard/work/${c.id}`,children:["View",(0,b.jsx)(d,{className:"size-3.5"})]})})})]})}function J({jobs:c}){let{toast:d}=(0,B.useToast)(),[e,f]=(0,i.useTransition)(),g=async({item:b,fromColumnId:c,toColumnId:e})=>{c!==e&&f(()=>{(async()=>{let{updateJobStatus:c}=await a.A(59655),f=await c(b.entity.id,e);if(!f.success)return d.error("Unable to move job",{description:f.error});d.success(`Job ${b.entity.jobNumber} moved to ${F.get(e)}`)})()})};return(0,b.jsx)(A,{calculateColumnMeta:(a,b)=>{let c=b.filter(b=>b.columnId===a),d=c.reduce((a,b)=>a+(b.entity.totalAmount??0),0);return{count:c.length,total:d}},columns:E,data:c,entityName:"jobs",formatTotal:a=>(0,C.formatCurrency)(a),mapToKanbanItem:a=>{var b;return{id:a.id,columnId:(b=a.status)&&F.has(b)?b:G,entity:a}},onItemMove:g,renderCard:a=>(0,b.jsx)(I,{item:a}),renderDragOverlay:a=>(0,b.jsx)("div",{className:"border-border/70 bg-background/95 w-[280px] rounded-md border p-3 shadow-lg",children:(0,b.jsx)(I,{item:a})}),showTotals:!0,updateEntityStatus:(a,b)=>({...a,status:b})})}a.s(["JobsKanban",()=>J],41502)},94388,a=>{"use strict";var b=a.i(45139),c=a.i(52168),d=a.i(3431);let e=(0,d.default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var f=a.i(25756),g=a.i(54729),h=a.i(19895),i=a.i(38727),j=a.i(76568),k=a.i(47473);a.i(56120);var l=a.i(94340);a.i(29891);var m=a.i(18170),n=a.i(55768),o=a.i(60788);a.i(15287);var p=a.i(93667);let q=(0,d.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var r=a.i(89815),s=a.i(98062),t=a.i(20091),u=a.i(84158);a.i(47673);var v=a.i(89904);function w(a,b){if(!a)return b||"Unknown Customer";if(a.display_name)return a.display_name;let c=a.first_name?.trim(),d=a.last_name?.trim();return c&&d?`${c} ${d}`:c||d||(a.company_name?a.company_name:a.email?a.email:b||"Unknown Customer")}function x({customer:a}){let c=w(a);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full shrink-0",children:(0,b.jsx)(t.User,{className:"text-primary h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:c}),a.company_name&&(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.company_name})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(r.Mail,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"text-primary hover:underline truncate",onClick:a=>a.stopPropagation(),children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(s.Phone,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),(0,b.jsx)("a",{href:`tel:${a.phone}`,className:"text-primary hover:underline",onClick:a=>a.stopPropagation(),children:a.phone})]})]})]})}function y({customer:a,className:c}){let[d,e]=(0,k.useState)(!1),f=w(a);return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(u.HoverCard,{children:[(0,b.jsx)(u.HoverCardTrigger,{asChild:!0,children:(0,b.jsxs)(j.default,{href:`/dashboard/customers/${a.id}`,onClick:a=>a.stopPropagation(),className:"text-sm hover:underline hover:text-primary flex items-center gap-1.5 truncate",children:[(0,b.jsx)(t.User,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"}),(0,b.jsx)("span",{className:"truncate",children:f})]})}),(0,b.jsx)(u.HoverCardContent,{className:"w-80",align:"start",children:(0,b.jsx)(x,{customer:a})})]}),(0,b.jsxs)(v.Popover,{open:d,onOpenChange:e,children:[(0,b.jsx)(v.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 shrink-0","aria-label":`View ${f} contact information`,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(q,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),(0,b.jsx)(v.PopoverContent,{className:"w-80",align:"start",children:(0,b.jsx)(x,{customer:a})})]})]})}a.i(49029);var z=a.i(92268),A=a.i(27228),B=a.i(40596);let C={team_members:"active",customers:"active",jobs:"active",equipment:"active",materials:"active",payments:"active",invoices:"active",estimates:"active",contracts:"active",purchase_orders:"active",service_agreements:"active",maintenance_plans:"active",appointments:"active",properties:"active"},D=(0,A.create)()((0,B.devtools)((0,B.persist)((a,b)=>({filters:{...C},setFilter:(b,c)=>a(a=>({filters:{...a.filters,[b]:c}})),getFilter:a=>b().filters[a]||"active",resetFilter:b=>a(a=>({filters:{...a.filters,[b]:"active"}})),resetAllFilters:()=>a({filters:{...C}})}),{name:"archive-filters",skipHydration:!0,partialize:a=>({filters:a.filters})}),{name:"ArchiveStore"}));function E({jobs:d,itemsPerPage:q=50,totalCount:r,currentPage:s=1,onJobClick:t,showRefresh:u=!1,initialSearchQuery:v=""}){let x=D(a=>a.filters.jobs),[A,B]=(0,k.useState)(!1),[C,E]=(0,k.useState)(null),[F,G]=(0,k.useState)(!1),[H,I]=(0,k.useState)(new Set),J=d.filter(a=>{let b=!!(a.archived_at??a.deleted_at);return"active"===x?!b:"archived"!==x||b}),K=[{key:"jobNumber",header:"Job Number",width:"w-36",shrink:!0,render:a=>(0,b.jsx)(j.default,{className:"text-foreground hover:text-primary text-sm font-medium transition-colors hover:underline",href:`/dashboard/work/${a.id}`,onClick:a=>a.stopPropagation(),children:a.jobNumber??"—"})},{key:"title",header:"Title",width:"flex-1",render:a=>(0,b.jsxs)(j.default,{className:"block min-w-0",href:`/dashboard/work/${a.id}`,onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"truncate text-sm leading-tight font-medium hover:underline",children:a.title??"Untitled Job"}),a.description?(0,b.jsx)("div",{className:"text-muted-foreground mt-0.5 truncate text-xs leading-tight",children:a.description}):null]})},{key:"customer",header:"Customer",width:"w-48",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>{let c=a.customer||a.customers;return c?(w(c),(0,b.jsx)(y,{customer:c})):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}},{key:"status",header:"Status",width:"w-32",shrink:!0,hideable:!1,render:a=>(0,b.jsx)(p.JobStatusBadge,{status:a.status??"quoted"})},{key:"priority",header:"Priority",width:"w-28",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)(p.PriorityBadge,{priority:a.priority??"medium"})},{key:"scheduledStart",header:"Scheduled",width:"w-32",shrink:!0,hideOnMobile:!0,hideable:!0,render:a=>(0,b.jsx)("span",{className:"text-muted-foreground text-sm tabular-nums",children:(0,z.formatDate)(a.scheduledStart??null,"short")})},{key:"totalAmount",header:"Amount",width:"w-32",shrink:!0,align:"right",hideable:!1,render:a=>(0,b.jsx)("span",{className:"font-semibold tabular-nums",children:(0,z.formatCurrency)(a.totalAmount||0,{decimals:2})})},{key:"actions",header:"",width:"w-10",shrink:!0,render:a=>(0,b.jsx)(o.RowActionsDropdown,{actions:[{label:"View Details",icon:g.Eye,href:`/dashboard/work/${a.id}`},{label:"Edit Job",icon:f.Edit,href:`/dashboard/work/${a.id}/edit`},{label:"Create Invoice",icon:h.FileText,href:`/dashboard/work/invoices/new?jobId=${a.id}`,separatorBefore:!0},{label:"Archive Job",icon:c.Archive,variant:"destructive",separatorBefore:!0,onClick:()=>{E(a.id),B(!0)}}]})}],L=[{label:"Archive Selected",icon:(0,b.jsx)(c.Archive,{className:"h-4 w-4"}),onClick:a=>{I(a),G(!0)},variant:"destructive"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.FullWidthDataTable,{bulkActions:L,columns:K,data:J,totalCount:r,currentPageFromServer:s,initialSearchQuery:v,serverPagination:!0,emptyAction:(0,b.jsxs)(m.Button,{onClick:()=>{window.location.href="/dashboard/work/new"},size:"sm",children:[(0,b.jsx)(i.Plus,{className:"mr-2 size-4"}),"Add Job"]}),emptyIcon:(0,b.jsx)(e,{className:"text-muted-foreground h-8 w-8"}),emptyMessage:"No jobs found",enableSelection:!0,entity:"jobs",getItemId:a=>a.id,isArchived:a=>!!(a.archived_at??a.deleted_at),itemsPerPage:q,onRefresh:()=>{window.location.reload()},onRowClick:a=>{t?t(a):window.location.href=`/dashboard/work/${a.id}`},serverSearch:!0,searchParamKey:"search",searchPlaceholder:"Search jobs by customer, category, equipment, service type...",showArchived:"active"!==x,showRefresh:u}),(0,b.jsx)(l.AlertDialog,{onOpenChange:B,open:A,children:(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsx)(l.AlertDialogTitle,{children:"Archive Job?"}),(0,b.jsx)(l.AlertDialogDescription,{children:"This job will be archived and can be restored within 90 days."})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(l.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{if(C){let{archiveJob:b}=await a.A(59655);(await b(C)).success&&window.location.reload()}},children:"Archive"})]})]})}),(0,b.jsx)(l.AlertDialog,{onOpenChange:G,open:F,children:(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsxs)(l.AlertDialogTitle,{children:["Archive ",H.size," Job(s)?"]}),(0,b.jsxs)(l.AlertDialogDescription,{children:[H.size," job(s) will be archived and can be restored within 90 days."]})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(l.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{let{archiveJob:b}=await a.A(59655),c=0;for(let a of H)(await b(a)).success&&c++;c>0&&window.location.reload()},children:"Archive"})]})]})})]})}a.s(["JobsTable",()=>E],94388)},95023,a=>{"use strict";var b=a.i(45139),c=a.i(47473),d=a.i(27228),e=a.i(40596);let f={jobs:"table",appointments:"table",payments:"table",estimates:"table",invoices:"table",contracts:"table",maintenancePlans:"table",materials:"table",purchaseOrders:"table",serviceAgreements:"table",equipment:"table",teams:"table",customers:"table",vendors:"table"},g=(0,d.create)()((0,e.devtools)((0,e.persist)((a,b)=>({...{views:{...f},setView:()=>{},getView:()=>"table",reset:()=>{}},setView:(b,c)=>a(a=>({views:{...a.views,[b]:c}})),getView:a=>b().views[a]??"table",reset:()=>a({views:{...f}})}),{name:"work-view-preferences",partialize:a=>({views:a.views}),skipHydration:!0}),{name:"WorkViewStore"}));function h({section:a,table:d,kanban:e,fallback:f=null,forceView:h}){let i,j=g(b=>b.views[a]??"table"),k=(i=g(a=>a.setView),b=>i(a,b)),l=h??j;return((0,c.useEffect)(()=>{h&&j!==h&&k(h)},[h]),"kanban"===l)?(0,b.jsx)(b.Fragment,{children:e??f}):(0,b.jsx)(b.Fragment,{children:d??f})}a.s(["WorkDataView",()=>h],95023)}];

//# sourceMappingURL=apps_web_src_components_work_be51a31c._.js.map