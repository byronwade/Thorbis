module.exports=[7912,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(64460)},84251,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},95683,a=>{"use strict";var b=a.i(7912),c=a.i(93097),d=a.i(12906);async function e(a){let b=(0,c.createAdminClient)(),{error:d}=await b.from("admin_audit_logs").insert({admin_user_id:a.adminUserId,admin_email:a.adminEmail,action:a.action,resource_type:a.resourceType,resource_id:a.resourceId,details:a.details,ip_address:a.ipAddress,user_agent:a.userAgent});d&&console.error("Failed to log admin action:",d)}var f=a.i(46052);async function g(a,b="admin"){let h=await (0,d.getAdminSession)();if(!h&&"admin"===b)return{error:"Unauthorized"};let i=(0,c.createAdminClient)(),{data:j}=await i.from("support_sessions").select("*").eq("id",a).single(),{error:k}=await i.from("support_sessions").update({status:"ended",ended_at:new Date().toISOString(),ended_by:b}).eq("id",a);return k?{error:"Failed to end session"}:(h&&j&&await e({adminUserId:h.userId,adminEmail:h.email||"",action:"support_session_ended",resourceType:"company",resourceId:j.company_id,details:{session_id:a,ended_by:b}}),(0,f.revalidatePath)("/admin/dashboard/work/companies"),{success:!0})}(0,a.i(84251).ensureServerEntryExports)([g]),(0,b.registerServerReference)(g,"603b56562ac905a59ad611c9c26163970265203d60",null),a.s(["endSupportSession",()=>g],95683)},63561,a=>{"use strict";var b=a.i(95683);a.s([],69535),a.i(69535),a.s(["603b56562ac905a59ad611c9c26163970265203d60",()=>b.endSupportSession],63561)}];

//# sourceMappingURL=_6ae150f2._.js.map