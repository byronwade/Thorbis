module.exports=[74385,a=>{"use strict";var b=a.i(45139),c=a.i(47473),d=a.i(94436),e=a.i(25756),f=a.i(39632),g=a.i(41909);let h=(0,a.i(3431).default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var i=a.i(19895),j=a.i(24126),k=a.i(97997);a.i(29891);var l=a.i(18170);a.i(9633);var m=a.i(90125);a.i(56120);var n=a.i(17132);a.i(39683);var o=a.i(22054);a.i(97977);var p=a.i(82012),q=a.i(75892),r=a.i(19573),s=a.i(56916);function t({open:a,onOpenChange:d,title:e,description:f,fields:g=[],requireReason:h=!0,actionLabel:i="Submit",onSubmit:j,isDestructive:k=!1}){let[m,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)({}),w=async a=>{a.preventDefault(),t(!0);try{let a=await j(u);a.success?(s.toast.success("Action completed successfully"),d(!1),v({})):s.toast.error(a.error||"Action failed")}catch(a){s.toast.error(a instanceof Error?a.message:"An error occurred")}finally{t(!1)}};return(0,b.jsx)(n.Dialog,{open:a,onOpenChange:d,children:(0,b.jsx)(n.DialogContent,{className:"sm:max-w-[500px]",children:(0,b.jsxs)("form",{onSubmit:w,children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:e}),(0,b.jsx)(n.DialogDescription,{children:f})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[g.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(p.Label,{htmlFor:a.name,children:[a.label,a.required&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(a=>{let c=u[a.name]||a.defaultValue||"";switch(a.type){case"textarea":return(0,b.jsx)(q.Textarea,{id:a.name,placeholder:a.placeholder,value:c,onChange:b=>v(c=>({...c,[a.name]:b.target.value})),required:a.required,disabled:m,rows:3});case"select":return(0,b.jsxs)(r.Select,{value:c,onValueChange:b=>v(c=>({...c,[a.name]:b})),required:a.required,disabled:m,children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:a.placeholder||"Select..."})}),(0,b.jsx)(r.SelectContent,{children:a.options?.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:a.label},a.value))})]});case"number":return(0,b.jsx)(o.Input,{id:a.name,type:"number",placeholder:a.placeholder,value:c,onChange:b=>v(c=>({...c,[a.name]:b.target.value})),required:a.required,disabled:m});case"date":case"datetime-local":return(0,b.jsx)(o.Input,{id:a.name,type:a.type,value:c,onChange:b=>v(c=>({...c,[a.name]:b.target.value})),required:a.required,disabled:m});default:return(0,b.jsx)(o.Input,{id:a.name,type:"text",placeholder:a.placeholder,value:c,onChange:b=>v(c=>({...c,[a.name]:b.target.value})),required:a.required,disabled:m})}})(a)]},a.name)),h&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(p.Label,{htmlFor:"reason",children:["Reason ",(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,b.jsx)(q.Textarea,{id:"reason",placeholder:"Explain why you're making this change (required for audit trail)",value:u.reason||"",onChange:a=>v(b=>({...b,reason:a.target.value})),required:!0,disabled:m,rows:3}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This will be logged in the audit trail"})]})]}),(0,b.jsxs)(n.DialogFooter,{children:[(0,b.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:m,children:"Cancel"}),(0,b.jsx)(l.Button,{type:"submit",variant:k?"destructive":"default",disabled:m,children:m?"Processing...":i})]})]})})})}var u=a.i(51813),v=(0,u.createServerReference)("706573facb6d3d9a5a4a93be96af7cc10b01674f7a",u.callServer,void 0,u.findSourceMapURL,"updateJobStatus"),w=(0,u.createServerReference)("70313e32929dd54f4bde93f6cb838669ddedcb3d82",u.callServer,void 0,u.findSourceMapURL,"reassignJob"),x=(0,u.createServerReference)("7859a9646c7f3be7bb4a92a9b4fc161b1bae9e5a62",u.callServer,void 0,u.findSourceMapURL,"updateJobSchedule"),y=(0,u.createServerReference)("706afc929bd09ee621a65e81531d18139b0609d20a",u.callServer,void 0,u.findSourceMapURL,"updateJobPriority"),z=(0,u.createServerReference)("70dc1ca351b7a32ead1c62c3aa87ad77522378e420",u.callServer,void 0,u.findSourceMapURL,"addJobNote");function A({jobId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Job Status",description:"Change the status of this job.",fields:[{name:"status",label:"New Status",type:"select",required:!0,options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"on_hold",label:"On Hold"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}],requireReason:!0,actionLabel:"Update Status",onSubmit:async b=>await v(a,b.status,b.reason)})}function B({jobId:a,open:c,onOpenChange:d,teamMembers:e=[]}){let f=[{name:"teamMemberId",label:"Assign To",type:"select",required:!0,placeholder:"Select team member...",options:e.map(a=>({value:a.id,label:a.name}))}];return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Reassign Job",description:"Assign this job to a different team member.",fields:f,requireReason:!0,actionLabel:"Reassign",onSubmit:async b=>await w(a,b.teamMemberId,b.reason)})}function C({jobId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Job Schedule",description:"Change the scheduled start and end times for this job.",fields:[{name:"scheduledStart",label:"Scheduled Start",type:"datetime-local",required:!0},{name:"scheduledEnd",label:"Scheduled End",type:"datetime-local",required:!0}],requireReason:!0,actionLabel:"Update Schedule",onSubmit:async b=>await x(a,b.scheduledStart,b.scheduledEnd,b.reason)})}function D({jobId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Job Priority",description:"Change the priority level for this job.",fields:[{name:"priority",label:"Priority Level",type:"select",required:!0,options:[{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]}],requireReason:!0,actionLabel:"Update Priority",onSubmit:async b=>await y(a,b.priority,b.reason)})}function E({jobId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Add Support Note",description:"Add an internal note to this job (visible to support team only).",fields:[{name:"note",label:"Support Note",type:"textarea",required:!0,placeholder:"Add an internal support note..."}],requireReason:!1,actionLabel:"Add Note",onSubmit:async b=>await z(a,b.note)})}var F=(0,u.createServerReference)("70c2eb54b6f410fd5d20e2279b1e767acc56fac674",u.callServer,void 0,u.findSourceMapURL,"issuePaymentRefund"),G=(0,u.createServerReference)("6059eaec1ac21cd6f9ad2890cf40676973fb78379e",u.callServer,void 0,u.findSourceMapURL,"retryFailedPayment"),H=(0,u.createServerReference)("60959e02af572f9739a1ce45753bb7014819d85695",u.callServer,void 0,u.findSourceMapURL,"markPaymentCompleted"),I=(0,u.createServerReference)("70d999140c54489f8ab5f8dfe3697dd25e899809bb",u.callServer,void 0,u.findSourceMapURL,"updatePaymentMethod");function J({paymentId:a,open:c,onOpenChange:d,maxRefundAmount:e=0}){let f=(e/100).toFixed(2),g=[{name:"refundAmount",label:`Refund Amount (max: $${f})`,type:"number",required:!0,placeholder:"0.00"}];return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Issue Payment Refund",description:`Issue a full or partial refund for this payment. Maximum refund available: $${f}`,fields:g,requireReason:!0,actionLabel:"Issue Refund",isDestructive:!0,onSubmit:async b=>{let c=Math.round(100*parseFloat(b.refundAmount));return await F(a,c,b.reason)}})}function K({paymentId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Retry Failed Payment",description:"Retry processing this failed payment. This will mark the payment as pending and attempt to process it again.",fields:[],requireReason:!0,actionLabel:"Retry Payment",onSubmit:async b=>await G(a,b.reason)})}function L({paymentId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Mark Payment as Completed",description:"Manually mark this payment as completed. Use this for offline payments (cash, check, etc.) that were processed outside the system.",fields:[],requireReason:!0,actionLabel:"Mark as Completed",onSubmit:async b=>await H(a,b.reason)})}function M({paymentId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Payment Method",description:"Change the payment method recorded for this payment.",fields:[{name:"paymentMethod",label:"Payment Method",type:"select",required:!0,options:[{value:"cash",label:"Cash"},{value:"check",label:"Check"},{value:"credit_card",label:"Credit Card"},{value:"debit_card",label:"Debit Card"},{value:"ach",label:"ACH / Bank Transfer"},{value:"wire",label:"Wire Transfer"},{value:"other",label:"Other"}]}],requireReason:!0,actionLabel:"Update Method",onSubmit:async b=>await I(a,b.paymentMethod,b.reason)})}var N=(0,u.createServerReference)("6070fa5e4296da2e6896faa0d57b8567d73f11b681",u.callServer,void 0,u.findSourceMapURL,"resetTeamMemberPassword"),O=(0,u.createServerReference)("7049d1469c6c66326eefce4aedcbe0769adb1ca483",u.callServer,void 0,u.findSourceMapURL,"changeTeamMemberRole"),P=(0,u.createServerReference)("70d63ce953cb58bab09fc6decf1d72432a48a5c3fd",u.callServer,void 0,u.findSourceMapURL,"updateTeamMemberStatus"),Q=(0,u.createServerReference)("70b33b4db5177009fd2aca47e81922dd597dfd73d5",u.callServer,void 0,u.findSourceMapURL,"updateTeamMemberEmail");function R({teamMemberId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Reset Team Member Password",description:"Send a password reset email to this team member. They will receive a link to create a new password.",fields:[],requireReason:!0,actionLabel:"Send Password Reset",isDestructive:!0,onSubmit:async b=>await N(a,b.reason)})}function S({teamMemberId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Change Team Member Role",description:"Change the role and permissions for this team member.",fields:[{name:"role",label:"New Role",type:"select",required:!0,options:[{value:"owner",label:"Owner"},{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"technician",label:"Technician"},{value:"dispatcher",label:"Dispatcher"},{value:"viewer",label:"Viewer"}]}],requireReason:!0,actionLabel:"Change Role",onSubmit:async b=>await O(a,b.role,b.reason)})}function T({teamMemberId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Team Member Status",description:"Activate, deactivate, or suspend this team member's account.",fields:[{name:"status",label:"New Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"}]}],requireReason:!0,actionLabel:"Update Status",isDestructive:!0,onSubmit:async b=>await P(a,b.status,b.reason)})}function U({teamMemberId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Team Member Email",description:"Change the email address for this team member. This will update both their profile and login credentials.",fields:[{name:"email",label:"New Email Address",type:"text",required:!0,placeholder:"user@example.com"}],requireReason:!0,actionLabel:"Update Email",onSubmit:async b=>await Q(a,b.email,b.reason)})}var V=(0,u.createServerReference)("70011e89a27332af3f21c9840737547e1e76af090f",u.callServer,void 0,u.findSourceMapURL,"updateInvoiceStatus"),W=(0,u.createServerReference)("60f689bdbae4c8c4c0214b03bcda312112badb96b4",u.callServer,void 0,u.findSourceMapURL,"voidInvoice"),X=(0,u.createServerReference)("708c498faeda8813bc53e1f8bc67509ce1929478c7",u.callServer,void 0,u.findSourceMapURL,"updateInvoiceDueDate"),Y=(0,u.createServerReference)("60d22fd78c43e37b9bb0eedee7ecf798e5b8b1b5d3",u.callServer,void 0,u.findSourceMapURL,"sendInvoiceReminder");function Z({invoiceId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Invoice Status",description:"Change the status of this invoice.",fields:[{name:"status",label:"New Status",type:"select",required:!0,options:[{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"viewed",label:"Viewed"},{value:"paid",label:"Paid"},{value:"overdue",label:"Overdue"},{value:"cancelled",label:"Cancelled"}]}],requireReason:!0,actionLabel:"Update Status",onSubmit:async b=>await V(a,b.status,b.reason)})}function $({invoiceId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Void Invoice",description:"Cancel this invoice. This action cannot be undone. Note: You cannot void a paid invoice - issue a refund instead.",fields:[],requireReason:!0,actionLabel:"Void Invoice",isDestructive:!0,onSubmit:async b=>await W(a,b.reason)})}function _({invoiceId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Update Invoice Due Date",description:"Change the due date for this invoice.",fields:[{name:"dueDate",label:"New Due Date",type:"date",required:!0}],requireReason:!0,actionLabel:"Update Due Date",onSubmit:async b=>await X(a,b.dueDate,b.reason)})}function aa({invoiceId:a,open:c,onOpenChange:d}){return(0,b.jsx)(t,{open:c,onOpenChange:d,title:"Send Invoice Reminder",description:"Manually send a payment reminder email to the customer for this invoice.",fields:[],requireReason:!1,actionLabel:"Send Reminder",onSubmit:async b=>await Y(a,b.reason)})}function ab({resourceType:a,resourceId:n,resourceData:o}){let[p,q]=(0,c.useState)(null),r=a=>{q(a)},s=()=>{q(null)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.DropdownMenu,{children:[(0,b.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(d.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,b.jsxs)(m.DropdownMenuContent,{align:"end",className:"w-48",children:["job"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateStatus"),children:[(0,b.jsx)(e.Edit,{className:"mr-2 h-4 w-4"}),"Update Status"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("reassign"),children:[(0,b.jsx)(h,{className:"mr-2 h-4 w-4"}),"Reassign Job"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateSchedule"),children:[(0,b.jsx)(j.Clock,{className:"mr-2 h-4 w-4"}),"Update Schedule"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updatePriority"),children:[(0,b.jsx)(k.AlertCircle,{className:"mr-2 h-4 w-4"}),"Update Priority"]}),(0,b.jsx)(m.DropdownMenuSeparator,{}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("addNote"),children:[(0,b.jsx)(i.FileText,{className:"mr-2 h-4 w-4"}),"Add Support Note"]})]}),"payment"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("issueRefund"),className:"text-destructive",children:[(0,b.jsx)(g.DollarSign,{className:"mr-2 h-4 w-4"}),"Issue Refund"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("retryPayment"),children:[(0,b.jsx)(k.AlertCircle,{className:"mr-2 h-4 w-4"}),"Retry Payment"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("markCompleted"),children:[(0,b.jsx)(e.Edit,{className:"mr-2 h-4 w-4"}),"Mark as Completed"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateMethod"),children:[(0,b.jsx)(i.FileText,{className:"mr-2 h-4 w-4"}),"Update Payment Method"]})]}),"team"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("resetPassword"),className:"text-destructive",children:[(0,b.jsx)(k.AlertCircle,{className:"mr-2 h-4 w-4"}),"Reset Password"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("changeRole"),children:[(0,b.jsx)(h,{className:"mr-2 h-4 w-4"}),"Change Role"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateStatus"),children:[(0,b.jsx)(e.Edit,{className:"mr-2 h-4 w-4"}),"Update Status"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateEmail"),children:[(0,b.jsx)(i.FileText,{className:"mr-2 h-4 w-4"}),"Update Email"]})]}),"invoice"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateStatus"),children:[(0,b.jsx)(e.Edit,{className:"mr-2 h-4 w-4"}),"Update Status"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("void"),className:"text-destructive",children:[(0,b.jsx)(f.Trash2,{className:"mr-2 h-4 w-4"}),"Void Invoice"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("updateDueDate"),children:[(0,b.jsx)(j.Clock,{className:"mr-2 h-4 w-4"}),"Update Due Date"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>r("sendReminder"),children:[(0,b.jsx)(i.FileText,{className:"mr-2 h-4 w-4"}),"Send Reminder"]})]})]})]}),"job"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A,{jobId:n,open:"updateStatus"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(B,{jobId:n,open:"reassign"===p,onOpenChange:a=>!a&&s(),teamMembers:o?.teamMembers}),(0,b.jsx)(C,{jobId:n,open:"updateSchedule"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(D,{jobId:n,open:"updatePriority"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(E,{jobId:n,open:"addNote"===p,onOpenChange:a=>!a&&s()})]}),"payment"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{paymentId:n,open:"issueRefund"===p,onOpenChange:a=>!a&&s(),maxRefundAmount:o?.maxRefundAmount}),(0,b.jsx)(K,{paymentId:n,open:"retryPayment"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(L,{paymentId:n,open:"markCompleted"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(M,{paymentId:n,open:"updateMethod"===p,onOpenChange:a=>!a&&s()})]}),"team"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R,{teamMemberId:n,open:"resetPassword"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(S,{teamMemberId:n,open:"changeRole"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(T,{teamMemberId:n,open:"updateStatus"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(U,{teamMemberId:n,open:"updateEmail"===p,onOpenChange:a=>!a&&s()})]}),"invoice"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z,{invoiceId:n,open:"updateStatus"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)($,{invoiceId:n,open:"void"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(_,{invoiceId:n,open:"updateDueDate"===p,onOpenChange:a=>!a&&s()}),(0,b.jsx)(aa,{invoiceId:n,open:"sendReminder"===p,onOpenChange:a=>!a&&s()})]})]})}a.s(["RowActionsDropdown",()=>ab],74385)}];

//# sourceMappingURL=apps_admin_src_components_view-as_row-actions-dropdown_tsx_c643724b._.js.map