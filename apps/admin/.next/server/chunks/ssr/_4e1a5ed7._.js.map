{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/web/spec-extension/cookies.ts","turbopack:///[project]/apps/admin/src/lib/supabase/admin-client.ts","turbopack:///[project]/apps/admin/src/lib/supabase/server.ts","turbopack:///[project]/apps/admin/src/lib/supabase/web-reader.ts","turbopack:///[project]/apps/admin/src/lib/admin-context/index.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/readonly-url-search-params.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/redirect-status-code.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/redirect-error.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/redirect.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/http-access-fallback/http-access-fallback.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/not-found.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/forbidden.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/unauthorized.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/lib/router-utils/is-postpone.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/is-next-router-error.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/unstable-rethrow.server.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/unstable-rethrow.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/client/components/navigation.react-server.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.1_@opentelemetry+api@1.9.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/api/navigation.react-server.ts","turbopack:///[project]/apps/admin/src/components/view-as/admin-banner.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/apps/admin/src/components/view-as/floating-tools.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/apps/admin/src/app/dashboard/view-as/[companyId]/layout.tsx"],"sourcesContent":["export {\n  RequestCookies,\n  ResponseCookies,\n  stringifyCookie,\n} from 'next/dist/compiled/@edge-runtime/cookies'\n","import { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\n\n/**\n * Admin Database Client (Server-Side Only)\n *\n * This client connects to the ADMIN Supabase database (separate from web database).\n *\n * Database: Admin database (iwudmixxoozwskgolqlz)\n * Tables: admin_users, admin_sessions, companies_registry, support_tickets,\n *         email_campaigns, platform_settings, admin_audit_logs, waitlist\n *\n * ⚠️ SECURITY WARNING:\n * - ONLY use this on the server side (Server Components, Server Actions, API Routes)\n * - NEVER expose this client or its credentials to the browser\n * - NEVER use in Client Components\n * - Uses service role key for full access (bypasses RLS)\n *\n * Use cases:\n * - Admin user authentication and management\n * - Session management\n * - Audit logging\n * - Platform settings\n * - Email campaigns\n * - Support tickets\n * - Company registry (metadata only)\n *\n * Note: For accessing CUSTOMER DATA (jobs, invoices, payments, etc.),\n * use createWebClient() from \"./web-client.ts\" instead.\n */\nexport function createAdminClient() {\n\tconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n\tconst serviceRoleKey = process.env.ADMIN_SUPABASE_SERVICE_ROLE_KEY;\n\n\tif (!supabaseUrl) {\n\t\tthrow new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n\t}\n\n\tif (!serviceRoleKey) {\n\t\tthrow new Error(\n\t\t\t\"Missing ADMIN_SUPABASE_SERVICE_ROLE_KEY environment variable. \" +\n\t\t\t\t\"Get this from Supabase dashboard -> Settings -> API -> service_role key\"\n\t\t);\n\t}\n\n\treturn createSupabaseClient(supabaseUrl, serviceRoleKey, {\n\t\tauth: {\n\t\t\tautoRefreshToken: false,\n\t\t\tpersistSession: false,\n\t\t},\n\t});\n}\n\n/**\n * Type-safe admin client singleton for repeated use\n */\nlet adminClientInstance: ReturnType<typeof createAdminClient> | null = null;\n\nfunction getAdminClient() {\n\tif (!adminClientInstance) {\n\t\tadminClientInstance = createAdminClient();\n\t}\n\treturn adminClientInstance;\n}\n","import { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\nimport { cookies } from \"next/headers\";\n\n/**\n * Admin Database Server Client\n *\n * This client connects to the ADMIN Supabase project.\n * Used for admin-specific operations like:\n * - Admin user management\n * - Support tickets\n * - Email campaigns\n * - Platform settings\n *\n * NOTE: This uses the service role key for server-side operations.\n * For session-based auth, use the session management in auth/session.ts\n */\nexport async function createClient() {\n\tconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\n\tconst serviceRoleKey = process.env.ADMIN_SUPABASE_SERVICE_ROLE_KEY;\n\tconst anonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n\t// Use service role key if available, otherwise fall back to anon key\n\tconst key = serviceRoleKey || anonKey;\n\n\treturn createSupabaseClient(supabaseUrl, key, {\n\t\tauth: {\n\t\t\tautoRefreshToken: false,\n\t\t\tpersistSession: false,\n\t\t},\n\t});\n}\n\n/**\n * Get the current admin session from cookies\n */\nasync function getAdminSession() {\n\tconst cookieStore = await cookies();\n\tconst sessionToken = cookieStore.get(\"admin_session\")?.value;\n\n\tif (!sessionToken) {\n\t\treturn null;\n\t}\n\n\t// Verify and decode the session token\n\tconst { verifySessionToken } = await import(\"@/lib/auth/session\");\n\treturn verifySessionToken(sessionToken);\n}\n\n/**\n * Get the current admin user from the session\n */\nasync function getCurrentAdminUser() {\n\tconst session = await getAdminSession();\n\n\tif (!session) {\n\t\treturn null;\n\t}\n\n\tconst supabase = await createClient();\n\tconst { data, error } = await supabase\n\t\t.from(\"admin_users\")\n\t\t.select(\"*\")\n\t\t.eq(\"id\", session.userId)\n\t\t.single();\n\n\tif (error || !data) {\n\t\treturn null;\n\t}\n\n\treturn data;\n}\n\n// Re-export the admin client for convenience\nexport { createAdminClient } from \"./admin-client\";\nexport { getWebReaderClient } from \"./web-reader\";\n","import { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\n\n/**\n * Web Database Reader Client (Server-Side Only)\n *\n * This client connects to the WEB Supabase project for READ-ONLY access to:\n * - Companies (customer businesses)\n * - Users (customer employees)\n * - Jobs, Invoices, Estimates\n * - Customers (customer's clients)\n * - Properties, Equipment\n * - All other business data\n *\n * This is used by admin for:\n * - Support/debugging customer issues\n * - Viewing company data for support tickets\n * - Accessing customer data when needed\n *\n * IMPORTANT: This should only be used for READ operations.\n * Never write to the web database from the admin app.\n */\nfunction createWebReaderClient() {\n\tconst supabaseUrl = process.env.WEB_SUPABASE_URL;\n\tconst serviceRoleKey = process.env.WEB_SUPABASE_SERVICE_ROLE_KEY;\n\n\tif (!supabaseUrl) {\n\t\tthrow new Error(\"Missing WEB_SUPABASE_URL environment variable\");\n\t}\n\n\tif (!serviceRoleKey) {\n\t\tthrow new Error(\"Missing WEB_SUPABASE_SERVICE_ROLE_KEY environment variable\");\n\t}\n\n\treturn createSupabaseClient(supabaseUrl, serviceRoleKey, {\n\t\tauth: {\n\t\t\tautoRefreshToken: false,\n\t\t\tpersistSession: false,\n\t\t},\n\t});\n}\n\n/**\n * Type-safe web reader client singleton for repeated use\n */\nlet webReaderInstance: ReturnType<typeof createWebReaderClient> | null = null;\n\nexport function getWebReaderClient() {\n\tif (!webReaderInstance) {\n\t\twebReaderInstance = createWebReaderClient();\n\t}\n\treturn webReaderInstance;\n}\n\n// =============================================================================\n// READ-ONLY HELPER FUNCTIONS\n// =============================================================================\n// These functions provide convenient access to web database tables\n\n/**\n * Get a company from the web database by ID\n */\nasync function getWebCompany(companyId: string) {\n\tconst client = getWebReaderClient();\n\tconst { data, error } = await client\n\t\t.from(\"companies\")\n\t\t.select(\"*\")\n\t\t.eq(\"id\", companyId)\n\t\t.single();\n\n\tif (error) throw error;\n\treturn data;\n}\n\n/**\n * Get all companies from the web database\n */\nasync function getWebCompanies(options?: {\n\tlimit?: number;\n\toffset?: number;\n\tstatus?: string;\n}) {\n\tconst client = getWebReaderClient();\n\tlet query = client.from(\"companies\").select(\"*\", { count: \"exact\" });\n\n\tif (options?.status) {\n\t\tquery = query.eq(\"status\", options.status);\n\t}\n\n\tif (options?.limit) {\n\t\tquery = query.limit(options.limit);\n\t}\n\n\tif (options?.offset) {\n\t\tquery = query.range(options.offset, options.offset + (options.limit || 50) - 1);\n\t}\n\n\tconst { data, error, count } = await query.order(\"created_at\", { ascending: false });\n\n\tif (error) throw error;\n\treturn { data, count };\n}\n\n/**\n * Get users for a company from the web database\n */\nasync function getWebCompanyUsers(companyId: string) {\n\tconst client = getWebReaderClient();\n\tconst { data, error } = await client\n\t\t.from(\"team_members\")\n\t\t.select(\"*\")\n\t\t.eq(\"company_id\", companyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (error) throw error;\n\treturn data;\n}\n\n/**\n * Get jobs for a company from the web database\n */\nasync function getWebCompanyJobs(companyId: string, options?: { limit?: number }) {\n\tconst client = getWebReaderClient();\n\tlet query = client\n\t\t.from(\"jobs\")\n\t\t.select(\"*\")\n\t\t.eq(\"company_id\", companyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (options?.limit) {\n\t\tquery = query.limit(options.limit);\n\t}\n\n\tconst { data, error } = await query;\n\n\tif (error) throw error;\n\treturn data;\n}\n\n/**\n * Get customers for a company from the web database\n */\nasync function getWebCompanyCustomers(companyId: string, options?: { limit?: number }) {\n\tconst client = getWebReaderClient();\n\tlet query = client\n\t\t.from(\"customers\")\n\t\t.select(\"*\")\n\t\t.eq(\"company_id\", companyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (options?.limit) {\n\t\tquery = query.limit(options.limit);\n\t}\n\n\tconst { data, error } = await query;\n\n\tif (error) throw error;\n\treturn data;\n}\n\n/**\n * Get invoices for a company from the web database\n */\nasync function getWebCompanyInvoices(companyId: string, options?: { limit?: number }) {\n\tconst client = getWebReaderClient();\n\tlet query = client\n\t\t.from(\"invoices\")\n\t\t.select(\"*\")\n\t\t.eq(\"company_id\", companyId)\n\t\t.order(\"created_at\", { ascending: false });\n\n\tif (options?.limit) {\n\t\tquery = query.limit(options.limit);\n\t}\n\n\tconst { data, error } = await query;\n\n\tif (error) throw error;\n\treturn data;\n}\n\n/**\n * Search across web database (for support purposes)\n */\nasync function searchWebDatabase(searchTerm: string, options?: { limit?: number }) {\n\tconst client = getWebReaderClient();\n\tconst limit = options?.limit || 10;\n\n\t// Search companies\n\tconst { data: companies } = await client\n\t\t.from(\"companies\")\n\t\t.select(\"id, name, slug\")\n\t\t.or(`name.ilike.%${searchTerm}%,slug.ilike.%${searchTerm}%`)\n\t\t.limit(limit);\n\n\t// Search customers\n\tconst { data: customers } = await client\n\t\t.from(\"customers\")\n\t\t.select(\"id, first_name, last_name, email, company_id\")\n\t\t.or(`first_name.ilike.%${searchTerm}%,last_name.ilike.%${searchTerm}%,email.ilike.%${searchTerm}%`)\n\t\t.limit(limit);\n\n\treturn {\n\t\tcompanies: companies || [],\n\t\tcustomers: customers || [],\n\t};\n}\n","/**\n * Admin Context - Impersonation & Session Management\n *\n * Handles admin impersonation of customer accounts with session-based permissions.\n * Overrides company context when in view-as mode.\n */\n\nimport { cache } from \"react\";\nimport { cookies } from \"next/headers\";\nimport { createAdminClient } from \"../supabase/admin-client\";\nimport { getAdminSession } from \"../auth/session\";\n\nconst IMPERSONATION_COOKIE = \"admin_impersonation_company_id\";\nconst SESSION_COOKIE = \"admin_support_session_id\";\n\n/**\n * Get the currently impersonated company ID (if in view-as mode)\n */\nexport const getImpersonatedCompanyId = cache(async (): Promise<string | null> => {\n\tconst cookieStore = await cookies();\n\tconst impersonationCookie = cookieStore.get(IMPERSONATION_COOKIE);\n\n\tif (!impersonationCookie?.value) {\n\t\treturn null;\n\t}\n\n\t// Verify admin session exists\n\tconst adminSession = await getAdminSession();\n\tif (!adminSession) {\n\t\t// Clear invalid impersonation\n\t\tawait clearImpersonation();\n\t\treturn null;\n\t}\n\n\t// Verify support session is still active\n\tconst sessionCookie = cookieStore.get(SESSION_COOKIE);\n\tif (sessionCookie?.value) {\n\t\tconst isActive = await verifySupportSessionActive(sessionCookie.value);\n\t\tif (!isActive) {\n\t\t\t// Session expired, clear impersonation\n\t\t\tawait clearImpersonation();\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn impersonationCookie.value;\n});\n\n/**\n * Get the active support session ID (if in view-as mode)\n */\nexport const getActiveSupportSessionId = cache(async (): Promise<string | null> => {\n\tconst cookieStore = await cookies();\n\tconst sessionCookie = cookieStore.get(SESSION_COOKIE);\n\treturn sessionCookie?.value || null;\n});\n\n/**\n * Set impersonation context (call when entering view-as mode)\n */\nasync function setImpersonation(companyId: string, sessionId: string): Promise<void> {\n\tconst cookieStore = await cookies();\n\n\t// Verify admin session\n\tconst adminSession = await getAdminSession();\n\tif (!adminSession) {\n\t\tthrow new Error(\"Admin session required\");\n\t}\n\n\t// Verify support session is active\n\tconst isActive = await verifySupportSessionActive(sessionId);\n\tif (!isActive) {\n\t\tthrow new Error(\"Support session is not active\");\n\t}\n\n\t// Set impersonation cookies\n\tcookieStore.set(IMPERSONATION_COOKIE, companyId, {\n\t\thttpOnly: true,\n\t\tsecure: process.env.NODE_ENV === \"production\",\n\t\tsameSite: \"lax\",\n\t\tmaxAge: 60 * 60 * 2, // 2 hours max\n\t});\n\n\tcookieStore.set(SESSION_COOKIE, sessionId, {\n\t\thttpOnly: true,\n\t\tsecure: process.env.NODE_ENV === \"production\",\n\t\tsameSite: \"lax\",\n\t\tmaxAge: 60 * 60 * 2, // 2 hours max\n\t});\n}\n\n/**\n * Clear impersonation context (call when exiting view-as mode)\n */\nasync function clearImpersonation(): Promise<void> {\n\tconst cookieStore = await cookies();\n\tcookieStore.delete(IMPERSONATION_COOKIE);\n\tcookieStore.delete(SESSION_COOKIE);\n}\n\n/**\n * Verify that a support session is still active\n */\nasync function verifySupportSessionActive(sessionId: string): Promise<boolean> {\n\tconst adminDb = createAdminClient();\n\n\tconst { data: isActive } = await adminDb.rpc(\"is_session_active\", {\n\t\tp_session_id: sessionId,\n\t});\n\n\treturn isActive === true;\n}\n\n/**\n * Require an active support session (use in Server Actions/Components)\n * Throws error if no active session\n */\nexport async function requireActiveSupportSession(): Promise<{\n\tsessionId: string;\n\tcompanyId: string;\n\tadminUserId: string;\n}> {\n\tconst sessionId = await getActiveSupportSessionId();\n\tif (!sessionId) {\n\t\tthrow new Error(\"No active support session\");\n\t}\n\n\tconst companyId = await getImpersonatedCompanyId();\n\tif (!companyId) {\n\t\tthrow new Error(\"No impersonated company\");\n\t}\n\n\tconst adminSession = await getAdminSession();\n\tif (!adminSession) {\n\t\tthrow new Error(\"No admin session\");\n\t}\n\n\t// Verify session is still active\n\tconst isActive = await verifySupportSessionActive(sessionId);\n\tif (!isActive) {\n\t\tawait clearImpersonation();\n\t\tthrow new Error(\"Support session has expired\");\n\t}\n\n\treturn {\n\t\tsessionId,\n\t\tcompanyId,\n\t\tadminUserId: adminSession.userId,\n\t};\n}\n\n/**\n * Check if currently in view-as mode\n */\nconst isInViewAsMode = cache(async (): Promise<boolean> => {\n\tconst companyId = await getImpersonatedCompanyId();\n\treturn companyId !== null;\n});\n\n/**\n * Get support session permissions\n */\nasync function getSessionPermissions(sessionId: string): Promise<string[]> {\n\tconst adminDb = createAdminClient();\n\n\tconst { data: permissions } = await adminDb.from(\"support_session_permissions\").select(\"action_type\").eq(\"session_id\", sessionId).eq(\"granted\", true);\n\n\treturn permissions?.map((p) => p.action_type) || [];\n}\n\n/**\n * Check if admin has specific permission in current session\n */\nexport async function hasPermission(actionType: string): Promise<boolean> {\n\tconst sessionId = await getActiveSupportSessionId();\n\tif (!sessionId) {\n\t\treturn false;\n\t}\n\n\tconst permissions = await getSessionPermissions(sessionId);\n\treturn permissions.includes(actionType);\n}\n\n/**\n * Higher-order function to wrap Server Actions with permission checks\n */\nfunction withSupportSession<T extends (...args: any[]) => Promise<any>>(action: T, requiredPermission?: string): T {\n\treturn (async (...args: any[]) => {\n\t\t// Verify active support session\n\t\tconst session = await requireActiveSupportSession();\n\n\t\t// Check permission if specified\n\t\tif (requiredPermission) {\n\t\t\tconst hasAccess = await hasPermission(requiredPermission);\n\t\t\tif (!hasAccess) {\n\t\t\t\tthrow new Error(`Permission denied: ${requiredPermission}`);\n\t\t\t}\n\t\t}\n\n\t\t// Execute action\n\t\treturn await action(...args);\n\t}) as T;\n}\n\n/**\n * Log an admin action with automatic session context\n */\nexport async function logAdminActionInSession(action: string, resourceType: string, resourceId: string, beforeData?: any, afterData?: any, reason?: string) {\n\tconst session = await requireActiveSupportSession();\n\tconst adminSession = await getAdminSession();\n\n\tif (!adminSession) {\n\t\tthrow new Error(\"No admin session\");\n\t}\n\n\tconst adminDb = createAdminClient();\n\n\tawait adminDb.from(\"support_session_actions\").insert({\n\t\tsession_id: session.sessionId,\n\t\tadmin_user_id: session.adminUserId,\n\t\taction,\n\t\tresource_type: resourceType,\n\t\tresource_id: resourceId,\n\t\tbefore_data: beforeData,\n\t\tafter_data: afterData,\n\t\treason,\n\t});\n}\n\n/**\n * Get current session details\n */\nexport async function getCurrentSession() {\n\tconst sessionId = await getActiveSupportSessionId();\n\tif (!sessionId) {\n\t\treturn null;\n\t}\n\n\tconst adminDb = createAdminClient();\n\n\tconst { data: session } = await adminDb.from(\"support_sessions\").select(\"*, admin_users(email, full_name)\").eq(\"id\", sessionId).single();\n\n\treturn session;\n}\n","/**\n * ReadonlyURLSearchParams implementation shared between client and server.\n * This file is intentionally not marked as 'use client' or 'use server'\n * so it can be imported by both environments.\n */\n\n/** @internal */\nclass ReadonlyURLSearchParamsError extends Error {\n  constructor() {\n    super(\n      'Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams'\n    )\n  }\n}\n\n/**\n * A read-only version of URLSearchParams that throws errors when mutation methods are called.\n * This ensures that the URLSearchParams returned by useSearchParams() cannot be mutated.\n */\nexport class ReadonlyURLSearchParams extends URLSearchParams {\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  append() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  delete() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  set() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n  /** @deprecated Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams */\n  sort() {\n    throw new ReadonlyURLSearchParamsError()\n  }\n}\n","export enum RedirectStatusCode {\n  SeeOther = 303,\n  TemporaryRedirect = 307,\n  PermanentRedirect = 308,\n}\n","import { RedirectStatusCode } from './redirect-status-code'\n\nexport const REDIRECT_ERROR_CODE = 'NEXT_REDIRECT'\n\nexport enum RedirectType {\n  push = 'push',\n  replace = 'replace',\n}\n\nexport type RedirectError = Error & {\n  digest: `${typeof REDIRECT_ERROR_CODE};${RedirectType};${string};${RedirectStatusCode};`\n}\n\n/**\n * Checks an error to determine if it's an error generated by the\n * `redirect(url)` helper.\n *\n * @param error the error that may reference a redirect error\n * @returns true if the error is a redirect error\n */\nexport function isRedirectError(error: unknown): error is RedirectError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n\n  const digest = error.digest.split(';')\n  const [errorCode, type] = digest\n  const destination = digest.slice(2, -2).join(';')\n  const status = digest.at(-2)\n\n  const statusCode = Number(status)\n\n  return (\n    errorCode === REDIRECT_ERROR_CODE &&\n    (type === 'replace' || type === 'push') &&\n    typeof destination === 'string' &&\n    !isNaN(statusCode) &&\n    statusCode in RedirectStatusCode\n  )\n}\n","import { RedirectStatusCode } from './redirect-status-code'\nimport {\n  RedirectType,\n  type RedirectError,\n  isRedirectError,\n  REDIRECT_ERROR_CODE,\n} from './redirect-error'\n\nconst actionAsyncStorage =\n  typeof window === 'undefined'\n    ? (\n        require('../../server/app-render/action-async-storage.external') as typeof import('../../server/app-render/action-async-storage.external')\n      ).actionAsyncStorage\n    : undefined\n\nexport function getRedirectError(\n  url: string,\n  type: RedirectType,\n  statusCode: RedirectStatusCode = RedirectStatusCode.TemporaryRedirect\n): RedirectError {\n  const error = new Error(REDIRECT_ERROR_CODE) as RedirectError\n  error.digest = `${REDIRECT_ERROR_CODE};${type};${url};${statusCode};`\n  return error\n}\n\n/**\n * This function allows you to redirect the user to another URL. It can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a meta tag to redirect the user to the target page.\n * - In a Route Handler or Server Action, it will serve a 307/303 to the caller.\n * - In a Server Action, type defaults to 'push' and 'replace' elsewhere.\n *\n * Read more: [Next.js Docs: `redirect`](https://nextjs.org/docs/app/api-reference/functions/redirect)\n */\nexport function redirect(\n  /** The URL to redirect to */\n  url: string,\n  type?: RedirectType\n): never {\n  type ??= actionAsyncStorage?.getStore()?.isAction\n    ? RedirectType.push\n    : RedirectType.replace\n\n  throw getRedirectError(url, type, RedirectStatusCode.TemporaryRedirect)\n}\n\n/**\n * This function allows you to redirect the user to another URL. It can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a meta tag to redirect the user to the target page.\n * - In a Route Handler or Server Action, it will serve a 308/303 to the caller.\n *\n * Read more: [Next.js Docs: `redirect`](https://nextjs.org/docs/app/api-reference/functions/redirect)\n */\nexport function permanentRedirect(\n  /** The URL to redirect to */\n  url: string,\n  type: RedirectType = RedirectType.replace\n): never {\n  throw getRedirectError(url, type, RedirectStatusCode.PermanentRedirect)\n}\n\n/**\n * Returns the encoded URL from the error if it's a RedirectError, null\n * otherwise. Note that this does not validate the URL returned.\n *\n * @param error the error that may be a redirect error\n * @return the url if the error was a redirect error\n */\nexport function getURLFromRedirectError(error: RedirectError): string\nexport function getURLFromRedirectError(error: unknown): string | null {\n  if (!isRedirectError(error)) return null\n\n  // Slices off the beginning of the digest that contains the code and the\n  // separating ';'.\n  return error.digest.split(';').slice(2, -2).join(';')\n}\n\nexport function getRedirectTypeFromError(error: RedirectError): RedirectType {\n  if (!isRedirectError(error)) {\n    throw new Error('Not a redirect error')\n  }\n\n  return error.digest.split(';', 2)[1] as RedirectType\n}\n\nexport function getRedirectStatusCodeFromError(error: RedirectError): number {\n  if (!isRedirectError(error)) {\n    throw new Error('Not a redirect error')\n  }\n\n  return Number(error.digest.split(';').at(-2))\n}\n","export const HTTPAccessErrorStatus = {\n  NOT_FOUND: 404,\n  FORBIDDEN: 403,\n  UNAUTHORIZED: 401,\n}\n\nconst ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatus))\n\nexport const HTTP_ERROR_FALLBACK_ERROR_CODE = 'NEXT_HTTP_ERROR_FALLBACK'\n\nexport type HTTPAccessFallbackError = Error & {\n  digest: `${typeof HTTP_ERROR_FALLBACK_ERROR_CODE};${string}`\n}\n\n/**\n * Checks an error to determine if it's an error generated by\n * the HTTP navigation APIs `notFound()`, `forbidden()` or `unauthorized()`.\n *\n * @param error the error that may reference a HTTP access error\n * @returns true if the error is a HTTP access error\n */\nexport function isHTTPAccessFallbackError(\n  error: unknown\n): error is HTTPAccessFallbackError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n  const [prefix, httpStatus] = error.digest.split(';')\n\n  return (\n    prefix === HTTP_ERROR_FALLBACK_ERROR_CODE &&\n    ALLOWED_CODES.has(Number(httpStatus))\n  )\n}\n\nexport function getAccessFallbackHTTPStatus(\n  error: HTTPAccessFallbackError\n): number {\n  const httpStatus = error.digest.split(';')[1]\n  return Number(httpStatus)\n}\n\nexport function getAccessFallbackErrorTypeByStatus(\n  status: number\n): 'not-found' | 'forbidden' | 'unauthorized' | undefined {\n  switch (status) {\n    case 401:\n      return 'unauthorized'\n    case 403:\n      return 'forbidden'\n    case 404:\n      return 'not-found'\n    default:\n      return\n  }\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n/**\n * This function allows you to render the [not-found.js file](https://nextjs.org/docs/app/api-reference/file-conventions/not-found)\n * within a route segment as well as inject a tag.\n *\n * `notFound()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * - In a Server Component, this will insert a `<meta name=\"robots\" content=\"noindex\" />` meta tag and set the status code to 404.\n * - In a Route Handler or Server Action, it will serve a 404 to the caller.\n *\n * Read more: [Next.js Docs: `notFound`](https://nextjs.org/docs/app/api-reference/functions/not-found)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};404`\n\nexport function notFound(): never {\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n\n  throw error\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n// TODO: Add `forbidden` docs\n/**\n * @experimental\n * This function allows you to render the [forbidden.js file](https://nextjs.org/docs/app/api-reference/file-conventions/forbidden)\n * within a route segment as well as inject a tag.\n *\n * `forbidden()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n * Read more: [Next.js Docs: `forbidden`](https://nextjs.org/docs/app/api-reference/functions/forbidden)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};403`\n\nexport function forbidden(): never {\n  if (!process.env.__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS) {\n    throw new Error(\n      `\\`forbidden()\\` is experimental and only allowed to be enabled when \\`experimental.authInterrupts\\` is enabled.`\n    )\n  }\n\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n  throw error\n}\n","import {\n  HTTP_ERROR_FALLBACK_ERROR_CODE,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\n\n// TODO: Add `unauthorized` docs\n/**\n * @experimental\n * This function allows you to render the [unauthorized.js file](https://nextjs.org/docs/app/api-reference/file-conventions/unauthorized)\n * within a route segment as well as inject a tag.\n *\n * `unauthorized()` can be used in\n * [Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components),\n * [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers), and\n * [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations).\n *\n *\n * Read more: [Next.js Docs: `unauthorized`](https://nextjs.org/docs/app/api-reference/functions/unauthorized)\n */\n\nconst DIGEST = `${HTTP_ERROR_FALLBACK_ERROR_CODE};401`\n\nexport function unauthorized(): never {\n  if (!process.env.__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS) {\n    throw new Error(\n      `\\`unauthorized()\\` is experimental and only allowed to be used when \\`experimental.authInterrupts\\` is enabled.`\n    )\n  }\n\n  const error = new Error(DIGEST) as HTTPAccessFallbackError\n  ;(error as HTTPAccessFallbackError).digest = DIGEST\n  throw error\n}\n","const REACT_POSTPONE_TYPE: symbol = Symbol.for('react.postpone')\n\nexport function isPostpone(error: any): boolean {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    error.$$typeof === REACT_POSTPONE_TYPE\n  )\n}\n","import {\n  isHTTPAccessFallbackError,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\nimport { isRedirectError, type RedirectError } from './redirect-error'\n\n/**\n * Returns true if the error is a navigation signal error. These errors are\n * thrown by user code to perform navigation operations and interrupt the React\n * render.\n */\nexport function isNextRouterError(\n  error: unknown\n): error is RedirectError | HTTPAccessFallbackError {\n  return isRedirectError(error) || isHTTPAccessFallbackError(error)\n}\n","import { isHangingPromiseRejectionError } from '../../server/dynamic-rendering-utils'\nimport { isPostpone } from '../../server/lib/router-utils/is-postpone'\nimport { isBailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'\nimport { isNextRouterError } from './is-next-router-error'\nimport {\n  isDynamicPostpone,\n  isPrerenderInterruptedError,\n} from '../../server/app-render/dynamic-rendering'\nimport { isDynamicServerError } from './hooks-server-context'\n\nexport function unstable_rethrow(error: unknown): void {\n  if (\n    isNextRouterError(error) ||\n    isBailoutToCSRError(error) ||\n    isDynamicServerError(error) ||\n    isDynamicPostpone(error) ||\n    isPostpone(error) ||\n    isHangingPromiseRejectionError(error) ||\n    isPrerenderInterruptedError(error)\n  ) {\n    throw error\n  }\n\n  if (error instanceof Error && 'cause' in error) {\n    unstable_rethrow(error.cause)\n  }\n}\n","/**\n * This function should be used to rethrow internal Next.js errors so that they can be handled by the framework.\n * When wrapping an API that uses errors to interrupt control flow, you should use this function before you do any error handling.\n * This function will rethrow the error if it is a Next.js error so it can be handled, otherwise it will do nothing.\n *\n * Read more: [Next.js Docs: `unstable_rethrow`](https://nextjs.org/docs/app/api-reference/functions/unstable_rethrow)\n */\nexport const unstable_rethrow =\n  typeof window === 'undefined'\n    ? (\n        require('./unstable-rethrow.server') as typeof import('./unstable-rethrow.server')\n      ).unstable_rethrow\n    : (\n        require('./unstable-rethrow.browser') as typeof import('./unstable-rethrow.browser')\n      ).unstable_rethrow\n","import { ReadonlyURLSearchParams } from './readonly-url-search-params'\n\nexport function unstable_isUnrecognizedActionError(): boolean {\n  throw new Error(\n    '`unstable_isUnrecognizedActionError` can only be used on the client.'\n  )\n}\n\nexport { redirect, permanentRedirect } from './redirect'\nexport { RedirectType } from './redirect-error'\nexport { notFound } from './not-found'\nexport { forbidden } from './forbidden'\nexport { unauthorized } from './unauthorized'\nexport { unstable_rethrow } from './unstable-rethrow'\nexport { ReadonlyURLSearchParams }\n","export * from '../client/components/navigation.react-server'\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminViewAsBanner = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminViewAsBanner() from the server but AdminViewAsBanner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/admin/src/components/view-as/admin-banner.tsx\",\n    \"AdminViewAsBanner\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminFloatingTools = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminFloatingTools() from the server but AdminFloatingTools is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/admin/src/components/view-as/floating-tools.tsx\",\n    \"AdminFloatingTools\",\n);\n","/**\n * View-As Layout\n *\n * Root layout for admin view-as mode.\n * Verifies active support session and wraps with admin UI.\n */\n\nimport { notFound, redirect } from \"next/navigation\";\nimport { requireActiveSupportSession, getCurrentSession } from \"@/lib/admin-context\";\nimport { AdminViewAsBanner } from \"@/components/view-as/admin-banner\";\nimport { AdminFloatingTools } from \"@/components/view-as/floating-tools\";\n\nexport default async function ViewAsLayout({\n\tchildren,\n\tparams,\n}: {\n\tchildren: React.ReactNode;\n\tparams: Promise<{ companyId: string }>;\n}) {\n\tconst { companyId } = await params;\n\n\t// Verify active support session\n\ttry {\n\t\tconst session = await requireActiveSupportSession();\n\n\t\t// Verify we're viewing the correct company\n\t\tif (session.companyId !== companyId) {\n\t\t\tredirect(`/admin/dashboard/view-as/${session.companyId}`);\n\t\t}\n\n\t\t// Get full session details\n\t\tconst sessionDetails = await getCurrentSession();\n\t\tif (!sessionDetails) {\n\t\t\tredirect(\"/admin/dashboard/work/companies\");\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"relative min-h-screen\">\n\t\t\t\t{/* Admin banner at top */}\n\t\t\t\t<AdminViewAsBanner session={sessionDetails} companyId={companyId} />\n\n\t\t\t\t{/* Customer dashboard content */}\n\t\t\t\t<div className=\"pt-16\">{/* Offset for fixed banner */}{children}</div>\n\n\t\t\t\t{/* Floating admin toolbox */}\n\t\t\t\t<AdminFloatingTools companyId={companyId} sessionId={sessionDetails.id} />\n\t\t\t</div>\n\t\t);\n\t} catch (error) {\n\t\t// No active session or session expired\n\t\tredirect(\"/admin/dashboard/work/companies\");\n\t}\n}\n"],"names":["RequestCookies","ResponseCookies","stringifyCookie","ReadonlyURLSearchParams","ReadonlyURLSearchParamsError","Error","constructor","URLSearchParams","append","delete","set","sort","RedirectStatusCode","REDIRECT_ERROR_CODE","RedirectType","isRedirectError","error","digest","split","errorCode","type","destination","slice","join","status","at","statusCode","Number","isNaN","getRedirectError","getRedirectStatusCodeFromError","getRedirectTypeFromError","getURLFromRedirectError","permanentRedirect","redirect","actionAsyncStorage","window","require","undefined","url","TemporaryRedirect","getStore","isAction","push","replace","PermanentRedirect","HTTPAccessErrorStatus","HTTP_ERROR_FALLBACK_ERROR_CODE","getAccessFallbackErrorTypeByStatus","getAccessFallbackHTTPStatus","isHTTPAccessFallbackError","NOT_FOUND","FORBIDDEN","UNAUTHORIZED","ALLOWED_CODES","Set","Object","values","prefix","httpStatus","has","notFound","DIGEST","forbidden","process","env","__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS","unauthorized","isPostpone","REACT_POSTPONE_TYPE","Symbol","for","$$typeof","isNextRouterError","unstable_rethrow","isBailoutToCSRError","isDynamicServerError","isDynamicPostpone","isHangingPromiseRejectionError","isPrerenderInterruptedError","cause","unstable_isUnrecognizedActionError"],"mappings":"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","ignoreList":[0,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}