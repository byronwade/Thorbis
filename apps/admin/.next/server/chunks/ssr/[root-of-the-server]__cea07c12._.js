module.exports=[25841,(a,b,c)=>{"use strict";b.exports=a.r(31294).vendored.contexts.HooksClientContext},62121,(a,b,c)=>{"use strict";b.exports=a.r(31294).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},87239,(a,b,c)=>{"use strict";b.exports=a.r(31294).vendored["react-ssr"].ReactServerDOMTurbopackClient},34760,(a,b,c)=>{"use strict";b.exports=a.r(31294).vendored.contexts.AppRouterContext},3988,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},7343,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73354,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},96157,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(3988)._(a.r(47473)),g=a.r(73354),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},24861,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(47473),e=a.r(7343),f=a.r(96157);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},80637,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},19895,a=>{"use strict";let b=(0,a.i(3431).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],19895)},51813,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(24861),g=a.r(80637),h=a.r(87239)},298,a=>{"use strict";let b=(0,a.i(3431).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],298)},90782,a=>{"use strict";let b=(0,a.i(3431).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],90782)},66153,a=>{"use strict";let b=(0,a.i(3431).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],66153)},25434,a=>{"use strict";a.i(56120),a.s([])},28952,a=>{"use strict";let b=(0,a.i(3431).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);a.s(["MessageSquare",()=>b],28952)},24126,a=>{"use strict";let b=(0,a.i(3431).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],24126)},29891,a=>{"use strict";a.i(56120),a.s([])},86802,a=>{"use strict";a.i(56120),a.s([])},4741,a=>{"use strict";a.i(56120),a.s([])},41290,a=>{"use strict";var b=a.i(45139),c=a.i(47473),d=a.i(78279);a.i(29891);var e=a.i(18170);a.i(25434);var f=a.i(86990),g=a.i(298),h=a.i(24126),i=a.i(28952);let j=(0,a.i(3431).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var k=a.i(51813),l=(0,k.createServerReference)("606de25abb4916d6566917712865287e7e8ed54596",k.callServer,void 0,k.findSourceMapURL,"endSupportSession"),m=a.i(56916);function n({session:a,companyId:k}){let n,o,p,q=(0,d.useRouter)(),[r,s]=(0,c.useState)(0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!a.expires_at)return;let b=()=>{let b=Math.max(0,new Date(a.expires_at).getTime()-Date.now());s(b),0===b&&(m.toast.error("Support session has expired"),q.push("/admin/dashboard/work/companies"))};b();let c=setInterval(b,1e3);return()=>clearInterval(c)},[a.expires_at,q]);let x=async()=>{w(!0);try{let b=await l(a.id,"admin");b.error?m.toast.error(b.error):(m.toast.success("Support session ended"),q.push("/admin/dashboard/work/companies"))}catch(a){m.toast.error("Failed to end session")}finally{w(!1)}};return(0,b.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.Badge,{variant:"secondary",className:"bg-white/20 text-white hover:bg-white/30",children:"View-As Mode"}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Company:"}),(0,b.jsxs)("span",{className:"font-mono",children:[k.slice(0,8),"..."]})]}),a.ticket_id&&(0,b.jsxs)("div",{className:"hidden lg:flex items-center gap-2 text-sm",children:[(0,b.jsx)(i.MessageSquare,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["Ticket #",a.ticket_id.slice(0,8)]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",className:"h-6 px-2 text-white hover:bg-white/20",asChild:!0,children:(0,b.jsx)("a",{href:`/admin/dashboard/work/support/${a.ticket_id}`,target:"_blank",children:(0,b.jsx)(j,{className:"h-3 w-3"})})})]})]}),(0,b.jsxs)("div",{className:`flex items-center gap-2 text-sm font-mono ${(n=r/1e3/60)<=5?"text-red-600":n<=15?"text-yellow-600":"text-green-600"}`,children:[(0,b.jsx)(h.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-bold",children:(o=Math.floor(r/1e3/60),p=Math.floor(r/1e3%60),`${o}:${p.toString().padStart(2,"0")}`)})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",onClick:x,disabled:v,children:[(0,b.jsx)(g.X,{className:"h-4 w-4 mr-1"}),"End Session"]})})]})})})}a.s(["AdminViewAsBanner",()=>n],41290)},99901,a=>{"use strict";var b=a.i(45139),c=a.i(47473);a.i(29891);var d=a.i(18170);a.i(4741);var e=a.i(47421);a.i(86802);var f=a.i(45250),g=a.i(90782),h=a.i(66153),i=a.i(3431);let j=(0,i.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var k=a.i(19895);let l=(0,i.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),m=(0,i.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var n=a.i(78279);function o({companyId:a,sessionId:i}){let[o,p]=(0,c.useState)(!1);(0,n.usePathname)();let q=[{icon:m,label:"View Audit Trail",action:"audit",description:"View all actions for this session"},{icon:l,label:"Export Data",action:"export",description:"Export current view as CSV"},{icon:k.FileText,label:"View Session Log",action:"log",description:"See detailed session activity"}];return(0,b.jsx)("div",{className:"fixed bottom-6 right-6 z-40",children:(0,b.jsxs)(e.Card,{className:"w-80 shadow-xl border-orange-200 dark:border-orange-800",children:[(0,b.jsx)(e.CardHeader,{className:"pb-3 cursor-pointer",onClick:()=>p(!o),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j,{className:"h-5 w-5 text-orange-600"}),(0,b.jsx)(e.CardTitle,{className:"text-sm",children:"Admin Tools"})]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:o?(0,b.jsx)(h.ChevronDown,{className:"h-4 w-4"}):(0,b.jsx)(g.ChevronUp,{className:"h-4 w-4"})})]})}),o&&(0,b.jsx)(e.CardContent,{className:"pt-0",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Session Tools"}),q.map(a=>{let c=a.icon;return(0,b.jsx)(f.TooltipProvider,{children:(0,b.jsxs)(f.Tooltip,{children:[(0,b.jsx)(f.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>(a=>{switch(a){case"audit":window.open(`/admin/dashboard/audit-trail?session=${i}`,"_blank");break;case"export":alert("Export functionality coming soon");break;case"log":window.open(`/admin/dashboard/sessions/${i}`,"_blank");break;default:console.log("Unknown action:",a)}})(a.action),children:[(0,b.jsx)(c,{className:"h-4 w-4"}),a.label]})}),(0,b.jsx)(f.TooltipContent,{children:(0,b.jsx)("p",{children:a.description})})]})},a.action)}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Session ID: ",i.slice(0,8),"..."]}),(0,b.jsxs)("div",{children:["Company ID: ",a.slice(0,8),"..."]})]})})]})})]})})}a.s(["AdminFloatingTools",()=>o],99901)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cea07c12._.js.map