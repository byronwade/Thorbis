{"version":3,"sources":["turbopack:///[project]/apps/admin/src/components/communication/admin-unified-inbox.tsx","turbopack:///[project]/apps/admin/src/components/communication/admin-email-reply-composer.tsx","turbopack:///[project]/apps/admin/src/components/ui/scroll-area.tsx","turbopack:///[project]/node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/isToday.js","turbopack:///[project]/node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/subDays.js","turbopack:///[project]/apps/admin/src/components/communication/admin-sms-conversation.tsx","turbopack:///[project]/apps/admin/src/components/communication/admin-sms-input.tsx","turbopack:///[project]/apps/admin/src/lib/stores/admin-communication-store.ts","turbopack:///[project]/apps/admin/src/components/communication/admin-sms-panel.tsx","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/paperclip.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/smile.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/link.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/reply-all.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/reply.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/list-ordered.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/image.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/check-check.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/forward.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/underline.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/italic.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/list.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/voicemail.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/bold.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/star.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/message-square-text.ts","turbopack:///[project]/node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/isYesterday.js","turbopack:///[project]/node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/constructNow.js"],"sourcesContent":["\"use client\";\n\n/**\n * AdminUnifiedInbox - Platform-wide communication inbox\n *\n * Shows all communications across all companies with filtering,\n * search, and detail view. Matches web dashboard patterns.\n */\n\nimport { useState, useCallback } from \"react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tArchive,\n\tArrowLeft,\n\tBuilding2,\n\tForward,\n\tMail,\n\tMessageSquare,\n\tMoreHorizontal,\n\tPenSquare,\n\tPhone,\n\tRefreshCw,\n\tReply,\n\tReplyAll,\n\tSearch,\n\tStar,\n\tTicket,\n\tTrash2,\n\tVoicemail,\n\tX,\n\tPanelLeft,\n} from \"lucide-react\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useSidebar } from \"@/components/ui/sidebar\";\nimport type { AdminCommunication } from \"@/types/entities\";\nimport { AdminEmailReplyComposer, type EmailReplyMode } from \"./admin-email-reply-composer\";\nimport { AdminSmsPanel } from \"./admin-sms-panel\";\n\n/**\n * Extract initials from email or name\n */\nconst getInitials = (email?: string): string => {\n\tif (!email) return \"?\";\n\n\t// Extract the part before @ symbol\n\tconst localPart = email.split(\"@\")[0];\n\n\t// If it contains a dot, assume first.last format\n\tif (localPart.includes(\".\")) {\n\t\tconst parts = localPart.split(\".\");\n\t\treturn parts\n\t\t\t.map((part) => part[0])\n\t\t\t.join(\"\")\n\t\t\t.toUpperCase()\n\t\t\t.slice(0, 2);\n\t}\n\n\t// Otherwise, take first two characters\n\treturn localPart.substring(0, 2).toUpperCase();\n};\n\ntype CommunicationType = \"all\" | \"email\" | \"sms\" | \"call\" | \"voicemail\" | \"ticket\";\n\ntype AdminUnifiedInboxProps = {\n\tcommunications: AdminCommunication[];\n\tonRefresh?: () => void;\n};\n\nconst TYPE_CONFIG: Record<string, { icon: typeof Mail; color: string; bg: string; label: string }> = {\n\temail: { icon: Mail, color: \"text-blue-500\", bg: \"bg-blue-500/10\", label: \"Email\" },\n\tsms: { icon: MessageSquare, color: \"text-green-500\", bg: \"bg-green-500/10\", label: \"SMS\" },\n\tcall: { icon: Phone, color: \"text-purple-500\", bg: \"bg-purple-500/10\", label: \"Call\" },\n\tvoicemail: { icon: Voicemail, color: \"text-orange-500\", bg: \"bg-orange-500/10\", label: \"Voicemail\" },\n\tticket: { icon: Ticket, color: \"text-amber-500\", bg: \"bg-amber-500/10\", label: \"Ticket\" },\n};\n\nconst TYPE_FILTERS: { type: CommunicationType; label: string }[] = [\n\t{ type: \"all\", label: \"All\" },\n\t{ type: \"email\", label: \"Email\" },\n\t{ type: \"sms\", label: \"SMS\" },\n\t{ type: \"call\", label: \"Calls\" },\n\t{ type: \"voicemail\", label: \"Voicemail\" },\n\t{ type: \"ticket\", label: \"Tickets\" },\n];\n\nexport function AdminUnifiedInbox({ communications, onRefresh }: AdminUnifiedInboxProps) {\n\tconst { toggleSidebar } = useSidebar();\n\tconst [searchInput, setSearchInput] = useState(\"\");\n\tconst [typeFilter, setTypeFilter] = useState<CommunicationType>(\"all\");\n\tconst [selectedCommunication, setSelectedCommunication] = useState<AdminCommunication | null>(null);\n\tconst [refreshing, setRefreshing] = useState(false);\n\tconst [replyMode, setReplyMode] = useState<EmailReplyMode | null>(null);\n\n\t// Filter communications\n\tconst filteredCommunications = communications.filter((comm) => {\n\t\t// Type filter\n\t\tif (typeFilter !== \"all\" && comm.type !== typeFilter) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Search filter\n\t\tif (searchInput) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tconst matchesSubject = comm.subject?.toLowerCase().includes(query);\n\t\t\tconst matchesBody = comm.preview?.toLowerCase().includes(query);\n\t\t\tconst matchesFrom = comm.from?.toLowerCase().includes(query);\n\t\t\tconst matchesTo = comm.to?.toLowerCase().includes(query);\n\t\t\tconst matchesCompany = comm.companyName?.toLowerCase().includes(query);\n\t\t\treturn matchesSubject || matchesBody || matchesFrom || matchesTo || matchesCompany;\n\t\t}\n\n\t\treturn true;\n\t});\n\n\t// Count by type\n\tconst typeCounts = communications.reduce((acc, comm) => {\n\t\tacc[comm.type] = (acc[comm.type] || 0) + 1;\n\t\treturn acc;\n\t}, {} as Record<string, number>);\n\n\tconst handleRefresh = useCallback(() => {\n\t\tsetRefreshing(true);\n\t\tonRefresh?.();\n\t\tsetTimeout(() => setRefreshing(false), 1000);\n\t}, [onRefresh]);\n\n\tconst handleSelectCommunication = useCallback((comm: AdminCommunication) => {\n\t\tsetSelectedCommunication(comm);\n\t\tsetReplyMode(null); // Close reply when switching messages\n\t}, []);\n\n\tconst handleCloseCommunication = useCallback(() => {\n\t\tsetSelectedCommunication(null);\n\t\tsetReplyMode(null);\n\t}, []);\n\n\tconst handleCloseReply = useCallback(() => {\n\t\tsetReplyMode(null);\n\t}, []);\n\n\tconst handleReplySent = useCallback(() => {\n\t\tsetReplyMode(null);\n\t\t// Could refresh the list here\n\t}, []);\n\n\tconst getTypeConfig = (type: string) => {\n\t\treturn TYPE_CONFIG[type] || TYPE_CONFIG.email;\n\t};\n\n\tconst formatTime = (dateString: string) => {\n\t\tconst date = new Date(dateString);\n\t\treturn date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n\t};\n\n\tconst formatDate = (dateString: string) => {\n\t\tconst date = new Date(dateString);\n\t\tconst now = new Date();\n\t\tconst diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n\n\t\tif (diffDays === 0) return \"Today\";\n\t\tif (diffDays === 1) return \"Yesterday\";\n\t\tif (diffDays < 7) return date.toLocaleDateString([], { weekday: \"short\" });\n\t\treturn date.toLocaleDateString([], { month: \"short\", day: \"numeric\" });\n\t};\n\n\t// Mobile: show list when no communication selected\n\tconst showListOnMobile = !selectedCommunication;\n\tconst showDetailOnMobile = selectedCommunication;\n\n\treturn (\n\t\t<div className=\"flex h-full w-full flex-col overflow-hidden bg-sidebar\">\n\t\t\t<div className=\"flex flex-1 overflow-hidden min-h-0 md:gap-2\">\n\t\t\t\t{/* Left Panel - Communications List */}\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"bg-card mb-1 shadow-sm flex flex-col overflow-hidden\",\n\t\t\t\t\t\t\"w-full h-full\",\n\t\t\t\t\t\t\"md:w-[400px] lg:w-[480px] md:rounded-tr-2xl\",\n\t\t\t\t\t\tshowListOnMobile ? \"flex\" : \"hidden md:flex\"\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"w-full h-full flex flex-col\">\n\t\t\t\t\t\t{/* Header with search and filters */}\n\t\t\t\t\t\t<div className=\"sticky top-0 z-15 flex flex-col gap-2 p-2 pb-0 transition-colors bg-card\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-12 gap-2 mt-1\">\n\t\t\t\t\t\t\t\t<div className=\"col-span-12 flex gap-2\">\n\t\t\t\t\t\t\t\t\t{/* Sidebar toggle */}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\tonClick={toggleSidebar}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8 shrink-0\"\n\t\t\t\t\t\t\t\t\t\ttitle=\"Toggle sidebar\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PanelLeft className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t{/* Search input */}\n\t\t\t\t\t\t\t\t\t<div className=\"relative flex-1\">\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search communications...\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setSearchInput(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 md:h-8 pl-9 pr-8 text-base md:text-sm border-input bg-background\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t{searchInput && (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setSearchInput(\"\")}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{/* Refresh button */}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t\tdisabled={refreshing}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\ttitle=\"Refresh\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<RefreshCw\n\t\t\t\t\t\t\t\t\t\t\tclassName={`h-5 w-5 md:h-4 md:w-4 text-muted-foreground ${refreshing ? \"animate-spin\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Type filter buttons */}\n\t\t\t\t\t\t\t<div className=\"flex gap-1 overflow-x-auto pb-2 scrollbar-none\">\n\t\t\t\t\t\t\t\t{TYPE_FILTERS.map(({ type, label }) => {\n\t\t\t\t\t\t\t\t\tconst count = type === \"all\" ? communications.length : (typeCounts[type] || 0);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tkey={type}\n\t\t\t\t\t\t\t\t\t\t\tvariant={typeFilter === type ? \"default\" : \"ghost\"}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setTypeFilter(type)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-7 gap-1 whitespace-nowrap text-xs shrink-0\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t\t{count > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={typeFilter === type ? \"secondary\" : \"outline\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-0.5 h-4 px-1 text-[10px]\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{count}\n\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Progress bar */}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"bg-primary relative z-5 h-0.5 w-full transition-opacity\",\n\t\t\t\t\t\t\t\trefreshing ? \"opacity-100 animate-pulse\" : \"opacity-0\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* Communications List */}\n\t\t\t\t\t\t<div className=\"relative z-1 flex-1 overflow-y-auto pt-0 min-h-0\">\n\t\t\t\t\t\t\t<div className=\"flex h-full w-full\">\n\t\t\t\t\t\t\t\t<div className=\"flex flex-1 flex-col\">\n\t\t\t\t\t\t\t\t\t{filteredCommunications.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"min-h-[200px] px-2\">\n\t\t\t\t\t\t\t\t\t\t\t{filteredCommunications.map((communication) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst isSelected = selectedCommunication?.id === communication.id;\n\t\t\t\t\t\t\t\t\t\t\t\tconst isUnread = communication.status === \"unread\" || communication.status === \"new\";\n\t\t\t\t\t\t\t\t\t\t\t\tconst typeConfig = getTypeConfig(communication.type);\n\t\t\t\t\t\t\t\t\t\t\t\tconst TypeIcon = typeConfig.icon;\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={communication.id} className=\"select-none md:my-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"hover:bg-accent group flex cursor-pointer flex-col items-start rounded-lg py-2 text-left text-sm transition-all hover:opacity-100 relative\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected ? \"bg-accent opacity-100\" : \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisUnread ? \"opacity-100\" : \"opacity-60\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleSelectCommunication(communication)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Hover Action Toolbar */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute right-2 z-25 flex -translate-y-1/2 items-center gap-1 rounded-xl border bg-popover p-1 opacity-0 shadow-sm group-hover:opacity-100 top-[-1] transition-opacity duration-200\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 overflow-visible p-0 hover:bg-accent group/star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-4 w-4 text-muted-foreground transition-colors group-hover/star:text-yellow-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-6 w-6 p-0 hover:bg-accent group/archive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Archive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Archive className=\"h-4 w-4 text-muted-foreground transition-colors group-hover/archive:text-blue-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Communication Card Content */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"relative flex w-full items-center justify-between gap-4 px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Avatar with type badge */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-8 w-8 shrink-0 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback className=\"bg-primary/10 text-primary font-bold text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getInitials(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? communication.from\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: communication.to\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"absolute -bottom-1 -right-1 rounded-full p-0.5 border border-background\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeConfig.bg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TypeIcon className={cn(\"h-2.5 w-2.5\", typeConfig.color)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex w-full justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex w-full flex-row items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-row items-center gap-[4px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-bold text-md flex items-baseline gap-1 group-hover:opacity-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"line-clamp-1 overflow-hidden text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.direction === \"outbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? communication.to || \"Unknown recipient\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: communication.from || \"Unknown sender\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isUnread && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-0.5 size-2 rounded-full bg-primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground text-nowrap text-xs font-normal opacity-70 transition-opacity group-hover:opacity-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(communication.createdAt)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-1 line-clamp-1 min-w-0 overflow-hidden text-sm text-muted-foreground flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.subject || communication.preview || \"No content\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Company badge */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.companyName && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"px-1.5 py-0.5 rounded text-[10px] bg-muted text-muted-foreground flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-2.5 w-2.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{communication.companyName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-center p-8 h-full\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Mail className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">No communications found</p>\n\t\t\t\t\t\t\t\t\t\t\t\t{searchInput && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTry adjusting your search\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Right Panel - Communication Detail */}\n\t\t\t\t{selectedCommunication ? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"bg-card mb-1 shadow-sm flex flex-col min-w-0 overflow-hidden\",\n\t\t\t\t\t\t\t\"w-full h-full\",\n\t\t\t\t\t\t\t\"md:rounded-tl-2xl md:flex-1\",\n\t\t\t\t\t\t\tshowDetailOnMobile ? \"flex\" : \"hidden md:flex\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative flex-1 min-h-0 flex flex-col\">\n\t\t\t\t\t\t\t<div className=\"bg-card relative flex flex-col overflow-hidden transition-all duration-300 h-full flex-1 min-h-0\">\n\t\t\t\t\t\t\t\t{/* Communication Header Toolbar */}\n\t\t\t\t\t\t\t\t<div className=\"sticky top-0 z-15 flex shrink-0 items-center justify-between gap-1.5 p-2 pb-0 transition-colors bg-card\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-1 items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t{/* Back button (mobile) / Close button (desktop) */}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCloseCommunication}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Back to list\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ArrowLeft className=\"h-5 w-5 md:hidden text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-4 w-4 hidden md:block text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t{/* Reply buttons */}\n\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.type === \"email\" || selectedCommunication.type === \"sms\" || selectedCommunication.type === \"ticket\") && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={replyMode === \"reply\" ? \"default\" : \"ghost\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-auto md:px-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Reply\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setReplyMode(replyMode === \"reply\" ? null : \"reply\")}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Reply className=\"h-5 w-5 md:h-4 md:w-4 md:mr-1.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm leading-none font-medium hidden md:inline\">Reply</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8\" title=\"More reply options\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReplyAll className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-40\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"reply\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Reply className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReply\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"reply-all\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReplyAll className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReply All\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem onClick={() => setReplyMode(\"forward\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Forward className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tForward\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{/* Star */}\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8 group/star\" title=\"Star\">\n\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground transition-colors group-hover/star:text-yellow-500\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{/* Archive */}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 p-0 md:h-8 md:w-8\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Archive\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Archive className=\"h-5 w-5 md:h-4 md:w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{/* More menu */}\n\t\t\t\t\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-10 w-10 p-0 md:h-8 md:w-8\" title=\"More\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MoreHorizontal className=\"h-5 w-5 md:h-4 md:w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\" className=\"w-48\">\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem className=\"text-destructive focus:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Communication Content */}\n\t\t\t\t\t\t\t\t<div className=\"flex min-h-0 flex-1 flex-col overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t{/* SMS Panel - Full iPhone-style view */}\n\t\t\t\t\t\t\t\t\t{selectedCommunication.type === \"sms\" ? (\n\t\t\t\t\t\t\t\t\t\t<AdminSmsPanel\n\t\t\t\t\t\t\t\t\t\t\tcommunication={selectedCommunication}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t/* Email/Call/Ticket/Voicemail View */\n\t\t\t\t\t\t\t\t\t\t<div className=\"relative overflow-hidden flex-1 h-full min-h-0 flex flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-b border-border/50 px-4 py-4 space-y-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"text-base font-semibold text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.subject || \"No Subject\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</h1>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"h-9 w-9 shrink-0 rounded-md cursor-pointer\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarFallback className=\"bg-muted text-muted-foreground font-semibold text-sm rounded-md\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? selectedCommunication.from?.[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: selectedCommunication.to?.[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)?.toUpperCase() || \"?\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-sm text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? selectedCommunication.from || \"Unknown\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: selectedCommunication.to || \"Unknown\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(selectedCommunication.status === \"unread\" ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCommunication.status === \"new\") && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.direction === \"inbound\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `from ${selectedCommunication.from?.split(\"@\")[0] || \"unknown\"}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `to ${selectedCommunication.to?.split(\"@\")[0] || \"unknown\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.companyName && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Building2 className=\"h-2.5 w-2.5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.companyName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(selectedCommunication.createdAt)} at{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(selectedCommunication.createdAt)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* Type and status badges */}\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.type && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getTypeConfig(selectedCommunication.type).label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.status && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Message Content */}\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 px-4 py-4 overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"prose prose-sm max-w-none dark:prose-invert\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"whitespace-pre-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedCommunication.preview || \"No content\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{/* Reply Composer */}\n\t\t\t\t\t\t\t\t\t\t\t{replyMode && (selectedCommunication.type === \"email\" || selectedCommunication.type === \"ticket\") && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-t border-border/50 p-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AdminEmailReplyComposer\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode={replyMode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedMessage={selectedCommunication}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={handleCloseReply}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSent={handleReplySent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"bg-card mb-1 shadow-sm hidden md:flex md:flex-col md:items-center md:justify-center md:rounded-tl-2xl md:flex-1\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Mail className=\"h-16 w-16 text-muted-foreground mb-4\" />\n\t\t\t\t\t\t<h3 className=\"text-lg font-semibold\">No communication selected</h3>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\tSelect a communication from the list to view details\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { AdminCommunication } from \"@/types/entities\";\nimport { cn } from \"@/lib/utils\";\nimport {\n\tBold,\n\tCalendar,\n\tChevronDown,\n\tChevronUp,\n\tClock,\n\tImageIcon,\n\tItalic,\n\tLink as LinkIcon,\n\tList,\n\tListOrdered,\n\tLoader2,\n\tMoreHorizontal,\n\tPaperclip,\n\tSend,\n\tSparkles,\n\tTrash2,\n\tUnderline,\n\tX,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nexport type EmailReplyMode = \"reply\" | \"reply-all\" | \"forward\";\n\ntype EmailAttachment = {\n\tfilename: string;\n\tcontent: string;\n\tcontentType?: string;\n\tsize: number;\n};\n\ntype Recipient = {\n\tid: string;\n\tname: string;\n\temail: string;\n\ttype: \"company\" | \"user\" | \"custom\";\n};\n\nconst templateDefinitions = [\n\t{\n\t\tid: \"follow-up\",\n\t\tlabel: \"Friendly follow-up\",\n\t\tbody: \"Hi there,\\n\\nJust checking in - let me know if you have any questions or if you'd like to see anything else from my side.\\n\\nBest,\",\n\t},\n\t{\n\t\tid: \"thank-you\",\n\t\tlabel: \"Thank you note\",\n\t\tbody: \"Hi there,\\n\\nThanks again for your patience while we sorted this out. Let me know if there's anything else I can help with.\\n\\nWarm regards,\",\n\t},\n\t{\n\t\tid: \"next-steps\",\n\t\tlabel: \"Outline next steps\",\n\t\tbody: \"Hi there,\\n\\nI've outlined the next steps:\\n1. Review the details above.\\n2. Confirm when you'd like to move forward.\\n3. I'll lock everything in once you reply.\\n\\nLet me know if you want to adjust anything.\",\n\t},\n\t{\n\t\tid: \"resolution\",\n\t\tlabel: \"Issue resolved\",\n\t\tbody: \"Hi there,\\n\\nI wanted to let you know that we've resolved the issue you reported. Here's a summary of what was done:\\n\\n[Summary]\\n\\nPlease let us know if you experience any further issues.\\n\\nBest regards,\",\n\t},\n];\n\nconst signatureOptions = [\n\t{ id: \"none\", label: \"No signature\", value: \"\" },\n\t{ id: \"support\", label: \"Stratos Support\", value: \"\\n\\nThanks,\\nStratos Support Team\" },\n\t{ id: \"admin\", label: \"Admin Team\", value: \"\\n\\nBest regards,\\nStratos Admin\" },\n];\n\ninterface AdminEmailReplyComposerProps {\n\tmode: EmailReplyMode;\n\tselectedMessage: AdminCommunication | null;\n\tonClose: () => void;\n\tonSent?: (data: Record<string, unknown>) => void;\n\tclassName?: string;\n}\n\nexport function AdminEmailReplyComposer({ mode, selectedMessage, onClose, onSent, className }: AdminEmailReplyComposerProps) {\n\tconst { toast: toastApi } = useToast();\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null);\n\tconst fileInputRef = useRef<HTMLInputElement>(null);\n\tconst [body, setBody] = useState(\"\");\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst [isSending, setIsSending] = useState(false);\n\tconst [signatureId, setSignatureId] = useState(\"support\");\n\tconst [showQuote, setShowQuote] = useState(false);\n\tconst [recipients, setRecipients] = useState<Recipient[]>([]);\n\tconst [ccRecipients, setCcRecipients] = useState<Recipient[]>([]);\n\tconst [bccRecipients, setBccRecipients] = useState<Recipient[]>([]);\n\tconst [showCc, setShowCc] = useState(false);\n\tconst [showBcc, setShowBcc] = useState(false);\n\tconst [subject, setSubject] = useState(\"\");\n\tconst [attachments, setAttachments] = useState<EmailAttachment[]>([]);\n\tconst [newRecipientEmail, setNewRecipientEmail] = useState(\"\");\n\n\t// Schedule send state\n\tconst [scheduleOpen, setScheduleOpen] = useState(false);\n\tconst [scheduledDate, setScheduledDate] = useState<string>(\"\");\n\tconst [scheduledTime, setScheduledTime] = useState<string>(\"\");\n\n\t// Undo send state\n\tconst UNDO_SEND_DELAY = 5000;\n\tconst [isPendingSend, setIsPendingSend] = useState(false);\n\tconst [undoCountdown, setUndoCountdown] = useState(5);\n\tconst sendTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\tconst countdownIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n\tconst signature = useMemo(() => signatureOptions.find((opt) => opt.id === signatureId) ?? signatureOptions[0], [signatureId]);\n\n\t// Build default subject and initial recipients\n\tuseEffect(() => {\n\t\tif (!selectedMessage) return;\n\n\t\tconst base = selectedMessage.subject?.trim() || \"No subject\";\n\t\tconst prefix = mode === \"forward\" ? \"Fwd:\" : \"Re:\";\n\t\tconst newSubject = base.toLowerCase().startsWith(prefix.toLowerCase()) ? base : `${prefix} ${base}`;\n\t\tsetSubject(newSubject);\n\n\t\t// Set default recipient based on mode\n\t\tif (mode !== \"forward\" && selectedMessage.from) {\n\t\t\tconst recipient: Recipient = {\n\t\t\t\tid: `recipient-${selectedMessage.from}`,\n\t\t\t\tname: selectedMessage.userName || selectedMessage.companyName || selectedMessage.from,\n\t\t\t\temail: selectedMessage.from,\n\t\t\t\ttype: selectedMessage.companyId ? \"company\" : \"custom\",\n\t\t\t};\n\t\t\tsetRecipients([recipient]);\n\t\t}\n\t}, [mode, selectedMessage]);\n\n\t// Auto-resize textarea\n\tconst handleInput = useCallback(() => {\n\t\tconst textarea = textareaRef.current;\n\t\tif (textarea) {\n\t\t\ttextarea.style.height = \"auto\";\n\t\t\ttextarea.style.height = `${Math.min(textarea.scrollHeight, 200)}px`;\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\thandleInput();\n\t}, [body, handleInput]);\n\n\tuseEffect(() => {\n\t\tsetTimeout(() => textareaRef.current?.focus(), 100);\n\t}, []);\n\n\tconst applyTemplate = (templateId: string) => {\n\t\tconst template = templateDefinitions.find((t) => t.id === templateId);\n\t\tif (template) {\n\t\t\tsetBody(template.body);\n\t\t}\n\t};\n\n\t// Cancel the pending send\n\tconst cancelSend = useCallback(() => {\n\t\tif (sendTimeoutRef.current) {\n\t\t\tclearTimeout(sendTimeoutRef.current);\n\t\t\tsendTimeoutRef.current = null;\n\t\t}\n\t\tif (countdownIntervalRef.current) {\n\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\tcountdownIntervalRef.current = null;\n\t\t}\n\t\tsetIsPendingSend(false);\n\t\tsetUndoCountdown(5);\n\t\ttoastApi.info(\"Email cancelled\");\n\t}, [toastApi]);\n\n\t// Cleanup timeouts on unmount\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (sendTimeoutRef.current) clearTimeout(sendTimeoutRef.current);\n\t\t\tif (countdownIntervalRef.current) clearInterval(countdownIntervalRef.current);\n\t\t};\n\t}, []);\n\n\t// Schedule send presets\n\tconst getSchedulePreset = (preset: \"tomorrow_morning\" | \"tomorrow_afternoon\" | \"monday_morning\") => {\n\t\tconst now = new Date();\n\t\tlet date: Date;\n\n\t\tswitch (preset) {\n\t\t\tcase \"tomorrow_morning\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\tdate.setHours(8, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"tomorrow_afternoon\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\tdate.setHours(13, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"monday_morning\":\n\t\t\t\tdate = new Date(now);\n\t\t\t\tconst dayOfWeek = date.getDay();\n\t\t\t\tconst daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n\t\t\t\tdate.setDate(date.getDate() + daysUntilMonday);\n\t\t\t\tdate.setHours(8, 0, 0, 0);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn date;\n\t};\n\n\tconst handleScheduleSend = async (scheduledFor: Date) => {\n\t\tif (!selectedMessage) {\n\t\t\ttoastApi.error(\"Missing context\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (recipients.length === 0) {\n\t\t\ttoastApi.error(\"Add at least one recipient\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!body.trim()) {\n\t\t\ttoastApi.error(\"Please write a message\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (scheduledFor <= new Date()) {\n\t\t\ttoastApi.error(\"Schedule time must be in the future\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsSending(true);\n\n\t\t// Simulate scheduling\n\t\tsetTimeout(() => {\n\t\t\tconst formattedTime = scheduledFor.toLocaleString(\"en-US\", {\n\t\t\t\tweekday: \"short\",\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t\thour: \"numeric\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t});\n\t\t\ttoastApi.success(`Email scheduled - Will be sent ${formattedTime}`);\n\t\t\tonSent?.({});\n\t\t\tonClose();\n\t\t\tsetIsSending(false);\n\t\t\tsetScheduleOpen(false);\n\t\t}, 1000);\n\t};\n\n\tconst handleCustomSchedule = () => {\n\t\tif (!scheduledDate || !scheduledTime) {\n\t\t\ttoastApi.error(\"Please select both date and time\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst scheduledFor = new Date(`${scheduledDate}T${scheduledTime}`);\n\t\thandleScheduleSend(scheduledFor);\n\t};\n\n\tconst handleSend = async () => {\n\t\tif (!selectedMessage) {\n\t\t\ttoastApi.error(\"Missing context\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (recipients.length === 0) {\n\t\t\ttoastApi.error(\"Add at least one recipient\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!body.trim()) {\n\t\t\ttoastApi.error(\"Please write a message\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Start undo countdown\n\t\tsetIsPendingSend(true);\n\t\tsetUndoCountdown(5);\n\n\t\ttoastApi.loading(\"Sending email...\");\n\n\t\tlet countdown = 5;\n\t\tcountdownIntervalRef.current = setInterval(() => {\n\t\t\tcountdown--;\n\t\t\tsetUndoCountdown(countdown);\n\t\t\tif (countdown <= 0) {\n\t\t\t\tif (countdownIntervalRef.current) {\n\t\t\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\t\t\tcountdownIntervalRef.current = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, 1000);\n\n\t\tsendTimeoutRef.current = setTimeout(() => {\n\t\t\tif (countdownIntervalRef.current) {\n\t\t\t\tclearInterval(countdownIntervalRef.current);\n\t\t\t\tcountdownIntervalRef.current = null;\n\t\t\t}\n\t\t\t// Execute send\n\t\t\tsetIsSending(true);\n\t\t\tsetIsPendingSend(false);\n\n\t\t\t// Simulate sending\n\t\t\tsetTimeout(() => {\n\t\t\t\ttoastApi.success(\"Email sent successfully\");\n\t\t\t\tonSent?.({});\n\t\t\t\tonClose();\n\t\t\t\tsetIsSending(false);\n\t\t\t}, 500);\n\t\t}, UNDO_SEND_DELAY);\n\t};\n\n\tconst handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\tif (e.key === \"Enter\" && (e.metaKey || e.ctrlKey)) {\n\t\t\te.preventDefault();\n\t\t\thandleSend();\n\t\t}\n\t};\n\n\tconst handleFileSelect = useCallback(\n\t\tasync (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst files = e.target.files;\n\t\t\tif (!files || files.length === 0) return;\n\n\t\t\tconst maxSize = 10 * 1024 * 1024;\n\t\t\tconst newAttachments: EmailAttachment[] = [];\n\n\t\t\tfor (const file of Array.from(files)) {\n\t\t\t\tif (file.size > maxSize) {\n\t\t\t\t\ttoastApi.error(`File \"${file.name}\" is too large (max 10MB)`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tconst content = await new Promise<string>((resolve, reject) => {\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.onload = () => {\n\t\t\t\t\t\t\tconst base64 = (reader.result as string).split(\",\")[1];\n\t\t\t\t\t\t\tresolve(base64);\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.onerror = reject;\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t});\n\n\t\t\t\t\tnewAttachments.push({\n\t\t\t\t\t\tfilename: file.name,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tcontentType: file.type,\n\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\ttoastApi.error(`Failed to read file \"${file.name}\"`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newAttachments.length > 0) {\n\t\t\t\tsetAttachments((prev) => [...prev, ...newAttachments]);\n\t\t\t}\n\n\t\t\tif (fileInputRef.current) {\n\t\t\t\tfileInputRef.current.value = \"\";\n\t\t\t}\n\t\t},\n\t\t[toastApi]\n\t);\n\n\tconst removeAttachment = useCallback((filename: string) => {\n\t\tsetAttachments((prev) => prev.filter((a) => a.filename !== filename));\n\t}, []);\n\n\tconst formatFileSize = (bytes: number) => {\n\t\tif (bytes < 1024) return `${bytes} B`;\n\t\tif (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n\t\treturn `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n\t};\n\n\tconst addRecipient = (email: string) => {\n\t\tif (!email || !email.includes(\"@\")) return;\n\t\tif (recipients.some((r) => r.email.toLowerCase() === email.toLowerCase())) return;\n\n\t\tsetRecipients((prev) => [\n\t\t\t...prev,\n\t\t\t{\n\t\t\t\tid: `custom-${email}`,\n\t\t\t\tname: email,\n\t\t\t\temail,\n\t\t\t\ttype: \"custom\",\n\t\t\t},\n\t\t]);\n\t\tsetNewRecipientEmail(\"\");\n\t};\n\n\tconst removeRecipient = (email: string) => {\n\t\tsetRecipients((prev) => prev.filter((r) => r.email !== email));\n\t};\n\n\tconst quoteText = useMemo(() => {\n\t\tif (!selectedMessage) return \"\";\n\t\tconst fromName = selectedMessage.userName || selectedMessage.companyName || selectedMessage.from || \"Unknown\";\n\t\tconst date = new Date(selectedMessage.createdAt).toLocaleString(\"en-US\", {\n\t\t\tmonth: \"short\",\n\t\t\tday: \"numeric\",\n\t\t\thour: \"numeric\",\n\t\t\tminute: \"2-digit\",\n\t\t});\n\t\treturn `On ${date}, ${fromName} wrote:\\n${selectedMessage.preview || \"\"}`;\n\t}, [selectedMessage]);\n\n\t// Smart reply suggestions\n\tconst smartReplies = useMemo(() => {\n\t\tif (!selectedMessage?.preview && !selectedMessage?.subject) return [];\n\n\t\tconst content = `${selectedMessage.subject || \"\"} ${selectedMessage.preview || \"\"}`.toLowerCase();\n\t\tconst suggestions: string[] = [];\n\n\t\tif (content.includes(\"?\") || content.includes(\"when\") || content.includes(\"can you\")) {\n\t\t\tif (content.includes(\"schedule\") || content.includes(\"appointment\") || content.includes(\"when\")) {\n\t\t\t\tsuggestions.push(\"Yes, I can schedule that. What time works best for you?\");\n\t\t\t}\n\t\t\tif (content.includes(\"price\") || content.includes(\"cost\") || content.includes(\"quote\")) {\n\t\t\t\tsuggestions.push(\"I'll prepare a quote and send it over shortly.\");\n\t\t\t}\n\t\t}\n\n\t\tif (content.includes(\"thank\") || content.includes(\"thanks\")) {\n\t\t\tsuggestions.push(\"You're welcome! Let me know if you need anything else.\");\n\t\t}\n\n\t\tif (content.includes(\"urgent\") || content.includes(\"asap\")) {\n\t\t\tsuggestions.push(\"I understand the urgency. I'm on it right now.\");\n\t\t}\n\n\t\tif (content.includes(\"issue\") || content.includes(\"problem\") || content.includes(\"error\")) {\n\t\t\tsuggestions.push(\"I'll look into this and get back to you shortly.\");\n\t\t\tsuggestions.push(\"Can you provide more details about the issue?\");\n\t\t}\n\n\t\tif (suggestions.length === 0) {\n\t\t\tsuggestions.push(\"Thanks for reaching out. I'll get back to you shortly.\");\n\t\t\tsuggestions.push(\"Got it, thanks for the update.\");\n\t\t}\n\n\t\treturn suggestions.slice(0, 3);\n\t}, [selectedMessage]);\n\n\tconst applySmartReply = (suggestion: string) => {\n\t\tsetBody(suggestion);\n\t\ttextareaRef.current?.focus();\n\t};\n\n\tif (!selectedMessage) return null;\n\n\treturn (\n\t\t<TooltipProvider>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"w-full overflow-hidden rounded-xl border border-border bg-background shadow-sm transition-all duration-200\",\n\t\t\t\t\t\"focus-within:border-primary/50 focus-within:shadow-md\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{/* Collapsed Header */}\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\n\t\t\t\t\tclassName=\"flex w-full items-center justify-between gap-2 px-3 py-2 text-left hover:bg-muted/50 transition-colors\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex items-center gap-2 min-w-0 flex-1\">\n\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide shrink-0\">\n\t\t\t\t\t\t\t{mode === \"forward\" ? \"Forward\" : mode === \"reply-all\" ? \"Reply All\" : \"Reply\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"text-sm text-foreground truncate\">\n\t\t\t\t\t\t\t{recipients.length > 0 ? recipients.map((r) => r.name).join(\", \") : \"Add recipients...\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{isExpanded ? <ChevronUp className=\"h-4 w-4 text-muted-foreground shrink-0\" /> : <ChevronDown className=\"h-4 w-4 text-muted-foreground shrink-0\" />}\n\t\t\t\t</button>\n\n\t\t\t\t{/* Expanded Recipients/Subject */}\n\t\t\t\t{isExpanded && (\n\t\t\t\t\t<div className=\"border-t border-border/50 px-3 py-2 space-y-2 bg-muted/30\">\n\t\t\t\t\t\t<div className=\"flex items-start gap-2\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12 pt-2\">To:</span>\n\t\t\t\t\t\t\t<div className=\"flex-1 flex flex-wrap gap-1 items-center\">\n\t\t\t\t\t\t\t\t{recipients.map((r) => (\n\t\t\t\t\t\t\t\t\t<span key={r.id} className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full\">\n\t\t\t\t\t\t\t\t\t\t{r.name}\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => removeRecipient(r.email)} className=\"hover:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tvalue={newRecipientEmail}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewRecipientEmail(e.target.value)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" || e.key === \",\") {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\taddRecipient(newRecipientEmail.trim());\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonBlur={() => addRecipient(newRecipientEmail.trim())}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add email...\"\n\t\t\t\t\t\t\t\t\tclassName=\"flex-1 min-w-[120px] bg-transparent text-sm outline-none placeholder:text-muted-foreground\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-1 pt-1.5\">\n\t\t\t\t\t\t\t\t{!showCc && (\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowCc(true)} className=\"text-xs text-muted-foreground hover:text-foreground px-1.5 py-0.5 rounded hover:bg-muted transition-colors\">\n\t\t\t\t\t\t\t\t\t\tCc\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!showBcc && (\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowBcc(true)} className=\"text-xs text-muted-foreground hover:text-foreground px-1.5 py-0.5 rounded hover:bg-muted transition-colors\">\n\t\t\t\t\t\t\t\t\t\tBcc\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{showCc && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Cc:</span>\n\t\t\t\t\t\t\t\t<input type=\"email\" placeholder=\"Add Cc recipients...\" className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetShowCc(false);\n\t\t\t\t\t\t\t\t\t\tsetCcRecipients([]);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showBcc && (\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Bcc:</span>\n\t\t\t\t\t\t\t\t<input type=\"email\" placeholder=\"Add Bcc recipients...\" className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\" />\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetShowBcc(false);\n\t\t\t\t\t\t\t\t\t\tsetBccRecipients([]);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-muted-foreground hover:text-destructive\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<span className=\"text-xs font-medium text-muted-foreground w-12\">Subject:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={subject}\n\t\t\t\t\t\t\t\tonChange={(e) => setSubject(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"Subject\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Smart Reply Suggestions */}\n\t\t\t\t{smartReplies.length > 0 && !body && (\n\t\t\t\t\t<div className=\"px-3 py-2 border-b border-border/50\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-1.5 flex-wrap\">\n\t\t\t\t\t\t\t<Sparkles className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\n\t\t\t\t\t\t\t{smartReplies.map((suggestion, index) => (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => applySmartReply(suggestion)}\n\t\t\t\t\t\t\t\t\tclassName=\"text-xs px-2.5 py-1 rounded-full border border-border bg-muted/50 hover:bg-muted hover:border-primary/50 transition-colors truncate max-w-[200px]\"\n\t\t\t\t\t\t\t\t\ttitle={suggestion}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{suggestion.length > 40 ? `${suggestion.slice(0, 40)}...` : suggestion}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Message Body */}\n\t\t\t\t<div className=\"px-3 py-2\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tref={textareaRef}\n\t\t\t\t\t\tvalue={body}\n\t\t\t\t\t\tonChange={(e) => setBody(e.target.value)}\n\t\t\t\t\t\tonInput={handleInput}\n\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\tplaceholder=\"Write your reply...\"\n\t\t\t\t\t\tclassName={cn(\"w-full resize-none bg-transparent outline-none\", \"text-sm\", \"placeholder:text-muted-foreground\", \"min-h-[80px] max-h-[200px]\")}\n\t\t\t\t\t\trows={3}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{signature.value && (\n\t\t\t\t\t\t<div className=\"mt-2 pt-2 border-t border-dashed border-border/50\">\n\t\t\t\t\t\t\t<div className=\"text-xs text-muted-foreground mb-1 flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<span>Signature</span>\n\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => setSignatureId(\"none\")} className=\"text-[10px] hover:text-foreground transition-colors\">\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"text-sm text-muted-foreground whitespace-pre-wrap\">{signature.value.trim()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Quoted Text Toggle */}\n\t\t\t\t{selectedMessage.preview && (\n\t\t\t\t\t<div className=\"px-3 pb-2\">\n\t\t\t\t\t\t<button type=\"button\" onClick={() => setShowQuote(!showQuote)} className=\"text-xs text-muted-foreground hover:text-foreground flex items-center gap-1\">\n\t\t\t\t\t\t\t<MoreHorizontal className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t{showQuote ? \"Hide\" : \"Show\"} quoted text\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{showQuote && <div className=\"mt-2 pl-3 border-l-2 border-muted text-xs text-muted-foreground whitespace-pre-wrap max-h-[100px] overflow-y-auto\">{quoteText}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{/* Attachments Display */}\n\t\t\t\t{attachments.length > 0 && (\n\t\t\t\t\t<div className=\"px-3 py-2 border-t border-border/50 bg-muted/20\">\n\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t{attachments.map((attachment) => (\n\t\t\t\t\t\t\t\t<div key={attachment.filename} className=\"flex items-center gap-1.5 px-2 py-1 bg-background border rounded-md text-xs\">\n\t\t\t\t\t\t\t\t\t<Paperclip className=\"h-3 w-3 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"max-w-[120px] truncate\">{attachment.filename}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">({formatFileSize(attachment.size)})</span>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={() => removeAttachment(attachment.filename)} className=\"ml-1 text-muted-foreground hover:text-destructive\">\n\t\t\t\t\t\t\t\t\t\t<X className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<input ref={fileInputRef} type=\"file\" multiple className=\"hidden\" onChange={handleFileSelect} accept=\"*/*\" />\n\n\t\t\t\t{/* Footer Toolbar */}\n\t\t\t\t<div className=\"flex items-center justify-between gap-1 border-t border-border/50 px-2 py-1.5 bg-muted/30\">\n\t\t\t\t\t<div className=\"flex items-center gap-0.5\">\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\" onClick={() => fileInputRef.current?.click()}>\n\t\t\t\t\t\t\t\t\t<Paperclip className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Attach file</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\">\n\t\t\t\t\t\t\t\t\t<ImageIcon className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Insert image</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0\">\n\t\t\t\t\t\t\t\t\t<LinkIcon className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Insert link</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<div className=\"w-px h-4 bg-border mx-1\" />\n\n\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 px-2 gap-1\">\n\t\t\t\t\t\t\t\t\t<Bold className=\"h-3.5 w-3.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<ChevronDown className=\"h-3 w-3 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t<DropdownMenuContent align=\"start\" className=\"w-40\">\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Bold className=\"h-4 w-4 mr-2\" /> Bold\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Italic className=\"h-4 w-4 mr-2\" /> Italic\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<Underline className=\"h-4 w-4 mr-2\" /> Underline\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<List className=\"h-4 w-4 mr-2\" /> Bullet list\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t<DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t<ListOrdered className=\"h-4 w-4 mr-2\" /> Numbered list\n\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t</DropdownMenu>\n\n\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 px-2 gap-1\">\n\t\t\t\t\t\t\t\t\t<Sparkles className=\"h-3.5 w-3.5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground hidden sm:inline\">Templates</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t<DropdownMenuContent align=\"start\" className=\"w-48\">\n\t\t\t\t\t\t\t\t{templateDefinitions.map((template) => (\n\t\t\t\t\t\t\t\t\t<DropdownMenuItem key={template.id} onClick={() => applyTemplate(template.id)}>\n\t\t\t\t\t\t\t\t\t\t{template.label}\n\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t<DropdownMenuItem className=\"text-muted-foreground text-xs\">Signature: {signature.label}</DropdownMenuItem>\n\t\t\t\t\t\t\t\t{signatureOptions.map((opt) => (\n\t\t\t\t\t\t\t\t\t<DropdownMenuItem key={opt.id} onClick={() => setSignatureId(opt.id)} className={cn(\"pl-6\", signatureId === opt.id && \"font-medium text-primary\")}>\n\t\t\t\t\t\t\t\t\t\t{opt.label}\n\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex items-center gap-1\">\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"h-7 w-7 p-0 text-muted-foreground hover:text-destructive\" onClick={onClose}>\n\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent side=\"top\">Discard</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{isPendingSend ? (\n\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-3 gap-1.5 rounded-full bg-amber-500 hover:bg-amber-600\" onClick={cancelSend}>\n\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium\">Undo ({undoCountdown}s)</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-3 gap-1.5 rounded-l-full rounded-r-none\" onClick={handleSend} disabled={isSending || !body.trim()}>\n\t\t\t\t\t\t\t\t\t{isSending ? <Loader2 className=\"h-3.5 w-3.5 animate-spin\" /> : <Send className=\"h-3.5 w-3.5\" />}\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs font-medium\">Send</span>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Popover open={scheduleOpen} onOpenChange={setScheduleOpen}>\n\t\t\t\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"h-7 px-1.5 rounded-l-none rounded-r-full border-l border-primary-foreground/20\" disabled={isSending || !body.trim()}>\n\t\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"h-3.5 w-3.5\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t\t\t\t<PopoverContent className=\"w-72 p-2\" align=\"end\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">Schedule send</p>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"tomorrow_morning\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tTomorrow morning (8:00 AM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"tomorrow_afternoon\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tTomorrow afternoon (1:00 PM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start h-8 text-xs\" onClick={() => handleScheduleSend(getSchedulePreset(\"monday_morning\"))}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Calendar className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tMonday morning (8:00 AM)\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border-t border-border pt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs font-medium text-muted-foreground px-2 py-1\">Pick date & time</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2 px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"schedule-date\" className=\"sr-only\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"schedule-date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={scheduledDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setScheduledDate(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={new Date().toISOString().split(\"T\")[0]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Label htmlFor=\"schedule-time\" className=\"sr-only\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTime\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input id=\"schedule-time\" type=\"time\" value={scheduledTime} onChange={(e) => setScheduledTime(e.target.value)} className=\"h-8 text-xs\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button size=\"sm\" className=\"w-full mt-2 h-8 text-xs\" onClick={handleCustomSchedule} disabled={!scheduledDate || !scheduledTime}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"h-3.5 w-3.5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSchedule\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"px-3 pb-1.5 text-[10px] text-muted-foreground/60 text-right\">Cmd/Ctrl + Enter to send</div>\n\t\t\t</div>\n\t\t</TooltipProvider>\n\t);\n}\n","\"use client\";\n\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction ScrollArea({\n\tclassName,\n\tchildren,\n\t...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n\treturn (\n\t\t<ScrollAreaPrimitive.Root\n\t\t\tclassName={cn(\"relative overflow-hidden\", className)}\n\t\t\tdata-slot=\"scroll-area\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<ScrollAreaPrimitive.Viewport\n\t\t\t\tclassName=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n\t\t\t\tdata-slot=\"scroll-area-viewport\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ScrollAreaPrimitive.Viewport>\n\t\t\t<ScrollBar />\n\t\t\t<ScrollAreaPrimitive.Corner />\n\t\t</ScrollAreaPrimitive.Root>\n\t);\n}\n\nfunction ScrollBar({\n\tclassName,\n\torientation = \"vertical\",\n\t...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n\treturn (\n\t\t<ScrollAreaPrimitive.ScrollAreaScrollbar\n\t\t\tclassName={cn(\n\t\t\t\t\"flex touch-none p-px transition-colors select-none\",\n\t\t\t\torientation === \"vertical\" &&\n\t\t\t\t\t\"h-full w-2.5 border-l border-l-transparent\",\n\t\t\t\torientation === \"horizontal\" &&\n\t\t\t\t\t\"h-2.5 flex-col border-t border-t-transparent\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tdata-slot=\"scroll-area-scrollbar\"\n\t\t\torientation={orientation}\n\t\t\t{...props}\n\t\t>\n\t\t\t<ScrollAreaPrimitive.ScrollAreaThumb\n\t\t\t\tclassName=\"bg-border relative flex-1 rounded-full\"\n\t\t\t\tdata-slot=\"scroll-area-thumb\"\n\t\t\t/>\n\t\t</ScrollAreaPrimitive.ScrollAreaScrollbar>\n\t);\n}\n\nexport { ScrollArea, ScrollBar };\n","import { constructFrom } from \"./constructFrom.js\";\nimport { constructNow } from \"./constructNow.js\";\nimport { isSameDay } from \"./isSameDay.js\";\n\n/**\n * The {@link isToday} function options.\n */\n\n/**\n * @name isToday\n * @category Day Helpers\n * @summary Is the given date today?\n * @pure false\n *\n * @description\n * Is the given date today?\n *\n * @param date - The date to check\n * @param options - An object with options\n *\n * @returns The date is today\n *\n * @example\n * // If today is 6 October 2014, is 6 October 14:00:00 today?\n * const result = isToday(new Date(2014, 9, 6, 14, 0))\n * //=> true\n */\nexport function isToday(date, options) {\n  return isSameDay(\n    constructFrom(options?.in || date, date),\n    constructNow(options?.in || date),\n  );\n}\n\n// Fallback for modularized imports:\nexport default isToday;\n","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link subDays} function options.\n */\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount, options) {\n  return addDays(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subDays;\n","\"use client\";\n\n/**\n * Admin SMS Conversation View Component\n *\n * iPhone-style chat bubble display for SMS conversations\n * Features:\n * - Chat bubbles (outbound = right/primary, inbound = left/muted)\n * - Message timestamps grouped by day\n * - Delivery status indicators\n * - Auto-scroll to latest message\n * - Typing indicator support\n */\n\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\nimport { format, isToday, isYesterday, isSameDay } from \"date-fns\";\nimport { Check, CheckCheck, Clock, AlertCircle, Building2, User } from \"lucide-react\";\nimport { useEffect, useRef } from \"react\";\n\ntype MessageDirection = \"inbound\" | \"outbound\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type SmsMessage = {\n\tid: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus?: MessageStatus;\n\tsenderName?: string;\n\tsenderAvatar?: string;\n};\n\nexport type SmsConversation = {\n\tid: string;\n\tcontactName: string;\n\tcontactPhone: string;\n\tcompanyName?: string;\n\tcompanyId?: string;\n\tmessages: SmsMessage[];\n\tisTyping?: boolean;\n};\n\ntype AdminSmsConversationProps = {\n\tconversation: SmsConversation;\n\tclassName?: string;\n};\n\nfunction formatMessageTime(timestamp: string): string {\n\tconst date = new Date(timestamp);\n\treturn format(date, \"h:mm a\");\n}\n\nfunction formatDateDivider(timestamp: string): string {\n\tconst date = new Date(timestamp);\n\tif (isToday(date)) return \"Today\";\n\tif (isYesterday(date)) return \"Yesterday\";\n\treturn format(date, \"EEEE, MMMM d\");\n}\n\nfunction getStatusIcon(status?: MessageStatus) {\n\tswitch (status) {\n\t\tcase \"sending\":\n\t\t\treturn <Clock className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"sent\":\n\t\t\treturn <Check className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"delivered\":\n\t\t\treturn <CheckCheck className=\"size-3 text-muted-foreground\" />;\n\t\tcase \"read\":\n\t\t\treturn <CheckCheck className=\"size-3 text-primary\" />;\n\t\tcase \"failed\":\n\t\t\treturn <AlertCircle className=\"size-3 text-destructive\" />;\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\nfunction MessageBubble({ message, isFirst, isLast, showAvatar }: { message: SmsMessage; isFirst: boolean; isLast: boolean; showAvatar: boolean }) {\n\tconst isOutbound = message.direction === \"outbound\";\n\n\treturn (\n\t\t<div className={cn(\"flex gap-2\", isOutbound ? \"flex-row-reverse\" : \"flex-row\", !isFirst && \"mt-0.5\")}>\n\t\t\t{/* Avatar placeholder for alignment */}\n\t\t\t{!isOutbound && (\n\t\t\t\t<div className=\"w-7 shrink-0\">\n\t\t\t\t\t{showAvatar && (\n\t\t\t\t\t\t<Avatar className=\"size-7\">\n\t\t\t\t\t\t\t<AvatarFallback className=\"bg-muted text-[10px]\">{message.senderName?.charAt(0) || \"?\"}</AvatarFallback>\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Message bubble */}\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"max-w-[75%] px-3 py-2 text-sm\",\n\t\t\t\t\tisOutbound ? \"bg-primary text-primary-foreground\" : \"bg-muted text-foreground\",\n\t\t\t\t\t// Rounded corners based on position in group\n\t\t\t\t\tisFirst && isLast && \"rounded-2xl\",\n\t\t\t\t\tisFirst && !isLast && (isOutbound ? \"rounded-2xl rounded-br-md\" : \"rounded-2xl rounded-bl-md\"),\n\t\t\t\t\t!isFirst && !isLast && (isOutbound ? \"rounded-2xl rounded-r-md\" : \"rounded-2xl rounded-l-md\"),\n\t\t\t\t\t!isFirst && isLast && (isOutbound ? \"rounded-2xl rounded-tr-md\" : \"rounded-2xl rounded-tl-md\")\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<p className=\"whitespace-pre-wrap break-words leading-relaxed\">{message.content}</p>\n\t\t\t</div>\n\n\t\t\t{/* Outbound spacer for alignment */}\n\t\t\t{isOutbound && <div className=\"w-7 shrink-0\" />}\n\t\t</div>\n\t);\n}\n\nfunction MessageGroup({ messages, showDateDivider, dateLabel }: { messages: SmsMessage[]; showDateDivider: boolean; dateLabel: string }) {\n\tconst isOutbound = messages[0]?.direction === \"outbound\";\n\tconst lastMessage = messages[messages.length - 1];\n\n\treturn (\n\t\t<div className=\"space-y-0.5\">\n\t\t\t{showDateDivider && (\n\t\t\t\t<div className=\"flex justify-center py-3\">\n\t\t\t\t\t<span className=\"rounded-full bg-muted px-3 py-1 text-[10px] font-medium text-muted-foreground\">{dateLabel}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{messages.map((message, idx) => (\n\t\t\t\t<MessageBubble key={message.id} message={message} isFirst={idx === 0} isLast={idx === messages.length - 1} showAvatar={!isOutbound && idx === messages.length - 1} />\n\t\t\t))}\n\n\t\t\t{/* Timestamp and status for last message in group */}\n\t\t\t<div className={cn(\"flex items-center gap-1 px-9 pt-1\", isOutbound ? \"justify-end\" : \"justify-start\")}>\n\t\t\t\t<span className=\"text-[10px] text-muted-foreground\">{formatMessageTime(lastMessage?.timestamp || \"\")}</span>\n\t\t\t\t{isOutbound && getStatusIcon(lastMessage?.status)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction TypingIndicator() {\n\treturn (\n\t\t<div className=\"flex gap-2\">\n\t\t\t<div className=\"w-7 shrink-0\">\n\t\t\t\t<Avatar className=\"size-7\">\n\t\t\t\t\t<AvatarFallback className=\"bg-muted text-[10px]\">...</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t</div>\n\t\t\t<div className=\"rounded-2xl rounded-bl-md bg-muted px-4 py-3\">\n\t\t\t\t<div className=\"flex gap-1\">\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50 [animation-delay:-0.3s]\" />\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50 [animation-delay:-0.15s]\" />\n\t\t\t\t\t<span className=\"size-2 animate-bounce rounded-full bg-muted-foreground/50\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function AdminSmsConversation({ conversation, className }: AdminSmsConversationProps) {\n\tconst scrollRef = useRef<HTMLDivElement>(null);\n\tconst bottomRef = useRef<HTMLDivElement>(null);\n\n\t// Auto-scroll to bottom when messages change\n\tuseEffect(() => {\n\t\tbottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n\t}, [conversation.messages.length, conversation.isTyping]);\n\n\t// Group messages by sender and time proximity (within 2 minutes)\n\tconst groupedMessages: { messages: SmsMessage[]; showDateDivider: boolean; dateLabel: string }[] = [];\n\tlet currentGroup: SmsMessage[] = [];\n\tlet lastDate: Date | null = null;\n\n\tconversation.messages.forEach((message, idx) => {\n\t\tconst messageDate = new Date(message.timestamp);\n\t\tconst prevMessage = conversation.messages[idx - 1];\n\t\tconst showDateDivider = !lastDate || !isSameDay(messageDate, lastDate);\n\n\t\t// Start new group if:\n\t\t// - Different direction\n\t\t// - More than 2 minutes gap\n\t\t// - Different day\n\t\tconst shouldStartNewGroup =\n\t\t\t!prevMessage ||\n\t\t\tprevMessage.direction !== message.direction ||\n\t\t\tmessageDate.getTime() - new Date(prevMessage.timestamp).getTime() > 2 * 60 * 1000 ||\n\t\t\tshowDateDivider;\n\n\t\tif (shouldStartNewGroup && currentGroup.length > 0) {\n\t\t\tgroupedMessages.push({\n\t\t\t\tmessages: currentGroup,\n\t\t\t\tshowDateDivider: !lastDate || !isSameDay(new Date(currentGroup[0]?.timestamp || \"\"), lastDate),\n\t\t\t\tdateLabel: formatDateDivider(currentGroup[0]?.timestamp || \"\"),\n\t\t\t});\n\t\t\tlastDate = new Date(currentGroup[0]?.timestamp || \"\");\n\t\t\tcurrentGroup = [];\n\t\t}\n\n\t\tcurrentGroup.push(message);\n\t});\n\n\t// Push last group\n\tif (currentGroup.length > 0) {\n\t\tgroupedMessages.push({\n\t\t\tmessages: currentGroup,\n\t\t\tshowDateDivider: !lastDate || !isSameDay(new Date(currentGroup[0]?.timestamp || \"\"), lastDate),\n\t\t\tdateLabel: formatDateDivider(currentGroup[0]?.timestamp || \"\"),\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className={cn(\"flex h-full flex-col\", className)}>\n\t\t\t{/* Conversation Header */}\n\t\t\t<div className=\"flex items-center gap-3 border-b border-border/50 bg-card px-4 py-3\">\n\t\t\t\t<Avatar className=\"size-10\">\n\t\t\t\t\t<AvatarFallback className=\"bg-primary/10 text-primary\">\n\t\t\t\t\t\t{conversation.contactName\n\t\t\t\t\t\t\t.split(\" \")\n\t\t\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t.substring(0, 2)}\n\t\t\t\t\t</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<h3 className=\"truncate font-semibold\">{conversation.contactName}</h3>\n\t\t\t\t\t\t{conversation.companyName && (\n\t\t\t\t\t\t\t<Badge variant=\"outline\" className=\"shrink-0 gap-1 text-[10px]\">\n\t\t\t\t\t\t\t\t<Building2 className=\"size-2.5\" />\n\t\t\t\t\t\t\t\t{conversation.companyName}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"truncate text-xs text-muted-foreground\">{conversation.contactPhone}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Messages Area */}\n\t\t\t<ScrollArea ref={scrollRef} className=\"flex-1\">\n\t\t\t\t<div className=\"space-y-4 p-4\">\n\t\t\t\t\t{groupedMessages.length === 0 ? (\n\t\t\t\t\t\t<div className=\"flex flex-col items-center justify-center py-12 text-center\">\n\t\t\t\t\t\t\t<div className=\"mb-3 rounded-full bg-muted p-4\">\n\t\t\t\t\t\t\t\t<User className=\"size-8 text-muted-foreground\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h4 className=\"font-medium\">No messages yet</h4>\n\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-muted-foreground\">Start the conversation by sending a message below</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tgroupedMessages.map((group, idx) => <MessageGroup key={`group-${idx}`} messages={group.messages} showDateDivider={group.showDateDivider} dateLabel={group.dateLabel} />)\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Typing indicator */}\n\t\t\t\t\t{conversation.isTyping && (\n\t\t\t\t\t\t<div className=\"pt-2\">\n\t\t\t\t\t\t\t<TypingIndicator />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Scroll anchor */}\n\t\t\t\t\t<div ref={bottomRef} />\n\t\t\t\t</div>\n\t\t\t</ScrollArea>\n\t\t</div>\n\t);\n}\n","\"use client\";\n\n/**\n * Admin SMS Message Input Component\n *\n * iPhone-style message input with emoji picker,\n * quick reply templates, and SMS segment counter\n */\n\nimport { Button } from \"@/components/ui/button\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\nimport { ArrowUp, Loader2, MessageSquareText, Smile } from \"lucide-react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\ntype SmsTemplate = {\n\tid: string;\n\tlabel: string;\n\tpreview: string;\n\ttext: string;\n};\n\nconst SMS_TEMPLATES: SmsTemplate[] = [\n\t{\n\t\tid: \"follow-up\",\n\t\tlabel: \"Follow Up\",\n\t\tpreview: \"Service follow-up request\",\n\t\ttext: \"Hi, just following up on our recent communication. Is there anything else I can help you with?\",\n\t},\n\t{\n\t\tid: \"thank-you\",\n\t\tlabel: \"Thank You\",\n\t\tpreview: \"Thank you message\",\n\t\ttext: \"Thank you for reaching out! We appreciate your business and are here to help.\",\n\t},\n\t{\n\t\tid: \"escalated\",\n\t\tlabel: \"Escalated\",\n\t\tpreview: \"Issue escalation notice\",\n\t\ttext: \"I've escalated your issue to our senior support team. Someone will be in touch shortly.\",\n\t},\n\t{\n\t\tid: \"resolved\",\n\t\tlabel: \"Issue Resolved\",\n\t\tpreview: \"Resolution confirmation\",\n\t\ttext: \"Great news - the issue has been resolved. Please let us know if you experience any further problems.\",\n\t},\n];\n\n// SMS segment calculation\nconst SMS_SEGMENT_LENGTH_GSM = 160;\nconst SMS_SEGMENT_LENGTH_UNICODE = 70;\nconst SMS_CONCAT_LENGTH_GSM = 153;\nconst SMS_CONCAT_LENGTH_UNICODE = 67;\n\nfunction isGSM7(text: string): boolean {\n\tconst gsm7Regex = /^[@$\\n\\r_\\x1B !\"#%&'()*+,\\-./0-9:;<=>?A-Za-z]*$/;\n\treturn gsm7Regex.test(text);\n}\n\nfunction calculateSegments(text: string): { segments: number; charsPerSegment: number; isUnicode: boolean } {\n\tif (!text) return { segments: 0, charsPerSegment: 160, isUnicode: false };\n\n\tconst isUnicode = !isGSM7(text);\n\tconst singleLimit = isUnicode ? SMS_SEGMENT_LENGTH_UNICODE : SMS_SEGMENT_LENGTH_GSM;\n\tconst concatLimit = isUnicode ? SMS_CONCAT_LENGTH_UNICODE : SMS_CONCAT_LENGTH_GSM;\n\n\tif (text.length <= singleLimit) {\n\t\treturn { segments: 1, charsPerSegment: singleLimit, isUnicode };\n\t}\n\n\tconst segments = Math.ceil(text.length / concatLimit);\n\treturn { segments, charsPerSegment: concatLimit, isUnicode };\n}\n\n// Common emojis\nconst EMOJI_CATEGORIES = [\n\t{\n\t\tname: \"Frequently Used\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Smileys\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Gestures\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n\t{\n\t\tname: \"Symbols\",\n\t\temojis: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t},\n];\n\ntype AdminSmsInputProps = {\n\tvalue: string;\n\tonChange: (value: string) => void;\n\tonSend: () => void;\n\tsending?: boolean;\n\tdisabled?: boolean;\n\tplaceholder?: string;\n};\n\nexport function AdminSmsInput({ value, onChange, onSend, sending = false, disabled = false, placeholder = \"Type a message...\" }: AdminSmsInputProps) {\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false);\n\tconst [isFocused, setIsFocused] = useState(false);\n\tconst inputRef = useRef<HTMLTextAreaElement>(null);\n\n\t// Calculate SMS segments\n\tconst segmentInfo = calculateSegments(value);\n\tconst showCounter = value.length > 0 && (isFocused || value.length > 100);\n\n\t// Auto-resize textarea\n\tuseEffect(() => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.style.height = \"auto\";\n\t\t\tinputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n\t\t}\n\t}, [value]);\n\n\tconst handleEmojiSelect = useCallback(\n\t\t(emoji: string) => {\n\t\t\tconst textarea = inputRef.current;\n\t\t\tif (textarea) {\n\t\t\t\tconst start = textarea.selectionStart;\n\t\t\t\tconst end = textarea.selectionEnd;\n\t\t\t\tconst newValue = value.substring(0, start) + emoji + value.substring(end);\n\t\t\t\tonChange(newValue);\n\t\t\t\t// Move cursor after emoji\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttextarea.selectionStart = start + emoji.length;\n\t\t\t\t\ttextarea.selectionEnd = start + emoji.length;\n\t\t\t\t\ttextarea.focus();\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tonChange(value + emoji);\n\t\t\t}\n\t\t\tsetShowEmojiPicker(false);\n\t\t},\n\t\t[value, onChange]\n\t);\n\n\tconst handleTemplateSelect = useCallback(\n\t\t(template: SmsTemplate) => {\n\t\t\tonChange(template.text);\n\t\t\tinputRef.current?.focus();\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleSend = useCallback(() => {\n\t\tif (!value.trim() || sending || disabled) return;\n\t\tonSend();\n\t}, [value, sending, disabled, onSend]);\n\n\tconst handleKeyDown = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\t// Enter to send, Shift+Enter for new line\n\t\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\t\te.preventDefault();\n\t\t\t\thandleSend();\n\t\t\t}\n\t\t},\n\t\t[handleSend]\n\t);\n\n\treturn (\n\t\t<div className=\"bg-card border-t border-border/50\">\n\t\t\t{/* Segment Counter */}\n\t\t\t{showCounter && (\n\t\t\t\t<div className=\"flex items-center justify-end gap-2 px-3 pt-2 pb-1\">\n\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\">{value.length} chars</span>\n\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\"></span>\n\t\t\t\t\t<span className={cn(\"text-[10px] font-medium\", segmentInfo.segments > 1 ? \"text-amber-500\" : \"text-muted-foreground\")}>\n\t\t\t\t\t\t{segmentInfo.segments} segment{segmentInfo.segments !== 1 ? \"s\" : \"\"}\n\t\t\t\t\t</span>\n\t\t\t\t\t{segmentInfo.isUnicode && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"text-[10px] text-muted-foreground\"></span>\n\t\t\t\t\t\t\t<span className=\"text-[10px] text-amber-500\">Unicode</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Input Area */}\n\t\t\t<div className=\"flex items-end gap-1.5 p-2\">\n\t\t\t\t{/* Templates Button */}\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t<Button type=\"button\" variant=\"ghost\" size=\"icon\" className=\"mb-0.5 size-10 md:size-8 shrink-0 rounded-full hover:bg-muted\" disabled={disabled} title=\"Quick replies\">\n\t\t\t\t\t\t\t<MessageSquareText className=\"size-5 md:size-4 text-muted-foreground\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent align=\"start\" side=\"top\" className=\"w-56\">\n\t\t\t\t\t\t<div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">Quick Replies</div>\n\t\t\t\t\t\t{SMS_TEMPLATES.map((template) => (\n\t\t\t\t\t\t\t<DropdownMenuItem key={template.id} onClick={() => handleTemplateSelect(template)} className=\"flex-col items-start gap-0.5\">\n\t\t\t\t\t\t\t\t<span className=\"font-medium\">{template.label}</span>\n\t\t\t\t\t\t\t\t<span className=\"line-clamp-1 text-xs text-muted-foreground\">{template.preview}</span>\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\n\t\t\t\t{/* Text Input with Emoji and Send */}\n\t\t\t\t<div className=\"relative min-w-0 flex-1\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"flex w-full items-center overflow-y-auto rounded-[18px] border border-border bg-muted/50 pl-3 pr-1 py-1 transition-colors\",\n\t\t\t\t\t\t\t\"min-h-[44px] md:min-h-[36px] max-h-[120px]\",\n\t\t\t\t\t\t\t\"focus-within:border-primary/30 focus-within:bg-background focus-within:ring-1 focus-within:ring-primary/20\",\n\t\t\t\t\t\t\t(disabled || sending) && \"cursor-not-allowed opacity-50\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\tonChange={(e) => onChange(e.target.value)}\n\t\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\t\tonFocus={() => setIsFocused(true)}\n\t\t\t\t\t\t\tonBlur={() => setIsFocused(false)}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tdisabled={disabled || sending}\n\t\t\t\t\t\t\trows={1}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"w-full min-w-0 resize-none bg-transparent py-1 leading-5 outline-none\",\n\t\t\t\t\t\t\t\t\"text-base md:text-sm\",\n\t\t\t\t\t\t\t\t\"placeholder:text-muted-foreground/60\",\n\t\t\t\t\t\t\t\t(disabled || sending) && \"pointer-events-none\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* Right side buttons */}\n\t\t\t\t\t\t<div className=\"flex shrink-0 items-center gap-0.5 pl-1\">\n\t\t\t\t\t\t\t{/* Emoji Button */}\n\t\t\t\t\t\t\t<Popover open={showEmojiPicker} onOpenChange={setShowEmojiPicker}>\n\t\t\t\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\"flex size-9 md:size-7 items-center justify-center rounded-full transition-colors\", \"hover:bg-muted/80\", showEmojiPicker && \"bg-muted\")}\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Add emoji\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Smile className=\"size-5 md:size-4 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t\t\t<PopoverContent side=\"top\" align=\"end\" className=\"w-[300px] p-0\">\n\t\t\t\t\t\t\t\t\t<ScrollArea className=\"h-[220px]\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-2\">\n\t\t\t\t\t\t\t\t\t\t\t{EMOJI_CATEGORIES.map((category, idx) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={category.name} className={idx > 0 ? \"mt-3\" : \"\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"mb-1.5 px-1 text-[10px] font-semibold uppercase tracking-wider text-muted-foreground\">{category.name}</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-8 gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{category.emojis.map((emoji, emojiIdx) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${emoji}-${emojiIdx}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex size-8 items-center justify-center rounded-lg text-lg transition-colors hover:bg-muted\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEmojiSelect(emoji)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{emoji}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t</Popover>\n\n\t\t\t\t\t\t\t{/* Send Button */}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={handleSend}\n\t\t\t\t\t\t\t\tdisabled={!value.trim() || sending || disabled}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"flex size-9 md:size-7 items-center justify-center rounded-full transition-all duration-200\",\n\t\t\t\t\t\t\t\t\tvalue.trim() ? \"bg-primary hover:bg-primary/90 scale-100 active:scale-95\" : \"bg-muted/50 scale-90\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{sending ? (\n\t\t\t\t\t\t\t\t\t<Loader2 className={cn(\"size-5 md:size-4 animate-spin\", value.trim() ? \"text-primary-foreground\" : \"text-muted-foreground\")} />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ArrowUp className={cn(\"size-5 md:size-4\", value.trim() ? \"text-primary-foreground\" : \"text-muted-foreground\")} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * Admin Communication Store - Zustand state management\n *\n * Manages communication state for the admin panel:\n * - Active filter (email, sms, call, ticket, all)\n * - Selected message for detail view\n * - Composer state (new message, reply, forward)\n * - Pending messages queue\n */\n\nimport { create } from \"zustand\";\n\ntype MessageType = \"email\" | \"sms\" | \"call\" | \"voicemail\" | \"ticket\";\ntype ActiveFilter = MessageType | \"all\";\ntype ComposerType = \"email\" | \"sms\" | \"call\";\ntype ComposerMode = \"new\" | \"reply\" | \"reply-all\" | \"forward\";\ntype MessageDirection = \"inbound\" | \"outbound\";\ntype MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport type ComposerContext = {\n\tcompanyId?: string;\n\tcompanyName?: string;\n\tuserId?: string;\n\tuserName?: string;\n\temail?: string;\n\tphone?: string;\n\tthreadId?: string;\n\tmessageId?: string;\n\tsubject?: string;\n\toriginalContent?: string;\n};\n\nexport type PendingMessage = {\n\tid: string;\n\tconversationId: string;\n\tdirection: MessageDirection;\n\tcontent: string;\n\ttimestamp: string;\n\tstatus: MessageStatus;\n\tcontactName?: string;\n\tcontactEmail?: string;\n\tcontactPhone?: string;\n\tcompanyId?: string;\n};\n\ntype PendingMessageMap = Record<string, PendingMessage[]>;\n\ntype AdminCommunicationStore = {\n\t// Filter state\n\tactiveFilter: ActiveFilter;\n\tsetActiveFilter: (filter: ActiveFilter) => void;\n\n\t// Selection state\n\tselectedMessageId: string | null;\n\tsetSelectedMessageId: (id: string | null) => void;\n\n\t// View state\n\tisDetailView: boolean;\n\tsetIsDetailView: (isDetailView: boolean) => void;\n\tactiveThreadId: string | null;\n\tsetActiveThreadId: (threadId: string | null) => void;\n\n\t// Composer state\n\tcomposer: {\n\t\tisOpen: boolean;\n\t\ttype: ComposerType | null;\n\t\tmode: ComposerMode;\n\t\tcontext?: ComposerContext;\n\t};\n\topenComposer: (type: ComposerType, mode?: ComposerMode, context?: ComposerContext) => void;\n\tcloseComposer: () => void;\n\n\t// Reply state\n\treplyMode: ComposerMode | null;\n\tsetReplyMode: (mode: ComposerMode | null) => void;\n\n\t// Pending messages (optimistic updates)\n\tpendingMessages: PendingMessageMap;\n\taddPendingMessage: (message: PendingMessage) => void;\n\tresolvePendingMessage: (conversationId: string, messageId: string, replacement?: PendingMessage) => void;\n\tresetPendingMessages: (conversationId: string) => void;\n\n\t// Undo send state\n\tundoSend: {\n\t\tmessageId: string | null;\n\t\ttimeoutId: NodeJS.Timeout | null;\n\t\tsecondsRemaining: number;\n\t};\n\tsetUndoSend: (messageId: string | null, timeoutId?: NodeJS.Timeout | null) => void;\n\tdecrementUndoTimer: () => void;\n\tcancelUndoSend: () => void;\n};\n\nexport const useAdminCommunicationStore = create<AdminCommunicationStore>((set, get) => ({\n\t// Filter state\n\tactiveFilter: \"all\",\n\tsetActiveFilter: (filter) => set({ activeFilter: filter }),\n\n\t// Selection state\n\tselectedMessageId: null,\n\tsetSelectedMessageId: (id) => set({ selectedMessageId: id }),\n\n\t// View state\n\tisDetailView: false,\n\tsetIsDetailView: (isDetailView) => set({ isDetailView }),\n\tactiveThreadId: null,\n\tsetActiveThreadId: (threadId) => set({ activeThreadId: threadId }),\n\n\t// Composer state\n\tcomposer: {\n\t\tisOpen: false,\n\t\ttype: null,\n\t\tmode: \"new\",\n\t},\n\topenComposer: (type, mode = \"new\", context) => {\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\tisOpen: true,\n\t\t\t\ttype,\n\t\t\t\tmode,\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t},\n\tcloseComposer: () =>\n\t\tset({\n\t\t\tcomposer: {\n\t\t\t\tisOpen: false,\n\t\t\t\ttype: null,\n\t\t\t\tmode: \"new\",\n\t\t\t},\n\t\t}),\n\n\t// Reply state\n\treplyMode: null,\n\tsetReplyMode: (mode) => set({ replyMode: mode }),\n\n\t// Pending messages\n\tpendingMessages: {},\n\taddPendingMessage: (message) =>\n\t\tset((state) => {\n\t\t\tconst existing = state.pendingMessages[message.conversationId] ?? [];\n\t\t\treturn {\n\t\t\t\tpendingMessages: {\n\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t[message.conversationId]: [...existing, message],\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n\tresolvePendingMessage: (conversationId, messageId, replacement) =>\n\t\tset((state) => {\n\t\t\tconst current = state.pendingMessages[conversationId] ?? [];\n\t\t\tconst filtered = current.filter((msg) => msg.id !== messageId);\n\t\t\tif (replacement) {\n\t\t\t\tfiltered.push(replacement);\n\t\t\t}\n\t\t\tconst nextPending =\n\t\t\t\tfiltered.length > 0\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...state.pendingMessages,\n\t\t\t\t\t\t\t[conversationId]: filtered,\n\t\t\t\t\t\t}\n\t\t\t\t\t: Object.fromEntries(Object.entries(state.pendingMessages).filter(([key]) => key !== conversationId));\n\t\t\treturn {\n\t\t\t\tpendingMessages: nextPending,\n\t\t\t};\n\t\t}),\n\tresetPendingMessages: (conversationId) =>\n\t\tset((state) => {\n\t\t\tif (!state.pendingMessages[conversationId]) {\n\t\t\t\treturn { pendingMessages: state.pendingMessages };\n\t\t\t}\n\t\t\tconst nextEntries = Object.entries(state.pendingMessages).filter(([key]) => key !== conversationId);\n\t\t\treturn {\n\t\t\t\tpendingMessages: Object.fromEntries(nextEntries),\n\t\t\t};\n\t\t}),\n\n\t// Undo send state\n\tundoSend: {\n\t\tmessageId: null,\n\t\ttimeoutId: null,\n\t\tsecondsRemaining: 5,\n\t},\n\tsetUndoSend: (messageId, timeoutId = null) =>\n\t\tset({\n\t\t\tundoSend: {\n\t\t\t\tmessageId,\n\t\t\t\ttimeoutId,\n\t\t\t\tsecondsRemaining: 5,\n\t\t\t},\n\t\t}),\n\tdecrementUndoTimer: () =>\n\t\tset((state) => ({\n\t\t\tundoSend: {\n\t\t\t\t...state.undoSend,\n\t\t\t\tsecondsRemaining: Math.max(0, state.undoSend.secondsRemaining - 1),\n\t\t\t},\n\t\t})),\n\tcancelUndoSend: () => {\n\t\tconst { undoSend } = get();\n\t\tif (undoSend.timeoutId) {\n\t\t\tclearTimeout(undoSend.timeoutId);\n\t\t}\n\t\tset({\n\t\t\tundoSend: {\n\t\t\t\tmessageId: null,\n\t\t\t\ttimeoutId: null,\n\t\t\t\tsecondsRemaining: 5,\n\t\t\t},\n\t\t});\n\t},\n}));\n","\"use client\";\n\n/**\n * Admin SMS Panel Component\n *\n * Complete SMS conversation panel combining:\n * - Conversation header with contact info\n * - iPhone-style message bubbles\n * - Message input with emoji picker\n * - Optimistic updates for sent messages\n */\n\nimport { useCallback, useState, useTransition } from \"react\";\nimport { AdminSmsConversation, type SmsConversation, type SmsMessage } from \"./admin-sms-conversation\";\nimport { AdminSmsInput } from \"./admin-sms-input\";\nimport { cn } from \"@/lib/utils\";\nimport { useAdminCommunicationStore } from \"@/lib/stores/admin-communication-store\";\nimport type { AdminCommunication } from \"@/types/entities\";\n\ntype AdminSmsPanelProps = {\n\tcommunication: AdminCommunication;\n\tonMessageSent?: (message: SmsMessage) => void;\n\tclassName?: string;\n};\n\n// Convert AdminCommunication to SmsConversation format\nfunction toSmsConversation(comm: AdminCommunication): SmsConversation {\n\t// For demo, create a conversation from the communication\n\t// In production, this would fetch the full thread from the server\n\tconst messages: SmsMessage[] = [\n\t\t{\n\t\t\tid: comm.id,\n\t\t\tdirection: comm.direction,\n\t\t\tcontent: comm.preview || \"\",\n\t\t\ttimestamp: comm.createdAt,\n\t\t\tstatus: comm.direction === \"outbound\" ? \"delivered\" : undefined,\n\t\t\tsenderName: comm.direction === \"inbound\" ? comm.userName : \"You\",\n\t\t},\n\t];\n\n\treturn {\n\t\tid: comm.id,\n\t\tcontactName: comm.userName || comm.from || \"Unknown\",\n\t\tcontactPhone: comm.direction === \"inbound\" ? comm.from || \"\" : comm.to || \"\",\n\t\tcompanyName: comm.companyName,\n\t\tcompanyId: comm.companyId,\n\t\tmessages,\n\t\tisTyping: false,\n\t};\n}\n\nexport function AdminSmsPanel({ communication, onMessageSent, className }: AdminSmsPanelProps) {\n\tconst [messageText, setMessageText] = useState(\"\");\n\tconst [isPending, startTransition] = useTransition();\n\tconst [localMessages, setLocalMessages] = useState<SmsMessage[]>([]);\n\tconst { addPendingMessage, resolvePendingMessage } = useAdminCommunicationStore();\n\n\t// Combine original messages with local optimistic messages\n\tconst baseConversation = toSmsConversation(communication);\n\tconst conversation: SmsConversation = {\n\t\t...baseConversation,\n\t\tmessages: [...baseConversation.messages, ...localMessages],\n\t};\n\n\tconst handleSend = useCallback(() => {\n\t\tif (!messageText.trim() || isPending) return;\n\n\t\tconst tempId = `temp_${Date.now()}`;\n\t\tconst newMessage: SmsMessage = {\n\t\t\tid: tempId,\n\t\t\tdirection: \"outbound\",\n\t\t\tcontent: messageText.trim(),\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t\tstatus: \"sending\",\n\t\t\tsenderName: \"You\",\n\t\t};\n\n\t\t// Optimistic update - add to local state immediately\n\t\tsetLocalMessages((prev) => [...prev, newMessage]);\n\t\tsetMessageText(\"\");\n\n\t\t// Add to pending messages store\n\t\taddPendingMessage({\n\t\t\tid: tempId,\n\t\t\tconversationId: communication.id,\n\t\t\tdirection: \"outbound\",\n\t\t\tcontent: newMessage.content,\n\t\t\ttimestamp: newMessage.timestamp,\n\t\t\tstatus: \"sending\",\n\t\t\tcontactName: conversation.contactName,\n\t\t\tcontactPhone: conversation.contactPhone,\n\t\t\tcompanyId: communication.companyId,\n\t\t});\n\n\t\t// Simulate sending (replace with actual API call)\n\t\tstartTransition(async () => {\n\t\t\ttry {\n\t\t\t\t// Simulate network delay\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 1000));\n\n\t\t\t\t// Update message status to sent\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"sent\" as const } : msg)));\n\n\t\t\t\t// Simulate delivery after another delay\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 500));\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"delivered\" as const } : msg)));\n\n\t\t\t\t// Resolve pending message in store\n\t\t\t\tresolvePendingMessage(communication.id, tempId);\n\n\t\t\t\t// Notify parent\n\t\t\t\tonMessageSent?.(newMessage);\n\t\t\t} catch {\n\t\t\t\t// Mark as failed\n\t\t\t\tsetLocalMessages((prev) => prev.map((msg) => (msg.id === tempId ? { ...msg, status: \"failed\" as const } : msg)));\n\t\t\t}\n\t\t});\n\t}, [messageText, isPending, communication.id, conversation.contactName, conversation.contactPhone, communication.companyId, addPendingMessage, resolvePendingMessage, onMessageSent]);\n\n\treturn (\n\t\t<div className={cn(\"flex h-full flex-col\", className)}>\n\t\t\t{/* Conversation View */}\n\t\t\t<div className=\"min-h-0 flex-1\">\n\t\t\t\t<AdminSmsConversation conversation={conversation} />\n\t\t\t</div>\n\n\t\t\t{/* Input Area */}\n\t\t\t<AdminSmsInput value={messageText} onChange={setMessageText} onSend={handleSend} sending={isPending} placeholder={`Message ${conversation.contactName}...`} />\n\t\t</div>\n\t);\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551',\n      key: '1miecu',\n    },\n  ],\n];\n\n/**\n * @component @name Paperclip\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgNi04LjQxNCA4LjU4NmEyIDIgMCAwIDAgMi44MjkgMi44MjlsOC40MTQtOC41ODZhNCA0IDAgMSAwLTUuNjU3LTUuNjU3bC04LjM3OSA4LjU1MWE2IDYgMCAxIDAgOC40ODUgOC40ODVsOC4zNzktOC41NTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/paperclip\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Paperclip = createLucideIcon('paperclip', __iconNode);\n\nexport default Paperclip;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 14s1.5 2 4 2 4-2 4-2', key: '1y1vjs' }],\n  ['line', { x1: '9', x2: '9.01', y1: '9', y2: '9', key: 'yxxnd0' }],\n  ['line', { x1: '15', x2: '15.01', y1: '9', y2: '9', key: '1p4y9e' }],\n];\n\n/**\n * @component @name Smile\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxNHMxLjUgMiA0IDIgNC0yIDQtMiIgLz4KICA8bGluZSB4MT0iOSIgeDI9IjkuMDEiIHkxPSI5IiB5Mj0iOSIgLz4KICA8bGluZSB4MT0iMTUiIHgyPSIxNS4wMSIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/smile\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Smile = createLucideIcon('smile', __iconNode);\n\nexport default Smile;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71', key: '1cjeqo' }],\n  ['path', { d: 'M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71', key: '19qd67' }],\n];\n\n/**\n * @component @name Link\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTNhNSA1IDAgMCAwIDcuNTQuNTRsMy0zYTUgNSAwIDAgMC03LjA3LTcuMDdsLTEuNzIgMS43MSIgLz4KICA8cGF0aCBkPSJNMTQgMTFhNSA1IDAgMCAwLTcuNTQtLjU0bC0zIDNhNSA1IDAgMCAwIDcuMDcgNy4wN2wxLjcxLTEuNzEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Link = createLucideIcon('link', __iconNode);\n\nexport default Link;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 17-5-5 5-5', key: '1s3y5u' }],\n  ['path', { d: 'M22 18v-2a4 4 0 0 0-4-4H7', key: '1fcyog' }],\n  ['path', { d: 'm7 17-5-5 5-5', key: '1ed8i2' }],\n];\n\n/**\n * @component @name ReplyAll\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTctNS01IDUtNSIgLz4KICA8cGF0aCBkPSJNMjIgMTh2LTJhNCA0IDAgMCAwLTQtNEg3IiAvPgogIDxwYXRoIGQ9Im03IDE3LTUtNSA1LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/reply-all\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ReplyAll = createLucideIcon('reply-all', __iconNode);\n\nexport default ReplyAll;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M20 18v-2a4 4 0 0 0-4-4H4', key: '5vmcpk' }],\n  ['path', { d: 'm9 17-5-5 5-5', key: 'nvlc11' }],\n];\n\n/**\n * @component @name Reply\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTh2LTJhNCA0IDAgMCAwLTQtNEg0IiAvPgogIDxwYXRoIGQ9Im05IDE3LTUtNSA1LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/reply\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Reply = createLucideIcon('reply', __iconNode);\n\nexport default Reply;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M11 5h10', key: '1cz7ny' }],\n  ['path', { d: 'M11 12h10', key: '1438ji' }],\n  ['path', { d: 'M11 19h10', key: '11t30w' }],\n  ['path', { d: 'M4 4h1v5', key: '10yrso' }],\n  ['path', { d: 'M4 9h2', key: 'r1h2o0' }],\n  ['path', { d: 'M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02', key: 'xtkcd5' }],\n];\n\n/**\n * @component @name ListOrdered\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNWgxMCIgLz4KICA8cGF0aCBkPSJNMTEgMTJoMTAiIC8+CiAgPHBhdGggZD0iTTExIDE5aDEwIiAvPgogIDxwYXRoIGQ9Ik00IDRoMXY1IiAvPgogIDxwYXRoIGQ9Ik00IDloMiIgLz4KICA8cGF0aCBkPSJNNi41IDIwSDMuNGMwLTEgMi42LTEuOTI1IDIuNi0zLjVhMS41IDEuNSAwIDAgMC0yLjYtMS4wMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/list-ordered\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ListOrdered = createLucideIcon('list-ordered', __iconNode);\n\nexport default ListOrdered;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['circle', { cx: '9', cy: '9', r: '2', key: 'af1f0g' }],\n  ['path', { d: 'm21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21', key: '1xmnt7' }],\n];\n\n/**\n * @component @name Image\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iOSIgcj0iMiIgLz4KICA8cGF0aCBkPSJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Image = createLucideIcon('image', __iconNode);\n\nexport default Image;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 7 17l-5-5', key: '116fxf' }],\n  ['path', { d: 'm22 10-7.5 7.5L13 16', key: 'ke71qq' }],\n];\n\n/**\n * @component @name CheckCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA3IDE3bC01LTUiIC8+CiAgPHBhdGggZD0ibTIyIDEwLTcuNSA3LjVMMTMgMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCheck = createLucideIcon('check-check', __iconNode);\n\nexport default CheckCheck;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm15 17 5-5-5-5', key: 'nf172w' }],\n  ['path', { d: 'M4 18v-2a4 4 0 0 1 4-4h12', key: 'jmiej9' }],\n];\n\n/**\n * @component @name Forward\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTcgNS01LTUtNSIgLz4KICA8cGF0aCBkPSJNNCAxOHYtMmE0IDQgMCAwIDEgNC00aDEyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/forward\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Forward = createLucideIcon('forward', __iconNode);\n\nexport default Forward;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M6 4v6a6 6 0 0 0 12 0V4', key: '9kb039' }],\n  ['line', { x1: '4', x2: '20', y1: '20', y2: '20', key: 'nun2al' }],\n];\n\n/**\n * @component @name Underline\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiA0djZhNiA2IDAgMCAwIDEyIDBWNCIgLz4KICA8bGluZSB4MT0iNCIgeDI9IjIwIiB5MT0iMjAiIHkyPSIyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/underline\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Underline = createLucideIcon('underline', __iconNode);\n\nexport default Underline;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '19', x2: '10', y1: '4', y2: '4', key: '15jd3p' }],\n  ['line', { x1: '14', x2: '5', y1: '20', y2: '20', key: 'bu0au3' }],\n  ['line', { x1: '15', x2: '9', y1: '4', y2: '20', key: 'uljnxc' }],\n];\n\n/**\n * @component @name Italic\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTkiIHgyPSIxMCIgeTE9IjQiIHkyPSI0IiAvPgogIDxsaW5lIHgxPSIxNCIgeDI9IjUiIHkxPSIyMCIgeTI9IjIwIiAvPgogIDxsaW5lIHgxPSIxNSIgeDI9IjkiIHkxPSI0IiB5Mj0iMjAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/italic\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Italic = createLucideIcon('italic', __iconNode);\n\nexport default Italic;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 5h.01', key: '18ugdj' }],\n  ['path', { d: 'M3 12h.01', key: 'nlz23k' }],\n  ['path', { d: 'M3 19h.01', key: 'noohij' }],\n  ['path', { d: 'M8 5h13', key: '1pao27' }],\n  ['path', { d: 'M8 12h13', key: '1za7za' }],\n  ['path', { d: 'M8 19h13', key: 'm83p4d' }],\n];\n\n/**\n * @component @name List\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA1aC4wMSIgLz4KICA8cGF0aCBkPSJNMyAxMmguMDEiIC8+CiAgPHBhdGggZD0iTTMgMTloLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDVoMTMiIC8+CiAgPHBhdGggZD0iTTggMTJoMTMiIC8+CiAgPHBhdGggZD0iTTggMTloMTMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/list\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst List = createLucideIcon('list', __iconNode);\n\nexport default List;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '6', cy: '12', r: '4', key: '1ehtga' }],\n  ['circle', { cx: '18', cy: '12', r: '4', key: '4vafl8' }],\n  ['line', { x1: '6', x2: '18', y1: '16', y2: '16', key: 'pmt8us' }],\n];\n\n/**\n * @component @name Voicemail\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI2IiBjeT0iMTIiIHI9IjQiIC8+CiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxMiIgcj0iNCIgLz4KICA8bGluZSB4MT0iNiIgeDI9IjE4IiB5MT0iMTYiIHkyPSIxNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/voicemail\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Voicemail = createLucideIcon('voicemail', __iconNode);\n\nexport default Voicemail;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    { d: 'M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8', key: 'mg9rjx' },\n  ],\n];\n\n/**\n * @component @name Bold\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAxMmg5YTQgNCAwIDAgMSAwIDhIN2ExIDEgMCAwIDEtMS0xVjVhMSAxIDAgMCAxIDEtMWg3YTQgNCAwIDAgMSAwIDgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bold\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bold = createLucideIcon('bold', __iconNode);\n\nexport default Bold;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z',\n      key: 'r04s7s',\n    },\n  ],\n];\n\n/**\n * @component @name Star\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEuNTI1IDIuMjk1YS41My41MyAwIDAgMSAuOTUgMGwyLjMxIDQuNjc5YTIuMTIzIDIuMTIzIDAgMCAwIDEuNTk1IDEuMTZsNS4xNjYuNzU2YS41My41MyAwIDAgMSAuMjk0LjkwNGwtMy43MzYgMy42MzhhMi4xMjMgMi4xMjMgMCAwIDAtLjYxMSAxLjg3OGwuODgyIDUuMTRhLjUzLjUzIDAgMCAxLS43NzEuNTZsLTQuNjE4LTIuNDI4YTIuMTIyIDIuMTIyIDAgMCAwLTEuOTczIDBMNi4zOTYgMjEuMDFhLjUzLjUzIDAgMCAxLS43Ny0uNTZsLjg4MS01LjEzOWEyLjEyMiAyLjEyMiAwIDAgMC0uNjExLTEuODc5TDIuMTYgOS43OTVhLjUzLjUzIDAgMCAxIC4yOTQtLjkwNmw1LjE2NS0uNzU1YTIuMTIyIDIuMTIyIDAgMCAwIDEuNTk3LTEuMTZ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/star\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Star = createLucideIcon('star', __iconNode);\n\nexport default Star;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z',\n      key: '18887p',\n    },\n  ],\n  ['path', { d: 'M7 11h10', key: '1twpyw' }],\n  ['path', { d: 'M7 15h6', key: 'd9of3u' }],\n  ['path', { d: 'M7 7h8', key: 'af5zfr' }],\n];\n\n/**\n * @component @name MessageSquareText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTdhMiAyIDAgMCAxLTIgMkg2LjgyOGEyIDIgMCAwIDAtMS40MTQuNTg2bC0yLjIwMiAyLjIwMkEuNzEuNzEgMCAwIDEgMiAyMS4yODZWNWEyIDIgMCAwIDEgMi0yaDE2YTIgMiAwIDAgMSAyIDJ6IiAvPgogIDxwYXRoIGQ9Ik03IDExaDEwIiAvPgogIDxwYXRoIGQ9Ik03IDE1aDYiIC8+CiAgPHBhdGggZD0iTTcgN2g4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/message-square-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquareText = createLucideIcon('message-square-text', __iconNode);\n\nexport default MessageSquareText;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { constructNow } from \"./constructNow.js\";\nimport { isSameDay } from \"./isSameDay.js\";\nimport { subDays } from \"./subDays.js\";\n\n/**\n * The {@link isYesterday} function options.\n */\n\n/**\n * @name isYesterday\n * @category Day Helpers\n * @summary Is the given date yesterday?\n * @pure false\n *\n * @description\n * Is the given date yesterday?\n *\n * @param date - The date to check\n * @param options - An object with options\n *\n * @returns The date is yesterday\n *\n * @example\n * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?\n * const result = isYesterday(new Date(2014, 9, 5, 14, 0))\n * //=> true\n */\nexport function isYesterday(date, options) {\n  return isSameDay(\n    constructFrom(options?.in || date, date),\n    subDays(constructNow(options?.in || date), 1),\n  );\n}\n\n// Fallback for modularized imports:\nexport default isYesterday;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name constructNow\n * @category Generic Helpers\n * @summary Constructs a new current date using the passed value constructor.\n * @pure false\n *\n * @description\n * The function constructs a new current date using the constructor from\n * the reference date. It helps to build generic functions that accept date\n * extensions and use the current date.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * @param date - The reference date to take constructor from\n *\n * @returns Current date initialized using the given date constructor\n *\n * @example\n * import { constructNow, isSameDay } from 'date-fns'\n *\n * function isToday<DateType extends Date>(\n *   date: DateArg<DateType>,\n * ): boolean {\n *   // If we were to use `new Date()` directly, the function would  behave\n *   // differently in different timezones and return false for the same date.\n *   return isSameDay(date, constructNow(date));\n * }\n */\nexport function constructNow(date) {\n  return constructFrom(date, Date.now());\n}\n\n// Fallback for modularized imports:\nexport default constructNow;\n"],"names":[],"mappings":"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A,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAU,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACzC,EdOM,CUZH,ANAA,CAAA,AMAA,CNAA,AMAA,CNAA,AQYG,AFZH,EVYW,CYAD,AZAC,CAAA,OAAA,EAAiB,CYAD,AFZF,ANAZ,AJYe,QAjB7B,AAiBsC,CAAA,AYAF,ARZtB,UJLD,GAAI,aAAgB,CCAnB,ACAkB,ACAlB,ACAiB,ACAC,ACAC,ANAA,AOAD,ACAlB,ACAiB,ACAA,CAAA,KVAW,IAAK,oDACD,WAC9C,SAAW,CAAA,CWAA,AXAA,ASAA,CTAI,CWAA,AFAA,AJAD,AKAA,ANAA,AFAA,AFAC,CAAA,AWAA,ADAD,ANAA,AKAC,APAD,AGAA,CHAA,ASAC,AFAA,ACAD,AVAC,AIAD,ACAA,CDAA,AMAA,ALAA,AMAC,ATAD,AOAC,ATAA,AAAK,GAAI,UAAY,CAAA,ASAF,AEAA,ANApB,AHAsB,AQAJ,ANAA,CMAA,ALAlB,ALAsB,AWAF,AFAA,APAE,AEAJ,EJAS,CWAD,AXAC,AKA3B,AKA4B,ARAN,AOAG,ALAG,EJAD,IAAS,CSAD,AEAC,ANApC,ALAoC,CWAA,AFAD,AJAnC,ALAoC,CAAA,AWAA,AFAD,AJAnC,CAAA,WLCd,CAAC,COYH,AObI,AVCD,AMAA,AXDC,AOaJ,AHAA,AKAA,AKbI,AZaJ,CKAA,AFZG,ASDC,ANaJ,ACAA,ALAA,AFAA,ASZG,AXDC,AeAA,cdCmB,CcAd,AXYK,AOZE,AHYA,AHZA,ALAP,ASYS,AFAC,ANZI,AaAd,AZYI,CFZJ,AWAO,AHYA,ACAE,ARZK,AaAd,ATAO,AUAP,AXYK,AFAD,AKAM,CQZV,AbYI,AEAC,AFAD,AKAM,AFZH,AMAA,AXAP,AQYO,ACAE,ARZK,AaAd,QbA2B,CGYL,AGAK,AFZH,ASAxB,ANYwB,AGZD,AFYG,AMZ1B,AdA2B,ADA3B,ECA+B,IAAK,CAAA,ADApC,ASY0B,APAG,AEAE,AIAI,AOZnC,ARY2B,AOZ3B,CZY6B,AYZ7B,APY2B,AHAI,AHZK,ADApC,AQYmC,AOZnC,Cd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","ignoreList":[3,4,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]}