(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6661,e=>{"use strict";let s=(0,e.i(83206).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>s],6661)},80902,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={callServer:function(){return r.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var i in a)Object.defineProperty(t,i,{enumerable:!0,get:a[i]});let r=e.r(41354),n=e.r(45714),l=e.r(2405)},12409,e=>{"use strict";let s=(0,e.i(83206).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],12409)},63699,e=>{"use strict";let s=(0,e.i(83206).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>s],63699)},12710,e=>{"use strict";let s=(0,e.i(83206).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>s],12710)},26359,e=>{"use strict";e.i(16233),e.s([])},47146,e=>{"use strict";let s=(0,e.i(83206).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);e.s(["MessageSquare",()=>s],47146)},36764,e=>{"use strict";let s=(0,e.i(83206).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],36764)},54934,e=>{"use strict";e.i(16233),e.s([])},92265,e=>{"use strict";e.i(16233),e.s([])},23202,e=>{"use strict";e.i(16233),e.s([])},5140,e=>{"use strict";var s=e.i(15573),t=e.i(5005),a=e.i(69962);e.i(54934);var i=e.i(77607);e.i(26359);var r=e.i(63712),n=e.i(12409),l=e.i(36764),o=e.i(47146);let d=(0,e.i(83206).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var c=e.i(80902),h=(0,c.createServerReference)("606de25abb4916d6566917712865287e7e8ed54596",c.callServer,void 0,c.findSourceMapURL,"endSupportSession"),m=e.i(95403);function x({session:e,companyId:c}){let x,p,u,v=(0,a.useRouter)(),[f,g]=(0,t.useState)(0),[j,w]=(0,t.useState)(""),[k,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!e.expires_at)return;let s=()=>{let s=Math.max(0,new Date(e.expires_at).getTime()-Date.now());g(s),0===s&&(m.toast.error("Support session has expired"),v.push("/admin/dashboard/work/companies"))};s();let t=setInterval(s,1e3);return()=>clearInterval(t)},[e.expires_at,v]);let y=async()=>{b(!0);try{let s=await h(e.id,"admin");s.error?m.toast.error(s.error):(m.toast.success("Support session ended"),v.push("/admin/dashboard/work/companies"))}catch(e){m.toast.error("Failed to end session")}finally{b(!1)}};return(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(r.Badge,{variant:"secondary",className:"bg-white/20 text-white hover:bg-white/30",children:"View-As Mode"}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Company:"}),(0,s.jsxs)("span",{className:"font-mono",children:[c.slice(0,8),"..."]})]}),e.ticket_id&&(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-2 text-sm",children:[(0,s.jsx)(o.MessageSquare,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Ticket #",e.ticket_id.slice(0,8)]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-6 px-2 text-white hover:bg-white/20",asChild:!0,children:(0,s.jsx)("a",{href:`/admin/dashboard/work/support/${e.ticket_id}`,target:"_blank",children:(0,s.jsx)(d,{className:"h-3 w-3"})})})]})]}),(0,s.jsxs)("div",{className:`flex items-center gap-2 text-sm font-mono ${(x=f/1e3/60)<=5?"text-red-600":x<=15?"text-yellow-600":"text-green-600"}`,children:[(0,s.jsx)(l.Clock,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-bold",children:(p=Math.floor(f/1e3/60),u=Math.floor(f/1e3%60),`${p}:${u.toString().padStart(2,"0")}`)})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(i.Button,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",onClick:y,disabled:k,children:[(0,s.jsx)(n.X,{className:"h-4 w-4 mr-1"}),"End Session"]})})]})})})}e.s(["AdminViewAsBanner",()=>x],5140)},7805,e=>{"use strict";var s=e.i(15573),t=e.i(5005);e.i(54934);var a=e.i(77607);e.i(23202);var i=e.i(5278);e.i(92265);var r=e.i(13990),n=e.i(63699),l=e.i(12710),o=e.i(83206);let d=(0,o.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var c=e.i(6661);let h=(0,o.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),m=(0,o.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var x=e.i(69962);function p({companyId:e,sessionId:o}){let[p,u]=(0,t.useState)(!1);(0,x.usePathname)();let v=[{icon:m,label:"View Audit Trail",action:"audit",description:"View all actions for this session"},{icon:h,label:"Export Data",action:"export",description:"Export current view as CSV"},{icon:c.FileText,label:"View Session Log",action:"log",description:"See detailed session activity"}];return(0,s.jsx)("div",{className:"fixed bottom-6 right-6 z-40",children:(0,s.jsxs)(i.Card,{className:"w-80 shadow-xl border-orange-200 dark:border-orange-800",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3 cursor-pointer",onClick:()=>u(!p),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{className:"h-5 w-5 text-orange-600"}),(0,s.jsx)(i.CardTitle,{className:"text-sm",children:"Admin Tools"})]}),(0,s.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:p?(0,s.jsx)(l.ChevronDown,{className:"h-4 w-4"}):(0,s.jsx)(n.ChevronUp,{className:"h-4 w-4"})})]})}),p&&(0,s.jsx)(i.CardContent,{className:"pt-0",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Session Tools"}),v.map(e=>{let t=e.icon;return(0,s.jsx)(r.TooltipProvider,{children:(0,s.jsxs)(r.Tooltip,{children:[(0,s.jsx)(r.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>(e=>{switch(e){case"audit":window.open(`/admin/dashboard/audit-trail?session=${o}`,"_blank");break;case"export":alert("Export functionality coming soon");break;case"log":window.open(`/admin/dashboard/sessions/${o}`,"_blank");break;default:console.log("Unknown action:",e)}})(e.action),children:[(0,s.jsx)(t,{className:"h-4 w-4"}),e.label]})}),(0,s.jsx)(r.TooltipContent,{children:(0,s.jsx)("p",{children:e.description})})]})},e.action)}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{children:["Session ID: ",o.slice(0,8),"..."]}),(0,s.jsxs)("div",{children:["Company ID: ",e.slice(0,8),"..."]})]})})]})})]})})}e.s(["AdminFloatingTools",()=>p],7805)}]);